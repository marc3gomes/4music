require.config({"config": {
        "jsbuild":{"Nwdthemes_Revslider/admin/assets/js/modules/timeline.js":"/*!\r\n * REVOLUTION 6.0.0 EDITOR TIMELINE JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\n// \"use strict\";\r\n/**********************************\r\n\t-\tREVBUILDER timeline\t-\r\n********************************/\r\n(function() {\r\n\r\n\r\n\r\n\tvar splitTypes = [\"chars\",\"words\",\"lines\"],animatedLayers = [],idleMode,tlr,mainTimeLine,frameInfo,slideMaxTime,frameMagnify,cLayer,PN,keyframecache;\r\n\r\n\tRVS.F.initTimeLineModules = function() {\r\n\t\tinitLocalListeners();\r\n\t\tRVS.TL.c.layertime = jQuery('#layer_simulator_time');\r\n\t\tRVS.TL.c.layerprogress = jQuery('#layer_animation_progressarrow');\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.animateSlide = function(nextsh,actsh,comingtransition,MS) {\r\n\r\n\t\t//return interSlideAnimation(nextsh,actsh,comingtransition,MS);\r\n\t};\r\n\r\n\r\n\t/*\r\n\tTIME LINE FUNCTIONS\r\n\t*/\r\n\tRVS.F.buildMainTimeLine = function(obj) {\r\n\t\tRVS.TL[RVS.S.slideId].main = new tpGS.TimelineMax({paused:true});\r\n\r\n\t\t// Create TimeLine for BG Animation if needed\r\n\t\tRVS.TL[RVS.S.slideId] = RVS.TL[RVS.S.slideId]===undefined ? {} : RVS.TL[RVS.S.slideId];\r\n\t\tRVS.TL[RVS.S.slideId].slide = RVS.TL[RVS.S.slideId].slide===undefined ? new tpGS.gsap.timeline() : RVS.TL[RVS.S.slideId].slide;\r\n\r\n\t\t//RVS.F.buildSlideAnimation();\r\n\t\tRVS.TL[RVS.S.slideId].main.add(RVS.TL[RVS.S.slideId].slide,0);\r\n\t\tRVS.TL[RVS.S.slideId].main.add(\"end\",RVS.F.getSlideLength()/100);\r\n\t\twindow.tpfake = 1;\r\n\t\tRVS.TL[RVS.S.slideId].main.add(new tpGS.gsap.set(window,{tpfake:0}),\"end\");\r\n\r\n\t\tif (RVS.SLIDER[RVS.S.slideId].slide.panzoom.set && RVS.TL[RVS.S.slideId].panzoom!==undefined) RVS.TL[RVS.S.slideId].main.add(RVS.TL[RVS.S.slideId].panzoom,0);\r\n\r\n\t\tif (obj && (obj.time || obj.progress)) RVS.F.updateTimeLine({timeline:\"main\",state:\"time\",time:obj.tim});\r\n\r\n\r\n\t\tRVS.TL[RVS.S.slideId].main.eventCallback(\"onUpdate\", function() {\r\n\t\t\tRVS.F.updateCurTime({pos:true, cont:true, left:(this._time*100),refreshMainTimeLine:false, caller:\"buildMainTimeLine\"});\r\n\t\t});\r\n\r\n\t\tRVS.TL[RVS.S.slideId].main.eventCallback('onComplete',function() {\r\n\t\t\tif (RVS.TL.timelineStartedFromPlayStop) {\r\n\t\t\t\tRVS.TL.timelineStartedFromPlayStop = false;\r\n\t\t\t\tRVS.TL.cache.main = 0;\r\n\t\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"GoToIdle\"});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tRVS.F.resetSlideTL = function() {\r\n\t\tif (RVS.TL[RVS.S.slideId].slide!==undefined) RVS.TL[RVS.S.slideId].slide.kill();\r\n\t\tRVS.TL[RVS.S.slideId].slide = new tpGS.gsap.timeline();\r\n\t}\r\n\r\n\tRVS.F.updateFramesZIndexes = function(_) {\r\n\t\tvar z = 1000;\r\n\t\tif (RVS.L[_.layerid].timeline.frameOrder===undefined) RVS.F.getFrameOrder({layerid:_.layerid});\r\n\t\tfor (var oi in RVS.L[_.layerid].timeline.frameOrder) {\r\n\t\t\tif(!RVS.L[_.layerid].timeline.frameOrder.hasOwnProperty(oi)) continue;\r\n\t\t\tif (RVS.L[_.layerid].timeline.frameOrder[oi].id ===\"frame_0\") continue;\r\n\t\t\tvar el = document.getElementById(RVS.S.slideId+'_'+_.layerid+'_'+RVS.L[_.layerid].timeline.frameOrder[oi].id);\r\n\t\t\tif (el) tpGS.gsap.set(el,{zIndex:z});\r\n\t\t\tz--;\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tFRAME HANDLINGS\r\n\t*/\r\n\tRVS.F.addFrame = function(obj) {\r\n\r\n\t\tvar __ = {  wrap:obj.container,\r\n\t\t\t\t\tbg:jQuery(obj.container.getElementsByTagName(\"framebg\")[0]),\r\n\t\t\t\t\tframe:RVS.F.cE({t:'framewrap',id:RVS.S.slideId+'_'+obj.layerid+'_'+obj.frame , cN:\"frame_\"+obj.frame, ds:{layertype:obj.layertype,layerid:obj.layerid,frame:obj.frame}}),\r\n\t\t\t\t\tframedelay:RVS.F.cE({t:'framedelay'}),\r\n\t\t\t\t\tinfo:RVS.F.cE({t:'frameinfo'}),\r\n\t\t\t\t\tsloop:RVS.F.cE({t:'startloop'}),\r\n\t\t\t\t\teloop:RVS.F.cE({t:'endloop'}),\r\n\t\t\t\t\tmarker:RVS.F.cE({t:'marker'}),\r\n\t\t\t\t\tobj : obj\r\n\t\t\t\t};\r\n\r\n\t\tif (obj.frame === \"frame_1\") {\r\n\t\t\t__.frame.appendChild(RVS.F.cE({t:'ffbefore',ds:{frame:\"frame_0\"}}));\r\n\t\t\t__.frame.appendChild(RVS.F.cE({t:'ffafter',ds:{frame:\"frame_1\"}}));\r\n\t\t}\r\n\t\t__.framedelay.textContent = \"2500\";\r\n\t\t__.sloop.appendChild(RVS.F.cI({c:\"chevron_right\"}));\r\n\t\t__.eloop.appendChild(RVS.F.cI({c:\"chevron_left\"}));\r\n\r\n\t\t__.frame.appendChild(__.framedelay);\r\n\t\t__.frame.appendChild(__.sloop);\r\n\t\t__.frame.appendChild(__.eloop);\r\n\t\t__.frame.appendChild(__.info);\r\n\t\t__.frame.appendChild(__.marker);\r\n\r\n\t\tobj.container.appendChild(__.frame);\r\n\r\n\t\tif (RVS.TL.frameMouseListenerObjects===undefined) {\r\n\t\t\tRVS.TL.frameMouseListenerObjects={};\r\n\t\t\tRVS.DOC.on('mouseenter','framewrap',function() {\r\n\t\t\t\tif (this.dataset.mlisteners===undefined) {\r\n\t\t\t\t\tthis.dataset.mlisteners=true;\r\n\t\t\t\t\tvar __ = RVS.TL.frameMouseListenerObjects[this.id];\r\n\t\t\t\t\t__.jframe = jQuery(__.frame);\r\n\r\n\t\t\t\t\tif (__.obj.resize!==undefined) {\r\n\t\t\t\t\t\t__.jframe.resizable({\r\n\t\t\t\t\t\t\thandles:__.obj.resize,\r\n\t\t\t\t\t\t\tminWidth:5,\r\n\t\t\t\t\t\t\tstart:__.obj.start,\r\n\t\t\t\t\t\t\tstop:__.obj.stopresize,\r\n\t\t\t\t\t\t\tresize:__.obj.onresize\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (__.obj.ondrag!==undefined) {\r\n\t\t\t\t\t\t__.jframe.draggable({\r\n\t\t\t\t\t\t\taxis:\"x\",\r\n\t\t\t\t\t\t\tdelay:50,\r\n\t\t\t\t\t\t\tstart:__.obj.start,\r\n\t\t\t\t\t\t\tstop:__.obj.stopdrag,\r\n\t\t\t\t\t\t\tdrag:__.obj.ondrag\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t__.bg.draggable({\r\n\t\t\t\t\t\t\taxis:\"x\",\r\n\t\t\t\t\t\t\tdelay:50,\r\n\t\t\t\t\t\t\tstart:__.obj.start,\r\n\t\t\t\t\t\t\tstop:__.obj.stopdrag,\r\n\t\t\t\t\t\t\tdrag:__.obj.ondrag\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tRVS.TL.frameMouseListenerObjects[__.frame.id] = __;\r\n\r\n\r\n\t\treturn __;\r\n\t};\r\n\t/*\r\n\tBUILD 1x MAIN SLIDE FRAME (USED FOR ALL SLIDES, NO DIFFERENCES BETWEEN SLIDES, ONLY 1 REFERENCE)\r\n\t*/\r\n\tRVS.F.buildSlideFrames = function() {\r\n\t\tRVS.TL.fref = RVS.TL.fref===undefined ?\r\n\t\t\t\tRVS.F.addFrame({\r\n\t\t\t\t\tcontainer:document.querySelector('#slide_frame_container .frameswrap'),\r\n\t\t\t\t\tframe:\"0\",\r\n\t\t\t\t\tresize:\"e\",\r\n\t\t\t\t\tlayerid:\"\",\r\n\t\t\t\t\tstart:function(event,ui) {\r\n\t\t\t\t\t\tmainTimeLine = RVS.TL[RVS.S.slideId] && RVS.TL[RVS.S.slideId].main ? RVS.TL[RVS.S.slideId].main.time() : 0;\r\n\t\t\t\t\t\tmainTimeLine = mainTimeLine<0.0015 ? \"idle\" : mainTimeLine;\r\n\t\t\t\t\t\tframeInfo = ui.element.find('frameinfo');\r\n\t\t\t\t\t\tslideMaxTime = RVS.F.getSlideLength();\r\n\t\t\t\t\t\tRVS.TL.inDrag = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonresize:function(event,ui) {\r\n\t\t\t\t\t\tui.size.width = ui.size.width<=slideMaxTime ? ui.size.width : slideMaxTime;\r\n\t\t\t\t\t\tvar v = RVS.F.slideAnimWithMoreRowCol() ? (ui.size.width*10)/ (1+1/(RVS.SLIDER[RVS.S.slideId].slide.slideChange.d/10)) : ui.size.width*10;\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".slide.slideChange.speed\",val:Math.round(v),ignoreBackup:true});\r\n\t\t\t\t\t\tRVS.F.buildMainTimeLine({time:mainTimeLine});\r\n\t\t\t\t\t\tRVS.F.redrawSlideBG();\r\n\t\t\t\t\t\tframeInfo[0].innerHTML = ui.size.width*10;\r\n\t\t\t\t\t\tdocument.getElementById('sltrans_duration').value = Math.round(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tstopresize:function(event,ui) {\r\n\t\t\t\t\t\t//CREATE BACKUP\r\n\t\t\t\t\t\tvar v = RVS.F.slideAnimWithMoreRowCol() ? (ui.size.width*10)/ (1+1/(RVS.SLIDER[RVS.S.slideId].slide.slideChange.d/10)) : ui.size.width*10;\r\n\t\t\t\t\t\tRVS.F.backup({path:RVS.S.slideId+\".slide.slideChange.speed\", lastkey:\"speed\", val:Math.round(v), old:ui.originalSize.width*10});\r\n\t\t\t\t\t\tRVS.F.buildMainTimeLine({time:mainTimeLine});\r\n\t\t\t\t\t\tRVS.F.timelineDragsStop();\r\n\t\t\t\t\t\tRVS.F.redrawSlideBG();\r\n\t\t\t\t\t\tdocument.getElementById('sltrans_duration').value =  Math.round(v);\r\n\t\t\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\t\t\tRVS.F.updateSlideFrames();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}) : RVS.TL.fref;\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\tRVS.F.updateSlideFrames();\r\n\t\t});\r\n\t};\r\n\r\n\tRVS.F.slideAnimWithMoreRowCol = function() {\r\n\t\tlet mcr = RVS.SLIDER[RVS.S.slideId].slide.slideChange.in.row>1 || RVS.SLIDER[RVS.S.slideId].slide.slideChange.in.col>1;\r\n\t\tfor (var i in RVS.JHOOKS.slideAnimRowColCheck) {\r\n\t\t\tif(!RVS.JHOOKS.slideAnimRowColCheck.hasOwnProperty(i)) continue;\r\n\t\t\tmcr = RVS.JHOOKS.slideAnimRowColCheck[i](mcr);\r\n\t\t}\r\n\t\treturn mcr;\r\n\t}\r\n\r\n\t/*\r\n\tUPDATE THE SLIDE FRAME SIZES\r\n\t*/\r\n\tRVS.F.updateSlideFrames = function(obj) {\r\n\r\n\t\tobj = obj===undefined ? {} : obj;\r\n\t\tobj.slidedelay = obj.slidedelay===undefined ? RVS.F.getSlideLength() : obj.slidedelay;\r\n\t\tvar MS = RVS.SLIDER[RVS.S.slideId].slide.slideChange.speed;\r\n\t\tMS = MS===\"default\" || MS===\"Default\" || MS===\"Random\" ? 1000 : parseFloat(MS,0);\r\n\t\tlet mcr = RVS.F.slideAnimWithMoreRowCol();\r\n\t\tvar subMS = (mcr ? MS/(RVS.SLIDER[RVS.S.slideId].slide.slideChange.d/10) : 0);\r\n\r\n\t\tMS = Math.round(Math.round(MS + subMS)/10);\r\n\t\tRVS.TL.ssubref = RVS.TL.ssubref===undefined ? document.getElementById('slideframespeed_sub') : RVS.TL.ssubref;\r\n\t\tobj.animspeed = obj.animspeed===undefined ? MS : obj.animspeed;\r\n\t\tRVS.TL.ssubref.innerHTML = \"(\" + obj.animspeed*10 + \")\";\r\n\t\ttpGS.gsap.set(RVS.TL.fref.wrap,{width: obj.slidedelay});\r\n\t\ttpGS.gsap.set(RVS.TL.fref.frame,{width: obj.animspeed});\r\n\t\tRVS.TL.fref.info.innerHTML = obj.animspeed*10;\r\n\t};\r\n\r\n\r\n\t/*\r\n\tADD ALL FRAMES IN ONE GO FROM ONE LAYER\r\n\t*/\r\n\tRVS.F.addLayerFrames = function(layer,layerelement) {\r\n\t\tRVS.TL[RVS.S.slideId].layers = RVS.TL[RVS.S.slideId].layers===undefined ? {} : RVS.TL[RVS.S.slideId].layers;\r\n\t\tRVS.TL[RVS.S.slideId].layers[layer.uid] = RVS.TL[RVS.S.slideId].layers[layer.uid] ===undefined ? {} : RVS.TL[RVS.S.slideId].layers[layer.uid];\r\n\t\tvar slideLength = RVS.F.getSlideLength()*10;\r\n\t\tif (layer.timeline.frameOrder===undefined) RVS.F.getFrameOrder({layerid:layer.uid});\r\n\t\tfor (var oi in layer.timeline.frameOrder) {\r\n\t\t\tif(!layer.timeline.frameOrder.hasOwnProperty(oi)) continue;\r\n\t\t\tvar findex = layer.timeline.frameOrder[oi].id;\r\n\t\t\tif (findex ===\"frame_0\") continue;\r\n\t\t\tlayer.timeline.frames.frame_999.timeline.start = layer.timeline.frames.frame_999.timeline.start===0 || layer.timeline.frames.frame_999.timeline.start> slideLength ? slideLength : layer.timeline.frames.frame_999.timeline.start;\r\n\t\t\tRVS.F.addLayerFrameOnDemand(layer,layerelement,findex);\r\n\t\t}\r\n\t\tRVS.F.updateFramesZIndexes({layerid:layer.uid});\r\n\t};\r\n\r\n\tRVS.F.addLayerFrameOnDemand = function(layer,layerelement,frame) {\r\n\r\n\t\tRVS.F.addLayerFrame({\tframe:layer.timeline.frames[frame],\r\n\t\t\t\t\t\t\t\tframeindex:frame,\r\n\t\t\t\t\t\t\t\tlayerid:layer.uid,\r\n\t\t\t\t\t\t\t\tlayertype:layer.type,\r\n\t\t\t\t\t\t\t\tframecontainer:RVS.TL[RVS.S.slideId].layers[layer.uid],\r\n\t\t\t\t\t\t\t\twrap:layerelement.querySelector('.frameswrap')\r\n\t\t\t\t\t\t\t});\r\n\t\tRVS.F.updateLayerFrame({layerid:layer.uid, frame:frame});\r\n\t};\r\n\r\n\t/*\r\n\tADD LAYER FRAME AND ITS LISTENERS\r\n\t*/\r\n\tRVS.F.getLayerAliasAndFrame = function(_) {\r\n\t\tvar r = _.frame.replace(\"_\",\" \").replace(\"f\",\"F\");\r\n\t\tr = RVS.F.sanitize_input(RVS.L[_.layerid].alias)+\" \"+r;\r\n\t\treturn r;\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE THE CHILDREN POSITIONS ON THE TIMELINE\r\n\t*/\r\n\tRVS.F.setChildrenTimelines = function(_) {\r\n\t\tif (_.childLayers===undefined) return;\r\n\r\n\t\tfor (var li in _.childLayers) {\r\n\t\t\tif(!_.childLayers.hasOwnProperty(li)) continue;\r\n\t\t\tvar cl = _.childLayers[li];\r\n\r\n\t\t\tfor (var oi in RVS.L[li].timeline.frameOrder) if (RVS.L[li].timeline.frameOrder.hasOwnProperty(oi)) {  // Changed Frame Order based Update instead of simple Update\r\n\t\t\t\t//for (var fi in cl.frames) {\r\n\t\t\t\tfi = RVS.L[li].timeline.frameOrder[oi];\r\n\t\t\t\tif(!cl.frames.hasOwnProperty(fi)) continue;\r\n\t\t\t\tif (fi===\"frame_0\") continue;\r\n\t\t\t\tvar limits = RVS.F.getPrevNextFrame({layerid:li, frame:fi}),\r\n\t\t\t\t\tnstart = cl.frames[fi]/10 -_.difference;\r\n\r\n\t\t\t\tif (limits.prev.end/10>=nstart)\r\n\t\t\t\t\tnstart = limits.prev.end/10;\r\n\t\t\t\telse\r\n\t\t\t\tif (limits.next.start/10<=nstart+limits.cur.framelength/10)\r\n\t\t\t\t\tnstart = limits.next.start/10 - limits.cur.framelength/10;\r\n\r\n\t\t\t\tif (nstart>slideMaxTime)\r\n\t\t\t\t\tnstart = slideMaxTime;\r\n\r\n\t\t\t\tif (cl.endWithSlide===undefined)\r\n\t\t\t\t\tRVS.SLIDER[RVS.S.slideId].layers[li].timeline.frames[fi].timeline.start = nstart*10;\r\n\t\t\t\telse\r\n\t\t\t\tif (cl.endWithSlide)\r\n\t\t\t\t\tRVS.SLIDER[RVS.S.slideId].layers[li].timeline.frames[fi].timeline.start = nstart*10;\r\n\t\t\t\telse\r\n\t\t\t\tif (cl.frames[fi]>slideMaxTime*10 && fi===\"frame_999\" && !cl.endWithSlide) {\r\n\t\t\t\t\tRVS.SLIDER[RVS.S.slideId].layers[li].timeline.frames[fi].timeline.start = Math.max(limits.prev.end,slideMaxTime*10);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tRVS.F.updateLayerFrame({layerid:li, frame:fi,maxtime:slideMaxTime});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE THE CHILDREN POSITIONS ON THE TIMELINE\r\n\t*/\r\n\tRVS.F.moveChildrenTimelines = function(_) {\r\n\t\tif (_.childLayers===undefined) return;\r\n\t\tfor (var li in _.childLayers) {\r\n\t\t\tif(!_.childLayers.hasOwnProperty(li)) continue;\r\n\t\t\tif (frameMagnify == 1 && li!==cLayer.layerid) continue;\r\n\t\t\tvar cl = _.childLayers[li],\r\n\t\t\t\tflen = cl.forder.length-1;\r\n\t\t\tfor (var i in cl.forder) {\r\n\t\t\t\tif(!cl.forder.hasOwnProperty(i)) continue;\r\n\t\t\t\tvar fi = _.order===-1 ? cl.forder[flen-i] : cl.forder[i];\r\n\t\t\t\tif (fi===\"frame_0\") continue;\r\n\t\t\t\tvar limits = RVS.F.getPrevNextFrame({layerid:li, frame:fi}),\r\n\t\t\t\t\tnstart = cl.frames[fi]/10 -_.difference;\r\n\r\n\t\t\t\tif (limits.prev.frameid===cLayer.frame && _.thend && limits.prev) nstart = nstart < _.thend ? _.thend : nstart;\r\n\t\t\t\tif (0>nstart) nstart = 0;\r\n\t\t\t\tif (limits.next.start/10<nstart+limits.cur.framelength/10) nstart = limits.next.start/10 - limits.cur.framelength/10;\r\n\t\t\t\tif (nstart>slideMaxTime) nstart = slideMaxTime;\r\n\t\t\t\tif (cl.endWithSlide===undefined || cl.endWithSlide) RVS.SLIDER[RVS.S.slideId].layers[li].timeline.frames[fi].timeline.start = nstart*10;\r\n\t\t\t\tif (cl.frames[fi]>slideMaxTime*10 && fi===\"frame_999\" && !cl.endWithSlide) RVS.SLIDER[RVS.S.slideId].layers[li].timeline.frames[fi].timeline.start = Math.max(limits.prev.end,slideMaxTime*10);\r\n\r\n\t\t\t\tRVS.F.updateLayerFrame({layerid:li, frame:fi,maxtime:slideMaxTime});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/*\r\n\tBACKUP THE CHILDREN CHANGES ON TIMELINE. ONLY CALL FROM BACKUPGROUP !!\r\n\t*/\r\n\tRVS.F.backupChildren = function(_) {\r\n\t\tif (_.childLayers===undefined) return;\r\n\t\tfor (var li in _.childLayers) {\r\n\t\t\tif(!_.childLayers.hasOwnProperty(li)) continue;\r\n\t\t\tvar cl = _.childLayers[li];\r\n\t\t\tfor (var fi in cl.frames) {\r\n\t\t\t\tif(!cl.frames.hasOwnProperty(fi)) continue;\r\n\t\t\t\tRVS.F.backup({\tpath:RVS.S.slideId+\".layers.\"+li+\".timeline.frames.\"+fi+\".timeline.start\",\r\n\t\t\t\t\t\t\t\tlastkey:\"start\",\r\n\t\t\t\t\t\t\t\tval:RVS.SLIDER[RVS.S.slideId].layers[li].timeline.frames[fi].timeline.start,\r\n\t\t\t\t\t\t\t\told:cl.frames[fi]});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.getFirstFrame = function(_) {\r\n\t\tif (RVS.L[_.layerid].timeline.frameOrder===undefined) RVS.F.getFrameOrder({layerid:_.layerid});\r\n\t\tif (RVS.L[_.layerid].timeline.frameOrder[0].id===\"frame_0\")\r\n\t\t\treturn RVS.L[_.layerid].timeline.frameOrder[1].id;\r\n\t\telse\r\n\t\t\treturn RVS.L[_.layerid].timeline.frameOrder[0].id;\r\n\t};\r\n\r\n\t// ADD ONE SINGLE LAYER FRAME TO THE TIMELINE\r\n\tRVS.F.addLayerFrame = function(_) {\r\n\t\t_.framecontainer[_.frameindex] = RVS.F.addFrame({\r\n\t\t\tcontainer:_.wrap,\r\n\t\t\tframe:_.frameindex,\r\n\t\t\tlayerid:_.layerid,\r\n\t\t\tlayertype:_.layertype,\r\n\t\t\tresize:\"w,e\",\r\n\r\n\t\t\tstart:function(event,ui) {\r\n\t\t\t\tRVS.TL.inDrag = true;\r\n\t\t\t\tRVS.TL.tS.classList.add(\"frame_in_drag\");\r\n\r\n\t\t\t\tRVS.TL.timeBeforeFrameChange = RVS.TL[RVS.S.slideId].main==undefined ? 0 : RVS.TL[RVS.S.slideId].main.time();\r\n\t\t\t\tcLayer = ui.element===undefined ? { licontainer:document.getElementById('tllayerlist_element_'+RVS.S.slideId+\"_\"+ui.helper[0].dataset.layerid) , layerid:ui.helper[0].dataset.layerid, frame:ui.helper[0].dataset.frame, type:ui.helper[0].dataset.layertype, bg:ui.helper[0].dataset.bg}\r\n\t\t\t\t\t\t\t\t: { layerid:ui.element[0].dataset.layerid, frame:ui.element[0].dataset.frame, type:ui.element[0].dataset.layertype, bg:ui.element[0].dataset.bg};\r\n\t\t\t\tif (cLayer.bg!==\"true\") {\r\n\t\t\t\t\tcLayer.frameName = RVS.F.getLayerAliasAndFrame(cLayer);\r\n\t\t\t\t\tPN =  RVS.F.getPrevNextFrame(cLayer);\r\n\t\t\t\t\tcLayer.path = RVS.F.getLayerObjPath(cLayer);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcLayer.layerwidth = ui.helper.width();\r\n\t\t\t\t\tcLayer.frame = \"All Frames\";\r\n\t\t\t\t\tPN =  RVS.F.getPrevNextFrame({layerid:cLayer.layerid, frame:RVS.F.getFirstFrame({layerid:cLayer.layerid})});\r\n\t\t\t\t\tcLayer.frameName = RVS.F.getLayerAliasAndFrame(cLayer);\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tslideMaxTime = RVS.F.getSlideLength();\r\n\r\n\t\t\t\t// IF BG DRAGGED, OR DRAGGED && IT IS A GROUPPING ELEMENT\r\n\t\t\t\tif ((cLayer.bg && event.type==\"dragstart\" && jQuery.inArray(cLayer.type,[\"column\",\"row\",\"group\"])>=0) || (event.type==\"dragstart\" && cLayer.frame==RVS.F.getFirstFrame({layerid:cLayer.layerid}) && jQuery.inArray(cLayer.type,[\"column\",\"row\",\"group\"])>=0))\r\n\t\t\t\t\tcLayer.childLayers = RVS.F.getLayerChildren({layerid:cLayer.layerid});\r\n\r\n\r\n\t\t\t\t//EXTEND CHILDREN WITH ITS OWN FRAMES IF WE DRAG THE BG\r\n\t\t\t\tif (cLayer.bg)\r\n\t\t\t\t\tcLayer.childLayers = RVS.F.getLayerFrames({layerid:cLayer.layerid, extend:cLayer.childLayers});\r\n\t\t\t\telse // EXTEND CHILDREN WITH THE FRAMES BEHIND THE CURRENT FRAME ON THE SAME TIMELINE\r\n\t\t\t\t\tcLayer.childLayers = RVS.F.getLayerFrames({layerid:cLayer.layerid, extend:cLayer.childLayers, afterStart:PN.cur.start, include999:true});\r\n\r\n\t\t\t\t//IF FRAMEMAGNIFY IS ON\r\n\t\t\t\tif (frameMagnify == 1 || frameMagnify == 2)\r\n\t\t\t\t\tfor (var i in cLayer.childLayers) {\r\n\t\t\t\t\t\tif(!cLayer.childLayers.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tcLayer.childLayers[i].forder = [];\r\n\t\t\t\t\t\tfor (var fi in cLayer.childLayers[i].frames) {\r\n\t\t\t\t\t\t\tif(!cLayer.childLayers[i].frames.hasOwnProperty(fi)) continue;\r\n\t\t\t\t\t\t\tcLayer.childLayers[i].forder.push(fi);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t//window.smallestChildLayerStarts = RVS.F.getSmallestFrameInChildren({childLayers:cLayer.childLayers});\r\n\r\n\t\t\t\t// Here Attach also all Selected Layers Later (Extend the cLayer.childLayers) Object. Everything else will be done automatically\r\n\r\n\t\t\t\t// UPDATE FRAME TIME\r\n\t\t\t\tRVS.F.updateFrameTime({pos:true, cont:true, left:(PN.cur.start-0.310)});\r\n\r\n\t\t\t\tif (cLayer.frame === \"frame_1\") {\r\n\t\t\t\t\tjQuery(cLayer.licontainer).addClass(\"frame_1_indrag\");\r\n\t\t\t\t\tfor (var i in cLayer.childLayers) {\r\n\t\t\t\t\t\tif(!cLayer.childLayers.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tcLayer.childLayers[i].hiddenc = document.getElementById('frame_unvisible_start_'+RVS.S.slideId+\"_\"+i);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tondrag:function(event,ui) {\r\n\r\n\t\t\t\tif (ui.position.left>window.lastCachedUiPosition && (frameMagnify == 1 || frameMagnify == 2)) RVS.F.moveChildrenTimelines({thend:((ui.position.left+cLayer.framelength/10)), order:-1,childLayers:cLayer.childLayers, difference: (ui.originalPosition.left - ui.position.left)});\r\n\t\t\t\tPN =  RVS.F.getPrevNextFrame(cLayer);\r\n\r\n\t\t\t\t//CHECK FOR FRAMES\r\n\t\t\t\tif (cLayer.bg!==\"true\") {\r\n\t\t\t\t\tif (cLayer.frame!==\"frame_1\" && PN.prev.end/10>=ui.position.left) ui.position.left = PN.prev.end/10;\r\n\t\t\t\t\tif (cLayer.frame==\"frame_1\" && 0>=ui.position.left) ui.position.left = 0;\r\n\t\t\t\t\tif (PN.next.layerid == cLayer.layerid && PN.next.start/10<=ui.position.left+PN.cur.framelength/10) ui.position.left = PN.next.start/10 - PN.cur.framelength/10;\r\n\t\t\t\t\tif (ui.position.left>slideMaxTime) ui.position.left = slideMaxTime;\r\n\t\t\t\t} else {//CHECK FOR FULL CONTAINER\r\n\t\t\t\t\tui.position.left = ui.position.left<PN.prev.end/10 ? PN.prev.end/10 :\r\n\t\t\t\t\t\t\t\t\t   parseInt(ui.position.left,0) + parseInt(cLayer.layerwidth,0) >= slideMaxTime ? slideMaxTime - cLayer.layerwidth :\r\n\t\t\t\t\t\t\t\t\t   ui.position.left;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (frameMagnify == 1 || frameMagnify == 2)  RVS.F.moveChildrenTimelines({thend:((ui.position.left+cLayer.framelength/10)), childLayers:cLayer.childLayers, difference: (ui.originalPosition.left - ui.position.left)});\r\n\r\n\t\t\t\twindow.lastCachedUiPosition = ui.position.left;\r\n\r\n\t\t\t\tif (cLayer.bg!==\"true\") {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:cLayer.path+\"start\",val:Math.round(ui.position.left*10),ignoreBackup:true});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:cLayer.path+\"startRelative\",val:(Math.round(ui.position.left*10) - PN.prev.end),ignoreBackup:true});\r\n\t\t\t\t\tcLayer.framelength = PN.cur.framelength;\r\n\t\t\t\t\tRVS.F.updateLayerFrame(cLayer);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.F.updateLayerFrame({layerid:cLayer.layerid, frame:\"frame_999\"});\r\n\t\t\t\t}\r\n\t\t\t\tif (jQuery.inArray(parseInt(cLayer.layerid,0),RVS.selLayers)>=0) document.getElementById('layerframestart').value = Math.round(ui.position.left*10);\r\n\r\n\t\t\t\t// UPDATE FRAME TIME\r\n\t\t\t\tRVS.F.updateFrameTime({pos:true, cont:true, left:ui.position.left-0.310});\r\n\t\t\t\tfor (var i in cLayer.childLayers) {\r\n\t\t\t\t\tif(!cLayer.childLayers.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tif (i!==cLayer.layerid) tpGS.gsap.set(cLayer.childLayers[i].hiddenc,{width:(ui.position.left+20)});\r\n\t\t\t\t}\r\n\t\t\t\tPN =  RVS.F.getPrevNextFrame(cLayer);\r\n\t\t\t},\r\n\r\n\t\t\tonresize:function(event,ui) {\r\n\t\t\t\tif (cLayer.frame!==\"frame_1\" && PN.prev.end/10>ui.position.left) {\r\n\t\t\t\t\tui.position.left = PN.prev.end/10;\r\n\t\t\t\t\tui.size.width = ((PN.cur.end - PN.prev.end) / 10);\r\n\t\t\t\t} else\r\n\t\t\t\tif (cLayer.frame==\"frame_1\" && 0>ui.position.left) {\r\n\t\t\t\t\tui.position.left = 0;\r\n\t\t\t\t\tui.size.width = (PN.cur.end) / 10;\r\n\t\t\t\t} else\r\n\t\t\t\tif (PN.next.start/10<=ui.position.left+ui.size.width) {\r\n\t\t\t\t\tui.size.width = (( PN.next.start - PN.cur.start) / 10);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ui.position.left>slideMaxTime)\r\n\t\t\t\t\tui.position.left = slideMaxTime;\r\n\r\n\t\t\t\tRVS.F.updateSliderObj({path:cLayer.path+\"start\",val:Math.round(ui.position.left*10),ignoreBackup:true});\r\n\t\t\t\tRVS.F.updateSliderObj({path:cLayer.path+\"startRelative\",val:(Math.round(ui.position.left*10) - PN.prev.end),ignoreBackup:true});\r\n\t\t\t\tRVS.F.updateSliderObj({path:cLayer.path+\"speed\",val:Math.round((ui.size.width*10) - PN.cur.splitDelay),ignoreBackup:true});\r\n\r\n\t\t\t\tRVS.F.updateLayerFrame(cLayer);\r\n\t\t\t\t//Also Update Frame999 if Reverse Animation enabled\r\n\t\t\t\tif (cLayer.frame===\"frame_1\" && RVS.L[cLayer.layerid].timeline.frames.frame_999.timeline.auto===true) RVS.F.updateLayerFrame({layerid:cLayer.layerid,frame:\"frame_999\"});\r\n\t\t\t\tif (jQuery.inArray(parseInt(cLayer.layerid,0),RVS.selLayers)>=0) {\r\n\t\t\t\t\tdocument.getElementById('layerframespeed').value = Math.round((ui.size.width*10) - PN.cur.splitDelay);\r\n\t\t\t\t\tdocument.getElementById('layerframestart').value = Math.round(ui.position.left*10);\r\n\t\t\t\t\tdocument.getElementById('layerframespeed_sub').innerHTML = \"(\"+Math.round(ui.size.width*10)+\")\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tstopdrag:function(event,ui) {\r\n\t\t\t\tjQuery(cLayer.licontainer).removeClass(\"frame_1_indrag\");\r\n\t\t\t\tRVS.F.timelineDragsStop();\r\n\t\t\t\t//BACKUP VALUES\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"frame\",txt:cLayer.frameName+\" Start\",icon:\"access_time\"});\r\n\r\n\t\t\t\t//UPDATE RELATIVE TIMES AND CHILDREN RELATIVE TIMES->\r\n\t\t\t\tRVS.F.updateAllstartRelatives();\r\n\r\n\t\t\t\tRVS.F.backup({path:cLayer.path+\"start\", lastkey:\"start\", val:Math.round(ui.position.left*10), old:Math.round(ui.originalPosition.left*10)});\r\n\t\t\t\tRVS.F.backupChildren({childLayers:cLayer.childLayers});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"frame\"});\r\n\t\t\t\tRVS.F.renderLayerAnimation({layerid:cLayer.layerid, timeline:\"full\",time:RVS.TL.timeBeforeFrameChange});\r\n\t\t\t\tfor (var i in cLayer.childLayers) {\r\n\t\t\t\t\tif(!cLayer.childLayers.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tRVS.F.renderLayerAnimation({layerid:i, timeline:\"full\",time:RVS.TL.timeBeforeFrameChange});\r\n\t\t\t\t}\r\n\t\t\t\tRVS.TL.tS.classList.remove(\"frame_in_drag\");\r\n\t\t\t},\r\n\r\n\t\t\tstopresize:function(event,ui) {\r\n\t\t\t\tRVS.F.timelineDragsStop();\r\n\t\t\t\t//BACKUP VALUES\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"frame\",txt:cLayer.frameName+\" Speed\",icon:\"slow_motion_video\"});\r\n\t\t\t\t//UPDATE RELATIVE TIMES AND CHILDREN RELATIVE TIMES->\r\n\t\t\t\tRVS.F.updateAllstartRelatives();\r\n\t\t\t\tRVS.F.backup({path:cLayer.path+\"start\", lastkey:\"start\", val:Math.round(ui.position.left*10), old:Math.round(ui.originalPosition.left*10)});\r\n\t\t\t\tRVS.F.backup({path:cLayer.path+\"speed\", lastkey:\"speed\", val:Math.round((ui.size.width*10) - PN.cur.splitDelay), old:Math.round((ui.originalSize.width*10) - PN.cur.splitDelay)});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"frame\"});\r\n\t\t\t\tui.element.css({maxWidth:\"none\"});\r\n\t\t\t\tRVS.F.renderLayerAnimation({layerid:cLayer.layerid, timeline:\"full\",time:RVS.TL.timeBeforeFrameChange});\r\n\t\t\t\tfor (var i in cLayer.childLayers) {\r\n\t\t\t\t\tif(!cLayer.childLayers.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tRVS.F.renderLayerAnimation({layerid:i, timeline:\"full\",time:RVS.TL.timeBeforeFrameChange});\r\n\t\t\t\t}\r\n\t\t\t\tRVS.TL.tS.classList.remove(\"frame_in_drag\");\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tRVS.F.updateAllstartRelatives = function() {\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (li>=0 && li<=9999)\r\n\t\t\t\tfor (var oi in RVS.L[li].timeline.frameOrder) {\r\n\t\t\t\t\tif(!RVS.L[li].timeline.frameOrder.hasOwnProperty(oi)) continue;\r\n\t\t\t\t\tvar fi = RVS.L[li].timeline.frameOrder[oi].id;\r\n\t\t\t\t\tif (fi ===\"frame_0\") continue;\r\n\t\t\t\t\tvar\ta = RVS.F.getPrevNextFrame({layerid:RVS.L[li].uid, frame:fi});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.F.getLayerObjPath({layerid:RVS.L[li].uid, frame:fi})+\"startRelative\",val:(a.cur.start - a.prev.end)});\r\n\t\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.getLayerObjPath = function(_) {\r\n\t\treturn RVS.S.slideId+\".layers.\"+_.layerid+\".timeline.frames.\"+_.frame+\".timeline.\";\r\n\t};\r\n\r\n\t/*\r\n\tGET PREVIOUS AND NEXT FRAME IN TIME\r\n\t*/\r\n\tRVS.F.getPrevNextFrame = function(_) {\r\n\r\n\t\tvar frame = RVS.L[_.layerid].timeline.frames[_.frame].timeline,\r\n\t\t\tframesd = RVS.F.getSplitDelay({layerid:_.layerid, frame:_.frame}),\r\n\t\t\tframeend = RVS.F.addT([frame.start,frame.speed,framesd]),\r\n\t\t\tfirstframe = RVS.F.getFirstFrame({layerid:_.layerid}),\r\n\t\t\tpn = {\tcur:{start:frame.start, end:frameend, splitDelay:framesd, framelength:(frameend-frame.start)},\r\n\t\t\t\t\tprev:{start:-1,end:0,frame:{}},\r\n\t\t\t\t\tnext:{start:9999999, end:9999999, frame:{}}\r\n\t\t\t\t};\r\n\r\n\t\t\t//emptyspace calculation for Stucked Frame Movents ?!\r\n\r\n\t\tfor (var fi in RVS.L[_.layerid].timeline.frames) {\r\n\t\t\tif(!RVS.L[_.layerid].timeline.frames.hasOwnProperty(fi)) continue;\r\n\t\t\tif (fi===\"frame_0\") continue;\r\n\t\t\tif (fi!==_.frame) {\r\n\t\t\t\tvar c = RVS.L[_.layerid].timeline.frames[fi].timeline;\r\n\t\t\t\tif (c.start<frame.start && c.start>pn.prev.start)\r\n\t\t\t\t\tpn.prev = {start:c.start, end:RVS.F.addT([c.start,c.speed,RVS.F.getSplitDelay({layerid:_.layerid, frame:fi})]), frame:c,layerid:_.layerid, frameid:fi};\r\n\t\t\t\tif (c.start>frame.start && c.start<pn.next.start)\r\n\t\t\t\t\tpn.next = {start:c.start, end:RVS.F.addT([c.start,c.speed,RVS.F.getSplitDelay({layerid:_.layerid, frame:fi})]), frame:c, layerid:_.layerid, frameid:fi};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (_.frame==firstframe && RVS.L[_.layerid].group.puid!==-1 && jQuery.inArray(RVS.L[_.layerid].group.puid,[\"top\",\"bottom\",\"middle\"])==-1) {\r\n\t\t\tvar gfirstframe = RVS.F.getFirstFrame({layerid:RVS.L[_.layerid].group.puid}),\r\n\t\t\t\tgframe = RVS.L[RVS.L[_.layerid].group.puid].timeline.frames[gfirstframe].timeline;\r\n\t\t\tpn.prev.end = gframe.start;\r\n\t\t\t/* var _framesd = \tRVS.F.getSplitDelay({layerid:RVS.L[_.layerid].group.puid, frame:gfirstframe}), */\r\n\t\t\tvar _frameend = RVS.F.addT([gframe.start,gframe.speed,framesd]);\r\n\t\t\tpn.prev.framelength = _frameend - gframe.start;\r\n\t\t\tpn.prev.realEnd = _frameend;\r\n\t\t}\r\n\r\n\r\n\t\treturn pn;\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE RELATIVE TIME ON FRAME\r\n\t*/\r\n\tRVS.F.setStartRelative = function(_) {\r\n\t\tif (RVS.TL[RVS.S.slideId].layers===undefined || RVS.TL[RVS.S.slideId].layers[_.layerid]===undefined) return;\r\n\r\n\t};\r\n\t/*\r\n\tUPDATE THE REAL SPEED IN FRAME SPEED SUB FIELD\r\n\t*/\r\n\tRVS.F.updateFrameRealSpeed = function() {\r\n\t\tdocument.getElementById('layerframespeed_sub').innerHTML = \"(\" + RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].timeline.frameLength + \")\";\r\n\t};\r\n\r\n\t/*\r\n\tGET LENGTH OF SPLIT TIME TO EXTEND FRAME LENGTHS\r\n\t*/\r\n\tRVS.F.getSplitDelay = function(_) {\r\n\r\n\t\tif ((RVS.H[_.layerid]!==undefined && RVS.H[_.layerid].splitText!==undefined) || RVS.L[_.layerid]!==undefined && RVS.L[_.layerid].timeline.split) {\r\n\t\t\tvar frame = RVS.L[_.layerid].timeline.frames[_.frame],\r\n\t\t\t\tsplit = frame.chars.use ? \"chars\" : frame.words.use ? \"words\" : frame.lines.use ? \"lines\" : undefined;\r\n\t\t\tif (RVS.H[_.layerid]!==undefined) {\r\n\t\t\t\tif (RVS.H[_.layerid].splitText===undefined) RVS.F.updateSplitContent({layerid:_.layerid})\r\n\t\t\t\treturn split!==undefined ? RVS.H[_.layerid].splitText[split].length * (frame[split].delay===undefined ? 0 : frame[split].delay*10) : 0;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn split!==undefined && frame.timeline.frameLength!==undefined ? frame.timeline.frameLength - parseInt(frame.timeline.speed,0)  : 0;\r\n\t\t\t}\r\n\r\n\t\t} else return 0;\r\n\t};\r\n\r\n\t/*\r\n\tUPDAE ALL LAYER FRAMES\r\n\t*/\r\n\tRVS.F.updateAllLayerFrames = function(_) {\r\n\r\n\t\t_ = _===undefined ? {} : _;\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (li!==\"top\" && li!==\"bottom\" && li!==\"middle\") {\r\n\t\t\t\tvar el = document.getElementById('layerlist_element_alias_'+RVS.S.slideId+'_'+RVS.L[li].uid);\r\n\t\t\t\tif (el!==null) el.textContent = RVS.L[li].alias;\r\n\t\t\t\tfor (var oi in RVS.L[li].timeline.frameOrder) {\r\n\t\t\t\t\tif(!RVS.L[li].timeline.frameOrder.hasOwnProperty(oi)) continue;\r\n\t\t\t\t\tvar fi = RVS.L[li].timeline.frameOrder[oi].id;\r\n\t\t\t\t\tif (fi ===\"frame_0\") continue;\r\n\t\t\t\t\tif (_.frame===undefined || fi===_.frame) RVS.F.updateLayerFrame({layerid:li, frame:fi});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.updateLayerFrames = function(_) {\r\n\t\tfor (var fi in RVS.L[_.layerid].timeline.frames) {\r\n\t\t\tif(!RVS.L[_.layerid].timeline.frames.hasOwnProperty(fi)) continue;\r\n\t\t\tif ((_.frame===undefined || fi===_.frame) && fi!==\"frame_0\") {\r\n\t\t\t\tRVS.F.updateLayerFrame({layerid:_.layerid, frame:fi});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tUPDATE LAYER FRAME SIZE, POSITION\r\n\t*/\r\n\tRVS.F.updateLayerFrame = function(_) {\r\n\t\tif (RVS.TL[RVS.S.slideId].layers===undefined || RVS.TL[RVS.S.slideId].layers[_.layerid]===undefined) return;\r\n\t\tif ( RVS.L[_.layerid].timeline.frames[_.frame]===undefined) return;\r\n\r\n\t\tvar ref = RVS.TL[RVS.S.slideId].layers[_.layerid][_.frame],\r\n\t\t\tfirstframe = RVS.F.getFirstFrame({layerid:_.layerid}),\r\n\t\t\ttl = RVS.L[_.layerid].timeline.frames[_.frame].timeline,\r\n\t\t\tf0 = RVS.L[_.layerid].timeline.frames[firstframe].timeline,\r\n\t\t\tf999 = RVS.L[_.layerid].timeline.frames.frame_999.timeline,\r\n\t\t\treversed = f999.auto && _.frame===\"frame_999\" && f0!==undefined && f0.frameLength!==undefined,\r\n\t\t\tframelength = _.framelength==undefined ? reversed ? f0.frameLength : RVS.F.addT([tl.speed,RVS.F.getSplitDelay({layerid:_.layerid, frame:_.frame})]) : _.framelength;\r\n\r\n\r\n\t\ttpGS.gsap.set(ref.frame,{left:tl.start/10+\"px\", width:framelength/10});\r\n\r\n\t\tref.info.textContent = framelength + (reversed ? \" (R)\" : \"\");\r\n\r\n\r\n\t\ttl.frameLength = framelength;\r\n\r\n\t\tif (_.frame===\"frame_999\") {\r\n\t\t\tref.endframemarker = ref.endframemarker===undefined || ref.endframemarker==null ? document.getElementById('slideendmarker_'+RVS.S.slideId+'_'+_.layerid) : ref.endframemarker;\r\n\t\t\t_.maxtime = _.maxtime === undefined ? RVS.F.getSlideLength() : _.maxtime;\r\n\t\t\tif (ref.endframemarker!==null) {\r\n\t\t\t\tif (tl.start/10>=_.maxtime) {\r\n\t\t\t\t\tref.endframemarker.classList.add(\"endswithslide\");\r\n\t\t\t\t\tf999.endWithSlide = true;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tref.endframemarker.classList.remove(\"endswithslide\");\r\n\t\t\t\t\tf999.endWithSlide = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttl.actionTriggered = RVS.F.layerFrameTriggeredBy({layerid:_.layerid,frame:_.frame}).uid!==\"\" && RVS.F.layerFrameTriggered({layerid:_.layerid, frame:_.frame});\r\n\r\n\t\tref.framedelay.textContent =  tl.actionTriggered ? \"a\" : tl.endWithSlide===true ? RVS_LANG.framewait : tl.start;\r\n\t\tif (RVS.L[_.layerid].timeline!=undefined) {\r\n\t\t\tref.sloop.style.display= RVS.L[_.layerid].timeline.tloop.use && RVS.L[_.layerid].timeline.tloop.from===_.frame ? \"block\" : \"none\";\r\n\t\t\tref.eloop.style.display= RVS.L[_.layerid].timeline.tloop.use && RVS.L[_.layerid].timeline.tloop.to===_.frame ? \"block\" : \"none\";\r\n\t\t}\r\n \t\tref.framedelay.className = tl.endWithSlide===true ? \"coloredbg\" : tl.actionTriggered && _.frame ===firstframe ? \"coloredbgover\" : tl.actionTriggered ? \"coloredbg\" : \"\";\r\n\t};\r\n\r\n\r\n\tRVS.F.updateAllLayerToIDLE = function() {\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.H[li]!==undefined && RVS.H[li].timeline!==undefined)\tRVS.H[li].timeline.pause(\"frame_IDLE\");\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tUPDATE ANY TIMELINE\r\n\t*/\r\n\tRVS.F.updateTimeLine = function(obj) {\r\n\r\n\t\tif (obj.force && RVS.TL[RVS.S.slideId]!==undefined && RVS.TL[RVS.S.slideId].main===undefined) RVS.F.buildMainTimeLine();\r\n\t\tif (RVS.TL[RVS.S.slideId]!==undefined && RVS.TL[RVS.S.slideId][obj.timeline]!==undefined) {\r\n\r\n\t\t\tif (obj.timeline===\"panzoom\") {\r\n\t\t\t\tRVS.TL[RVS.S.slideId].slide.progress(1);\r\n\t\t\t\tif (RVS.TL[RVS.S.slideId].main) RVS.TL[RVS.S.slideId].main.progress(0);\r\n\t\t\t}\r\n\t\t\tif (obj.forceFullLayerRender || (idleMode===true && obj.timeline===\"main\")) RVS.F.buildFullLayerAnimation(\"atstart\");\r\n\r\n\t\t\tswitch (obj.state) {\r\n\t\t\t\tcase \"play\":\r\n\t\t\t\t\tif (obj.timeline===\"main\") idleMode = false;\r\n\t\t\t\t\tif (obj.timeline===\"main\" && RVS.TL[RVS.S.slideId].slide) RVS.TL[RVS.S.slideId].slide.play();\r\n\t\t\t\t\tif (obj.timeline===\"main\" && RVS.TL[RVS.S.slideId].main) RVS.TL[RVS.S.slideId].main.play();\r\n\t\t\t\t\tif (RVS.TL[RVS.S.slideId].panzoom) RVS.TL[RVS.S.slideId].panzoom.play();\r\n\t\t\t\t\tif (obj.timeline===\"main\") for (var li in RVS.L) if (RVS.L.hasOwnProperty(li)) if (RVS.H[li]!==undefined && RVS.H[li].timeline!==undefined) \tRVS.H[li].timeline.play();\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"stop\":\r\n\t\t\t\tcase \"pause\":\r\n\t\t\t\t\tif (obj.timeline===\"main\" && RVS.TL[RVS.S.slideId].slide) RVS.TL[RVS.S.slideId].slide.pause();\r\n\t\t\t\t\tif (obj.timeline===\"main\" && RVS.TL[RVS.S.slideId].main) RVS.TL[RVS.S.slideId].main.pause();\r\n\t\t\t\t\tfor (var li in RVS.L) {\r\n\t\t\t\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\t\t\t\tif (RVS.H[li]!==undefined && RVS.H[li].timeline!==undefined) RVS.H[li].timeline.pause();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (RVS.TL[RVS.S.slideId].panzoom) RVS.TL[RVS.S.slideId].panzoom.pause();\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"rewind\":\r\n\t\t\t\t\tif (obj.timeline===\"main\" && RVS.TL[RVS.S.slideId].slide) RVS.TL[RVS.S.slideId].slide.time(0);\r\n\t\t\t\t\tif (obj.timeline===\"main\" && RVS.TL[RVS.S.slideId].main) RVS.TL[RVS.S.slideId].main.time(0);\r\n\t\t\t\t\tif (obj.timeline===\"main\") for (var li in RVS.L) if (RVS.L.hasOwnProperty(li)) if (RVS.H[li]!==undefined && RVS.H[li].timeline!==undefined) RVS.H[li].timeline.time(0);\r\n\t\t\t\t\tif (RVS.TL[RVS.S.slideId].panzoom) RVS.TL[RVS.S.slideId].panzoom.time(0);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"time\":\r\n\t\t\t\t\tif (obj.timeline===\"main\") idleMode = obj.time===0;\r\n\t\t\t\t\tif (obj.timeline===\"main\" && RVS.TL[RVS.S.slideId].slide) RVS.TL[RVS.S.slideId].slide.time(obj.time);\r\n\t\t\t\t\tif (obj.timeline===\"main\" && RVS.TL[RVS.S.slideId].main) RVS.TL[RVS.S.slideId].main.time(obj.time);\r\n\t\t\t\t\tif (RVS.TL[RVS.S.slideId].panzoom)\r\n\t\t\t\t\t\tif (obj.time===undefined)\r\n\t\t\t\t\t\t\tRVS.TL[RVS.S.slideId].panzoom.progress(0);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tRVS.TL[RVS.S.slideId].panzoom.time(obj.time);\r\n\t\t\t\t\tobj.time = obj.time===0 ? \"frame_IDLE\" : obj.time;\r\n\t\t\t\t\tif (obj.timeline===\"main\") for (var li in RVS.L) if (RVS.L.hasOwnProperty(li)) if (RVS.H[li]!==undefined && RVS.H[li].timeline!==undefined) RVS.H[li].timeline.time(obj.time);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"progress\":\r\n\t\t\t\t\tif (obj.timeline===\"main\") idleMode = obj.prgs===0;\r\n\t\t\t\t\tif (obj.timeline===\"main\" && RVS.TL[RVS.S.slideId].slide) RVS.TL[RVS.S.slideId].slide.progress(obj.prgs);\r\n\t\t\t\t\tif (obj.timeline===\"main\" && RVS.TL[RVS.S.slideId].main) RVS.TL[RVS.S.slideId].main.progress(obj.prgs);\r\n\t\t\t\t\tif (obj.timeline===\"main\") for (var li in RVS.L) if (RVS.L.hasOwnProperty(li)) if (RVS.H[li]!==undefined && RVS.H[li].timeline!==undefined) RVS.H[li].timeline.progress(obj.prgs);\r\n\t\t\t\t\tif (RVS.TL[RVS.S.slideId].panzoom) RVS.TL[RVS.S.slideId].panzoom.progress(obj.prgs);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"getprogress\":\r\n\t\t\t\t\treturn RVS.TL[RVS.S.slideId][obj.timeline].progress();\r\n\t\t\t\t// break;\r\n\t\t\t\tcase \"getstate\":\r\n\t\t\t\t\treturn RVS.TL[RVS.S.slideId][obj.timeline].isActive();\r\n\t\t\t\t// break;\r\n\t\t\t\tcase \"idle\":\r\n\t\t\t\t\tRVS.TL.cache = {};\r\n\t\t\t\t\tif (RVS.TL[RVS.S.slideId].main)  RVS.TL.cache.main = RVS.TL[RVS.S.slideId].main.time();\r\n\t\t\t\t\tif (RVS.TL[RVS.S.slideId].panzoom) RVS.TL[RVS.S.slideId].panzoom.progress(0).pause();\r\n\t\t\t\t\tif (RVS.TL[RVS.S.slideId].main) \tRVS.TL[RVS.S.slideId].main.progress(0).pause();\r\n\t\t\t\t\tif (RVS.TL[RVS.S.slideId].slide) RVS.TL[RVS.S.slideId].slide.progress(1).pause();\r\n\t\t\t\t\tRVS.F.changeSwitchState({el:document.getElementById(\"timline_process\"),state:\"play\"});\r\n\t\t\t\t\tRVS.TL.timelineStartedFromPlayStop=false;\r\n\t\t\t\t\tfor (var li in RVS.L) {\r\n\t\t\t\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\t\t\t\tif (RVS.H[li]!==undefined && RVS.H[li].timeline!==undefined) RVS.H[li].timeline.pause(\"frame_IDLE\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tidleMode = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (obj.time===0 || obj.time===undefined) tpGS.gsap.set(jQuery(\"rs-sbg-wrap.slotwrapper_cur\"),{autoAlpha:1});\r\n\r\n\r\n\t\t\tif (RVS.TL[RVS.S.slideId].main)  RVS.TL.cache.main = RVS.TL[RVS.S.slideId].main.time();\r\n\t\t\tRVS.TL.requestedTime = obj.time===undefined ? RVS.TL[RVS.S.slideId].main!==undefined ? RVS.TL[RVS.S.slideId].main.time() : 0 : obj.time;\r\n\r\n\t\t\tif (obj.updateCurTime) RVS.F.updateCurTime({pos:true, cont:true, force:true, left:RVS.TL.cache.main*100,refreshMainTimeLine:false});\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t// GET END TIME OF A FRAME\r\n\tRVS.F.getTimeAtSelectedFrameEnd = function() {\r\n\t\tvar _ = 0;\r\n\t\ttry{ _=(RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].timeline.start/10) + (RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].timeline.frameLength/10);}\r\n\t\tcatch(e) {}\r\n\t\treturn _;\r\n\t};\r\n\r\n\t// GET MIDDLE TIME OF A FRAME\r\n\tRVS.F.getTimeAtSelectedFrameMiddle = function() {\r\n\t\tvar _ = 0;\r\n\t\ttry{ _=(RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].timeline.start/10) + (RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].timeline.frameLength/10)/2;}\r\n\t\tcatch(e) {}\r\n\t\treturn _;\r\n\t};\r\n\r\n\t// GET START TIME OF A FRAME\r\n\tRVS.F.getTimeAtSelectedFrameStart = function(frame) {\r\n\t\tvar _ = 0;\r\n\t\ttry{ _=(RVS.L[RVS.selLayers[0]].timeline.frames[frame].timeline.start/10);}\r\n\t\tcatch(e) {}\r\n\t\treturn _;\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.timelineDragsStop = function() {\r\n\t\t\tRVS.TL.inDrag = false;\r\n\t\t\tif (!RVS.TL.over) RVS.F.goToIdle();\r\n\t};\r\n\r\n\tRVS.F.updateLoopInputs = function(_) {\r\n\t\t_ = _==undefined ? {s:RVS.SLIDER[RVS.S.slideId].slide.timeline.loop.start, e:RVS.SLIDER[RVS.S.slideId].slide.timeline.loop.end} : _;\r\n\t\tjQuery('#slide_loop_end').val(_.e);\r\n\t\tjQuery('#slide_loop_start').val(_.s);\r\n\t};\r\n\r\n\tRVS.F.updateFixedScrollInputs = function(_) {\r\n\t\t_ = _==undefined ? {s:RVS.SLIDER.settings.scrolltimeline.fixedStart, e:RVS.SLIDER.settings.scrolltimeline.fixedEnd} : _;\r\n\t\tjQuery('#fixed_scroll_end').val(_.e);\r\n\t\tjQuery('#fixed_scroll_start').val(_.s);\r\n\t};\r\n\r\n\tRVS.F.getTimeContents = function(e) {\r\n\t\tvar _ = {};\r\n\t\t_.ctm = e.querySelector('.ctm');\r\n\t\t_.cts = e.querySelector('.cts');\r\n\t\t_.ctms = e.querySelector('.ctms');\r\n\t\treturn _;\r\n\t}\r\n\r\n\t/*\r\n\tINIT TIMELINE\r\n\t*/\r\n\tRVS.F.initTimeLineConstruct = function() {\r\n\t\t// Draw TimeLinear\r\n\t\ttlr = jQuery('#time_linear'),\r\n\t\ttlrcanvas = tlr.find('#time_linear_canvas');\r\n\t\tbuildRuler();\r\n\r\n\t\tRVS.TL.TL = jQuery('#timeline');\r\n\r\n\t\tRVS.TL.tS = document.getElementById('timeline_settings');\r\n\t\tRVS.TL.ft = document.getElementById('frametime');\r\n\t\tRVS.TL.ft_txt = RVS.F.getTimeContents(RVS.TL.ft);\r\n\r\n\t\tRVS.TL.mt = jQuery('#maxtime');\r\n\t\tRVS.TL.mtfbg = jQuery('#slide_frame_container .frameswrap');\r\n\t\tRVS.TL.mt_txt = RVS.F.getTimeContents(RVS.TL.mt[0]);\r\n\r\n\t\tRVS.TL.slts = jQuery('#slidelooptimestart');\r\n\t\tRVS.TL.slts_marker = RVS.TL.slts.find('.timebox_marker');\r\n\t\tRVS.TL.slts_txt = RVS.F.getTimeContents(RVS.TL.slts[0]);\r\n\r\n\t\tRVS.TL.slte = jQuery('#slidelooptimeend');\r\n\t\tRVS.TL.slte_marker = RVS.TL.slte.find('.timebox_marker');\r\n\t\tRVS.TL.slte_txt = RVS.F.getTimeContents(RVS.TL.slte[0]);\r\n\r\n\t\tRVS.TL.fixs = jQuery('#fixedscrolltimestart');\r\n\t\tRVS.TL.fixs_marker = RVS.TL.fixs.find('.timebox_marker');\r\n\t\tRVS.TL.fixs_txt = RVS.F.getTimeContents(RVS.TL.fixs[0]);\r\n\r\n\t\tRVS.TL.fixe = jQuery('#fixedscrolltimeend');\r\n\t\tRVS.TL.fixe_marker = RVS.TL.fixe.find('.timebox_marker');\r\n\t\tRVS.TL.fixe_txt = RVS.F.getTimeContents(RVS.TL.fixe[0]);\r\n\r\n\t\tRVS.TL.ct = jQuery('#currenttime');\r\n\t\tRVS.TL.ct_marker = RVS.TL.ct.find('.timebox_marker');\r\n\t\tRVS.TL.ct_txt = RVS.F.getTimeContents(RVS.TL.ct[0]);\r\n\r\n\t\tRVS.TL.ht = jQuery('#hovertime');\r\n\t\tRVS.TL.ht_txt = RVS.F.getTimeContents(RVS.TL.ht[0]);\r\n\t\tRVS.F.updateMaxTime({pos:true, cont:true});\r\n\r\n\r\n\t\t//CLICK ON TIMELINE\r\n\t\ttlr.on('click',function(e) {\r\n\t\t\tvar realOffset = (e.pageX - 310) + RVS.TL._scrollLeft;\r\n\t\t\tRVS.F.updateCurTime({pos:true, cont:true, left:realOffset,refreshMainTimeLine:true,  caller:\"initTimeLineConstruct\"});\r\n\t\t});\r\n\r\n\t\tRVS.TL.fixs.draggable({\r\n\t\t\tstart:function(evet,ui) {\r\n\t\t\t\tRVS.TL.inDrag = true;\r\n\t\t\t},\r\n\t\t\tdrag:function(event,ui) {\r\n\t\t\t\tvar el = RVS.TL.fixe.position().left;\r\n\t\t\t\tui.position.left = ui.position.left>=el ? el : ui.position.left;\r\n\t\t\t\tui.position.left = ui.position.left<1 ? 1 : ui.position.left;\r\n\t\t\t\ttpGS.gsap.set('.fixedscrolltimemarker',{left:ui.position.left, width:(el - ui.position.left)});\r\n\t\t\t\tif (RVS.TL.fixs.offset().left - RVS.TL.TL.offset().left < 290)\r\n\t\t\t\t\tRVS.TL.fixs.addClass(\"covered\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.TL.fixs.removeClass(\"covered\");\r\n\r\n\t\t\t\tRVS.F.updateFixedScrollTimes({cont:true, start:Math.max(0,ui.position.left), end:el});\r\n\t\t\t\tRVS.F.updateFixedScrollInputs({e:el*10, s:Math.max(0,ui.position.left)*10});\r\n\t\t\t},\r\n\t\t\tstop:function(event,ui) {\r\n\t\t\t\tvar el = RVS.TL.fixe.position().left;\r\n\t\t\t\tui.position.left = ui.position.left>=el ? el : ui.position.left;\r\n\t\t\t\ttpGS.gsap.set('.fixedscrolltimemarker',{left:ui.position.left, width:(el - ui.position.left)});\r\n\t\t\t\tif (RVS.TL.fixs.offset().left - RVS.TL.TL.offset().left < 290)\r\n\t\t\t\t\tRVS.TL.fixs.addClass(\"covered\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.TL.fixs.removeClass(\"covered\");\r\n\t\t\t\tRVS.F.updateFixedScrollTimes({cont:true, start:ui.position.left, end:el});\r\n\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"SliderFixedScrollStartTime\",txt:\"Fixed Scroll Start Time \",icon:\"timer_off\"});\r\n\t\t\t\tRVS.F.updateSliderObj({path:\"settings.scrolltimeline.fixedStart\",val:Math.round(ui.position.left*10)});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"SliderFixedScrollStartTime\"});\r\n\t\t\t\tRVS.F.updateFixedScrollInputs();\r\n\t\t\t},\r\n\t\t\taxis:\"x\"\r\n\t\t});\r\n\r\n\r\n\t\tRVS.TL.fixe.draggable({\r\n\t\t\tstart:function(evet,ui) {\r\n\t\t\t\tRVS.TL.inDrag = true;\r\n\t\t\t},\r\n\t\t\tdrag:function(event,ui) {\r\n\t\t\t\tvar el = RVS.TL.fixs.position().left;\r\n\t\t\t\tui.position.left = ui.position.left<=el ? el : ui.position.left;\r\n\t\t\t\ttpGS.gsap.set('.fixedscrolltimemarker',{width:(ui.position.left-el)});\r\n\t\t\t\tif (RVS.TL.fixe.offset().left - RVS.TL.TL.offset().left < 290)\r\n\t\t\t\t\tRVS.TL.fixe.addClass(\"covered\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.TL.fixe.removeClass(\"covered\");\r\n\t\t\t\tRVS.F.updateFixedScrollTimes({cont:true, end:ui.position.left, start:el});\r\n\t\t\t\tRVS.F.updateFixedScrollInputs({s:el*10, e:ui.position.left*10});\r\n\t\t\t},\r\n\t\t\tstop:function(event,ui) {\r\n\t\t\t\tvar el = RVS.TL.fixs.position().left;\r\n\t\t\t\tui.position.left = ui.position.left<=el ? el : ui.position.left;\r\n\t\t\t\ttpGS.gsap.set('.fixedscrolltimemarker',{width:(ui.position.left-el)});\r\n\t\t\t\tif (RVS.TL.fixe.offset().left - RVS.TL.TL.offset().left < 290)\r\n\t\t\t\t\tRVS.TL.fixe.addClass(\"covered\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.TL.fixe.removeClass(\"covered\");\r\n\t\t\t\tRVS.F.updateFixedScrollTimes({cont:true, end:ui.position.left, start:el});\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"SliderFixedScrollEndTime\",txt:\"Fixed Scroll End Time \",icon:\"timer_off\"});\r\n\t\t\t\tRVS.F.updateSliderObj({path:\"settings.scrolltimeline.fixedEnd\",val:Math.round(ui.position.left*10)});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"SliderFixedScrollEndTime\"});\r\n\t\t\t\tRVS.F.updateFixedScrollInputs();\r\n\t\t\t},\r\n\t\t\taxis:\"x\"\r\n\t\t});\r\n\r\n\r\n\r\n\t\tRVS.TL.slts.draggable({\r\n\t\t\tstart:function(evet,ui) {\r\n\t\t\t\tRVS.TL.inDrag = true;\r\n\t\t\t},\r\n\t\t\tdrag:function(event,ui) {\r\n\t\t\t\tvar el = RVS.TL.slte.position().left;\r\n\t\t\t\tui.position.left = ui.position.left>=el ? el : ui.position.left;\r\n\t\t\t\ttpGS.gsap.set('.slidelooptimemarker',{left:ui.position.left, width:(el - ui.position.left)});\r\n\t\t\t\tif (RVS.TL.slts.offset().left - RVS.TL.TL.offset().left < 290)\r\n\t\t\t\t\tRVS.TL.slts.addClass(\"covered\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.TL.slts.removeClass(\"covered\");\r\n\r\n\t\t\t\tRVS.F.updateSlideLoopTimes({cont:true, start:ui.position.left, end:el});\r\n\t\t\t\tRVS.F.updateLoopInputs({e:el*10, s:ui.position.left*10});\r\n\t\t\t},\r\n\t\t\tstop:function(event,ui) {\r\n\t\t\t\tvar el = RVS.TL.slte.position().left;\r\n\t\t\t\tui.position.left = ui.position.left>=el ? el : ui.position.left;\r\n\t\t\t\ttpGS.gsap.set('.slidelooptimemarker',{left:ui.position.left, width:(el - ui.position.left)});\r\n\t\t\t\tif (RVS.TL.slts.offset().left - RVS.TL.TL.offset().left < 290)\r\n\t\t\t\t\tRVS.TL.slts.addClass(\"covered\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.TL.slts.removeClass(\"covered\");\r\n\t\t\t\tRVS.F.updateSlideLoopTimes({cont:true, start:ui.position.left, end:el});\r\n\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"SlideLoopStartTime\",txt:\"Slide Loop Start Time \",icon:\"timer_off\"});\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".slide.timeline.loop.start\",val:Math.round(ui.position.left*10)});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"SlideLoopStartTime\"});\r\n\t\t\t\tRVS.F.updateLoopInputs();\r\n\t\t\t},\r\n\t\t\taxis:\"x\"\r\n\t\t});\r\n\r\n\t\tRVS.TL.slte.draggable({\r\n\t\t\tstart:function(evet,ui) {\r\n\t\t\t\tRVS.TL.inDrag = true;\r\n\t\t\t},\r\n\t\t\tdrag:function(event,ui) {\r\n\t\t\t\tvar el = RVS.TL.slts.position().left;\r\n\t\t\t\tui.position.left = ui.position.left<=el ? el : ui.position.left;\r\n\t\t\t\ttpGS.gsap.set('.slidelooptimemarker',{width:(ui.position.left-el)});\r\n\t\t\t\tif (RVS.TL.slte.offset().left - RVS.TL.TL.offset().left < 290)\r\n\t\t\t\t\tRVS.TL.slte.addClass(\"covered\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.TL.slte.removeClass(\"covered\");\r\n\t\t\t\tRVS.F.updateSlideLoopTimes({cont:true, end:ui.position.left, start:el});\r\n\t\t\t\tRVS.F.updateLoopInputs({s:el*10, e:ui.position.left*10});\r\n\t\t\t},\r\n\t\t\tstop:function(event,ui) {\r\n\t\t\t\tvar el = RVS.TL.slts.position().left;\r\n\t\t\t\tui.position.left = ui.position.left<=el ? el : ui.position.left;\r\n\t\t\t\ttpGS.gsap.set('.slidelooptimemarker',{width:(ui.position.left-el)});\r\n\t\t\t\tif (RVS.TL.slte.offset().left - RVS.TL.TL.offset().left < 290)\r\n\t\t\t\t\tRVS.TL.slte.addClass(\"covered\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.TL.slte.removeClass(\"covered\");\r\n\t\t\t\tRVS.F.updateSlideLoopTimes({cont:true, end:ui.position.left, start:el});\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"SlideLoopEndTime\",txt:\"Slide Loop End Time \",icon:\"timer_off\"});\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".slide.timeline.loop.end\",val:Math.round(ui.position.left*10)});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"SlideLoopEndTime\"});\r\n\t\t\t\tRVS.F.updateLoopInputs();\r\n\t\t\t},\r\n\t\t\taxis:\"x\"\r\n\t\t});\r\n\r\n\r\n\r\n\r\n\t\t// CURRENT TIME DRAGGABLE\r\n\t\tRVS.TL.ct.draggable({\r\n\t\t\tstart: function(event,ui) {\r\n\t\t\t\tif (RVS.TL[RVS.S.slideId] && RVS.TL[RVS.S.slideId].main && RVS.TL[RVS.S.slideId] && RVS.TL[RVS.S.slideId].main && RVS.TL[RVS.S.slideId].main.isActive()) return;\r\n\t\t\t\tRVS.F.buildMainTimeLine();\r\n\t\t\t\tRVS.TL.ht.addClass(\"hideme\");\r\n\t\t\t\tRVS.TL.inDrag = true;\r\n\t\t\t\tif (RVS.TL[RVS.S.slideId] && RVS.TL[RVS.S.slideId].slide!==undefined) RVS._R.transitions.motionFilter.clearFull(RVS.SBGS[RVS.S.slideId].n,RVS.TL[RVS.S.slideId].slide);\r\n\r\n\r\n\t\t\t},\r\n\t\t\tstop:function(event,ui) {\r\n\t\t\t\tif (RVS.TL[RVS.S.slideId] && RVS.TL[RVS.S.slideId].main && RVS.TL[RVS.S.slideId].main.isActive()) return;\r\n\t\t\t\tif (RVS.TL.ct.offset().left - RVS.TL.TL.offset().left < 265)\r\n\t\t\t\t\tRVS.TL.ct.addClass(\"covered\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.TL.ct.removeClass(\"covered\");\r\n\t\t\t\tRVS.TL.ht.removeClass(\"hideme\");\r\n\t\t\t\tRVS.F.timelineDragsStop();\r\n\t\t\t},\r\n\t\t\tdrag:function(event,ui) {\r\n\r\n\t\t\t\t// CLEAR MOTION FILTERS IF NEEDED\r\n\t\t\t\tif (RVS.SBGS[RVS.S.slideId].n.fmExists) {\r\n\t\t\t\t\tRVS.SBGS[RVS.S.slideId].n.timeDirection = ui.position.left>RVS.SBGS[RVS.S.slideId].n.lastProcess ? \"forwards\" : ui.position.left<RVS.SBGS[RVS.S.slideId].n.lastProcess ? \"backwards\" : RVS.SBGS[RVS.S.slideId].n.timeDirection;\r\n\t\t\t\t\tif (RVS.SBGS[RVS.S.slideId].n.lastDirection!==RVS.SBGS[RVS.S.slideId].n.timeDirection) if (RVS.TL[RVS.S.slideId] && RVS.TL[RVS.S.slideId].slide!==undefined) RVS._R.transitions.motionFilter.clearFull(RVS.SBGS[RVS.S.slideId].n,RVS.TL[RVS.S.slideId].slide);\r\n\t\t\t\t\tRVS.SBGS[RVS.S.slideId].n.lastProcess = ui.position.left;\r\n\t\t\t\t\tRVS.SBGS[RVS.S.slideId].n.lastDirection = RVS.SBGS[RVS.S.slideId].n.timeDirection;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (RVS.TL[RVS.S.slideId] && RVS.TL[RVS.S.slideId].main && RVS.TL[RVS.S.slideId].main.isActive()) return;\r\n\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\tRVS.F.updateCurTime({pos:false, cont:true, left:ui.position.left,refreshMainTimeLine:true, caller:\"Timeline DraG\"});\r\n\t\t\t\t\tif (RVS.TL.ct.offset().left - RVS.TL.TL.offset().left < 265)\r\n\t\t\t\t\t\tRVS.TL.ct.addClass(\"covered\");\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tRVS.TL.ct.removeClass(\"covered\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcontainment:\".timeline_right_container\",\r\n\t\t\taxis:\"x\"\r\n\t\t});\r\n\r\n\t\t//HOVER TIME\r\n\t\tRVS.DOC.on('mousemove','.stimeline',function(e,a) {\tRVS.F.updateHoverTime({pos:true, cont:true, left:(e.pageX - 310)});});\r\n\t\tRVS.DOC.on('mouseenter','.stimeline',function(e,a) {RVS.TL.ht.show();});\r\n\t\tRVS.DOC.on('mouseenter','.timeline_left_container, .context_left, .timeline_right_container',function(e,a) {RVS.TL.ht.hide();});\r\n\t\tRVS.DOC.on('mouseenter','#timeline_settings',function(e,a) {\r\n\t\t\tRVS.DOC.trigger('previewStopLayerAnimation');\r\n\t\t\tif (!RVS.TL.over && RVS.TL[RVS.S.slideId] && RVS.TL[RVS.S.slideId].main && RVS.TL.cache!==undefined && RVS.TL.cache.main!==undefined && RVS.TL.cache.main!==0) RVS.F.goToIdle();\r\n\t\t\t//RVS.F.updateTimeLine({state:\"time\",time:RVS.TL.cache.main, timeline:\"main\"});\r\n\t\t\tRVS.TL.over = true;\r\n\t\t});\r\n\t\tRVS.DOC.on('mouseleave','#timeline_settings',function(e,a) {\r\n\t\t\tif (RVS.eMode.mode!==\"animation\") {\r\n\t\t\t\tRVS.TL.over = false;\r\n\t\t\t\tRVS.TL.ht.hide();\r\n\t\t\t\tif (!RVS.TL.inDrag) RVS.F.goToIdle();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tRVS.F.animationMode = function(on) {\r\n\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"GoToIdle\"});\r\n\t};\r\n\r\n\tRVS.F.setSmallestSlideLength = function(_) {\r\n\t\tvar minl = Math.max(_.left, beforeLastEnd()/10);\r\n\t\tif (!_.ignore)\r\n\t\t\tRVS.F.updateMaxTime({pos:true, cont:true, left:minl});\r\n\t\treturn minl;\r\n\t};\r\n\r\n\tRVS.F.goToIdle = function(obj) {\r\n\t\tif (!idleMode) {\r\n\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"GoToIdle\"});\r\n\t\t\tRVS.F.buildMainTimeLine();\r\n\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:false, left:0,refreshMainTimeLine:true, caller:\"GoToIdle\"});\r\n\t\t}\r\n\t\tidleMode = true;\r\n\t};\r\n\r\n\t/*\r\n\tMAX TIME HANDLING\r\n\t*/\r\n\tRVS.F.updateMaxTime = function(obj) {\r\n\t\tobj = obj===undefined ? {pos:true, cont:true, left:RVS.F.getSlideLength()} : obj;\r\n\t\tobj.left= obj.left===undefined ? RVS.F.getSlideLength() : obj.left;\r\n\t\tif (obj.pos) tpGS.gsap.set(RVS.TL.mt,{left:(obj.left)+\"px\"});\r\n\t\tif (obj.cont) pxToSec(obj.left,RVS.TL.mt_txt);\r\n\r\n\t\tRVS.F.updateCoveredTimelines();\r\n\t};\r\n\r\n\t/*\r\n\tCURRENT TIME HANDLING\r\n\t*/\r\n\tRVS.F.updateCurTime = function(obj) {\r\n\r\n\t\tif (obj.pos)\r\n\t\t\ttpGS.gsap.set(RVS.TL.ct,{left:(obj.left)+\"px\"});\r\n\t\tif (obj.cont) {\r\n\t\t\tobj.left = isNaN(obj.left) ? 0 : obj.left;\r\n\t\t\tif (obj.left>0) {\r\n\t\t\t\tRVS.TL.ct[0].classList.add(\"inmove\");\r\n\t\t\t\tpxToSec(obj.left,RVS.TL.ct_txt);\r\n\t\t\t}\r\n\t\t\telse RVS.TL.ct[0].classList.remove(\"inmove\");\r\n\r\n\t\t\tRVS.F.updateCoveredTimelines();\r\n\t\t}\r\n\t\tif (obj.refreshMainTimeLine)\r\n\t\t\tif (obj.left/100 <=0)\r\n\t\t\t\tRVS.F.updateTimeLine({force:obj.force, state:\"idle\",timeline:\"main\",caller:\"UpdateCurTime A\"});\r\n\t\t\telse\r\n\t\t\t\tRVS.F.updateTimeLine({force:obj.force, state:\"time\",time:(obj.left/100), timeline:\"main\", freeze:obj.freeze});\r\n\t};\r\n\r\n\tRVS.F.updateSlideLoopTimes = function(obj) {\r\n\t\tif (obj.pos) {\r\n\t\t\ttpGS.gsap.set(RVS.TL.slts,{left:obj.start+\"px\"});\r\n\t\t\ttpGS.gsap.set(RVS.TL.slte,{left:obj.end+\"px\"});\r\n\r\n\t\t\ttpGS.gsap.set('.slidelooptimemarker',{left:obj.start, width:(obj.end - obj.start)});\r\n\t\t}\r\n\t\tif (obj.cont) {\r\n\t\t\tpxToSec(obj.start,RVS.TL.slts_txt);\r\n\t\t\tpxToSec(obj.end,RVS.TL.slte_txt);\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.updateFixedScrollTimes = function(obj) {\r\n\t\tif (obj.pos) {\r\n\t\t\ttpGS.gsap.set(RVS.TL.fixs,{left:obj.start+\"px\"});\r\n\t\t\ttpGS.gsap.set(RVS.TL.fixe,{left:obj.end+\"px\"});\r\n\r\n\t\t\ttpGS.gsap.set('.fixedscrolltimemarker',{left:obj.start, width:(obj.end - obj.start)});\r\n\t\t}\r\n\t\tif (obj.cont) {\r\n\t\t\tpxToSec(obj.start,RVS.TL.fixs_txt);\r\n\t\t\tpxToSec(obj.end,RVS.TL.fixe_txt);\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.updateHoverTime = function(obj) {\r\n\t\tRVS.TL.hoverTimeLeft = obj.left === undefined ? RVS.TL.hoverTimeLeft : obj.left;\r\n\t\tRVS.TL.hoverTimeLeft = RVS.TL.hoverTimeLeft===undefined ? 0 : RVS.TL.hoverTimeLeft;\r\n\t\tRVS.TL._scrollLeft = RVS.TL._scrollLeft === undefined ? 0 : RVS.TL._scrollLeft;\r\n\t\tif (obj.pos) tpGS.gsap.set(RVS.TL.ht,{left:(obj.left)+\"px\"});\r\n\t\tif (obj.cont) pxToSec((RVS.TL.hoverTimeLeft + RVS.TL._scrollLeft),RVS.TL.ht_txt);\r\n\t};\r\n\r\n\r\n\tRVS.F.updateFrameTime = function(obj) {\r\n\t\tRVS.TL.frameTimeLeft = obj.left === undefined ? RVS.TL.frameTimeLeft : obj.left;\r\n\t\tRVS.TL.frameTimeLeft = RVS.TL.frameTimeLeft===undefined ? 0 : RVS.TL.frameTimeLeft;\r\n\t\tRVS.TL._scrollLeft = RVS.TL._scrollLeft === undefined ? 0 : RVS.TL._scrollLeft;\r\n\t\tif (obj.pos) tpGS.gsap.set(RVS.TL.ft,{left:(obj.left)+\"px\"});\r\n\r\n\t\tif (obj.cont) pxToSec((RVS.TL.frameTimeLeft),RVS.TL.ft_txt);\r\n\t};\r\n\r\n\t/*\r\n\tGET ALL FRAMES OF LAYER\r\n\t*/\r\n\tRVS.F.getLayerFrames = function(_) {\r\n\t\tvar kids = _.extend===undefined ? {} : _.extend;\r\n\t\tkids[_.layerid] = { type:RVS.L[_.layerid].type, frames:{}};\r\n\t\tfor (var oi in RVS.L[_.layerid].timeline.frameOrder) {\r\n\t\t\tif(!RVS.L[_.layerid].timeline.frameOrder.hasOwnProperty(oi)) continue;\r\n\t\t\tvar fi =  RVS.L[_.layerid].timeline.frameOrder[oi].id;\r\n\t\t\tif (_.afterStart!==undefined) {\r\n\t\t\t\tif (RVS.L[_.layerid].timeline.frames[fi].timeline.start>_.afterStart && fi!==\"frame_999\")\r\n\t\t\t\t\tkids[_.layerid].frames[fi] = RVS.L[_.layerid].timeline.frames[fi].timeline.start;\r\n\t\t\t\tif (fi===\"frame_999\" && _.include999===true)\r\n\t\t\t\t\tkids[_.layerid].frames[fi] = RVS.L[_.layerid].timeline.frames[fi].timeline.start;\r\n\t\t\t} else {\r\n\t\t\t\tkids[_.layerid].frames[fi] = RVS.L[_.layerid].timeline.frames[fi].timeline.start;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn kids;\r\n\t};\r\n\r\n\r\n\t/*\r\n\tGET ALL LAYERS LAST FRAME, AND MARK THE ONE WITH END WITH SLIDE ATTRIBUTES\r\n\t*/\r\n\tRVS.F.getLayersEndWithSlide = function() {\r\n\t\tvar kids = {};\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\t//if (RVS.L[li].timeline.frames.frame_999.timeline.endWithSlide)\r\n\t\t\t\tif (li!==\"top\" && li!==\"bottom\" && li!==\"middle\")\r\n\t\t\t\t\tkids[li] = {\r\n\t\t\t\t\t\t\ttype:RVS.L[li].type,\r\n\t\t\t\t\t\t\tendWithSlide:RVS.L[li].timeline.frames.frame_999.timeline.endWithSlide,\r\n\t\t\t\t\t\t\tframes:{frame_999:RVS.L[li].timeline.frames.frame_999.timeline.start}\r\n\t\t\t\t\t};\r\n\t\t}\r\n\t\treturn kids;\r\n\t};\r\n\r\n\tRVS.F.getSlideLayersEndWithSlide = function(slide) {\r\n\t\tif (RVS.SLIDER[slide]==undefined) return {};\r\n\t\tvar kids = {};\r\n\t\tfor (var li in RVS.SLIDER[slide].layers) {\r\n\t\t\tif(!RVS.SLIDER[slide].layers.hasOwnProperty(li)) continue;\r\n\t\t\t//if (RVS.SLIDER[slide].layers[li].timeline.frames.frame_999.timeline.endWithSlide)\r\n\t\t\t\tif (li!==\"top\" && li!==\"bottom\" && li!==\"middle\")\r\n\t\t\t\t\tkids[li] = {\r\n\t\t\t\t\t\t\ttype:RVS.SLIDER[slide].layers[li].type,\r\n\t\t\t\t\t\t\tendWithSlide:RVS.SLIDER[slide].layers[li].timeline.frames.frame_999.timeline.endWithSlide,\r\n\t\t\t\t\t\t\tframes:{frame_999:RVS.SLIDER[slide].layers[li].timeline.frames.frame_999.timeline.start}\r\n\t\t\t\t\t};\r\n\t\t}\r\n\t\treturn kids;\r\n\t};\r\n\r\n\tRVS.F.clearLayerAnimation = function(_) {\r\n\t\tRVS.H[_.layerid].timeline.clear();\r\n\t};\r\n\r\n\t/*\r\n\tFORMAT THE TIME TO HUMAN READABLE TIME\r\n\t*/\r\n\tRVS.F.formatTime = function(d) {\r\n\t\td = d*1000;\r\n\t\tvar ms = parseInt((d%1000)/10),\r\n            s = parseInt((d/1000)%60),\r\n            m = parseInt((d/(1000*60))%60);\r\n        ms = (ms < 10) ? \"0\" + ms : ms;\r\n        m = (m < 10) ? \"0\" + m : m;\r\n        s = (s < 10) ? \"0\" + s : s;\r\n        return  m+\":\"+s+\":\"+ms;\r\n\t};\r\n\t/*\r\n\tUPDATE SPLITTED OR NONE SPLITTED CONTENT\r\n\t*/\r\n\tRVS.F.updateSplitContent = function(_) {\r\n\t\tvar split = false;\r\n\t\tif (RVS.H[_.layerid].splitText) RVS.H[_.layerid].splitText.revert();\r\n\t\tif (RVS.L[_.layerid].type===\"text\" || RVS.L[_.layerid].type===\"button\") {\r\n\t\t\tfor (var frame  in RVS.L[_.layerid].timeline.frames) {\r\n\t\t\t\tif(!RVS.L[_.layerid].timeline.frames.hasOwnProperty(frame)) continue;\r\n\t\t\t\tif (RVS.L[_.layerid].timeline.frames[frame].chars.use || RVS.L[_.layerid].timeline.frames[frame].words.use || RVS.L[_.layerid].timeline.frames[frame].lines.use) {\r\n\t\t\t\t\tsplit = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (split)\r\n\t\t\t\tRVS.H[_.layerid].splitText = new tpGS.SplitText(RVS.H[_.layerid].c,{type:\"lines,words,chars\",wordsClass:\"rs_splitted_words\",linesClass:\"rs_splitted_lines\",charsClass:\"rs_splitted_chars\"});\r\n\t\t\telse\r\n\t\t\t\tRVS.H[_.layerid].splitText = undefined;\r\n\t\t}\r\n\t\telse\r\n\t\t\tRVS.H[_.layerid].splitText = undefined;\r\n\t\treturn split;\r\n\t};\r\n\r\n\t/*\r\n\tGET THE FRAMEORDER IN THE TIMELINE\r\n\t*/\r\n\tRVS.F.getFrameOrder = function(_) {\r\n\t\tRVS.L[_.layerid].timeline.frameOrder = [];\r\n\t\tfor (var frame in RVS.L[_.layerid].timeline.frames) {\r\n\t\t\tif(!RVS.L[_.layerid].timeline.frames.hasOwnProperty(frame)) continue;\r\n\t\t\tRVS.L[_.layerid].timeline.frameOrder.push({id:frame, start:frame===\"frame_0\" ? -1 : RVS.L[_.layerid].timeline.frames[frame].timeline.start});\r\n\t\t}\r\n\r\n\t\tRVS.L[_.layerid].timeline.frameOrder.sort(function(a,b) { return a.start - b.start;});\r\n\r\n\t\tRVS.L[_.layerid].timeline.frameToIdle = RVS.L[_.layerid].timeline.frameToIdle===undefined ? \"frame_1\" : RVS.L[_.layerid].timeline.frameToIdle;\r\n\r\n\r\n\r\n\t};\r\n\r\n\t/*\r\n\t AT COLUMN BG, BORDER WE NEED RO REMOVE VALUES SINCE BG IS SET ALREADY\r\n\t */\r\n\tfunction reduceColumn(_) {\r\n\t\tvar r = RVS.F.safeExtend(true,{},_);\r\n\t\tdelete r.borderWidth;\r\n\t\tdelete r.borderStyle;\r\n\t\tdelete r.borderColor;\r\n\t\tdelete r.backgroundColor;\r\n\t\tdelete r.background;\r\n\t\tdelete r.backgroundImage;\r\n\t\tdelete r['backdrop-filter'];\r\n\t\treturn r;\r\n\t}\r\n\tfunction convertDirection(_) {return _===undefined ? \"start\" : _===\"backward\" ? \"end\" : _===\"middletoedge\" ? \"center\" : _===\"edgetomiddle\" ? \"edge\" : _};\r\n\r\n\t// reusable function that you can wrap around your stagger vars and define an \"offset\" value that'll get added to the 2nd half of the values\r\n\tfunction offsetStagger(vars) {\r\n\t\tvars.from = vars.from===\"edge\" ? \"edges\" : vars.from;\r\n\t\tlet distributor = tpGS.gsap.utils.distribute(vars);\r\n\t\treturn function(i, target, targets) {\r\n\t\t\treturn distributor(i, target, targets) + (i <= targets.length / 2 ? 0 : vars.offset || 0);\r\n\t\t}\r\n\t}\r\n\t/*\r\n\tRENDER LAYER ANIMATIONS\r\n\t*/\r\n\tRVS.F.renderLayerAnimation = function(_) {\r\n\r\n\t\tvar lh = RVS.H[_.layerid],\r\n\t\t\tl = RVS.L[_.layerid],\r\n\t\t\ttPE=600; // transformPerspective\r\n\r\n\t\tif (RVS.TL[RVS.S.slideId].layers===undefined || RVS.TL[RVS.S.slideId].layers[_.layerid]===undefined) return;\r\n\t\tif (lh===undefined || l.timeline===undefined || l.timeline.frames===undefined )  return;\r\n\r\n\t\tif (lh.timeline) lh.timeline.pause(\"frame_IDLE\");\r\n\r\n\t\tlh.timeline = new tpGS.TimelineMax({paused:true});\r\n\r\n\t\tvar split = l.type===\"text\" || l.type===\"button\" ?  RVS.F.updateSplitContent({layerid:_.layerid}) : false;\r\n\t\tl.timeline.split = split;\r\n\t\tRVS.F.getFrameOrder({layerid:_.layerid});\r\n\t\t/* var fOrderLen = l.timeline.frameOrder.length, */\r\n\t\tvar firstframe = RVS.F.getFirstFrame({layerid:_.layerid});\r\n\r\n\t\tfor (var oi in l.timeline.frameOrder) {\r\n\t\t\tif(!l.timeline.frameOrder.hasOwnProperty(oi)) continue;\r\n\r\n\t\t\tvar fi = l.timeline.frameOrder[oi].id;\r\n\r\n\t\t\tif (fi ===\"frame_0\") continue;\r\n\r\n\r\n\r\n\t\t\tvar\t_frameObj = _.frameObj===undefined || _.frame!==fi ?  l.timeline.frames[fi] : _.frameObj;\r\n\r\n\t\t\tl.timeline.sessionFilterUsed = RVS.F.checkGlobalFiltersOnLayer(_.layerid);\r\n\r\n\t\t\tif (fi ===\"frame_999\" && l.timeline.frames.frame_999.timeline.auto) {\r\n\r\n\t\t\t\t_frameObj = RVS.F.safeExtend(true,{},l.timeline.frames.frame_999);\r\n\t\t\t\t_frameObj.transform = RVS.F.safeExtend(true,{},l.timeline.frames.frame_0.transform);\r\n\t\t\t\t_frameObj.mask = RVS.F.safeExtend(true,{},l.timeline.frames.frame_0.mask);\r\n\t\t\t\t_frameObj.words = RVS.F.safeExtend(true,{},l.timeline.frames.frame_0.words);\r\n\t\t\t\t_frameObj.lines = RVS.F.safeExtend(true,{},l.timeline.frames.frame_0.lines);\r\n\t\t\t\t_frameObj.chars = RVS.F.safeExtend(true,{},l.timeline.frames.frame_0.chars);\r\n\t\t\t\t_frameObj.sfx = RVS.F.safeExtend(true,{},l.timeline.frames.frame_0.sfx);\r\n\t\t\t\t_frameObj.filter = RVS.F.safeExtend(true,{},l.timeline.frames.frame_0.filter);\r\n\t\t\t\t_frameObj.bfilter = RVS.F.safeExtend(true,{},l.timeline.frames.frame_0.bfilter);\r\n\t\t\t\t_frameObj.color = RVS.F.safeExtend(true,{},l.timeline.frames.frame_0.color);\r\n\t\t\t\t_frameObj.bgcolor = RVS.F.safeExtend(true,{},l.timeline.frames.frame_0.bgcolor);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar\t_fromFrameObj = fi===firstframe ? l.timeline.frames.frame_0 : undefined,\r\n\t\t\t\t_frame = RVS.TL[RVS.S.slideId].layers[_.layerid][fi],\r\n\t\t\t\taObj = lh.c,\r\n\t\t\t\tsfx = checkSFXAnimations(_frameObj.sfx.effect,lh.m,_frameObj.timeline.ease),\r\n\t\t\t\ttt = new tpGS.TimelineMax(),\r\n\t\t\t\tspeed = _frameObj.timeline.speed/1000,\r\n\t\t\t\tsplitDelay = 0;\r\n\r\n\t\t\t_frame.timeline = new tpGS.TimelineMax();\r\n\r\n\r\n\t\t\tif (sfx.type===\"block\") {\r\n\r\n\t\t\t\tsfx.ft[0].background = window.RSColor.get(_frameObj.sfx.color);\r\n\t\t\t\t_frame.timeline.add(tpGS.gsap.fromTo(sfx.bmask_in,speed/2, sfx.ft[0], sfx.ft[1] ,0));\r\n\t\t\t\t_frame.timeline.add(tpGS.gsap.fromTo(sfx.bmask_in,speed/2, sfx.ft[1], sfx.t, speed/2));\r\n\t\t\t\tif (fi===\"frame_0\" || fi===\"frame_1\")\r\n\t\t\t\t\t_frame.timeline.add(tt.staggerFromTo(aObj,0.05,{ autoAlpha:0},{autoAlpha:1,delay:speed/2},0),0);\r\n\t\t\t\telse\r\n\t\t\t\tif (fi===\"frame_999\")\r\n\t\t\t\t\t_frame.timeline.add(tt.staggerFromTo(aObj,0.05,{ autoAlpha:1},{autoAlpha:0,delay:speed/2},0),0);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\tvar anim = convertTransformValues({sessionFilterUsed:l.timeline.sessionFilterUsed, frame:_frameObj, layerid:_.layerid, ease:_frameObj.timeline.ease, splitAmount:aObj.length,target:fi}),\r\n\t\t\t\tfrom = fi===firstframe ? convertTransformValues({sessionFilterUsed:l.timeline.sessionFilterUsed, frame:_fromFrameObj, layerid:_.layerid,ease:_frameObj.timeline.ease, splitAmount:aObj.length,target:\"frame_0\"}) : undefined,\r\n\t\t\t\tmask = _frameObj.mask.use==\"true\" || _frameObj.mask.use==true ? convertTransformValues({frame:{transform:{x:_frameObj.mask.x, y:_frameObj.mask.y, clip:_frameObj.mask.clip}}, layerid:_.layerid, ease:anim.ease,target:\"mask\"}) : undefined,\r\n\t\t\t\tfrommask = fi===firstframe ? convertTransformValues({frame:{transform:{x:_fromFrameObj.mask.x, y:_fromFrameObj.mask.y, clip:_fromFrameObj.mask.clip}}, layerid:_.layerid, ease:anim.ease,target:\"frommask\"}) : undefined,\r\n\t\t\t\torigEase = anim.ease;\r\n\r\n\r\n\r\n\t\t\t// SET COLOR ON LAYER (TO AND FROM)\r\n\t\t\tif (_frameObj.color!==undefined && _frameObj.color.use)\r\n\t\t\t\tanim.color = window.RSColor.get(_frameObj.color.color);\r\n\t\t\telse\r\n\t\t\t\tanim.color = window.RSColor.get(l.idle.color[RVS.screen].v);\r\n\r\n\t\t\tif (_fromFrameObj!==undefined) {\r\n\t\t\t\tif (_fromFrameObj.color!==undefined && _fromFrameObj.color.use)\r\n\t\t\t\t\tfrom.color = window.RSColor.get(_fromFrameObj.color.color);\r\n\t\t\t\telse\r\n\t\t\t\t\tfrom.color = window.RSColor.get(l.idle.color[RVS.screen].v);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t// SET BACKGROUNDCOLOR ON LAYER (TO AND FROM)\r\n\t\t\tif (_frameObj.bgcolor!==undefined && _frameObj.bgcolor.use) {\r\n\t\t\t\tvar bgval = window.RSColor.get(_frameObj.bgcolor.backgroundColor);\r\n\t\t\t\tif (bgval.indexOf(\"gradient\")>=0) anim.background = bgval;\r\n\t\t\t\telse anim.backgroundColor = bgval;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvar bgval = window.RSColor.get(l.idle.backgroundColor);\r\n\t\t\t\tif (bgval.indexOf(\"gradient\")>=0) anim.background = bgval;\r\n\t\t\t\telse anim.backgroundColor = bgval;\r\n\t\t\t}\r\n\r\n\t\t\tif (_fromFrameObj!==undefined) {\r\n\t\t\t\tif (_fromFrameObj.bgcolor!==undefined && _fromFrameObj.bgcolor.use) {\r\n\t\t\t\t\tvar bgval = window.RSColor.get(_fromFrameObj.bgcolor.backgroundColor);\r\n\t\t\t\t\tif (bgval.indexOf(\"gradient\")>=0) from.background = bgval;\r\n\t\t\t\t\telse from.backgroundColor = bgval;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar bgval = window.RSColor.get(l.idle.backgroundColor);\r\n\t\t\t\t\tif (bgval.indexOf(\"gradient\")>=0) from.background = bgval;\r\n\t\t\t\t\telse from.backgroundColor = bgval;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar maxSplitDelay = 0;\r\n\r\n\t\t\t// ANIMATE CHARS, WORDS, LINES\r\n\t\t\tif (split) {\r\n\t\t\t\tfor (var i in splitTypes) {\r\n\t\t\t\t\tif(!splitTypes.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tif (_frameObj[splitTypes[i]].use && !_.quickRendering) {\r\n\r\n\t\t\t\t\t\tvar sObj = lh.splitText[splitTypes[i]], //,_frameObj[splitTypes[i]].direction),\r\n\t\t\t\t\t\t\tsanim = convertTransformValues({frame:_frameObj, source:splitTypes[i], ease:origEase, layerid:_.layerid,splitAmount:sObj.length, target:fi+\"_\"+splitTypes[i]}),\r\n\t\t\t\t\t\t\tsfrom = (fi===firstframe ? convertTransformValues({frame:_fromFrameObj,  ease:sanim.ease, source:splitTypes[i], layerid:_.layerid,splitAmount:sObj.length, target:\"frame_0_\"+splitTypes[i]}) : undefined);\r\n\r\n\t\t\t\t\t\tsplitDelay =  parseInt(_frameObj[splitTypes[i]].delay,0) /100;\r\n\r\n\t\t\t\t\t\t// SET COLOR ON SPLIT  (TO AND FROM)\r\n\r\n\t\t\t\t\t\tif (window.RSColor.get(l.idle.color[RVS.screen].v)!==anim.color || fi!==\"frame_1\") sanim.color = anim.color; \t// ADDED IF TO RESPECT INLINE STYLES\r\n\t\t\t\t\t\tif (from!==undefined && window.RSColor.get(l.idle.color[RVS.screen].v)!==from.color) sfrom.color = from.color;\t// ADDED IF TO RESPECT INLINE STYLES\r\n\t\t\t\t\t\tif (sfrom!==undefined && sfrom.color!==anim.color) sanim.color=anim.color;\r\n\r\n\t\t\t\t\t\tvar\t$anim = getCycles(RVS.F.safeExtend(true,{},sanim)),\r\n\t\t\t\t\t\t\t$from = fi===firstframe ? getCycles(RVS.F.safeExtend(true,{},sfrom)) : undefined,\r\n\t\t\t\t\t\t\tdir = convertDirection(_frameObj[splitTypes[i]].direction);\r\n\r\n\t\t\t\t\t\tdelete $anim.grayscale;\r\n\t\t\t\t\t\tdelete $anim.brightness;\r\n\t\t\t\t\t\tif ($from!==undefined) {\r\n\t\t\t\t\t\t\tdelete $from.grayscale;\r\n\t\t\t\t\t\t\tdelete $from.brightness;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t$anim.stagger = dir===\"center\" || dir===\"edge\" ? offsetStagger({each:splitDelay, offset:splitDelay/2, from:dir}) : {each:splitDelay, from:convertDirection(_frameObj[splitTypes[i]].direction)};\r\n\r\n\t\t\t\t\t\t$anim.duration = speed;\r\n\t\t\t\t\t\tif ($from!==undefined) delete $from.dir;\r\n\t\t\t\t\t\tif (fi===firstframe) _frame.timeline.add(tt.fromTo(sObj,$from,$anim),0); else _frame.timeline.add(tt.to(sObj,$anim),0);\r\n\t\t\t\t\t\tmaxSplitDelay = Math.max(maxSplitDelay, (sObj.length * splitDelay));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//SPEED SYNC WITH THE SPLIT SPEEDS IF NECESSARY\r\n\t\t\tspeed = speed + maxSplitDelay;\r\n\t\t\ttPE = RVS.SLIDER.settings.general.perspectiveType===\"local\" ? from!==undefined && from.transformPerspective!==undefined ? from.transformPerspective : anim.transformPerspective!==undefined ? anim.transformPerspective : RVS.SLIDER.settings.general.perspective : RVS.SLIDER.settings.general.perspective;\r\n\r\n\t\t\t// ANIMATE MASK\r\n\t\t\tif (mask!==undefined) {\r\n\t\t\t\tmask.overflow = \"hidden\";\r\n\t\t\t\tmask.rotationX = l.idle.rotationX;\r\n\t\t\t\tmask.rotationY = l.idle.rotationY;\r\n\t\t\t\tmask.rotationZ = l.idle.rotationZ;\r\n\t\t\t\tmask.opacity = l.idle.opacity;\r\n\t\t\t\tmask.transformPerspective = tPE;\r\n\t\t\t\tif (fi===firstframe) {\r\n\t\t\t\t\tfrommask.rotationX = l.idle.rotationX;\r\n\t\t\t\t\tfrommask.rotationY = l.idle.rotationY;\r\n\t\t\t\t\tfrommask.rotationZ = l.idle.rotationZ;\r\n\t\t\t\t\tfrommask.opacity = l.idle.opacity;\r\n\t\t\t\t\t_frame.timeline.add(tpGS.gsap.fromTo([lh.m,lh.bgmask],speed,frommask,mask),0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_frame.timeline.add(tpGS.gsap.to([lh.m,lh.bgmask],speed,mask),0);\r\n\t\t\t\t}\r\n\t\t\t\tlh.maskAnimFirst = true;\r\n\t\t\t} else {\r\n\t\t\t\tif (parseInt(l.idle.rotationX,0)===0 && parseInt(l.idle.rotationY,0)==0 && parseInt(l.idle.rotationZ,0)==0) {\r\n\t\t\t\t\tif (lh.maskAnimFirst || lh.maskAnimFirst==undefined) {\r\n\t\t\t\t\t\tlh.m.style.transform = \"none\";\r\n\t\t\t\t\t\tlh.m.style.filter = \"none\";\r\n\t\t\t\t\t\tlh.m.style.overflow = 'visible';\r\n\t\t\t\t\t\tlh.maskAnimFirst = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlh.m.style.opacity = l.idle.opacity;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlh.maskAnimFirst = true;\r\n\t\t\t\t\t_frame.timeline.add(tpGS.gsap.to(lh.m,0.001,{transformPerspective: tPE, filter:\"none\", x:0, y:0, opacity:l.idle.opacity, rotationX:l.idle.rotationX,  rotationY:l.idle.rotationY, rotationZ:l.idle.rotationZ, overflow:\"visible\"}),0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tanim.force3D=\"auto\";\r\n\r\n\t\t\tdelete anim.clipB;\r\n\r\n\t\t\t// ANIMATE ELEMENT\r\n\t\t\tif (fi===firstframe) {\r\n\t\t\t\tdelete from.clipB;\r\n\t\t\t\tdelete from.transformPerspective;\r\n\t\t\t\tif (lh.bg!==undefined) _frame.timeline.fromTo(lh.bg,speed,from,anim,0);\r\n\t\t\t\tif (lh.bg!==undefined && l.type===\"column\")\r\n\t\t\t\t\t_frame.timeline.fromTo(aObj,speed,reduceColumn(from),reduceColumn(anim),0);\r\n\t\t\t\telse\r\n\t\t\t\t\t_frame.timeline.fromTo(aObj,speed,from,anim,0);\r\n\t\t\t\t// BACKDROP FILTER ON THE RIGHT LEVEL\r\n\t\t\t\t/*if ((anim[\"backdrop-filter\"]!==undefined || from[\"backdrop-filter\"]!==undefined) && l.type!==\"row\")\r\n\t\t\t\t\t_frame.timeline.add(tpGS.gsap.fromTo(l.type!==\"column\" ? lh.w : lh.bg,speed,{'backdrop-filter':from[\"backdrop-filter\"]},{'backdrop-filter':anim[\"backdrop-filter\"],ease:anim.ease}),0);\r\n\t\t\t\t*/\r\n\t\t\t} else {\r\n\t\t\t\tif (lh.bg!==undefined) _frame.timeline.to(lh.bg,speed,anim,0);\r\n\r\n\t\t\t\tif (lh.bg!==undefined && l.type===\"column\")\r\n\t\t\t\t\t_frame.timeline.to(aObj, speed, reduceColumn(anim),0);\r\n\t\t\t\telse\r\n\t\t\t\t\t_frame.timeline.to(aObj, speed, anim,0);\r\n\r\n\t\t\t\t// BACKDROP FILTER ON THE RIGHT LEVEL\r\n\t\t\t\t/*if ((anim[\"backdrop-filter\"]!==undefined) && l.type!==\"row\")\r\n\t\t\t\t\t_frame.timeline.add(tpGS.gsap.to(l.type!==\"column\" ? lh.w : lh.bg,speed,{'backdrop-filter':anim[\"backdrop-filter\"],ease:anim.ease}),0);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\r\n\t\t\tif (origEase!==undefined && Array.isArray(origEase) && origEase.indexOf(\"SFXBounce\")>=0) _frame.timeline.to(aObj,speed,{scaleY:0.5,scaleX:1.3,ease:anim.ease+\"-squash\",transformOrigin:\"bottom\"},0.0001);\r\n\r\n\t\t\tif (_.timeline===\"full\") {\r\n\t\t\t\tvar pos = parseInt(_frameObj.timeline.start,0)/1000;\r\n\t\t\t\tlh.timeline.addLabel(fi,pos);\r\n\t\t\t\tlh.timeline.add(_frame.timeline,pos);\r\n\t\t\t\tlh.timeline.addLabel(fi+\"_end\",\"+=0.01\");\r\n\t\t\t\tif (l.timeline.frameToIdle === fi) lh.timeline.addLabel(\"frame_IDLE\");\r\n\t\t\t} else {\r\n\t\t\t\tlh.timeline.addLabel(fi);\r\n\t\t\t\tlh.timeline.add(_frame.timeline);\r\n\t\t\t\tif (fi===_.frame) {\r\n\t\t\t\t\tlh.timeline.addPause(fi+\"_end+=0.5\", function(frame) {this.play(frame);},[_.frame]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlh.timeline.addLabel(fi+\"_end\");\r\n\t\t\t\t\tif (l.timeline.frameToIdle === fi) lh.timeline.addLabel(\"frame_IDLE\");\r\n\t\t\t\t\tif (l.timeline.loop.use) {\r\n\t\t\t\t\t\tlh.timeline.addPause(fi+\"_end+=\"+l.timeline.loop.speed/500,function() {this.play();});\r\n\t\t\t\t\t\tif (fi==\"frame_999\") lh.timeline.addPause(fi+\"_end+=0.5\",function() {this.play(0);});\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tlh.timeline.addPause(fi+\"_end+=0.5\",function() {this.play();});\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// RENDER HOVER ANIMATION\r\n\t\tif ((l.hover.usehover=='true' || l.hover.usehover==true || l.hover.usehover==\"desktop\") && lh.htr) {\r\n\t\t\tif (lh.hover!==undefined) lh.hover.kill();\r\n\t\t\tlh.hover = new tpGS.TimelineMax();\r\n\t\t\tlh.hover.pause();\r\n\t\t\tlh.htr.ease = l.hover.ease;\r\n\r\n\t\t\tvar hoverspeed = parseInt(l.hover.speed,0)/1000;\r\n\t\t\thoverspeed = hoverspeed===0 ? 0.00001 : hoverspeed;\r\n\t\t\tif (l.type===\"column\" || l.type===\"row\") lh.hover.to(lh.bg,hoverspeed,RVS.F.safeExtend(true,{},lh.htr),0);\r\n\t\t\tif ((l.type===\"text\" || l.type===\"button\") && l.timeline.split && lh.splitText!==undefined)\r\n\t\t\t\tlh.hover.to([lh.splitText.lines, lh.splitText.words, lh.splitText.chars],hoverspeed,{ color:lh.htr.color,ease:lh.htr.ease},0);\r\n\r\n\t\t\tif (l.type===\"column\")\r\n\t\t\t\tlh.hover.to(lh.c,hoverspeed,reduceColumn(RVS.F.safeExtend(true,{},lh.htr)),0);\r\n\t\t\telse\r\n\t\t\t\tlh.hover.to(lh.c,hoverspeed,RVS.F.safeExtend(true,{},lh.htr),0);\r\n\r\n\t\t\tif (l.type===\"svg\") {\r\n\t\t\t\tif (l.idle.svg.originalColor!==true) {\r\n\t\t\t\t\tlh.hover.to(lh.svg,hoverspeed,{\tfill:window.RSColor.get(l.hover.svg.color),\r\n\t\t\t\t\t\t\t\t\t\t\t\tstroke:window.RSColor.get(l.hover.svg.strokeColor),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"stroke-width\":l.hover.svg.strokeWidth,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"stroke-dasharray\":RVS.F.getDashArray(l.hover.svg.strokeDashArray),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"stroke-dashoffset\":(l.hover.svg.strokeDashOffset===undefined ? 0 : l.hover.svg.strokeDashOffset)\r\n\t\t\t\t\t\t\t\t\t\t\t},0);\r\n\t\t\t\t\tlh.hover.to(lh.svgPath,hoverspeed,{ fill:window.RSColor.get(l.hover.svg.color)},0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlh.hover.to([lh.m,lh.bgmask],hoverspeed,{overflow:l.hover.usehovermask ? \"hidden\" : \"visible\"},0);\r\n\r\n\t\t\t//SET HOVER ANIMATION\r\n\t\t\tif (!lh.hoverlistener) {\r\n\t\t\t\t//lh.uid = _.layerid;\r\n\t\t\t\tlh.hoverlistener= true;\r\n\t\t\t\tlh.w.on('mouseenter',function() {\r\n\t\t\t\t\tif (this.dataset.uid!==undefined && RVS.L[this.dataset.uid].hover.usehover!=true && RVS.L[this.dataset.uid].hover.usehover!='true') return;\r\n\t\t\t\t\tlh.hover.play();\r\n\t\t\t\t}).on('mouseleave', function() {\r\n\t\t\t\t\tif (this.dataset.uid!==undefined && RVS.L[this.dataset.uid].hover.usehover!=true && RVS.L[this.dataset.uid].hover.usehover!='true') RVS.H[this.dataset.uid].hover.time(0).pause();\r\n\t\t\t\t\tif (RVS.eMode.mode!==\"hover\" || !lh.w.hasClass(\"selected\")) lh.hover.reverse();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (RVS.eMode.mode===\"hover\" && jQuery.inArray(parseInt(l.uid,0),RVS.selLayers)>=0 && RVS.L[_.layerid].hover.usehove)\r\n\t\t\t\t\tlh.hover.play();\r\n\t\t\t\telse\r\n\t\t\t\tif (lh.hover.time()>0)  lh.hover.reverse();\r\n\r\n\t\t\t}\r\n\t\t}\telse\r\n\t\tif (lh.hoverlistener) {\r\n\t\t\tlh.hoverlistener= false;\r\n\t\t\tlh.w.off('hover');\r\n\t\t}\r\n\r\n\r\n\t\t//RENDER LOOP ANIMATION\r\n\t\tif (l.timeline.loop.use && (!idleMode || RVS.eMode.mode===\"animation\")) {\r\n\t\t\tvar lif = l.timeline.loop.frame_0,\r\n\t\t\t\tlof = l.timeline.loop.frame_999,\r\n\t\t\t\t/* repeat = -1, */\r\n\t\t\t\tlooptime = new tpGS.TimelineMax({}),\r\n\t\t\t\tloopmove = new tpGS.TimelineMax({repeat:-1,yoyo:l.timeline.loop.yoyo_move}),\r\n\t\t\t\tlooprotate = new tpGS.TimelineMax({repeat:-1,yoyo:l.timeline.loop.yoyo_rotate}),\r\n\t\t\t\tloopscale = new tpGS.TimelineMax({repeat:-1,yoyo:l.timeline.loop.yoyo_scale}),\r\n\t\t\t\tloopfilter = new tpGS.TimelineMax({repeat:-1,yoyo:l.timeline.loop.yoyo_filter}),\r\n\t\t\t\tlspeed = parseInt(l.timeline.loop.speed,0)/1000,\r\n\t\t\t\tlstart = parseInt(l.timeline.loop.start)/1000 || 0,\r\n\t\t\t\tlsspeed = 0.2,\r\n\t\t\t\tlssstart = lstart+lsspeed,\r\n\t\t\t\tloopresetfilter = 'blur(0px) grayscale(0%) brightness(100%)',\r\n\t\t\t\tloopsfilter = 'blur('+parseInt(lif.blur || 0,0)+'px) grayscale('+parseInt(lif.grayscale || 0 ,0)+'%) brightness('+parseInt(lif.brightness || 100,0)+'%)',\r\n\t\t\t\tloopendfilter = 'blur('+(lof.blur || 0)+'px) grayscale('+(lof.grayscale || 0)+'%) brightness('+(lof.brightness || 100)+'%)';\r\n\r\n\t\t\tif (loopsfilter === 'blur(0px) grayscale(0%) brightness(100%)' && loopendfilter === 'blur(0px) grayscale(0%) brightness(100%)') {\r\n\t\t\t\tloopsfilter  =\"none\";\r\n\t\t\t\tloopendfilter = \"none\";\r\n\t\t\t\tloopresetfilter = \"none\";\r\n\t\t\t}\r\n\r\n\t\t\tlooptime.add(loopmove,0);\r\n\t\t\tlooptime.add(looprotate,0);\r\n\t\t\tlooptime.add(loopscale,0);\r\n\t\t\tlooptime.add(loopfilter,0);\r\n\r\n\t\t\t//LOOP MOVE ANIMATION\r\n\t\t\tif (!l.timeline.loop.curved) {\r\n\t\t\t\t//Move in First Position\r\n\t\t\t\tlh.timeline.fromTo(lh.lp,lsspeed,{'-webkit-filter':loopresetfilter, 'filter':loopresetfilter, x:0,y:0,z:0, scale:1,skewX:0, skewY:0, rotationX:0, rotationY:0,rotationZ:0, transformPerspective:tPE, transformOrigin:l.timeline.loop.originX+\" \"+l.timeline.loop.originY+\" \"+l.timeline.loop.originZ, opacity:1},\r\n\t\t\t\t\tRVS.F.checkLoopSkew({ x:lif.x, y:lif.y, z:lif.z, scaleX:lif.scaleX, skewX:lif.skewX, skewY:lif.skewY, scaleY:lif.scaleY,rotationX:lif.rotationX,rotationY:lif.rotationY,rotationZ:lif.rotationZ, ease:\"sine.out\", opacity:lif.opacity,'-webkit-filter':loopsfilter, 'filter':loopsfilter}),lstart);\r\n\t\t\t\tloopmove.to(lh.lp,(l.timeline.loop.yoyo_move ? lspeed/2 : lspeed),{x:lof.x, y:lof.y, z:lof.z, ease:l.timeline.loop.ease});\r\n\t\t\t} else {\r\n\t\t\t\t//CALCULATE EDGES\r\n\t\t\t\tvar sangle = parseInt(l.timeline.loop.radiusAngle,0) || 0,\r\n\t\t\t\t\tv = [{x:parseInt(lif.x,0)-parseInt(lif.xr,0), y:0, z:parseInt(lif.z,0)-parseInt(lif.zr,0)},\t{x:0, y:parseInt(lif.y,0)+parseInt(lif.yr,0), z:0}, {x:parseInt(lof.x,0)+parseInt(lof.xr,0), y:0, z:parseInt(lof.z,0)+parseInt(lof.zr,0)},{x:0, y:parseInt(lof.y,0)-parseInt(lof.yr,0), z:0}],\r\n\t\t\t\t\tmotionPath = {type:\"thru\",curviness:l.timeline.loop.curviness,path:[],autoRotate:l.timeline.loop.autoRotate};\r\n\t\t\t\tfor (var bind in v) {\r\n\t\t\t\t\tif(!v.hasOwnProperty(bind)) continue;\r\n\t\t\t\t\tmotionPath.path[bind] = v[sangle];\r\n\t\t\t\t\tsangle++;\r\n\t\t\t\t\tsangle = sangle==v.length ? 0 : sangle;\r\n\t\t\t\t}\r\n\t\t\t\t//Move in First Position\r\n\t\t\t\tlh.timeline.fromTo(lh.lp,lsspeed,{ '-webkit-filter':loopresetfilter, 'filter':loopresetfilter, x:0,y:0,z:0, scale:1,skewX:0, skewY:0, rotationX:0, rotationY:0,rotationZ:0, transformPerspective:tPE, transformOrigin:l.timeline.loop.originX+\" \"+l.timeline.loop.originY+\" \"+l.timeline.loop.originZ, opacity:1},{ x:motionPath.path[3].x, y:motionPath.path[3].y, z:motionPath.path[3].z, scaleX:lif.scaleX, skewX:lif.skewX, skewY:lif.skewY, scaleY:lif.scaleY,rotationX:lif.rotationX,rotationY:lif.rotationY,rotationZ:lif.rotationZ, '-webkit-filter':loopsfilter, 'filter':loopsfilter, ease:\"sine.out\", opacity:lif.opacity},lstart);\r\n\t\t\t\tloopmove.to(lh.lp,(l.timeline.loop.yoyo_move ? lspeed/2 : lspeed),{motionPath:motionPath, ease:l.timeline.loop.ease});\r\n\t\t\t}\r\n\r\n\t\t\t//LOOP ROTATE ANIMATION\r\n\t\t\tlooprotate.to(lh.lp,(l.timeline.loop.yoyo_rotate ? lspeed/2 : lspeed),{rotationX:lof.rotationX,rotationY:lof.rotationY,rotationZ:lof.rotationZ, ease:l.timeline.loop.ease});\r\n\t\t\t//LOOP SCALE ANIMATION\r\n\t\t\tloopscale.to(lh.lp,(l.timeline.loop.yoyo_scale ? lspeed/2 : lspeed),RVS.F.checkLoopSkew({scaleX:lof.scaleX, scaleY:lof.scaleY, skewX:lof.skewX, skewY:lof.skewY, ease:l.timeline.loop.ease}));\r\n\r\n\t\t\t//LOOP FILTER ANIMATION\r\n\t\t\tvar filtanim = { opacity:lof.opacity ,ease:l.timeline.loop.ease, '-webkit-filter':loopendfilter, 'filter':loopendfilter};\r\n\t\t\tloopfilter.to(lh.lp,(l.timeline.loop.yoyo_filter ? lspeed/2 : lspeed),filtanim);\r\n\r\n\t\t\t//WELCHE WERTE MUSS ICH HIN UND HER SCHIEBEN ??\r\n\t\t\tlh.timeline.add(looptime,lssstart);\r\n\t\t} else {\r\n\t\t\tloopmove = new tpGS.TimelineMax({});\r\n\t\t\tloopmove.set(lh.lp,{'-webkit-filter':'none', 'filter':'none', x:0,y:0,z:0, scale:1,skewX:0, skewY:0, rotationX:0, rotationY:0,rotationZ:0, transformPerspective:tPE, transformOrigin:\"50% 50%\", opacity:1});\r\n\t\t\tlh.timeline.add(loopmove,0);\r\n\t\t}\r\n\r\n\r\n\t\tif (_.mode!==\"atstart\") {\r\n\t\t\tif (RVS.S.keyFrame===\"0\" || RVS.S.keyFrame===\"frame_0\")\r\n\t\t\t\tlh.timeline.pause(\"frame_1\");\r\n\t\t\telse\r\n\t\t\tif (RVS.S.keyFrame===\"idle\")\r\n\t\t\t\tlh.timeline.pause(\"frame_IDLE\");\r\n\t\t\telse {\r\n\t\t\t\tlh.timeline.pause(RVS.S.keyFrame+\"_end\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (_.time!==undefined)\r\n\t\t\tlh.timeline.time(_.time);\r\n\r\n\t\tif (_.timeline===\"loopsingleframe\")\r\n\t\t\tlh.timeline.play(_.frame);\r\n\t\telse\r\n\t\tif (_.timeline!==\"full\") {\r\n\t\t\tlh.timeline.eventCallback(\"onComplete\",function() {this.restart();});\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.checkLoopSkew = function(_) {\r\n\t\tif (_.skewX===undefined) delete _.skewX;\r\n\t\tif (_.skewY===undefined) delete _.skewY;\r\n\t\treturn _;\r\n\t}\r\n\r\n\tRVS.F.buildFullLayerAnimation = function(mode) {\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.L[li].uid!==undefined) RVS.F.renderLayerAnimation({layerid:li, timeline:\"full\",mode:mode});\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// PLAY SHORT LAYER ANIMATIONS\r\n\tRVS.F.playLayerAnimation = function(_) {\r\n\t\tif(_.time!==undefined)\r\n\t\t\tRVS.H[_.layerid].timeline.play(_.time);\r\n\t\telse\r\n\t\t\tRVS.H[_.layerid].timeline.play(0);\r\n\t\tanimatedLayers.push(_.layerid);\r\n\t};\r\n\r\n\t// STOP SINGLE LAYER ANIMATION\r\n\tRVS.F.stopLayerAnimation = function(_) {\r\n\t\tif (RVS.H[_.layerid]===undefined) return;\r\n\t\tif (RVS.H[_.layerid].timeline) RVS.H[_.layerid].timeline.pause(\"frame_IDLE\");\r\n\t\tanimatedLayers = RVS.F.rArray(animatedLayers,parseInt(_.layerid,0));\r\n\t};\r\n\r\n\t// STOP ALL LAYER ANIAMTION\r\n\tRVS.F.stopAllLayerAnimation = function() {\r\n\t\tvar wassomething = animatedLayers.length;\r\n\t\twhile (animatedLayers.length>0) {\r\n\t\t\tRVS.F.stopLayerAnimation({layerid:animatedLayers[0]});\r\n\t\t}\r\n\t\tif (wassomething>0)\r\n\t\t\tif (RVS.TL.cache.main<=0)\r\n\t\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"stopAllLayerAnimation\"});\r\n\t\t\telse\r\n\t\t\t\tRVS.F.updateTimeLine({force:true, state:\"time\",time:RVS.TL.cache.main, timeline:\"main\", forceFullLayerRender:true, updateCurTime:true});\r\n\t};\r\n\r\n\tRVS.F.stopAndPauseAllLayerAnimation = function() {\r\n\t\tRVS.S.shwLayerAnim = false;\r\n\t\tRVS.F.changeSwitchState({el:document.getElementById(\"layer_simulator\"),state:\"play\"});\r\n\t\tRVS.F.changeSwitchState({el:document.getElementById(\"layer_simulator_loop\"),state:\"play\"});\r\n\t\tRVS.F.stopAllLayerAnimation();\r\n\t};\r\n\t////////////////////////////////////////\r\n\t// \t\tLAYER ANIMATION FUNCTIONS\t //\r\n\t////////////////////////////////////////\r\n\tfunction getCycles(anim) {\r\n\t \tvar _;\r\n\t\tfor (var a in anim) if (anim.hasOwnProperty(a)) {\r\n\t\t\tif (typeof anim[a] === \"string\" && anim[a].indexOf(\"|\")>=0) {\r\n\t\t\t\t_=anim[a].replace(\"[\",\"\").replace(\"]\",\"\").split(\"|\");\r\n\t\t\t\tanim[a]=new function(index) { return tpGS.gsap.utils.wrap(_,index)};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn anim;\r\n\t};\r\n\r\n\tfunction shuffleArray(array) {\r\n\t  var currentIndex = array.length, temporaryValue, randomIndex;\r\n\r\n\t  // While there remain elements to shuffle...\r\n\t  while (0 !== currentIndex) {\r\n\r\n\t    // Pick a remaining element...\r\n\t    randomIndex = Math.floor(Math.random() * currentIndex);\r\n\t    currentIndex -= 1;\r\n\r\n\t    // And swap it with the current element.\r\n\t    temporaryValue = array[currentIndex];\r\n\t    array[currentIndex] = array[randomIndex];\r\n\t    array[randomIndex] = temporaryValue;\r\n\t  }\r\n\t  return array;\r\n\t}\r\n\r\n\t// SFX ANIMATIONS\r\n\tfunction checkSFXAnimations(effect,mask,easedata) {\r\n\r\n\t\t// BLOCK SFX ANIMATIONS\r\n\t\tif (effect!==undefined && effect.indexOf(\"block\")>=0) {\r\n\t\t\tvar sfx = {};\r\n\t\t\tsfx.bmask_in = mask.querySelector('.tp-blockmask_in');\r\n\t\t\tif (sfx.bmask_in===null) {\r\n\t\t\t\tsfx.bmask_in = RVS.F.cE({cN:\"tp-blockmask_in\"});\r\n\t\t\t\tsfx.bmask_out = RVS.F.cE({cN:\"tp-blockmask_out\"});\r\n\t\t\t\tmask.appendChild(sfx.bmask_in);\r\n\t\t\t\tmask.appendChild(sfx.bmask_out);\r\n\t\t\t} else\r\n\t\t\t\tsfx.bmask_out = mask.querySelector('.tp-blockmask_out');\r\n\r\n\t\t\teasedata=easedata===undefined ? \"power3.inOut\" : easedata;\r\n\r\n\t\t\tsfx.ft = [{scaleY:1,scaleX:0,transformOrigin:\"0% 50%\"},{scaleY:1,scaleX:1,ease:easedata,immediateRender:false}];\r\n\t\t\tsfx.t =  {scaleY:1,scaleX:0,transformOrigin:\"100% 50%\",ease:easedata,immediateRender:false};\r\n\r\n\t\t\tsfx.type = \"block\";\r\n\r\n\t\t\tswitch (effect) {\r\n\t\t\t\tcase \"blocktoleft\":\r\n\t\t\t\tcase \"blockfromright\":\r\n\t\t\t\t\tsfx.ft[0].transformOrigin = \"100% 50%\";\r\n\t\t\t\t\tsfx.t.transformOrigin = \"0% 50%\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"blockfromtop\":\r\n\t\t\t\tcase \"blocktobottom\":\r\n\t\t\t\t\tsfx.ft = [{scaleX:1,scaleY:0,transformOrigin:\"50% 0%\"},{scaleX:1,scaleY:1,ease:easedata,immediateRender:false}];\r\n\t\t\t\t\tsfx.t =  {scaleX:1,scaleY:0,transformOrigin:\"50% 100%\",ease:easedata,immediateRender:false};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"blocktotop\":\r\n\t\t\t\tcase \"blockfrombottom\":\r\n\t\t\t\t\tsfx.ft = [{scaleX:1,scaleY:0,transformOrigin:\"50% 100%\"},{scaleX:1,scaleY:1,ease:easedata,immediateRender:false}];\r\n\t\t\t\t\tsfx.t =  {scaleX:1,scaleY:0,transformOrigin:\"50% 0%\",ease:easedata,immediateRender:false};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tsfx.ft[1].overwrite = \"auto\";\r\n\t\t\tsfx.t.overwrite = \"auto\";\r\n\r\n\t\t\treturn sfx;\r\n\t\t} else {\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction convertTransformValues(_) {\r\n\r\n\t\tvar a = _.source === undefined ? RVS.F.safeExtend(true,{},_.frame.transform) : RVS.F.safeExtend(true,{},_.frame[_.source]),\r\n\t\t\tdim ,\r\n\t\t\ttorig = {originX:\"50%\", originY:\"50%\", originZ:\"0\"};\r\n\r\n\t\tfor (var atr in a) {\r\n\t\t\tif(!a.hasOwnProperty(atr)) continue;\r\n\r\n\t\t\ta[atr] = (typeof a[atr]===\"object\") ? a[atr][RVS.screen].v : a[atr];\r\n\r\n\t\t\tif (a[atr] === \"inherit\" || atr===\"delay\" || atr===\"direction\" || atr===\"use\" || atr===\"fuse\") delete a[atr];\t// NOT FOR ANIMATION\r\n\t\t\telse if (atr===\"originX\" || atr===\"originY\" || atr===\"originZ\") { // ORIGINS CAN BE IGNORED\r\n\t\t\t\ttorig[atr] = a[atr];\r\n\t\t\t\tdelete a[atr];\r\n\t\t\t} else {\r\n\t\t\t\tif ((atr===\"perspective\" || atr===\"transformPerspective\") && (RVS.SLIDER.settings.general.perspectiveType===\"global\" || RVS.SLIDER.settings.general.perspectiveType===\"isometric\")) a[atr] =  RVS.SLIDER.settings.general.perspectiveType===\"isometric\" ? 0 : RVS.SLIDER.settings.general.perspective;\r\n\t\t\t\tif (RVS.F.isNumeric(a[atr],0)) a[atr] = a[atr];  // NUMERIC ?\r\n\t\t\t\telse\r\n\t\t\t\tif (a[atr].match(/[\\{\\}]/g)) a[atr] = \"random(\"+a[atr].replace(/[\\{&&\\}]+/g,'')+\")\"; // RANDOM RANGE ?\r\n\t\t\t\telse\r\n\t\t\t\tif (a[atr].match(/%/g) && RVS.F.isNumeric(parseInt(a[atr],0))) {\r\n\t\t\t\t\tdim = dim===undefined ? {height:RVS.H[_.layerid].w.height(), width:RVS.H[_.layerid].w.width()} : dim;\r\n\t\t\t\t\ta[atr] = atr==\"x\" ? dim.width*parseInt(a[atr],0)/100 : atr==\"y\" ? dim.height*parseInt(a[atr],0)/100 : a[atr]; // % BASED ?\r\n\t\t\t\t} else\r\n\t\t\t\tif (a[atr].match(/[\\[\\]]/g)) {\t// CYCLE ?\r\n\t\t\t\t\tvar cycar = a[atr].replace(\"[\",\"\").replace(\"]\",\"\").split(\"|\");\r\n\t\t\t\t\ta[atr] = new function(index) { return tpGS.gsap.utils.wrap(cycar,index)};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar pos = RVS.H[_.layerid].w.position(),\r\n\t\t\t\t\t\tloffset = RVS.L[_.layerid].behavior.baseAlign===\"slide\" ? RVS.S.layer_grid_offset.left : 0,\r\n\t\t\t\t\t\twrapperheight = RVS.L[_.layerid].group.puid===-1 ? RVS.S.lgh : RVS.H[RVS.L[_.layerid].group.puid]===undefined ? RVS.S.lgh  : RVS.H[RVS.L[_.layerid].group.puid].w.height(),\r\n\t\t\t\t\t\twrapperwidth = RVS.L[_.layerid].group.puid===-1 ? RVS.S.lgw : RVS.H[RVS.L[_.layerid].group.puid]===undefined ? RVS.S.lgw  : RVS.H[RVS.L[_.layerid].group.puid].w.width(),\r\n\t\t\t\t\t\tzoneOffset = {t:0, b:0};\r\n\r\n\t\t\t\t\tif (RVS.L[_.layerid].type===\"row\") {\r\n\t\t\t\t\t\tif (RVS.L[_.layerid].group.puid===\"top\")\r\n\t\t\t\t\t\t\tzoneOffset = {t:0, b:Math.round(RVS.C.rZone.top[0].offsetHeight)};\r\n\t\t\t\t\t\telse if (RVS.L[_.layerid].group.puid===\"middle\")\r\n\t\t\t\t\t\t\tzoneOffset = {t:Math.round(RVS.S.ulDIM.height/2 - RVS.C.rZone.middle[0].offsetHeight/2), b:Math.round(RVS.S.ulDIM.height/2 + RVS.C.rZone.middle[0].offsetHeight/2)};\r\n\t\t\t\t\t\telse if (RVS.L[_.layerid].group.puid===\"bottom\")\r\n\t\t\t\t\t\t\tzoneOffset = {t:Math.round(RVS.S.ulDIM.height - RVS.C.rZone.bottom[0].offsetHeight), b:RVS.S.ulDIM.height+RVS.C.rZone.bottom[0].offsetHeight};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdim = dim===undefined ? {height:RVS.H[_.layerid].w.height(), width:RVS.H[_.layerid].w.width()} : dim;\r\n\t\t\t\t\tswitch (a[atr]) {\r\n\t\t\t\t\t\tcase \"top\":a[atr] = 0-dim.height-pos.top - zoneOffset.b;break;\r\n\t\t\t\t\t\tcase \"bottom\":a[atr] = wrapperheight-pos.top - zoneOffset.t;break;\r\n\t\t\t\t\t\tcase \"left\":a[atr] = loffset-dim.width-pos.left;break;\r\n\t\t\t\t\t\tcase \"right\":a[atr] = wrapperwidth-pos.left;break;\r\n\t\t\t\t\t\tcase \"middle\": case \"center\": a[atr] = atr===\"x\" ? wrapperwidth/2 - pos.left - dim.width/2 : atr===\"y\" ? wrapperheight/2 - pos.top - dim.height/2 : a[atr];break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// MANAGE SKEW CALCULATION\r\n\t\t\tif (atr===\"skewX\" && a[atr]!==undefined && parseFloat(a[atr])!==0) {\r\n\t\t\t\ta['scaleY'] = a['scaleY']===undefined ? 1 : parseFloat(a['scaleY']);\r\n\t\t\t\ta['scaleY'] *= Math.cos(parseFloat(a[atr]) * tpGS.DEG2RAD);\r\n\t\t\t}\r\n\t\t\tif (atr===\"skewY\" && a[atr]!==undefined & parseFloat(a[atr])!==0) {\r\n\t\t\t\ta['scaleX'] = a['scaleX']===undefined ? 1 : parseFloat(a['scaleX']);\r\n\t\t\t\ta['scaleX'] *= Math.cos(parseFloat(a[atr]) * tpGS.DEG2RAD);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ta.transformOrigin = torig.originX+\" \"+torig.originY+\" \"+torig.originZ;\r\n\r\n\t\t// CLIPPING EFFECTS\r\n\t\tif (a.clip && RVS.L[_.layerid].timeline.clipPath.use) {\r\n\t\t\tvar\tcty = RVS.L[_.layerid].timeline.clipPath.type==\"rectangle\",\r\n\t\t\t\tcl = parseInt(a.clip,0),\r\n\t\t\t\tclb = 100-parseInt(a.clipB,0),\r\n\t\t\t\tch = Math.round(cl/2);\r\n\r\n\t\t\tswitch (RVS.L[_.layerid].timeline.clipPath.origin) {\r\n\t\t\t\tcase \"invh\": a.clipPath = \"polygon(0% 0%, 0% 100%, \"+cl+\"% 100%, \"+cl+\"% 0%, 100% 0%, 100% 100%, \"+clb+\"% 100%, \"+clb+\"% 0%, 0% 0%)\";break;\r\n\t\t\t\tcase \"invv\": a.clipPath = \"polygon(100% 0%, 0% 0%, 0% \"+cl+\"%, 100% \"+cl+\"%, 100% 100%, 0% 100%, 0% \"+clb+\"%, 100% \"+clb+\"%, 100% 0%)\";break;\r\n\t\t\t\tcase \"cv\":a.clipPath = cty ? \"polygon(\"+(50-ch)+\"% 0%, \"+(50+ch)+\"% 0%, \"+(50+ch)+\"% 100%, \"+(50-ch)+\"% 100%)\" : \"circle(\"+cl+\"% at 50% 50%)\";break;\r\n\t\t\t\tcase \"ch\":a.clipPath = cty ? \"polygon(0% \"+(50-ch)+\"%, 0% \"+(50+ch)+\"%, 100% \"+(50+ch)+\"%, 100% \"+(50-ch)+\"%)\" : \"circle(\"+cl+\"% at 50% 50%)\";break;\r\n\t\t\t\tcase \"l\":a.clipPath = cty ? \"polygon(0% 0%, \"+cl+\"% 0%, \"+cl+\"% 100%, 0% 100%)\" : \"circle(\"+cl+\"% at 0% 50%)\";break;\r\n\t\t\t\tcase \"r\":a.clipPath = cty ? \"polygon(\"+(100-cl)+\"% 0%, 100% 0%, 100% 100%, \"+(100-cl)+\"% 100%)\" : \"circle(\"+cl+\"% at 100% 50%)\";break;\r\n\t\t\t\tcase \"t\":a.clipPath = cty ? \"polygon(0% 0%, 100% 0%, 100% \"+cl+\"%, 0% \"+cl+\"%)\" : \"circle(\"+cl+\"% at 50% 0%)\";break;\r\n\t\t\t\tcase \"b\":a.clipPath = cty ? \"polygon(0% 100%, 100% 100%, 100% \"+(100-cl)+\"%, 0% \"+(100-cl)+\"%)\" : \"circle(\"+cl+\"% at 50% 100%)\";break;\r\n\t\t\t\tcase \"lt\":a.clipPath = cty ? \"polygon(0% 0%,\"+(2*cl)+\"% 0%, 0% \"+(2*cl)+\"%)\" : \"circle(\"+cl+\"% at 0% 0%)\";break;\r\n\t\t\t\tcase \"lb\":a.clipPath = cty ? \"polygon(0% \"+(100 - 2*cl)+\"%, 0% 100%,\"+(2*cl)+\"% 100%)\" : \"circle(\"+cl+\"% at 0% 100%)\";break;\r\n\t\t\t\tcase \"rt\":a.clipPath = cty ? \"polygon(\"+(100-2*cl)+\"% 0%, 100% 0%, 100% \"+(2*cl)+\"%)\" : \"circle(\"+cl+\"% at 100% 0%)\";break;\r\n\t\t\t\tcase \"rb\":a.clipPath = cty ? \"polygon(\"+(100-2*cl)+\"% 100%, 100% 100%, 100% \"+(100 - 2*cl)+\"%)\" : \"circle(\"+cl+\"% at 100% 100%)\";break;\r\n\t\t\t\tcase \"clr\":a.clipPath = cty ? \"polygon(0% 0%, 0% \"+cl+\"%, \"+(100-cl)+\"% 100%, 100% 100%, 100% \"+(100-cl)+\"%, \"+cl+\"% 0%)\" : \"circle(\"+cl+\"% at 50% 50%)\";break;\r\n\t\t\t\tcase \"crl\":a.clipPath = cty ? \"polygon(0% \"+(100-cl)+\"%, 0% 100%, \"+cl+\"% 100%, 100% \"+cl+\"%, 100% 0%, \"+(100-cl)+\"% 0%)\" : \"circle(\"+cl+\"% at 50% 50%)\";break;\r\n\t\t\t}\r\n\t\t\tif (RVS.F.isFirefox()!==true) a[\"-webkit-clip-path\"] = a.clipPath;\r\n\t\t\ta[\"clip-path\"] = a.clipPath;\r\n\t\t\t//a.overflow = \"hidden\"\r\n\t\t\tdelete a.clip;\r\n\t\t} else\r\n\t\tif (a.clip) {\r\n\t\t\ta.clipPath = RVS.L[_.layerid].idle.spikeUse ? \"polygon(\"+RVS.F.getClipPaths(RVS.L[_.layerid].idle.spikeLeft,0,parseFloat(RVS.L[_.layerid].idle.spikeLeftWidth))+\",\"+RVS.F.getClipPaths(RVS.L[_.layerid].idle.spikeRight,100,(100-parseFloat(RVS.L[_.layerid].idle.spikeRightWidth)),true)+\")\" : \"none\";\r\n\t\t\tif (RVS.F.isFirefox()!==true)  a[\"-webkit-clip-path\"] = a.clipPath;\r\n\t\t\ta[\"clip-path\"] = a.clipPath;\r\n\t\t\t//if (a.clipPath!==\"none\") a.overflow = \"hidden\"\r\n\t\t\tdelete a.clip;\r\n\t\t}\r\n\r\n\r\n\t\t// BACKDROP FILTER EFFECTS\r\n\t\tif (_.frame!==undefined && _.frame.bfilter!==undefined && _.frame.bfilter.use) {\r\n\t\t\ta['backdrop-filter'] = RVS.F.buildBackdropFilter(_.frame.bfilter);\r\n\t\t\t//a['-webkit-backdrop-filter'] = a['backdrop-filter'];\r\n\t\t}\r\n\r\n\r\n\t\t// FILTER EFFECTS\r\n\t\tif (_.frame!==undefined && _.frame.filter!==undefined && _.frame.filter.use) {\r\n\t\t\ta.filter = RVS.F.buildFilter(_.frame.filter);\r\n\t\t\ta['-webkit-filter'] = a.filter;\r\n\t\t} else\r\n\t\tif (jQuery.inArray(_.source,[\"chars\",\"words\",\"lines\"])>=0 && _.frame[_.source].fuse) {\r\n\t\t\ta.filter = RVS.F.buildFilter(_.frame[_.source]);\r\n\t\t\ta['-webkit-filter'] = a.filter;\r\n\r\n\t\t\t/*a['-webkit-filter']  = 'blur('+(parseInt(_.frame[_.source].blur,0) || 0)+'px) grayscale('+(parseInt(_.frame[_.source].grayscale,0) || 0)+'%) brightness('+(parseInt(_.frame[_.source].brightness,0) || 100)+'%)';\r\n\t\t\ta.filter = 'blur('+(parseInt(_.frame[_.source].blur,0) || 0)+'px) grayscale('+(parseInt(_.frame[_.source].grayscale,0) || 0)+'%) brightness('+(parseInt(_.frame[_.source].brightness,0) || 100)+'%)';\t\t*/\r\n\t\t} else {\r\n\t\t\tif (_.sessionFilterUsed || _.sessionFilterUsed===undefined){\r\n\t\t\t\ta['-webkit-filter'] = \"blur(0px) grayscale(0%) brightness(100%)\";\r\n\t\t\t\ta.filter = \"blur(0px) grayscale(0%) brightness(100%)\";\r\n\t\t\t} else {\r\n\t\t\t\ta['-webkit-filter'] = \"none\";\r\n\t\t\t\ta.filter = \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// EASE\r\n\t\ta.ease = a.ease!==undefined ? a.ease : (a.ease===undefined && _.ease!==undefined) || (a.ease!==undefined && _.ease !==undefined && a.ease===\"inherit\") ? _.ease : _.frame.timeline.ease;\r\n\t\ta.ease = a.ease===undefined || a.ease===\"default\" ? \"power3.inOut\" : a.ease;\r\n\t\ta.force3D = \"auto\";\r\n\t\treturn a;\r\n\t}\r\n\r\n\tRVS.F.buildFilter = function(f) {\r\n\t\tif (f===undefined) return \"\";\r\n\t\tvar r = \"\";\r\n\t\tif (RVS.S.isChrome8889 && f.blur===0) f.blur= 0.05;\r\n\t\tr = f.blur!==undefined ? 'blur('+parseFloat(f.blur || 0)+'px)' : '';\r\n\t\tr += f.grayscale!==undefined ? (r.length>0 ? ' ': '') + 'grayscale('+parseInt(f.grayscale || 0)+'%)' : '';\r\n\t\tr += f.brightness!==undefined ? (r.length>0 ? ' ': '') + 'brightness('+parseInt(f.brightness || 100)+'%)' : '';\r\n\r\n\t\treturn r===\"\" ? \"none\" : r;\r\n\t}\r\n\r\n\tRVS.F.buildBackdropFilter = function(f) {\r\n\t\tif (f===undefined) return \"\";\r\n\t\tvar r = \"\";\r\n\t\tif (RVS.S.isChrome8889 && f.b_blur===0) f.b_blur= 0.05;\r\n\t\tr = f.blur!==undefined ? 'blur('+parseInt(f.blur || 0)+'px)' : '';\r\n\t\tr += f.grayscale!==undefined ? (r.length>0 ? ' ': '') + 'grayscale('+parseInt(f.grayscale || 0)+'%)' : '';\r\n\t\tr += f.sepia!==undefined ? (r.length>0 ? ' ': '') + 'sepia('+parseInt(f.sepia || 0)+'%)' : '';\r\n\t\tr += f.invert!==undefined ? (r.length>0 ? ' ': '') + 'invert('+parseInt(f.invert || 0)+'%)' : '';\r\n\t\tr += f.brightness!==undefined ? (r.length>0 ? ' ': '') + 'brightness('+parseInt(f.brightness || 100)+'%)' : '';\r\n\t\treturn r===\"\" ? \"none\" : r;\r\n\t}\r\n\r\n\tRVS.F.checkGlobalFiltersOnLayer = function(lid) {\r\n\t\tvar gf = RVS.L[lid].timeline.hoverFilterUsed===true;\r\n\t\tif (gf!==true) for (var f in RVS.L[lid].timeline.frames) if (gf===true || !RVS.L[lid].timeline.frames.hasOwnProperty(f)) continue;\t else gf = RVS.L[lid].timeline.frames[f].filter.use;\r\n\t\treturn gf;\r\n\t}\r\n\r\n\tRVS.F.getClipPaths = function(_,o,i,reverse) {\r\n\t\tvar r;\r\n\t\tswitch (_) {\r\n\t\t\tcase \"none\" :   r=o+'% 100%,'+o+'% 0%';break;\r\n\t\t\tcase \"top\" :    r=i+'% 100%,'+o+'% 0%'; break;\r\n\t\t\tcase \"middle\" : r=i+'% 100%,'+o+'% 50%,'+i+'% 0%'; break;\r\n\t\t\tcase \"bottom\" : r=o+'% 100%,'+i+'% 0%'; break;\r\n\t\t\tcase \"two\": \tr=i+'% 100%,'+o+'% 75%,'+i+'% 50%,'+o+'% 25%,'+i+'% 0%';break;\r\n\t\t\tcase \"three\": \tr=o+'% 100%,'+i+'% 75%,'+o+'% 50%,'+i+'% 25%,'+o+'% 0%';break;\r\n\t\t\tcase \"four\": \tr=o+'% 100%,'+i+'% 87.5%,'+o+'% 75%,'+i+'% 62.5%,'+o+'% 50%,'+i+'% 37.5%,'+o+'% 25%,'+i+'% 12.5%,'+o+'% 0%';break;\r\n\t\t\tcase \"five\": \tr=o+'% 100%,'+i+'% 90%,'+o+'% 80%,'+i+'% 70%,'+o+'% 60%,'+i+'% 50%,'+o+'% 40%,'+i+'% 30%,'+o+'% 20%,'+i+'% 10%,'+o+'% 0%';break;\r\n\t\t}\r\n\t\tif (reverse) {\r\n\t\t\tvar s = r.split(\",\");\r\n\t\t\tr=\"\";\r\n\t\t\tfor (var i in s) {\r\n\t\t\t\tif(!s.hasOwnProperty(i)) continue;\r\n\t\t\t\tr+=s[(s.length-1)-i]+(i<s.length-1 ? \",\" : \"\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn r;\r\n\t};\r\n\r\n\t/*\r\n\r\n\r\n.cornerdemo.corner_four { clip-path: polygon(0% 100%, 10% 90%, 0% 70%, 10% 50%, 0% 30%, 10% 10%, 0% 0%, 100% 0%, 90% 10%, 100% 30%, 90% 50%, 100% 70%, 90% 90%, 100% 100%);}\r\n.cornerdemo.corner_five { clip-path: polygon(0% 0%, 100% 0%, 90% 10%, 100% 20%, 90% 30%, 100% 40%, 90% 50%, 100% 60%, 90% 70%, 100% 80%, 90% 90%, 100% 100%, 0% 100%, 10% 90%, 0% 80%, 10% 70%, 0% 60%, 10% 50%, 0% 40%, 10% 30%, 0% 20%, 10% 10%);}\r\n*/\r\n\r\n\r\n\r\n\t/*********************************\r\n\t\t-\tTIMELINE FUNCTIONS -\r\n\t**********************************/\r\n\r\n\tRVS.F.toggleTimeLine = function() {\r\n\t\tif (RVS.TL.timelineStartedFromPlayStop)\r\n\t\t\tRVS.DOC.trigger('stopTimeLine');\r\n\t\telse\r\n\t\t\tRVS.DOC.trigger('playTimeLine');\r\n\t};\r\n\t/*\r\n\tINIT CUSTOM EVENT LISTENERS FOR TRIGGERING FUNCTIONS\r\n\t*/\r\n\tfunction initLocalListeners() {\r\n\t\t// DEFAULTS\r\n\t\tRVS.ENV.tlGridWrap = RVS.ENV.tlGridWrap===undefined ? jQuery('#tl_gridmanagement_wrap') : RVS.ENV.tlGridWrap;\r\n\t\tRVS.ENV.tlMultipWrap = RVS.ENV.tlMultipWrap===undefined ? jQuery('.tl_multip_wrap') : RVS.ENV.tlMultipWrap;\r\n\t\tRVS.ENV.tlMagnifWrap = RVS.ENV.tlMagnifWrap===undefined ? jQuery('.tl_magnifying_wrap') : RVS.ENV.tlMagnifWrap;\r\n\r\n\t\t// UPDATE SLIDE LOOP RANGE\r\n\r\n\t\tRVS.DOC.on('click','#maxtime',function() {\r\n\t\t\tjQuery('.slide_submodule_trigger.selected').removeClass(\"selected\");\r\n\t\t\tRVS.F.mainMode({mode:\"slidelayout\", forms:[\"*slidelayout**mode__slidestyle*#form_slide_progress\"], set:true, uncollapse:true,slide:RVS.S.slideId});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateAllLayerFrames',RVS.F.updateAllLayerFrames);\r\n\r\n\t\tRVS.DOC.on('updateSlideLoopRange',function() {\r\n\t\t\tif (RVS.SLIDER[RVS.S.slideId].slide.timeline.loop.set) RVS.F.updateSlideLoopTimes({cont:true, pos:true, start:RVS.SLIDER[RVS.S.slideId].slide.timeline.loop.start/10, end:RVS.SLIDER[RVS.S.slideId].slide.timeline.loop.end/10});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateFixedScrollRange',function() {\r\n\t\t\tif (RVS.SLIDER.settings.scrolltimeline.set && RVS.SLIDER.settings.scrolltimeline.fixed) RVS.F.updateFixedScrollTimes({cont:true, pos:true, start:parseInt(RVS.SLIDER.settings.scrolltimeline.fixedStart)/10, end:parseInt(RVS.SLIDER.settings.scrolltimeline.fixedEnd)/10});\r\n\t\t});\r\n\r\n\t\t//SHORTLINK TO SLIDE ANIM\r\n\t\tRVS.DOC.on('click','#the_slide_timeline' , function() {\r\n\t\t\tRVS.F.selectLayers({overwrite:true});\r\n\t\t\tjQuery('.slide_submodule_trigger.selected').removeClass(\"selected\");\r\n\t\t\tRVS.F.mainMode({mode:\"slidelayout\", forms:[\"*slidelayout**mode__slidestyle*#form_slide_transition\"], set:true, uncollapse:true,slide:RVS.S.slideId});\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\r\n\r\n\t\t// SPEED MANIPULATION\r\n\t\tRVS.DOC.on('click','#tl_multiplicator',function() {\r\n\t\t\tRVS.ENV.tlMultipWrap.toggleClass(\"selected\");\r\n\t\t\tif (RVS.ENV.tlMultipWrap.hasClass(\"selected\")) {\r\n\t\t\t\tRVS.ENV.tlMagnifWrap.removeClass(\"selected\");\r\n\t\t\t\tRVS.ENV.tlGridWrap.removeClass(\"selected\");\r\n\t\t\t\tRVS.F.clearSnapVisual();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#tl_framemagnet',function() {\r\n\t\t\tRVS.ENV.tlMagnifWrap.toggleClass(\"selected\");\r\n\t\t\tif (RVS.ENV.tlMagnifWrap.hasClass(\"selected\")) {\r\n\t\t\t\tRVS.ENV.tlMultipWrap.removeClass(\"selected\");\r\n\t\t\t\tRVS.ENV.tlGridWrap.removeClass(\"selected\");\r\n\t\t\t\tRVS.F.clearSnapVisual();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#tl_gridmanagement',function() {\r\n\t\t\tRVS.F.updateEasyInputs({container:RVS.ENV.tlGridWrap,visualUpdate:true});\r\n\t\t\tRVS.ENV.tlGridWrap.toggleClass(\"selected\");\r\n\t\t\tif (RVS.ENV.tlGridWrap.hasClass(\"selected\")) {\r\n\t\t\t\tRVS.F.snapVisual();\r\n\t\t\t\tRVS.ENV.tlMagnifWrap.removeClass(\"selected\");\r\n\t\t\t\tRVS.ENV.tlMultipWrap.removeClass(\"selected\");\r\n\t\t\t} else {\r\n\t\t\t\tRVS.F.clearSnapVisual();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.closeme_tl_miniwrapper',function() {\r\n\t\t\tRVS.ENV.tlGridWrap.removeClass(\"selected\");\r\n\t\t\tRVS.ENV.tlMagnifWrap.removeClass(\"selected\");\r\n\t\t\tRVS.ENV.tlMultipWrap.removeClass(\"selected\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('magnetframes',function(e,param) {\r\n\t\t\tif (param!==undefined && param.val!==undefined) frameMagnify = param.val;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#gsf_ok',function() {\r\n\t\t\tvar ns = parseInt(document.getElementById('general_speed_factor').value,0);\r\n\t\t\tif (RVS.F.isNumeric(ns) && ns!==100) {\r\n\t\t\t\tns = ns / 100;\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"frame\",txt:\"General Timings\",icon:\"access_time\"});\r\n\t\t\t\tfor (var li in RVS.L) if (RVS.L.hasOwnProperty(li)) {\r\n\t\t\t\t\tif (RVS.L[li].timeline!==undefined)\r\n\t\t\t\t\t\tfor (var fi in RVS.L[li].timeline.frames) {\r\n\t\t\t\t\t\t\tif(!RVS.L[li].timeline.frames.hasOwnProperty(fi)) continue;\r\n\t\t\t\t\t\t\tlet frame = RVS.L[li].timeline.frames[fi];\r\n\t\t\t\t\t\t\tif (RVS.F.isNumeric(parseInt(frame.timeline.start,0))) RVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+li+\".timeline.frames.\"+fi+\".timeline.start\",val:Math.round(parseInt(frame.timeline.start,0) * ns)});\r\n\t\t\t\t\t\t\tif (RVS.F.isNumeric(parseInt(frame.timeline.speed,0))) RVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+li+\".timeline.frames.\"+fi+\".timeline.speed\",val:Math.round(parseInt(frame.timeline.speed,0) * ns)});\r\n\t\t\t\t\t\t\tif (frame.words.use && RVS.F.isNumeric(parseInt(frame.words.delay,0))) RVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+li+\".timeline.frames.\"+fi+\".words.delay\",val:Math.round(parseInt(frame.words.delay,0) * ns)});\r\n\t\t\t\t\t\t\tif (frame.chars.use && RVS.F.isNumeric(parseInt(frame.chars.delay,0))) RVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+li+\".timeline.frames.\"+fi+\".chars.delay\",val:Math.round(parseInt(frame.chars.delay,0) * ns)});\r\n\t\t\t\t\t\t\tif (frame.lines.use && RVS.F.isNumeric(parseInt(frame.lines.delay,0))) RVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+li+\".timeline.frames.\"+fi+\".lines.delay\",val:Math.round(parseInt(frame.lines.delay,0) * ns)});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// UPDATE END TIME\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".slide.timeline.delay\",val:(Math.round(RVS.F.getSlideLength() * ns)) * 10});\r\n\t\t\t\tif (RVS.F.isNumeric(RVS.SLIDER[RVS.S.slideId].slide.slideChange.speed)) RVS.F.updateSliderObj({path:RVS.S.slideId+\".slide.slideChange.speed\",val:(Math.round(RVS.SLIDER[RVS.S.slideId].slide.slideChange.speed * ns))});\r\n\t\t\t\tRVS.F.updateAllLayerFrames();\r\n\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\tRVS.F.updateSlideFrames();\r\n\t\t\t\t});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"frame\"});\r\n\t\t\t\tRVS.DOC.trigger('updateMaxTime');\r\n\t\t\t}\r\n\t\t\tdocument.getElementById('general_speed_factor').value = \"100%\";\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateMaxTime',function(e,ep) {\r\n\t\t\tRVS.F.updateMaxTime({pos:true, cont:true});\r\n\t\t\tfor (var slideindex in RVS.SLIDER.slideIDs) {\r\n\t\t\t\tvar slide = RVS.SLIDER.slideIDs[slideindex];\r\n\t\t\t\tif (slide===undefined || (\"\"+slide).indexOf('static')>=0) continue;\r\n\t\t\t\t\tslideMaxTime = RVS.F.getSlideLength(slide);\r\n\t\t\t\t\tvar _ = RVS.F.getSlideLayersEndWithSlide(slide);\r\n\t\t\t\tfor (var li in _) {\r\n\t\t\t\t\tif(!_.hasOwnProperty(li)) continue;\r\n\t\t\t\t\tif (_[li].endWithSlide) {\r\n\t\t\t\t\t\tRVS.SLIDER[slide].layers[li].timeline.frames.frame_999.timeline.start = slideMaxTime*10;\r\n\t\t\t\t\t\tif (\"\"+slide==\"\"+RVS.S.slideId) RVS.F.updateLayerFrame({layerid:li, frame:\"frame_999\",maxtime:slideMaxTime});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('windowresized',function() {\r\n\r\n\t\t\t// bounce if window is resized when editor is first loading\r\n\t\t\tif(!RVS.TL.hasOwnProperty('cache')) return;\r\n\r\n\t\t\t/* var currentstate = 0; */\r\n\t\t\tRVS.TL.timelineStartedFromPlayStop = false;\r\n\t\t\tRVS.TL.cache.main = 0;\r\n\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"GoToIdle\"});\r\n\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"GoToIdle\"});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateSlideTransitionTimeLine',function() {\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\tRVS.F.updateSlideFrames();\r\n\t\t\t\tRVS.F.redrawSlideBG();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('playTimeLine',function() {\r\n\r\n\t\t\tRVS.F.changeSwitchState({el:document.getElementById(\"timline_process\"),state:\"stop\"});\r\n\t\t\tRVS.TL.timelineStartedFromPlayStop=true;\r\n\t\t\tRVS.F.buildMainTimeLine();\r\n\t\t\tvar currentstate = (RVS.TL[RVS.S.slideId] && RVS.TL[RVS.S.slideId].main) ? RVS.TL[RVS.S.slideId].main.time() : 0;\r\n\t\t\tRVS.F.updateTimeLine({force:true, state:\"time\",time:currentstate, timeline:\"main\", forceFullLayerRender:true, updateCurTime:true});\r\n\t\t\tRVS.F.updateTimeLine({state:\"play\",timeline:\"main\", force:false});\r\n\t\t});\r\n\t\tRVS.DOC.on('stopTimeLine',function() {\r\n\r\n\t\t\t/* var currentstate = 0; */\r\n\t\t\tRVS.TL.cache.main = 0;\r\n\t\t\tRVS.TL.timelineStartedFromPlayStop = false;\r\n\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"GoToIdle\"});\r\n\t\t\tRVS.F.buildMainTimeLine();\r\n\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"GoToIdle\"});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('previewLayerAnimation',function() {\r\n\t\t\tRVS.S.shwLayerAnim = true;\r\n\t\t\tRVS.F.changeSwitchState({el:document.getElementById(\"layer_simulator\"),state:\"stop\"});\r\n\t\t\tRVS.F.changeSwitchState({el:document.getElementById(\"layer_simulator_loop\"),state:\"stop\"});\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tRVS.F.renderLayerAnimation({layerid:RVS.selLayers[lid]});\r\n\t\t\t\tRVS.F.playLayerAnimation({layerid:RVS.selLayers[lid]});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('previewStopLayerAnimation',function() {\r\n\t\t\tRVS.S.shwLayerAnim = false;\r\n\t\t\tRVS.F.changeSwitchState({el:document.getElementById(\"layer_simulator\"),state:\"play\"});\r\n\t\t\tRVS.F.changeSwitchState({el:document.getElementById(\"layer_simulator_loop\"),state:\"play\"});\r\n\t\t\tRVS.F.stopAllLayerAnimation();\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('click','#copy_keyframe',function() {\r\n\t\t\tif (RVS.selLayers.length==1 && RVS.S.keyFrame!==undefined) {\r\n\t\t\t\tkeyframecache = RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame]);\r\n\t\t\t\tjQuery('#paste_keyframe').show();\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#paste_keyframe',function() {\r\n\t\t\tif (RVS.selLayers.length==1 && RVS.S.keyFrame!==undefined) {\r\n\t\t\t\tvar fr = RVS.F.getPrevNextFrame({layerid:RVS.selLayers[0], frame:RVS.S.keyFrame});\r\n\t\t\t\tif (fr.next.start>=fr.cur.end+keyframecache.timeline.frameLength) {\r\n\t\t\t\t\tvar cur = RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame];\r\n\t\t\t\t\tkeyframecache.timeline.actionTriggered = cur.timeline.actionTriggered;\r\n\t\t\t\t\tkeyframecache.timeline.start = cur.timeline.start;\r\n\t\t\t\t\tkeyframecache.timeline.startRelative = cur.timeline.startRelative;\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+RVS.selLayers[0]+\".timeline.frames.\"+RVS.S.keyFrame,val:keyframecache});\r\n\t\t\t\t\tRVS.DOC.trigger('updateKeyFramesList');\r\n\t\t\t\t\tRVS.F.updateAllLayerFrames();\r\n\t\t\t\t\tRVS.F.updateLayerInputFields();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.F.showInfo({content:RVS_LANG.framesizecannotbeextended, type:\"warning\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t}\r\n\r\n\t/*\r\n\tGet Layer Before FRAME_999 Wiht Biggest End Point\r\n\t*/\r\n\tfunction beforeLastEnd() {\r\n\t\tvar ret = 0;\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (li!==\"top\" && li!==\"bottom\" && li!==\"middle\") {\r\n\t\t\t\tvar pn = RVS.F.getPrevNextFrame({layerid:li, frame:\"frame_999\"});\r\n\t\t\t\tret = ret <  pn.prev.end ? pn.prev.end : ret;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\r\n\r\n\tfunction buildRuler() {\r\n\r\n\t\tvar ctx = tlrcanvas[0].getContext('2d'),\r\n\t\t\ta=0;\r\n\r\n\t\tRVS.S.isRetina = RVS.S.isRetina===undefined ? (window.devicePixelRatio > 1) : RVS.S.isRetina;\r\n\t\tRVS.S.isIOS = RVS.S.isIOS===undefined ? ((ctx.webkitBackingStorePixelRatio < 2) || (ctx.webkitBackingStorePixelRatio == undefined)) : RVS.S.isIOS;\r\n\t\tRVS.S.retinaFactor =  RVS.S.retinaFactor===undefined ? (RVS.S.isRetina && RVS.S.isIOS) ? 2 : 1 : RVS.S.retinaFactor;\r\n\r\n\t\tctx.canvas.width=16380*RVS.S.retinaFactor;\r\n\t\tctx.canvas.height=35*RVS.S.retinaFactor;\r\n\r\n\t\tRVS.S.retinaFactor=parseInt(RVS.S.retinaFactor);\r\n\t\tctx.scale(RVS.S.retinaFactor, RVS.S.retinaFactor);\r\n\r\n\t\tctx.strokeStyle=\"#414244\";\r\n\t\tctx.font = \"12px Arial\";\r\n\t\tctx.fillStyle = \"rgba(183,187,192,0.5)\";\r\n\t\tctx.beginPath();\r\n\r\n\t\tfor(var i=0;i<1640;i++) {\r\n\t\t\tif (a%20===0){\r\n\t\t\t\tctx.moveTo((i*10)+1,28);\r\n\t\t\t\tctx.lineTo((i*10)+1,14);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tif (a%10===0){\r\n\t\t\t\tctx.moveTo((i*10)+1,28);\r\n\t\t\t\tctx.lineTo((i*10)+1,14);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tctx.moveTo((i*10)+1,28);\r\n\t\t\t\tctx.lineTo((i*10)+1,24);\r\n\t\t\t}\r\n\r\n\t\t\ta++;\r\n\t\t\ta = a==20 ? 0 : a;\r\n\t\t}\r\n\t\tctx.stroke();\r\n\r\n\t\tfor(var i=0;i<164;i++) {\r\n\t\t\tif (a%2===0) ctx.fillText((i)+\"s\",(i*100)+5,20);\r\n\t\t\telse\r\n\t\t\tctx.fillText((i)+\"s\",(i*100)+5,20);\r\n\t\t\ta++;\r\n\t\t\ta = a==2 ? 0 : a;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction pxToSec(d,e) {\r\n\t\td = d<0 ? 0 : d;\r\n\t\tvar min = Math.floor(d/6000),\r\n\t\t\tsec = Math.floor(Math.ceil(d - (min*6000))/100),\r\n\t\t\tms = Math.round(d-(sec*100)-(min*6000));\r\n\r\n\t\tif (min==0) min = \"00\";\r\n\t\telse\r\n\t\tif (min<10) min = \"0\"+min.toString();\r\n\r\n\t\tif (sec==0) sec = \"00\";\r\n\t\telse\r\n\t\tif (sec<10) sec = \"0\"+sec.toString();\r\n\r\n\t\tif (ms==0) ms = \"00\";\r\n\t\telse\r\n\t\tif (ms<10) ms = \"0\"+ms.toString();\r\n\r\n\t\te.ctm.textContent = min.toString();\r\n\t\te.cts.textContent = sec.toString();\r\n\t\te.ctms.textContent = ms.toString();\r\n\r\n\t}\r\n\r\n\t//////////////////////////////\r\n\t//\tSWAP SLIDE PROGRESS\t\t//\r\n\t//////////////////////////////\r\n\r\n\r\n\r\n})();\r\n","Nwdthemes_Revslider/admin/assets/js/modules/help.js":"/*!\r\n * REVOLUTION 6.0.0 HELP JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n;jQuery(function() {\r\n\r\n\tif(typeof jQuery === 'undefined') {\r\n\r\n\t\tconsole.log('jQuery not available');\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\r\n\tvar html,\r\n\t\ticon,\r\n\t\ttitle,\r\n\t\tindex,\r\n\t\tlevel,\r\n\t\tbricks,\r\n\t\tbodies,\r\n\t\thelper,\r\n\t\ttimerIn,\r\n\t\ttrigger,\r\n\t\tcssModal,\r\n\t\taddLayer,\r\n\t\ttimerOut,\r\n\t\thelpOver,\r\n\t\thelpPath,\r\n\t\tsearchBtn,\r\n\t\tshowTimer,\r\n\t\tstillOver,\r\n\t\tinputOver,\r\n\t\ttitleWrap,\r\n\t\thelpVideo,\r\n\t\tmainTitle,\r\n\t\tvideoWrap,\r\n\t\tclickTimer,\r\n\t\tindexPaths,\r\n\t\thelpActive,\r\n\t\tlinkButton,\r\n\t\tactionMenu,\r\n\t\tfaqResults,\r\n\t\tvideoTimer,\r\n\t\thelpButtons,\r\n\t\tcloseModals,\r\n\t\tactionModal,\r\n\t\tresizeTimer,\r\n\t\thoverActive,\r\n\t\tdescription,\r\n\t\ticonHovered,\r\n\t\tscrollTimer,\r\n\t\toptionButton,\r\n\t\trightToolbar,\r\n\t\tmodalVisible,\r\n\t\tvideoPromise,\r\n\t\tvideoPlaying,\r\n\t\tsearchResults,\r\n\t\toptionResults,\r\n\t\thelpActivated,\r\n\t\thelpInputClear,\r\n\t\telementHovered,\r\n\t\thelpDescription,\r\n\t\thelpOptionsWrap,\r\n\t\thelpSearchInput,\r\n\t\twildcard = ':checked';\r\n\r\n\tvar layerClasses =  new RegExp('layerinput|actioninput'),\r\n\t\tsliderClasses = new RegExp('sliderinput|navstyleinput'),\r\n\t\tslideClasses =  new RegExp('slideinput|added_slide_transition'),\r\n\t\thoverClasses = '*[data-r], *[data-select], *[data-helpkey], .ddTP, .revbuilder-colorpicker, .tponoffwrap, .fake_on_button, .added_slide_transition, .lal_group_member',\r\n\t\ttranslateClasses = '.frame_list_title, .intelligent_buttons';\r\n\r\n\r\n\t// help icon activate/deactive\r\n\ttrigger = jQuery('.help_wrap').on('click', function(e) {\r\n\r\n\t\te.stopImmediatePropagation();\r\n\t\t// verify globals\r\n\t\tif(typeof RVS.ENV.plugin_url === 'undefined' || typeof RVS === 'undefined' || typeof tpGS === 'undefined') return;\r\n\r\n\r\n\t\tif(!helpActivated) loadData();\r\n\t\telse onOffHelp();\r\n\r\n\t}).on('mouseenter', function() {\r\n\r\n\t\ticonHovered = true;\r\n\t\tif(helpActive) {\r\n\r\n\t\t\tmodalVisible = true;\r\n\t\t\ttoolBarOut();\r\n\r\n\t\t}\r\n\r\n\t}).on('mouseleave', function() {\r\n\r\n\t\ticonHovered = false;\r\n\r\n\t}).trigger('click');\r\n\r\n\t// load main definitions\r\n\tfunction loadData() {\r\n\r\n\t\tjQuery('head').append('<link rel=\"stylesheet\" type=\"text/css\" href=\"' + RVS.ENV.plugin_url + 'admin/assets/css/help.css\" />');\r\n\t\tRVS.F.ajaxRequest('get_help_directory', {}, function(response) {\r\n\r\n\t\t\tvar data;\r\n\t\t\tif(response.success) {\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdata = JSON.stringify(response.data);\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e) {\r\n\t\t\t\t\tdata = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(data) {\r\n\r\n\t\t\t\t\tbricks = data.translations;\r\n\t\t\t\t\tindex = data.helpindex;\r\n\t\t\t\t\thelpActivated = true;\r\n\t\t\t\t\tinit();\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.log('help directory error');\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.log('help directory error');\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t// trigger resize after directory is opened and closed just in case\r\n\tfunction onResizeTimer() {\r\n\r\n\t\tRVS.WIN.trigger('resize');\r\n\r\n\t}\r\n\r\n\t// enable/disable help mode\r\n\tfunction onOffHelp() {\r\n\r\n\t\tclearTimeout(videoTimer);\r\n\r\n\t\tif(!helpActive) {\r\n\r\n\t\t\thelpActive = true;\r\n\t\t\thelpInputClear.trigger('click');\r\n\t\t\ttpGS.gsap.set(helper, {top: 50, left: 'auto', right: '100%', bottom: 'auto', height: 'auto'});\r\n\r\n\t\t\t/*\r\n\t\t\t\tMODAL\r\n\t\t\t*/\r\n\t\t\tlinkButton.hide();\r\n\t\t\toptionButton.hide();\r\n\t\t\thelpDescription.hide();\r\n\t\t\ttitle.removeClass(removeIconClasses).addClass('help-icon-default').html(title.data('origtext'));\r\n\t\t\tbodies.addClass('help-mode-activated help-mode-active').on('mouseenter.helpguide', hoverClasses, onInputOver)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   .on('mouseenter.helpguide', translateClasses, onSpecialOver)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   .on('mouseleave.helpguide', hoverClasses + ',' + translateClasses, onInputOut)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   .on('mouseover.helpguide', '.toolbar_selector_icons', toolBarOver).on('mouseout.helpguide', '.toolbar_selector_icons', toolBarOut);\r\n\r\n\r\n\t\t\t/*\r\n\t\t\t\tDIRECTORY\r\n\t\t\t*/\r\n\t\t\tbodies.on('click.helpguide', '.help-button', openItem).on('mouseenter.helpguide', '.help-hover', removeHoverClass);\r\n\t\t\tshowTimer = setTimeout(hideBubble, 3000);\r\n\t\t\tRVS.WIN.on('resize.helpguide', updateContainer);\r\n\t\t\tupdateContainer();\r\n\t\t\tshowHideVideo(true);\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tclearTimeout(scrollTimer);\r\n\t\t\tclearTimeout(showTimer);\r\n\t\t\tclearTimeout(timerOut);\r\n\t\t\tclearTimeout(timerIn);\r\n\r\n\t\t\thelpActive = false;\r\n\t\t\tmodalVisible = false;\r\n\t\t\telementHovered = false;\r\n\r\n\t\t\tRVS.WIN.off('.helpguide');\r\n\t\t\tbodies.off('.helpguide').removeClass('help-mode-activated help-mode-active');\r\n\r\n\t\t\tjQuery('.help-input-focus').removeClass('help-input-focus');\r\n\t\t\tvideoTimer = setTimeout(showHideVideo, 500);\r\n\r\n\t\t}\r\n\r\n\t\tclearTimeout(resizeTimer);\r\n\t\tresizeTimer = setTimeout(onResizeTimer, 100);\r\n\r\n\t}\r\n\r\n\tfunction showHideVideo(show) {\r\n\r\n\t\tif(!helpVideo || !helpVideo.length) return;\r\n\r\n\t\tif(show) {\r\n\r\n\t\t\tmainTitle.text(bricks.instructions);\r\n\t\t\tvideoWrap.show();\r\n\r\n\t\t\thelpVideo[0].currentTime = 0;\r\n\t\t\tvideoPromise = helpVideo[0].play();\r\n\t\t\tvideoPromise.then(function() {videoPlaying = true;}).catch(function(error) {videoPlaying = false;});\r\n\t\t\thelpVideo.show();\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tmainTitle.text(bricks.selectresult);\r\n\t\t\tvideoWrap.hide();\r\n\r\n\t\t\tif(videoPlaying) helpVideo[0].pause();\r\n\t\t\thelpVideo.hide();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// hide help bubble when adjacent toolbar icons are hovered\r\n\tfunction toolBarOver() {\r\n\r\n\t\tmodalVisible = bodies.hasClass('help-mode-active');\r\n\t\tif(modalVisible) {\r\n\r\n\t\t\tclearTimeout(timerOut);\r\n\t\t\tbodies.removeClass('help-mode-active');\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// reshow help bubble after adjacent toolbar icons are moused out\r\n\tfunction toolBarOut() {\r\n\r\n\t\tif(modalVisible) {\r\n\r\n\t\t\tbodies.addClass('help-mode-active');\r\n\t\t\tclearTimeout(timerOut);\r\n\t\t\thideHelpModal();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// add/build directory\r\n\tfunction traverseIndex(obj, clas) {\r\n\r\n\t\tvar keys = Object.keys(obj),\r\n\t\t\tlen = keys.length,\r\n\t\t\ttotal = len - 1;\r\n\r\n\t\thtml += '<ul' + clas + '>';\r\n\t\tfor(var i = 0; i < len; i++) {\r\n\r\n\t\t\tvar key = keys[i],\r\n\t\t\t\tdata = obj[key],\r\n\t\t\t\tisObject = HelpGuide.verifyObject(data) || key === 'addons';\r\n\r\n\t\t\tif(isObject) {\r\n\r\n\t\t\t\tvar path = isObject && data.helpPath;\r\n\t\t\t\tif(!path) {\r\n\r\n\t\t\t\t\tswitch(key) {\r\n\r\n\t\t\t\t\t\tcase 'general_how_to':\r\n\t\t\t\t\t\t\ticon = 'help_outline';\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'slider_settings':\r\n\t\t\t\t\t\t\ticon = 'settings';\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'navigation_settings':\r\n\t\t\t\t\t\t\ticon = 'gamepad';\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'slide_settings':\r\n\t\t\t\t\t\t\ticon = 'burst_mode';\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'layer_settings':\r\n\t\t\t\t\t\t\ticon = 'layers';\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar titl = toUpper(key);\r\n\t\t\t\t\thtml += '<li class=\"help-directory-menu\" data-path=\"' + key + '\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"help-directory-item\">' +\r\n\t\t\t\t\t\t\t\t\t'<i class=\"material-icons help-arrow-down\">folder</i><i class=\"material-icons help-arrow-up\">folder_open</i><span>' + titl + '</span>' +\r\n\t\t\t\t\t\t\t\t'</div>';\r\n\t\t\t\t\tlevel++;\r\n\t\t\t\t\ttraverseIndex(data, '');\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tvar ends = '',\r\n\t\t\t\t\t\tarticle = '',\r\n\t\t\t\t\t\tsection = '',\r\n\t\t\t\t\t\thighlight = '',\r\n\t\t\t\t\t\tdescription = '',\r\n\t\t\t\t\t\tarrow = '<i class=\"material-icons\">keyboard_arrow_right</i>',\r\n\t\t\t\t\t\tlinkText = path !== true ? bricks.docs : bricks.tutorial;\r\n\r\n\t\t\t\t\tif(data.description) description = '<span class=\"help-text\">' + data.description + '</span>';\r\n\t\t\t\t\tif(data.article) article = '<span class=\"basic_action_button longbutton help-article\" data-article=\"' + data.article + '\"><i class=\"material-icons\">assignment</i>' + linkText + '</span>';\r\n\t\t\t\t\tif(data.section) {\r\n\r\n\t\t\t\t\t\tif(!Array.isArray(data.section)) {\r\n\r\n\t\t\t\t\t\t\tsection = '<span class=\"help-section\">' + data.section.replace(/\\-\\>/g, arrow) + '</span>';\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t\tsection = '';\r\n\t\t\t\t\t\t\tvar leg = data.section.length;\r\n\t\t\t\t\t\t\tfor(var s = 0; s < leg; s++) {\r\n\r\n\t\t\t\t\t\t\t\tsection += '<span class=\"help-section\">' + data.section[s].replace(/\\-\\>/g, arrow) + '</span>';\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(data.highlight && HelpGuide.verifyObject(data.highlight)) {\r\n\r\n\t\t\t\t\t\tvar menus = '',\r\n\t\t\t\t\t\t\tmodal = '',\r\n\t\t\t\t\t\t\tfocussed = '',\r\n\t\t\t\t\t\t\tscrollable = '',\r\n\t\t\t\t\t\t\tids = !data.dependency_id ? '' : ' id=\"revhelp_' + data.dependency_id + '\"';\r\n\r\n\t\t\t\t\t\thighlight = data.highlight;\r\n\r\n\t\t\t\t\t\tif(highlight.menu) menus = ' data-menu=\"' + highlight.menu + '\"';\r\n\t\t\t\t\t\tif(highlight.modal) modal = ' data-modal=\"' + highlight.modal + '\"';\r\n\t\t\t\t\t\tif(highlight.focus) focussed = ' data-focus=\"' + highlight.focus + '\"';\r\n\t\t\t\t\t\tif(highlight.scrollTo) scrollable = ' data-scrollto=\"' + highlight.scrollTo + '\"';\r\n\t\t\t\t\t\tif(highlight.dependencies && Array.isArray(highlight.dependencies)) scrollable += \" data-dependencies='\" + JSON.stringify(highlight.dependencies) + \"'\";\r\n\r\n\t\t\t\t\t\thighlight = '<span' + ids + ' class=\"basic_action_button longbutton help-option\"' + menus + scrollable + focussed + modal + '>' +\r\n\t\t\t\t\t\t\t\t\t\t'<i class=\"material-icons\">settings</i>' + bricks.option + '</span>';\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(i === total) {\r\n\r\n\t\t\t\t\t\tfor(var j = 0; j < level; j++) ends += '</li>';\r\n\t\t\t\t\t\tlevel = 0;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thtml += '<li class=\"help-directory-menu help-directory-target\" data-path=\"' + key + '\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"help-directory-item\">' +\r\n\t\t\t\t\t\t\t\t\t'<i class=\"material-icons\">' + icon + '</i>' + data.title +\r\n\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t\t'<ul>' +\r\n\t\t\t\t\t\t\t\t\t'<li>' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"help-description\">' + section + description + article + highlight + '</div>' +\r\n\t\t\t\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t\t\t\t'</ul>' +\r\n\t\t\t\t\t\t\t'</li>' + ends;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += '</ul>';\r\n\r\n\t}\r\n\r\n\t// addon activated/deactivated\r\n\tHelpGuide.toggleHelpAddOn = function(slug, activate) {\r\n\r\n\t\tvar method = activate ? 'removeClass' : 'addClass';\r\n\t\tHelpGuide.allHelpPaths.find('.help-directory-menu[data-path=\"' + slug + '\"]')[method]('help-hide-addon');\r\n\r\n\t\tupdateAddOnFolders();\r\n\t\thelpInputClear.trigger('click');\r\n\r\n\t};\r\n\r\n\t// hide addons folder if no addons exist\r\n\tfunction filterAddons() {\r\n\r\n\t\tvar $this = jQuery(this);\r\n\t\tif(!$this.html()) {\r\n\r\n\t\t\t$this.remove();\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn $this.children('li').not('.help-hide-addon').length;\r\n\r\n\t}\r\n\r\n\t// only show addon directory folder if it contains an AddOn\r\n\tfunction updateAddOnFolders() {\r\n\r\n\t\tjQuery('.help-directory-menu[data-path=\"addons\"]').each(function() {\r\n\r\n\t\t\tvar $this = jQuery(this),\r\n\t\t\t\tuls = $this.children('ul').filter(filterAddons);\r\n\r\n\t\t\tif(uls.length) $this.show();\r\n\t\t\telse $this.hide();\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t// disable help for addons that aren't active\r\n\tfunction checkAddOns() {\r\n\r\n\t\tvar obj,\r\n\t\t\tprop,\r\n\t\t\taddon,\r\n\t\t\tbranch;\r\n\r\n\t\tfor(var i = 0; i < 3; i++) {\r\n\r\n\t\t\tbranch = i === 0 ? 'slider' : i === 1 ? 'slide' : 'layer';\r\n\t\t\tobj = index.editor_settings[branch + '_settings'].addons;\r\n\r\n\t\t\tfor(prop in obj) {\r\n\r\n\t\t\t\tif(!obj.hasOwnProperty(prop)) continue;\r\n\t\t\t\tprop = prop.replace('_addon', '');\r\n\r\n\t\t\t\taddon = 'revslider-' + prop + '-addon';\r\n\t\t\t\tif(!RVS.SLIDER.settings.addOns.hasOwnProperty(addon) || !RVS.SLIDER.settings.addOns[addon].enable) {\r\n\r\n\t\t\t\t\tHelpGuide.deactivate(prop + '_addon');\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// add AddOn help data to directory\r\n\tHelpGuide.extendHelpAddOns = function(addons, writeMarkup) {\r\n\r\n\t\tvar len = addons.length;\r\n\t\tfor(var i = 0; i < len; i++) {\r\n\r\n\t\t\tvar obj = addons[i];\r\n\t\t\tif(!HelpGuide.verifyObject(obj)) continue;\r\n\r\n\t\t\tvar slug = obj.slug,\r\n\t\t\t\tsettings,\r\n\t\t\t\toptions,\r\n\t\t\t\ttpe;\r\n\r\n\t\t\tfor(var j = 0; j < 3; j++) {\r\n\r\n\t\t\t\ttpe = j === 0 ? 'slider' : j === 1 ? 'slide' : 'layer';\r\n\t\t\t\tsettings = obj[tpe];\r\n\t\t\t\tif(!HelpGuide.verifyObject(settings)) continue;\r\n\r\n\t\t\t\toptions = {};\r\n\t\t\t\toptions[slug] = settings;\r\n\r\n\t\t\t\tif(writeMarkup) {\r\n\r\n\t\t\t\t\thtml = '';\r\n\t\t\t\t\ticon = 'extension';\r\n\r\n\t\t\t\t\ttraverseIndex(options, '');\r\n\t\t\t\t\tjQuery('.help-directory-menu[data-path=\"' + tpe + '_settings\"]').find('.help-directory-menu[data-path=\"addons\"]').append(html);\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tRVS.F.safeExtend(true, index.editor_settings[tpe + '_settings'].addons, options);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// create directory\r\n\tfunction buildHelpTree() {\r\n\r\n\t\t// extend any AddOns\r\n\t\tif(HelpGuide.addOnsHelp.length) HelpGuide.extendHelpAddOns(HelpGuide.addOnsHelp);\r\n\r\n\t\thtml = '';\r\n\t\tlevel = 0;\r\n\t\ttraverseIndex(index, ' class=\"help-directory-top\"');\r\n\t\tHelpGuide.allHelpPaths = jQuery(html);\r\n\t\tupdateAddOnFolders();\r\n\r\n\t}\r\n\r\n\t// store all paths in an Array for search buttons usage\r\n\tfunction writePaths() {\r\n\r\n\t\tindexPaths = [];\r\n\t\tHelpGuide.allHelpPaths.find('.help-directory-target').each(function(i) {\r\n\r\n\t\t\tvar st = '',\r\n\t\t\t\tar = jQuery(this).parents('.help-directory-menu').not('.help-hide-addon').toArray().reverse(),\r\n\t\t\t\tlen = ar.length;\r\n\r\n\t\t\tfor(var j = 0; j < len; j++) st += ar[j].dataset.path + '.';\r\n\t\t\tindexPaths[indexPaths.length] = st + this.dataset.path;\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t// get definition from main definition object\r\n\tfunction getData(obj, path) {\r\n\r\n\t\tif(typeof path === 'string')\r\n\t\t\tpath = path.split('.');\r\n\r\n\t\tif(path.length > 1) {\r\n\r\n\t\t\tvar prop = path.shift();\r\n\t\t\treturn obj.hasOwnProperty(prop) ? getData(obj[prop], path) : false;\r\n\r\n\t\t}\r\n\r\n\t\treturn obj.hasOwnProperty(path[0]) ? obj[path[0]] : false;\r\n\r\n\t}\r\n\r\n\t// pretty directory titles\r\n\tfunction toUpper(st) {\r\n\r\n\t\treturn st.replace(/\\_/g, ' ').replace(/\\b\\w/g, function(l) {return l.toUpperCase();});\r\n\r\n\t}\r\n\r\n\t// handles special circumstances for input hovers\r\n\tfunction sanitizePath($this, path) {\r\n\r\n\t\t// parallax levels\r\n\t\tif(path.search('parallax.levels') !== -1) {\r\n\r\n\t\t\tpath = path.split('.');\r\n\t\t\tif(path.length === 3) return path[0] + '.' + path[1];\r\n\r\n\t\t}\r\n\r\n\t\t// slide params\r\n\t\tif(path.search('info.params') !== -1) {\r\n\r\n\t\t\tpath = path.split('.');\r\n\t\t\tif(path.length === 4) return path[0] + '.' + path[1] + '.' + path[3];\r\n\r\n\t\t}\r\n\r\n\t\t// slide transition\r\n\t\tif($this.hasClass('added_slide_transition')) return 'added_slide_transition';\r\n\r\n\t\t// common nav styles\r\n\t\tif(path.search(/nav\\.|bullets\\./) === -1) return path;\r\n\t\tif($this.closest('#sr_bullets_styles_fieldset, #sr_tabs_styles_fieldset').length) {\r\n\r\n\t\t\tif(path.search('def') === -1) return 'navigation.styles';\r\n\t\t\telse return 'navigation.styles.default';\r\n\r\n\t\t}\r\n\t\tif($this.closest('#sl_bullets_styles_fieldset, #sl_tabs_styles_fieldset').length) {\r\n\r\n\t\t\tif(path.search('def') === -1) return 'navigation.styles';\r\n\t\t\telse return 'navigation.styles.default';\r\n\r\n\t\t}\r\n\r\n\t\treturn path;\r\n\r\n\t}\r\n\r\n\t// find object path based on a certain value\r\n\tfunction getPath(obj, path, val) {\r\n\r\n\t\tif(helpPath) return;\r\n\t\tvar paths = obj.helpPath,\r\n\t\t\tlen;\r\n\r\n\t\tif(paths) {\r\n\r\n\t\t\tpaths = paths.split(',');\r\n\t\t\tlen = paths.length;\r\n\t\t\tfor(var i = 0; i < len; i++) {\r\n\r\n\t\t\t\tif(RVS.F.trim(paths[i]) === val) {\r\n\r\n\t\t\t\t\thelpPath = path;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(helpPath) return;\r\n\r\n\t\t}\r\n\r\n\t\tvar keys = Object.keys(obj);\r\n\t\tlen = keys.length;\r\n\r\n\t\tfor(var j = 0; j < len; j++) {\r\n\r\n\t\t\tif(HelpGuide.verifyObject(obj[keys[j]])) {\r\n\r\n\t\t\t\tgetPath(obj[keys[j]], path + '.' + keys[j], val);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// get main root from input element\r\n\tfunction realRoot($this, path) {\r\n\r\n\t\treturn $this.closest('.slider_general_collector').length ? 'slider' : 'nav';\r\n\r\n\t}\r\n\r\n\t// gets the revbuilder root path\r\n\tfunction getRoot($this, path) {\r\n\r\n\t\tvar clas = $this.attr('class');\r\n\t\tif(clas) {\r\n\r\n\t\t\t// first check\r\n\t\t\tif(clas.search(sliderClasses) !== -1) return realRoot($this, path);\r\n\t\t\tif(clas.search(slideClasses)  !== -1 || path.search('#slide#') !== -1) return 'slide';\r\n\t\t\tif(clas.search(layerClasses)  !== -1 || path.search('#layer#') !== -1) return 'layer';\r\n\r\n\t\t}\r\n\r\n\t\t// fallback check\r\n\t\tif($this.closest('#rbm_layer_action').length) return 'layer';\r\n\t\tif($this.closest('.mode__sliderlayout').length) return 'slider';\r\n\t\tif($this.closest('.mode__navlayout').length) return 'nav';\r\n\t\tif($this.closest('.mode__slidecontent').length) return 'layer';\r\n\t\tif($this.closest('.mode__slidelayout').length) return 'slide';\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\t// for cases when real submenu names don't match the help index object titles\r\n\tfunction translateSub(root, sub) {\r\n\r\n\t\tswitch(sub) {\r\n\r\n\t\t\tcase 'progress':\r\n\t\t\t\tif(root === 'navigation_settings') return 'progress_bar';\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'prev_image':\r\n\t\t\treturn 'preview_image';\r\n\r\n\t\t\tcase 'holiday_snow':\r\n\t\t\treturn 'snow';\r\n\r\n\t\t}\r\n\r\n\t\treturn sub;\r\n\r\n\t}\r\n\r\n\t// get correct path for addon action inputs\r\n\tfunction checkAddonActions(path) {\r\n\r\n\t\tif(path.search(/panorama|whiteboard|beforeafter/) !== -1) return 'addons';\r\n\t\treturn 'actions';\r\n\r\n\t}\r\n\r\n\t// get correct path for addon animation frame inputs\r\n\tfunction checkAddonFrames(path) {\r\n\r\n\t\tif(path.search('explode') !== -1) return 'addons';\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\t// get input element help data\r\n\tfunction readData($this, path, root) {\r\n\r\n\t\tif(!path) return false;\r\n\t\tif(!root) root = getRoot($this, path);\r\n\t\tif(!root) return false;\r\n\r\n\t\tvar subroot = path.indexOf('actions.') === -1 ? false : 'actions';\r\n\t\tif(subroot === 'actions') subroot = checkAddonActions(path);\r\n\t\tif(path.indexOf('#frame#.') === 0) subroot = checkAddonFrames(path);\r\n\r\n\t\tif(!subroot) {\r\n\r\n\t\t\tsubroot = root !== 'slider' ? root : 'general';\r\n\t\t\tsubroot += '_submodule_trigger';\r\n\t\t\tsubroot = jQuery('.' + subroot + '.selected').attr('id');\r\n\r\n\t\t}\r\n\r\n\t\tif(subroot) {\r\n\r\n\t\t\tif(root === 'nav') root = 'navigation';\r\n\t\t\troot += '_settings';\r\n\r\n\t\t\tsubroot = RVS.F.trim(subroot).toLowerCase().replace('.', '').replace('&', 'and').replace(/\\-/g, '_').replace(/\\s/g, '_');\r\n\t\t\tsubroot = translateSub(root, subroot);\r\n\r\n\t\t\tvar isIndexed = index.editor_settings[root] && index.editor_settings[root][subroot];\r\n\t\t\tif(!isIndexed) {\r\n\r\n\t\t\t\tsubroot = 'addons';\r\n\t\t\t\tisIndexed = index.editor_settings[root] && index.editor_settings[root][subroot];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(isIndexed) {\r\n\t\t\t\thelpPath = '';\r\n\t\t\t\tgetPath(index.editor_settings[root][subroot], '', path);\r\n\t\t\t\tif(helpPath) return ['editor_settings.' + root + '.' + subroot + helpPath, index.editor_settings[root][subroot], helpPath];\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Extenstion for Freaky Paths in Addons\r\n\t\t\t\t\tif (path.indexOf('addOns.tpack')>=0) {\r\n\t\t\t\t\t\tvar v = path.split('.');\r\n\t\t\t\t\t\tv = v[v.length-1];\r\n\t\t\t\t\t\treturn ['editor_settings.slide_settings.addons.transitionpack.'+v, index.editor_settings.slide_settings.addons.transitionpack,'.'+v]; \r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\t\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\t// search button\r\n\tfunction createButton(titl, path, tpe) {\r\n\r\n\t\tvar st = '<span class=\"help-button',\r\n\t\t\ticon = '';\r\n\r\n\t\tif(tpe) st += ' help-button-' + tpe;\r\n\t\tst += '\" data-path=\"' + path + '\">';\r\n\r\n\t\tswitch(tpe) {\r\n\r\n\t\t\tcase 'slider':\r\n\t\t\t\ticon = '<i class=\" material-icons\">settings</i>';\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'nav':\r\n\t\t\t\ticon = '<i class=\" material-icons\">gamepad</i>';\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'slide':\r\n\t\t\t\ticon = '<i class=\" material-icons\">burst_mode</i>';\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'layer':\r\n\t\t\t\ticon = '<i class=\" material-icons\">layers</i>';\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'doc':\r\n\t\t\t\ticon = '<i class=\" material-icons\">library_books</i>';\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\ticon = '<i class=\" material-icons\">help_outline</i>';\r\n\t\t\t// end default\r\n\r\n\t\t}\r\n\r\n\t\tst += icon + '<span>' + titl + '</span></span>';\r\n\t\treturn st;\r\n\r\n\t}\r\n\r\n\t// search button click\r\n\tfunction openItem() {\r\n\r\n\t\tvar path = this.dataset.path;\r\n\t\tdisplayHelpModal(getData(index, path), path);\r\n\r\n\t}\r\n\r\n\t// build search buttons\r\n\tfunction buildButtons(val, popup) {\r\n\r\n\t\tval = RVS.F.trim(val);\r\n\r\n\t\tvar tutorials = '',\r\n\t\t\tslider = '',\r\n\t\t\tslide = '',\r\n\t\t\tlayr = '',\r\n\t\t\tnav = '';\r\n\r\n\t\tvar len = indexPaths.length,\r\n\t\t\titems = [],\r\n\t\t\tkeywords,\r\n\t\t\tpaths,\r\n\t\t\tdata,\r\n\t\t\ttitl,\r\n\t\t\tleg,\r\n\t\t\ts;\r\n\r\n\t\tfor(var i = 0, j; i < len; i++) {\r\n\r\n\t\t\tdata = getData(index, indexPaths[i]);\r\n\t\t\tkeywords = data.keywords;\r\n\r\n\t\t\tif(!keywords) continue;\r\n\t\t\tleg = keywords.length;\r\n\r\n\t\t\tfor(j = 0; j < leg; j++) {\r\n\r\n\t\t\t\t// account for invalid expressions typed into the search box\r\n\t\t\t\ttry {\r\n\t\t\t\t\ts = keywords[j].search(val);\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(s === -1 || items.indexOf(indexPaths[i]) !== -1) continue;\r\n\t\t\t\titems[items.length] = indexPaths[i];\r\n\r\n\t\t\t\ttitl = data.buttonTitle || data.title;\r\n\t\t\t\tpaths = indexPaths[i].split('.');\r\n\r\n\t\t\t\tif(paths[0] === 'general_how_to') {\r\n\r\n\t\t\t\t\ttutorials += createButton(titl, indexPaths[i], data.helpPath);\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tswitch(indexPaths[i].split('.')[1]) {\r\n\r\n\t\t\t\t\t\tcase 'slider_settings':\r\n\t\t\t\t\t\t\tslider += createButton(titl, indexPaths[i], 'slider');\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'slide_settings':\r\n\t\t\t\t\t\t\tslide += createButton(titl, indexPaths[i], 'slide');\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'layer_settings':\r\n\t\t\t\t\t\t\tlayr += createButton(titl, indexPaths[i], 'layer');\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'navigation_settings':\r\n\t\t\t\t\t\t\tnav += createButton(titl, indexPaths[i], 'nav');\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn [tutorials, slider, nav, slide, layr];\r\n\r\n\t}\r\n\r\n\t// update perfect scrollbar container height\r\n\tfunction updateContainer(e, skipButtons) {\r\n\r\n\t\tvar max = Math.max(optionResults.height(), faqResults.height()),\r\n\t\t\th = Math.min(RVS.WIN.height() / 3, max);\r\n\r\n\t\thelpOptionsWrap.height(h);\r\n\t\thelpOptionsWrap[0].scrollTop = 0;\r\n\t\thelpOptionsWrap[1].scrollTop = 0;\r\n\t\thelpOptionsWrap.RSScroll('update');\r\n\r\n\t}\r\n\r\n\t// remove all help icon classes\r\n\tfunction removeIconClasses(i, className) {\r\n\r\n\t\treturn (className.match (/(^|\\s)help-\\icon-\\S+/g) || []).join(' ');\r\n\r\n\t}\r\n\r\n\t// show help modal\r\n\tfunction displayHelpModal(data, path) {\r\n\r\n\t\tvar highlight = data.highlight,\r\n\t\t\thelpTitle = data.buttonTitle || data.title;\r\n\r\n\t\tpath = path.split('.');\r\n\t\tpath = path[0] !== 'general_how_to' ? path[1].replace('_settings', '') : 'faq';\r\n\r\n\t\tmainTitle.text(helpTitle);\r\n\t\ttitle.html(path + ' ' + bricks.options);\r\n\t\ttitleWrap.removeClass(removeIconClasses).addClass('help-icon-' + path);\r\n\r\n\t\tdescription.html(data.description);\r\n\t\thelpDescription.show();\r\n\t\tlinkButton.attr('data-link', data.article).css('display', 'inline-block');\r\n\t\toptionButton.removeAttr('data-menu data-modal data-scrollto data-focus data-dependencies').removeClass(removeIconClasses).addClass('help-icon-' + path).css('display', 'inline-block');\r\n\r\n\t\tif(highlight) {\r\n\r\n\t\t\tif(highlight.menu) optionButton.attr('data-menu', highlight.menu);\r\n\t\t\tif(highlight.modal) optionButton.attr('data-modal', highlight.modal);\r\n\t\t\tif(highlight.scrollTo) optionButton.attr('data-scrollto', highlight.scrollTo);\r\n\t\t\tif(highlight.focus) optionButton.attr('data-focus', highlight.focus);\r\n\t\t\tif(highlight.dependencies && Array.isArray(highlight.dependencies)) optionButton.attr('data-dependencies', JSON.stringify(highlight.dependencies));\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\toptionButton.hide();\r\n\r\n\t\t}\r\n\r\n\t\tbodies.addClass('help-mode-active');\r\n\r\n\t}\r\n\r\n\t// hide help modal\r\n\tfunction hideHelpModal() {\r\n\r\n\t\ttimerOut = setTimeout(function() {\r\n\r\n\t\t\tif(!helpOver && !stillOver && !iconHovered) bodies.removeClass('help-mode-active');\r\n\r\n\t\t}, 3000);\r\n\r\n\t}\r\n\r\n\t// handle non-input focusables\r\n\tfunction onSpecialOver() {\r\n\r\n\t\tvar data;\r\n\r\n\t\t// keyframe buttons\r\n\t\tif(this.className && this.className.search('frame_list_title') !== -1) {\r\n\r\n\t\t\tvar fram = jQuery(this).closest('.keyframe_liste').attr('data-frame');\r\n\t\t\tif(!fram) return;\r\n\r\n\t\t\tfram = fram.replace('frame_', '');\r\n\t\t\tswitch(fram) {\r\n\r\n\t\t\t\tcase '0':\r\n\t\t\t\t\tdata = 'animation.in.from';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1':\r\n\t\t\t\t\tdata = 'animation.in.to';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '999':\r\n\t\t\t\t\tdata = 'animation.out.to';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdata = 'animation.keyframe.to';\r\n\t\t\t\t// end default\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// intelligent inherit buttons\r\n\t\telse {\r\n\r\n\t\t\tdata = this.dataset.evt;\r\n\r\n\t\t}\r\n\r\n\t\tthis.dataset.helpkey = data;\r\n\t\tonInputOver.call(this);\r\n\r\n\t}\r\n\r\n\t// settings panel input field mouseover\r\n\tfunction onInputOver() {\r\n\r\n\t\tvar orig = jQuery(this);\r\n\t\tif(orig.hasClass('opensettingstrigger') || orig.hasClass('formcontainer')) return;\r\n\r\n\t\tclearTimeout(showTimer);\r\n\t\tclearTimeout(timerIn);\r\n\r\n\t\tjQuery('.help-input-focus').removeClass('help-input-focus');\r\n\r\n\t\tvar $this,\r\n\t\t\tpath = this.dataset.helpkey || this.dataset.r;\r\n\r\n\t\tif(!path) {\r\n\r\n\t\t\t$this = orig;\r\n\t\t\tif(!$this.attr('data-select')) {\r\n\r\n\t\t\t\t$this = $this.hasClass('ddTP') ? $this.prev('select') :\r\n\t\t\t\t\t\t$this.hasClass('revbuilder-colorpicker') ? $this.find('.revbuilder-cpicker-component') : $this.find('input[data-r]');\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\t$this = jQuery($this.attr('data-select'));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tpath = $this.attr('data-helpkey') || $this.attr('data-r') || '';\r\n\r\n\t\t}\r\n\r\n\t\tif(!$this || !$this.length) $this = orig;\r\n\t\tpath = sanitizePath($this, path);\r\n\r\n\t\tif(!path) return;\r\n\t\tvar curPath = path;\r\n\r\n\t\t// radio paths can describe the group collectively or individually so we check for both\r\n\t\tif(this.type === 'radio') curPath += '.' + this.value;\r\n\r\n\t\tvar data = readData($this, curPath, orig.attr('data-helproot'));\r\n\t\tif(!data) {\r\n\r\n\t\t\tif(this.type === 'radio') data = readData($this, path, orig.attr('data-helproot'));\r\n\t\t\tif(!data) return;\r\n\r\n\t\t}\r\n\r\n\t\tinputOver = true;\r\n\t\telementHovered = true;\r\n\r\n\t\t// wait 500ms on hover to avoid collisions\r\n\t\ttimerIn = setTimeout(function() {\r\n\r\n\t\t\tif(inputOver) {\r\n\r\n\t\t\t\tclearTimeout(timerOut);\r\n\t\t\t\thelpInputClear.trigger('click');\r\n\t\t\t\tstillOver = true;\r\n\r\n\t\t\t\tshowHideVideo();\r\n\t\t\t\t/* showDirectoryItem(data[0]); */\r\n\t\t\t\tdisplayHelpModal(getData(data[1], data[2].substr(1)), data[0]);\r\n\r\n\t\t\t\t// handle blur box shadow on the multiple inputs\r\n\t\t\t\tif(!orig.hasClass('revbuilder-colorpicker') && !orig.hasClass('tponoffwrap')) {\r\n\r\n\t\t\t\t\tif(orig.attr('class') && orig.attr('class').search(/bg_alignselector|layer_hor_selector|layer_ver_selector|layer_content_hor_selector|layer_content_ver_selector/) === -1) {\r\n\t\t\t\t\t\t$this.addClass('help-input-focus');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\torig.addClass('help-input-focus');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tvar onOff = orig.closest('.tponoffwrap');\r\n\t\t\t\t\tif(!onOff.length) orig.addClass('help-input-focus');\r\n\t\t\t\t\telse onOff.addClass('help-input-focus');\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}, 500);\r\n\r\n\t}\r\n\r\n\t// settings field input element mouseout\r\n\tfunction onInputOut() {\r\n\r\n\t\tinputOver = false;\r\n\t\tstillOver = false;\r\n\t\thideHelpModal();\r\n\r\n\t}\r\n\r\n\t// help modal mouseover\r\n\tfunction onHelpModalOver() {\r\n\r\n\t\tclearTimeout(timerOut);\r\n\t\thelpOver = true;\r\n\r\n\t}\r\n\r\n\t // help modal mouseout\r\n\tfunction onHelpModalOut() {\r\n\r\n\t\thelpOver = false;\r\n\t\tif(elementHovered && !iconHovered) hideHelpModal();\r\n\r\n\t}\r\n\r\n\t// hide help modal\r\n\tfunction hideBubble() {\r\n\r\n\t\tif(!helpOver && !iconHovered) {\r\n\r\n\t\t\telementHovered = true;\r\n\t\t\tonHelpModalOut();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// remove hover classes for dropdown hints\r\n\tfunction removeClasses() {\r\n\r\n\t\tjQuery(this).removeClass(function(i, className) {\r\n\r\n\t\t\treturn (className.match (/(^|\\s)help-\\hover-\\S+/g) || []).join(' ');\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t// remove hover classes for dropdown hints\r\n\tfunction removeHoverClass() {\r\n\r\n\t\tif(hoverActive) {\r\n\r\n\t\t\thoverActive = false;\r\n\t\t\tbodies.off('.helpguidehover');\r\n\t\t\tjQuery('.help-hover').removeClass('help-hover').each(removeClasses);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// remove dropdown hint classes as soon as something is clicked\r\n\tfunction addBodyClick() {\r\n\r\n\t\tbodies.off('.helpguidehover').one('click.helpguidehover', removeHoverClass);\r\n\r\n\t}\r\n\r\n\t// show add layer, add slide menu, etc.\r\n\tfunction showMenu(nme, tpe) {\r\n\r\n\t\tclearTimeout(clickTimer);\r\n\t\tremoveHoverClass();\r\n\r\n\t\tvar slideMenu;\r\n\t\tif(nme === 'layers') {\r\n\r\n\t\t\tif(!tpe) tpe = 'text';\r\n\t\t\taddLayer.addClass('help-hover');\r\n\t\t\taddLayer.addClass('help-hover-' + tpe);\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tslideMenu = addLayer.prev().addClass('help-hover');\r\n\t\t\tif(nme === 'slideorder') slideMenu.addClass('help-hover-slideorder');\r\n\t\t\telse if(nme === 'staticlayers') slideMenu.addClass('help-hover-staticlayers');\r\n\r\n\t\t}\r\n\r\n\t\thoverActive = true;\r\n\t\tclickTimer = setTimeout(addBodyClick, 100);\r\n\r\n\t}\r\n\r\n\t// highlight the targeted option\r\n\tfunction addFocus() {\r\n\r\n\t\tvar $this = jQuery(this);\r\n\r\n\t\tif($this.hasClass('tponoff')) $this = $this.closest('.tponoffwrap');\r\n\t\telse if($this.hasClass('revbuilder-cpicker-component')) $this = $this.closest('.revbuilder-colorpicker');\r\n\r\n\t\t$this.addClass('help-input-focus');\r\n\r\n\t}\r\n\r\n\t// store the selected layer for further dependancy checks\r\n\tfunction getLayerType($this) {\r\n\r\n\t\tvar clas = $this[0].className.split(' '),\r\n\t\t\tlen = clas.length;\r\n\r\n\t\twhile(len--) {\r\n\r\n\t\t\tif(clas[len].search('_lc_type_') !== -1) {\r\n\r\n\t\t\t\treturn clas[len].replace('_lc_type_', '');\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\t// show dropdown menu hints or select a currently existing layer\r\n\tfunction activateHints(dependency) {\r\n\r\n\t\tvar i,\r\n\t\t\tcl,\r\n\t\t\tlen,\r\n\t\t\tclas,\r\n\t\t\tlayr,\r\n\t\t\tlayrs,\r\n\t\t\taddon,\r\n\t\t\tclasses,\r\n\t\t\ttheType,\r\n\t\t\tspecial,\r\n\t\t\tlayerType;\r\n\r\n\t\tdependency = dependency.split('::');\r\n\r\n\t\t// do special stuff\r\n\t\tswitch(dependency[0]) {\r\n\r\n\t\t\tcase 'layerselected':\r\n\r\n\t\t\t\tif(dependency.length === 2) layerType = dependency[1];\r\n\t\t\t\tif(layerType) {\r\n\r\n\t\t\t\t\tclasses = layerType.split('||');\r\n\t\t\t\t\tlayerType = classes[0];\r\n\t\t\t\t\tspecial = '';\r\n\r\n\t\t\t\t\t// check for addon layer\r\n\t\t\t\t\tif(layerType.search('{{') !== -1) {\r\n\r\n\t\t\t\t\t\tlayerType = layerType.split('{{');\r\n\t\t\t\t\t\taddon = layerType[1].split('}}')[0];\r\n\t\t\t\t\t\tspecial = ' .tp-' + addon;\r\n\t\t\t\t\t\tlayerType = addon;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlen = classes.length;\r\n\t\t\t\t\tclas = '';\r\n\r\n\t\t\t\t\tfor(i = 0; i < len; i++) {\r\n\r\n\t\t\t\t\t\tif(i > 0) clas += ', ';\r\n\t\t\t\t\t\tcl = classes[i];\r\n\r\n\t\t\t\t\t\tif(special) cl = cl.split('{{')[0];\r\n\t\t\t\t\t\tclas += '._lc_type_' + cl + special;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tclas = '._lc_';\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlayrs = jQuery(clas);\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e) {\r\n\t\t\t\t\tlayrs = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(layrs && layrs.length) {\r\n\r\n\t\t\t\t\tif(layrs.hasClass('_lc_content_')) layrs = layrs.closest('._lc_');\r\n\t\t\t\t\tlayr = layrs.filter('.selected');\r\n\r\n\t\t\t\t\tif(!layr.length) layr = layrs.eq(0).trigger('click');\r\n\t\t\t\t\ttheType = getLayerType(layr);\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tshowMenu('layers', layerType);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'addlayer':\r\n\t\t\t\tshowMenu('layers', 'text');\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'addslide':\r\n\t\t\t\tshowMenu('slides');\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'slideorder':\r\n\t\t\t\tshowMenu('slideorder');\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'staticlayers':\r\n\t\t\t\tshowMenu('staticlayers');\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tjQuery(dependency[0]).trigger('click');\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e){}\r\n\r\n\t\t\t// end default\r\n\r\n\t\t}\r\n\r\n\t\treturn theType;\r\n\r\n\t}\r\n\r\n\t// on/off input button values\r\n\tfunction checkBoolean(value) {\r\n\r\n\t\tif(value === 'true' || value === 'on') return true;\r\n\t\telse if(value === 'false' || value === 'off') return false;\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n\t// translate placeholder paths for accessing revbuilder\r\n\tfunction sanitizeKey(key) {\r\n\r\n\t\tif(key === '#layer#') {\r\n\r\n\t\t\tif(typeof RVS.selLayers !== 'undefined' && Array.isArray(RVS.selLayers) && RVS.selLayers.length) {\r\n\r\n\t\t\t\t// need to research more if this is reliable\r\n\t\t\t\treturn typeof RVS.S.clickedLayer !== 'undefined' ? lastClickedLayer : RVS.selLayers[0].toString();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn key === '#slide#' && typeof RVS.S.slideId !== 'undefined' ? RVS.S.slideId :\r\n\t\t\t   key === '#frame#' && typeof RVS.S.keyFrame !== 'undefined' ? RVS.S.keyFrame :\r\n\t\t\t   key === '#action#' && typeof RVS.S.actionIdx !== 'undefined' ? RVS.S.actionIdx : key;\r\n\r\n\t}\r\n\r\n\t// figure out if option can be shown, and if not, highlight the dependency instead\r\n\tfunction checkDependencies(dependencies) {\r\n\r\n\t\tdependencies = JSON.parse(dependencies);\r\n\t\tif(!dependencies || !Array.isArray(dependencies)) return false;\r\n\r\n\t\tvar len = dependencies.length,\r\n\t\t\tprevVal,\r\n\t\t\tpassed,\r\n\t\t\tcheck,\r\n\t\t\tvalue,\r\n\t\t\tpath,\r\n\t\t\tleg,\r\n\t\t\tkey,\r\n\t\t\tj;\r\n\r\n\t\tfor(var i = 0; i < len; i++) {\r\n\r\n\t\t\tcheck = dependencies[i];\r\n\t\t\tif(!HelpGuide.verifyObject(check)) {\r\n\r\n\t\t\t\t// do special stuff like show add layer menu, etc.\r\n\t\t\t\tprevVal = activateHints(dependencies[i]);\r\n\r\n\t\t\t}\r\n\t\t\t// check dependent options\r\n\t\t\telse {\r\n\r\n\t\t\t\t// a dependency can have its own dependency\r\n\t\t\t\t// for cases when one of the dependencies is a wildcard\r\n\t\t\t\tif(check.dependency && check.dependency !== prevVal) continue;\r\n\r\n\t\t\t\tpath = check.path.split('.');\r\n\t\t\t\tvalue = RVS.SLIDER;\r\n\t\t\t\tleg = path.length;\r\n\t\t\t\tpassed = false;\r\n\r\n\r\n\t\t\t\t// get the revbuilder value\r\n\t\t\t\tfor(j = 0; j < leg; j++) {\r\n\r\n\t\t\t\t\tkey = sanitizeKey(path[j]);\r\n\r\n\r\n\t\t\t\t\tif(!value.hasOwnProperty(key)) return true;\r\n\t\t\t\t\tvalue = value[key];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvalue = checkBoolean(value);\r\n\t\t\t\tprevVal = value;\r\n\r\n\t\t\t\tif(typeof check.value === 'string' && check.value.search('::') !== -1) {\r\n\r\n\t\t\t\t\tvar vals = check.value.split('::');\r\n\t\t\t\t\tleg = vals.length;\r\n\r\n\t\t\t\t\tfor(j = 0; j < leg; j++) {\r\n\r\n\t\t\t\t\t\tif(vals[j] === value) {\r\n\r\n\t\t\t\t\t\t\tpassed = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tif(check.value === value) passed = true;\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!passed) {\r\n\r\n\t\t\t\t\t// dependency failed, highlight the dependent option\r\n\t\t\t\t\tif(check.target) wildcard = \"[value='\" + check.target + \"']\";\r\n\r\n\t\t\t\t\t// jQuery('#revhelp_' + check.option).trigger('click');\r\n\t\t\t\t\tonOptionClick.call(HelpGuide.allHelpPaths.find('#revhelp_' + check.option));\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\t// trigger click on an options submenu item\r\n\tfunction menuClick($this) {\r\n\r\n\t\tif(!$this.hasClass('selected')) {\r\n\r\n\t\t\t// actions window, only open if it's not already open\r\n\t\t\tif($this.attr('id') === 'gst_layer_5') {\r\n\r\n\t\t\t\tif(activateHints('layerselected') && !actionModal.is(':visible')) $this.trigger('click');\r\n\r\n\t\t\t}\r\n\t\t\telse if($this.attr('id') === 'gst_sl_11') {\r\n\r\n\t\t\t\tjQuery('.emc_toggle_wrap').removeClass('open');\r\n\t\t\t\tif(!cssModal.is(':visible')) $this.trigger('click');\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\t$this.trigger('click');\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// trigger clicks on option menus\r\n\tfunction openMenus(menus) {\r\n\r\n\t\tmenus = menus.split(',');\r\n\t\tvar len = menus.length;\r\n\r\n\t\tfor(var i = 0; i < len; i++) {\r\n\r\n\t\t\tmenuClick(jQuery(RVS.F.trim(menus[i])));\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// add a box-shadow to the targeted option(s) to be shown\r\n\tfunction focusElement(focuss) {\r\n\r\n\t\tjQuery('.help-input-focus').removeClass('help-input-focus');\r\n\t\tjQuery('.lal_group_member.selected').removeClass('selected');\r\n\r\n\t\tfocuss = focuss.replace('*wildcard*', wildcard);\r\n\t\twildcard = ':checked';\r\n\r\n\t\tvar first = focuss.search('{first}') !== -1,\r\n\t\t\tisKeyFrame,\r\n\t\t\tisFrame;\r\n\r\n\t\tif(focuss.search('{frame}') !== -1) {\r\n\r\n\t\t\tisFrame = true;\r\n\t\t\tfocuss = focuss.replace('{frame}', '');\r\n\r\n\t\t}\r\n\t\telse if(focuss.search('{keyframe}') !== -1) {\r\n\r\n\t\t\tisKeyFrame = true;\r\n\t\t\tfocuss = focuss.replace('{keyframe}', '');\r\n\r\n\t\t}\r\n\r\n\t\tif(first) focuss = focuss.replace('{first}', '');\r\n\t\tvar $this;\r\n\r\n\t\ttry {\r\n\t\t\t$this = jQuery(focuss);\r\n\t\t}\r\n\t\tcatch(e) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(isKeyFrame && !$this.length) $this = jQuery('.add_frame_after').first();\r\n\t\tif(isFrame || isKeyFrame) $this.closest('.keyframe_liste').css('z-index', '29');\r\n\r\n\t\tif(!first) $this.each(addFocus);\r\n\t\telse $this.eq(0).addClass('help-input-focus');\r\n\r\n\t}\r\n\r\n\t// attempt to scroll to the option when it's highlighted\r\n\tfunction scrollElement(scrollTo) {\r\n\r\n\t\tvar method,\r\n\t\t\tsection;\r\n\r\n\t\tif(scrollTo.search('{actions}') === -1) {\r\n\r\n\t\t\tmethod = 'offset';\r\n\t\t\tsection = rightToolbar;\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tmethod = 'position';\r\n\t\t\tsection = actionMenu;\r\n\t\t\tscrollTo = scrollTo.replace('{actions}', '');\r\n\r\n\t\t}\r\n\r\n\t\tscrollTo = jQuery(scrollTo).filter(':visible');\r\n\t\tif(scrollTo.length) {\r\n\r\n\t\t\tsection.scrollTop(0);\r\n\t\t\tsection.scrollTop(scrollTo[method]().top);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// close any open modals for regular settings clicks\r\n\tfunction modalClose() {\r\n\r\n\t\ttry {\r\n\t\t\tthis.trigger('click');\r\n\t\t}\r\n\t\tcatch(e) {}\r\n\r\n\t}\r\n\r\n\t// highlight real option based on directory button click\r\n\tfunction onOptionClick(e) {\r\n\r\n\t\tif(e) e.stopImmediatePropagation();\r\n\t\tjQuery('.help-input-focus').removeClass('help-input-focus');\r\n\r\n\t\tvar $this = jQuery(this),\r\n\t\t\tmodal = $this.attr('data-modal'),\r\n\t\t\tactions = modal && modal === 'actions',\r\n\t\t\tdependencies = $this.attr('data-dependencies');\r\n\r\n\t\t/*\r\n\t\t\tfor non-actions, dependencies need to be checked first\r\n\t\t\tfor actions, dependencies need to be checked last\r\n\t\t*/\r\n\r\n\t\t// check dependencies\r\n\t\tif(!actions && dependencies && checkDependencies(dependencies)) return;\r\n\r\n\t\tvar dataMenu = $this.attr('data-menu'),\r\n\t\t\tdataFocus = $this.attr('data-focus'),\r\n\t\t\tdataScroll = $this.attr('data-scrollto');\r\n\r\n\t\t// close any open modals\r\n\t\tif(!modal) jQuery.each(closeModals, modalClose);\r\n\r\n\t\t// open menu items\r\n\t\tif(dataMenu) openMenus(dataMenu);\r\n\r\n\t\t// highlight option\r\n\t\tif(dataFocus) focusElement(dataFocus);\r\n\r\n\t\t// scroll to option\r\n\t\tif(dataScroll) scrollElement(dataScroll);\r\n\r\n\t\t// check dependencies\r\n\t\tif(actions && dependencies) checkDependencies(dependencies);\r\n\r\n\t}\r\n\r\n\t// joining woocommerce/post common options\r\n\tfunction mapHelpPaths() {\r\n\r\n\t\t// TEMP\r\n\t\tvar maps = [\r\n\r\n\t\t\t['.fake_on_button', 'slider', 'size.custom.d'],\r\n\t\t\t['*[data-r=\"source.woo.types\"]', 'slider', 'source.post.types'],\r\n\t\t\t['*[data-r=\"source.woo.category\"]', 'slider', 'source.post.category'],\r\n\t\t\t['*[data-r=\"source.woo.sortBy\"]', 'slider', 'source.post.sortBy'],\r\n\t\t\t['*[data-r=\"source.woo.sortDirection\"]', 'slider', 'source.post.sortDirection'],\r\n\t\t\t['*[data-r=\"source.woo.maxProducts\"]', 'slider', 'source.post.maxPosts'],\r\n\t\t\t['*[data-r=\"source.woo.excerptLimit\"]', 'slider', 'source.post.excerptLimit'],\r\n\t\t\t['#row_column_structure', 'layer', 'row_column_structure'],\r\n\t\t\t['.colselector label_bigicon', 'layer', 'row_column_structure'],\r\n\t\t\t['.layer_rowbreak_icons', 'layer', 'group.columnbreakat'],\r\n\t\t\t['.modal_hor_selector', 'slider', 'modal.horizontal'],\r\n\t\t\t['.modal_ver_selector', 'slider', 'modal.vertical']\r\n\r\n\t\t];\r\n\t\tfor(var i = 0; i < maps.length; i++) {\r\n\r\n\t\t\tjQuery(maps[i][0]).attr({'data-helproot': maps[i][1], 'data-helpkey': maps[i][2]});\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// search input event for blue bubble\r\n\tfunction searchInput() {\r\n\r\n\t\tvar st = '',\r\n\t\t\tbtnHtml,\r\n\t\t\thasFaq,\r\n\t\t\thasOption;\r\n\r\n\t\tif(this.value && this.value.length > 2) {\r\n\r\n\t\t\tbtnHtml = buildButtons(this.value.toLowerCase(), true);\r\n\t\t\tfor(var i = 1; i < 5; i++) if(btnHtml[i]) st += btnHtml[i];\r\n\r\n\t\t\tif(st) {\r\n\r\n\t\t\t\thasOption = true;\r\n\t\t\t\toptionResults.html(st).show();\r\n\t\t\t\tbodies.removeClass('help-options-empty');\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\toptionResults.hide();\r\n\t\t\t\tbodies.addClass('help-options-empty');\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(btnHtml[0]) {\r\n\r\n\t\t\t\thasFaq = true;\r\n\t\t\t\tst = btnHtml[0];\r\n\t\t\t\tfaqResults.html(st).show();\r\n\t\t\t\tbodies.removeClass('help-faqs-empty');\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\tfaqResults.hide();\r\n\t\t\t\tbodies.addClass('help-faqs-empty');\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(hasOption || hasFaq) {\r\n\r\n\t\t\ttitle.html(bricks.helpMode);\r\n\t\t\ttitleWrap.removeClass(removeIconClasses).addClass('help-icon-default');\r\n\r\n\t\t\tshowHideVideo();\r\n\t\t\tlinkButton.hide();\r\n\t\t\toptionButton.hide();\r\n\t\t\tsearchResults.show();\r\n\r\n\t\t\thelpInputClear.css('visibility', 'visible');\r\n\r\n\t\t\tvar max = Math.max(optionResults.height(), faqResults.height()),\r\n\t\t\t\th = Math.min(RVS.WIN.height() / 3, max);\r\n\r\n\t\t\thelpOptionsWrap.height(h);\r\n\t\t\thelpOptionsWrap[0].scrollTop = 0;\r\n\t\t\thelpOptionsWrap[1].scrollTop = 0;\r\n\t\t\thelpOptionsWrap.RSScroll('update');\r\n\r\n\t\t\tclearTimeout(scrollTimer);\r\n\t\t\tscrollTimer = setTimeout(function() {helpOptionsWrap.RSScroll('update');}, 250);\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tsearchResults.hide();\r\n\t\t\thelpInputClear.css('visibility', 'hidden');\r\n\t\t\tshowHideVideo(true);\r\n\r\n\t\t}\r\n\r\n\t\thelpDescription.hide();\r\n\r\n\t}\r\n\r\n\r\n\t// directory activated\r\n\tfunction init() {\r\n\r\n\t\twin = jQuery(window);\r\n\t\tbodies = jQuery('body');\r\n\r\n\t\t/*\r\n\t\t\tMODAL\r\n\t\t*/\r\n\t\tvar modal =\r\n\r\n\t\t\t'<div id=\"help_mode_modal\">' +\r\n\t\t\t\t'<div class=\"help-mode-title\">' +\r\n\t\t\t\t\t'<span id=\"help_mode_title_wrap\" class=\"help-icon-default\"><i class=\"material-icons\">touch_app</i><i class=\"material-icons\">settings</i><i class=\"material-icons\">gamepad</i><i class=\"material-icons\">burst_mode</i><i class=\"material-icons\">layers</i><span id=\"help_mode_title\">' + bricks.helpMode + '</span></span>' +\r\n\t\t\t\t\t'<span id=\"help_mode_main_title\">' + bricks.instructions + '</span>' +\r\n\t\t\t\t\t'<div id=\"help_mode_video_wrap\"><video id=\"help_mode_video\" width=\"520\" height=\"292\" muted loop playsinline><source src=\"' + RVS.ENV.plugin_url + '/admin/assets/videos/hover_tutorial.mp4\" type=\"video/mp4\" /></video></div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"help-mode-description\">' +\r\n\t\t\t\t\t'<div class=\"help-mode-section\"><div id=\"help_mode_description\"></div></div>' +\r\n\t\t\t\t\t'<div id=\"help-mode-buttons\" class=\"help-mode-section\">' +\r\n\t\t\t\t\t\t'<div id=\"help_mode_documentation\" class=\"help-mode-button\"><i class=\"material-icons\">library_books</i> ' + bricks.viewDocs + '</div>' +\r\n\t\t\t\t\t\t'<div id=\"help_mode_option\" class=\"help-mode-button\"><i class=\"material-icons\">near_me</i><i class=\"material-icons\">settings</i><i class=\"material-icons\">gamepad</i><i class=\"material-icons\">burst_mode</i><i class=\"material-icons\">layers</i> ' + bricks.showOption + '</div>' +\r\n\t\t\t\t\t\t'<div class=\"tp-clearfix\"></div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div id=\"help_mode_search_wrap\">' +\r\n\t\t\t\t\t'<div id=\"help_mode_search\" class=\"help-mode-section\"><input id=\"help_search_input\" type=\"text\" placeholder=\"' + bricks.search + \"'><span id='help_input_clear'><i class='material-icons'>close</i></span></div>\" +\r\n\t\t\t\t\t'<div id=\"help_search_results\">' +\r\n\t\t\t\t\t\t'<div class=\"help-results-container\"><div id=\"help-options-wrap\" class=\"help-results-wrap\"><div id=\"help_options_results\" class=\"help-results\"></div></div></div>' +\r\n\t\t\t\t\t\t'<div class=\"help-results-container\"><div id=\"help-faqs-wrap\" class=\"help-results-wrap\"><div id=\"help_faq_results\" class=\"help-results\"></div></div></div>' +\r\n\t\t\t\t\t\t'<div class=\"tp-clearfix\"></div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<span id=\"help_modal_close\"><i class=\"material-icons help-no-drag\">close</i></span>' +\r\n\t\t\t'</div>';\r\n\r\n\t\tjQuery(modal).prependTo(jQuery('#the_right_toolbar'));\r\n\r\n\t\ttitle = jQuery('#help_mode_title');\r\n\t\ttitleWrap = jQuery('#help_mode_title_wrap');\r\n\t\tdescription = jQuery('#help_mode_description');\r\n\t\thelpButtons = jQuery('#help-mode-buttons');\r\n\r\n\t\tfaqResults = jQuery('#help_faq_results');\r\n\t\tsearchResults = jQuery('#help_search_results');\r\n\t\toptionResults = jQuery('#help_options_results');\r\n\r\n\t\tsearchBtn = jQuery('#help_mode_search');\r\n\t\thelpSearchInput = jQuery('#help_search_input').on('focus', writePaths).on('keyup', searchInput);\r\n\t\thelpInputClear = jQuery('#help_input_clear').on('click', function() {helpSearchInput.val('').trigger('keyup');});\r\n\t\ttitle.data('origtext', title.html());\r\n\r\n\t\thelper = jQuery('#help_mode_modal').draggable({cancel: '.help-no-drag, .help-mode-description, #help_mode_search_wrap'})\r\n\t\t\t\t\t\t\t\t\t\t   .on('mouseenter', onHelpModalOver)\r\n\t\t\t\t\t\t\t\t\t\t   .on('mouseleave', onHelpModalOut);\r\n\r\n\t\tjQuery('#help_modal_close').on('click', function() {bodies.removeClass('help-mode-active');});\r\n\t\tlinkButton = jQuery('#help_mode_documentation').on('click', function() {\r\n\r\n\t\t\tjQuery('.help-input-focus').removeClass('help-input-focus');\r\n\t\t\twindow.open(this.dataset.link);\r\n\r\n\t\t});\r\n\r\n\t\toptionButton = jQuery('#help_mode_option').on('click', onOptionClick);\r\n\r\n\t\thelpOptionsWrap = jQuery('.help-results-wrap').RSScroll({\r\n\r\n\t\t\twheelPropagation:true,\r\n\t\t\tsuppressScrollX:true,\r\n\t\t\tminScrollbarLength:100\r\n\r\n\t\t});\r\n\r\n\t\thelpVideo = jQuery('#help_mode_video');\r\n\t\tvideoWrap = jQuery('#help_mode_video_wrap');\r\n\t\thelpDescription = jQuery('.help-mode-description');\r\n\r\n\t\t/*\r\n\t\t\tDIRECTORY\r\n\t\t*/\r\n\t\tmapHelpPaths();\r\n\t\tbuildHelpTree();\r\n\r\n\t\tindexPaths = [];\r\n\t\tcloseModals = [];\r\n\r\n\t\tjQuery('.rbm_close').each(function(i) {\r\n\t\t\tcloseModals[i] = jQuery(this);\r\n\t\t});\r\n\r\n\t\tcssModal = jQuery('#rbm_slider_api');\r\n\t\tactionMenu = jQuery('#layeraction_list');\r\n\t\tactionModal = jQuery('#rbm_layer_action');\r\n\t\taddLayer = jQuery('#add_layer_toolbar_wrap');\r\n\t\trightToolbar = jQuery('#the_right_toolbar_inner');\r\n\t\tmainTitle = jQuery('#help_mode_main_title');\r\n\r\n\t\tcheckAddOns();\r\n\t\tonOffHelp();\r\n\r\n\t}\r\n\r\n\r\n});\r\n","Nwdthemes_Revslider/admin/assets/js/modules/overview.js":"/*!\r\n * REVOLUTION 6.0.0 OVERVIEW JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\ndefine(\r\n    'overview',\r\n    ['revsliderAdmin', 'revolutionTools', 'rs6'],\r\n    function(RVS, punchgs) {\r\n\r\n;function showPluginInfos() {\r\n\t\t\t//jQuery('.plugin_inforow').each(function(i){\r\n\r\n\t\t\t//});\r\n\t\t}\r\n/**********************************\r\n\t-\tOVERVIEW FUNCTIONS\t-\r\n********************************/\r\n\r\n(function() {\r\n\r\n\t// INIT OVERVIEW\r\n\tRVS.F.initOverView = function() {\r\n\t\tRVS.F.initAdmin();\r\n\t\tRVS.C.rsOVM = jQuery('#rs_overview_menu');\r\n\t\t//jQuery('.update-nag').hide();\r\n\t\tRVS.S.ovMode = true;\r\n\t\tRVS.F.initialiseInputBoxes(\"overview\");\r\n\t\tinitLocalListeners();\r\n\t\tinitHistory();\r\n\t\tsliderLibrary.output = jQuery('#existing_sliders');\r\n\r\n\t\tsliderLibrary.sfw = jQuery('#slider_folders_wrap');\r\n\t\tsliderLibrary.sfw.appendTo(jQuery(document.body));\r\n\t\tsliderLibrary.sfwu = jQuery('#slider_folders_wrap_underlay');\r\n\t\tsliderLibrary.backOneLevel = jQuery('<div id=\"back_one_folder\" class=\"new_slider_block\"><i class=\"material-icons\">more_horiz</i><span class=\"nsb_title\">Back</span></div>');\r\n\t\tsliderLibrary.selectedFolder = -1;\r\n\t\tsliderLibrary.selectedPage = 1;\r\n\t\tsliderLibrary.slidesContainer = jQuery('.overview_slide_elements');\r\n\t\tupdateParentAttributes();\r\n\t\tsliderLibrary.filters = buildModuleFilters();\r\n\t\tinitOverViewMenu();\r\n\t\tRVS.F.updateDraw();\r\n\t\tRVS.F.isActivated();\r\n\t\tupdateOVFilteredList();\r\n\t\tupdateSysChecks();\r\n\t\tinitBasics();\r\n\t\tRVS.F.handleDeactivatedwarning();\r\n\t\tRVS.F.handleAddonsWarning();\r\n\t\tRVS.F.activeNotActive();\r\n\r\n\t\t// VERSION ACTIVATED, SHOW WELCOME MESSAGE\r\n\t\tif (RVS.ENV.updated) RVS.F.welcome();\r\n\r\n\t\tcheckAddOnVersions();\r\n\r\n\t\t// CHECK FOR NEW ADDONS AND TEMPLATES\r\n\t\tRVS.ENV.newTemplatesCounter = document.getElementById('new_templates_counter');\r\n\t\tRVS.ENV.newAddonsCounter = document.getElementById('new_addons_counter');\r\n\r\n\t\t//RVS.ENV.newTemplatesAmount = 415;\r\n\t\t//RVS.ENV.newAddonsAmount = 20;\r\n\r\n\t\tvar helperTemplates = {i:0},\r\n\t\t\thelperAddons = {i:0};\r\n\r\n\t\tif (RVS.ENV.newTemplatesAmount!==undefined && RVS.ENV.newTemplatesAmount>0) {\r\n\t\t\ttpGS.gsap.fromTo(helperTemplates,Math.min(1.5,Math.max(0.2,RVS.ENV.newTemplatesAmount*0.02)),{i:0},{i:RVS.ENV.newTemplatesAmount,ease:\"none\", onUpdate:function() {\r\n\t\t\t\tRVS.ENV.newTemplatesCounter.innerHTML = \"+ \"+Math.round(helperTemplates.i);\r\n\t\t\t}});\r\n\r\n\t\t\tRVS.ENV.newTemplatesCounter.style.display = \"block\";\r\n\t\t}\r\n\r\n\t\tif (RVS.ENV.newAddonsAmount!==undefined && RVS.ENV.newAddonsAmount>0) {\r\n\t\t\ttpGS.gsap.fromTo(helperAddons,Math.min(1.5,Math.max(0.2,RVS.ENV.newAddonsAmount*0.02)),{i:0},{i:RVS.ENV.newAddonsAmount,ease:\"none\", onUpdate:function() {\r\n\t\t\t\tRVS.ENV.newAddonsCounter.innerHTML = \"+ \"+Math.round(helperAddons.i);\r\n\t\t\t}});\r\n\r\n\t\t\tRVS.ENV.newAddonsCounter.style.display = \"block\";\r\n\t\t}\r\n\r\n\r\n\t\t// CHECK IF EDITOR WAS OPEN IN THE LAST 15sec AND OPEN FOLDER IF NEEDED\r\n\t\tvar ses = RVS.F.getCookie(\"rs6_shortly_edited_slider\")+\"\";\r\n\t\tif (ses!==undefined && ses.length>0) {\r\n\r\n\t\t\tRVS.F.setCookie(\"rs6_shortly_edited_slider\",\"\",0);\r\n\t\t\tvar folder = false;\r\n\t\t\tfor (var i in sliderLibrary.sliders) if (sliderLibrary.sliders.hasOwnProperty(i)) {\r\n\t\t\t\tif (folder!==false) continue;\r\n\t\t\t\tfolder = sliderLibrary.sliders[i].id==ses ? sliderLibrary.sliders[i].parent : folder;\r\n\t\t\t}\r\n\t\t\tif (folder!==false && folder!==-1 && folder!=='-1') RVS.F.changeOVToFolder(folder);\r\n\t\t}\r\n\r\n\t\t//RVS.F.openAddonModal();\r\n\t\tRVS.F.notifications();\r\n\t\t//RVS.F.openQuickContent({sliderid: \"1510\"});\r\n\t};\r\n\r\n\t// ADDON INSTALLED FROM TEMPLATE, UPDATES LISTS AND ADDON LISTS\r\n\t\tRVS.F.addonInstalledFromWarning = function(response,slug) {\r\n\t\t\tRVS.LIB.OBJ.addonsToInstall.splice(0,1);\r\n\t\t\tRVS.LIB.ADDONS[slug].active = true;\r\n\t\t}\r\n\r\n\r\n\tRVS.F.installAddonOneByOne = function() {\r\n\t\tif (RVS.LIB.OBJ.addonsToInstall.length>0) {\r\n\t\t\tvar slug = RVS.LIB.OBJ.addonsToInstall[0];\r\n\t\t\tRVS.F.ajaxRequest('activate_addon', {addon:slug}, function(response){\r\n\t\t\t\tif (RVS.LIB.ADDONS!==undefined && RVS.LIB.ADDONS[slug]!==undefined && RVS.LIB.ADDONS[slug].installed==true) {\r\n\t\t\t\t\tRVS.F.addonInstalledFromWarning(response,slug);\r\n\t\t\t\t\tRVS.F.installAddonOneByOne();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.LIB.ADDONS[slug].installed = true;\r\n\t\t\t\t\tRVS.F.installAddonOneByOne();\r\n\t\t\t\t}\r\n\t\t\t},undefined,undefined,RVS_LANG.installingaddon+'<br><span style=\"font-size:17px; line-height:25px;\">'+RVS.LIB.OBJ.addonsToInstall[0]+'</span>');\r\n\t\t} else {\r\n\t\t\tRVS.F.handleAddonsWarning();\r\n\t\t\tRVS.F.notifications();\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.handleAddonsWarning = function() {\r\n\t\tif (!RVS.ENV.activated) return;\r\n\t\tif (RVS.S.handleADDWAR===undefined) {\r\n\t\t\tRVS.S.handleADDWAR = true;\r\n\t\t\tRVS.C.addwarlist = document.getElementById('list_of_deactivated_addons');\r\n\t\t\tRVS.DOC.on('click','#rbm_notactiveaddon_warning .rbm_close',function() {\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t\tRVS.S.addonWarningOpen = false;\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('click','.de_add_fix',function() {\r\n\t\t\t\tRVS.LIB.OBJ.addonsToInstall = RVS.S.addFixRefList[this.dataset.fixref];\r\n\t\t\t\tRVS.F.installAddonOneByOne();\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('click','#naa_install_all',function() {\r\n\t\t\t\tRVS.LIB.OBJ.addonsToInstall = [];\r\n\t\t\t\tfor (var i in RVS.S.addFixRefList) {\r\n\t\t\t\t\tif (!RVS.S.addFixRefList.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tfor (var j in RVS.S.addFixRefList[i]) {\r\n\t\t\t\t\t\tif (!RVS.S.addFixRefList[i].hasOwnProperty(j)) continue;\r\n\t\t\t\t\t\tif (RVS.LIB.OBJ.addonsToInstall.indexOf(RVS.S.addFixRefList[i][j]) == -1) RVS.LIB.OBJ.addonsToInstall.push(RVS.S.addFixRefList[i][j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.installAddonOneByOne();\r\n\t\t\t});\r\n\r\n\t\t\tRVS.C.missingAddonLists = jQuery('#list_of_deactivated_addons').RSScroll({\r\n\t\t\t\twheelPropagation:true,\r\n\t\t\t\tsuppressScrollX:true,\r\n\t\t\t\tminScrollbarLength:100\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar txt = RVS.F.createNotActivatedAddonsList();\r\n\t\tif (txt!=='') {\r\n\t\t\tRVS.C.addwarlist.innerHTML = txt;\r\n\t\t\tRVS.F.showAddonWarning();\r\n\t\t\tRVS.C.missingAddonLists.RSScroll(\"update\");\r\n\t\t} else {\r\n\t\t\tif (RVS.S.addonWarningOpen) {\r\n\t\t\t\tRVS.S.addonWarningOpen = false;\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.createNotActivatedAddonsList = function() {\r\n\t\tvar i,j,txt=\"\",addlist,s,fixref=0;\r\n\t\tRVS.S.addFixRefList = {};\r\n\t\tfor (i in sliderLibrary.sliders) {\r\n\t\t\tfixref++;\r\n\t\t\tif (!sliderLibrary.sliders.hasOwnProperty(i) || sliderLibrary.sliders[i].addons===undefined || sliderLibrary.sliders[i].addons.length==0) continue;\r\n\t\t\taddlist = \"\";\r\n\t\t\ts=0;\r\n\t\t\tRVS.S.addFixRefList[fixref] = [];\r\n\t\t\tfor (j in sliderLibrary.sliders[i].addons) {\r\n\t\t\t\tif (!sliderLibrary.sliders[i].addons.hasOwnProperty(j) || RVS.LIB.ADDONS[sliderLibrary.sliders[i].addons[j]]==undefined) continue;\r\n\t\t\t\tif (!RVS.LIB.ADDONS[sliderLibrary.sliders[i].addons[j]].active || !RVS.LIB.ADDONS[sliderLibrary.sliders[i].addons[j]].installed) {\r\n\t\t\t\t\taddlist += (s>0 ? \", \" : \"\") + RVS.LIB.ADDONS[sliderLibrary.sliders[i].addons[j]].title;\r\n\t\t\t\t\tRVS.S.addFixRefList[fixref].push(sliderLibrary.sliders[i].addons[j]);\r\n\t\t\t\t\ts++;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif (addlist==\"\") continue;\r\n\t\t\tif (addlist.length>34) addlist = addlist.substring(0, 31)+\"...\";\r\n\t\t\ttxt += '<div class=\"deactivated_addon\">';\r\n\t\t\ttxt += '<div class=\"de_add_stitle\">'+sliderLibrary.sliders[i].alias+'</div>';\r\n\t\t\ttxt += '<div class=\"de_add_needs\">'+RVS_LANG.needsd+'</div>';\r\n\t\t\ttxt += '<div class=\"de_add_needs_adds\">'+addlist+'</div>';\r\n\t\t\ttxt += '<div class=\"de_add_fix\" data-fixref=\"'+fixref+'\">'+RVS_LANG.fix+'</div>';\r\n\t\t\ttxt += '</div>';\r\n\t\t}\r\n\t\treturn txt;\r\n\t}\r\n\r\n\tRVS.F.showAddonWarning = function() {\r\n\t\t/* WARNING OF MISSING FUNCTIONS */\r\n\t\tRVS.F.RSDialog.create({modalid:'#rbm_notactiveaddon_warning', bgopacity:0.25});\r\n\t\tRVS.S.addonWarningOpen = true;\r\n\t}\r\n\r\n\tRVS.F.handleDeactivatedwarning = function() {\r\n\t\tif (RVS.S.handleDEWAR===undefined) {\r\n\t\t\tRVS.S.handleDEWAR = true;\r\n\t\t\tRVS.DOC.on('click','#rbm_notactive_warning',function() {\r\n\t\t\t\tRVS.F.ajaxRequest('close_deregister_popup', {}, function(response){},undefined,undefined,undefined,true);\r\n\t\t\t});\r\n\t\t\tif (RVS.ENV.deregisterPopup) RVS.F.showDeactivatedWarning();\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.scrollToOvRegister = function() {\r\n\t\toverviewMenuScroll();\r\n\t\tvar o = { val:window.scroll_top};\r\n\t\ttpGS.gsap.to(o,0.6,{val:window.ov_scroll_targets[2].top-200, onUpdate:function() {\r\n\t\t\tRVS.WIN.scrollTop(o.val);\r\n\t\t}, ease:\"power3.out\"});\r\n\t\toverviewMenuScroll();\r\n\t}\r\n\r\n\tRVS.F.showDeactivatedWarning = function() {\r\n\t\t/* WARNING OF MISSING FUNCTIONS */\r\n\t\tRVS.F.RSDialog.create({modalid:'#rbm_notactive_warning', bgopacity:0.25});\r\n\t\tif (RVS.S.pwcandreg==undefined) {\r\n\t\t\tRVS.DOC.on('click','#pb_closeandregister',function() {\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t\tRVS.F.scrollToOvRegister();\r\n\t\t\t});\r\n\t\t\tRVS.DOC.on('click','#rbm_notactive_warning .rbm_close',function() {\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t});\r\n\t\t\tRVS.S.pwcandreg = true;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tRVS.F.getBackupList = function() {\r\n\t\tRVS.F.ajaxRequest('get_v5_slider_list', {}, function(response){\r\n\t\t\tif (response.success) {\r\n\t\t\t\tconsole.log(response.slider);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"Response Error\")\r\n\t\t\t}\r\n\t\t},false,false,undefined,true);\r\n\t\treturn \"Getting Slide List from Backup Database...\";\r\n\t}\r\n\r\n\tRVS.F.reImportBackup = function(id) {\r\n\r\n\t\tRVS.F.ajaxRequest('reimport_v5_slider', {id:id}, function(response){\r\n\t\t\tconsole.log(response);\r\n\t\t},false,false,undefined,true);\r\n\t\treturn \"Importing Slider \"+id+\" from the Backup Database...\";\r\n\t}\r\n\r\n\r\n\t// Set Objg Background\r\n\tRVS.F.setObjBg = function(_,imgobj) {\r\n\t\tvar\timgsrc = _.bg.src!==undefined && _.bg.src.length>3 ? _.bg.src : RVS.ENV.plugin_url+'admin/assets/images/sources/'+_.source+\".png\",\r\n\t\t\tstyl = _.bg.style!==undefined ? _.bg.style : {};\r\n\t\tif (Array.isArray(styl)) styl = RVS.F.toObject(styl);\r\n\r\n\t\tswitch (_.bg.type) {\r\n\t\t\tcase \"image\":\r\n\t\t\t\tif (styl!==undefined && styl.css!==undefined) styl.css.backgroundImage = \"url(\"+imgsrc+\")\"; else if (styl!==undefined) styl.backgroundImage = \"url(\"+imgsrc+\")\";\r\n\t\t\t\ttpGS.gsap.set(imgobj,styl);\r\n\t\t\tbreak;\r\n\t\t\tcase \"color\":\r\n\t\t\tcase \"colored\":\r\n\t\t\tcase \"solid\":\r\n\t\t\t\tvar colval = window.RSColor.get(styl[\"background-color\"]);\r\n\t\t\t\tif (colval.indexOf(\"gradient\")>=0)\r\n\t\t\t\t\ttpGS.gsap.set(imgobj,{backgroundImage:colval});\r\n\t\t\t\telse\r\n\t\t\t\t\ttpGS.gsap.set(imgobj,{backgroundColor:colval});\r\n\t\t\tbreak;\r\n\t\t\tcase \"transparent\":\r\n\t\t\t\ttpGS.gsap.set(imgobj,{backgroundImage:\"url(\"+RVS.ENV.plugin_url+'admin/assets/images/sources/'+_.source+\".png)\", backgroundRepeat:\"no-repeat\", backgroundSize:\"cover\"});\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// NOTIFCATION MESSAGES IN CASE THERE ARE ANY !\r\n\tRVS.F.notifications = function() {\r\n\t\tvar list = {0:\"\", 1:\"\", 2:\"\"},\r\n\t\t\thighest = 2,\r\n\t\t\tnotifier = jQuery('#rso_menu_notices'),\r\n\t\t\tnw = document.getElementById('rs_notices_wrapper'),\r\n\t\t\tbell = document.getElementById('rs_notice_bell'),\r\n\t\t\tbellcounter = document.getElementById('rs_notice_counter'),\r\n\t\t\tthebell = document.getElementById('rs_notice_the_bell'),\r\n\t\t\tdismiscodes = new Array();\r\n\r\n\r\n\t\tnw.innerHTML = \"\";\r\n\r\n\t\tRVS.ENV.notices = RVS.ENV.notices===undefined ? new Array() : RVS.ENV.notices;\r\n\t\tRVS.ENV.noticeCache = RVS.ENV.noticeCache===undefined ? RVS.ENV.notices.slice() : RVS.ENV.noticeCache;\r\n\r\n\t\tRVS.ENV.notices = RVS.ENV.noticeCache.slice();\r\n\r\n\t\t// NOT REGSITERED WARNINGS\r\n\t\tif (RVS.ENV.activated!==\"true\" && RVS.ENV.activated!==true) {\r\n\t\t\t//RVS.ENV.notices.push({function:\"registerPlugin\", additional:[], code:\"INTERN\", disable:true, icon:\"vpn_key\", is_global:false, text:RVS_LANG.notRegistered, type:1});\r\n\t\t\tRVS.ENV.notices.push({function:\"registerPlugin\", additional:[], code:\"INTERN\", disable:true, icon:\"style\", is_global:false, text:RVS_LANG.notRegNoAll, type:1});\r\n\t\t}\r\n\r\n\t\t//ADDONS MUST BE UPDATED\r\n\t\tif (RVS.ENV.addOns_to_updateArray!==undefined && RVS.ENV.addOns_to_updateArray.length>0) RVS.ENV.notices.push({function:\"checkAddOnVersions\", additional:[], code:\"INTERN\", disable:true, icon:\"extension\", is_global:false, text:RVS_LANG.addonsmustbeupdated, type:0});\r\n\r\n\t\t//UPDATE PLUGIN, NEW VERSION AVAILABLE\r\n\t\tif (RVS.F.compareVersion(RVS.ENV.latest_version, RVS.ENV.revision) > 0) RVS.ENV.notices.push({function:\"updatePluginNow\", additional:[], code:\"INTERN\", disable:true, icon:\"new_releases\", is_global:false, text:RVS_LANG.newVersionAvailable, type:1});\r\n\t\tif (RVS.F.createNotActivatedAddonsList().length>0) RVS.ENV.notices.push({function:\"fixMissingAddons\", additional:[], code:\"INTERN\", disable:true, icon:\"new_releases\", is_global:false, text:RVS_LANG.fixMissingAddons, type:1});\r\n\t\t//ANY ADDON TO UPDATE ?\r\n\t\tvar found = false;\r\n\r\n\t\tfor (var i in RVS.LIB.ADDONS) if (RVS.LIB.ADDONS.hasOwnProperty(i)) {\r\n\t\t\tif (found) continue;\r\n\t\t\tif (RVS.LIB.ADDONS[i].available>RVS.LIB.ADDONS[i].installed) {\r\n\t\t\t\tfound=true;\r\n\t\t\t\tRVS.ENV.notices.push({function:\"addonNotUptodate\",additional:[], code:\"INTERN\", disable:true, icon:\"extension\", is_global:false, text:RVS_LANG.someAddonnewVersionAvailable, type:1});\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar count = 0;\r\n\r\n        RVS.S.advert = RVS.S.advert===undefined ? [] : RVS.S.advert;\r\n\r\n\t\t//BUILD THE NOTICES\r\n\t\tfor (var i in RVS.ENV.notices) if (RVS.ENV.notices.hasOwnProperty(i)) {\r\n\t\t\tif (RVS.ENV.notices[i].type!==\"3\") count++;\r\n\t\t\tif (RVS.ENV.notices[i].type===\"2\") dismiscodes.push(RVS.ENV.notices[i].code)\r\n\t\t\tif (RVS.ENV.notices[i].type===\"3\") {\r\n                var hasalready = false;\r\n                for (var j in RVS.S.advert) if (RVS.S.advert.hasOwnProperty(j)) if (RVS.S.advert[j].code == RVS.ENV.notices[i].code) hasalready=true;\r\n                if (!hasalready) RVS.S.advert.push(RVS.F.safeExtend({},true,RVS.ENV.notices[i]));\r\n                continue;\r\n\t\t\t}\r\n\t\t\tvar func = RVS.ENV.notices[i].function!==undefined && RVS.ENV.notices[i].function.length>0? 'notification_function_'+RVS.ENV.notices[i].function : 'no_notification_function';\r\n\t\t\tlist[RVS.ENV.notices[i].type] += '<li data-code=\"'+RVS.ENV.notices[i].code+'\" class=\"'+func+' notice_level_'+RVS.ENV.notices[i].type+'\"><i class=\"material-icons\">'+RVS.ENV.notices[i].icon+'</i>'+RVS.ENV.notices[i].text+'</li>'\r\n\t\t\thighest = highest>parseInt(RVS.ENV.notices[i].type) ? parseInt(RVS.ENV.notices[i].type) : highest;\r\n\r\n\t\t}\r\n\t\tif (count>0) {\r\n\t\t\tnotifier.show();\r\n\t\t\tif (list[0].length>0) nw.innerHTML += list[0];\r\n\t\t\tif (list[1].length>0) nw.innerHTML += list[1];\r\n\t\t\tif (list[2].length>0) nw.innerHTML += list[2];\r\n\t\t\tbell.classList.remove(\"notice_level_1\");\r\n\t\t\tbell.classList.remove(\"notice_level_2\");\r\n\t\t\tbell.classList.remove(\"notice_level_3\");\r\n\r\n\t\t\tbellcounter.classList.remove(\"notice_level_1\");\r\n\t\t\tbellcounter.classList.remove(\"notice_level_2\");\r\n\t\t\tbellcounter.classList.remove(\"notice_level_3\");\r\n\r\n\t\t\tbell.className += \" notice_level_\"+highest;\r\n\t\t\tbellcounter.className += \" notice_level_\"+highest;\r\n\r\n\t\t\tbellcounter.innerHTML = count;\r\n\r\n\t\t\t// ADD DISMISS BUTTON IF NEEDED\r\n\t\t\tif (nw.innerHTML.length>0 && dismiscodes.length>0) nw.innerHTML += '<li id=\"remove_notifications\" class=\"notice_level_2\"><i class=\"material-icons\">close</i>'+RVS_LANG.dismissmessages+'</li>';\r\n\r\n\t\t\t// CHECK ADDON VERSIONS\r\n\t\t\tjQuery('.notification_function_checkAddOnVersions').on('click', checkAddOnVersions);\r\n\r\n\t\t\t// REGISTER PLUGIN\r\n\t\t\tjQuery('.notification_function_registerPlugin').on('click',function() {\r\n\t\t\t\tRVS.F.scrollToOvRegister();\r\n\t\t\t\t//RVS.F.showRegisterSliderInfo();\r\n\t\t\t});\r\n\r\n\t\t\t// INSTALL MISSING ADONS\r\n\t\t\tjQuery('.notification_function_fixMissingAddons').on('click',function() {\r\n\t\t\t\tRVS.F.handleAddonsWarning();\r\n\t\t\t});\r\n\r\n\t\t\t// ADDONS NOT UP TO DATE\r\n\t\t\tjQuery('.notification_function_addonNotUptodate').on('click',function() {\r\n\t\t\t\tRVS.S.addonPrefilter = \"action\";\r\n\t\t\t\tRVS.F.openAddonModal();\r\n\t\t\t});\r\n\r\n\t\t\t// UPDATE PLUGIN OUT OF NOTIFICATIONS\r\n\t\t\tjQuery('.notification_function_updatePluginNow').on('click',function() {\r\n\t\t\t\tif (RVS.ENV.activated===true) {\r\n\t\t\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\t\ticon:'update',\r\n\t\t\t\t\t\ttitle:RVS_LANG.updateplugin,\r\n\t\t\t\t\t\tmaintext:RVS_LANG.areyousureupdateplugin,\r\n\t\t\t\t\t\tsubtext:RVS_LANG.updatingtakes,\r\n\t\t\t\t\t\tdo:{\r\n\t\t\t\t\t\t\ticon:\"check_circle\",\r\n\t\t\t\t\t\t\ttext:RVS_LANG.updatenow,\r\n\t\t\t\t\t\t\tevent: \"updateThePlugin\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcancel:{\r\n\t\t\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\t\t\ttext:RVS_LANG.cancel\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tswapbuttons:true\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.F.showRegisterSliderInfo();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// DISMISS MESSAGES\r\n\t\t\tjQuery('#remove_notifications').on('click',function() {RVS.F.ajaxRequest('dismiss_dynamic_notice', {id:dismiscodes}, function(response){},false,false,undefined,true);});\r\n\r\n\t\t\tif (RVS.S.noticesListener===undefined) {\r\n\t\t\t\tRVS.S.noticesListener  =true;\r\n\t\t\t\tvar bellTL = tpGS.gsap.timeline({repeat:-1});\r\n\t\t\t\ttpGS.CustomWiggle.create(\"myWiggle\", {\r\n\t\t\t\t  wiggles: 8,\r\n\t\t\t\t  type:\"uniform\",\r\n\t\t\t\t});\r\n\r\n\t\t\t\tbellTL.add(tpGS.gsap.to('#rs_notice_the_bell', 0.5, {\r\n\t\t\t\t  transformOrigin:\"50% 0%\",\r\n\t\t\t\t  x: 5,\r\n\t\t\t\t  rotationZ:10,\r\n\t\t\t\t  ease: \"myWiggle\",\r\n\t\t\t\t  onComplete:function() {\r\n\t\t\t\t  \tthebell.innerHTML = \"notifications\";\r\n\t\t\t\t  },\r\n\t\t\t\t  onStart:function() {\r\n\t\t\t\t  \tthebell.innerHTML = \"notifications_active\";\r\n\t\t\t\t  }\r\n\t\t\t\t}),2);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tnotifier.hide();\r\n\t\t}\r\n\r\n\t\t// CHECK TYPE 3 (ADVERT) NOTICES\r\n\t\tif (RVS.S.advert!==undefined && RVS.S.advert.length>0) {\r\n\r\n\t\t\tfor (var ai in RVS.S.advert) {\r\n\t\t\t\tRVS.S.advert[ai].id = RVS.S.advert[ai].id===undefined ? \"rs_advert_\"+Math.round(Math.random()*10000000) : RVS.S.advert[ai].id;\r\n\t\t\t\tif (RVS.S.advert[ai].container!==null && RVS.S.advert[ai].container!==undefined) continue;\r\n\r\n\t\t\t\tjQuery('#rs_welcome_h3').after('<div style=\"display:block;position:relative;\" id=\"'+RVS.S.advert[ai].id+'\"></div>');\r\n\t\t\t\tRVS.S.advert[ai].container = document.getElementById(RVS.S.advert[ai].id);\r\n\t\t\t\tRVS.S.advert[ai].container.innerHTML = RVS.S.advert[ai].text;\r\n\t\t\t\tRVS.S.advert[ai].mwrap = RVS.S.advert[ai].container.getElementsByTagName('RS-MODULE-WRAP');\r\n\t\t\t\tif (RVS.S.advert[ai].mwrap[0]===undefined) RVS.S.advert[ai].mwrap = RVS.S.advert[ai].container;\r\n\t\t\t\tjQuery(RVS.S.advert[ai].mwrap).append('<div id=\"rs_close_advert_'+ai+'\" data-ai=\"'+ai+'\" class=\"rs_close_advert\" ><i class=\"material-icons\">close</i>'+RVS_LANG.closeNews+'</div>');\r\n\t\t\t\tRVS.S.advert[ai].revmodule = RVS.S.advert[ai].container.getElementsByTagName('RS-MODULE')[0];\r\n\r\n\t\t\t\tif (RVS.S.advert[ai].revmodule!==undefined) {\r\n\t\t\t\t\tRVS.S.advert[ai].rsoptions = JSON.parse(RVS.S.advert[ai].script);\r\n\t\t\t\t\tjQuery('#'+RVS.S.advert[ai].revmodule.id).show().revolutionInit(RVS.S.advert[ai].rsoptions);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.S.advert[ai].mwrap.style.marginTop = \"50px\";\r\n\t\t\t\t}\r\n\t\t\t\ttpGS.gsap.fromTo(jQuery('#rs_close_advert_'+ai),1,{opacity:0},{opacity:1,delay:2});\r\n\t\t\t\ttpGS.gsap.set(RVS.S.advert[ai].mwrap,{boxShadow: \"0px 0px 0px 0px rgba(0,0,0,0.2)\"});\r\n\t\t\t\ttpGS.gsap.to(RVS.S.advert[ai].mwrap,1,{boxShadow: \"0px 0px 20px 10px rgba(0,0,0,0.2)\",delay:2});\r\n\r\n\t\t\t\tjQuery('#rs_close_advert_'+ai).on('click',function() {\r\n\t\t\t\t\ttpGS.gsap.to(RVS.S.advert[this.dataset.ai].mwrap,1,{marginTop:0,marginBottom:0,overflow:\"hidden\",height:0,ease:\"power3.inOut\",onComplete:function() {\r\n\t\t\t\t\t\tRVS.S.advert[this.dataset.ai].container.innerHTML = \"\";\r\n\t\t\t\t\t}});\r\n\t\t\t\t\ttpGS.gsap.to(RVS.S.advert[this.dataset.ai].container,1,{autoAlpha:0});\r\n\t\t\t\t\tvar dismiscodes = new Array();\r\n\t\t\t\t\tdismiscodes.push(RVS.S.advert[this.dataset.ai].code)\r\n\t\t\t\t\tRVS.F.ajaxRequest('dismiss_dynamic_notice', {id:dismiscodes}, function(response){},false,false,undefined,true);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.welcome = function() {\r\n\t\tRVS.F.dontShowTracking = true;\r\n\t\tRVS.F.RSDialog.create({modalid:'rbm_welcomeModal', bgopacity:0.85});\r\n\t\tjQuery('#rbm_welcomeModal .rbm_close').on('click',RVS.F.RSDialog.close);\r\n\t\tif (RVS.ENV.activated)\r\n\t\t\tjQuery('#open_welcome_register_form').on('click',RVS.F.RSDialog.close);\r\n\t\telse\r\n\t\t\tjQuery('#open_welcome_register_form').on('click',RVS.F.showRegisterSliderInfo);\r\n\t}\r\n\r\n\tRVS.F.changeOVToFolder = function(folder) {\r\n\t\tsliderLibrary.selectedFolder = folder;\r\n\t\tresetAllOVFilters();\r\n\t\tupdateOVFilteredList();\r\n\t}\r\n\r\n\t/*\r\n\tGET SLIDER INDEX\r\n\t*/\r\n\tRVS.F.getOVSliderIndex = function(id) {\r\n\t\tvar ret = -1;\r\n\t\t//id = parseInt(id,0);\r\n\t\tfor (var i in sliderLibrary.sliders) {\r\n\t\t\tif(!sliderLibrary.sliders.hasOwnProperty(i)) continue;\r\n\t\t\tif (sliderLibrary.sliders[i].id == id) ret = i;\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n\r\n\t/*\r\n\tGET SLIDE INDEX\r\n\t*/\r\n\tRVS.F.getOVSlideIndex = function(slideid,sliderid) {\r\n\t\tvar ret = -1;\r\n\r\n\t\t//id = parseInt(id,0);\r\n\t\tfor (var i in sliderLibrary.slides[sliderid]) {\r\n\t\t\tif(!sliderLibrary.slides[sliderid].hasOwnProperty(i)) continue;\r\n\t\t\tif (\"\"+sliderLibrary.slides[sliderid][i].id === \"\"+slideid) ret = i;\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n\r\n\r\n\t// CHECK IF UPDATED NEEDED\r\n\tRVS.F.updateDraw = function() {\r\n\t\tif (RVS.F.compareVersion(RVS.ENV.latest_version, RVS.ENV.revision) > 0){\r\n\t\t\tjQuery('#available_version_icon').addClass(\"warning\");\r\n\t\t\tjQuery('#available_version_content').addClass(\"warning\");\r\n\t\t\t//jQuery('#rso_menu_updatewarning').show();\r\n\t\t} else {\r\n\t\t\tjQuery('#available_version_icon').removeClass(\"warning\");\r\n\t\t\tjQuery('#available_version_content').removeClass(\"warning\");\r\n\t\t\t//jQuery('#rso_menu_updatewarning').hide();\r\n\t\t}\r\n\t};\r\n\r\n\t//REDRAW ACTIVATED ELEMENTS\r\n\tRVS.F.isActivated = function() {\r\n\t\tif (RVS.ENV.activated==\"true\" || RVS.ENV.activated==true) {\r\n\t\t\tjQuery('#rs_register_to_unlock').text(RVS_LANG.premium_features_unlocked);\r\n\t\t\tjQuery('#purchasekey').val(RVS.ENV.code);\r\n\r\n\r\n\t\t\tif (RVS.ENV.allow_update)\r\n\t\t\t\tjQuery('#updateplugin').removeClass(\"halfdisabled\").text(RVS_LANG.securityupdate);\r\n\t\t\telse\r\n\t\t\t\tjQuery('#updateplugin').removeClass(\"halfdisabled\").text(RVS_LANG.updateNow);\r\n\t\t\tjQuery('#activated_ornot_box').removeClass(\"not_activated\").html('<i class=\"material-icons\">done</i>'+RVS_LANG.registered);\r\n\t\t\tif (RVS.ENV.selling) jQuery('#activateplugin').text(RVS_LANG.deregisterKey); else jQuery('#activateplugin').text(RVS_LANG.deregisterCode);\r\n\t\t\tif (RVS.ENV.selling) jQuery('#activateplugintitle').text(RVS_LANG.registeredlicensekey); else jQuery('#activateplugintitle').text(RVS_LANG.registeredpurchasecode);\r\n\r\n\t\t\tjQuery('#purchasekey_wrap').addClass(\"activated\");\r\n\t\t\tjQuery('.activate_to_unlock').hide();\r\n\t\t\tjQuery('#buynow_notregistered').hide();\r\n\r\n\t\t\t// CHECK SELLING AND ACTIVATION\r\n\t\t\t/*if (RVS.ENV.selling) {\r\n\t\t\t\ttpGS.gsap.to('#rs_memarea',1,{opacity:0,display:\"none\",ease:\"power3.inOut\"});\r\n\t\t\t\ttpGS.gsap.fromTo('#rs_memarea_registered',1,{autoAlpha:0,display:\"block\"},{autoAlpha:1, display:\"block\",ease:\"power3.inOut\"});\r\n\t\t\t}*/\r\n\r\n\t\t} else {\r\n\t\t\tjQuery('#rs_register_to_unlock').text(RVS_LANG.register_to_unlock);\r\n\t\t\tjQuery('#purchasekey').val();\r\n\t\t\tif (RVS.ENV.allow_update)\r\n\t\t\t\tjQuery('#updateplugin').removeClass(\"halfdisabled\").text(RVS_LANG.securityupdate);\r\n\t\t\telse\r\n\t\t\t\tjQuery('#updateplugin').addClass(\"halfdisabled\").text(RVS_LANG.activateToUpdate);\r\n\t\t\tjQuery('#activated_ornot_box').addClass(\"not_activated\").html('<i class=\"material-icons\">do_not_disturb</i>'+RVS_LANG.notRegisteredNow);\r\n\t\t\tif (RVS.ENV.selling) jQuery('#activateplugin').text(RVS_LANG.registerKey); else jQuery('#activateplugin').text(RVS_LANG.registerCode);\r\n\t\t\tif (RVS.ENV.selling) jQuery('#activateplugintitle').text(RVS_LANG.registerlicensekey); else jQuery('#activateplugintitle').text(RVS_LANG.registerpurchasecode);\r\n\t\t\tjQuery('#purchasekey_wrap').removeClass(\"activated\");\r\n\t\t\tjQuery('.activate_to_unlock').show();\r\n\t\t\tjQuery('#buynow_notregistered').show();\r\n\t\t\t/*if (RVS.ENV.selling) {\r\n\t\t\t\ttpGS.gsap.fromTo('#rs_memarea',1,{autoAlpha:0,display:\"block\"},{autoAlpha:1, display:\"block\",ease:\"power3.inOut\"});\r\n\t\t\t\ttpGS.gsap.to('#rs_memarea_registered',1,{opacity:0,display:\"none\",ease:\"power3.inOut\"});\r\n\t\t\t}*/\r\n\t\t}\r\n\t\tif(RVS.F.compareVersion(RVS.ENV.latest_version, RVS.ENV.revision) <= 0 && RVS.ENV.allow_update!==true)\r\n\t\t\tjQuery('#updateplugin').hide()\r\n\t\telse\r\n\t\t\tjQuery('#updateplugin').show();\r\n\t};\r\n\r\n\tRVS.F.createNewFolder = function(_) {\r\n\t\thideElementSubMenu({keepOverlay:false});\r\n\t\tvar csfobj = _!==undefined && _.foldername!==undefined ? {title:_.foldername} : {};\r\n\t\tif (sliderLibrary.selectedFolder!==-1) csfobj.parentFolder = sliderLibrary.selectedFolder;\r\n\r\n\t\t RVS.F.ajaxRequest('create_slider_folder', csfobj, function(response){\r\n\r\n\t\t \tresponse.folder.parent = sliderLibrary.selectedFolder;\r\n\t\t \tif (sliderLibrary.selectedFolder!==-1) sliderLibrary.sliders[RVS.F.getOVSliderIndex(sliderLibrary.selectedFolder)].children.push(response.folder.id);\r\n\r\n\t\t \tif (response.success) sliderLibrary.sliders.push(response.folder);\r\n\r\n\t\t \tresetAllOVFilters();\r\n\r\n\t\t \tif (_!==undefined && _.enter) {\r\n\t\t \t\tsliderLibrary.selectedFolder = response.folder.id;\r\n\t\t \t\tsliderLibrary.filters = buildModuleFilters();\r\n\t\t \t} else {\r\n\t\t \t\tsliderLibrary.filters = buildModuleFilters();\r\n\t\t    \tjQuery('#slider_id_'+response.folder.id).addClass(\"selected\");\r\n\t\t    }\r\n\r\n\t\t    if (response.success && _!==undefined && _.callBack!==undefined) RVS.DOC.trigger(_.callBack,_.callBackParam);\r\n        });\r\n\t};\r\n\r\n\tvar addCustomFontInputFiels = function(i) {\r\n\t\tvar s= '<div id=\"global_custom_font_row_'+i+'\" class=\"global_custom_font_row\">';\r\n\t\t\ts+= '<input type=\"text\" style=\"width:180px; margin-right:20px;\" data-r=\"globals.customFontList.'+i+'.family\" class=\"easyinit globalinput\" placeholder=\"ie. font-family-name\">';\r\n\t\t\ts+= '<input type=\"text\" data-r=\"globals.customFontList.'+i+'.url\" style=\"width:180px; margin-right:20px;\" class=\"easyinit globalinput\" placeholder=\"ie. https://customfont.css\">';\r\n\t\t\ts+= '<input type=\"text\" style=\"width:180px; margin-right:20px;\" data-r=\"globals.customFontList.'+i+'.weights\" class=\"easyinit globalinput\" placeholder=\"ie. 400,600,800\">';\r\n\t\t\ts+= '<div style=\"width:75px;margin-left:10px;display:inline-block\"><input type=\"checkbox\" class=\"easyinit globalinput\" data-r=\"globals.customFontList.'+i+'.frontend\"></div>';\r\n\t\t\ts+= '<div style=\"width:75px;display:inline-block\"><input type=\"checkbox\" class=\"easyinit globalinput\" data-r=\"globals.customFontList.'+i+'.backend\"></div>';\r\n\t\t\ts+='<div data-todelete=\"'+i+'\" class=\"deletecustomglobalfont basic_action_button onlyicon \"><i class=\"material-icons\">delete</i></div>';\r\n\t\t\ts+= '</div>';\r\n\t\treturn s;\r\n\t}\r\n\r\n\tvar rebuildCustomFontList = function() {\r\n\t\tvar i,s=\"\";\r\n\t\tRVS.S.glob_cus_fonts = RVS.S.glob_cus_fonts===undefined ? jQuery('#global_custom_fonts') : RVS.S.glob_cus_fonts;\r\n\t\tfor (i=0;i<RVS.SLIDER.globals.customFontList.length;i++) {\r\n\t\t\ts += addCustomFontInputFiels(i);\r\n\t\t}\r\n\t\tRVS.S.glob_cus_fonts[0].innerHTML = s;\r\n\t\tRVS.C.rbgf = RVS.C.rbgf === undefined ? jQuery('#rbm_globalfontsettings') : RVS.C.rbgf;\r\n\t\tRVS.F.initOnOff(RVS.C.rbgf);\r\n\t\tRVS.F.updateEasyInputs({container:RVS.C.rbgf, path:\"\", trigger:\"init\"});\r\n\t},\r\n\r\n\t\t/*OPEND GLOABAL SETTINGS*/\r\n\topenGlobalSettings = function() {\r\n\r\n\t\tif (!window.initGlobalSettings) {\r\n\t\t\tRVS.C.rbgf = RVS.C.rbgf === undefined ? jQuery('#rbm_globalfontsettings') : RVS.C.rbgf;\r\n\t\t\tRVS.C.rbgs = RVS.C.rbgs === undefined ? jQuery('#rbm_globalsettings') : RVS.C.rbgs;\r\n\t\t\tRVS.F.initOnOff(RVS.C.rbgs);\r\n\t\t\twindow.revbuilder = window.revbuilder===undefined ? {} : window.revbuilder;\r\n\t\t\tRVS.SLIDER = RVS.SLIDER===undefined ? {} : RVS.SLIDER;\r\n\t\t\t//LOAD GLOBAL AJAX OPTIONS\r\n\t\t\tRVS.F.ajaxRequest('get_global_settings', {}, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tRVS.SLIDER.globals = getNewGlobalObject(response.global_settings);\r\n\t\t\t\t\twindow.initGlobalSettings = true;\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:RVS.C.rbgs, path:\"\", trigger:\"init\"});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('click','.deletecustomglobalfont',function(e){\r\n\t\t\t\tRVS.SLIDER.globals.customFontList.splice(this.dataset.todelete,1);\r\n\t\t\t\trebuildCustomFontList();\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('click','#add_new_custom_font',function() {\r\n\t\t\t\tif (RVS.SLIDER.globals.customFontList.length<9) {\r\n\t\t\t\t\tRVS.S.glob_cus_fonts[0].innerHTML +=addCustomFontInputFiels(RVS.SLIDER.globals.customFontList.length);\r\n\t\t\t\t\tRVS.SLIDER.globals.customFontList.push({family:\"\",url:\"\",frontend:false,backend:true,weights:\"200,300,400,500,600,700,800,900\"});\r\n\t\t\t\t\tRVS.F.initOnOff(RVS.C.rbgf);\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:RVS.C.rbgf, path:\"\", trigger:\"init\"});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// MANAGE CUSTOM FONTS\r\n\t\t\tRVS.DOC.on('click','#rs_gl_custom_fonts',function() {\r\n\t\t\t\trebuildCustomFontList();\r\n\t\t\t\tRVS.F.RSDialog.create({modalid:'rbm_globalfontsettings', bgopacity:0.85});\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('click','#rbm_globalfontsettings .rbm_close',function() {\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t});\r\n\r\n\t\t\t//SAVE GLOBAL AJAX\r\n\t\t\tjQuery('#rbm_globalsettings_savebtn').off('click').on('click', function() {\r\n\t\t\t\tRVS.F.ajaxRequest('update_global_settings', {global_settings:RVS.SLIDER.globals}, function(response){\r\n\t\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tjQuery('#add_custom_global_fonts').off('click').on('click',function() {\r\n\t\t\t\tRVS.SLIDER.globals.customfonts[RVS.SLIDER.globals.customfonts.length] = \"\";\r\n\t\t\t\tjQuery('#general_custom_fonts_list').append('<label_a></label_a><input type=\"text\" class=\"easyinit globalinput\" data-r=\"globals.customfonts.'+(RVS.SLIDER.globals.customfonts.length-1)+'\" placeholder=\"font-family, style1, style2\"><span class=\"linebreak\"></span>');\r\n\r\n\t\t\t});\r\n\r\n\r\n\t\t\t//CALL RS DB CREATION\r\n\t\t}\r\n\t\tRVS.F.RSDialog.create({modalid:'rbm_globalsettings', bgopacity:0.85});\r\n\t},\r\n\r\n\t// RESET AND INIT 2NDARY FUNCTIONS\r\n\tinitBasics = function() {\r\n\t\tjQuery('#newsletter_mail').val(\"\");\r\n\t\ttpGS.gsap.set('.plugin_inforow',{autoAlpha:0});\r\n\t\tinitFeatureSliders();\r\n\t},\r\n\r\n\t// INIT FEATURE SLIDERS\r\n\tinitFeatureSliders = function() {\r\n\t\tjQuery(\".feature_slider\").each(function() {\r\n\t\t\tjQuery(this).show().revolutionInit({\r\n\t\t\t\tjsliderType:\"hero\",\r\n\t\t\t\tvisibilityLevels:\"9999,9999,9999,9999\",\r\n\t\t\t\tgridwidth:380,\r\n\t\t\t\tgridheight:430,\r\n\t\t\t\tperspective:600,\r\n\t\t\t\tperspectiveType:\"global\",\r\n\t\t\t\tlazyloaddata:\"lazy-src\",\r\n\t\t\t\teditorheight:\"330\",\r\n\t\t\t\tresponsiveLevels:\"9999,9999,9999,9999\",\r\n\t\t\t\tprogressBar:{disableProgressBar:true},\r\n\t\t\t\tnavigation: {\r\n\t\t\t\t\tonHoverStop:false\r\n\t\t\t\t},\r\n\t\t\t\tviewPort: {\r\n\t\t\t\t\tenable:true\r\n\t\t\t\t},\r\n\t\t\t\tfallbacks: {\r\n\t\t\t\t\tallowHTML5AutoPlayOnAndroid:true\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\t// DRAW AN OVERVIEW LIST WITH PRESELECTED FILTERS AND SIZES\r\n\tdrawOVOverview = function(_) {\r\n\t\t_ = _ === undefined ? {noanimation:false} : _;\r\n\r\n\t\tvar container = sliderLibrary.output.find('.overview_elements');\r\n\r\n\t\tcontainer.find('.rsl_breadcrumb_wrap').remove();\r\n\t\tif (sliderLibrary.selectedFolder!==-1 || sliderLibrary.inSlideMode) {\r\n\t\t\tvar bread = '<div class=\"rsl_breadcrumb_wrap\">';\r\n\t\t\tbread += '<div class=\"rsl_breadcrumb\" data-folderid=\"-1\"><i class=\"material-icons\">apps</i>'+RVS_LANG.simproot+'</div>';\r\n\t\t\tbread += '<i class=\"rsl_breadcrumb_div material-icons\">keyboard_arrow_right</i>';\r\n\t\t\tif (sliderLibrary.selectedFolder!==-1) {\r\n\t\t\t\tvar folderlist = '';\r\n\t\t\t\tvar pd = sliderLibrary.selectedFolder;\r\n\t\t\t\twhile (pd !== -1) {\r\n\t\t\t\t\tvar sindex = RVS.F.getOVSliderIndex(pd);\r\n\t\t\t\t\tfolderlist = '<div class=\"rsl_breadcrumb\" data-folderid=\"'+pd+'\"><i class=\"material-icons\">folder_open</i>'+sliderLibrary.sliders[sindex].title+'</div>' + '<i class=\"rsl_breadcrumb_div material-icons\">keyboard_arrow_right</i>' + folderlist;\r\n\t\t\t\t\tpd = sliderLibrary.sliders[sindex].parent || -1;\r\n\t\t\t\t}\r\n\t\t\t\tbread += folderlist;\r\n\t\t\t}\r\n\t\t\tif (sliderLibrary.inSlideMode) bread += '<div class=\"rsl_breadcrumb\" data-folderid=\"'+sliderLibrary.sliders[RVS.F.getOVSliderIndex(sliderLibrary.selectedSlider)].parent+'\"><i class=\"material-icons\">burst_mode</i>'+sliderLibrary.sliders[RVS.F.getOVSliderIndex(sliderLibrary.selectedSlider)].title+'</div><i class=\"rsl_breadcrumb_div material-icons\">keyboard_arrow_right</i>';\r\n\t\t\tbread += '<div id=\"rsl_bread_selected\" class=\"rsl_breadcrumb\"></div>';\r\n\t\t\tbread += '</div>';\r\n\r\n\t\t\tcontainer.append(bread);\r\n\t\t}\r\n\r\n\t\tif (sliderLibrary.inSlideMode) {\r\n\r\n\t\t}\r\n\r\n\t\tif (sliderLibrary.selectedFolder!=-1 || sliderLibrary.inSlideMode)\r\n\t\t\tsliderLibrary.backOneLevel.appendTo(container);\r\n\t\telse\r\n\t\t\tsliderLibrary.backOneLevel.detach();\r\n\r\n\t\tvar d = 0;\r\n\t\tif (sliderLibrary.inSlideMode!==true)\r\n\t\t\tfor (var i in sliderLibrary.sliders) {\r\n\t\t\t\tif(!sliderLibrary.sliders.hasOwnProperty(i)) continue;\r\n\t\t\t\tvar slideobj = sliderLibrary.sliders[i];\r\n\t\t\t\tif (sliderLibrary.pages===undefined || jQuery.inArray(slideobj.id,sliderLibrary.pages[sliderLibrary.selectedPage-1])>=0) {\r\n\t\t\t\t\td++;\r\n\t\t\t\t\tif ( slideobj.ref!==undefined && slideobj.folder) slideobj.ref.remove();\r\n\t\t\t\t\tif (slideobj.slide_id===0 && slideobj.folder===true) slideobj.slide_id = Math.round(Math.random()*100000000); // DUPLICATED SLIDE ID ISSUES\r\n\t\t\t\t\tslideobj.ref = slideobj.ref===undefined || slideobj.folder ? buildOVElement(slideobj) : slideobj.ref;\r\n\t\t\t\t\tif (!_.noanimation)\r\n\t\t\t\t\ttpGS.gsap.fromTo(slideobj.ref,0.4,{autoAlpha:0,scale:0.8,transformOrigin:\"50% 50%\", force3D:true},{scale:1,autoAlpha:1,ease:\"power3.inOut\",delay:d*0.02});\r\n\t\t\t\t\tslideobj.ref.appendTo(container);\r\n\t\t\t\t\tdoOVDraggable(slideobj.ref);\r\n\t\t\t\t} else\r\n\t\t\t\tif (slideobj.ref!==undefined) slideobj.ref.detach();\r\n\t\t\t}\r\n\t\telse {\r\n\t\t\tcontainer.find('.rs_library_element').detach();\r\n\t\t\ttpGS.gsap.to('#modulesoverviewheader, #modulesoverviewfooter',0.5,{autoAlpha:0,opacity:0,ease:\"power3.inOut\"});\r\n\t\t\tvar order = 1;\r\n\t\t\tfor (var i in sliderLibrary.slidesOrder[sliderLibrary.selectedSlider]) if (sliderLibrary.slidesOrder[sliderLibrary.selectedSlider].hasOwnProperty(i)) {\r\n\t\t\t\tvar sindex = sliderLibrary.slidesOrder[sliderLibrary.selectedSlider][i];\r\n\t\t\t\tif (sindex===undefined) continue;\r\n\t\t\t\tif(!sliderLibrary.slides[sliderLibrary.selectedSlider].hasOwnProperty(sindex)) continue;\r\n\t\t\t\tvar slideobj = sliderLibrary.slides[sliderLibrary.selectedSlider][sindex];\r\n\t\t\t\td++;\r\n\t\t\t\tvar sliderobj = getSliderObjFromList(sliderLibrary.selectedSlider);\r\n\t\t\t\tslideobj.ref = slideobj.ref===undefined ? buildOVElement({premium:sliderobj!==undefined ? sliderobj.premium : undefined, order:order, title:slideobj.title, bg:slideobj.customAdminThumbSrc, id:sliderLibrary.selectedSlider, slide_id:slideobj.id, type:\"slide\", state:slideobj.state}) : slideobj.ref;\r\n\t\t\t\tslideobj.ref.appendTo(container);\r\n\t\t\t\torder++;\r\n\t\t\t\tif (!_.noanimation) tpGS.gsap.fromTo(slideobj.ref,0.4,{autoAlpha:0,scale:0.8,transformOrigin:\"50% 50%\", force3D:true},{scale:1,autoAlpha:1,ease:\"power3.inOut\",delay:d*0.02});\r\n\t\t\t}\r\n\t\t\tdoOVSortable(container);\r\n\t\t}\r\n\t\toverviewMenuScroll();\r\n\t},\r\n\r\n    getSliderObjFromList = function(id) {\r\n        var found;\r\n        for (var i in sliderLibrary.sliders) {\r\n            if (found!==undefined || !sliderLibrary.sliders.hasOwnProperty(i)) continue;\r\n            if ((\"\"+sliderLibrary.sliders[i].id) == (\"\"+id)) {\r\n                found = sliderLibrary.sliders[i];\r\n            }\r\n        }\r\n        return found;\r\n    },\r\n\r\n\t// BUILD ONE SINGLE ELEMENT IN THE OVERVIEW\r\n\tbuildOVElement = function(_,withouttoolbar) {\r\n\t\tvar folderclass = _.folder ? \"folder_library_element\" : \"\",\r\n\t\t\timgobjunder = jQuery('<div class=\"image_container_underlay\"></div>'),\r\n            premium = _.premium ? '<div class=\"rs_lib_premium_wrap\"><div class=\"rs_lib_premium_lila\">'+RVS_LANG.premium+'</div><div class=\"rs_lib_premium_red\"><i class=\"material-icons\">visibility_off</i>'+RVS_LANG.premium+'</div><div class=\"rs_lib_premium_red_hover\"><i class=\"material-icons\">visibility_off</i>'+RVS_LANG.premiumunlock+'</div></div>' : ''\r\n\t\t\tobj = !withouttoolbar ?\r\n                jQuery('<div data-itemtype=\"'+_.type+'\" data-sliderid=\"'+_.id+'\" id=\"slider_id_'+_.id+'\" data-slideid=\"slide_id_'+_.slide_id+'\" class=\"'+(_.state===\"unpublished\" ? \"unpublished\" : \"\")+'  rs_library_element '+folderclass+'\">'+premium+'<div class=\"rsle_footer\">'+(_.type===\"slide\" ? '<div id=\"slide_order_number'+_.slide_id+'\" class=\"slide_order_number\">#'+_.order+'</div>' : '')+'<div class=\"rs_library_el_next\"></div><input data-id=\"'+_.id+'\" data-slideid=\"'+_.slide_id+'\" id=\"slider_title_'+_.slide_id+'\" class=\"title_container '+(_.type===\"slide\" ? 'slide_with_number' : '')+'\" value=\"'+_.title+'\"\"><i class=\"material-icons iconofunpublished\">visibility_off</i><i class=\"show_rsle material-icons\">arrow_drop_down</i></div></div>')\r\n                : jQuery('<div data-itemtype=\"'+_.type+'\" data-sliderid=\"'+_.id+'\" data-slideid=\"'+_.slide_id+'\" class=\"folder_in_list rs_library_element '+folderclass+'\">'+premium+'<div class=\"rsle_footer\"><input class=\"title_container\" value=\"'+_.title+'\"\"><i class=\"show_rsle material-icons\">keyboard_arrow_down</i></div></div>');\r\n\r\n\t\t// ADD IMAGE UNDERLAY\r\n\t\tobj.append(imgobjunder);\r\n\t\t// ADD TOOLBAR\r\n\t\tif (!withouttoolbar) {\r\n\t\t\tvar toolbar = '<div class=\"rsle_tbar\">',\r\n\t\t\t\tlinkobj = _.folder ? jQuery('<div class=\"link_to_slideadmin enter_into_folder\" data-info=\"'+RVS_LANG.openFolder+'\"  data-folderid=\"'+_.id+'\"></div>') : jQuery('<div class=\"link_to_slideadmin '+(_.type!==\"slide\" &&  _.slide_ids.length>1 ? \"pull_icon_left\" : \"\")+'\" data-title=\"'+_.title+'\" data-info=\"'+RVS_LANG.openInEditor+'\"><div class=\"link_to_quickeditor\" data-info=\"'+RVS_LANG.openQuickEditor+'\"><i class=\"material-icons\">text_format</i></div><div class=\"link_to_quickstyleeditor\" data-info=\"'+RVS_LANG.openQuickStyleEditor+'\"><i class=\"material-icons\">style</i></div><a class=\"link_to_slideadmin_a\" data-title=\"'+_.title+'\" data-info=\"'+RVS_LANG.openInEditor+'\" href=\"'+RVS.ENV.admin_url+'?id='+_.slide_id+'\"><i class=\"material-icons\">edit</i></a></div>'),\r\n\t\t\t\tslidelinkobj = _.folder || _.type===\"slide\" || _.slide_ids.length<2 ? \"\" : jQuery('<div class=\"link_to_slides_overview\" data-info=\"'+RVS_LANG.showSlides+'\" data-title=\"'+_.title+'\" data-id=\"'+_.id+'\"><i class=\"material-icons\">burst_mode</i></div>');\r\n\r\n\t\t\tif (_.type!==\"slide\") toolbar += '<div class=\"rsle_tool embedslider\" data-id=\"'+_.id+'\"><i class=\"material-icons\">add_to_queue</i><span class=\"rsle_ttitle\">'+RVS_LANG.embed+'</span></div>';\r\n\t\t\tif (_.type!==\"slide\") toolbar += '<div class=\"rsle_tool exportslider\" data-id=\"'+_.id+'\" ><i class=\"material-icons\">file_download</i><span class=\"rsle_ttitle\">'+RVS_LANG.export+'</span></div>';\r\n\t\t\tif (_.type!==\"slide\") toolbar += '<div class=\"rsle_tool exporthtmlslider\" data-id=\"'+_.id+'\" ><i class=\"material-icons\">code</i><span class=\"rsle_ttitle\">'+RVS_LANG.exporthtml+'</span></div>';\r\n\r\n\t\t\tif (_.type!==\"slide\") toolbar += '<div class=\"rsle_tool duplicateslider\" data-id=\"'+_.id+'\" ><i class=\"material-icons\">content_copy</i><span class=\"rsle_ttitle\">'+RVS_LANG.duplicate+'</span></div>';\r\n\t\t\tif (_.type!==\"slide\") toolbar += '<div class=\"rsle_tool previewslider\" data-title=\"'+_.title+'\" data-id=\"'+_.id+'\" ><i class=\"material-icons\">search</i><span class=\"rsle_ttitle\">'+RVS_LANG.preview+'</span></div>';\r\n\t\t\tif (_.type!==\"slide\") toolbar += '<div class=\"rsle_tool tagsslider\" data-id=\"'+_.id+'\" ><i class=\"material-icons\">local_offer</i><span class=\"rsle_ttitle\">'+RVS_LANG.tags+'</span></div>';\r\n\t\t\ttoolbar += '<div class=\"rsle_tool renameslider\" data-id=\"'+_.id+'\" ><i class=\"material-icons\">title</i><span class=\"rsle_ttitle\">'+RVS_LANG.rename+'</span></div>';\r\n\t\t\tif (_.type===\"slide\") toolbar += '<div class=\"rsle_tool publishslide\" data-id=\"'+_.id+'\" data-slideid=\"'+_.slide_id+'\" ><i class=\"material-icons\">visibility</i><span class=\"rsle_ttitle\">'+RVS_LANG.publish+'</span></div>';\r\n\t\t\tif (_.type===\"slide\") toolbar += '<div class=\"rsle_tool unpublishslide\" data-id=\"'+_.id+'\" data-slideid=\"'+_.slide_id+'\"><i class=\"material-icons\">visibility_off</i><span class=\"rsle_ttitle\">'+RVS_LANG.unpublish+'</span></div>';\r\n\t\t\tif (_.type===\"slide\") toolbar += '<div class=\"rsle_tool duplicateslide\" data-id=\"'+_.id+'\" data-slideid=\"'+_.slide_id+'\"><i class=\"material-icons\">content_copy</i><span class=\"rsle_ttitle\">'+RVS_LANG.duplicate+'</span></div>';\r\n\t\t\tif (_.type===\"slide\") toolbar += '<div class=\"rsle_tool deleteslider\" data-id=\"'+_.id+'\" data-slideid=\"'+_.slide_id+'\"><i class=\"material-icons\">delete</i><span class=\"rsle_ttitle\">'+RVS_LANG.delete+'</span></div>';\r\n\t\t\tif (!_.folder) toolbar += '<div class=\"rsle_tool adminthumb\" data-id=\"'+_.id+'\" data-slideid=\"'+_.slide_id+'\" ><i class=\"material-icons\">photo</i><span class=\"rsle_ttitle\">'+RVS_LANG.thumbnail+'</span></div>';\r\n\t\t\tif (_.type!==\"slide\" && !_.folder) toolbar += '<div class=\"rsle_tool optimizeslider\" data-id=\"'+_.id+'\" ><i class=\"material-icons\">flash_on</i><span class=\"rsle_ttitle\">'+RVS_LANG.optimize+'</span></div>';\r\n\t\t\tif (_.type!==\"slide\") toolbar += '<div class=\"rsle_tool deleteslider\" data-id=\"'+_.id+'\" ><i class=\"material-icons\">delete</i><span class=\"rsle_ttitle\">'+RVS_LANG.delete+'</span></div>';\r\n\t\t\tif (_.type!==\"slide\") {\r\n\t\t\t\t\ttoolbar += '<div class=\"rsle_tool_tagwrap\"><select data-id=\"'+_.id+'\" id=\"tags_'+_.id+'\" class=\"elementtags searchbox\" multiple=\"multiple\" data-theme=\"blue\">';\r\n\t\t\t\t\t// BUILD THE TAG LISTS IN THE ELEMENT\r\n\t\t\t\t\tfor (var i in sliderLibrary.filters.tags) {\r\n\t\t\t\t\t\tif(!sliderLibrary.filters.tags.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tvar m = jQuery.inArray(sliderLibrary.filters.tags[i].toLowerCase(),_.tags)>=0 ? ' selected=\"selected\" ' : \"\";\r\n\t\t\t\t\t\ttoolbar += '<option '+m+'value=\"'+RVS.F.sanitize_input(sliderLibrary.filters.tags[i].toLowerCase())+'\">'+RVS.F.sanitize_input(sliderLibrary.filters.tags[i])+'</option>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttoolbar += '</select></div></div>';\r\n\t\t\t}\r\n\t\t\ttoolbar = jQuery(toolbar);\r\n\t\t\tobj.append(linkobj);\r\n\t\t\tif (!_.folder) obj.append(slidelinkobj);\r\n\t\t\tobj.append(toolbar);\r\n            toolbar.find('.elementtags').ddTP({tags:true, tokenSeparators: [',', ' ']});\r\n            toolbar.find('.elementfolders').ddTP();\r\n            if (!_.folder) obj.append('<div class=\"rsle_move_and_edit\" data-info=\"'+RVS_LANG.moveToFolder+'\"></div>');\r\n\r\n\t\t}\r\n\r\n\t\tif (_.children && _.children.length>0) {\r\n\t\t\tvar cleanchildren = [],\r\n\t\t\t\texist = false;\r\n\t\t\tfor (var i in _.children) {\r\n\t\t\t\tif(!_.children.hasOwnProperty(i)) continue;\r\n\t\t\t\texist = false;\r\n\t\t\t\tfor (var j in sliderLibrary.sliders) {\r\n\t\t\t\t\tif(!sliderLibrary.sliders.hasOwnProperty(j)) continue;\r\n\t\t\t\t\tif ( sliderLibrary.sliders[j].id==_.children[i]) {exist = true;break;}\r\n\t\t\t\t}\r\n\t\t\t\tif (exist) cleanchildren.push(_.children[i]);\r\n\t\t\t}\r\n\t\t\t_.children = cleanchildren;\r\n\t\t}\r\n\t\t// FOLDER OR SLIDER\r\n\t\tif (_.folder) {\t // DRAW FOLDER\r\n\t\t\tif (_.id==-1 || _.quicktype==\"root\") {\t // ROOT ?\r\n\t\t\t\tobj.addClass(\"rootlevel_wrap\");\r\n\t\t\t\timgobjunder.append('<div class=\"rootfolder\"><i class=\"material-icons\">apps</i><span class=\"nsb_title\">'+RVS_LANG.root+'</span></div>');\r\n\t\t\t}\r\n\t\t\tif (_.quicktype===\"parent\") {\r\n\t\t\t\tobj.addClass(\"rootlevel_wrap\");\r\n\t\t\t\timgobjunder.append('<div class=\"rootfolder\"><i class=\"material-icons\">reply</i><span class=\"nsb_title\">'+RVS_LANG.parent+'</span></div>');\r\n\t\t\t\tobj.append(jQuery('<div class=\"rsle_folder\"><i class=\"material-icons\">folder_open</i></div>'));\r\n\t\t\t} else\t{\r\n\t\t\t\tobj.append(jQuery('<div class=\"rsle_folder\"><i class=\"material-icons\">folder_open</i></div>'));\r\n\t\t\t\tfor (var i=1;i<=4;i++) {\r\n\t\t\t\t\tvar sio = jQuery('<div class=\"folder_img_placeholder folder_img_'+i+'\"></div>');\r\n\t\t\t\t\tif (_.children!==undefined && _.children.length>=i) {\r\n\t\t\t\t\t\tvar cindex = findRekursiveChildImage(RVS.F.getOVSliderIndex(_.children[_.children.length - i]));\r\n\t\t\t\t\t\tif (cindex!==-1 && cindex!==false) RVS.F.setObjBg(sliderLibrary.sliders[cindex],sio);\r\n\t\t\t\t\t}\r\n\t\t\t\t\timgobjunder.append(sio);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else { // DRAW SLIDER\r\n\t\t\tvar imgobj = jQuery('<div class=\"image_container\"></div>');\r\n\t\t\tobj.append(imgobj);\r\n\t\t\tRVS.F.setObjBg(_,imgobj);\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\r\n\tfindRekursiveChildImage = function(sindex,found) {\r\n\t\tfound = found===undefined ? false : found;\r\n\t\tif (sliderLibrary.sliders[sindex].folder===true && found!==true) {\r\n\t\t\tvar l = sliderLibrary.sliders[sindex].children.length-1;\r\n\t\t\tfor (var i in sliderLibrary.sliders[sindex].children) {\r\n\t\t\t\tif (found!==false) continue;\r\n\t\t\t\tvar cindex = RVS.F.getOVSliderIndex(sliderLibrary.sliders[sindex].children[l-i]);\r\n\t\t\t\tif (sliderLibrary.sliders[cindex]!==undefined && sliderLibrary.sliders[cindex].folder===true)\r\n\t\t\t\t\tfound = findRekursiveChildImage(cindex,found);\r\n\t\t\t\telse\r\n\t\t\t\tif (sliderLibrary.sliders[cindex]!==undefined && sliderLibrary.sliders[cindex].bg!==\"\") found = cindex;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (sliderLibrary.sliders[sindex]!==undefined && sliderLibrary.sliders[sindex].bg!==\"\") found = sindex;\r\n\t\t}\r\n\r\n\t\treturn found;\r\n\t}\r\n\r\n\r\n\t// BUILD THE PAGINATION BASED ON THE CURRENT FILTERS\r\n\tbuildOVPagination = function(_) {\r\n\t\tif (sliderLibrary.inSlideMode) {\r\n\t\t\ttpGS.gsap.to('#modulesoverviewheader, #modulesoverviewfooter',0.5,{autoAlpha:0,opacity:0,ease:\"power3.inOut\"});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar maxamount = Math.max(1,Math.floor((sliderLibrary.output.width()+30) / 290)),\r\n\t\t\tdbl = maxamount,\r\n\t\t\tcpage = RVS.F.getCookie(\"rs6_overview_pagination\");\r\n\r\n\r\n\t\t// REBUILD PAGINATION DROPDOWN\r\n\t\tif (sliderLibrary.maxAmountPerPage!==maxamount) {\r\n\t\t\tjQuery('#pagination_select_2').ddTP('destroy');\r\n\t\t\tsliderLibrary.maxAmountPerPage=maxamount;\r\n\r\n\t\t\tfor (var i=0;i<=4;i++) {\r\n\t\t\t\tvar opt = document.getElementById('page_per_page_'+i);\r\n\t\t\t\topt.value = dbl;\r\n\t\t\t\topt.selected = (opt.value===cpage);\r\n\t\t\t\topt.innerHTML = RVS_LANG.show+\" \"+dbl+\" \"+RVS_LANG.perpage;\r\n\t\t\t\tdbl = dbl * 2;\r\n\t\t\t}\r\n\t\t\tjQuery('#pagination_select_2').ddTP();\r\n\t\t}\r\n\t\t//if (!sliderLibrary.inited) tpGS.gsap.to('#modulesoverviewheader, #modulesoverviewfooter',0.5,{autoAlpha:1,opacity:1,ease:\"power3.inOut\"});\r\n\t\tsliderLibrary.inited = true;\r\n\r\n\t\tif (sliderLibrary.sliders.length<=maxamount) {\r\n\t\t\tsliderLibrary.output.find('.overview_header_footer').hide();\r\n\t\t\tsliderLibrary.output.find('.overview_pagination').val(\"all\");\r\n\t\t} else {\r\n\t\t\tsliderLibrary.output.find('.overview_header_footer').show();\r\n\t\t}\r\n\r\n\t\tsliderLibrary.selectedPage = !_.keeppage ? 1 : jQuery('.page_button.global_library_pagination.selected').length>0 ? jQuery('.page_button.global_library_pagination.selected').data('page') : 1;\r\n\t\tvar wrap = sliderLibrary.output.find('.ov-pagination'),\r\n\t\t\ta = sliderLibrary.output.find('.overview_pagination')[0].value || 4,\r\n\t\t\tcounter = 0;\r\n\r\n\t\tvar filtleng =  sliderLibrary.filteredList.length;\r\n\t\tfiltleng = sliderLibrary.selectedFolder!=-1 ? filtleng + Math.ceil(filtleng / parseInt(a)) : filtleng;\r\n\t\tsliderLibrary.pageAmount = a===\"all\" ? 1 : Math.ceil(filtleng / parseInt(a));\r\n\t\tsliderLibrary.itemPerPage = a === \"all\" ? 99999 : parseInt(a);\r\n\t\tsliderLibrary.itemPerPage = sliderLibrary.selectedFolder!=-1 ? sliderLibrary.itemPerPage-1 : sliderLibrary.itemPerPage;\r\n\t\twrap[0].innerHTML = \"\";\r\n\t\tvar sel;\r\n\t\tsliderLibrary.selectedPage = sliderLibrary.selectedPage>sliderLibrary.pageAmount ? sliderLibrary.pageAmount : sliderLibrary.selectedPage;\r\n\r\n\r\n\t\t// BUILD THE PAGINATION BUTTONS\r\n\t\tif (sliderLibrary.pageAmount>1){\r\n\t\t\tfor (var i=1;i<=sliderLibrary.pageAmount;i++) {\r\n\r\n\t\t\t\tsel = i!==sliderLibrary.selectedPage ? \"\" : \"selected\";\r\n\t\t\t\twrap[0].innerHTML += '<div data-page=\"'+i+'\" class=\"'+sel+' page_button global_library_pagination\">'+i+'</div>';\r\n\t\t\t\tif (i===1)\r\n\t\t\t\t\twrap[0].innerHTML += '<div data-page=\"-9999\" class=\"page_button global_library_pagination\">...</div>';\r\n\t\t\t\telse\r\n\t\t\t\tif (i===sliderLibrary.pageAmount-1)\r\n\t\t\t\t\twrap[0].innerHTML += '<div data-page=\"9999\" class=\"page_button global_library_pagination\">...</div>';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tsmartPagination();\r\n\r\n\t\t// BUILD THE PAGES LIST\r\n\t\tsliderLibrary.pages = [];\r\n\t\tsliderLibrary.pages.push([]);\r\n\t\tfor (var f in sliderLibrary.filteredList) {\r\n\t\t\tif(!sliderLibrary.filteredList.hasOwnProperty(f)) continue;\r\n\t\t\tsliderLibrary.pages[sliderLibrary.pages.length-1].push(sliderLibrary.filteredList[f]);\r\n\t\t\tcounter++;\r\n\t\t\tif (counter===sliderLibrary.itemPerPage) {\r\n\t\t\t\tcounter = 0;\r\n\t\t\t\tsliderLibrary.pages.push([]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tresetAllOVFilters = function() {\r\n\t\tsliderLibrary.selectedPage = 1;\r\n\t\tjQuery('#sel_overview_sorting').val(\"datedesc\").ddTP('change');\r\n\t\tjQuery('#sel_overview_filtering').val(\"all\").ddTP('change');\r\n\t\tRVS.DOC.trigger('updateSlidersOverview',{val:\"datedesc\", eventparam:\"#reset_sorting\",ignoreRebuild:true,ignoreCookie:true});\r\n\t\tRVS.DOC.trigger('updateSlidersOverview',{val:\"all\", eventparam:\"#reset_filtering\",ignoreCookie:true});\r\n\t},\r\n\r\n\t// SMART PAGINATION\r\n\tsmartPagination = function() {\r\n\t\tsliderLibrary.pageAmount = parseInt(sliderLibrary.pageAmount,0);\r\n\t\tsliderLibrary.selectedPage = parseInt(sliderLibrary.selectedPage,0);\r\n\t\tjQuery('.page_button.global_library_pagination').each(function() {\r\n\t\t\tvar i = parseInt(this.dataset.page,0),\r\n\t\t\t\ts = false;\r\n\t\t\tif ((i===1) || (i===sliderLibrary.pageAmount)) s = true;\r\n\t\t\tif (sliderLibrary.selectedPage<4 && i>0 && i<5) s = true;\r\n\t\t\tif (sliderLibrary.selectedPage>sliderLibrary.pageAmount-3 && i>sliderLibrary.pageAmount-4 && i<9999) s = true;\r\n\t\t\tif (i<9999 && i>=sliderLibrary.selectedPage-1 && i<=sliderLibrary.selectedPage+1 && i>0) s = true;\r\n\t\t\tif ((sliderLibrary.selectedPage>=4 && i===-9999) || (sliderLibrary.selectedPage<= sliderLibrary.pageAmount-3 && i===9999)) s = true;\r\n\t\t\tif (sliderLibrary.pageAmount<8) if (i==9999 || i==-9999) s=false; else s=true;\r\n\t\t\tthis.style.display = s ? \"inline-block\" : \"none\";\r\n\t\t});\r\n\t},\r\n\r\n\t// SELECTED FILTER MATCH\r\n\tfilterMatch = function(_) {\r\n\t\treturn ((_.filter === _.o.source || _.filter === _.o.type || _.filter === _.o.size || jQuery.inArray(_.filter,_.o.tags)>=0));\r\n\t},\r\n\r\n\t// DELIVER PARRENT FOLDERS OF ELEMENT\r\n\tgetParentPath = function(pd) {\r\n\t\tvar f = [],\r\n\t\t\tmaxindx = 0;\r\n\t\tf.push(pd);\r\n\t\twhile (pd !== -1 && maxindx<10000) {\r\n\t\t\tmaxindx++;\r\n\t\t\tvar sindex = RVS.F.getOVSliderIndex(pd);\r\n\t\t\tpd = sindex!==-1 && sliderLibrary.sliders[sindex]!==undefined ? sliderLibrary.sliders[sindex].parent || -1 : -1;\r\n\t\t\tf.push(pd);\r\n\t\t}\r\n\t\treturn f;\r\n\t},\r\n\r\n\t// UPDATE THE CURRENT VISIBILITY LIST\r\n\tupdateOVFilteredList = function(_) {\r\n\t\t_ = _===undefined ? {force:false,keeppage:false,noanimation:false, focusItem:false} : _;\r\n\t\tvar sFilter = sliderLibrary.output.find('.overview_filterby')[0].value;\r\n\r\n\t\t//Sort the Sliders First\r\n\t\tswitch(sliderLibrary.output.find('.overview_sortby')[0].value) {\r\n\t\t\tcase \"datedesc\":\r\n\t\t\t\tsliderLibrary.sliders.sort(function(a,b) { return b.id - a.id;});\r\n\t\t\tbreak;\r\n\t\t\tcase \"title\":\r\n\t\t\t\tsliderLibrary.sliders.sort(function(a,b) { return a.title.toUpperCase().localeCompare(b.title.toUpperCase()); });\r\n\t\t\tbreak;\r\n\t\t\tcase \"titledesc\":\r\n\t\t\t\tsliderLibrary.sliders.sort(function(a,b) { return b.title.toUpperCase().localeCompare(a.title.toUpperCase()); });\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tsliderLibrary.sliders.sort(function(a,b) { return a.id - b.id;});\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tsliderLibrary.oldlist = sliderLibrary.filteredList;\r\n\t\tsliderLibrary.filteredList = [];\r\n\t\tvar s = jQuery('#searchmodules').val().toLowerCase();\r\n\r\n\t\t// ADD SLIDERS\r\n\t\tfor (var i in sliderLibrary.sliders) {\r\n\t\t\tif(!sliderLibrary.sliders.hasOwnProperty(i)) continue;\r\n\t\t\tvar slide = sliderLibrary.sliders[i];\r\n\t\t\t/* addToFilter = false; */\r\n\t\t\tslide.parent = slide.parent===undefined ? -1 : slide.parent;\r\n\t\t\tvar folderPath = getParentPath(slide.parent),\r\n\t\t\t\tcond_a = (s.length>2 && jQuery.inArray(sliderLibrary.selectedFolder,folderPath)>=0 && (slide.title.toLowerCase().indexOf(s)>=0 || slide.tags.toString().toLowerCase().indexOf(s)>=0) && (sFilter==\"all\" || filterMatch({o:slide, filter:sFilter}))),\r\n\t\t\t\tcond_b = (s.length<3 && sFilter==\"all\" && slide.parent == sliderLibrary.selectedFolder),\r\n\t\t\t\tcond_c = ((s.length<3 && filterMatch({o:slide, filter:sFilter}) && jQuery.inArray(sliderLibrary.selectedFolder,folderPath)>=0));\r\n\r\n\t\t\t// SEARCHED && SLIDE IS CHILDREN FROM SELECTED FOLDER && SEARCHED TEXT IN TITLE OR TAGLIST\r\n\t\t\tif ( cond_a||cond_b||cond_c) sliderLibrary.filteredList.push(slide.id);\r\n\t\t}\r\n\r\n\t\tif (sliderLibrary.filteredList.length<1 && sliderLibrary.selectedFolder===-1 && s.length===0)\r\n\t\t\ttpGS.gsap.to('#modulesoverviewheader, #modulesoverviewfooter',0.5,{autoAlpha:0,opacity:0,ease:\"power3.inOut\"});\r\n\t\telse\r\n\t\t\ttpGS.gsap.to('#modulesoverviewheader, #modulesoverviewfooter',0.5,{autoAlpha:1,opacity:1,ease:\"power3.inOut\"});\r\n\r\n\t\tif (sliderLibrary.isSlideMode) tpGS.gsap.to('#modulesoverviewheader, #modulesoverviewfooter',0.5,{autoAlpha:0,opacity:0,ease:\"power3.inOut\"});\r\n\r\n\t\t// ONLY REDRAW WHEN FORCED OR FILTERED RESULT CHANGED\r\n\t\tif(_.force || JSON.stringify(sliderLibrary.oldlist) !== JSON.stringify(sliderLibrary.filteredList)){\r\n\t\t\tbuildOVPagination({keeppage:_.keeppage, focusItem:_.focusitem});\r\n\t\t\tdrawOVOverview({noanimation:_.noanimation, focusItem:_.focusItem});\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\tUPDATE THE PARENT ATTRIBUTES ON THE SINGLE SLIDERS AND FOLDERS\r\n\t*/\r\n\tupdateParentAttributes = function() {\r\n\t\tfor (var i in sliderLibrary.sliders) {\r\n\t\t\tif(!sliderLibrary.sliders.hasOwnProperty(i)) continue;\r\n\t\t\tif (sliderLibrary.sliders[i].folder) {\r\n\t\t\t\tfor (var c in sliderLibrary.sliders[i].children) {\r\n\t\t\t\t\tif(!sliderLibrary.sliders[i].children.hasOwnProperty(c)) continue;\r\n\t\t\t\t\t//IGNORE PARENT, IF CHILDREN LIST HAS PARENT (LOOP)\r\n\t\t\t\t\tif (sliderLibrary.sliders[i].children.indexOf(sliderLibrary.sliders[i].parent)>=0) sliderLibrary.sliders[i].parent = -1;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvar sindex = RVS.F.getOVSliderIndex(sliderLibrary.sliders[i].children[c]);\r\n\r\n\t\t\t\t\t\tif (sindex!==-1)\r\n\t\t\t\t\t\t\tsliderLibrary.sliders[sindex].parent = sliderLibrary.sliders[i].id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\tBUILD THE DROP DOWN LIST FOR MODULES\r\n\t*/\r\n\tbuildModuleFilters = function() {\r\n\t\tvar ret = {folders:[], tags:[], types:[], sources:[], sizes:[]};\r\n\t\tret.folders.push({id:-1, title:\"Root\"});\r\n\t\tfor (var i in sliderLibrary.sliders) {\r\n\t\t\tif(!sliderLibrary.sliders.hasOwnProperty(i)) continue;\r\n\t\t\tvar slide = sliderLibrary.sliders[i];\r\n\t\t\tret.tags = extendArray(ret.tags, slide.tags);\r\n\t\t\tret.types = extendArray(ret.types, slide.type);\r\n\t\t\tret.sources = extendArray(ret.sources, slide.source);\r\n\t\t\tret.sizes = extendArray(ret.sizes, slide.size);\r\n\t\t\tif (slide.folder) ret.folders.push({id:slide.id});\r\n\t\t}\r\n\r\n\t\tvar select = sliderLibrary.output.find('.overview_filterby'),\r\n\t\t\tw = select.val();\r\n\t\tselect.find('.dynamicadded').remove();\r\n\t\textendSelect({select:select, array:ret.tags, group:\"Tags\", old:w, sanitize:true});\r\n\t\textendSelect({select:select, array:ret.types, group:\"Types\", old:w});\r\n\t\textendSelect({select:select, array:ret.sources, group:\"Sources\", old:w});\r\n\t\textendSelect({select:select, array:ret.size, group:\"Sizes\", old:w});\r\n\r\n\t\t// replace post option with products\r\n\t\tjQuery.each(select[0].options, function(key, option) {\r\n\t\t\tif (jQuery(option).text() == 'Posts') {\r\n\t\t\t\tjQuery(option).text('Products')\r\n\t\t\t}\r\n\t\t});\r\n\r\n        select.ddTP({placeholder:\"Select From List\"});\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t/*\r\n\tBUILD THE FOLDER OVERVIEW SIDEBAR AND HANDLE FOLDER INCLUDES\r\n\t*/\r\n\tdrawFolderListSideBar = function(sliderid) {\r\n\t\tsliderLibrary.filters = buildModuleFilters();\r\n\t\twindow.showFolderOverview = tpGS.gsap.timeline();\r\n\t\tsliderLibrary.sfw[0].innerHTML = \"\";\r\n\t\twindow.showFolderOverview.add(tpGS.gsap.fromTo(sliderLibrary.sfw,0.6,{display:\"none\",x:-400},{display:\"block\",x:0,ease:\"power3.out\"}),0.1);\r\n\t\twindow.showFolderOverview.add(tpGS.gsap.fromTo(sliderLibrary.sfwu,0.3,{display:\"none\",autoAlpha:0},{display:\"block\",autoAlpha:0.5,ease:\"power3.out\"}),0);\r\n\r\n\t\tvar target = sliderid===undefined ? undefined : sliderLibrary.sliders[RVS.F.getOVSliderIndex(sliderid)],\r\n\t\t\tfirstfwlt = \"first_fwlt\";\r\n\r\n\t\t//CREATE ROOT FOLDER\r\n\r\n\t\tif (sliderLibrary.selectedFolder!==-1) {\r\n\t\t\tsliderLibrary.sfw.append('<div class=\"folder_wrap_level_title '+firstfwlt+'\">'+RVS_LANG.toplevels+'</div>');\r\n\t\t\tbuildDroppableList(buildOVElement({id:-1,title:\"Root\",quicktype:\"root\", folder:true,children:[]},true),0);\r\n\t\t\tfirstfwlt=\"\";\r\n\t\t}\r\n\r\n\t\t//CREATE PARENT FOLDER IF NEEDED\r\n\t\tif (target!==undefined && target.parent!==-1) {\r\n\t\t\tif (target.parent!==-1) {\r\n\t\t\t\tvar pt = sliderLibrary.sliders[RVS.F.getOVSliderIndex(target.parent)];\r\n\t\t\t\tif (pt!==undefined && pt.parent!==-1) buildDroppableList(buildOVElement({id:pt.parent,title:\"Parent\",quicktype:\"parent\", folder:true,children:[]},true),0); //sliderLibrary.sliders[RVS.F.getOVSliderIndex(pt.parent)].children\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar written=false;\r\n\t\t//CREATE SIBLINGS\r\n\t\tfor (var f in sliderLibrary.filters.folders) {\r\n\t\t\tif(!sliderLibrary.filters.folders.hasOwnProperty(f)) continue;\r\n\t\t\tvar findex = RVS.F.getOVSliderIndex(sliderLibrary.filters.folders[f].id);\r\n\t\t\tif (target!==undefined && sliderLibrary.sliders[findex]!==undefined && target.parent!==sliderLibrary.sliders[findex].parent) continue;\r\n\t\t\tif (findex===-1) continue;\r\n\t\t\tif (written===false) {\r\n\t\t\t\tsliderLibrary.sfw.append('<div class=\"folder_wrap_level_title '+firstfwlt+'\">'+RVS_LANG.siblings+'</div>')\r\n\t\t\t\twritten = true;\r\n\t\t\t\tfirstfwlt=\"\";\r\n\t\t\t}\r\n\t\t\tbuildDroppableList(buildOVElement({id:sliderLibrary.filters.folders[f].id,title:sliderLibrary.sliders[findex].title,folder:true,children:sliderLibrary.sliders[findex].children},true),f);\r\n\t\t}\r\n\t\twritten = false;\r\n\t\t//ANY OTHER FOLDERS\r\n\t\tfor (var f in sliderLibrary.filters.folders) {\r\n\t\t\tif(!sliderLibrary.filters.folders.hasOwnProperty(f)) continue;\r\n\t\t\tvar findex = RVS.F.getOVSliderIndex(sliderLibrary.filters.folders[f].id);\r\n\t\t\tif (target!==undefined && sliderLibrary.sliders[findex]!==undefined && target.parent===sliderLibrary.sliders[findex].parent) continue;\r\n\t\t\tif (target!==undefined && target.parent===sliderLibrary.filters.folders[f].id) continue;\r\n\t\t\tif (findex===-1) continue;\r\n\t\t\tif (written===false) {\r\n\t\t\t\tsliderLibrary.sfw.append('<div class=\"folder_wrap_level_title '+firstfwlt+'\">'+RVS_LANG.otherfolders+'</div>')\r\n\t\t\t\twritten = true;\r\n\t\t\t\tfirstfwlt=\"\";\r\n\t\t\t}\r\n\t\t\tbuildDroppableList(buildOVElement({id:sliderLibrary.filters.folders[f].id,title:sliderLibrary.sliders[findex].title,folder:true,children:sliderLibrary.sliders[findex].children},true),f);\r\n\r\n\t\t}\r\n\t\t// SCROLLBAR AND MOUSE SENSITIVY\r\n\t\tsliderLibrary.sfw.RSScroll({wheelPropagation:false});\r\n\t},\r\n\r\n\tbuildDroppableList = function(folder,f) {\r\n\t\twindow.showFolderOverview.add(tpGS.gsap.from(folder,0.2,{x:\"-150%\",ease:\"power3.out\"}),(0.2+(f*0.04)));\r\n\t\tdoOVDroppable(folder);\r\n\t\tsliderLibrary.sfw.append(folder);\r\n\t},\r\n\r\n\t/*\r\n\tMAKE FOLDER DROPPABLE\r\n\t*/\r\n\tdoOVDroppable = function(folder) {\r\n\t\tfolder.droppable({\r\n\t\t\tdrop:function(e,ui) {\r\n\t\t\t\tvar folderId = this.dataset.sliderid,\r\n\t\t\t\t\tsliderId = ui.draggable[0].dataset.sliderid,\r\n\t\t\t\t\tfindex = RVS.F.getOVSliderIndex(folderId),\r\n\t\t\t\t\tsindex = RVS.F.getOVSliderIndex(sliderId);\r\n\t\t\t\tif (folderId !==sliderId) {\r\n\t\t\t\t\t// REMOVE FROM OLD FOLDER\r\n\t\t\t\t\tif (sliderLibrary.sliders[sindex].parent!=-1) {\r\n\t\t\t\t\t\tvar oindex = RVS.F.getOVSliderIndex(sliderLibrary.sliders[sindex].parent);\r\n\t\t\t\t\t\tsliderLibrary.sliders[oindex].children.splice(jQuery.inArray(sliderId,sliderLibrary.sliders[oindex].children),1);\r\n\t\t\t\t\t\tRVS.F.ajaxRequest('save_slider_folder', {id:sliderLibrary.sliders[oindex].id, children:sliderLibrary.sliders[oindex].children}, function(response){});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// ADD INTO NEW FOLDER\r\n\t\t\t\t\tif (folder!=-1 && findex!==-1) {\r\n\t\t\t\t\t\tsliderLibrary.sliders[findex].children =  sliderLibrary.sliders[findex].children===undefined || sliderLibrary.sliders[findex].children.length===0 ? [] : sliderLibrary.sliders[findex].children;\r\n\t\t\t\t\t\tsliderLibrary.sliders[findex].children.push(sliderId);\r\n\t\t\t\t\t\tRVS.F.ajaxRequest('save_slider_folder', {id:folderId, children:sliderLibrary.sliders[findex].children}, function(response){});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsliderLibrary.filters = buildModuleFilters();\r\n\t\t\t\t\tsliderLibrary.sliders[sindex].parent = folderId;\r\n\t\t\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\t\t\tupdateOVFilteredList({force:true,keeppage:true,noanimation:false});\r\n\t\t\t\t}\r\n\r\n\t\t\t\twindow.showFolderOverview.reverse();\r\n\t\t\t\twindow.droppedIntoFolder=true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/*\r\n\tMAKE ELEMENT DRAGGABLE AND DROPPABLE\r\n\t*/\r\n\tdoOVDraggable = function(_) {\r\n\t\tif (_.data('draggable')) _.draggable(\"destroy\");\r\n\t\t_.draggable({\r\n\t\t\tdistance: 20,\r\n\t\t\thelper:'clone',\r\n\t\t\tappendTo:'body',\r\n\t\t\trevert:'invalid',\r\n\t\t\tstart:function(e,ui) {\r\n\t\t\t\twindow.droppedIntoFolder = false;\r\n\t\t\t\tdrawFolderListSideBar(ui.helper[0].dataset.sliderid);\r\n\t\t\t},\r\n\t\t\tstop:function(e,ui) {\r\n\t\t\t\tif (window.droppedIntoFolder===false) {\r\n\t\t\t\t\twindow.showFolderOverview.reverse();\r\n\t\t\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\t\t\tupdateOVFilteredList({force:true,keeppage:true,noanimation:false});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/*\r\n\tMAKE ELEMENT SORTABLE\r\n\t*/\r\n\tdoOVSortable = function(_) {\r\n\t\tif (_.data('sortable')) _.sortable(\"destroy\");\r\n\t\t_.sortable({\r\n\t\t\titems : '.rs_library_element',\r\n\t\t\tstart: function() {\r\n\t\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\t\tRVS.S.OVslidesOldOrder = [];\r\n\t\t\t\t_.find('.rs_library_element').each(function(i) {\r\n\t\t\t\t\tvar a = (\"\"+this.dataset.slideid).replace('slide_id_','');\r\n\t\t\t\t\tif (a!==undefined && a!=='undefined') RVS.S.OVslidesOldOrder.push(a);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tstop : function(event, ui) {\r\n\t\t\t\tRVS.S.OVslidesNeworder = [];\r\n\t\t\t\t_.find('.rs_library_element').each(function(i) {\r\n\r\n\t\t\t\t\tvar a = (\"\"+this.dataset.slideid).replace('slide_id_','');\r\n\t\t\t\t\t\tslide = sliderLibrary.slides[this.dataset.sliderid][a];\r\n\t\t\t\t\tslide.order = i+1;\r\n\t\t\t\t\tslide.ref.find('.slide_order_number').html('#'+(i+1));\r\n\t\t\t\t\tRVS.S.OVslidesNeworder.push(a);\r\n\t\t\t\t\tif (i===0) {\r\n\t\t\t\t\t\tvar sliderIndex = RVS.F.getOVSliderIndex(this.dataset.sliderid);\r\n\t\t\t\t\t\tsliderLibrary.sliders[sliderIndex].bg.type = slide.bg===undefined ? slide.customAdminThumbSrc.type : slide.bg.type;\r\n\t\t\t\t\t\tsliderLibrary.sliders[sliderIndex].bg.src = slide.bg===undefined ? slide.customAdminThumbSrc.src : slide.bg.src;\r\n\t\t\t\t\t\tsliderLibrary.sliders[sliderIndex].bg.style= slide.bg===undefined ? slide.customAdminThumbSrc.style : slide.bg.style;\r\n\t\t\t\t\t\tRVS.F.setObjBg(sliderLibrary.sliders[sliderIndex] , sliderLibrary.sliders[sliderIndex].ref.find('.image_container'));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (RVS.S.OVslidesOldOrder.toString() !== RVS.S.OVslidesNeworder.toString()) RVS.F.ajaxRequest('update_slide_order', {slide_ids:RVS.S.OVslidesNeworder}, function(response){});\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t//DRAW SYSTEM CHECK\r\n\tupdateSysChecks = function() {\r\n\t\tfor (var i in window.rs_system) {\r\n\t\t\tif(!window.rs_system.hasOwnProperty(i)) continue;\r\n\t\t\tvar _ = window.rs_system[i],\r\n\t\t\t\tw = (typeof(_) ==\"object\" && _.good==true) || _===true || _==='1';\r\n\r\n\t\t\tif (!w)\r\n\t\t\t\tjQuery('#syscheck_'+i).addClass(\"warning\");\r\n\t\t\telse\r\n\t\t\t\tjQuery('#syscheck_'+i).removeClass(\"warning\");\r\n\t\t}\r\n\t},\r\n\tcheckAddOnVersions = function() {\r\n\t\tif (RVS.ENV.activated!==\"true\" && RVS.ENV.activated!==true) return;\r\n\t\tvar list = \"\";\r\n\t\tRVS.ENV.addOns_to_update = RVS.ENV.addOns_to_update===undefined ? {} : RVS.ENV.addOns_to_update;\r\n\t\tRVS.ENV.addOns_to_updateArray = [];\r\n\t\twindow.addOnUpdateCounter = 0;\r\n\t\tfor (var i in RVS.ENV.addOns_to_update) if (RVS.ENV.addOns_to_update.hasOwnProperty(i)) {\r\n\t\t\tRVS.ENV.addOns_to_updateArray.push(i);\r\n            list +=  '<div id=\"need_update_'+i+'\" class=\"addonlist_to_update\">'+RVS.ENV.addOns_to_update[i].title+' '+RVS_LANG.from+' '+RVS.ENV.addOns_to_update[i].old+' '+RVS_LANG.to+' '+RVS.ENV.addOns_to_update[i].new+'<div class=\"addonlist_to_update_single_status circle-loader\"><div class=\"checkmark draw\"></div></div></div>';\r\n        }\r\n\t\tif (list!==\"\")\r\n\t\tRVS.F.RSDialog.create({\r\n\t\t\tbgopacity:0.85,\r\n\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\ticon:'extension',\r\n\t\t\ttitle:RVS_LANG.addonsupdatetitle,\r\n\t\t\tmaintext:RVS_LANG.addonsupdatemain,\r\n\t\t\tsubtext:list,\r\n\t\t\tdo:{\r\n\t\t\t\ticon:\"check_circle\",\r\n\t\t\t\ttext:RVS_LANG.updateallnow,\r\n\t\t\t\tevent: \"updateAddonsNow\",\r\n\t\t\t\tkeepDialog:true\r\n\t\t\t},\r\n\t\t\tcancel:{\r\n\t\t\t\ticon:\"cancel\",\r\n\t\t\t\ttext:RVS_LANG.updatelater\r\n\t\t\t},\r\n\t\t\tswapbuttons:true\r\n\t\t});\r\n\t},\r\n\r\n\tupdateNextRequiredAddon = function() {\r\n\t\tif (window.addOnUpdateCounter<RVS.ENV.addOns_to_updateArray.length) {\r\n\t\t\tvar slug = RVS.ENV.addOns_to_updateArray[window.addOnUpdateCounter],\r\n\t\t\t\t_ = RVS.ENV.addOns_to_update[slug],\r\n\t\t\t\tle = jQuery('#need_update_'+slug);\r\n\t\t\tle.find('.addonlist_to_update_single_status').addClass(\"inload\");\r\n\t\t\tRVS.F.ajaxRequest('activate_addon', {addon:slug, update:true}, function(response){\r\n\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\tle.find('.addonlist_to_update_single_status').removeClass(\"inload\").addClass('load-complete');\r\n\t\t\t\t\t\t_.updated = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tle.find('.addonlist_to_update_single_status').removeClass(\"inload\").addClass('load-complete').addClass(\"failure\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\twindow.addOnUpdateCounter++;\r\n\t\t\t\t\tupdateNextRequiredAddon();\r\n\t\t\t},false);\r\n\t\t} else {\r\n\t\t\tjQuery('#decmod_do_btn').html('<i id=\"decmod_do_icon\" class=\"material-icons\">done</i><span id=\"decmod_do_txt\">'+RVS_LANG.updatedoneexist,+'</span>').show().off(\"click\").on(\"click\",function() {\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\tLOCAL LISTENERS\r\n\t*/\r\n\tinitLocalListeners = function() {\r\n\r\n\t\t// RESIZE SCREEN\r\n\t\tRVS.WIN.on('resize',function() {\r\n\t\t\tclearTimeout(window.resizedOverviewTimeOut);\r\n\t\t\twindow.resizedOverviewTimeOut = setTimeout(function() {\r\n\t\t\t\tvar maxamount = Math.floor((sliderLibrary.output.width()+30) / 290);\r\n\t\t\t\tmaxamount=maxamount<1 ? 1 : maxamount;\r\n\t\t\t\tif (sliderLibrary.maxAmountPerPage!==maxamount) {\r\n\t\t\t\t\tupdateOVFilteredList({force:true,keeppage:true,noanimation:true});\r\n\t\t\t\t}\r\n\t\t\t},10);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateAddonsNow',function() {\r\n\t\t\tupdateNextRequiredAddon();\r\n\t\t\tjQuery('#decmod_dont_btn').hide();\r\n\t\t\tjQuery('#decmod_do_btn').hide();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.rs_lib_premium_red_hover',function() {\r\n\t\t\tRVS.F.scrollToOvRegister();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateThePlugin',function() {\r\n\t\t\twp.updates.maybeRequestFilesystemCredentials( );\r\n\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.updatingplugin});\r\n\t\t    var args = {\r\n\t\t        plugin: RVS.ENV.slug_path,\r\n\t\t        slug:   RVS.ENV.slug,\r\n\t\t\t\tcheckforupdates: true,\r\n\t\t        success: function(success) {\r\n\t\t        \tRVS.F.showWaitAMinute({fadeOut:0});\r\n\t\t        \tRVS.F.RSDialog.create({\r\n\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\ticon:'update',\r\n\t\t\t\t\ttitle:RVS_LANG.updateplugin,\r\n\t\t\t\t\tmaintext:\"\", //RVS_LANG.updatepluginsuccess,\r\n\t\t\t\t\tsubtext:RVS_LANG.updatepluginsuccesssubtext+\" <strong>\"+success.newVersion+\"</strong>\",\r\n\t\t\t\t\tdo:{\r\n\t\t\t\t\t\ticon:\"check_circle\",\r\n\t\t\t\t\t\ttext:RVS_LANG.reloadpage,\r\n\t\t\t\t\t\tevent: \"reloadpagenow\"\r\n\t\t\t\t\t}});\r\n\t\t        },\r\n\t\t        error: function(error) {\r\n\t\t        \tRVS.F.showWaitAMinute({fadeOut:0});\r\n\t\t        \tvar debug=\"<br>\";\r\n\t\t        \tfor (var i in error.debug) if (error.debug.hasOwnProperty(i)) { debug += \"<span style='white-space: nowrap;overflow: hidden;width: 400px;margin-bottom: 5px;font-size: 12px;display: block;'>- \"+error.debug[i]+\"</span>\"; }\r\n\t\t        \tdebug += \"<span style='white-space: nowrap;overflow: hidden;width: 400px;margin-bottom: 5px;font-size: 12px;display: block;'>\"+RVS_LANG.tryagainlater+\"</span>\";\r\n\t\t\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\ticon:'update',\r\n\t\t\t\t\ttitle:RVS_LANG.updatepluginfailed,\r\n\t\t\t\t\tmaintext:RVS_LANG.updatepluginfailure,\r\n\t\t\t\t\tsubtext:(error!==undefined && error.errorMessage!==undefined && error.errorMessage.indexOf(\"PCLZIP_ERR_BAD_FORMAT\")>=0 ? RVS_LANG.licenseissue : error.errorMessage)+\"<br>\"+debug,\r\n\t\t\t\t\tdo:{\r\n\t\t\t\t\t\ticon:\"error\",\r\n\t\t\t\t\t\ttext:RVS_LANG.leave,\r\n\t\t\t\t\t\tevent: \"\"\r\n\t\t\t\t\t}});\r\n\t\t        }\r\n\t\t    }\r\n\t\t    wp.updates.ajax('update-plugin', args);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#updateplugin, #updateplugin_sc',function() {\r\n\t\t\tif (RVS.ENV.allow_update!==true && RVS.F.compareVersion(RVS.ENV.latest_version, RVS.ENV.revision) <= 0) return;\r\n\t\t\tif (this.className.indexOf(\"halfdisabled\")>=0) {\r\n\t\t\t\toverviewMenuScroll();\r\n\t\t\t\tvar o = { val:window.scroll_top};\r\n\t\t\t\ttpGS.gsap.to(o,0.6,{val:window.ov_scroll_targets[2].top-200, onUpdate:function() {\r\n\t\t\t\t\tRVS.WIN.scrollTop(o.val);\r\n\t\t\t\t}, ease:\"power3.out\"});\r\n\t\t\t\toverviewMenuScroll();\r\n\t\t\t\t//scroll to position\r\n\t\t\t} else {\r\n\t\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\ticon:'update',\r\n\t\t\t\t\ttitle:RVS_LANG.updateplugin,\r\n\t\t\t\t\tmaintext:RVS_LANG.areyousureupdateplugin,\r\n\t\t\t\t\tsubtext:RVS_LANG.updatingtakes,\r\n\t\t\t\t\tdo:{\r\n\t\t\t\t\t\ticon:\"check_circle\",\r\n\t\t\t\t\t\ttext:RVS_LANG.updatenow,\r\n\t\t\t\t\t\tevent: \"updateThePlugin\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcancel:{\r\n\t\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\t\ttext:RVS_LANG.cancel\r\n\t\t\t\t\t},\r\n\t\t\t\t\tswapbuttons:true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.F.clearSlidesOverview = function(sliderid) {\r\n\r\n\t\t\tif (sliderLibrary.slides[sliderid]!==undefined) {\r\n\t\t\t\tfor (var i in sliderLibrary.slides[sliderid]) {\r\n\t\t\t\t\tif (!sliderLibrary.slides[sliderid].hasOwnProperty(i)) continue;\r\n\t\t\t\t\tsliderLibrary.slides[sliderid][i].ref.remove();\r\n\t\t\t\t}\r\n\t\t\t\tsliderLibrary.slides[sliderid]=undefined;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tRVS.F.buildSlidesOverview = function(sliderid) {\r\n\t\t\tsliderLibrary.selectedSlider = sliderid;\r\n\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\tvar container = jQuery('.overview_elements');\r\n\t\t\tsliderLibrary.slides = sliderLibrary.slides===undefined ? {} : sliderLibrary.slides;\r\n\t\t\t//container.find('.rs_library_element').detach();\r\n\r\n\t\t\tsliderLibrary.inSlideMode = true;\r\n\t\t\tif (sliderLibrary.slides[sliderLibrary.selectedSlider]===undefined) {\r\n\t\t\t\tsliderLibrary.slides[sliderLibrary.selectedSlider] = {};\r\n\t\t\t\tRVS.F.ajaxRequest('get_slides_by_slider_id', {id:sliderid}, function(response){\r\n\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\tfor (var i in response.slides) {\r\n\t\t\t\t\t\t\tif(!response.slides.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\t\tsliderLibrary.slides[sliderLibrary.selectedSlider][response.slides[i].id] = RVS.F.safeExtend(true,{},response.slides[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tupdateSlidesOrder();\r\n\t\t\t\t\t\tdrawOVOverview();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tupdateSlidesOrder();\r\n\t\t\t\tdrawOVOverview();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// SHOW SINGLE SLIDES IN SLIDER\r\n\t\tRVS.DOC.on('click','.link_to_slides_overview',function() {\r\n\t\t\tRVS.F.buildSlidesOverview(this.dataset.id)\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('reloadpagenow',function() {\r\n\t\t\ttpGS.gsap.to(jQuery('.page-wrapper'),0.5,{opacity:0});\r\n\t\t\tjQuery('#waitaminute').appendTo('body');\r\n\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.reLoading});\r\n\r\n\t\t\t//setTimeout(function() {\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t//},500);\r\n\t\t});\r\n\r\n\t\t// LEAVING OVERVIEW TO EDIT\r\n\t\tRVS.DOC.on('click','.link_to_slideadmin_a',function() {\r\n\t\t\tif (this.tagName==\"A\" && this.href!==undefined) {\r\n\t\t\t\ttpGS.gsap.to(jQuery('.page-wrapper'),0.5,{opacity:0});\r\n\t\t\t\tjQuery('#waitaminute').appendTo('body');\r\n\t\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.editorisLoading+\"<span style='display:block;font-size:20px;line-height:25px'>\"+RVS_LANG.opening+\" \"+this.dataset.title+\"</span>\"});\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.link_to_quickeditor',function() {\r\n\t\t\tvar jt = jQuery(this),\r\n\t\t\t\tcl = jt.closest('.rs_library_element');\r\n\t\t\tRVS.F.openQuickContent({sliderid:cl[0].dataset.sliderid})\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mouseenter','.link_to_slideadmin, .link_to_slides_overview',function() {\r\n\t\t\tvar jt = jQuery(this),\r\n\t\t\t\tcl = jt.closest('.rs_library_element'),\r\n\t\t\t\tsi = cl.find('.rs_library_el_next'),\r\n\t\t\t\ttlc = cl.find('.title_container');\r\n\r\n\t\t\tif (tlc[0]!==document.activeElement) {\r\n\t\t\t\tsi.show();\r\n\t\t\t\tsi.html(this.dataset.info);\r\n\t\t\t}\r\n\r\n\t\t\t/*if (this.className.indexOf('link_to_slideadmin')>=0) {\r\n\t\t\t\tclearTimeout(jt.data('tlcount'));\r\n\t\t\t\tif (jt.data('tl')===undefined) {\r\n\t\t\t\t\tvar tl = new tpGS.TimelineMax();\r\n\t\t\t\t\t//tl.add(tpGS.gsap.to(this,0.2,{x:-2,y:-2, ease:\"power3.in\", width:54, height:54}));\r\n\t\t\t\t\t//tl.add(tpGS.gsap.to(this,0.2,{x:0,y:0, ease:\"power3.inOut\", width:50, height:50}));\r\n\t\t\t\t\ttl.add(tpGS.gsap.fromTo(jt.find('.link_to_quickeditor'),0.3,{x:30,y:30}, {x:-7,y:23, rotationZ:0, ease:\"power3.out\"}),0);\r\n\t\t\t\t\ttl.add(tpGS.gsap.fromTo(jt.find('.link_to_quickstyleeditor'),0.3,{x:30,y:30}, {x:12,y:-3, ease:\"power3.out\"}),0.1);\r\n\r\n\t\t\t\t\ttl.add(tpGS.gsap.fromTo(jt.find('.link_to_quickeditor'),0.3,{rotationZ:25}, {rotationZ:0, ease:\"power3.out\", rotationZ:0, onUpdate:function(a,b) {\r\n\t\t\t\t\t\tif (this.target[0]!==undefined) this.target[0].style.borderBottomRightRadius = (50 - (this.target[0]._gsTransform.rotation * 2)) + \"%\";\r\n\t\t\t\t\t}}),0.1);\r\n\r\n\t\t\t\t\ttl.add(tpGS.gsap.fromTo(jt.find('.link_to_quickstyleeditor'),0.3,{rotationZ:25}, {rotationZ:0, ease:\"power3.out\", rotationZ:0, onUpdate:function(a,b) {\r\n\t\t\t\t\t\tif (this.target[0]!==undefined) this.target[0].style.borderBottomRightRadius = (50 - (this.target[0]._gsTransform.rotation * 2)) + \"%\";\r\n\t\t\t\t\t}}),0.15);\r\n\r\n\t\t\t\t\ttl.add(tpGS.gsap.to(jt.find('.link_to_slideadmin_a'),0.15,{rotationZ:-2,ease:\"power3.out\", onUpdate:function(a,b) {\r\n\t\t\t\t\t\tif (this.target[0]!==undefined) this.target[0].style.borderTopLeftRadius = (50 + (this.target[0]._gsTransform.rotation)*10) + \"%\";\r\n\t\t\t\t\t}}),0);\r\n\r\n\t\t\t\t\ttl.add(tpGS.gsap.to(jt.find('.link_to_slideadmin_a'),0.15,{rotationZ:0,ease:\"power3.out\",  onUpdate:function(a,b) {\r\n\t\t\t\t\t\tif (this.target[0]!==undefined) this.target[0].style.borderTopLeftRadius = (50 + (this.target[0]._gsTransform.rotation)*10) + \"%\";\r\n\t\t\t\t\t}}),0.15);\r\n\r\n\r\n\r\n\t\t\t\t\tjt.data('tl',tl);\r\n\t\t\t\t\ttl.play();\r\n\t\t\t\t} else jt.data('tl').play();\r\n\t\t\t}*/\r\n\t\t});\r\n\r\n\r\n\r\n\t\tRVS.DOC.on('mousemove','.link_to_quickeditor, .link_to_quickstyleeditor, .link_to_slideadmin_a',function() {\r\n\t\t\tvar jt = jQuery(this),\r\n\t\t\t\tcl = jt.closest('.rs_library_element'),\r\n\t\t\t\tsi = cl.find('.rs_library_el_next'),\r\n\t\t\t\ttlc = cl.find('.title_container');\r\n\r\n\t\t\tif (tlc[0]!==document.activeElement) {\r\n\t\t\t\tsi.show();\r\n\t\t\t\tsi.html(this.dataset.info);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mouseleave','.link_to_slideadmin, .link_to_slides_overview',function() {\r\n\t\t\tvar jt = jQuery(this),\r\n\t\t\t\tcl = jt.closest('.rs_library_element'),\r\n\t\t\t\tsi = cl.find('.rs_library_el_next');\r\n\t\t\tsi.hide();\r\n\t\t\tclearTimeout(jt.data('tlcount'));\r\n\t\t\tif (jt.data('tl')!==undefined) jt.data('tlcount',setTimeout(function() {jt.data('tl').reverse();},200));\r\n\r\n\t\t});\r\n\r\n\t\t//BACK ONE LEVEL\r\n\t\tRVS.DOC.on('click','#back_one_folder',function() {\r\n\t\t\tif (!sliderLibrary.inSlideMode) {\r\n\t\t\t\tvar findex = RVS.F.getOVSliderIndex(sliderLibrary.selectedFolder);\r\n\t\t\t\tsliderLibrary.selectedFolder = sliderLibrary.sliders[findex].parent || -1;\r\n\t\t\t} else {\r\n\t\t\t\tsliderLibrary.inSlideMode = false;\r\n\t\t\t\tsliderLibrary.output.find('.overview_elements').find('.rs_library_element').detach();\r\n\t\t\t}\r\n\r\n\t\t\tresetAllOVFilters();\r\n\t\t\tupdateOVFilteredList({force:true,keeppage:false,noanimation:false});\r\n\t\t});\r\n\r\n\t\t// FOLLOW BREADCRUMB\r\n\t\tRVS.DOC.on('click','.rsl_breadcrumb',function() {\r\n\t\t\tif (sliderLibrary.inSlideMode) {\r\n\t\t\t\tsliderLibrary.inSlideMode = false;\r\n\t\t\t\tsliderLibrary.output.find('.overview_elements').find('.rs_library_element').detach();\r\n\t\t\t}\r\n\t\t\tsliderLibrary.selectedFolder = parseInt(this.dataset.folderid,0);\r\n\t\t\tupdateOVFilteredList({force:true,keeppage:false,noanimation:false});\r\n\t\t});\r\n\r\n\t\t// HIDE FOLDER LISTS\r\n\t\tRVS.DOC.on('click','#slider_folders_wrap_underlay',function() {\r\n\t\t\twindow.showFolderOverview.reverse();\r\n\t\t});\r\n\r\n\t\t// CREATE NEW FOLDER\r\n\t\tRVS.DOC.on('click','#add_folder',function(e,par) {RVS.F.createNewFolder(par);});\r\n\r\n\t\t// FIX DATABASE ISSUES\r\n\t\tRVS.DOC.on('click','#rs_db_force_create',function(e,par) {\r\n\t\t\tRVS.F.ajaxRequest('fix_database_issues', {}, function(response){},false);\r\n\t\t});\r\n\r\n\t\t// CLEAR INTERNAL CACHE\r\n\t\tRVS.DOC.on('click','#rs_force_clear_cache',function(e,par) {\r\n\t\t\tRVS.F.ajaxRequest('clear_internal_cache', {}, function(response){},false);\r\n\t\t});\r\n\r\n\t\t// REISSUE GOOGLE FONT DOWNLOAD\r\n\t\tRVS.DOC.on('click','#rs_trigger_font_deletion',function(e,par) {\r\n\t\t\tRVS.F.ajaxRequest('trigger_font_deletion', {}, function(response){},false);\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('click','#reset_sorting',function() {\r\n\t\t\tjQuery('#sel_overview_sorting').val(\"datedesc\").ddTP('change');\r\n\t\t\tRVS.DOC.trigger('updateSlidersOverview',{val:\"datedesc\", eventparam:\"#reset_sorting\",ignoreCookie:true});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#reset_filtering',function() {\r\n\t\t\tjQuery('#sel_overview_filtering').val(\"all\").ddTP('change');\r\n\t\t\tRVS.DOC.trigger('updateSlidersOverview',{val:\"all\", eventparam:\"#reset_filtering\",ignoreCookie:true});\r\n\t\t});\r\n\r\n\t\t//UPDATE SLIDER OVERVIEW\r\n\t\tRVS.DOC.on('updateSlidersOverview',function(e,p) {\r\n\r\n\t\t\tif (p!==undefined && p.eventparam!==undefined) {\r\n\t\t\t\tvar a = p.eventparam === \"#reset_sorting\" ? p.val===\"datedesc\" ? 0 : 1 : p.val===\"all\" ? 0 : 1,\r\n\t\t\t\t\td = a ===1 ? \"inline-block\" : \"none\";\r\n\t\t\t\ttpGS.gsap.set(p.eventparam,{autoAlpha:a, display:d});\r\n\t\t\t}\r\n\r\n\t\t\tif (p!==undefined && !p.ignoreRebuild) {\r\n\t\t\t\tif (p.val!==undefined && p.ignoreCookie!==true) RVS.F.setCookie(\"rs6_overview_pagination\",p.val,360);\r\n\t\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\t\tupdateOVFilteredList({force:true,keeppage:false,noanimation:false});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//PAGINATION TRIGGER\r\n\t\tRVS.DOC.on('click','.global_library_pagination',function() {\r\n\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\tjQuery('.global_library_pagination.selected').removeClass('selected');\r\n\t\t\tjQuery(this).addClass(\"selected\");\r\n\t\t\tsliderLibrary.selectedPage = parseInt(this.dataset.page,0)===-9999 ? sliderLibrary.selectedPage = parseInt(sliderLibrary.selectedPage,0)-3 : parseInt(this.dataset.page,0)===9999 ? sliderLibrary.selectedPage = parseInt(sliderLibrary.selectedPage,0)+3 : this.dataset.page;\r\n\t\t\tsmartPagination();\r\n\t\t\tdrawOVOverview();\r\n\t\t});\r\n\r\n\r\n\r\n\t\t// SEARCH MODULE TRIGGERING\r\n\t\tRVS.DOC.on('keyup','#searchmodules',function() {\r\n\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\tclearTimeout(window.searchKeyUp);\r\n\t\t\twindow.searchKeyUp = setTimeout(function() {\r\n\t\t\t\t updateOVFilteredList();\r\n\t\t\t},200);\r\n\t\t});\r\n\r\n\t\t// NEW TAG ADDED / REMOVED / SELECTED\r\n\t\tRVS.DOC.on('ddTP:select ddTP:unselect','.elementtags',function(e) {\r\n\r\n\t\t\t//Update Slider Tags\r\n\t\t\tvar sIndex = RVS.F.getOVSliderIndex(e.target.dataset.id);\r\n\t\t\tsliderLibrary.sliders[sIndex].tags = [];\r\n\t\t\tfor (var i in e.target.options) {\r\n\t\t\t\tif(!e.target.options.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (e.target.options[i] !== undefined && e.target.options[i].selected)\r\n\t\t\t\t\tsliderLibrary.sliders[sIndex].tags.push(RVS.F.sanitize_input(e.target.options[i].value.toLowerCase()));\r\n\t\t\t}\r\n\r\n\t\t\t// SAVE TAGS\r\n\t\t\tRVS.F.ajaxRequest('update_slider_tags', {id:sliderLibrary.sliders[sIndex].id, tags:sliderLibrary.sliders[sIndex].tags}, function(response){\r\n\r\n\t\t\t},false);\r\n\r\n\t\t\t//Update General List\r\n\t\t\tsliderLibrary.filters = buildModuleFilters();\r\n\t\t\tjQuery('.elementtags').each(function() {\r\n\t\t\t\tvar s = jQuery(this),\r\n\t\t\t\t\tid = this.dataset.id;\r\n\t\t\t\ts.find('option').remove();\r\n\t\t\t\tfor (var i in sliderLibrary.filters.tags) {\r\n\t\t\t\t\tif(!sliderLibrary.filters.tags.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tvar tag = RVS.F.sanitize_input(sliderLibrary.filters.tags[i].toLowerCase()),\r\n\t\t\t\t\t\tcIndex = RVS.F.getOVSliderIndex(this.dataset.id),\r\n\t\t\t\t\t\tm =  jQuery.inArray(tag,sliderLibrary.sliders[cIndex].tags)>=0 ? ' selected=\"selected\" ' : '';\r\n\t\t\t\t\ts.append('<option value=\"'+tag+'\" '+m+'>'+tag+'</option>');\r\n\t\t\t\t}\r\n\t\t\t\ts.ddTP(\"update\");\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('keyup','.title_container', function(e) {\r\n\t\t\tif (e.keyCode===13) {\r\n\t\t\t\tjQuery(document.activeElement).blur();\r\n\t\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/* SHOW MENU OF SLIDER ELEMENT */\r\n\t\tRVS.DOC.on('click','.show_rsle, .rsle_folder',function() {\r\n\t\t\tvar cl = jQuery(this).closest('.rs_library_element'),\r\n\t\t\t\tbar = cl.find('.rsle_tbar'),\r\n\t\t\t\ta = cl.hasClass(\"selected\"),\r\n\t\t\t\tid = cl.attr('id'),\r\n\t\t\t\tsliderId = cl[0].dataset.sliderid,\r\n\t\t\t\tslideId = (\"\"+cl[0].dataset.slideid).replace('slide_id_','');\r\n\r\n\t\t\tif (!a) {\r\n\t\t\t\thideElementSubMenu({keepOverlay:true, id:id});\r\n\t\t\t\tclearTimeout(window.unsetFocusOverviewOverlay);\r\n\t\t\t\tcl.addClass(\"selected\").addClass(\"menuopen\");\r\n\t\t\t\ttpGS.gsap.fromTo(bar,0.3,{y:\"-100%\"},{opacity:1,y:\"0%\",ease:\"power3.out\"});\r\n\t\t\t\tjQuery('.overview_elements').addClass(\"infocus\");\r\n\r\n\t\t\t\twindow.lastBreacCrumbText = sliderLibrary.inSlideMode ? sliderLibrary.slides[sliderId][slideId].title : sliderLibrary.sliders[RVS.F.getOVSliderIndex(sliderId)].title;\r\n\t\t\t\tjQuery('#rsl_bread_selected').html(window.lastBreacCrumbText);\r\n\r\n\t\t\t} else {\r\n\t\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\t\twindow.lastBreacCrumbText=\"\";\r\n\t\t\t\tjQuery('#rsl_bread_selected').html(window.lastBreacCrumbText);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\r\n\t\t/* HOVER / LEAVE ELEMENTS */\r\n\t\tRVS.DOC.on('mouseenter','.rs_library_element',function() {\r\n\t\t\tif (sliderLibrary.inSlideMode)\r\n\t\t\t\tjQuery('#rsl_bread_selected').html(sliderLibrary.slides[this.dataset.sliderid][(\"\"+this.dataset.slideid).replace('slide_id_','')].title);\r\n\t\t\telse\r\n\t\t\t\tif (this.dataset.sliderid!=-1) jQuery('#rsl_bread_selected').html(sliderLibrary.sliders[RVS.F.getOVSliderIndex(this.dataset.sliderid)].title);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mouseleave','.rs_library_element',function() {\r\n\t\t\twindow.lastBreacCrumbText = window.lastBreacCrumbText===undefined ? \"\" :window.lastBreacCrumbText;\r\n\t\t\tjQuery('#rsl_bread_selected').html(window.lastBreacCrumbText);\r\n\t\t});\r\n\r\n\t\t/* CLICK OUTSIDE A SLIDER ELEMENT */\r\n\t\tRVS.DOC.on('click','.overview_elements_overlay',function() {\r\n\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t});\r\n\r\n\t\t/* SHOW TAGS OF SLIDER ELEMENT */\r\n\t\tRVS.DOC.on('click','.tagsslider',function() {\r\n\t\t\tvar cl = jQuery(this).closest('.rs_library_element');\r\n\t\t\tcl.toggleClass(\"in_tag_view\");\r\n\t\t\tcl.removeClass(\"in_folder_view\");\r\n\t\t});\r\n\r\n\t\t/* RENAME SLIDER */\r\n\t\tRVS.DOC.on('click','.renameslider',function() {\r\n\t\t\tvar cl = jQuery(this).closest('.rs_library_element');\r\n\t\t\tcl.find('.title_container').trigger('focus');\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.unpublishslide',function() {\r\n\t\t\tvar cl = jQuery(this).closest('.rs_library_element'),\r\n\t\t\t\tsliderId = this.dataset.id,\r\n\t\t\t\tslideId = this.dataset.slideid;\r\n\r\n\t\t\tif (sliderLibrary.inSlideMode) RVS.F.ajaxRequest('save_slide_advanced', {slide_id:slideId, params:{publish:{state:\"unpublished\"}}, slider_id:sliderId}, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tcl.addClass(\"unpublished\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.duplicateslide',function() {\r\n\t\t\tvar cl = jQuery(this).closest('.rs_library_element'),\r\n\t\t\t\tsliderId = this.dataset.id,\r\n\t\t\t\tslideId = this.dataset.slideid;\r\n\t\t\tif (sliderLibrary.inSlideMode) RVS.F.ajaxRequest('duplicate_slide', {slide_id:slideId, slider_id:sliderId}, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tRVS.F.clearSlidesOverview(sliderId);\r\n\t\t\t\t\tRVS.F.buildSlidesOverview(sliderId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('click','.publishslide',function() {\r\n\t\t\tvar cl = jQuery(this).closest('.rs_library_element');\r\n\t\t\t\tsliderId = this.dataset.id,\r\n\t\t\t\tslideId = this.dataset.slideid;\r\n\r\n\t\t\tif (sliderLibrary.inSlideMode) RVS.F.ajaxRequest('save_slide_advanced', {slide_id:slideId, params:{publish:{state:\"published\"}}, slider_id:sliderId}, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tcl.removeClass(\"unpublished\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('click','.adminthumb',function() {\r\n\t\t\tvar cl = jQuery(this).closest('.rs_library_element'),\r\n\t\t\t\tsliderIndex = RVS.F.getOVSliderIndex(this.dataset.id),\r\n\t\t\t\tsliderId = this.dataset.id,\r\n\t\t\t\tslideId = this.dataset.slideid;\r\n\r\n\t\t\tRVS.F.openAddImageDialog(RVS_LANG.choose_image,function(src, srcId){\r\n\t\t\t\tRVS.F.ajaxRequest('save_slide_advanced', {slide_id:slideId, params:{thumb:{customAdminThumbSrc:src, customAdminThumbSrcId:srcId}}, slider_id:sliderId}, function(response){\r\n\t\t\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\tsliderLibrary.sliders[sliderIndex].bg.type=\"image\";\r\n\t\t\t\t\t\tsliderLibrary.sliders[sliderIndex].bg.src=src;\r\n\t\t\t\t\t\tRVS.F.setObjBg(sliderLibrary.sliders[sliderIndex] , sliderLibrary.sliders[sliderIndex].ref.find('.image_container'));\r\n\t\t\t\t\t\tif (sliderLibrary.slides!==undefined && sliderLibrary.slides[sliderId]!==undefined && sliderLibrary.slides[sliderId][slideId]!==undefined) {\r\n\t\t\t\t\t\t\tsliderLibrary.slides[sliderId][slideId].bg = {type : \"image\", src:src};\r\n\t\t\t\t\t\t\tRVS.F.setObjBg(sliderLibrary.slides[sliderId][slideId], sliderLibrary.slides[sliderId][slideId].ref.find('.image_container'));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t},false);\r\n\t\t});\r\n\r\n\r\n\r\n\t\t/* CHANGE TITLE */\r\n\t\tRVS.DOC.on('change','.title_container',function() {\r\n\t\t\tvar cInp = this,\r\n\t\t\t\tsliderIndex = RVS.F.getOVSliderIndex(this.dataset.id),\r\n\t\t\t\tsliderId = this.dataset.id,\r\n\t\t\t\tslideId = this.dataset.slideid,\r\n\t\t\t\tnewtitle = this.value;\r\n\t\t\tif (sliderLibrary.inSlideMode) {\r\n\t\t\t\tRVS.F.ajaxRequest('save_slide_advanced', {slide_id:slideId, params:{title:this.value}, slider_id:sliderId}, function(response){\r\n\t\t\t\t\tif (response.success) cInp.value = newtitle;\r\n\t\t\t\t\tsliderLibrary.slides[sliderId][slideId].title = newtitle;\r\n\t\t\t\t});\r\n\r\n\t\t\t} else {\r\n\t\t\t\tRVS.F.ajaxRequest('update_slider_name', {id:this.dataset.id, title:this.value}, function(response){\r\n\t\t\t\t\tif (response.success) cInp.value = response.title;\r\n\t\t\t\t\tsliderLibrary.sliders[sliderIndex].title = response.title;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfunction collectAllInFolder(list,sindex) {\r\n\t\t\tlist = list===undefined ? [] : list;\r\n\t\t\tvar folder = sliderLibrary.sliders[sindex];\r\n\r\n\t\t\tfor (var c in folder.children) {\r\n\t\t\t\tif(!folder.children.hasOwnProperty(c)) continue;\r\n\t\t\t\tvar childindex = RVS.F.getOVSliderIndex(folder.children[c]);\r\n\t\t\t\tif (sliderLibrary.sliders[childindex] && sliderLibrary.sliders[childindex].folder) list = collectAllInFolder(list,childindex);\r\n\t\t\t\tif (sliderLibrary.sliders[childindex]) list.push(folder.children[c]);\r\n\t\t\t}\r\n\t\t\treturn list;\r\n\t\t}\r\n\t\tRVS.DOC.on('click','.optimizeslider',function() {\r\n\t\t\tRVS.F.openOptimizer({sliderid:this.dataset.id});\r\n\t\t});\r\n\r\n\t\t/* DELETE SLIDER & FOLDER*/\r\n\t\tRVS.DOC.on('click','.deleteslider',function() {\r\n\t\t\t// IF IT IS A SLIDE)\r\n\t\t\tif (sliderLibrary.inSlideMode) {\r\n\t\t\t\twindow.deleteSlide = this.dataset.slideid;\t\t//(\"\"+cl[0].dataset.slideid).replace('slide_id_','');\r\n\t\t\t\twindow.deleteSlide_sliderId = this.dataset.id;\r\n\t\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\t\t//Last Slide, not Deletable\r\n\t\t\t\tvar l = 0;\r\n\t\t\t\tfor (var i in sliderLibrary.slides[sliderLibrary.selectedSlider]) if (sliderLibrary.slides[sliderLibrary.selectedSlider].hasOwnProperty(i)) l++;\r\n\r\n\t\t\t\tif (l<2) {\r\n\t\t\t\t\tRVS.F.showInfo({content:RVS_LANG.lastslidenodelete, type:\"error\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\t\ticon:'delete',\r\n\t\t\t\t\t\ttitle:RVS_LANG.deleteslide,\r\n\t\t\t\t\t\tmaintext:RVS_LANG.cannotbeundone,\r\n\t\t\t\t\t\tsubtext:RVS_LANG.areyousuretodelete+\"<strong>\"+sliderLibrary.slides[sliderLibrary.selectedSlider][window.deleteSlide].title+\"</strong> ?\",\r\n\t\t\t\t\t\tdo:{\r\n\t\t\t\t\t\t\ticon:\"delete\",\r\n\t\t\t\t\t\t\ttext:RVS_LANG.yesdeleteslide,\r\n\t\t\t\t\t\t\tevent: \"deletemarkedslide\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcancel:{\r\n\t\t\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\t\t\ttext:RVS_LANG.cancel\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tswapbuttons:true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar sindex = RVS.F.getOVSliderIndex(this.dataset.id);\r\n\t\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\t\twindow.deleteSlidersIndex = 0;\r\n\r\n\t\t\t\t//IF FOLDER\r\n\t\t\t\tif (sliderLibrary.sliders[sindex].folder) {\r\n\t\t\t\t\twindow.deleteSliders = collectAllInFolder([],sindex);\r\n\t\t\t\t\twindow.deleteSliders.push(this.dataset.id);\r\n\t\t\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\t\ticon:'delete',\r\n\t\t\t\t\t\ttitle:RVS_LANG.deleteslider,\r\n\t\t\t\t\t\tmaintext:RVS_LANG.cannotbeundone,\r\n\t\t\t\t\t\tsubtext:RVS_LANG.areyousuretodeleteeverything+\" <strong>\"+sliderLibrary.sliders[RVS.F.getOVSliderIndex(this.dataset.id)].title+\"</strong> ?\",\r\n\t\t\t\t\t\tdo:{\r\n\t\t\t\t\t\t\ticon:\"delete\",\r\n\t\t\t\t\t\t\ttext:RVS_LANG.yesdeleteall,\r\n\t\t\t\t\t\t\tevent: \"deletemarkedslider\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcancel:{\r\n\t\t\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\t\t\ttext:RVS_LANG.cancel\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tswapbuttons:true\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\twindow.deleteSliders = [this.dataset.id];\r\n\t\t\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\t\ticon:'delete',\r\n\t\t\t\t\t\ttitle:RVS_LANG.deleteslider,\r\n\t\t\t\t\t\tmaintext:RVS_LANG.cannotbeundone,\r\n\t\t\t\t\t\tsubtext:RVS_LANG.areyousuretodelete+\" <strong>\"+sliderLibrary.sliders[RVS.F.getOVSliderIndex(this.dataset.id)].title+\"</strong> ?\",\r\n\t\t\t\t\t\tdo:{\r\n\t\t\t\t\t\t\ticon:\"delete\",\r\n\t\t\t\t\t\t\ttext:RVS_LANG.yesdelete,\r\n\t\t\t\t\t\t\tevent: \"deletemarkedslider\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcancel:{\r\n\t\t\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\t\t\ttext:RVS_LANG.cancel\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tswapbuttons:true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('deletemarkedslide',function() {\r\n\t\t\tRVS.F.ajaxRequest('delete_slide',{slide_id:window.deleteSlide, slider_id:window.deleteSlide_sliderId},function(response) {\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tif (sliderLibrary.slides[sliderLibrary.selectedSlider][window.deleteSlide]!==undefined) {\r\n\t\t\t\t\t\tRVS.F.clearSlidesOverview(window.deleteSlide_sliderId);\r\n\t\t\t\t\t\tRVS.F.buildSlidesOverview(window.deleteSlide_sliderId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},undefined,undefined,RVS_LANG.deletingsingleslide+\"<span style='display:block;font-size:20px;line-height:25px'>\"+sliderLibrary.slides[sliderLibrary.selectedSlider][window.deleteSlide].title+\"</span>\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('deletemarkedslider',function() {\r\n\t\t\twindow.deletedSliderSINDEX = RVS.F.getOVSliderIndex(window.deleteSliders[window.deleteSlidersIndex]);\r\n\t\t\twindow.mayDeleteFolder = sliderLibrary.sliders[window.deletedSliderSINDEX];\r\n\t\t\tRVS.F.ajaxRequest('delete_slider', {id:window.deleteSliders[window.deleteSlidersIndex]}, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tif (window.mayDeleteFolder!==undefined && window.mayDeleteFolder.parent!=-1) {\r\n\t\t\t\t\t\tvar pindex = RVS.F.getOVSliderIndex(window.mayDeleteFolder.parent);\r\n\t\t\t\t\t\tif (sliderLibrary.sliders[pindex]) sliderLibrary.sliders[pindex].children.splice(jQuery.inArray(window.mayDeleteFolder.id,sliderLibrary.sliders[pindex].children),1); else console.log(\"Info:Folder with Index \"+pindex+\"  is not existing any more.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (sliderLibrary.sliders[window.deletedSliderSINDEX] && sliderLibrary.sliders[window.deletedSliderSINDEX].ref) sliderLibrary.sliders[window.deletedSliderSINDEX].ref.remove();\r\n\t\t\t\t\tjQuery('#slide_id_'+window.deleteSliders[window.deleteSlidersIndex]).remove();\r\n\t\t\t\t\tsliderLibrary.sliders.splice(window.deletedSliderSINDEX,1);\r\n\t\t\t\t}\r\n\t\t\t\twindow.deleteSlidersIndex++;\r\n\t\t\t\tif (window.deleteSlidersIndex<window.deleteSliders.length)\r\n\t\t\t\t\tRVS.DOC.trigger('deletemarkedslider');\r\n\t\t\t\telse {\r\n\t\t\t\t\tsliderLibrary.filters = buildModuleFilters();\r\n\t\t\t\t\tupdateOVFilteredList({force:true,keeppage:true,noanimation:false});\r\n\t\t\t\t}\r\n\t\t\t},undefined,undefined,RVS_LANG.deletingslider+\"<span style='display:block;font-size:20px;line-height:25px'>\"+(sliderLibrary.sliders[window.deletedSliderSINDEX] ? sliderLibrary.sliders[window.deletedSliderSINDEX].alias : window.deletedSliderSINDEX) +\"</span>\");\r\n\t\t});\r\n\r\n\t\t\t/* EXPORT SLIDER */\r\n\t\tRVS.DOC.on('click','.exportslider, .exporthtmlslider',function() {\r\n\t\t\tvar param = this.className.indexOf(\"exportslider\")>=0 ? \"export_slider\" : \"export_slider_html\";\r\n\t\t\twindow.exportSliders = [this.dataset.id];\r\n\t\t\twindow.exportSlidersIndex = 0;\r\n\r\n\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\tbgopacity:0.85,\r\n\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\ticon:'cloud_download',\r\n\t\t\t\ttitle:RVS_LANG.exportslider+(param===\"export_slider_html\" ? \" \"+RVS_LANG.ashtmlexport : \"\"),\r\n\t\t\t\tmaintext:RVS_LANG.exportslidertxt,\r\n\t\t\t\tsubtext:RVS_LANG.areyousuretoexport+sliderLibrary.sliders[RVS.F.getOVSliderIndex(this.dataset.id)].alias,\r\n\t\t\t\tdo:{\r\n\t\t\t\t\ticon:\"cloud_download\",\r\n\t\t\t\t\ttext:RVS_LANG.yesexport,\r\n\t\t\t\t\tevent: \"exportmarkedslider\",\r\n\t\t\t\t\teventparam:param\r\n\t\t\t\t},\r\n\t\t\t\tcancel:{\r\n\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\ttext:RVS_LANG.cancel\r\n\t\t\t\t},\r\n\t\t\t\tswapbuttons:true\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\r\n\r\n\r\n\t\tRVS.DOC.on('exportmarkedslider',function(e,calltype) {\r\n\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\twindow.lastBreacCrumbText=\"\";\r\n\t\t\tjQuery('#rsl_bread_selected').html(window.lastBreacCrumbText);\r\n\t\t\tlocation.href = ajaxurl + ((ajaxurl.indexOf('?') === -1) ? '?' : '&') + 'action=' + RVS.ENV.plugin_dir + '_ajax_action&client_action='+calltype+'&nonce=' + RVS.ENV.nonce + '&id=' + window.exportSliders[window.exportSlidersIndex];\r\n\t\t});\r\n\r\n\r\n\t\t/* MENU HANDLINGS */\r\n\t\tRVS.DOC.on('click','#collapse-button',overviewMenuResize);\r\n\t\tRVS.DOC.on('click','#rbm_globalsettings .rbm_close',function() {\r\n\t\t\tRVS.F.RSDialog.close();\r\n\t\t});\r\n\t\tRVS.DOC.on('click','.rso_scrollmenuitem',function() {\r\n\t\t\tif (this.id===\"globalsettings\") {\r\n\t\t\t\topenGlobalSettings();\r\n\t\t\t\treturn;\r\n\t\t\t} else\r\n\t\t\tif (this.id===\"rso_menu_notices\") {\r\n\t\t\t\treturn;\r\n\t\t\t} else\r\n\t\t\tif (this.id===\"rso_menu_updatewarning\") {\r\n\t\t\t\treturn;\r\n\t\t\t} else\r\n\t\t\tif (this.id===\"contactsupport\") {\r\n\r\n\t\t\t\tif (RVS.ENV.activated!==\"true\" && RVS.ENV.activated!==true) {\r\n\t\t\t\t\tRVS.F.showRegisterSliderInfo();\r\n\t\t\t\t\treturn;\r\n                } else window.open('http://support.nwdthemes.com/','_blank');\r\n\r\n\r\n\t\t\t\treturn;\r\n\t\t\t} else\r\n\t\t\tif (this.id===\"linktodocumentation\") {\r\n                window.open('https://www.sliderrevolution.com/help-center/?utm_source=admin&utm_medium=button&utm_campaign=srusers&utm_content=faq','_blank');\r\n                return;\r\n            } else\r\n            if (this.id===\"buynow_notregistered\") {\r\n                window.open('https://account.sliderrevolution.com/portal/pricing/','_blank');\r\n                return;\r\n\t\t\t}\r\n\t\t\toverviewMenuScroll();\r\n\t\t\tvar o = { val:window.scroll_top};\r\n\t\t\ttpGS.gsap.to(o,0.6,{val:window.ov_scroll_targets[this.dataset.ostref].top-200, onUpdate:function() {\r\n\t\t\t\tRVS.WIN.scrollTop(o.val);\r\n\t\t\t}, ease:\"power3.out\"});\r\n\t\t\toverviewMenuScroll();\r\n\t\t});\r\n\t\tRVS.WIN.on('resize', overviewMenuResize).on('scroll',overviewMenuScroll);\r\n\r\n\t\t/* ENTER INTO FOLDER */\r\n\t\tRVS.DOC.on('click','.enter_into_folder',function() {\r\n\t\t\tsliderLibrary.selectedFolder = this.dataset.folderid;\r\n\t\t\tresetAllOVFilters();\r\n\t\t\tupdateOVFilteredList();\r\n\r\n\t\t});\r\n\r\n\t\t/* ADD BLANK SLIDER */\r\n\t\tRVS.DOC.on('click','#new_blank_slider',function() {\r\n\t\t\ttpGS.gsap.to(jQuery('.page-wrapper'),0.5,{opacity:0});\r\n\t\t\tjQuery('#waitaminute').appendTo('body');\r\n\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.editorisLoading+\"<span style='display:block;font-size:20px;line-height:25px'>\"+RVS_LANG.addingnewblankmodule+\"</span>\"});\r\n\t\t\tRVS.F.ajaxRequest('create_slider',{},function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tvar parindex = RVS.F.getOVSliderIndex(sliderLibrary.selectedFolder);\r\n\t\t\t\t\tif (parindex!==-1) {\r\n\t\t\t\t\t\tsliderLibrary.sliders[parindex].children.push(response.slider_id);\r\n\t\t\t\t\t\tvar slideid = response.slide_id;\r\n\t\t\t\t\t\tRVS.F.ajaxRequest('save_slider_folder', {id:sliderLibrary.selectedFolder, children:sliderLibrary.sliders[parindex].children}, function(response){\r\n\t\t\t\t\t\t\twindow.location.href = RVS.ENV.admin_url+\"?id=\"+slideid;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else\r\n\t\t\t\t\twindow.location.href = RVS.ENV.admin_url+\"?id=\"+response.slide_id;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// CHANGE TO HIGH CONTRAST\r\n\t\tRVS.DOC.on('highContrast',function(e,param) {\r\n\t\t\tif (param!==undefined && param.val!==undefined)\r\n\t\t\t  if( param.val===true) jQuery(document.body).addClass('rs-high-contrast'); else jQuery(document.body).removeClass('rs-high-contrast');\r\n\r\n\t\t})\r\n\r\n\t\t// ADD NEW SLIDER EVENT\r\n\t\tRVS.DOC.on('addNewSlider',function(e,param){\r\n\t\t\tif (param!==undefined && param.slider!==undefined) {\r\n\t\t\t\tparam.slider.parent = sliderLibrary.selectedFolder;\r\n\t\t\t\tsliderLibrary.sliders.push(param.slider);\r\n\t\t\t\t// SAVE THE PARENT FOLDER STRUCTURE ALSO\r\n\t\t\t\tif (sliderLibrary.selectedFolder!==-1) {\r\n\t\t\t\t\tvar parindex = RVS.F.getOVSliderIndex(sliderLibrary.selectedFolder);\r\n\t\t\t\t\tif (parindex!==-1) {\r\n\t\t\t\t\t\tsliderLibrary.sliders[parindex].children.push(param.slider.id);\r\n\t\t\t\t\t\t//If Folder Already Moved to the Right Container\r\n\t\t\t\t\t\tif (!param.ignoreAjaxFolderMove)\r\n\t\t\t\t\t\t\tRVS.F.ajaxRequest('save_slider_folder', {id:sliderLibrary.selectedFolder, children:sliderLibrary.sliders[parindex].children}, function(response){},param.silent);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsliderLibrary.filters = buildModuleFilters();\r\n\t\t\t \tresetAllOVFilters();\r\n\t\t\t\tjQuery('#pagination_select_2').ddTP('change');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('addDraftPage',function(e,param) {\r\n\t\t\tRVS.F.ajaxRequest('create_draft_page',{slider_ids:param.pages, modals:param.modals, additions:param.additions},function(response) {\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\twindow.visitURLCreatedPage = response.open;\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\t\t\ticon:'fiber_new',\r\n\t\t\t\t\t\t\ttitle:RVS_LANG.blank_page_added,\r\n\t\t\t\t\t\t\tmaintext:RVS_LANG.blank_page_created,\r\n\t\t\t\t\t\t\tsubtext:(response.edit!==undefined && response.edit.length>0 ? RVS_LANG.edit_page+': <a class=\"blankpagelink\" href=\"'+response.edit+'\" target=\"blank\" rel=\"noopener\">'+response.edit.substr(0, 60)+'...</a>' : ''),\r\n\t\t\t\t\t\t\tdo:{\r\n\t\t\t\t\t\t\t\ticon:\"exit_to_app\",\r\n\t\t\t\t\t\t\t\ttext:RVS_LANG.visit_page,\r\n\t\t\t\t\t\t\t\tevent: \"visitcreatedpage\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcancel:{\r\n\t\t\t\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\t\t\t\ttext:RVS_LANG.closeandstay\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tswapbuttons:true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},200);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('visitcreatedpage',function() {\r\n\t\t\twindow.open(window.visitURLCreatedPage,'_blank');\r\n\t\t});\r\n\r\n\t\t// TRIGGER THE SLIDER IMPORT FUNCTION\r\n\t\tRVS.DOC.on('click','#new_slider_import',function() {\r\n\t\t\tjQuery('#filedrop').remove();\r\n\t\t\tRVS.F.browserDroppable.init({success:\"addNewSlider\"});\r\n\t\t});\r\n\r\n\t\t// DUPLICATE SLIDER\r\n\t\tRVS.DOC.on('click','.duplicateslider',function(){\r\n\t\t\tvar sindex = RVS.F.getOVSliderIndex(this.dataset.id),\r\n\t\t\t\tpar = sindex==-1 ? -1 : sliderLibrary.sliders[sindex].parent,\r\n\t\t\t\tparindex = RVS.F.getOVSliderIndex(par);\r\n\r\n\t\t\tRVS.F.ajaxRequest('duplicate_slider', {id:this.dataset.id},function(response) {\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tresponse.slider.parent = par;\r\n\t\t\t\t\tsliderLibrary.sliders.push(response.slider);\r\n\t\t\t\t\tif (parindex!==-1) {\r\n\t\t\t\t\t\tsliderLibrary.sliders[parindex].children.push(response.slider.id);\r\n\t\t\t\t\t\tRVS.F.ajaxRequest('save_slider_folder', {id:par, children:sliderLibrary.sliders[parindex].children}, function(response){});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//Save Folder due its Children also\r\n\t\t\t\t\tsliderLibrary.filters = buildModuleFilters();\r\n\t\t\t \t\tresetAllOVFilters();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\r\n\t\t/*\r\n\t\tMOUSE INTERACTION OVER SCROLLBAR FOLDERLISTS\r\n\t\t*/\r\n\t\t/*RVS.DOC.on('mouseover','#slider_folders_wrap',function(e) {\r\n\t\t\twindow.scrollInterval = setInterval(function() {\r\n\t\t\t\tvar a = {top:sliderLibrary.sfw.scrollTop()};\r\n\t\t\t\ttpGS.gsap.to(a,0.1,{top:sliderLibrary.sfw.scrollTop() + window.scrollIntervalOffset, onUpdate:function() {\r\n\t\t\t\t\tsliderLibrary.sfw.scrollTop(a.top);\r\n\t\t\t\t}});\r\n\t\t\t},110);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mousemove','#slider_folders_wrap',function(e) {\r\n\r\n\t\t\tvar y = (e.pageY - jQuery(this).offset().top) - window.innerHeight/2,\r\n\t\t\t\tzone = Math.round(window.innerHeight / 3),\r\n\t\t\t\t_y = y<0 ? y + zone/2 : y - zone/2;\r\n\t\t\t\t_y = y<0 ? Math.min(_y,0) : Math.max(_y,0);\r\n\t\t\twindow.scrollIntervalOffset = Math.round(_y)/5;\r\n\t\t});\r\n\t\tRVS.DOC.on('mouseleave','#slider_folders_wrap',function(e) {\r\n\t\t\t\tclearInterval(window.scrollInterval);\r\n\t\t});*/\r\n\r\n\t\tRVS.DOC.on('dragstart dragend',function(e) {\r\n\t\t\tif (e.type===\"dragstart\") RVS.S.dragginginside = true;\r\n\t\t\tif (e.type===\"dragend\") RVS.S.dragginginside = false;\r\n\t\t});\r\n\r\n\t\t// DRAG OVER SLIDER OVERVIEW SHOULD IMPORT FILE\r\n\t\t jQuery('#rs_overview').on(' dragover dragenter ', function(e) {\r\n\t\t \tif (!RVS.S.dragginginside && jQuery('#filedrop').length===0)\r\n\t\t \t\tRVS.F.browserDroppable.init({success:\"addNewSlider\"});\r\n\t\t });\r\n\r\n\r\n\t\t /*\r\n\t\t ACTIVATE, DEACTIVATE PLUGIN\r\n\t\t */\r\n\t\t RVS.DOC.on('click','#activateplugin',function() {\r\n\t\t \tif (RVS.ENV.activated==\"true\" || RVS.ENV.activated==true) {\r\n\t\t \t\tRVS.F.ajaxRequest('deactivate_plugin', {},function(response) {\r\n\t\t \t\t\tif (response.success) {\r\n\t\t \t\t\t\tRVS.ENV.activated = false;\r\n\t\t \t\t\t\tRVS.ENV.code = \"\";\r\n\t\t \t\t\t\tRVS.F.updateDraw();\r\n\t\t\t\t\t\tRVS.F.isActivated();\r\n\t\t\t\t\t\tRVS.F.notifications();\r\n\t\t\t\t\t\tRVS.F.showDeactivatedWarning();\r\n\t\t\t\t\t\tRVS.F.activeNotActive();\r\n\t\t \t\t\t}\r\n\t\t \t\t});\r\n\t\t \t} else {\r\n\t\t \t\tvar code = jQuery('#purchasekey').val();\r\n\t\t \t\tRVS.F.ajaxRequest('activate_plugin', {code:code},function(response) {\r\n\r\n\t\t \t\t\tif (response.success) {\r\n\t\t \t\t\t\tRVS.ENV.activated = true;\r\n\t\t \t\t\t\tRVS.ENV.code = code;\r\n\t\t \t\t\t\tRVS.F.updateDraw();\r\n\t\t\t\t\t\tRVS.F.isActivated();\r\n\t\t\t\t\t\tRVS.F.notifications();\r\n\t\t\t\t\t\tRVS.F.activeNotActive();\r\n\t\t \t\t\t}\r\n\t\t \t\t});\r\n\t\t \t}\r\n\t\t });\r\n\r\n\t\tRVS.F.activeNotActive = function() {\r\n\t\t\tRVS.C.existing_sliders = RVS.C.existing_sliders===undefined ? document.getElementById('existing_sliders') : RVS.C.existing_sliders;\r\n\t\t\tif (RVS.ENV.activated)\r\n\t\t\t\tRVS.C.existing_sliders.classList.remove('rs_n_ac_n');\r\n\t\t\telse\r\n\t\t\t\tRVS.C.existing_sliders.classList.add('rs_n_ac_n');\r\n\t\t}\r\n\t\t /*\r\n\t\t CHECK FOR UPDATES\r\n\t\t */\r\n\t\t RVS.DOC.on('click','#check_for_updates',function() {\r\n\t\t \tRVS.F.ajaxRequest('check_for_updates',{},function(response) {\r\n\t\t \t\tif (response.success) {\r\n\t\t \t\t\tRVS.ENV.latest_version = response.version;\r\n\t\t \t\t\tjQuery('.available_latest_version').html(RVS.ENV.latest_version);\r\n\t\t \t\t\tRVS.F.updateDraw();\r\n\t\t\t\t\tRVS.F.isActivated();\r\n\t\t \t\t}\r\n\t\t \t});\r\n\t\t });\r\n\r\n\t\t /*\r\n\t\t PREVIEW SLIDER\r\n\t\t */\r\n\t\t RVS.DOC.on('click','.previewslider',function() {\r\n\t\t \t//RVS.F.ajaxRequest('preview_slider',{id:this.dataset.id},function(response) {});\r\n\t\t \tvar slide = sliderLibrary.sliders[RVS.F.getOVSliderIndex(this.dataset.id)];\r\n\t\t \tRVS.F.openPreivew({title:this.dataset.title,alias:slide.alias, id:this.dataset.id});\r\n\t\t \thideElementSubMenu({keepOverlay:false});\r\n\t\t\twindow.lastBreacCrumbText=\"\";\r\n\t\t\tjQuery('#rsl_bread_selected').html(window.lastBreacCrumbText);\r\n\t\t });\r\n\r\n\t\t /*\r\n\t\t SIGN UP\r\n\t\t */\r\n\t\t RVS.DOC.on('click','#signuptonewsletter',function() {\r\n\t\t \tvar mail = jQuery('#newsletter_mail').val();\r\n\t\t \tif (mail.length>0 && mail.indexOf(\"@\")>=0)\r\n\t\t \t\tRVS.F.ajaxRequest('subscribe_to_newsletter',{email:mail},function(response) {});\r\n\r\n\t\t });\r\n\r\n\t\t /*\r\n\t\t CHECK FOR TP SERVER\r\n\t\t */\r\n\t\t RVS.DOC.on('click','#check_for_themepunchserver',function() {\r\n\t\t \tRVS.F.ajaxRequest('check_system',{},function(response) {\r\n\t\t \t\tif (response.success) {\r\n\t\t \t\t\twindow.rs_system = RVS.F.safeExtend(true,{},response.system);\r\n\t\t \t\t\tupdateSysChecks();\r\n\t\t \t\t}\r\n\t\t \t});\r\n\t\t });\r\n\r\n\t\t RVS.DOC.on('click','.embedslider',function() {\r\n\r\n\t\t \tvar slide = sliderLibrary.sliders[RVS.F.getOVSliderIndex(this.dataset.id)],\r\n\t\t \t\ttxt = '<i class=\"material-icons fullpage_main_icon\">playlist_add</i>';\r\n\t\t\ttxt += '<div class=\"fullpage_title\">'+RVS_LANG.embedingLine1+'</div>';\r\n\t\t\ttxt += '<div class=\"fullpage_content\">'+RVS_LANG.embedingLine2+'</div>';\r\n\t\t\ttxt += '<div class=\"inputrow\">';\r\n\t\t\ttxt += \"<input class='inputtocopy' id='embed_shortcode_a' readonly value='{{block class=\\\"Nwdthemes\\\\Revslider\\\\Block\\\\Revslider\\\" alias=\\\"\"+slide.alias+\"\\\"}}'/>\";\r\n\t\t\ttxt += '<div class=\"basic_action_button onlyicon copyshortcode\" data-clipboard-action=\"copy\" data-clipboard-target=\"#embed_shortcode_a\"><i class=\"material-icons\">content_copy</i></div>';\r\n\t\t\ttxt += '</div>';\r\n\t\t\ttxt += '<div class=\"div40\"></div>';\r\n\t\t\ttxt += '<div class=\"fullpage_content\">'+RVS_LANG.embedingLine2a+'</div>';\r\n\t\t\ttxt += '<div class=\"div20\"></div>';\r\n\t\t\ttxt += '<div class=\"fullpage_content\">'+RVS_LANG.embedingLine3+'</div>';\r\n\t\t\ttxt += '<div class=\"div40\"></div>';\r\n\t\t\ttxt += '<div class=\"fullpage_title\">'+RVS_LANG.embedingLine4+'</div>';\r\n\t\t\ttxt += '<div class=\"fullpage_content\">'+RVS_LANG.embedingLine5+'</div>';\r\n\t\t\ttxt += '<div class=\"inputrow\">';\r\n\t\t\ttxt += \"<input class='inputtocopy' readonly id='embed_shortcode_b' value='<block class=\\\"Nwdthemes\\\\Revslider\\\\Block\\\\Revslider\\\"><arguments><argument name=\\\"alias\\\" xsi:type=\\\"string\\\">\"+slide.alias+\"</argument></arguments></block>'>\";\r\n\t\t\ttxt += '<div class=\"basic_action_button onlyicon copyshortcode\" data-clipboard-action=\"copy\" data-clipboard-target=\"#embed_shortcode_b\"><i class=\"material-icons\">content_copy</i></div>';\r\n\t\t\ttxt += '</div>';\r\n\t\t\ttxt += '<div class=\"div15\"></div>';\r\n\t\t\ttxt += '<div class=\"fullpage_content\">'+RVS_LANG.embedingLine6+'</div>';\r\n\t\t\ttxt += '<div class=\"inputrow\">';\r\n\t\t\ttxt += '<input class=\"inputtocopy\" readonly id=\"embed_shortcode_c\" value=\"echo $block->getLayout()->createBlock(\\'Nwdthemes\\\\Revslider\\\\Block\\\\Revslider\\')->setAlias(\\''+slide.alias+'\\')->toHtml();\">';\r\n\t\t\ttxt += '<div class=\"basic_action_button onlyicon copyshortcode\" data-clipboard-action=\"copy\" data-clipboard-target=\"#embed_shortcode_c\"><i class=\"material-icons\">content_copy</i></div>';\r\n\t\t\ttxt += '</div>';\r\n\t\t\tRVS.F.fullPageInfo.init({content:txt});\r\n\t\t\tRVS.F.initCopyClipboard('.copyshortcode');\r\n\t\t\thideElementSubMenu({keepOverlay:false});\r\n\t\t\twindow.lastBreacCrumbText=\"\";\r\n\t\t\tjQuery('#rsl_bread_selected').html(window.lastBreacCrumbText);\r\n\t\t });\r\n\r\n\t\t // OPEN TEMPLATE LIBRARY\r\n\t\t RVS.DOC.on('click','#new_slider_from_template',function() {\r\n\t\t \t//if (RVS.ENV.newTemplatesCounter) {\r\n\t\t \t\tRVS.ENV.newTemplatesCounter.style.display = \"none\";\r\n\t\t \t\t//Call Ajax to reset Date.\r\n\t\t \t//}\r\n\t\t \tRVS.F.openObjectLibrary({types:[\"moduletemplates\"],filter:\"all\", selected:[\"moduletemplates\"], success:{slider:\"addNewSlider\", draftpage:\"addDraftPage\"}});\r\n\t\t });\r\n\t};\r\n\r\n\r\n/*******************************\r\n \tINTERNAL FUNCTIONS\r\n*******************************/\r\n\r\n\t/*\r\n\tUPDATE SLIDES ORDER\r\n\t */\r\n\tfunction updateSlidesOrder() {\r\n\t\tsliderLibrary.slidesOrder =sliderLibrary.slidesOrder===undefined ? {} : sliderLibrary.slidesOrder;\r\n\t\tsliderLibrary.slidesOrder[sliderLibrary.selectedSlider] = new Array(500);\r\n\t\tfor (var i in sliderLibrary.slides[sliderLibrary.selectedSlider]) {\r\n\t\t\tif (!sliderLibrary.slides[sliderLibrary.selectedSlider].hasOwnProperty(i)) continue;\r\n\t\t\tsliderLibrary.slidesOrder[sliderLibrary.selectedSlider][parseInt(sliderLibrary.slides[sliderLibrary.selectedSlider][i].order,0)] = sliderLibrary.slides[sliderLibrary.selectedSlider][i].id;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t/*\r\n\tDARKEN OF WP ELEMENTS\r\n\t*/\r\n\tfunction initOverViewMenu() {\r\n\t\twindow.ov_scroll_targets = [];\r\n\t\tvar id = 0;\r\n\t\tjQuery('.rso_scrollmenuitem').each(function() {\r\n\t\t\tif (this.dataset.ref!==undefined) {\r\n\r\n\t\t\t\twindow.ov_scroll_targets.push({\r\n\t\t\t\t\tobj : jQuery(this.dataset.ref),\r\n\t\t\t\t\ttop : jQuery(this.dataset.ref).offset().top,\r\n\t\t\t\t\theight : jQuery(this.dataset.ref).height(),\r\n\t\t\t\t\tmenu : jQuery(this),\r\n\t\t\t\t\tmenu_js : this\r\n\t\t\t\t});\r\n\t\t\t\tthis.dataset.ostref = id;\r\n\t\t\t\tid++;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\toverviewMenuResize();\r\n\r\n\t\toverviewMenuScroll();\r\n\t\ttpGS.gsap.to('#rs_overview_menu',1,{opacity:1,ease:\"power3.out\"});\r\n\t}\r\n\r\n\tfunction overviewMenuScroll() {\r\n\t\twindow.scroll_top = RVS.WIN.scrollTop();\r\n\t\tvar lastitem = -1,\r\n\t\t\tlasttop = 0;\r\n\t\twindow.cacheOMT = jQuery('#rs_overview').offset().top;\r\n\t\ttpGS.gsap.set(RVS.C.rsOVM,{top:Math.max(0, (window.cacheOMT-window.scroll_top))});\r\n\r\n\t\tfor (var i in window.ov_scroll_targets) {\r\n\t\t\tif(!window.ov_scroll_targets.hasOwnProperty(i)) continue;\r\n\t\t\tif (window.ov_scroll_targets[i].obj.length>0) {\r\n\t\t\t\twindow.ov_scroll_targets[i].top = window.ov_scroll_targets[i].obj.offset().top;\r\n\t\t\t\tif (!window.ov_scroll_targets[i].shown && window.ov_scroll_targets[i].top<(window.scroll_top+window.outerHeight)-200){\r\n\t\t\t\t\ttpGS.gsap.to(window.ov_scroll_targets[i].obj[0],1,{autoAlpha:1,ease:\"power3.inOut\"});\r\n\t\t\t\t\twindow.ov_scroll_targets[i].shown = true;\r\n\t\t\t\t}\r\n\t\t\t\twindow.ov_scroll_targets[i].height = window.ov_scroll_targets[i].obj.height();\r\n\t\t\t\tif (window.scroll_top+200>=window.ov_scroll_targets[i].top && window.scroll_top<=window.ov_scroll_targets[i].top + window.ov_scroll_targets[i].height) lastitem = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlastitem = lastitem===-1 ? window.ov_scroll_targets.length-1 : lastitem;\r\n\t\tjQuery('.rso_scrollmenuitem').removeClass(\"active\");\r\n\t\twindow.ov_scroll_targets[lastitem].menu.addClass(\"active\");\r\n\r\n\r\n\t}\r\n\r\n\tfunction overviewMenuResize() {\r\n\t\ttpGS.gsap.set('#rs_overview_menu',{width: jQuery('#wpbody').width()});\r\n\t\tjQuery('#wpadmin_overlay').width(jQuery('#adminmenuback').width());\r\n\t\tjQuery('#wpadmin_overlay_top').height(jQuery('#wpadminbar').height());\r\n\t\toverviewMenuScroll();\r\n\t}\r\n\r\n\t/*\r\n\tANIMATE MENU OUT\r\n\t*/\r\n\tfunction hideElementSubMenu(_) {\r\n\t\tif (!_.keepOverlay)\r\n\t\t\tjQuery('.overview_elements').removeClass(\"infocus\");\r\n\t\tjQuery('.rs_library_el_next').hide();\r\n\t\tjQuery('.rs_library_element.selected').each(function() {\r\n\t\t\t\tvar t = jQuery(this);\r\n\t\t\t\tif (_.id===undefined || t.id!==_.id) {\r\n\t\t\t\t\ttpGS.gsap.to(t.find('.rsle_tbar'),0.3,{y:\"-100%\",transformOrigin:\"50% 0%\",ease:\"power3.out\"});\r\n\t\t\t\t\tt.removeClass(\"menuopen\");\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\twindow.lastBreacCrumbText=\"\";\r\n\t\t\t\t\t\tjQuery('#rsl_bread_selected').html(window.lastBreacCrumbText);\r\n\t\t\t\t\t\tt.removeClass(\"selected\");\r\n\t\t\t\t\t},300);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\r\n\r\n\tfunction initHistory() {\r\n\t\tjQuery('#plugin_history').RSScroll({\r\n\t\t\t\twheelPropagation:true,\r\n\t\t\t\tsuppressScrollX:false,\r\n\t\t\t\tminScrollbarLength:30\r\n\t\t\t});\r\n\t}\r\n\r\n\r\n\t/*\r\n\tEXTEND ARRAY IF VALUE NOT YET ADDED\r\n\t*/\r\n\tfunction extendArray(a,b) {\r\n\t\tif (b===undefined || a===undefined) return a;\r\n\t\tif (Array.isArray(b))\r\n\t\t\tfor (var i in b) {\r\n\t\t\t\tif(!b.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (jQuery.inArray(b[i], a)==-1) a.push(b[i]);\r\n\t\t\t}\r\n\t\telse\r\n\t\t\tif (jQuery.inArray(b, a)==-1) a.push(b);\r\n\t\treturn a;\r\n\t}\r\n\t/*\r\n\tBUILD THE SELECT DROP DOWN\r\n\t*/\r\n\tfunction extendSelect(_) {\r\n\t\tif (_.array !==undefined && _.array.length>0) {\r\n\t\t\t//var group = jQuery('<optgroup label=\"'+_.group+'\"></optgroup');\r\n\t\t\tfor (var i in _.array ) {\r\n\t\t\t\t\tif(!_.array.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tvar o = _.sanitize ? new Option(RVS.F.sanitize_input(RVS.F.capitalise(_.array[i])),_.array[i],false,_.old===_.array[i]) : new Option(RVS.F.capitalise(_.array[i]),_.array[i],false,_.old===_.array[i]);\r\n\t\t\t\t\to.className=\"dynamicadded\";\r\n\t\t\t\t\t_.select.append(o);\r\n\t\t\t}\r\n\t\t\t//_.select.append(group);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction getNewGlobalObject(obj) {\r\n\t\tvar newGlobal = {};\r\n\t\tobj = obj===undefined || obj===null ? {} : obj;\r\n\t\t/* VERSION CHECK */\r\n\t\tnewGlobal.version = newGlobal.version<\"6.0.0\" ? \"6.0.0\" : newGlobal.version;\r\n\r\n\t\t/* SLIDER BASICS */\r\n\t\tnewGlobal.permission = _d(obj.permission,\"admin\");\r\n\t\tnewGlobal.lang = _d(obj.lang,\"default\");\r\n\t\tnewGlobal.allinclude = _truefalse(_d(obj.allinclude,true));\r\n\t\tnewGlobal.highContrast = _truefalse(_d(obj.highContrast,false));\r\n\t\tnewGlobal.includeids = _d(obj.includeids,\"\");\r\n\t\tnewGlobal.script = _d(obj.script,{\r\n            footer : true,\r\n            defer : true,\r\n            full : false,\r\n            async : true,\r\n            ytapi : true\r\n        });\r\n\r\n\t\tnewGlobal.imgcrossOrigin = _d(obj.imgcrossOrigin,\"unset\");\r\n\t\tnewGlobal.lazyloaddata = _d(obj.lazyloaddata,\"\");\r\n\t\tnewGlobal.fontdownload = _d(obj.fontdownload,\"off\");\r\n\t\tnewGlobal.script.footer = _truefalse(newGlobal.script.footer);\r\n\t\tnewGlobal.script.defer = _truefalse(newGlobal.script.defer);\r\n        newGlobal.script.async = _truefalse(newGlobal.script.async);\r\n\t\tnewGlobal.script.full = _truefalse(newGlobal.script.full);\r\n\t\tnewGlobal.fontawesomedisable = _truefalse(obj.fontawesomedisable);\r\n        newGlobal.onedpronmobile = _truefalse(obj.onedpronmobile);\r\n        newGlobal.forceLazyLoading = _d(obj.forceLazyLoading,\"smart\");\r\n        newGlobal.forceViewport = _d(obj.forceViewport,true);\r\n        newGlobal.lazyonbg = _d(obj.lazyonbg,false);\r\n        newGlobal.forcedViewportDistance = _d(obj.forcedViewportDistance,\"-200px\");\r\n        newGlobal.internalcaching = _truefalse(obj.internalcaching);\r\n\r\n        newGlobal.tracking = _d(obj.tracking,'1999-01-01');\r\n        newGlobal.trackingOnOff = newGlobal.tracking==\"enabled\" ? true : false;\r\n\t\tnewGlobal.fonturl = _d(obj.fonturl,\"\");\r\n\t\tnewGlobal.size = _d(obj.size,{\r\n\t\t\t\t\t\t\t\tdesktop : 1240,\r\n\t\t\t\t\t\t\t\tnotebook : 1024,\r\n\t\t\t\t\t\t\t\ttablet : 778,\r\n\t\t\t\t\t\t\t\tmobile : 480\r\n\t\t\t\t\t\t\t});\r\n\t\tnewGlobal.customfonts = _d(obj.customfonts,\"\");\r\n\t\tnewGlobal.customFontList = _d(obj.customFontList,[{family:\"\",url:\"\",frontend:false,backend:true,weights:\"200,300,400,500,600,700,800,900\"}]);\r\n\r\n\r\n\t\treturn newGlobal;\r\n\t}\r\n\r\n\t/*\r\n\tSET VALUE TO A OR B DEPENDING IF VALUE A EXISTS AND NOT UNDEFINED OR NULL\r\n\t*/\r\n\tfunction _d(a,b) {\r\n\t\tif (a===undefined || a===null)\r\n\t\t\treturn b;\r\n\t\telse\r\n\t\t\treturn a;\r\n\t}\r\n\r\n\tfunction _truefalse(v) {\r\n\t\tif (v===\"false\" || v===false || v===\"off\" || v===undefined || v===0 || v===-1)\r\n\t\t\tv=false;\r\n\t\telse\r\n\t\tif (v===\"true\" || v===true || v===\"on\")\r\n\t\t\tv=true;\r\n\t\treturn v;\r\n\t}\r\n\r\n})();\r\n\r\nreturn RVS;\r\n}\r\n);","Nwdthemes_Revslider/admin/assets/js/modules/layertools.js":"!function(t){\"use strict\";function e(){var e=this;e.reads=[],e.writes=[],e.raf=u.bind(t)}function n(t){t.scheduled||(t.scheduled=!0,t.raf(i.bind(null,t)))}function i(t){var e,i=t.writes,o=t.reads;try{o.length,r(o),i.length,r(i)}catch(t){e=t}if(t.scheduled=!1,(o.length||i.length)&&n(t),e){if(e.message,!t.catch)throw e;t.catch(e)}}function r(t){for(var e;e=t.shift();)e()}function o(t,e){var n=t.indexOf(e);return!!~n&&!!t.splice(n,1)}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}var u=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,16)};e.prototype={constructor:e,measure:function(t,e){var i=e?t.bind(e):t;return this.reads.push(i),n(this),i},mutate:function(t,e){var i=e?t.bind(e):t;return this.writes.push(i),n(this),i},clear:function(t){return o(this.reads,t)||o(this.writes,t)},extend:function(t){if(\"object\"!=typeof t)throw new Error(\"expected object\");var e=Object.create(this);return s(e,t),e.fastdom=this,e.initialize&&e.initialize(),e},catch:null};var exports=t.fastdom=t.fastdom||new e;\"NOfunction\"==typeof define?define(function(){return exports}):\"object\"==typeof module&&(module.exports=exports)}(\"undefined\"!=typeof window?window:this);\r\n\r\n/*!\r\n * REVOLUTION 6.0.0 EDITOR LAYERTOOLS JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\n(function() {\r\n\r\n\tRVS.RSCBA = { \ta:[\"width\",\"height\",\"maxWidth\",\"maxHeight\",\"minWidth\",\"minHeight\"],\r\n\t\t\t\t\tai:[\"layer_width\",\"layer_height\",\"layer_max_width\",\"layer_max_height\",\"layer_min_width\",\"layer_min_height\"],\r\n\t\t\t\t\tt:[\"fontSize\",\"lineHeight\",\"letterSpacing\"],\r\n\t\t\t\t\tti:[\"layer_font_size_idle\", \"layer_line_height_idle\", \"layer_letter_spacing_idle\"],\r\n\t\t\t\t\tf:[\"transform\",\"mask\",\"chars\",\"words\",\"lines\"],\r\n\t\t\t\t\tsh:[\"hoffset\",\"voffset\",\"blur\",\"spread\"]\r\n\t\t\t\t};\r\n\tvar respAttrs = [\"horizontal\",\"vertical\",\"borderStyle\",\"width\",\"height\",\"x\",\"y\",\"lineHeight\",\"fontSize\",\"color\",\"textAlign\",\"fontWeight\",\"letterSpacing\",\"blur\",\"hoffset\",\"voffset\",\"spread\", \"frameX\", \"frameY\", \"charsX\", \"charsY\", \"wordsX\", \"wordsY\", \"linesX\", \"linesY\",\"whiteSpace\"],\r\n\t\tlockedLayers,\r\n\t\tvisibleLayers;\r\n\r\n\r\n\t/*\r\n\tINITIALISE THE BASIC LISTENERS, INPUT MANAGEMENTS ETC\r\n\t*/\r\n\tRVS.F.initLayerTools = function() {\r\n\t\tinitLocalInputBoxes();\r\n\t\tinitMultipleLayerSelector();\r\n\t\tinitDragAndDrop();\r\n\t\tinitLocalListeners();\r\n\t\tprepareRescaler();\r\n\r\n\t};\r\n\r\n\r\n\t/*\r\n\tADD THE LAYER IN THE RIGHT ORDER TO THE PARENT ELEMENT (ROWS IN ZONES, COLUMNS IN ROWS, ELEMENTS IN COLUMNS)\r\n\t*/\r\n\tfunction addLayerInOrder(_) {\r\n\t\tvar insertBehindUID = \"start\";\r\n\t\tif (_.container!==undefined)\r\n\t\t\t_.container.find(\">\"+_.type).each(function() {\r\n\t\t\t\tif (RVS.L[_.uid].group.puid!==undefined &&  RVS.L[this.dataset.uid].group.puid!==undefined && RVS.L[this.dataset.uid].group.puid==RVS.L[_.uid].group.puid && RVS.L[this.dataset.uid].group.puid!=_.uid) {\r\n\t\t\t\t\tif (_.uid!==this.dataset.uid)\r\n\t\t\t\t\t\tif (RVS.L[RVS.L[_.uid].group.puid]!==undefined && RVS.L[RVS.L[_.uid].group.puid].type===\"group\")\r\n\t\t\t\t\t\t\tinsertBehindUID = RVS.L[this.dataset.uid].group.groupOrder>RVS.L[_.uid].group.groupOrder && RVS.H[this.dataset.uid]!==undefined ? this.dataset.uid : insertBehindUID;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tinsertBehindUID = RVS.L[this.dataset.uid].group.groupOrder<=RVS.L[_.uid].group.groupOrder && RVS.H[this.dataset.uid]!==undefined ? this.dataset.uid : insertBehindUID;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tif (insertBehindUID===\"start\" && _.container)\r\n\t\t\t_.container[0].prepend(_.layer);\r\n\t\telse if(RVS.H[insertBehindUID]){\r\n\t\t\tRVS.F.insertAfter(_.layer,RVS.H[insertBehindUID].w[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.allSelectedHasHover = function() {\r\n\t\tvar ja = true;\r\n\t\tfor (var l in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(l)) continue;\r\n\t\t\tja =  (RVS.L[RVS.selLayers[l]].hover.usehover===true || RVS.L[RVS.selLayers[l]].hover.usehover==='true' || RVS.L[RVS.selLayers[l]].hover.usehover==='desktop') ? ja : false;\r\n\t\t}\r\n\t\treturn ja;\r\n\t};\r\n\t/*\r\n\tBUILD HTML LAYER\r\n\t*/\r\n\tRVS.F.buildHTMLLayer = function(_) {\r\n\r\n\t\t// CREATE LAYER IF IT IS NOT CREATED YET, OR IF LAYER NEED TO BE RECREACTED BY FORCE\r\n\t\tvar l = RVS.L[_.uid],\r\n\t\t\toldelement = RVS.H!==undefined && RVS.H[_.uid]!==undefined && RVS.H[_.uid].w!==undefined ? RVS.H[_.uid].w[0] : document.getElementById('_lc_'+RVS.S.slideId+'_'+_.uid+'_');\r\n\r\n\t\tRVS.H = RVS.H == undefined ? {} : RVS.H;\r\n\r\n\t\tif (_.force==true || RVS.H==undefined || RVS.H[_.uid]===undefined || oldelement===null) {\r\n\t\t\tif (_.force==true || RVS.H==undefined || RVS.H[_.uid]===undefined ) {\r\n\t\t\t\tif (oldelement!==null) oldelement.parentNode.removeChild(oldelement);\r\n\t\t\t\tvar lc = RVS.F.cE({id:'_lc_'+RVS.S.slideId+'_'+_.uid+'_', cN:'_lc_ _lc_type_'+l.type,ds:{type:l.type,uid:_.uid,pid:l.group.puid,multiplemark:true}}),\r\n\t\t\t\t\tlockedbg = RVS.F.cE({cN:\"_lc_locked_bg_\"}),\r\n\t\t\t\t\tlocked  = RVS.F.cE({cN: \"_lc_locked_\"}),\r\n\t\t\t\t\tlocked_i = RVS.F.cI({c:\"lock_outline\"}),\r\n\t\t\t\t\t_tb_ = RVS.F.cE({t:\"span\",cN:\"_tb_ _borders_\"}),\r\n\t\t\t\t\t_bb_ = RVS.F.cE({t:\"span\",cN:\"_bb_ _borders_\"}),\r\n\t\t\t\t\t_rb_ = RVS.F.cE({t:\"span\",cN:\"_rb_ _borders_\"}),\r\n\t\t\t\t\t_lb_ = RVS.F.cE({t:\"span\",cN:\"_lb_ _borders_\"}),\r\n\t\t\t\t\t_loop = RVS.F.cE({cN:\"_lc_loop_\"}),\r\n\t\t\t\t\t_mask = RVS.F.cE({cN:\"_lc_mask_\"}),\r\n\t\t\t\t\t_iw = RVS.F.cE({cN:\"_lc_iw_\"}),\r\n\t\t\t\t\t_content = RVS.F.cE({t: 'div',cN:\"_lc_content_\"});\r\n\r\n\t\t\t\tif (l.type===\"column\" || l.type===\"row\") {\r\n\t\t\t\t\tvar _topm_ = RVS.F.cE({t:\"span\",cN:\"_c_margins _topm_\"}),\r\n\t\t\t\t\t\t_botm_ = RVS.F.cE({t:\"span\",cN:\"_c_margins _botm_\"}),\r\n\t\t\t\t\t\t_lefm_ = RVS.F.cE({t:\"span\",cN:\"_c_margins _lefm_\"}),\r\n\t\t\t\t\t\t_rigm_ = RVS.F.cE({t:\"span\",cN:\"_c_margins _rigm_\"}),\r\n\t\t\t\t\t\t_topp_ = RVS.F.cE({t:\"span\",cN:\"_c_paddings _topp_\"}),\r\n\t\t\t\t\t\t_botp_ = RVS.F.cE({t:\"span\",cN:\"_c_paddings _botp_\"}),\r\n\t\t\t\t\t\t_lefp_ = RVS.F.cE({t:\"span\",cN:\"_c_paddings _lefp_\"}),\r\n\t\t\t\t\t\t_rigp_ = RVS.F.cE({t:\"span\",cN:\"_c_paddings _rigp_\"});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlocked.appendChild(locked_i);\r\n\t\t\t\t_loop.appendChild(_mask);\r\n\t\t\t\t_mask.appendChild(_iw);\r\n\t\t\t\t_iw.appendChild(_content);\r\n\r\n\r\n\t\t\t\tlc.appendChild(lockedbg);\r\n\t\t\t\tlc.appendChild(locked);\r\n\t\t\t\tlc.appendChild(_tb_);\r\n\t\t\t\tlc.appendChild(_bb_);\r\n\t\t\t\tlc.appendChild(_rb_);\r\n\t\t\t\tlc.appendChild(_lb_);\r\n\t\t\t\tlc.appendChild(_loop);\r\n\r\n\t\t\t\tif (l.type===\"column\" || l.type===\"row\") {\r\n\t\t\t\t\tlc.appendChild(_topm_);\r\n\t\t\t\t\tlc.appendChild(_botm_);\r\n\t\t\t\t\tlc.appendChild(_lefm_);\r\n\t\t\t\t\tlc.appendChild(_rigm_);\r\n\t\t\t\t\tlc.appendChild(_lefp_);\r\n\t\t\t\t\tlc.appendChild(_rigp_);\r\n\t\t\t\t\tlc.appendChild(_botp_);\r\n\t\t\t\t\tlc.appendChild(_topp_);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (l.group.puid===-1 || l.type===\"row\") {\r\n\t\t\t\t\tif (l.type==\"row\" && RVS.C.rZone[l.group.puid])\r\n\t\t\t\t\t\taddLayerInOrder({container: RVS.C.rZone[l.group.puid], layer:lc, uid:_.uid, type:\"._lc_type_row\"});\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tRVS.C.layergrid[0].appendChild(lc);\r\n\t\t\t\t} else\r\n\t\t\t\tif (l.type===\"column\")\r\n\t\t\t\t\taddLayerInOrder({container:RVS.H[l.group.puid].c, layer:lc, uid:_.uid, type:\"._lc_type_column\"});\r\n\t\t\t\telse\r\n\t\t\t\t\tif (RVS.H[l.group.puid]!==undefined)\r\n\t\t\t\t\t\taddLayerInOrder({container:RVS.H[l.group.puid].c, layer:lc, uid:_.uid, type:\"._lc_\"});\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tl.group.puid = -1;\r\n\r\n\r\n\r\n\t\t\t\tif (l.idle.style!==undefined && l.idle.style.length>0) lc.className += \" \"+l.idle.style;\r\n\r\n\t\t\t\tRVS.H[_.uid] = {w:jQuery(lc), last_puid : l.group.puid,  last_groupOrder:l.group.groupOrder};\r\n\t\t\t\tRVS.H[_.uid].m =_mask;\r\n\t\t\t\tRVS.H[_.uid].lp = _loop;\r\n\r\n\t\t\t\tRVS.H[_.uid].iw = _iw;\r\n\t\t\t\tRVS.H[_.uid].c = jQuery(_content);\r\n\r\n\t\t\t\t// EXTEND CONTENT WITH FURTHER ADDON BASED CONTENT\r\n\t\t\t\tif (RVS.F.buildHTMLLayerSub!==undefined && RVS.F.buildHTMLLayerSub[l.subtype]!==undefined) {\r\n\t\t\t\t\tRVS.H[_.uid].subc = RVS.F.buildHTMLLayerSub[l.subtype](l.subsubtype);\r\n\t\t\t\t\tif (RVS.H[_.uid].subc!==undefined) for (var subcc in RVS.H[_.uid].subc.attach) _content.appendChild(RVS.H[_.uid].subc[RVS.H[_.uid].subc.attach[subcc]]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (l.type===\"column\" || l.type===\"row\") {\r\n\t\t\t\t\tRVS.H[_.uid].margins =  {top: _topm_, bottom: _botm_,left: _lefm_,right: _rigm_};\r\n\t\t\t\t\tRVS.H[_.uid].paddings = {top: _topp_, bottom: _botp_,left: _lefp_,right: _rigp_};\r\n\t\t\t\t}\r\n\t\t\t\tRVS.H[_.uid].borders = {top: _tb_,bottom: _bb_,left: _lb_,right: _rb_};\r\n\t\t\t}\r\n\r\n\t\t\tvar _img,_vidtitle;\r\n\r\n\t\t\tswitch (l.type) {\r\n\r\n\t\t\t\tcase \"svg\":\r\n\t\t\t\t\tRVS.H[_.uid].c[0].innerHTML = l.svg.renderedData;\r\n\t\t\t\t\tRVS.H[_.uid].svg = RVS.H[_.uid].w.find('svg');\r\n\t\t\t\t\tRVS.H[_.uid].svgPath = RVS.H[_.uid].w.find( !l.idle.svg.styleAll ? 'svg path' : 'svg path, svg circle, svg ellipse, svg line, svg polygon, svg polyline, svg rect');\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"image\":\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._lc_img_placeholder')===null) RVS.H[_.uid].c[0].appendChild(RVS.F.cE({cN:\"_lc_img_placeholder\",icon:{c:\"filter_hdr\"}}));\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._lc_image_inside_')===null) {\r\n\t\t\t\t\t\t_img = RVS.F.cE({t:'img',cN:\"_lc_image_inside_\",ds:{ow:l.size.originalWidth, oh:l.size.originalHeight}})\r\n\t\t\t\t\t\t_img.src = l.media.imageUrl;\r\n\t\t\t\t\t\tRVS.H[_.uid].c[0].appendChild(_img);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (l.media.imageUrl === RVS.ENV.img_ph_url) RVS.H[_.uid].c[0].classList.add(\"placeholder_on\");\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"video\":\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._lc_img_placeholder')===null) RVS.H[_.uid].c[0].appendChild(RVS.F.cE({cN:\"_lc_img_placeholder\",icon:{c:\"videocam\"}}));\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._lc_video_title_')===null) {\r\n\t\t\t\t\t\t_vidtitle = RVS.F.cE({cN:\"_lc_video_title_\"});\r\n\t\t\t\t\t\t_vidtitle.textContent = l.media.mediaType;\r\n\t\t\t\t\t\tRVS.H[_.uid].c[0].appendChild(_vidtitle);\r\n\t\t\t\t\t\tRVS.H[_.uid].vtitle =_vidtitle;\r\n\r\n\t\t\t\t\t} else\r\n\t\t\t\t\tif (RVS.H[_.uid].vtitle===undefined) RVS.H[_.uid].vtitle = RVS.H[_.uid].w[0].querySelector('._lc_video_title_');\r\n\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._lc_video_placeholder_')===null) RVS.H[_.uid].c[0].appendChild(RVS.F.cE({cN:\"_lc_video_placeholder_\"}));\r\n\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._lc_video_overlay')===null) {\r\n\t\t\t\t\t\tRVS.H[_.uid].volay = RVS.F.cE({cN:\"_lc_video_overlay\"});\r\n\t\t\t\t\t\tRVS.H[_.uid].c[0].appendChild(RVS.H[_.uid].volay);\r\n\t\t\t\t\t} else\r\n\t\t\t\t\tif (RVS.H[_.uid].volay===undefined) RVS.H[_.uid].volay = RVS.H[_.uid].w[0].querySelector('._lc_video_overlay')\r\n\r\n\t\t\t\t\tif (l.media.posterUrl === RVS.ENV.img_ph_url)  RVS.H[_.uid].c[0].classList.add(\"placeholder_on\");\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"audio\":\r\n\t\t\t\t\t// PLACEHOLDER\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._lc_img_placeholder')===null) RVS.H[_.uid].c[0].append(RVS.F.cE({cN:\"_lc_img_placeholder\",icon:{c:\"audiotrack\"}}));\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('audio')===null) RVS.H[_.uid].c.append('<audio controls></audio>');\r\n\t\t\t\t\tif (l.media.controls===false) RVS.H[_.uid].c[0].classList.add(\"placeholder_on\"); else RVS.H[_.uid].c[0].classList.remove(\"audio_controls_on\");\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\t\t// EXTRA BACKGROUND CONTANER\r\n\t\t\t\t\tif (RVS.H[_.uid].bg===undefined)\r\n\t\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector(':scope > ._lc_extra_bg')===null) {\r\n\t\t\t\t\t\t\tRVS.H[_.uid].bg = RVS.F.cE({cN:\"_lc_extra_bg\"});\r\n\t\t\t\t\t\t\tRVS.H[_.uid].w[0].appendChild(RVS.H[_.uid].bg);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tRVS.H[_.uid].bg = RVS.H[_.uid].w[0].querySelector(':scope > ._lc_extra_bg');\r\n\r\n\t\t\t\t\t// PLACEHOLDER\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._lc_group_placeholder')===null) RVS.H[_.uid].c[0].append(RVS.F.cE({cN:\"_lc_group_placeholder\",icon:{c:\"format_shapes\"}}))\r\n\r\n\t\t\t\t\t// LOCKER CONTAINER\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._group_lock_')===null) RVS.H[_.uid].c[0].append(RVS.F.cE({cN:\"_group_lock_\",icon:{c:\"layers\"}}));\r\n\r\n\t\t\t\t\t// HEAD CONTAINER\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._group_head_')===null) {\r\n\t\t\t\t\t\tRVS.H[_.uid].w.append('<div class=\"_group_head_\"><span id=\"_group_head_title_'+RVS.S.slideId+'_'+_.uid+'\" class=\"_group_head_title_\">'+l.alias+'</span><div data-uid=\"'+_.uid+'\" class=\"_group_lock_toggle_\"><i class=\"group_lock_icon material-icons\">layers_clear</i><i class=\"group_lockopen_icon material-icons\">layers</i></div></div>');\r\n\t\t\t\t\t\tRVS.H[_.uid].gpH = RVS.H[_.uid].w[0].getElementsByClassName('_group_head_')[0];\r\n\t\t\t\t\t\tRVS.H[_.uid].gpHT = RVS.H[_.uid].w[0].getElementsByClassName('_group_head_title_')[0];\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\t\tif (RVS.H[_.uid].bg===undefined)\r\n\t\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector(':scope > ._lc_extra_bg')===null) {\r\n\t\t\t\t\t\t\tRVS.H[_.uid].bg = RVS.F.cE({cN:\"_lc_extra_bg\"});\r\n\t\t\t\t\t\t\tRVS.H[_.uid].w[0].appendChild(RVS.H[_.uid].bg);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tRVS.H[_.uid].bg = RVS.H[_.uid].w[0].querySelector(':scope > ._lc_extra_bg');\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"column\":\r\n\t\t\t\t\tif (RVS.H[_.uid].bg===undefined)\r\n\t\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector(':scope > ._lc_extra_bg_wrap')===null) {\r\n\t\t\t\t\t\t\tRVS.H[_.uid].bg = RVS.F.cE({cN:\"_lc_extra_bg\"});\r\n\t\t\t\t\t\t\tRVS.H[_.uid].bgmask = RVS.F.cE({cN:\"_lc_extra_bg_wrap\"});\r\n\t\t\t\t\t\t\tRVS.H[_.uid].bgmask.appendChild(RVS.H[_.uid].bg);\r\n\t\t\t\t\t\t\tRVS.H[_.uid].w[0].appendChild(RVS.H[_.uid].bgmask);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tRVS.H[_.uid].bgmask = RVS.H[_.uid].w[0].querySelector(':scope > ._lc_extra_bg_wrap');\r\n\t\t\t\t\t\t\tRVS.H[_.uid].bg = RVS.H[_.uid].bgmask.querySelector(':scope > ._lc_extra_bg');\r\n\t\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"shape\":\r\n\t\t\t\t\tif (RVS.H[_.uid].w[0].querySelector('._lc_stream_placeholder')===null) RVS.H[_.uid].c[0].appendChild(RVS.F.cE({cN:\"_lc_stream_placeholder\",icon:{c:\"cast\"}}));\r\n\t\t\t\t\tif (l.idle.bgFromStream) RVS.H[_.uid].c[0].classList.add(\"placeholder_on\");\r\n\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (l.linebreak) RVS.H[_.uid].w[0].classList.add(\"rs-linebreak\");\r\n\r\n\t\t}\r\n\r\n\t\t//First make it Draggable when the Mouse enters. No need to create extra costs on Load\r\n\t\tif (RVS.S.initDragAndResizeonHTMLLayers === undefined) {\r\n\t\t\tRVS.S.initDragAndResizeonHTMLLayers = true;\r\n\t\t\tRVS.C.UL[0].addEventListener('mouseenter',function(e) {\r\n\t\t\t\tif (!e.target || !e.target.classList || !e.target.classList.contains('_lc_')) return;\r\n\t\t\t\tvar lc = e.target;\r\n\t\t\t\t/* Update Group Header in Case */\r\n\t\t\t\tRVS.F.updateGroupHeader({uid:lc.dataset.uid,delay:0.1});\r\n\r\n\t\t\t\tif (lc.dataset.dragandresize===undefined) {\r\n\t\t\t\t\tlc.dataset.dragandresize = true;\r\n\t\t\t\t\tif (lc.dataset.type!==\"column\" && lc.dataset.type!==\"row\") RVS.F.doDraggable({uid:lc.dataset.uid, drag:true, resize:true});\r\n\t\t\t\t\tif (jQuery.inArray(lc.dataset.type,[\"text\",\"button\",\"svg\",\"shape\",\"group\"])>=0)\r\n\t\t\t\t\t\tif (RVS.H[lc.dataset.uid].sclr===undefined || RVS.H[lc.dataset.uid].w[0].querySelector(':scope >._lc_reScaler')===null) {\r\n\t\t\t\t\t\t\tvar sclr = RVS.F.cE({cN:\"_lc_reScaler\"}),\r\n\t\t\t\t\t\t\t\tsclrpin = RVS.F.cE({cN:\"_lc_reScaler_pin\"}),\r\n\t\t\t\t\t\t\t\tsclricon = RVS.F.cE({cN:\"_lc_reScaler_icon\"});\r\n\t\t\t\t\t\t\tsclr.appendChild(sclrpin);\r\n\t\t\t\t\t\t\tsclr.appendChild(sclricon);\r\n\t\t\t\t\t\t\tRVS.H[lc.dataset.uid].w[0].appendChild(sclr);\r\n\t\t\t\t\t\t\tRVS.H[lc.dataset.uid].sclr = jQuery(sclrpin);\r\n\t\t\t\t\t\t\tprepareRescaler(RVS.H[lc.dataset.uid].sclr);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},true);\r\n\t\t\tRVS.DOC.on('mouseleave','._lc_',function() {\r\n\t\t\t\tRVS.F.updateGroupHeader({uid:this.dataset.pid});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//_.ignoreDrawLayers = false;\r\n\r\n\t\t/*\r\n\t\tLOAD GOOGLE FONT BEFORE 1ST TIME DRAW THE LAYER\r\n\t\t*/\r\n\t\tif (l.type===\"text\" || l.type==\"button\") {\r\n\t\t\t//RVS.F.checkUsedFonts(l);\r\n\t\t\tRVS.F.redrawTextLayerInnerHTML(_.uid);\r\n\t\t\tif (_.ignoreDrawLayers!==true) RVS.F.drawHTMLLayer({uid:_.uid});\r\n\t\t} else\r\n\t\tif (l.type===\"svg\") {\r\n\t\t\tif (l.svg.renderedData===undefined || (l.svg.source!==undefined && l.svg.source.length>4)) {\r\n\t\t\t\tjQuery.get(l.svg.source, function(data) {\r\n\t\t\t\t\t \tRVS.H[_.uid].c[0].innerHTML = l.svg.renderedData = new XMLSerializer().serializeToString(data.documentElement);\r\n\t\t\t\t\t\tRVS.H[_.uid].svg = RVS.H[_.uid].w.find('svg');\r\n\t\t\t\t\t\tRVS.H[_.uid].svgPath = RVS.H[_.uid].w.find( !l.idle.svg.styleAll ? 'svg path' : 'svg path, svg circle, svg ellipse, svg line, svg polygon, svg polyline, svg rect');\r\n\t\t\t\t\t  \tRVS.F.drawHTMLLayer({uid:_.uid});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (_.ignoreDrawLayers!==true) RVS.F.drawHTMLLayer({uid:_.uid});\r\n\t\t\t}\r\n\t\t} else\r\n\t\tif (l.type===\"image\") {\r\n\t\t\tif (l.media.imageUrl!==undefined && l.media.imageUrl!==null && l.media.imageUrl.length>0 && l.media!==undefined && l.media.loaded!==true) {\r\n\r\n\t\t\t\ttpGS.gsap.set(RVS.H[_.uid].w,{visibility:\"hidden\"});\r\n\t\t\t\tRVS.F.preloadImage({\r\n\t\t\t\t\tuid:_.uid,\r\n\t\t\t\t\tslideId:RVS.S.slideId,\r\n\t\t\t\t\timage : l.media.imageUrl,\r\n\t\t\t\t\tsilent:false,\r\n\t\t\t\t\tcallback:function() {\r\n\t\t\t\t\t\ttpGS.gsap.set(RVS.H[_.uid].w,{visibility:\"visible\"});\r\n\t\t\t\t\t\tif (_.ignoreDrawLayers!==true) RVS.F.drawHTMLLayer({uid:_.uid});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else\r\n\t\t\t\tif (_.ignoreDrawLayers!==true) RVS.F.drawHTMLLayer({uid:_.uid})\r\n\r\n\t\t} else\r\n\t\t\t\tif (_.ignoreDrawLayers!==true) RVS.F.drawHTMLLayer({uid:_.uid})\r\n\t};\r\n\t/*\r\n\tUPGRADE GROUP HEADER\r\n\t*/\r\n\tRVS.F.updateGroupHeader = function(_) {\r\n\t\tlet tgid = RVS.F.getTopParent({layer:_.uid}),\r\n\t\t\tt = '',\r\n\t\t\tlevel = 0;\r\n\t\tif (tgid==-1 && _.uid==-1 && _.delay==undefined && RVS.L[RVS.S.lastHoveredLayer]!==undefined && RVS.L[RVS.S.lastHoveredLayer].type==\"group\" && RVS.H[RVS.S.lastHoveredLayer].w[0].classList.contains(\"hasSelectedChild\")) {\r\n\t\t\tif (RVS.H[RVS.S.lastHoveredLayer].w[0].dataset.selectedchild===\"multiple\") {\r\n\t\t\t\tt = 'multiple';\r\n\t\t\t} else {\r\n\t\t\t\ttgid = RVS.S.lastHoveredLayer;\r\n\t\t\t\t_.uid = RVS.H[RVS.S.lastHoveredLayer].w[0].dataset.selectedchild;\r\n\t\t\t}\r\n\t\t}\r\n\t\t_.delay = _.delay==undefined ? 0 : _.delay;\r\n\t\tif (t===\"multiple\") {\r\n\t\t\t tgid = RVS.S.lastHoveredLayer;\r\n\t\t\t level = 1;\r\n\t\t} else {\r\n\t\t\tif (tgid!==undefined  && RVS.L[tgid]!==undefined && RVS.L[tgid].type==\"group\" && RVS.H[tgid]!==undefined && RVS.L[_.uid]!==undefined) {\r\n\t\t\t\tlevel += (tgid!=RVS.L[_.uid].group.puid ? 1 : 0) + (tgid!=_.uid ? 1 : 0);\r\n\t\t\t\tt = RVS.L[tgid].alias+\r\n\t\t\t\t\t(tgid!=RVS.L[_.uid].group.puid ? ' / '+ RVS.L[RVS.L[_.uid].group.puid].alias : \"\") +\r\n\t\t\t\t\t(tgid!=_.uid ? ' / '+ RVS.L[_.uid].alias  : \"\");\r\n\t\t\t} else\r\n\t\t\tif (RVS.L[_.uid]!==undefined && RVS.L[_.uid].type==\"group\") {\r\n\t\t\t\ttgid = _.uid;\r\n\t\t\t\tt = RVS.L[_.uid].alias;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (t!=='') {\r\n\t\t\tif (_.delay>0) clearTimeout(RVS.S.updateHeaderTextTimer)\r\n\r\n\t\t\t//if (RVS.F.isParent(_.uid,RVS.S.lastHoveredLayer)) return;\r\n\r\n\t\t\tRVS.S.updateHeaderTextTimer = setTimeout(function() {\r\n\t\t\t\trequestAnimationFrame(function(){\r\n\r\n\t\t\t\t\tRVS.F.checkAndWriteGroupHeader({gid:tgid, t:t, level:level});\r\n\t\t\t\t});\r\n\t\t\t},_.delay);\r\n\t\t}\r\n\t\t\tRVS.S.lastHoveredLayer = _.uid;\r\n\t}\r\n\r\n\tRVS.F.checkAndWriteGroupHeader = function(_) {\r\n\t\tif (_.t===\"multiple\") {\r\n\t\t\t_.t = RVS_LANG.multiplechildrensel;\r\n\t\t} else {\r\n\t\t\t// Short Up the Text if Needed\r\n\t\t\tif (_.level>0 && _.t.length*6.5 > RVS.H[_.gid].gpH.offsetWidth) {\r\n\t\t\t\t_.t = '..' + _.t.substr(_.t.indexOf(' / '));\r\n\t\t\t\tif (_.level>1 &&_.t.length*6.5 > RVS.H[_.gid].gpH.offsetWidth) {\r\n\t\t\t\t\t_.t = '.. / .. ' + _.t.substr(_.t.lastIndexOf(' / '));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_.level>0) {\r\n\t\t\t\t_.t = '<span class=\"sub_text_block\">' + _.t;\r\n\t\t\t\t_.t = _.t.substr(0,_.t.lastIndexOf(' / ')) + \"</span>\" + _.t.substr(_.t.lastIndexOf(' / '));\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.H[_.gid].gpHT.innerHTML = _.t;\r\n\r\n\r\n\t}\r\n\r\n\t/*\r\n\tREORDER HTML LAYER\r\n\t*/\r\n\tRVS.F.reOrderHTMLLayer = function(_) {\r\n\r\n\t\t// CREATE LAYER IF IT IS NOT CREATED YET, OR IF LAYER NEED TO BE RECREACTED BY FORCE\r\n\t\tif (RVS.H==undefined || RVS.H[_.uid]===undefined || RVS.H[_.uid].w===undefined) return;\r\n\r\n\t\tvar l = RVS.L[_.uid],\r\n\t\t\thtmllayer = RVS.H[_.uid].w;\r\n\r\n\t\tvar same = RVS.H[_.uid].last_puid===l.group.puid && RVS.H[_.uid].last_groupOrder===l.group.groupOrder;\r\n\t\t RVS.H[_.uid].last_puid=l.group.puid;\r\n\t\t RVS.H[_.uid].last_groupOrder=l.group.groupOrder;\r\n\r\n\r\n\t\tif (l.group.puid===-1 || l.type===\"row\") {\r\n\t\t\tif (l.type==\"row\")\r\n\t\t\t\taddLayerInOrder({container: RVS.C.rZone[l.group.puid], layer:htmllayer[0], uid:_.uid, type:\"._lc_type_row\"});\r\n\t\t\telse\r\n\t\t\t\tRVS.C.layergrid[0].appendChild(htmllayer[0]);\r\n\t\t} else\r\n\t\tif (l.type===\"column\")\r\n\t\t\taddLayerInOrder({container:RVS.H[l.group.puid].c, layer:htmllayer[0], uid:_.uid, type:\"._lc_type_column\"});\r\n\t\telse {\r\n\t\t\taddLayerInOrder({container:RVS.H[l.group.puid].c, layer:htmllayer[0], uid:_.uid, type:\"._lc_\"});\r\n\t\t}\r\n\r\n\r\n\t\tif (!same) RVS.S.redrawHTMLLayersList.push(_.uid);\r\n\r\n\t};\r\n\r\n\tRVS.F.checkRowsChildren = function() {\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.L[li].type==\"row\" || RVS.L[li].type==\"group\") {\r\n\t\t\t\tvar children = RVS.F.getLayerChildren({layerid:li}),\r\n\t\t\t\t\tam=0;\r\n\r\n\t\t\t\tfor (var chi in children) if (children.hasOwnProperty(chi)) {\r\n\t\t\t\t\tif (children[chi].type!==\"column\")\r\n\t\t\t\t\t\tam++;\r\n\t\t\t\t}\r\n\t\t\t\tif (am>0)\r\n\t\t\t\t\tRVS.H[li].w.removeClass(\"nocontent\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.H[li].w.addClass(\"nocontent\");\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction getHighestGroupOrderInRow(_) {\r\n\t\t_.type = _.type===undefined ? \"column\" : _.type;\r\n\t\tvar cols = RVS.F.getColumnsInRow({layerid:_.uid, type:_.type}),\r\n\t\t\thgo = 0;\r\n\t\tfor (var c in cols) {\r\n\t\t\tif(!cols.hasOwnProperty(c)) continue;\r\n\t\t\thgo = parseInt(hgo,0)<=parseInt(RVS.L[cols[c]].group.groupOrder,0) ? parseInt(RVS.L[cols[c]].group.groupOrder,0)+1 : hgo;\r\n\t\t}\r\n\t\treturn hgo;\r\n\t}\r\n\r\n\t/*\r\n\tADD SINGLE LAYERS (CALL ONLY FROM ADDLAYER AND DUPLICATE LAYER FUNCTIONS)\r\n\t*/\r\n\tRVS.F.addLayerToLayers = function(obj) {\r\n\t\tvar newLayer;\r\n\t\tif (obj.layerobject!==undefined) {\r\n\t\t\tnewLayer = RVS.F.safeExtend(true,{},obj.layerobject);\r\n\t\t\tnewLayer.uid = obj.copyPaste===\"copy\" ? \"copy\"+window.copyPasteLayers.amount : RVS.F.getUniqueid();\r\n\t\t\tnewLayer = RVS.F.addLayerObj(newLayer);\r\n\t\t\tnewLayer.alias = obj.prefix!==undefined ? obj.prefix+\" \"+newLayer.alias.replace(/Copy/g,'') : \"Copy \"+newLayer.alias.replace(/Copy/g,'');\r\n\t\t} else {\r\n\t\t\tnewLayer = RVS.F.addLayerObj(obj.type);\r\n\t\t}\r\n\r\n\t\tif (obj.extension) newLayer = RVS.F.safeExtend(true,newLayer,obj.extension);\r\n\t\tif (obj.subsubtype && obj.subextension) newLayer = RVS.F.safeExtend(true,newLayer,obj.subextension);\r\n\r\n\t\tnewLayer.group.puid = obj.puid!==undefined ? obj.puid : newLayer.group.puid;\r\n\t\tif (obj.newGroupOrder && obj.copyPaste!==\"copy\")\r\n\t\t\tnewLayer.group.groupOrder = getHighestGroupOrderInRow({uid:newLayer.group.puid, type:newLayer.type});\r\n\r\n\r\n\t\tnewLayer.alias = obj.extension!==undefined && obj.extension.alias!==undefined ? obj.extension.alias+\"-\"+newLayer.uid : obj.alias!==undefined ? obj.alias+\"-\"+newLayer.uid : newLayer.alias;\r\n\t\tif (obj.copyPaste===\"copy\") {\r\n\t\t\twindow.copyPasteLayersSlideId = RVS.S.slideId;\r\n\t\t\twindow.copyPasteLayers.amount++;\r\n\t\t\tnewLayer.copiedFromUid = obj.layerobject.uid;\r\n\t\t\twindow.copyPasteLayers.layers[newLayer.uid] = newLayer;\r\n\t\t} else {\r\n\t\t\tif (obj.layerobject!==undefined) RVS.F.duplicateSkinColors({type:\"layer\", layerFrom:(obj.layerobject.copiedFromUid!==undefined ? obj.layerobject.copiedFromUid : obj.layerobject.uid), layerTo:newLayer.uid, slideFrom:window.copyPasteLayersSlideId,slideTo:RVS.S.slideId});\r\n\t\t\tdelete newLayer.copiedFromUid;\r\n\t\t\tRVS.SLIDER[RVS.S.slideId].layers[newLayer.uid] = newLayer;\r\n\r\n\r\n\t\t\tRVS.F.backup({path:newLayer.uid,icon:\"layers\",txt:\"Create New Layer\",lastkey:\"newlayer\",force:true,slideid:RVS.S.slideId,val:RVS.F.safeExtend(true,{},RVS.SLIDER[RVS.S.slideId]).layers[newLayer.uid],old:{}, backupType:\"layer\", bckpGrType:\"addlayer\"});\r\n\t\t}\r\n\t\tif (obj.buildHTMLLayer && obj.copyPaste!==\"copy\") RVS.F.buildHTMLLayer({uid:newLayer.uid});\r\n\t\treturn newLayer.uid;\r\n\t};\r\n\r\n\t// EXTEND ADD LAYER TYPE LISTS\r\n\tRVS.F.extendLayerTypes = function(obj) {\r\n\t\tRVS.S.extendedLayerTypes= RVS.S.extendedLayerTypes===undefined ? {} : RVS.S.extendedLayerTypes;\r\n\t\tif (RVS.S.extendedLayerTypes[obj.subtype]===undefined) {\r\n\t\t\tobj.extension.subtype = obj.subtype;\r\n\t\t\tRVS.S.extendedLayerTypes[obj.subtype] = {\r\n\t\t\t\ttype:obj.type,\r\n\t\t\t\tsubtype:obj.subtype,\r\n\t\t\t\textension:obj.extension,\r\n\t\t\t\tsubextension:obj.subextension\r\n\t\t\t};\r\n\r\n\t\t\tvar h;\r\n\t\t\tif (obj.subdrop) {\r\n\t\t\t\th = '<div id=\"toolbar_add_layer_'+obj.alias+'\" class=\"toolbar_dd_subdrop_wrap\">';\r\n\t\t\t\tif(obj.objLibInMainMenu) {\r\n\t\t\t\t\th += '<div class=\"add_layer\" data-type=\"'+obj.type+'\" data-subtype=\"object_library\" data-libevent=\"'+obj.libevent+'\" data-extensiongroup=\"'+obj.subtype+'\" data-libfilters=\"'+obj.libfilters+'\"><i class=\"material-icons\">'+obj.icon+'</i>'+obj.alias+'</div>';\r\n\t\t\t\t} else {\r\n\t\t\t\t\th +='<div class=\"add_layer\" data-type=\"'+obj.type+'\" data-subtype=\"'+obj.subtype+'\"><i class=\"material-icons\">'+obj.icon+'</i>'+obj.alias+'</div>';\r\n\t\t\t\t}\r\n\t\t\t\th +='<div class=\"toolbar_dd_subdrop\">';\r\n\t\t\t\tif (obj.objectlibrary) h += '<div class=\"add_layer\" data-type=\"'+obj.type+'\" data-subtype=\"object_library\" data-libevent=\"'+obj.libevent+'\" data-extensiongroup=\"'+obj.subtype+'\" data-libfilters=\"'+obj.libfilters+'\"><i class=\"material-icons\">style</i>Object Library</div>';\r\n\t\t\t\tif (obj.emptyplaceholder) h+= '<div class=\"add_layer\" data-type=\"'+obj.type+'\" data-subtype=\"'+obj.subtype+'\"><i class=\"material-icons\">flip_to_back</i>Empty Placeholder</div>';\r\n\t\t\t\tif (obj.subList) for (var i in obj.subList)\r\n\t\t\t\t\t\tif (obj.subList.hasOwnProperty(i)) h+= '<div class=\"add_layer\" '+(obj.subList[i].fromobjlib ? 'data-fromobjlib=\"true\"' : '')+(obj.subList[i].objLibInSubMenu ? 'data-subtype=\"object_library\"' : '')+' '+(obj.subList[i].filter ? ' data-filter=\"'+obj.subList[i].filter+'\"' : '')+' '+(obj.subList[i].selected ? ' data-selected=\"'+obj.subList[i].selected+'\"' : '')+' data-evt=\"'+obj.subList[i].evt+'\" data-libevent=\"'+obj.subList[i].libevent+'\" data-libfilters=\"'+obj.subList[i].libfilters+'\" obj.data-type=\"'+obj.type+'\" data-subtype=\"'+obj.subtype+'\" data-subsubtype=\"'+i+'\"><i class=\"material-icons\">'+obj.subList[i].icon+'</i>'+obj.subList[i].name+'</div>';\r\n\r\n\r\n\t\t\t\th +='</div>';\r\n\t\t\t\th +='</div>';\r\n\t\t\t} else {\r\n\t\t\t\th = '<div class=\"add_layer\" data-type=\"'+obj.type+'\" data-subtype=\"'+obj.subtype+'\"><i class=\"material-icons\">'+obj.icon+'</i>'+obj.alias+'</div>';\r\n\t\t\t}\r\n\t\t\tjQuery(h).insertAfter('#toolbar_add_layer_group')\r\n\t\t\t//jQuery('#add_layer_main_wrap').append(jQuery(h));\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\r\n\t/*\r\n\tADD LAYER (OBJECT, LIST ELEMENT, FRAMES) ON DEMAND\r\n\t*/\r\n\tRVS.F.addLayer = function(obj,ignoreBackupGroup) {\r\n\t\tRVS.DOC.trigger('changeToLayerMode');\r\n\t\tif (!obj.ignoreBackupGroup && !ignoreBackupGroup) RVS.F.openBackupGroup({id:\"addLayer\",txt:\"Create New \"+obj.type+\" Layer\",icon:\"layers\",lastkey:\"layer\"});\r\n\t\tvar rowid,\r\n\t\t\tnewLayerID,\r\n\t\t\titemsInGroup,\r\n\t\t\tsubitemsInGroup,ii,gii,\r\n\t\t\tgroupid,subgroupid,\r\n\t\t\t_SRC =  obj.copyPaste===\"paste\" ? window.copyPasteLayers.layers : RVS.L;\r\n\t\tswitch (obj.type) {\r\n\t\t\tcase \"row\":\r\n\t\t\t\tif (obj.duplicateId===undefined) {\r\n\t\t\t\t\trowid = newLayerID = RVS.F.addLayerToLayers({type:\"row\",alias:\"row\",buildHTMLLayer:true});\r\n\t\t\t\t\tfor (var i=0;i<3;i++) {\r\n\t\t\t\t\t\tRVS.F.addLayerToLayers({type:\"column\", puid:rowid, alias:\"column\",buildHTMLLayer:true});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\trowid = newLayerID = RVS.F.addLayerToLayers({layerobject:_SRC[obj.duplicateId],buildHTMLLayer:true,copyPaste:obj.copyPaste, prefix:obj.prefix, newGroupOrder:true});\r\n\t\t\t\t\tvar columnsInRow = RVS.F.getColumnsInRow({layerid:obj.duplicateId,copyPaste:obj.copyPaste});\r\n\t\t\t\t\tfor (var coi in columnsInRow) {\r\n\t\t\t\t\t\tif(!columnsInRow.hasOwnProperty(coi)) continue;\r\n\t\t\t\t\t\tvar colid = RVS.F.addLayerToLayers({puid:rowid, layerobject:_SRC[columnsInRow[coi]],buildHTMLLayer:true,copyPaste:obj.copyPaste, prefix:obj.prefix}),\r\n\t\t\t\t\t\t\titemsInColumn = RVS.F.getLayersFirstDepth({layerid:columnsInRow[coi],copyPaste:obj.copyPaste});\r\n\r\n\t\t\t\t\t\tfor (ii in itemsInColumn) {\r\n\t\t\t\t\t\t\tif(!itemsInColumn.hasOwnProperty(ii)) continue;\r\n\t\t\t\t\t\t\tsubgroupid = RVS.F.addLayerToLayers({puid:colid, layerobject:_SRC[itemsInColumn[ii]],buildHTMLLayer:true,copyPaste:obj.copyPaste, prefix:obj.prefix});\r\n\t\t\t\t\t\t\tif (_SRC[itemsInColumn[ii]].type==\"group\") {\r\n\t\t\t\t\t\t\t\tsubitemsInGroup = \tRVS.F.getLayersFirstDepth({layerid:itemsInColumn[ii],copyPaste:obj.copyPaste});\r\n\t\t\t\t\t\t\t\tfor (gii in subitemsInGroup) {\r\n\t\t\t\t\t\t\t\t\tif(!subitemsInGroup.hasOwnProperty(gii)) continue;\r\n\t\t\t\t\t\t\t\t\tRVS.F.addLayerToLayers({puid:subgroupid, layerobject:_SRC[subitemsInGroup[gii]],buildHTMLLayer:true,copyPaste:obj.copyPaste, prefix:obj.prefix});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"column\":\r\n\t\t\t\tif (obj.duplicateId===undefined)\r\n\t\t\t\t\tnewLayerID = RVS.F.addLayerToLayers({type:\"column\", puid:obj.puid, alias:\"column\",buildHTMLLayer:true});\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar columnid;\r\n\t\t\t\t\tcolumnid = newLayerID = RVS.F.addLayerToLayers({layerobject:_SRC[obj.duplicateId],newGroupOrder:true,buildHTMLLayer:true,copyPaste:obj.copyPaste, prefix:obj.prefix});\r\n\t\t\t\t\titemsInGroup = RVS.F.getLayersFirstDepth({layerid:obj.duplicateId,copyPaste:obj.copyPaste});\r\n\t\t\t\t\tfor (ii in itemsInGroup) {\r\n\t\t\t\t\t\tif(!itemsInGroup.hasOwnProperty(ii)) continue;\r\n\t\t\t\t\t\tRVS.F.addLayerToLayers({puid:columnid, layerobject:_SRC[itemsInGroup[ii]],buildHTMLLayer:true,copyPaste:obj.copyPaste, prefix:obj.prefix});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"group\":\r\n\t\t\t\tif (obj.duplicateId===undefined)\r\n\t\t\t\t\tnewLayerID = RVS.F.addLayerToLayers({type:\"group\",alias:\"group\",buildHTMLLayer:true});\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tgroupid = newLayerID = RVS.F.addLayerToLayers({layerobject:_SRC[obj.duplicateId],buildHTMLLayer:true,copyPaste:obj.copyPaste, prefix:obj.prefix,newGroupOrder:true});\r\n\t\t\t\t\titemsInGroup = RVS.F.getLayersFirstDepth({layerid:obj.duplicateId,copyPaste:obj.copyPaste});\r\n\t\t\t\t\tfor (ii in itemsInGroup) {\r\n\t\t\t\t\t\tif(!itemsInGroup.hasOwnProperty(ii)) continue;\r\n\t\t\t\t\t\tsubgroupid = RVS.F.addLayerToLayers({puid:groupid, layerobject:_SRC[itemsInGroup[ii]],buildHTMLLayer:true,copyPaste:obj.copyPaste, prefix:obj.prefix});\r\n\t\t\t\t\t\tif (_SRC[itemsInGroup[ii]].type==\"group\") {\r\n\t\t\t\t\t\t\tsubitemsInGroup = \tRVS.F.getLayersFirstDepth({layerid:itemsInGroup[ii],copyPaste:obj.copyPaste});\r\n\t\t\t\t\t\t\tfor (gii in subitemsInGroup) {\r\n\t\t\t\t\t\t\t\tif(!subitemsInGroup.hasOwnProperty(gii)) continue;\r\n\t\t\t\t\t\t\t\tRVS.F.addLayerToLayers({puid:subgroupid, layerobject:_SRC[subitemsInGroup[gii]],buildHTMLLayer:true,copyPaste:obj.copyPaste, prefix:obj.prefix});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"linebreak\":\r\n\t\t\t\tnewLayerID = RVS.F.addLayerToLayers({\r\n\t\t\t\t\ttype:\"shape\",alias:\"linebreak\",buildHTMLLayer:true,extension:{\r\n\t\t\t\t\t\tsize:{\r\n\t\t\t\t\t\t\t\twidth:{d:{v:\"100%\"},n:{v:\"100%\"}, t:{v:\"100%\"}, m:{v:\"100%\"}},\r\n\t\t\t\t\t\t\t\theight:{d:{v:\"10px\"},n:{v:\"10px\"}, t:{v:\"10px\"}, m:{v:\"10px\"}}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\tidle:{\tbackgroundColor:'transparent',\r\n\t\t\t\t\t\t\t\tclear:{d:{v:\"both\"},n:{v:\"both\"}, t:{v:\"both\"}, m:{v:\"both\"}}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition:{position:'relative'},\r\n\t\t\t\t\t\tlinebreak:true\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tif (obj.subtype===\"predefined\") {\r\n\t\t\t\t\tnewLayerID = RVS.F.addLayerToLayers({type:obj.type, alias:obj.type,buildHTMLLayer:true,extension:obj.extension});\r\n\t\t\t\t} else\r\n\t\t\t\tif (obj.duplicateId===undefined) {\r\n\r\n\t\t\t\t\tif ((RVS.S.extendedLayerTypes!==undefined && RVS.S.extendedLayerTypes[obj.subtype]!==undefined) ||\r\n\t\t\t\t\t\t(RVS.S.extendedLayerTypes!==undefined && obj.extensiongroup!==undefined && RVS.S.extendedLayerTypes[obj.extensiongroup]!==undefined)) {\r\n\t\t\t\t\t\t\tif (obj.extensiongroup!==undefined) {\r\n\t\t\t\t\t\t\t\tnewLayerID = RVS.F.addLayerToLayers({type:obj.type, alias:obj.type, subsubtype:obj.subsubtype, subextension: RVS.S.extendedLayerTypes[obj.subtype]!=undefined && RVS.S.extendedLayerTypes[obj.subtype].subextension!==undefined ? RVS.S.extendedLayerTypes[obj.subtype].subextension[obj.subsubtype] :undefined , extension: RVS.S.extendedLayerTypes[obj.extensiongroup].extension,  buildHTMLLayer:true});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tnewLayerID = RVS.F.addLayerToLayers({type:obj.type, alias:obj.type, subsubtype:obj.subsubtype, subextension: RVS.S.extendedLayerTypes[obj.subtype]!=undefined && RVS.S.extendedLayerTypes[obj.subtype].subextension!==undefined ? RVS.S.extendedLayerTypes[obj.subtype].subextension[obj.subsubtype] :undefined , extension: RVS.S.extendedLayerTypes[obj.subtype].extension,  buildHTMLLayer:true});\r\n\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tnewLayerID = RVS.F.addLayerToLayers({type:obj.type, alias:obj.type,buildHTMLLayer:true});\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tnewLayerID = RVS.F.addLayerToLayers({layerobject:_SRC[obj.duplicateId],buildHTMLLayer:true,copyPaste:obj.copyPaste, prefix:obj.prefix, newGroupOrder:_SRC[obj.duplicateId].group.puid!==-1});\r\n\r\n\r\n\t\t\t\tswitch (obj.subtype) {\r\n\t\t\t\t\tcase \"wordpress_library\":\r\n\t\t\t\t\t\tif (obj.type===\"image\")\r\n\t\t\t\t\t\t\tjQuery('#image_layer_media_library_button').trigger('click');\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\tif (obj.type===\"video\") {\r\n\r\n\t\t\t\t\t\t\tjQuery('#video_layer_media_library_button').trigger('click');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"object_library\":\r\n\t\t\t\t\t\tif (obj.type===\"object\")\r\n\t\t\t\t\t\t\tRVS.F.openObjectLibrary({types:[\"fonticons\",\"svgs\",\"svgcustom\"],filter:\"all\", selected:[\"fonticons\"], success:{icon:\"insertContentFromOL\"}});\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\tif (obj.type===\"image\")\r\n\t\t\t\t\t\t\tjQuery('#image_layer_object_library_button').trigger('click');\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\tif (obj.type===\"video\")\r\n\t\t\t\t\t\t\tjQuery('#video_layer_object_library_button').trigger('click');\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\tif (obj.libfilters!==undefined) {\r\n\t\t\t\t\t\t\tvar filters = obj.libfilters.split(\",\");\r\n\t\t\t\t\t\t\tRVS.F.openObjectLibrary({types:filters,filter:obj.filter==\"undefined\" || obj.filter==undefined ? \"all\" : obj.filter, selected:[obj.selected==\"undefined\" || obj.selected==undefined ? filters[0] : obj.selected], success:{custom:obj.libevent}, extension:obj.extensiongroup});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"headline\":\r\n\t\t\t\t\t\tobj.ignoreBackupGroup = true;\r\n\t\t\t\t\t\tRVS.F.openQuickStyle({bacupGroupOpen:\"addLayer\",list:[\"headlines\",\"content\"]});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"simple_content\":\r\n\t\t\t\t\t\tobj.ignoreBackupGroup = true;\r\n\t\t\t\t\t\tRVS.F.openQuickStyle({bacupGroupOpen:\"addLayer\",list:[\"content\",\"headlines\"]});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"button\":\r\n\t\t\t\t\t\tobj.ignoreBackupGroup = true;\r\n\t\t\t\t\t\tRVS.F.openQuickStyle({bacupGroupOpen:\"addLayer\", list:[\"button\"]});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"predefined\":\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tobj.ignoreBackupGroup = RVS.F.subOpenQuickStyle===undefined || \tRVS.F.subOpenQuickStyle[obj.subtype]===undefined ? false : \tRVS.F.subOpenQuickStyle[obj.subtype](obj.subsubtype);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\tif (!obj.ignoreBackupGroup && !ignoreBackupGroup) RVS.F.closeBackupGroup({id:\"addLayer\"});\r\n\t\tif (!obj.ignoreLayerList) RVS.F.buildLayerLists({force:true, ignoreRebuildHTML:true});\r\n\t\tif (!obj.ignoreOrderHTMLLayers) RVS.F.reOrderHTMLLayers();\r\n\t\tif (RVS.eMode!==undefined && RVS.eMode.top===\"layer\" && RVS.eMode.mode===\"animation\") RVS.F.showForms(\"*slidelayout**mode__slidecontent*#form_layer_style\",true);\r\n\t\tRVS.DOC.trigger('layerAdded',{layerid:newLayerID, params:obj});\r\n\t\treturn \tnewLayerID;\r\n\t};\r\n\r\n\r\n\tRVS.F.deleteLayerSingle = function(obj) {\r\n\t\tRVS.F.backup({path:obj.layerid,icon:\"layers\",txt:\"Remove Layer\",lastkey:\"removelayer\",force:true,slideid:RVS.S.slideId,val:{},old:RVS.F.safeExtend(true,{},RVS.SLIDER[RVS.S.slideId]).layers[obj.layerid],backupType:\"layer\",bckpGrType:\"removelayer\"});\r\n\t\tdelete RVS.SLIDER[RVS.S.slideId].layers[obj.layerid];\r\n\t\tdelete RVS.H[obj.layerid];\r\n\t\tRVS.F.updateTriggeringActionRelations(obj.layerid); // Remove Actions from Triggering Dependencies\r\n\t\tjQuery('#_lc_'+RVS.S.slideId+'_'+obj.layerid+'_').remove();\r\n\t}\r\n\t/*\r\n\tDELETE LAYER STRUCTURES\r\n\t*/\r\n\tRVS.F.deleteLayerfromLayers = function(obj,rekursiv) {\r\n\t\tif (RVS.L[obj.layerid]===undefined) return;\r\n\t\tif (!rekursiv) {\r\n\t\t\tRVS.DOC.trigger('changeToLayerMode');\r\n\t\t\tvar localBackupGroup = false;\r\n\t\t\tif (obj.groupisopen===undefined && !RVS.S.bckpGrp) {\r\n\t\t\t\tif (!RVS.S.bckpGrp) localBackupGroup = true;\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"removeLayer\",txt:\"Remove \"+RVS.L[obj.layerid].type+\" Layer\",icon:\"delete\",lastkey:\"layer\"});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (RVS.L[obj.layerid].type==\"row\" || RVS.L[obj.layerid].type==\"column\" || RVS.L[obj.layerid].type==\"group\") {\r\n\t\t\tvar itemsInGroup = RVS.F.getLayersFirstDepth({layerid:obj.layerid});\r\n\t\t\tfor (var ii in itemsInGroup) {\r\n\t\t\t\tif(!itemsInGroup.hasOwnProperty(ii)) continue;\r\n\t\t\t\tif (obj.newpuid!==undefined && !rekursiv) {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+itemsInGroup[ii]+'.group.puid',val:obj.newpuid});\r\n\t\t\t\t\t// Fix Not Resizeable and Draggable Internal Elements issues\r\n\t\t\t\t\tif (RVS.H[itemsInGroup[ii]]!==undefined && RVS.H[itemsInGroup[ii]].w!==undefined) {\r\n\t\t\t\t\t\tdelete RVS.H[itemsInGroup[ii]].w[0].dataset.dragandresize;\r\n\t\t\t\t\t\tif (RVS.H[itemsInGroup[ii]].sclr!==undefined && RVS.H[itemsInGroup[ii]].sclr!==null) {\r\n\t\t\t\t\t\t\tRVS.H[itemsInGroup[ii]].sclr.remove();\r\n\t\t\t\t\t\t\tRVS.H[itemsInGroup[ii]].sclr=undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.F.deleteLayerfromLayers({layerid:itemsInGroup[ii]},true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.F.deleteLayerSingle(obj);\r\n\t\tif (rekursiv) return;\r\n\t\tif (localBackupGroup) {\r\n\t\t\tRVS.F.closeBackupGroup({id:\"removeLayer\"});\r\n\t\t\tRVS.F.buildLayerLists({force:true});\r\n\t\t}\r\n\t\treturn;\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE SELECTED HTML LAYERS\r\n\t*/\r\n\tRVS.F.updateSelectedHtmlLayers = function(ignoreSelected,ignoreClasses) {\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\tlet hsh = document.querySelectorAll('.hasSelectedChild');\r\n\t\t\thsh.forEach(h=>{\r\n\t\t\t\th.classList.remove('hasSelectedChild');\r\n\t\t\t\tdelete h.dataset.selectedchild;\r\n\t\t\t});\r\n\t\t\tfor (var i in RVS.L) {\r\n\t\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (i!==\"top\" && i!==\"bottom\" && i!==\"middle\") {\r\n\t\t\t\t\tif (!ignoreSelected && RVS.F.inSelectedLayers({id:i}) && RVS.H[i]!==undefined) {\r\n\t\t\t\t\t\tRVS.H[i].w[0].classList.add(\"selected\");\r\n\t\t\t\t\t\t//RVS.H[i].w[0].classList.add(\"marked\");\r\n\t\t\t\t\t\tRVS.H[i].selected = true;\r\n\t\t\t\t\t\tvar gParent = RVS.F.getTopParent({layer:i});\r\n\t\t\t\t\t\tif (gParent!==-1 && RVS.L[gParent].type==\"group\") {\r\n\t\t\t\t\t\t\tRVS.H[gParent].w[0].classList.add('hasSelectedChild');\r\n\t\t\t\t\t\t\tif (gParent!=RVS.L[i].group.puid) RVS.H[RVS.L[i].group.puid].w[0].classList.add('hasSelectedChild');\r\n\t\t\t\t\t\t\tRVS.H[gParent].w[0].dataset.selectedchild = RVS.H[gParent].w[0].dataset.selectedchild===undefined ? i : \"multiple\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tRVS.F.setZindex({id:i,o:475});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (RVS.H[i]!==undefined) {\r\n\t\t\t\t\t\t\tif (ignoreClasses!==true) {\r\n\t\t\t\t\t\t\t\tRVS.H[i].w[0].classList.remove(\"selected\");\r\n\t\t\t\t\t\t\t\tRVS.H[i].selected = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tRVS.F.setZindex({id:i});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE STATIC LAYER START / END LISTS\r\n\t*/\r\n\tRVS.F.updateStaticStartEndList = function() {\r\n\t\twindow.staticLayerStartIndex = window.staticLayerStartIndex===undefined ? jQuery('#staticlayer_Startindex') : window.staticLayerStartIndex;\r\n\t\twindow.staticLayerEndIndex = window.staticLayerEndIndex===undefined ? jQuery('#staticlayer_Endindex') : window.staticLayerEndIndex;\r\n\t\tRVS.F.removeAllOptionsS2({select:window.staticLayerStartIndex});\r\n\t\tRVS.F.removeAllOptionsS2({select:window.staticLayerEndIndex});\r\n\r\n\t\tfor (var i=1;i<RVS.SLIDER.slideIDs.length-1;i++) {\r\n\t\t\tRVS.F.addOptionS2({select:window.staticLayerStartIndex, val:i.toString(), txt:i});\r\n\t\t\tRVS.F.addOptionS2({select:window.staticLayerEndIndex, val:(i+1).toString(), txt:(i+1)});\r\n\t\t}\r\n\t\tRVS.F.addOptionS2({select:window.staticLayerEndIndex, val:\"last\", txt:RVS_LANG.lastslide});\r\n\t};\r\n\r\n\t/*\r\n\tSWAP ZINDEX BASED ON IF IT IS IN EDITED MODE OR NOT\r\n\t*/\r\n\tRVS.F.setZindex = function(_) {\r\n\t\t_.o = _.o == undefined ? 0 : _.o;\r\n\t\tif (RVS.H[_.id]!==undefined && RVS.H[_.id].w!==undefined) tpGS.gsap.set(RVS.H[_.id].w,{zIndex:parseInt(RVS.L[_.id].position.zIndex,0) + parseInt(_.o,0)});\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE ALL LAYERS QUICK\r\n\t*/\r\n\tRVS.F.allLayersReDraw = function() {\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tRVS.F.drawHTMLLayer({uid:li});\r\n\t\t}\r\n\t}\r\n\t/*\r\n\tSELECTED LAYERS HANDLING\r\n\t*/\r\n\tRVS.F.selectedLayersVisualUpdate = function() {\r\n\t\tjQuery('.layerselector').removeClass(\"checked\");\r\n\t\tjQuery('.tllayerlist_element').removeClass(\"checked\");\r\n\r\n\t\tfor (var t in RVS.S.selLayerTypes) {\r\n\t\t\tif(!RVS.S.selLayerTypes.hasOwnProperty(t)) continue;\r\n\t\t\tRVS.S.selLayerTypes[t] = false,\r\n\t\t\tinset = false;\r\n\t\t}\r\n\t\tvar inPlace = false,\r\n\t\t\tncl = \"\";\r\n\t\tfor (var li in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(li)) continue;\r\n\t\t\tjQuery('#tllayerlist_element_'+RVS.S.slideId+'_'+RVS.selLayers[li]).addClass(\"checked\");\r\n\t\t\tjQuery('#tllayerlist_element_selector_'+RVS.S.slideId+'_'+RVS.selLayers[li]).addClass(\"checked\");\r\n\t\t\tinset = inset==true || RVS.L[RVS.selLayers[li]].size.covermode==\"fullinset\" ? true : false;\r\n\t\t\tif (!inPlace && RVS.L[RVS.selLayers[li]].group.puid!=-1) inPlace = RVS.L[RVS.L[RVS.selLayers[li]].group.puid].type===\"column\" ? \"column\" : RVS.L[RVS.L[RVS.selLayers[li]].group.puid].type===\"group\" ? \"group\" : \"root\";\r\n\t\t\tRVS.S.selLayerTypes[RVS.L[RVS.selLayers[li]].type] = true;\r\n\t\t\tif (RVS.L[RVS.selLayers[li]].subtype!==undefined && RVS.L[RVS.selLayers[li]].subtype!==\"\") {\r\n\t\t\t\tRVS.S.selLayerTypes[RVS.L[RVS.selLayers[li]].subtype] = true;\r\n\t\t\t\tif (RVS.L[RVS.selLayers[li]].subsubtype!==undefined && RVS.L[RVS.selLayers[li]].subsubtype!==\"\") RVS.S.selLayerTypes[RVS.L[RVS.selLayers[li]].subsubtype] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\tfor (var t in RVS.S.selLayerTypes) {\r\n\t\t\tif(!RVS.S.selLayerTypes.hasOwnProperty(t)) continue;\r\n\t\t\tif (RVS.S.selLayerTypes[t]) ncl=ncl+\" _\"+t+\"_sel_\";\r\n\r\n\t\t}\r\n\t\tif (ncl==\"\") {\r\n\t\t\tncl = \"no_layers_selected\";\r\n\t\t} else {\r\n\t\t\tncl = ncl+\" _layer_in_\"+(inPlace==false ? \"root\" : inPlace)+\"_sel_\" + (inset ? \" layer_is_inset\" : \"\");\r\n\t\t}\r\n\r\n\t\tncl = RVS.selLayers.length>1 ? ncl + \" multiple_layers_selected\" : ncl;\r\n\t\tRVS.C.the_cont[0].className = ncl;\r\n\t};\r\n\r\n\t/*\r\n\tRESIZE LAYER OR GROUP WITH CHILDREN LINEAR\r\n\t */\r\n\tfunction prepareRescaler(pin) {\r\n\t\tif (pin===undefined) return;\r\n\t\tpin.resizable({\r\n\t\t\thandles:\"se\",\r\n\t\t\tstart:function(e,ui) {\r\n\t\t\t\tswitch (RVS.L[RVS.selLayers[0]].type) {\r\n\t\t\t\t\tcase \"text\":\r\n\t\t\t\t\tcase \"button\":\r\n\t\t\t\t\t\tRVS.F.showForms(\"*slidelayout**mode__slidecontent*#form_layer_style\",true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tRVS.F.showForms(\"*slidelayout**mode__slidecontent*#form_layer_position\",true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tRVS.C.layergrid.addClass(\"layersInDragorResize\");\r\n\t\t\t\tRVS.F.doResizeLayers({mode:\"init\"});\r\n\t\t\t\twindow.lastReScalerWidth = RVS.H[RVS.selLayers[0]].w.width();\r\n\r\n\t\t\t},\r\n\t\t\tresize:function(e,ui) {\r\n\t\t\t\tvar s = Math.round((ui.size.width/ui.originalSize.width)*100) / 100;\r\n\t\t\t\tif (s!==window.lastReScalerSize) RVS.F.doResizeLayers({mode:\"update\",size:s});\r\n\t\t\t\twindow.lastReScalerSize = s;\r\n\t\t\t},\r\n\t\t\taspectRatio: true,\r\n\t\t\tstop:function(e,ui) {\r\n\t\t\t\tvar s = Math.round((ui.size.width/ui.originalSize.width)*100) / 100;\r\n\t\t\t\tRVS.F.doResizeLayers({mode:\"set\",size:s});\r\n\t\t\t\tui.helper[0].style.width=\"100%\";\r\n\t\t\t\tui.helper[0].style.height=\"100%\";\r\n\t\t\t\tRVS.C.layergrid.removeClass(\"layersInDragorResize\");\r\n\t\t\t\tRVS.S.justresized = true;\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tRVS.S.justresized = false;\r\n\t\t\t\t},100)\r\n\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t/*\r\n\tMULTIPLICATE VALUES IF POSSIBLE\r\n\t */\r\n\tfunction reLaMu(how,a,b,c,d) {\r\n\t\tvar r;\r\n\t\tif (a===undefined || a==\"auto\" || a==\"none\" || !RVS.F.isNumeric(parseInt(a,0)) || (!RVS.F.isNumeric(a) && a.indexOf(\"%\")>0))\r\n\t\t\tr=a;\r\n\t\telse {\r\n\t\t\tr=Math[how]((parseInt(a,0) * b));\r\n\t\t\tr = c===undefined ? r : r+c;\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\t/*\r\n\tCACHE THE ATTRIBUTES BEFORE LAYER RESIZER STARTS\r\n\t */\r\n\tfunction cacheBeforeScale(l) {\r\n\t\tvar r = {\r\n\t\t\tx: l.position.x[RVS.screen].v,\r\n\t\t\ty: l.position.y[RVS.screen].v,\r\n\t\t\tpadding : RVS.F.safeExtend(true,{},l.idle.padding[RVS.screen].v),\r\n\t\t\tborderRadius : RVS.F.safeExtend(true,{},l.idle.borderRadius.v),\r\n\t\t\twidth : l.size.width[RVS.screen].v,\r\n\t\t\theight : l.size.height[RVS.screen].v,\r\n\t\t\tminHeight : l.size.minHeight[RVS.screen].v,\r\n\t\t\tmaxHeight : l.size.maxHeight[RVS.screen].v,\r\n\t\t\tminWidth : l.size.minWidth[RVS.screen].v,\r\n\t\t\tmaxWidth : l.size.maxWidth[RVS.screen].v,\r\n\t\t\twrap : l.idle.whiteSpace[RVS.screen].v,\r\n\t\t\tboxShadow : {\r\n\t\t\t\thoffset : l.idle.boxShadow.hoffset[RVS.screen].v,\r\n\t\t\t\tvoffset : l.idle.boxShadow.voffset[RVS.screen].v,\r\n\t\t\t\tblur : l.idle.boxShadow.blur[RVS.screen].v,\r\n\t\t\t\tspread : l.idle.boxShadow.spread[RVS.screen].v\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (jQuery.inArray(l.type,[\"text\",\"button\"])>=0) {\r\n\t\t\tr.fontSize = l.idle.fontSize[RVS.screen].v;\r\n\t\t\tr.letterSpacing = l.idle.letterSpacing[RVS.screen].v;\r\n\t\t\tr.lineHeight = l.idle.lineHeight[RVS.screen].v;\r\n\t\t}\r\n\t\tr.frames = {};\r\n\t\tfor (var i in l.timeline.frames) if (l.timeline.frames.hasOwnProperty(i))\r\n\t\t\tr.frames[i] = {\r\n\t\t\t\ttransform : { x : l.timeline.frames[i].transform.x[RVS.screen].v, y : l.timeline.frames[i].transform.y[RVS.screen].v},\r\n\t\t\t\tmask : { x : l.timeline.frames[i].mask.x[RVS.screen].v,  y : l.timeline.frames[i].mask.y[RVS.screen].v},\r\n\t\t\t\tchars :{ x : l.timeline.frames[i].chars.x[RVS.screen].v, y : l.timeline.frames[i].chars.y[RVS.screen].v},\r\n\t\t\t\twords :{ x : l.timeline.frames[i].words.x[RVS.screen].v, y : l.timeline.frames[i].words.y[RVS.screen].v},\r\n\t\t\t\tlines :{ x : l.timeline.frames[i].lines.x[RVS.screen].v, y : l.timeline.frames[i].lines.y[RVS.screen].v}\r\n\t\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\t/*\r\n\tMULTIPLICATE ATTRIBUTES ON LAYERS\r\n\t */\r\n\tfunction resizeLayer(obj) {\r\n\t\tvar l = RVS.L[obj.layerid],\r\n\t\t\t_ = RSCBS[obj.layerid],\r\n\t\t\tp = RVS.S.slideId+'.layers.'+obj.layerid;\r\n\r\n\t\tif (jQuery.inArray(l.type,[\"text\",\"button\"])>=0) for (var a in RVS.RSCBA.t) if (RVS.RSCBA.t.hasOwnProperty(a)) RVS.F.updateSliderObj({path:p+'.idle.'+RVS.RSCBA.t[a]+'.'+RVS.screen+\".v\",val:reLaMu(\"round\",_[RVS.RSCBA.t[a]],obj.size),ignoreResponsive:obj.ignoreResponsive, ignoreBackup:obj.ignoreBackup});\r\n\t\tfor (var a in RVS.RSCBA.a) if (RVS.RSCBA.a.hasOwnProperty(a)) RVS.F.updateSliderObj({path:p+'.size.'+RVS.RSCBA.a[a]+'.'+RVS.screen+\".v\",val:reLaMu(\"round\",_[RVS.RSCBA.a[a]],obj.size),ignoreResponsive:obj.ignoreResponsive, ignoreBackup:obj.ignoreBackup});\r\n\t\tfor (var i=0;i<4;i++) RVS.F.updateSliderObj({path:p+'.idle.padding.'+RVS.screen+\".v.\"+i,val:reLaMu(\"round\",_.padding[i],obj.size),ignoreResponsive:obj.ignoreResponsive, ignoreBackup:obj.ignoreBackup});\r\n\t\tif (l.idle.boxShadow.inuse===true) for (var a in RVS.RSCBA.sh) if (RVS.RSCBA.sh.hasOwnProperty(a)) RVS.F.updateSliderObj({path:p+'.idle.boxShadow.'+RVS.RSCBA.sh[a]+'.'+RVS.screen+\".v\",val:reLaMu(\"round\",_.boxShadow[RVS.RSCBA.sh[a]],obj.size,\"px\"),ignoreResponsive:obj.ignoreResponsive, ignoreBackup:obj.ignoreBackup});\r\n\r\n\t\t//for (var i=0;i<4;i++) RVS.F.updateSliderObj({path:p+'.idle.borderRadius.v.'+i,val:reLaMu(\"round\",_.borderRadius[i],obj.size,\"px\"),ignoreResponsive:obj.ignoreResponsive, ignoreBackup:obj.ignoreBackup});\r\n\r\n\t\tfor (i in RVS.L[obj.layerid].timeline.frames) if (RVS.L[obj.layerid].timeline.frames.hasOwnProperty(i))\r\n\t\t\tfor (var a in RVS.RSCBA.f) if (RVS.RSCBA.f.hasOwnProperty(a)) {\r\n\t\t\t\tRVS.F.updateSliderObj({path:p+'.timeline.frames.'+i+'.'+RVS.RSCBA.f[a]+'.x.'+RVS.screen+\".v\",val: reLaMu(\"round\",_.frames[i][RVS.RSCBA.f[a]].x,obj.size,\"px\"),ignoreResponsive:obj.ignoreResponsive, ignoreBackup:obj.ignoreBackup});\r\n\t\t\t\tRVS.F.updateSliderObj({path:p+'.timeline.frames.'+i+'.'+RVS.RSCBA.f[a]+'.y.'+RVS.screen+\".v\",val: reLaMu(\"round\",_.frames[i][RVS.RSCBA.f[a]].y,obj.size,\"px\"),ignoreResponsive:obj.ignoreResponsive, ignoreBackup:obj.ignoreBackup});\r\n\t\t\t}\r\n\t\tif (obj.ingroup) {\r\n\t\t\tRVS.F.updateSliderObj({path:p+'.position.x.'+RVS.screen+\".v\",val: reLaMu(\"round\",_.x,obj.size,\"px\"),ignoreResponsive:obj.ignoreResponsive, ignoreBackup:obj.ignoreBackup});\r\n\t\t\tRVS.F.updateSliderObj({path:p+'.position.y.'+RVS.screen+\".v\",val: reLaMu(\"round\",_.y,obj.size,\"px\"),ignoreResponsive:obj.ignoreResponsive, ignoreBackup:obj.ignoreBackup});\r\n\t\t}\r\n\t\tRVS.F.drawHTMLLayer({uid:obj.layerid});\r\n\t\tRVS.F.updateEasyInputs({container:jQuery('#form_layer_style'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\tRVS.F.updateEasyInputs({container:jQuery('#form_layer_advstyle'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\tRVS.F.updateEasyInputs({container:jQuery('#form_layer_position'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\tRVS.DOC.trigger('layerresized',{layerid:obj.layerid});\r\n\t}\r\n\r\n\r\n\t/*\r\n\tMULTIPLICATE ATTRIBUTES ON LAYERS\r\n\t */\r\n\tfunction resizeLayerSimple(obj) {\r\n\t\tvar l = RVS.L[obj.layerid],\r\n\t\t\t_ = RSCBS[obj.layerid];\r\n\r\n\t\tRVS.cC = RVS.cC===undefined ? {} : RVS.cC;\r\n\r\n\t\tif (jQuery.inArray(l.type,[\"text\",\"button\"])>=0) {\r\n\t\t\tfor (var a in RVS.RSCBA.t) if (RVS.RSCBA.t.hasOwnProperty(a)) {\r\n\t\t\t\tl.idle[RVS.RSCBA.t[a]][RVS.screen].v = reLaMu(\"round\",_[RVS.RSCBA.t[a]],obj.size);\r\n\t\t\t\tRVS.cC[\"js_\"+RVS.RSCBA.t[a]] = RVS.cC[\"js_\"+RVS.RSCBA.t[a]]===undefined ? document.getElementById(RVS.RSCBA.ti[a]) : RVS.cC[\"js_\"+RVS.RSCBA.t[a]];\r\n\t\t\t\tRVS.cC[\"js_\"+RVS.RSCBA.t[a]].value = l.idle[RVS.RSCBA.t[a]][RVS.screen].v+\"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var a in RVS.RSCBA.a) if (RVS.RSCBA.a.hasOwnProperty(a)) {\r\n\t\t\tl.size[RVS.RSCBA.a[a]][RVS.screen].v = reLaMu((RVS.RSCBA.a[a]===\"width\" ? \"ceil\" : \"round\"),_[RVS.RSCBA.a[a]],obj.size);\r\n\t\t\tRVS.cC[\"js_\"+RVS.RSCBA.a[a]] = RVS.cC[\"js_\"+RVS.RSCBA.a[a]]===undefined ? document.getElementById(RVS.RSCBA.ai[a]) : RVS.cC[\"js_\"+RVS.RSCBA.a[a]];\r\n\t\t\tRVS.cC[\"js_\"+RVS.RSCBA.a[a]].value = l.size[RVS.RSCBA.a[a]][RVS.screen].v + (RVS.F.isNumeric(l.size[RVS.RSCBA.a[a]][RVS.screen].v) ? \"px\" : \"\");\r\n\t\t}\r\n\r\n\t\tif (l.idle.boxShadow.inuse===true) for (var a in RVS.RSCBA.sh) if (RVS.RSCBA.sh.hasOwnProperty(a)) l.idle.boxShadow[RVS.RSCBA.sh[a]][RVS.screen].v = reLaMu(\"round\",_.boxShadow[RVS.RSCBA.sh[a]],obj.size,\"px\");\r\n\r\n\t\tfor (var i=0;i<4;i++) l.idle.padding[RVS.screen].v[i] = reLaMu(\"round\",_.padding[i],obj.size);\r\n\t\t//for (var i=0;i<4;i++) l.idle.borderRadius.v[i] = reLaMu(\"round\",_.borderRadius[i],obj.size,\"px\");\r\n\t\tif (obj.ingroup) {\r\n\t\t\tl.position.x[RVS.screen].v = reLaMu(\"round\",_.x,obj.size,\"px\");\r\n\t\t\tl.position.y[RVS.screen].v = reLaMu(\"round\",_.y,obj.size,\"px\");\r\n\t\t}\r\n\r\n\t\tRVS.F.drawHTMLLayer({uid:obj.layerid,ignoreLayerAnimation:true});\r\n\t\t//RVS.F.updateEasyInputs({container:jQuery('#form_layer_style'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t}\r\n\r\n\t/*\r\n\tDO RESIZE LAYERS BASED ON SCALER\r\n\t */\r\n\tRVS.F.doResizeLayers = function(_) {\r\n\t\tif (RVS.selLayers.length>1 || RVS.selLayers.length===0) return;\r\n\t\tswitch (_.mode) {\r\n\t\t\tcase \"init\":\r\n\t\t\t\twindow.RSCBS = {};\r\n\t\t\t\twindow.RSCBS[RVS.selLayers[0]] = cacheBeforeScale(RVS.L[RVS.selLayers[0]]);\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].type!==\"group\" && window.RSCBS[RVS.selLayers[0]].width===\"auto\" && RVS.L[RVS.selLayers[0]].group.puid===-1 && (RVS.L[RVS.selLayers[0]].type===\"text\" || RVS.L[RVS.selLayers[0]].type===\"button\")) {\r\n\t\t\t\t\tif (window.RSCBS[RVS.selLayers[0]].wrap===\"full\" || window.RSCBS[RVS.selLayers[0]].wrap===\"normal\") RVS.L[RVS.selLayers[0]].idle.whiteSpace[RVS.screen].v = \"content\";\r\n\t\t\t\t\twindow.RSCBS[RVS.selLayers[0]].CacheWidth = window.RSCBS[RVS.selLayers[0]].width;\r\n\t\t\t\t\twindow.RSCBS[RVS.selLayers[0]].width = window.RSCBS[RVS.selLayers[0]].width===\"auto\" ? RVS.H[RVS.selLayers[0]].w.width() : window.RSCBS[RVS.selLayers[0]].width;\r\n\t\t\t\t}\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].type===\"group\") {\r\n\t\t\t\t\twindow.RSCBS.layers = RVS.F.getLayersFirstDepth({layerid:RVS.selLayers[0]});\r\n\t\t\t\t\tfor (var i in window.RSCBS.layers) if (window.RSCBS.layers.hasOwnProperty(i)) window.RSCBS[window.RSCBS.layers[i]] = cacheBeforeScale(RVS.L[window.RSCBS.layers[i]]);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"update\":\r\n\t\t\t\tresizeLayerSimple({layerid:RVS.selLayers[0],size:_.size});\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].type===\"group\") for (var i in window.RSCBS.layers) if (window.RSCBS.layers.hasOwnProperty(i)) resizeLayerSimple({layerid:window.RSCBS.layers[i],size:_.size,ingroup:true})\r\n\t\t\tbreak;\r\n\t\t\tcase \"set\":\r\n\t\t\t\tvar backtoorig = false;\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].type!==\"group\"  && RVS.L[RVS.selLayers[0]].group.puid===-1 &&  (RVS.L[RVS.selLayers[0]].type===\"text\" || RVS.L[RVS.selLayers[0]].type===\"button\") &&\r\n\t\t\t\t\t((RVS.S.layer_grid_offset.left + RVS.S.lgw) > (RVS.H[RVS.selLayers[0]].w.offset().left + RVS.H[RVS.selLayers[0]].w.width()))) {\r\n\t\t\t\t\tbacktoorig= true;\r\n\t\t\t\t\twindow.RSCBS[RVS.selLayers[0]].width = window.RSCBS[RVS.selLayers[0]].CacheWidth===\"auto\" ? \"auto\" : window.RSCBS[RVS.selLayers[0]].width;\r\n\t\t\t\t}\r\n\t\t\t\tresizeLayerSimple({layerid:RVS.selLayers[0],size:1});\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].type===\"group\") for (var i in window.RSCBS.layers) if (window.RSCBS.layers.hasOwnProperty(i)) resizeLayerSimple({layerid:window.RSCBS.layers[i],size:1})\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"layerScaling\",txt:\"Layer Scaling\",icon:\"layers\",lastkey:\"layer\"});\r\n\t\t\t\tresizeLayer({layerid:RVS.selLayers[0],size:_.size,ignore:false,redraw:true, updatefields:true, ignoreBackup:false});\r\n\t\t\t\tif (backtoorig===true) RVS.L[RVS.selLayers[0]].idle.whiteSpace[RVS.screen].v = window.RSCBS[RVS.selLayers[0]].wrap;\r\n\t\t\t\telse if (RVS.L[RVS.selLayers[0]].type!==\"group\"  && RVS.L[RVS.selLayers[0]].group.puid===-1 &&  (RVS.L[RVS.selLayers[0]].type===\"text\" || RVS.L[RVS.selLayers[0]].type===\"button\") && window.RSCBS[RVS.selLayers[0]].width!==window.RSCBS[RVS.selLayers[0]].CacheWidth && window.RSCBS[RVS.selLayers[0]].CacheWidth==\"auto\")\r\n\t\t\t\t\tRVS.F.showInfo({content:RVS_LANG.layerbleedsout, type:\"info\", showdelay:0, hidedelay:8, hideon:\"\", event:\"\" });\r\n\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].type===\"group\") for (var i in window.RSCBS.layers) if (window.RSCBS.layers.hasOwnProperty(i)) resizeLayer({layerid:window.RSCBS.layers[i],size:_.size,ingroup:true,ignore:false,redraw:true, updatefields:true, ignoreBackup:false})\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"layerScaling\"});\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tADD SELECTED LAYERS TO THE SELECTED ARRAY\r\n\t*/\r\n\tRVS.F.selectLayers = function(_) {\r\n\t\tif (RVS.S.justresized) return;\r\n\r\n\t\t_ = _ ===undefined ? {} : _;\r\n\r\n\t\tif (RVS.eMode.mode!==\"animation\")\r\n\t\t\tRVS.S.keyFrame = \"idle\";\r\n\t\telse\r\n\t\tif (_.keepSelectedFrame!==true || RVS.S.keyFrame===undefined) {\r\n\t\t\t_.selectedKeyFrame =_.selectedKeyFrame===undefined ? \"idle\" : _.selectedKeyFrame;\r\n\t\t\tRVS.S.keyFrame = _.selectedKeyFrame;\r\n\t\t}\r\n\r\n\t\tif (_!==undefined && _.action===\"add\" && _.id!==undefined && RVS.L[_.id].visibility && (RVS.L[_.id].visibility.locked || !RVS.L[_.id].visibility.visible))\r\n\t\t\t_.action = \"remove\";\r\n\r\n\t\tif (!_.ignoreModeChange && (RVS.eMode.top!==\"layer\" || RVS.eMode.menu!==\"#form_layer_animation\")) {\r\n\t\t\tRVS.F.mainMode({set:false, ignoreReDraw:true, mode:\"slidelayout\"});\r\n\t\t\tRVS.F.showHideLayerEditor({mode:\"slidecontent\",openSettings:false});\r\n\t\t}\r\n\r\n\t\tif (_.overwrite) {\r\n\t\t\tRVS.F.redrawTextLayerInnerHTML(RVS.selLayers[0],undefined,true);\r\n\t\t\tRVS.selLayers = [];\r\n\r\n\t\t} else\r\n\r\n\t\tif (RVS.selLayers.length>0 && !_.quickmode && RVS.eMode.top===\"layer\" && RVS.eMode.menu===\"#form_layer_animation\")\r\n\t\t\tRVS.F.showInfo({content:RVS_LANG.noMultipleSelectionOfLayers, type:\"info\", showdelay:0.2, hidedelay:2, hideon:\"\", event:\"\" });\r\n\r\n\r\n\t\t_.id = _.id===\"top\" || _.id===\"bottom\" || _.id===\"middle\" ? \"ignore\" : _.id===undefined ? _.id : parseInt(_.id,0);\r\n\r\n\t\tif (_.id!==undefined && _.id!==\"ignore\")\r\n\t\t\tif (_.action === 'add' && jQuery.inArray(_.id,RVS.selLayers)==-1) RVS.selLayers.push(_.id);\r\n\t\t\telse\r\n\t\t\tif (_.action === 'remove' && jQuery.inArray(_.id,RVS.selLayers)!==-1) RVS.selLayers.splice(jQuery.inArray(_.id,RVS.selLayers),1);\r\n\r\n\r\n\r\n\t\tif (_.ignoreUpdate!==true && !_.quickmode) {\r\n\t\t\tif (_.ignoreUpdate!==\"onlyhtml\") RVS.F.selectedLayersVisualUpdate();\r\n\t\t\tRVS.F.updateSelectedHtmlLayers();\r\n\t\t\tif (RVS.eMode.mode!==\"animation\") RVS.F.updateAllLayerToIDLE();\r\n\t\t\tRVS.F.updateSelectedLayersIdleHover();\r\n\t\t\tif (RVS.C.toggledTextButton.className.indexOf('selected')>=0) RVS.F.redrawTextLayerInnerHTML(RVS.selLayers[0]);\r\n\t\t}\r\n\r\n\t\tif (_.ignoreFieldUpdates!==true && !_.quickmode) {\r\n\t\t\tRVS.F.updateLayerInputFields({short:true});\r\n\t\t\tRVS.C.slit.textContent = RVS.selLayers.length===1 ? RVS.F.getLayerIcon(RVS.L[RVS.selLayers[0]].linebreak ? 'linebreak' : RVS.L[RVS.selLayers[0]].type,RVS.L[RVS.selLayers[0]].subtype) : \"layers\";\r\n\t\t\tRVS.DOC.trigger('selectLayersDone');\r\n\t\t\tRVS.F.checkForAudioLayer();\r\n\t\t} else\r\n\t\tif (_.quickmode) RVS.F.updateSelectedHtmlLayers();\r\n\t\telse\r\n \t\tif (window.qstyle_library_open) RVS.F.updateAvailableLayerTypes();\r\n\r\n\r\n\r\n\t\t//Go to SelectedKeyFrame\r\n\t\tif (_.selectedKeyFrame!==undefined) {\r\n\t\t\tRVS.TL.cache.main = (RVS.F.getTimeAtSelectedFrameEnd()-2) / 100;\r\n\r\n\t\t\tif (RVS.TL.cache.main<=0)\r\n\t\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"selectLayers\"});\r\n\t\t\telse\r\n\t\t\t\tRVS.F.updateTimeLine({force:true, state:\"time\",time:RVS.TL.cache.main, timeline:\"main\", forceFullLayerRender:true, updateCurTime:true});\r\n\r\n\t\t} else if (!_.quickmode && RVS.selLayers.length===0) jQuery('framewrap.selected').removeClass(\"selected\");\r\n\t\tif (!_.quickmode && RVS.S.shwLayerAnim) RVS.DOC.trigger(\"previewLayerAnimation\");\r\n\r\n\t};\r\n\r\n\tRVS.F.convertTimeToSec = function(a,def) {\r\n\t\ta = a===\"\" ? parseFloat(def) : a;\r\n\t\tvar cansplit = !RVS.F.isNumeric(a) && a.indexOf(':')>=0,\r\n\t\t\tb = 0;\r\n\t\ta = cansplit ? a.split(\":\") : a;\r\n\t\tif (cansplit && a.length>1)\r\n\t\t\tb = ((60*parseFloat(a[0])) +parseFloat(a[1]));\r\n\t\telse\r\n\t\tif (cansplit)\r\n\t\t\tb =  parseFloat(a[0]);\r\n\t\telse\r\n\t\t\tb = a;\r\n\t\treturn  b===null || b===undefined  ? 0 : b;\r\n\t};\r\n\r\n\tRVS.F.updateAudioTimes = function(duration) {\r\n\r\n\t\tif (RVS.selLayers.length!=1) return;\r\n\t\tif (RVS.L[RVS.selLayers[0]].type!==\"audio\") return;\r\n\t\tRVS.L[RVS.selLayers[0]].media.startAt = RVS.L[RVS.selLayers[0]].media.startAt===\"\" ? 0 : RVS.L[RVS.selLayers[0]].media.startAt;\r\n\t\tRVS.L[RVS.selLayers[0]].media.endAt = RVS.L[RVS.selLayers[0]].media.endAt===\"\" ? duration : RVS.L[RVS.selLayers[0]].media.endAt;\r\n\t\tRVS.L[RVS.selLayers[0]].media.endAt = RVS.L[RVS.selLayers[0]].media.endAt>duration ? duration : RVS.L[RVS.selLayers[0]].media.endAt;\r\n\r\n\t\tdocument.getElementById('layer_video_start').value = RVS.L[RVS.selLayers[0]].media.startAt;\r\n\t\tdocument.getElementById('layer_video_end').value = RVS.L[RVS.selLayers[0]].media.endAt;\r\n\r\n\t\tvar st = RVS.F.convertTimeToSec(RVS.L[RVS.selLayers[0]].media.startAt,0),\r\n\t\t\ten = RVS.F.convertTimeToSec(RVS.L[RVS.selLayers[0]].media.endAt,window.audiomaster.getDuration());\r\n\t\ten = en===0 || en<=st ?  window.audiomaster.getDuration() : en;\r\n\r\n\t\twindow.audiomaster.regions.destroy();\r\n\r\n\t\twindow.audioregion = window.audiomaster.regions.add({start:st,end:en,color:'rgba(0,109,210,0.2)'});\r\n\t\twindow.audioregion.on('update',function() {\r\n\t\t\tRVS.L[RVS.selLayers[0]].media.startAt = window.audioregion.start;\r\n\t\t\tRVS.L[RVS.selLayers[0]].media.endAt = window.audioregion.end;\r\n\t\t\tdocument.getElementById('layer_video_start').value = RVS.L[RVS.selLayers[0]].media.startAt;\r\n\t\t\tdocument.getElementById('layer_video_end').value = RVS.L[RVS.selLayers[0]].media.endAt;\r\n\t\t});\r\n\r\n\t\twindow.audioregion.on('dblclick',function() {\r\n\t\t\twindow.audioregion.play();\r\n\t\t});\r\n\r\n\t};\r\n\r\n\t// CHECK IF AUDIO LAYER ADDED, AND LOAD ITS WAVE IF NEEDED\r\n\tRVS.F.checkForAudioLayer = function() {\r\n\r\n\t\t// RETURN IF NOTHING TO LOAD\r\n\t\tif (RVS.selLayers.length!=1) return;\r\n\t\tif (RVS.L[RVS.selLayers[0]].type!==\"audio\") return;\r\n\t\tif (RVS.L[RVS.selLayers[0]].media.audioUrl===\"\") return;\r\n\t\tif (window.audiomaster===\"FAIL\") return;\r\n\r\n\t\t//BUILD AUDIO MASTER IF NEEDED AND LOAD JS FILES FOR IT\r\n\t\tif (window.audiomaster===undefined) {\r\n\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.audiolibraryloading});\r\n\t\t\tjQuery.getScript(RVS.ENV.plugin_url+'/admin/assets/js/plugins/wavesurfer.js',function() {\r\n\t\t\t\twindow.audiomaster = WaveSurfer.create({\r\n\t\t\t\t\tcontainer : '#media_audio_master',\r\n\t\t\t\t\tcursorColor:'#5e35b1',\r\n\t\t\t\t\tprogressColor:'transparent',\r\n\t\t\t\t\theight:30,\r\n\t\t\t\t\tplugins: [WaveSurfer.regions.create({})]\r\n\t\t\t\t});\r\n\t\t\t\tRVS.DOC.on('listenAudioMaster',function() {\r\n\t\t\t\t\twindow.audiomaster.play();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tRVS.DOC.on('muteAudioMaster',function() {\r\n\t\t\t\t\twindow.audiomaster.pause();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tRVS.DOC.on('updateaudiorange', function() {\r\n\t\t\t\t\tRVS.F.updateAudioTimes(window.audiomaster.getDuration());\r\n\t\t\t\t});\r\n\t\t\t\t//Recall the Function\r\n\t\t\t\tRVS.F.checkForAudioLayer();\r\n\t\t\t\tsetTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n\t\t\t}).fail(function(a,b,c) {\r\n\t\t\t\tsetTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n\t\t\t\twindow.audiomaster = \"FAIL\";\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t} else {\r\n\t\t\twindow.audiomaster.on('ready',function() {\r\n\t\t\t\tRVS.F.updateAudioTimes(window.audiomaster.getDuration());\r\n\t\t\t\tjQuery('#audio_simulator').removeClass(\"disabled\");\r\n\t\t\t});\r\n\t\t\twindow.audiomaster.on('loading',function() { jQuery('#audio_simulator').addClass(\"disabled\");});\r\n\t\t\twindow.audiomaster.on('finish',function() { RVS.F.changeSwitchState({el:jQuery('#audio_simulator')[0],state:\"play\"});});\r\n\t\t\twindow.audiomaster.load(RVS.L[RVS.selLayers[0]].media.audioUrl);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tRVS.F.updateSelectedLayersIdleHover = function() {\r\n\t\tfor (var l in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(l)) continue;\r\n\t\t\tif (RVS.H[l]!==undefined) {\r\n\t\t\t\tif (RVS.eMode.mode===\"idle\" && RVS.H[l].hover!==undefined) {\r\n\t\t\t\t\tRVS.H[l].hover.seek(0).pause();\r\n\t\t\t\t}\r\n\t\t\t\telse if (RVS.eMode.mode===\"hover\" && (RVS.L[l].hover.usehover===true || RVS.L[l].hover.usehover==='true' || RVS.L[l].hover.usehover===\"desktop\")&& RVS.H[l].hover!==undefined) {\r\n\t\t\t\t\tif (jQuery.inArray(parseInt(l,0),RVS.selLayers)>=0) {\r\n\t\t\t\t\t\tRVS.H[l].hover.seek(9999).pause();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tRVS.F.drawHTMLLayer({uid:l});\r\n\t\t\t\t\t\tRVS.H[l].hover.seek(0).pause();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tRVS.F.checkCurrentLayerHoverMode = function(_) {\r\n\t\tif (RVS.eMode.mode===\"hover\" && (RVS.L[_.layerid].hover.usehover=='true' || RVS.L[_.layerid].hover.usehover==true || RVS.L[_.layerid].hover.usehover=='desktop') && RVS.H[_.layerid].hover!==undefined) RVS.H[_.layerid].hover.seek(9999).pause();\r\n\t};\r\n\r\n\r\n\r\n\t// GET THE CURRENT ROW STRUCTURE\r\n\tRVS.F.getRowStructures = function(obj) {\r\n\t\tif (RVS.L[obj.layerid].type===\"row\") {\r\n\t\t\tvar cols = RVS.F.getColumnsInRow({layerid:obj.layerid}),\r\n\t\t\t\tstructure = \"\",\r\n\t\t\t\tj = 0;\r\n\t\t\tfor (var c in cols) {\r\n\t\t\t\tif(!cols.hasOwnProperty(c)) continue;\r\n\t\t\t\tstructure = j===0 ? \"\" : structure+\"+\";\r\n\t\t\t\tstructure += RVS.L[cols[c]].group.columnSize;\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t\treturn structure;\r\n\t\t}\r\n\t};\r\n\r\n\t/*UPDATE THE COLUMN AND ROW FIELDS BASED ON SELECTED LAYERS*/\r\n\tRVS.F.updateRowColumnField = function() {\r\n\t\tvar newval = \"\",\r\n\t\t\tdifferent = false;\r\n\t\tfor (var li in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(li)) continue;\r\n\t\t\tvar uid = RVS.selLayers[li],\r\n\t\t\t\ttemp = \"\";\r\n\t\t\tif (RVS.L[uid].type===\"row\") temp = RVS.F.getRowStructures({layerid:uid});\r\n\t\t\telse\r\n\t\t\tif (RVS.L[uid].type===\"column\") temp = RVS.F.getRowStructures({layerid:RVS.L[RVS.L[uid].group.puid].uid});\r\n\r\n\t\t\tif (RVS.L[uid].type===\"row\" || RVS.L[uid].type===\"column\") {\r\n\t\t\t\tif (!different) {\r\n\r\n\t\t\t\t\tif (newval===\"\" || newval===temp) {\r\n\t\t\t\t\t\tnewval=temp;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdifferent = true;\r\n\t\t\t\t\t\t\tnewval=\"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tjQuery('#row_column_structure').val(RVS.F.sanitize_columns(newval)).trigger('change');\r\n\t};\r\n\r\n\t/*\r\n\tGET NEXT ELEMENT IN COLUMN (IN ORDER)\r\n\t*/\r\n\tRVS.F.getPrevNextLayerInOrder = function(id,dir) {\r\n\t\tif (RVS.L[id]===undefined || RVS.L[id].group===undefined || RVS.L[id].group.puid===undefined) return;\r\n\t\tvar ret = { order:dir===\"next\" ? 99999 : -2, id:id};\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.L[i].group && RVS.L[i].group.puid == RVS.L[id].group.puid &&\r\n\t\t\t\t(\r\n\t\t\t\t\t(dir===\"next\" && RVS.L[i].group.groupOrder>RVS.L[id].group.groupOrder && RVS.L[i].group.groupOrder<ret.order) ||\r\n\t\t\t\t\t(dir===\"prev\" && RVS.L[i].group.groupOrder<RVS.L[id].group.groupOrder && RVS.L[i].group.groupOrder>ret.order)\r\n\t\t\t\t)) {\r\n\r\n\t\t\t\tret.order = RVS.L[i].group.groupOrder;\r\n\t\t\t\tret.id = RVS.L[i].uid;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ret.id;\r\n\t};\r\n\r\n\t/*\r\n\tGET THE DEPTH OF LAYER\r\n\t*/\r\n\tRVS.F.getLayerDepth = function(obj) {\r\n\t\tobj.depth = obj.depth==undefined ? 0 : obj.depth;\r\n\t\tif (RVS.L[obj.layer]==undefined) return obj.depth;\r\n\t\tif (RVS.L[obj.layer].group.puid!=-1) {\r\n\t\t\tobj.depth++;\r\n\t\t\tobj.layer = RVS.L[obj.layer].group.puid;\r\n\t\t\treturn RVS.F.getLayerDepth(obj);\r\n\t\t} else return obj.depth;\r\n\t}\r\n\r\n\t/*\r\n\tHas the Group deeper levels than 1 ?\r\n\t*/\r\n\tRVS.F.isDeeperGroup = function(id) {\r\n\t\tif (RVS.L[id]==undefined || RVS.L[id].type!==\"group\") return false;\r\n\t\tvar deeper = false;\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif (!RVS.L.hasOwnProperty(i) || deeper || i==\"top\" || i==\"bottom\" || i==\"middle\" || (\"\"+RVS.L[i].group.puid!==\"\"+id)) continue;\r\n\t\t\tdeeper =  RVS.L[i].type==\"group\";\r\n\t\t}\r\n\t\treturn deeper;\r\n\t}\r\n\r\n\tRVS.F.getTopParent = function(obj) {\r\n\t\tobj.par = obj.par==undefined ? -1 : obj.par;\r\n\t\tif (RVS.L[obj.layer]==undefined) return obj.par;\r\n\t\tif (RVS.L[obj.layer].group.puid!=-1) {\r\n\t\t\tobj.par = RVS.L[obj.layer].group.puid;\r\n\t\t\tobj.layer = RVS.L[obj.layer].group.puid;\r\n\t\t\treturn RVS.F.getTopParent(obj);\r\n\t\t} else return obj.par;\r\n\t}\r\n\r\n\t/*\r\n\tGET COLUMNS IDS IN A ROW\r\n\t*/\r\n\tRVS.F.getColumnsInRow = function(obj) {\r\n\t\tvar temp = [],\r\n\t\t\tlist = [];\r\n\t\tobj.type = obj.type===undefined ? \"column\" : obj.type;\r\n\t\tif (obj.copyPaste===\"paste\")\r\n\t\t\tfor (var li in window.copyPasteLayers.layers) {\r\n\t\t\t\tif(!window.copyPasteLayers.layers.hasOwnProperty(li)) continue;\r\n\t\t\t\tif (window.copyPasteLayers.layers[li].type===obj.type && window.copyPasteLayers.layers[li].group.puid==obj.layerid)\r\n\t\t\t\t\ttemp.push({order:window.copyPasteLayers.layers[li].group.groupOrder, uid:window.copyPasteLayers.layers[li].uid});\r\n\t\t\t}\r\n\t\telse\r\n\t\t\tfor (var li in RVS.L) {\r\n\t\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\t\tif (RVS.L[li].type===obj.type && RVS.L[li].group.puid==obj.layerid)\r\n\t\t\t\t\ttemp.push({order:RVS.L[li].group.groupOrder, uid:RVS.L[li].uid});\r\n\t\t\t}\r\n\r\n\t\ttemp.sort(function(a,b) { return a.order - b.order;});\r\n\r\n\t\tfor (var li in temp) {\r\n\t\t\tif(!temp.hasOwnProperty(li)) continue;\r\n\t\t\tlist.push(temp[li].uid);\r\n\t\t}\r\n\r\n\t\treturn list;\r\n\t};\r\n\r\n\r\n\t/*\r\n\tGET INHERITED ITEMS ON NEXT LEVEL\r\n\t*/\r\n\tRVS.F.getLayersFirstDepth = function(obj) {\r\n\t\tvar list = [];\r\n\t\tif (obj.copyPaste===\"paste\")\r\n\t\t\tfor (var li in window.copyPasteLayers.layers) {\r\n\t\t\t\tif(!window.copyPasteLayers.layers.hasOwnProperty(li)) continue;\r\n\t\t\t\tif (window.copyPasteLayers.layers[li].group.puid==obj.layerid)\r\n\t\t\t\t\tlist.push(window.copyPasteLayers.layers[li].uid);\r\n\t\t\t}\r\n\t\telse\r\n\t\t\tfor (var li in RVS.L) {\r\n\t\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\t\tif (RVS.L[li].group.puid==obj.layerid)\r\n\t\t\t\t\tlist.push(RVS.L[li].uid);\r\n\t\t\t}\r\n\t\treturn list;\r\n\t};\r\n\r\n\tRVS.F.getLayersAllDepth = function(obj) {\r\n\t\tvar list = [];\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.L[li].group.puid==obj.layerid) {\r\n\t\t\t\tif (RVS.L[li].type===\"column\") {\r\n\t\t\t\t\tvar inlist = RVS.F.getLayersFirstDepth({layerid:RVS.L[li].uid});\r\n\t\t\t\t\tfor (var il in inlist) {\r\n\t\t\t\t\t\tif(!inlist.hasOwnProperty(il)) continue;\r\n\t\t\t\t\t\tlist.push(inlist[il].uid);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlist.push(RVS.L[li].uid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn list;\r\n\t};\r\n\r\n\t/*\r\n\tCHECK IF ID IS ALREADY SELECTED\r\n\t*/\r\n\tRVS.F.inSelectedLayers = function(_) {\r\n\t\tvar isin = false;\r\n\t\tfor (var i in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.selLayers[i] == _.id) isin = true;\r\n\t\t}\r\n\t\treturn isin;\r\n\t};\r\n\r\n\tRVS.F.notOnRoot = function(layer) {\r\n\t\treturn (layer!==undefined && layer.group!==undefined && layer.group.puid!==undefined && layer.group.puid>=0 && layer.group.puid<=5000);\r\n\t};\r\n\r\n\tRVS.F.groupOrColumn = function(layer) {\r\n\t\treturn (layer!=undefined && (layer.type===\"column\" || layer.type===\"group\"));\r\n\t};\r\n\r\n\t//Get First Selected Predefine Type or Parent if its Type fits\r\n\tRVS.F.getFirstSelectedType = function(type) {\r\n\t\tvar r = false;\r\n\t\tfor (var i in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(i)) continue;\r\n\t\t\tif (r===false && RVS.L[RVS.selLayers[i]].type===type) r = RVS.selLayers[i];\r\n\t\t\tif (r===false && RVS.F.notOnRoot(RVS.L[RVS.selLayers[i]]) && RVS.L[RVS.L[RVS.selLayers[i]].group.puid].type===type) r = RVS.L[RVS.selLayers[i]].group.puid;\r\n\t\t}\r\n\t\treturn r;\r\n\t};\r\n\r\n\tRVS.F.updateAllHTMLLayerPositions = function(onlyslidealigned) {\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.L[i].position.x!==undefined && (onlyslidealigned==undefined || RVS.L[i].behavior.baseAlign===\"slide\"))\r\n\t\t\t\tRVS.F.updateHTMLLayerPosition({uid:i});\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tPUT LAYER IN RIGHT POSITION\r\n\t*/\r\n\tRVS.F.updateHTMLLayerPosition = function(_) {\r\n\r\n\r\n\t\tvar lh = RVS.H[_.uid],\r\n\t\t\tl = RVS.L[_.uid];\r\n\r\n\t\tif (l===undefined || lh===undefined) return;\r\n\t\tvar tr = {left:0,top:0},\r\n\t\t\to = _.o ==undefined ? {x:0,y:0} : _.o,\r\n\t\t\tlpv = l.position.vertical[RVS.screen].v,\r\n\t\t\tlph = l.position.horizontal[RVS.screen].v,\r\n\t\t\ttemp,\r\n\t\t\tmem;\r\n\r\n\t\ttemp = mem = {x:parseInt(l.position.x[RVS.screen].v,0), y:+parseInt(l.position.y[RVS.screen].v,0)};\r\n\r\n\r\n\t\ttr.force3D=true;\r\n\r\n\t\tif (l.type!==\"row\" && l.type!==\"column\" && (l.group.puid===-1 || ((RVS.L[l.group.puid].type!==\"column\" || l.position.position!==\"relative\") && (RVS.L[l.group.puid].type!==\"group\" || l.position.position!==\"relative\")))) {\r\n\t\t\tvar lhcw =  _.lhCwidth===undefined ? lh.c.outerWidth() : _.lhCwidth,\r\n\t\t\t\tlhch =  _.lhCheight===undefined ? l.type==\"group\" ? lh.w.outerHeight() : lh.c.outerHeight() : _.lhCheight;\r\n\r\n\r\n\r\n\t\t\t//Make sure dimension is not 0 due some early triggered Position Request\r\n\t\t\tif(lhcw==0 && lhch==0 && (_.firstDimCheckDone===undefined || _.firstDimCheckDone<5)) {\r\n\t\t\t\t_.firstDimCheckDone = _.firstDimCheckDone===undefined ? 0 : _.firstDimCheckDone;\r\n\t\t\t\t_.firstDimCheckDone++;\r\n\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\tRVS.F.updateHTMLLayerPosition(_);\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar\tparcontsize = l.group.puid===-1 ? {width:RVS.C.layergrid.width(), height:RVS.C.layergrid.height()} : {width:RVS.H[l.group.puid].w.width(), height:RVS.H[l.group.puid].w.height()},\r\n\t\t\t\tcache = { x: lph===\"center\" ? parcontsize.width/2 - lhcw/2 : temp.x, y: lpv===\"middle\" ? parcontsize.height/2 - lhch/2 : temp.y};\r\n\t\t\tif (_.snapToGrid && (RVS.S.DaD.sameLevelNotColumn)) {\r\n\t\t\t\tvar s = RVS.F.getSnapPoint(cache.x,cache.y),\r\n\t\t\t\t\tso = RVS.F.getSnapPoint(o.x,o.y);\r\n\t\t\t\ttemp = RVS.F.getSnapPoint(temp.x,temp.y);\r\n\t\t\t\tif (lph!==\"center\") cache.x = s.x;\r\n\t\t\t\tif (lpv!==\"middle\") cache.y = s.y;\r\n\t\t\t\tRVS.S.updatePosToXDif = o.x-so.x - (temp.x -mem.x);\r\n\t\t\t\tRVS.S.updatePosToYDif = o.y-so.y - (temp.y -mem.y);\r\n\t\t\t\to  = so;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (l.size.covermode==\"fullinset\" && l.position.position==\"absolute\" && RVS.L[l.group.puid]!==undefined && RVS.L[l.group.puid].type==\"group\" && l.size.width[RVS.screen].v==\"100%\") {\r\n\t\t\t\t\ttr.right = l.idle.margin[RVS.screen].v[1]+\"px\";\r\n\t\t\t\t\ttr.left = l.idle.margin[RVS.screen].v[3]+\"px\";\r\n\t\t\t} else if (lph!==\"right\") {tr.right = \"auto\"; tr.left = cache.x + o.x; } else { tr.left=\"auto\"; tr.right = cache.x - o.x}\r\n\t\t\tif (l.size.covermode==\"fullinset\" && l.position.position==\"absolute\" && RVS.L[l.group.puid]!==undefined && RVS.L[l.group.puid].type==\"group\" && l.size.height[RVS.screen].v==\"100%\") {\r\n\t\t\t\ttr.top = l.idle.margin[RVS.screen].v[0]+\"px\";\r\n\t\t\t\ttr.bottom = l.idle.margin[RVS.screen].v[2]+\"px\";\r\n\t\t\t} else if (lpv!==\"bottom\") {tr.bottom = \"auto\"; tr.top = cache.y + o.y; } else { tr.top=\"auto\"; tr.bottom = cache.y - o.y}\r\n\r\n\t\t\ttr.x = lph===\"center\" ? temp.x : 0;\r\n\t\t\ttr.y = lpv===\"middle\" ? temp.y : 0;\r\n\r\n\t\t\tif (l.behavior.baseAlign===\"slide\" && l.group.puid===-1) {\r\n\t\t\t\ttr.x = lph===\"right\" ? tr.x + (RVS.C.layergrid[0].offsetLeft) : lph===\"left\" ? tr.x - (RVS.C.layergrid[0].offsetLeft) : tr.x;\r\n\t\t\t\ttr.y = lpv===\"bottom\" ? tr.y + (RVS.C.layergrid[0].offsetTop) : lpv===\"top\" ? tr.y - (RVS.C.layergrid[0].offsetTop) : tr.y;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (_.updateValues) {\r\n\t\t\t\tvar updatePosTo = {x:Math.round(lph === \"right\" ? mem.x-o.x : mem.x+o.x),\r\n\t\t\t\t\t\t\t\t   y: Math.round(lpv === \"bottom\" ? mem.y-o.y : mem.y+o.y)};\r\n\r\n\r\n\t\t\t\tif (RVS.S.DaD.toContainerType===\"column\" && RVS.S.DaD.draggedPosType!==\"absolute\") {updatePosTo.x = 0;updatePosTo.y = 0; }\r\n\t\t\t\telse if (_.snapToGrid && RVS.S.DaD.sameLevelNotColumn) updatePosTo  = RVS.F.getSnapPoint(updatePosTo.x,updatePosTo.y);\r\n\t\t\t\telse if (_.snapToLayers && RVS.S.DaD.sameLevelNotColumn) {\r\n\t\t\t\t \tif (RVS.S.DaD.snapHF.uid!==-1) {\r\n\t\t\t\t \t\tif (_.uid == RVS.S.DaD.currentLayerId) {\r\n\t\t\t\t\t\t\tvar newx = parseInt(RVS.L[RVS.S.DaD.snapHF.uid].position.x[RVS.screen].v,0) + (lph===\"left\" ? RVS.S.DaD.snapHF.offset : lph===\"center\" ? RVS.S.DaD.snapHF.offset - RVS.S.DaD.snapHF.w/2 : RVS.S.DaD.snapHF.w - RVS.S.DaD.snapHF.offset),\r\n\t\t\t\t\t\t\t\tcorrection = RVS.S.DaD.snapHF.prio>6 ? lph===\"right\" ? 0 : lph===\"left\" ? 0-lhcw : 0-lhcw/2 : RVS.S.DaD.snapHF.prio>3 ? lph===\"right\" ? 0-lhcw/2 : lph===\"left\" ? 0-lhcw/2 : 0 : RVS.S.DaD.snapHF.prio<4 ? lph===\"right\" ? 0-lhcw : lph===\"left\" ? 0 : lhcw/2 : 0;\r\n\t\t\t\t\t\t\tnewx += correction;\r\n\t\t\t\t\t\t\tRVS.S.DaD.difh = updatePosTo.x - newx;\r\n\t\t\t\t\t\t\tupdatePosTo.x = Math.round(newx);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tupdatePosTo.x = updatePosTo.x - RVS.S.DaD.difh;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (lph===\"right\") tr.right = tr.right - RVS.S.DaD.difh; else tr.left = tr.left - RVS.S.DaD.difh;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (RVS.S.DaD.snapVF.uid!==-1) {\r\n\t\t\t\t\t\tif (_.uid == RVS.S.DaD.currentLayerId) {\r\n\t\t\t\t\t\t\tvar newy = parseInt(RVS.L[RVS.S.DaD.snapVF.uid].position.y[RVS.screen].v,0) + (lpv===\"top\" ? RVS.S.DaD.snapVF.offset : lpv===\"middle\" ? RVS.S.DaD.snapVF.offset - RVS.S.DaD.snapVF.h/2 : RVS.S.DaD.snapVF.h - RVS.S.DaD.snapVF.offset),\r\n\t\t\t\t\t\t\t\tcorrection = RVS.S.DaD.snapVF.prio>6 ? lpv===\"bottom\" ? 0 : lpv===\"top\" ? 0-lhch : 0-lhch/2 : RVS.S.DaD.snapVF.prio>3 ? lpv===\"bottom\" ? 0-lhch/2 : lpv===\"top\" ? 0-lhch/2 : 0 : RVS.S.DaD.snapVF.prio<4 ? lpv===\"bottom\" ? 0-lhch : lpv===\"top\" ? 0 : lhch/2 : 0;\r\n\t\t\t\t\t\t\tnewy += correction;\r\n\t\t\t\t\t\t\tRVS.S.DaD.difv = updatePosTo.y - newy;\r\n\t\t\t\t\t\t\tupdatePosTo.y = Math.round(newy);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tupdatePosTo.y = updatePosTo.y - RVS.S.DaD.difv;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (lpv===\"bottom\") tr.bottom = tr.bottom - RVS.S.DaD.difv; else tr.top = tr.top - RVS.S.DaD.difv;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+_.uid+'.position.x.#size#.v',val:updatePosTo.x+\"px\", uid:_.uid});\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+_.uid+'.position.y.#size#.v',val:updatePosTo.y+\"px\", uid:_.uid});\r\n\t\t\t\tRVS.S.updatePosToX = updatePosTo.x;\r\n\t\t\t\tRVS.S.updatePosToY = updatePosTo.y;\r\n\t\t\t} else\r\n\t\t\tif (_.mouseInfo) {\r\n\t\t\t\tRVS.S.updatePosToX = RVS.S.DaD.toContainerType===\"column\" && RVS.S.DaD.draggedPosType!==\"absolute\" ? 0 : (lph === \"right\" ? mem.x-o.x : mem.x+o.x);\r\n\t\t\t\tRVS.S.updatePosToY = RVS.S.DaD.toContainerType===\"column\" && RVS.S.DaD.draggedPosType!==\"absolute\"? 0 : (lpv === \"bottom\" ? mem.y-o.y : mem.y+o.y);\r\n\t\t\t\tif (_.snapToGrid && RVS.S.DaD.sameLevelNotColumn) {\r\n\t\t\t\t\tvar sp = RVS.F.getSnapPoint(RVS.S.updatePosToX,RVS.S.updatePosToY);\r\n\t\t\t\t\tRVS.S.updatePosToX = sp.x;\r\n\t\t\t\t\tRVS.S.updatePosToY = sp.y;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\ttr.position=\"absolute\";\r\n\t\t\tlh.w[0].classList.add('_lc_i_abs');\r\n\t\t\tlh.w[0].classList.remove('_lc_i_rel');\r\n\t\t\tlh.chPosRel = undefined;\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\ttpGS.gsap.set(lh.w,tr);\r\n\t\t\t});\r\n\t\t} else {\r\n\r\n\t\t\tif (lh.chPosRel!=undefined) return;\r\n\t\t\t lh.chPosRel = true;\r\n\t\t\tif (lh.fastDomProcess!==true) {\r\n\t\t\t\tlh.fastDomProcess = true;\r\n\t\t\t\tfastdom.measure(function() {\r\n\t\t\t\t\tif(lh.w[0].style.position !== 'relative'){\r\n\t\t\t\t\t\tfastdom.mutate(function() {\r\n\t\t\t\t\t\t\tlh.w[0].style.position = 'relative';\r\n\t\t\t\t\t\t\tlh.w[0].style.left = 'auto';\r\n\t\t\t\t\t\t\tlh.w[0].style.right = 'auto';\r\n\t\t\t\t\t\t\tlh.w[0].style.top = 'auto';\r\n\t\t\t\t\t\t\tlh.w[0].style.bottom = 'auto';\r\n\t\t\t\t\t\t\tlh.w[0].classList.add('_lc_i_rel');\r\n\t\t\t\t\t\t\tlh.w[0].classList.remove('_lc_i_abs');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\tif (lh.w[0].style.position!==\"relative\") {\r\n\t\t\t\t\ttpGS.gsap.set(lh.w,{x:0,y:0,position:\"relative\",left:\"auto\",right:\"auto\",top:\"auto\",bottom:\"auto\"});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction clearDragClasses(i) {\r\n\t\tRVS.H[i].w[0].className = RVS.H[i].w[0].className\r\n\t\t\t\t\t\t\t\t\t.split(\"dont_blur\").join(\"\")\r\n\t\t\t\t\t\t\t\t\t.split(\"drop_over_layer\").join(\"\")\r\n\t\t\t\t\t\t\t\t\t.split(\"drop_after_layer\").join(\"\")\r\n\t\t\t\t\t\t\t\t\t.split(\"drop_before_layer\").join(\"\")\r\n\t\t\t\t\t\t\t\t\t.split(\"drop_before_firstlayer\").join(\"\")\r\n\t\t\t\t\t\t\t\t\t.split(\"drop_after_lastlayer\").join(\"\");\r\n\r\n\t\t//RVS.H[i].w.removeClass(\"dont_blur\").removeClass(\"drop_over_layer\").removeClass(\"drop_after_layer\").removeClass(\"drop_before_layer\").removeClass(\"drop_before_firstlayer\").removeClass(\"drop_after_lastlayer\");\r\n\t}\r\n\r\n\tRVS.F.resetDragStates = function() {\r\n\t\tRVS.S.DaD.showInMini = false;\r\n\t\tfor (var i in RVS.H) if(RVS.H.hasOwnProperty(i)) clearDragClasses(i);\r\n\r\n\t};\r\n\r\n\r\n\t/*\r\n\tMOVE LAYERS BY KEYBOARD\r\n\t*/\r\n\tRVS.F.moveLayerByKeys = function(_) {\r\n\t\tif (!window.moveByKeyboard) {\r\n\t\t\tRVS.F.openBackupGroup({id:\"LayerPosition\",txt:\"Layer Position\",icon:\"open_with\"});\r\n\t\t\twindow.moveByKeyboard = true;\r\n\t\t}\r\n\r\n\t\tRVS.S.DaD.difh = 0;\r\n\t\tRVS.S.DaD.difv = 0;\r\n\r\n\t\tif (RVS.selLayers.length===1 && RVS.L[RVS.selLayers[0]].group.puid!==-1 && RVS.L[RVS.L[RVS.selLayers[0]].group.puid].type===\"column\") {\r\n\r\n\t\t\tif (_.x==-1 || _.y==-1) {\r\n\t\t\t\tvar tid = RVS.F.getPrevNextLayerInOrder(RVS.selLayers[0],\"prev\");\r\n\t\t\t\tif (tid!==RVS.selLayers[0]) RVS.F.sortLayer({layer:RVS.selLayers[0], target:\"before\",env:tid, redraw:true});\r\n\t\t\t} else\r\n\t\t\tif (_.x===1 || _.y===1) {\r\n\t\t\t\tvar tid = RVS.F.getPrevNextLayerInOrder(RVS.selLayers[0],\"next\");\r\n\t\t\t\tif (tid!==RVS.selLayers[0]) RVS.F.sortLayer({layer:RVS.selLayers[0], target:\"after\",env:tid, redraw:true});\r\n\t\t\t}\r\n\t\t} else\r\n\t\tfor (var si in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(si)) continue;\r\n\t\t\tvar i = RVS.selLayers[si];\r\n\t\t\tRVS.F.updateHTMLLayerPosition({ uid:i,o:_,updateValues:true,lhCwidth:RVS.H[i].c.outerWidth(), lhCheight:RVS.H[i].c.outerHeight()});\r\n\r\n\t\t\tdocument.getElementById('layer_pos_x').value = RVS.L[i].position.x[RVS.screen].v;\r\n\t\t\tdocument.getElementById('layer_pos_y').value = RVS.L[i].position.y[RVS.screen].v;\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t// LAYER SNAPPING HELPERS\r\n\tRVS.F.collectAllSameAlignedLayers = function(uid) {\r\n\t\tRVS.S.DaD.snapH = {};\r\n\t\tRVS.S.DaD.snapV = {};\r\n\t\tfor (var i in RVS.L) {\r\n\t\t \tif (!RVS.L[i].hasOwnProperty || RVS.L[i].group.puid!== RVS.S.DaD.fromContainerID || RVS.L[i].hover===undefined || uid==RVS.L[i].uid) continue;\r\n\t\t \tif (RVS.L[i].position.horizontal[RVS.screen].v === RVS.L[uid].position.horizontal[RVS.screen].v) {\r\n\t\t \t\t\tRVS.S.DaD.snapH[RVS.L[i].uid] = { ox:parseInt(RVS.L[i].position.x[RVS.screen].v,0), x: RVS.H[i].w[0].offsetLeft,  w:RVS.H[i].w[0].offsetWidth};\r\n\t\t \t\t\tRVS.S.DaD.snapH[RVS.L[i].uid].x = RVS.L[uid].position.horizontal[RVS.screen].v === \"center\" ? RVS.S.DaD.snapH[RVS.L[i].uid].ox + RVS.S.lgw/2  - RVS.S.DaD.snapH[RVS.L[i].uid].w/2: RVS.S.DaD.snapH[RVS.L[i].uid].x;\r\n\t\t \t\t\tRVS.S.DaD.snapH[RVS.L[i].uid].xc = RVS.S.DaD.snapH[RVS.L[i].uid].x + RVS.S.DaD.snapH[RVS.L[i].uid].w/2;\r\n\t\t \t\t\tRVS.S.DaD.snapH[RVS.L[i].uid].xr = RVS.S.DaD.snapH[RVS.L[i].uid].x + RVS.S.DaD.snapH[RVS.L[i].uid].w;\r\n\t\t \t}\r\n\r\n\t\t \tif (RVS.L[i].position.vertical[RVS.screen].v === RVS.L[uid].position.vertical[RVS.screen].v) {\r\n\t\t \t\tRVS.S.DaD.snapV[RVS.L[i].uid] = {  oy:parseInt(RVS.L[i].position.y[RVS.screen].v,0),  y: RVS.H[i].w[0].offsetTop, h:RVS.H[i].w[0].offsetHeight};\r\n\t\t \t\tRVS.S.DaD.snapV[RVS.L[i].uid].y = RVS.L[uid].position.vertical[RVS.screen].v === \"middle\" ? RVS.S.DaD.snapV[RVS.L[i].uid].oy + RVS.S.lgh/2  - RVS.S.DaD.snapV[RVS.L[i].uid].h/2 : RVS.S.DaD.snapV[RVS.L[i].uid].y;\r\n\t\t \t\tRVS.S.DaD.snapV[RVS.L[i].uid].ym = RVS.S.DaD.snapV[RVS.L[i].uid].y + RVS.S.DaD.snapV[RVS.L[i].uid].h/2;\r\n\t\t \t\tRVS.S.DaD.snapV[RVS.L[i].uid].yb = RVS.S.DaD.snapV[RVS.L[i].uid].y + RVS.S.DaD.snapV[RVS.L[i].uid].h;\r\n\t\t \t}\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.closeToOtherLayers = function(uid,o) {\r\n\t\tRVS.S.DaD.snapHF = {offset:10000, d:20000,uid:-1,prio:50};\r\n\t\tRVS.S.DaD.snapVF = {offset:10000, d:20000,uid:-1,prio:50};\r\n\t\to.m = o.x+o.w/2;\r\n\t\to.e = o.x+o.w;\r\n\t\tvar g = RVS.SLIDER.settings.snap.gap,\r\n\t\t\tgh = 10;\r\n\r\n\r\n\t\tfor (var i in RVS.S.DaD.snapH) {\r\n\t\t\tif (!RVS.S.DaD.snapH[i].hasOwnProperty) continue;\r\n\t\t\tlet c = RVS.S.DaD.snapH[i],\r\n\t\t\t\tll = Math.abs(o.x-c.x + RVS.S.DaD.scrolldiff.x), lm = Math.abs(o.x-c.xc + RVS.S.DaD.scrolldiff.x), le = Math.abs(o.x-c.xr + RVS.S.DaD.scrolldiff.x),\r\n\t\t\t\tgll = Math.abs(o.x-(c.x-g) + RVS.S.DaD.scrolldiff.x), gle = Math.abs(o.x-(c.xr+g) + RVS.S.DaD.scrolldiff.x),\r\n\t\t\t\tml = Math.abs(o.m-c.x + RVS.S.DaD.scrolldiff.x), mm = Math.abs(o.m-c.xc + RVS.S.DaD.scrolldiff.x), me = Math.abs(o.m-c.xr + RVS.S.DaD.scrolldiff.x),\r\n\t\t\t\t//gml = Math.abs(o.m-(c.x-g) + RVS.S.DaD.scrolldiff.x),  gme = Math.abs(o.m-(c.xr+g) + RVS.S.DaD.scrolldiff.x),\r\n\t\t\t\trl = Math.abs(o.e-c.x + RVS.S.DaD.scrolldiff.x), rm = Math.abs(o.e-c.xc + RVS.S.DaD.scrolldiff.x), re = Math.abs(o.e-c.xr + RVS.S.DaD.scrolldiff.x);\r\n\t\t\t\tgrl = Math.abs(o.e-(c.x-g) + RVS.S.DaD.scrolldiff.x),  gre = Math.abs(o.e-(c.xr+g) + RVS.S.DaD.scrolldiff.x);\r\n\r\n\t\t\tif (ll<gh && ll<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:0, uid:i ,d:ll, prio:1, w:c.w};\r\n\t\t\telse if (g>5 && gll<gh && gll<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:0-g, uid:i ,d:ll, prio:1, w:c.w};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapHF.prio>=2 && lm<=gh && RVS.S.DaD.snapHF.offset>c.w/2) RVS.S.DaD.snapHF = {offset:c.w/2, uid:i, prio:2 ,d:lm, w:c.w};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapHF.prio>=3 && le<=gh && RVS.S.DaD.snapHF.offset>c.w) RVS.S.DaD.snapHF = {offset:c.w, uid:i, prio:3, d:le, w:c.w};\r\n\t\t\telse if (g>5 && RVS.S.DaD.snapHF.prio>=3 && gle<gh && RVS.S.DaD.snapHF.offset>c.w) RVS.S.DaD.snapHF = {offset:c.w+g, uid:i, prio:3, d:le, w:c.w, gap:1};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapHF.prio>=4 && ml<=gh && ml<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:0, d:ml, uid:i, prio:4 ,w:c.w};\r\n\t\t\t//else if (RVS.S.DaD.snapHF.prio>=4 && gml<g && ml<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:0-g, d:ml, uid:i, prio:4 ,w:c.w, gap:1};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapHF.prio>=5 && mm<=gh && mm<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:c.w/2, d:mm, uid:i, prio:5 ,w:c.w};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapHF.prio>=6 && me<=gh && me<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:c.w, d:me, uid:i, prio:6 ,w:c.w};\r\n\t\t\t//else if (RVS.S.DaD.snapHF.prio>=6 && gme<g && me<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:c.w+g, d:me, uid:i, prio:6 ,w:c.w, gap:1};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapHF.prio>=7 && rl<=gh && rl<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:0, d:rl, uid:i, prio:7,w:c.w};\r\n\t\t\telse if (g>5 && RVS.S.DaD.snapHF.prio>=7 && grl<g && rl<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:0-g, d:rl, uid:i, prio:7,w:c.w, gap:1};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapHF.prio>=8 && rm<=gh && rm<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:c.w/2, d:rm, uid:i, prio:8,w:c.w};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapHF.prio>=9 && re<=gh && re<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:c.w, d:re, uid:i, prio:9,w:c.w};\r\n\t\t\telse if (g>5 && RVS.S.DaD.snapHF.prio>=9 && gre<g && re<RVS.S.DaD.snapHF.d) RVS.S.DaD.snapHF = {offset:c.w+g, d:re, uid:i, prio:9,w:c.w, gap:1};\r\n\t\t}\r\n\r\n\t\to.m = o.y+o.h/2;\r\n\t\to.e = o.y+o.h;\r\n\r\n\t\tfor (var i in RVS.S.DaD.snapV) {\r\n\t\t\tif (!RVS.S.DaD.snapV[i].hasOwnProperty) continue;\r\n\t\t\tlet c = RVS.S.DaD.snapV[i],\r\n\t\t\t\ttt = Math.abs(o.y-c.y + RVS.S.DaD.scrolldiff.y), tm = Math.abs(o.y-c.ym + RVS.S.DaD.scrolldiff.y), tb = Math.abs(o.y-c.yb + RVS.S.DaD.scrolldiff.y),\r\n\t\t\t\tgtt = Math.abs(o.y-(c.y-g) + RVS.S.DaD.scrolldiff.y),  gtb = Math.abs(o.y-(c.yb+g)+ RVS.S.DaD.scrolldiff.y),\r\n\r\n\t\t\t\tmt = Math.abs(o.m-c.y + RVS.S.DaD.scrolldiff.y), mm = Math.abs(o.m-c.ym + RVS.S.DaD.scrolldiff.y), mb = Math.abs(o.m-c.yb + RVS.S.DaD.scrolldiff.y),\r\n\t\t\t\t//gmt = Math.abs(o.m-(c.y-g) + RVS.S.DaD.scrolldiff.y), gmb = Math.abs(o.m-(c.yb+g)+ RVS.S.DaD.scrolldiff.y),\r\n\r\n\t\t\t\tbt = Math.abs(o.e-c.y + RVS.S.DaD.scrolldiff.y), bm = Math.abs(o.e-c.ym + RVS.S.DaD.scrolldiff.y), bb = Math.abs(o.e-c.yb + RVS.S.DaD.scrolldiff.y),\r\n\t\t\t\tgbt = Math.abs(o.e-(c.y-g) + RVS.S.DaD.scrolldiff.y), gbb = Math.abs(o.e-(c.yb+g)+ RVS.S.DaD.scrolldiff.y);\r\n\r\n\r\n\t\t\tif (tt<gh && tt<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:0, uid:i ,d:tt, prio:1, h:c.h};\r\n\t\t\telse if (g>5 && gtt<gh && tt<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:0-g, uid:i ,d:tt, prio:1, h:c.h, gap:1};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapVF.prio>=2 && tm<gh && RVS.S.DaD.snapVF.offset>c.h/2) RVS.S.DaD.snapVF = {offset:c.h/2, uid:i, prio:2 ,d:tm, h:c.h};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapVF.prio>=3 && tb<gh && RVS.S.DaD.snapVF.offset>c.h) RVS.S.DaD.snapVF = {offset:c.h, uid:i, prio:3, d:tb, h:c.h};\r\n\t\t\telse if (g>5 && RVS.S.DaD.snapVF.prio>=3 && gtb<gh && RVS.S.DaD.snapVF.offset>c.h) RVS.S.DaD.snapVF = {offset:c.h+g, uid:i, prio:3, d:tb, h:c.h, gap:1};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapVF.prio>=4 && mt<gh && mt<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:0, d:mt, uid:i, prio:4, h:c.h};\r\n\t\t\t//else if (RVS.S.DaD.snapVF.prio>=4 && gmt<gh && mt<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:0-g, d:mt, uid:i, prio:4, h:c.h, gap:1};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapVF.prio>=5 && mm<gh && mm<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:c.h/2, d:mm, uid:i, prio:5, h:c.h};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapVF.prio>=6 && mb<gh && mb<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:c.h, d:mb, uid:i, prio:6, h:c.h};\r\n\t\t\t//else if (RVS.S.DaD.snapVF.prio>=6 && gmb<gh && mb<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:c.h+g, d:mb, uid:i, prio:6, h:c.h, gap:1};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapVF.prio>=7 && bt<gh && bt<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:0, d:bt, uid:i, prio:7, h:c.h};\r\n\t\t\telse if (g>5 && RVS.S.DaD.snapVF.prio>=7 && gbt<gh && bt<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:0-g, d:bt, uid:i, prio:7, h:c.h, gap:1};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapVF.prio>=8 && bm<gh && bm<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:c.h/2, d:bm, uid:i, prio:8, h:c.h};\r\n\r\n\t\t\telse if (RVS.S.DaD.snapVF.prio>=9 && bb<gh && bb<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:c.h, d:bb, uid:i, prio:9, h:c.h};\r\n\t\t\telse if (g>5 && RVS.S.DaD.snapVF.prio>=9 && gbb<gh && bb<RVS.S.DaD.snapVF.d) RVS.S.DaD.snapVF = {offset:c.h+g, d:bb, uid:i, prio:9, h:c.h, gap:1};\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.updateDraggedWidth = function(draw) {\r\n\r\n\t\tvar w= RVS.S.DaD.CoveredDims!==undefined && RVS.S.DaD.CoveredDims.width!==undefined ? RVS.S.DaD.CoveredDims : RVS.L[RVS.S.DaD.currentLayerId].size.width[RVS.screen].v ==\"auto\" ? RVS.S.DaD.originalWidth : RVS.L[RVS.S.DaD.currentLayerId].size.width[RVS.screen].v;\r\n\t\tif (RVS.S.DaD.parentWidth==undefined || (RVS.S.DaD.toContainerID!==undefined && RVS.S.DaD.toContainerID!==RVS.S.DaD.parentID)) {\r\n\t\t\tRVS.S.DaD.parentID = parseInt(RVS.S.DaD.toContainerID,0);\r\n\t\t\tRVS.S.DaD.parentWidth = RVS.S.DaD.parentID!==-1 && RVS.H[RVS.S.DaD.parentID]!==undefined ? RVS.H[RVS.S.DaD.parentID].w[0].offsetWidth : 0;\r\n\t\t}\r\n\t\tif (RVS.S.DaD.parentID!==-1 && RVS.S.DaD.wpercent) {\r\n\t\t\tw = RVS.S.DaD.parentWidth * (parseInt(w)/100);\r\n\t\t\tif (draw) tpGS.gsap.set(RVS.S.DaD.uiHelper,{width:w});\r\n\t\t}\r\n\t\treturn w;\r\n\t}\r\n\r\n\t/*\r\n\tMAKE THE LAYERS DRAGGABLE\r\n\t*/\r\n\tRVS.F.doDraggable = function(_) {\r\n\t\tvar lh = RVS.H[_.uid];\r\n\t\tif (lh.w.data('draggable')) lh.w.draggable(\"destroy\");\r\n\t\tif (lh.w.data('resizable')) lh.w.resizable(\"destroy\");\r\n\r\n\t\tif (_.drag) {\r\n\t\t\tlh.w.draggable({\r\n\t\t\t\thelper:\"clone\",\r\n\t\t\t\tcancel:\t\"#the_container._layer_in_group_sel_.layer_is_inset .ui-draggable.selected\",\r\n\t\t\t\tappendTo:\"#layer_grid_\"+RVS.S.slideId,\r\n\t\t\t\tstart:function(event,ui) {\r\n\t\t\t\t\tif (RVS.L[_.uid].size.covermode==\"fullinset\") {\r\n\t\t\t\t\t\tRVS.F.showInfo({content:RVS_LANG.notduringinsetmode, type:\"warning\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tRVS.S.dragging = true;\r\n\t\t\t\t\tRVS.S.realDragHappen = false;\r\n\t\t\t\t\tRVS.animationMode = (RVS.eMode.menu===\"#form_layer_animation\" && RVS.eMode.mode===\"animation\");\r\n\t\t\t\t\tRVS.F.setRulers();\r\n\t\t\t\t\tRVS.F.stopAndPauseAllLayerAnimation();\r\n\t\t\t\t\tRVS.F.resetDragStates();\r\n\r\n\t\t\t\t\t//We take his last known Group \"position\" attribute in case we want to drop in any group again.\r\n\t\t\t\t\tif (RVS.L[_.uid].position.ingrouppositoin===\"relative\") RVS.L[_.uid].position.position = \"relative\";\r\n\r\n\r\n\t\t\t\t\tRVS.S.DaD.touchPosition = {x : event.clientX - ui.originalPosition.left,  y: event.clientY - ui.originalPosition.top};\r\n\r\n\t\t\t\t\tRVS.S.ulInner[0].classList.add(\"dropSensorActive\");\r\n\r\n\t\t\t\t\tRVS.F.updateContentDeltas();\r\n\t\t\t\t\tRVS.S.DaD.dropSensor = RVS.animationMode!==true ? 1 : 0;\r\n\t\t\t\t\tRVS.S.DaD.currentLayerId = _.uid;\r\n\t\t\t\t\t// Parent Element Size and ID if Element % Sized\r\n\t\t\t\t\tRVS.S.DaD.parentID = -1;\r\n\t\t\t\t\tRVS.S.DaD.wpercent = (RVS.L[RVS.S.DaD.currentLayerId].size.width[RVS.screen].v+\"\").indexOf(\"%\")>=0;\r\n\t\t\t\t\tif (RVS.S.DaD.wpercent) {\r\n\t\t\t\t\t\tRVS.S.DaD.parentID = parseInt(RVS.L[_.uid].group.puid,0);\r\n\t\t\t\t\t\tRVS.S.DaD.parentID = RVS.S.DaD.parentID>=0 ? RVS.S.DaD.parentID : -1;\r\n\t\t\t\t\t\tRVS.S.DaD.parentWidth = RVS.S.DaD.parentID>=0 ? RVS.H[RVS.S.DaD.parentID].w[0].offsetWidth : 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (RVS.L[RVS.S.DaD.currentLayerId].position.position===\"relative\") RVS.C.slide[0].classList.add('rel_layer_in_drag'); else RVS.C.slide[0].classList.add('abs_layer_in_drag');\r\n\t\t\t\t\tRVS.S.DaD.draggedPosType = lh.w[0].style.position;\r\n\t\t\t\t\tRVS.S.click.y = event.clientY;\r\n\t\t\t\t\tRVS.S.click.x = event.clientX;\r\n\t\t\t\t\tRVS.S.DaD.startPos = \"0\";\r\n\t\t\t\t\tRVS.S.DaD.fromContainerID =  RVS.L[_.uid].group.puid;\r\n\t\t\t\t\tRVS.S.DaD.lastRegisteredRow = RVS.S.DaD.fromContainerID===-1 ? -1 : RVS.L[RVS.S.DaD.fromContainerID].type===\"group\" ? \"group\" : RVS.L[RVS.S.DaD.fromContainerID].group.puid;\r\n\t\t\t\t\tRVS.S.DaD.lastRegisteredRowBefore = RVS.S.DaD.lastRegisteredRow;\r\n\t\t\t\t\twindow.scrollMem =  {y:RVS.S.rb_ScrollY, x:RVS.S.rb_ScrollX};\r\n\t\t\t\t\tRVS.S.DaD.fromContainerRowColumn = RVS.S.DaD.fromContainerID!==-1;// && RVS.L[RVS.L[_.uid].group.puid].type!==\"group\";\r\n\t\t\t\t\tRVS.S.DaD.uiHelper = ui.helper;\r\n\t\t\t\t\tRVS.S.DaD.clone = RVS.S.DaD.fromContainerRowColumn ? ui.helper : lh.w;\r\n\t\t\t\t\tRVS.S.DaD.dragItemOffset = lh.w.offset();\r\n\t\t\t\t\tRVS.S.DaD.fromContainerType = RVS.S.DaD.fromContainerID>=0 && RVS.S.DaD.fromContainerID<=5000 ? RVS.L[RVS.L[_.uid].group.puid].type : \"root\";\r\n\t\t\t\t\tRVS.S.DaD.scrolldiff = { x: (RVS.S.rb_ScrollX - window.scrollMem.x), y:(RVS.S.rb_ScrollY - window.scrollMem.y)};\r\n\r\n\t\t\t\t\tRVS.ENV.tlGridWrap[0].classList.remove(\"selected\");\r\n\r\n\r\n\t\t\t\t\tif (RVS.animationMode!==true) {\r\n\r\n\t\t\t\t\t\tRVS.S.WWL = RVS.L[_.uid];\r\n\t\t\t\t\t\tRVS.S.lpv = RVS.S.WWL.position.vertical[RVS.screen].v;\r\n\t\t\t\t\t\tRVS.S.lph = RVS.S.WWL.position.horizontal[RVS.screen].v;\r\n\t\t\t\t\t\tRVS.C.layer_pos_x = RVS.C.layer_pos_x===undefined ? document.getElementById('layer_pos_x') : RVS.C.layer_pos_x;\r\n\t\t\t\t\t\tRVS.C.layer_pos_y = RVS.C.layer_pos_y===undefined ? document.getElementById('layer_pos_y') : RVS.C.layer_pos_y;\r\n\r\n\t\t\t\t\t\t//COLLECT ALL AYERS SAME ALIGNED\r\n\t\t\t\t\t\tif (RVS.SLIDER.settings.snap.adjust===\"layers\") RVS.F.collectAllSameAlignedLayers(_.uid);\r\n\t\t\t\t\t\tRVS.S.DaD.snapToGrid = RVS.SLIDER.settings.snap.adjust===\"grid\";\r\n\t\t\t\t\t\tRVS.S.DaD.snapToLayers = RVS.SLIDER.settings.snap.adjust===\"layers\";\r\n\r\n\t\t\t\t\t\t//Update Offsets of Containers For Drop Options\r\n\t\t\t\t\t\tfor (var i in RVS.H) {\r\n\t\t\t\t\t\t\tif(!RVS.H.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\t\tif (RVS.L[i].type===\"group\")\r\n\t\t\t\t\t\t\t\tRVS.H[i].w_offset = RVS.H[i].w.offset();\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//if (RVS.F.inSelectedLayers({id:_.uid})==false)\r\n\t\t\t\t\t\tRVS.F.selectLayers({id:_.uid,overwrite:true, action:\"add\", quickmode:true});\r\n\t\t\t\t\t\tRVS.S.DaD.CoveredDims = RVS.L[_.uid].behavior.baseAlign===\"slide\" ? RVS.F.updateCoveredLayer(_.uid) : undefined;\r\n\r\n\t\t\t\t\t\t//CACHE TEMPORARY SIZES\tAND DISTANCES\r\n\t\t\t\t\t\tfor (var si in RVS.selLayers) {\r\n\t\t\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(si)) continue;\r\n\t\t\t\t\t\t\tvar i = RVS.selLayers[si];\r\n\t\t\t\t\t\t\t\t//_nwtr = RVS.L[i].behavior.baseAlign===\"slide\" ? RVS.F.updateCoveredLayer(i) : undefined;\r\n\t\t\t\t\t\t\tRVS.H[i].c_width = /*RVS.H[i].w_width =  _nwtr!==undefined && _nwtr.width!==undefined ? _nwtr.width : */RVS.H[i].c.outerWidth();\r\n\t\t\t\t\t\t\tRVS.H[i].c_height = /*RVS.H[i].w_height = _nwtr!==undefined && _nwtr.height!==undefined ? _nwtr.height : */RVS.H[i].c.outerHeight();\r\n\t\t\t\t\t\t\tRVS.H[i].w_offsetcache = {horizontal:RVS.S.DaD.dragItemOffset.left - RVS.H[i].w.offset().left, vertical:RVS.S.DaD.dragItemOffset.top - RVS.H[i].w.offset().top};\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tRVS.S.DaD.originalWidth = lh.w.width()+1;\r\n\t\t\t\t\t\tRVS.S.DaD.originalHeight = lh.w.height()+1;\r\n\t\t\t\t\t\tui.helper.css({zIndex:100000, width:RVS.S.DaD.originalWidth});\r\n\t\t\t\t\t\ttpGS.gsap.set(lh.w,{opacity:0});\r\n\t\t\t\t\t\tRVS.C.layergrid.addClass(\"layersInDragorResize\");\r\n\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (RVS.L[RVS.S.DaD.currentLayerId].timeline.frames[RVS.S.keyFrame]===undefined || \"\"+RVS.S.DaD.currentLayerId!==\"\"+RVS.selLayers[0]) {\r\n\t\t\t\t\t\t\tRVS.F.selectLayers({id:RVS.S.DaD.currentLayerId,overwrite:true, action:\"add\", ignoreUpdate:\"onlyhtml\", ignoreFieldUpdates:false, ignoreModeChange:true});\r\n\t\t\t\t\t\t\tif (RVS.S.keyFrame===undefined) {\r\n\t\t\t\t\t\t\t\tRVS.F.setKeyframeSelected(\"frame_1\");\r\n\t\t\t\t\t\t\t\tRVS.S.keyFrame=\"frame_1\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tRVS.S.DaD.layerFrameX = document.getElementById('le_frame_x');\r\n\t\t\t\t\t\tRVS.S.DaD.layerFrameY = document.getElementById('le_frame_y');\r\n\r\n\r\n\r\n\t\t\t\t\t\tRVS.S.DaD.frameOXH = RVS.L[RVS.S.DaD.currentLayerId].timeline.frames[RVS.S.keyFrame].transform.x[RVS.screen].v;\r\n\t\t\t\t\t\tRVS.S.DaD.frameOYH = RVS.L[RVS.S.DaD.currentLayerId].timeline.frames[RVS.S.keyFrame].transform.y[RVS.screen].v;\r\n\r\n\t\t\t\t\t\t//IF Inherit, get Values before that\r\n\t\t\t\t\t\tif (RVS.S.DaD.frameOXH===\"inherit\" || RVS.S.DaD.frameOYH===\"inherit\") {\r\n\t\t\t\t\t\t\tvar fr = RVS.F.getPrevNextFrame({layerid:RVS.selLayers[0], frame:RVS.S.keyFrame});\r\n\t\t\t\t\t\t\tRVS.S.DaD.frameOXH = RVS.S.DaD.frameOXH===\"inherit\" ? RVS.L[RVS.S.DaD.currentLayerId].timeline.frames[fr.prev.frameid].transform.x[RVS.screen].v : RVS.S.DaD.frameOXH;\r\n\t\t\t\t\t\t\tRVS.S.DaD.frameOYH = RVS.S.DaD.frameOYH===\"inherit\" ? RVS.L[RVS.S.DaD.currentLayerId].timeline.frames[fr.prev.frameid].transform.y[RVS.screen].v : RVS.S.DaD.frameOYH;\r\n\t\t\t\t\t\t\tRVS.S.DaD.frameOXH = RVS.S.DaD.frameOXH===\"inherit\" ? 0 : RVS.S.DaD.frameOXH;\r\n\t\t\t\t\t\t\tRVS.S.DaD.frameOYH = RVS.S.DaD.frameOYH===\"inherit\" ? 0 : RVS.S.DaD.frameOYH;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tRVS.S.DaD.frameOX = parseInt(RVS.S.DaD.frameOXH,0);\r\n\t\t\t\t\t\tRVS.S.DaD.frameOY = parseInt(RVS.S.DaD.frameOYH,0);\r\n\r\n\t\t\t\t\t\tRVS.S.DaD.frameOX_N = RVS.F.isNumeric(RVS.S.DaD.frameOX) && ((\"\"+RVS.S.DaD.frameOXH).indexOf(\"px\")>=0 || RVS.S.DaD.frameOXH==\"0\");\r\n\t\t\t\t\t\tRVS.S.DaD.frameOY_N = RVS.F.isNumeric(RVS.S.DaD.frameOY) && ((\"\"+RVS.S.DaD.frameOYH).indexOf(\"px\")>=0 || RVS.S.DaD.frameOYH==\"0\");\r\n\r\n\t\t\t\t\t\ttpGS.gsap.set(lh.w,{opacity:1});\r\n\t\t\t\t\t\tui.helper.css({opacity:0});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttpGS.gsap.set(ui.helper.find('._lc_content_')[0],{whiteSpace:RVS.L[RVS.selLayers[0]].idle.whiteSpace[RVS.screen]}); // Was nowrap - solvesd dragging overflow issues maybe !?\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tdrag:function(event,ui) {\r\n\t\t\t\t\tif (RVS.L[_.uid].size.covermode==\"fullinset\") return;\r\n\r\n\t\t\t\t\t// CALCULATE  THE SCROLL OFFSET TO THE POSITION\r\n\t\t\t\t\tRVS.S.DaD.scrolldiff = { x: (RVS.S.rb_ScrollX - window.scrollMem.x), y:(RVS.S.rb_ScrollY - window.scrollMem.y)};\r\n\t\t\t\t\tRVS.S.DaD.dragdelta.x = Math.round(((event.clientX - RVS.S.click.x) + RVS.S.DaD.scrolldiff.x) / RVS.zoom);\r\n\t\t\t\t\tRVS.S.DaD.dragdelta.y = Math.round(((event.clientY - RVS.S.click.y) + RVS.S.DaD.scrolldiff.y) / RVS.zoom);\r\n\r\n\r\n\t\t\t\t\tif (RVS.animationMode===true) {\r\n\t\t\t\t\t\t// ANIMATION MODE, NEED TO CHANGE THE TRANSFORMS ONLY\r\n\t\t\t\t\t\tif (RVS.S.DaD.frameOX_N) RVS.S.DaD.layerFrameX.value = RVS.L[RVS.S.DaD.currentLayerId].timeline.frames[RVS.S.keyFrame].transform.x[RVS.screen].v=RVS.S.DaD.frameOX+RVS.S.DaD.dragdelta.x+\"px\";\r\n\t\t\t\t\t\tif (RVS.S.DaD.frameOY_N) RVS.S.DaD.layerFrameY.value = RVS.L[RVS.S.DaD.currentLayerId].timeline.frames[RVS.S.keyFrame].transform.y[RVS.screen].v=RVS.S.DaD.frameOY+RVS.S.DaD.dragdelta.y+\"px\";\r\n\t\t\t\t\t\tRVS.F.renderLayerAnimation({layerid:RVS.S.DaD.currentLayerId, quickRendering:false,timeline:\"full\",caller:\"drawHTMLLayer\"});\r\n\r\n\t\t\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\t\t\tRVS.F.showMouseInfo({classes:\"purplemouseinfo\", html:\"<div class='mouse_frame_label'>\"+RVS.L[RVS.S.DaD.currentLayerId].timeline.frames[RVS.S.keyFrame].alias+\"</div><div class='mouse_info_coor '><div><span class='mouselabel'>X</span><span class='mouseval'>\"+RVS.S.DaD.layerFrameX.value+\"</span></div><div><span class='mouselabel'>Y</span><span class='mouseval'>\"+RVS.S.DaD.layerFrameY.value+\"</span></div></div></div>\"});\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tRVS.S.DaD.sameLevelNotColumn = RVS.S.DaD.toContainerID===-1 && RVS.S.DaD.fromContainerType===\"root\";\r\n\r\n\r\n\t\t\t\t\t\t// CLEAR THE INPUT FIELD UPDATE TIMER !!\r\n\t\t\t\t\t\tif (RVS.S.updateEsyInputsTimer!==undefined) {\r\n\t\t\t\t\t\t\tclearTimeout(RVS.S.updateEsyInputsTimer);\r\n\t\t\t\t\t\t\tRVS.S.updateEsyInputsTimerMemory = true;\r\n\t\t\t\t\t\t\tdelete RVS.S.updateEsyInputsTimer;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//REMOVING ELEMENTS FROM COLUMNS SHOULD BE DEPENDENT ON MOUSE POINTER\r\n\t\t\t\t\t\tif (RVS.S.DaD.fromContainerType===\"column\" && !RVS.S.DaD.showInMini && RVS.S.DaD.draggedPosType!==\"absolute\" ) {\r\n\t\t\t\t\t\t\tRVS.S.DaD.dragdelta.x = RVS.S.DaD.dragdelta.x + RVS.S.DaD.touchPosition.x-RVS.S.layer_grid_offset.left;\r\n\t\t\t\t\t\t\tRVS.S.DaD.dragdelta.y = RVS.S.DaD.dragdelta.y + RVS.S.DaD.touchPosition.y-RVS.S.layer_grid_offset.top;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tui.position = {};\r\n\r\n\t\t\t\t\t\t//requestAnimationFrame(function() {\r\n\t\t\t\t\t\t\tfor (var si in RVS.selLayers) {\r\n\t\t\t\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(si)) continue;\r\n\t\t\t\t\t\t\t\tvar i = RVS.selLayers[si];\r\n\t\t\t\t\t\t\t\tRVS.F.updateHTMLLayerPosition({ uid:i,  o:RVS.S.DaD.dragdelta, updateDistanceLines:_.uid, lhCwidth:RVS.H[i].c_width, lhCheight:RVS.H[i].c_height,updateFields:i==_.uid , mouseInfo:i==RVS.S.DaD.currentLayerId, snapToGrid:RVS.S.DaD.snapToGrid, snapToLayers:RVS.S.DaD.snapToLayers});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//});\r\n\r\n\t\t\t\t\t\tvar posobj = {\r\n\t\t\t\t\t\t\t\tleft:((event.clientX-RVS.S.layer_grid_offset.left)/RVS.zoom),\r\n\t\t\t\t\t\t\t\ttop:((event.clientY-RVS.S.layer_grid_offset.top)/RVS.zoom),\r\n\t\t\t\t\t\t\t\ttransformOrigin:\"0 0\",opacity:0.75,scale:0.6,\r\n\t\t\t\t\t\t\t\twidth:RVS.S.DaD.originalWidth,\r\n\t\t\t\t\t\t\t\tdisplay:RVS.L[RVS.S.DaD.currentLayerId].idle.display,\r\n\t\t\t\t\t\t\t\tx:0+RVS.S.DaD.scrolldiff.x, y:0+RVS.S.DaD.scrolldiff.y\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tif (!RVS.S.DaD.showInMini) {\r\n\t\t\t\t\t\t\tif (RVS.S.DaD.fromContainerType!==\"column\" || RVS.S.DaD.draggedPosType===\"absolute\") {\r\n\t\t\t\t\t\t\t\tposobj.left = ((event.clientX-RVS.S.DaD.touchPosition.x)/RVS.zoom);\r\n\t\t\t\t\t\t\t\tposobj.top = ((event.clientY-RVS.S.DaD.touchPosition.y)/RVS.zoom);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tposobj.width = RVS.F.updateDraggedWidth();\r\n\t\t\t\t\t\t\tposobj.height =  RVS.L[RVS.S.DaD.currentLayerId].size.height[RVS.screen].v ==\"auto\" ? RVS.S.DaD.originalHeight : RVS.L[RVS.S.DaD.currentLayerId].size.height[RVS.screen].v;\r\n\t\t\t\t\t\t\tposobj.display = \"block\";\r\n\t\t\t\t\t\t\tposobj.scale = 1;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (RVS.S.DaD.snapToGrid && RVS.S.DaD.sameLevelNotColumn) {\r\n\t\t\t\t\t\t\tposobj.left = posobj.left - RVS.S.updatePosToXDif;\r\n\t\t\t\t\t\t\tposobj.top = posobj.top - RVS.S.updatePosToYDif;\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tif (RVS.S.DaD.snapToLayers) RVS.F.closeToOtherLayers(RVS.S.DaD.currentLayerId, {x:posobj.left, y:posobj.top, w:RVS.H[RVS.S.DaD.currentLayerId].c_width, h:RVS.H[RVS.S.DaD.currentLayerId].c_height});\r\n\r\n\r\n\t\t\t\t\t\ttpGS.gsap.set(ui.helper,posobj);\r\n\r\n\t\t\t\t\t\tRVS.S.DaD.startPos =  {x:posobj.left, y:posobj.top};\r\n\r\n\r\n\t\t\t\t\t\tRVS.C.layer_pos_x.value = RVS.S.updatePosToX;\r\n\t\t\t\t\t\tRVS.C.layer_pos_y.value = RVS.S.updatePosToY;\r\n\t\t\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\t\t\tif (RVS.S.updatePosToX!==undefined && RVS.S.updatePosToY!==undefined && (RVS.S.updatePosToX!=0 || RVS.S.updatePosToY!=0))\r\n\t\t\t\t\t\t\t\tRVS.F.showMouseInfo({html:\"<div class='mouse_info_coor'><div><span class='mouselabel'>X</span><span class='mouseval'>\"+RVS.S.updatePosToX+\"</span></div><div><span class='mouselabel'>Y</span><span class='mouseval'>\"+RVS.S.updatePosToY+\"</span></div></div><div class='mouse_info_align \"+RVS.S.lph+\" \"+RVS.S.lpv+\"'><span class='mia_tl'></span><span class='mia_tc'></span><span class='mia_tr'></span><span class='mia_ml'></span><span class='mia_mc'></span><span class='mia_mr'></span><span class='mia_bl'></span><span class='mia_bc'></span><span class='mia_br'></span></div>\"});\r\n\t\t\t\t\t\t\telse RVS.F.hideMouseInfo();\r\n\t\t\t\t\t\t\tif ((RVS.SLIDER.settings.snap.adjust!==\"none\")) {\r\n\t\t\t\t\t\t\t\tif (RVS.S.DaD.sameLevelNotColumn)\r\n\t\t\t\t\t\t\t\t\tRVS.F.snapVisual({av:RVS.S.lpv,ah:RVS.S.lph,sp:(RVS.SLIDER.settings.snap.adjust===\"grid\" ? RVS.F.getSnapPoint(RVS.S.updatePosToX,RVS.S.updatePosToY) : undefined)});\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tRVS.F.clearSnapVisual();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\tstop:function(event,ui) {\r\n\t\t\t\t\tif (RVS.L[_.uid].size.covermode==\"fullinset\") return;\r\n\t\t\t\t\tRVS.S.dragging = false;\r\n\t\t\t\t\tif ((RVS.SLIDER.settings.snap.adjust!==\"none\")) RVS.F.clearSnapVisual();\r\n\t\t\t\t\t//Remove the Top Class which would make transparent the elements which are not belongs to same position group\r\n\t\t\t\t\tRVS.C.slide[0].classList.remove('rel_layer_in_drag');\r\n\t\t\t\t\tRVS.C.slide[0].classList.remove('abs_layer_in_drag');\r\n\r\n\t\t\t\t\ttpGS.gsap.set(ui.helper,{scale:1});\r\n\t\t\t\t\tRVS.S.ulInner[0].classList.remove(\"dropSensorActive\");\r\n\t\t\t\t\tRVS.S.DaD.dropSensor = false;\r\n\r\n\t\t\t\t\tclearHCoors();\r\n\t\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\t\tRVS.F.hideMouseInfo();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (RVS.S.realDragHappen) {\r\n\t\t\t\t\t\tvar bgroupid = RVS.animationMode===true ? \"frame\" : RVS.S.DaD.fromContainerID==-1 && RVS.S.DaD.target!==undefined && RVS.S.DaD.target.into==\"free\" ? \"layermovement\" : \"layersorting_layermovement\";\r\n\t\t\t\t\t\tRVS.F.openBackupGroup({id:bgroupid,txt:RVS.animationMode!==true ? \"Layer Position\" : \"Frame Position\" ,icon:\"open_with\"});\r\n\r\n\t\t\t\t\t\tRVS.S.DaD.difh = 0;\r\n\t\t\t\t\t\tRVS.S.DaD.difv = 0;\r\n\r\n\t\t\t\t\t\tif (RVS.animationMode!==true) {\r\n\t\t\t\t\t\t\tif (RVS.S.DaD.toContainerType===\"group\" && (RVS.S.DaD.toContainerID+\"\" !== RVS.S.DaD.fromContainerID+\"\") && RVS.L[RVS.S.DaD.parentID]!==undefined) {\r\n\t\t\t\t\t\t\t\tvar donotice = false;\r\n\t\t\t\t\t\t\t\tfor (var i in RVS.V.sizes) {\r\n\t\t\t\t\t\t\t\t\tif(!RVS.V.sizes.hasOwnProperty(i) || RVS.screen== RVS.V.sizes[i] || RVS.SLIDER.settings.size.custom[RVS.V.sizes[i]]!==true || !RVS.L[RVS.S.DaD.currentLayerId].position.x[RVS.V.sizes[i]].e) continue;\r\n\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.S.DaD.currentLayerId+'.position.x.'+RVS.V.sizes[i]+'.v',val:\"0px\", uid:RVS.S.DaD.currentLayerId});\r\n\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.S.DaD.currentLayerId+'.position.y.'+RVS.V.sizes[i]+'.v',val:\"0px\", uid:RVS.S.DaD.currentLayerId});\r\n\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.S.DaD.currentLayerId+'.position.x.'+RVS.V.sizes[i]+'.e',val:false, uid:RVS.S.DaD.currentLayerId});\r\n\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.S.DaD.currentLayerId+'.position.y.'+RVS.V.sizes[i]+'.e',val:false, uid:RVS.S.DaD.currentLayerId});\r\n\t\t\t\t\t\t\t\t\tdonotice = true;\r\n\t\t\t\t\t\t\t\t\t//Notice\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (donotice) RVS.F.showInfo({content:RVS_LANG.noticepositionreseted, type:\"goodtoknow\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tRVS.F.updateHTMLLayerPosition({ uid:RVS.S.DaD.currentLayerId,  o:RVS.S.DaD.dragdelta,updateValues:true,lhCwidth:RVS.H[RVS.S.DaD.currentLayerId].c_width, lhCheight:RVS.H[RVS.S.DaD.currentLayerId].c_height, snapToGrid:RVS.S.DaD.snapToGrid, snapToLayers:RVS.S.DaD.snapToLayers});\r\n\t\t\t\t\t\t\tfor (var si in RVS.selLayers) {\r\n\t\t\t\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(si)) continue;\r\n\t\t\t\t\t\t\t\tvar i = RVS.selLayers[si];\r\n\t\t\t\t\t\t\t\tif (i==RVS.S.DaD.currentLayerId) continue;\r\n\t\t\t\t\t\t\t\tRVS.F.updateHTMLLayerPosition({ uid:i,  o:RVS.S.DaD.dragdelta,updateValues:true,lhCwidth:RVS.H[i].c_width, lhCheight:RVS.H[i].c_height, snapToGrid:RVS.S.DaD.snapToGrid, snapToLayers:RVS.S.DaD.snapToLayers});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tif (RVS.S.DaD.frameOX_N) RVS.F.backup({\tpath:RVS.S.slideId+\".layers.\"+RVS.S.DaD.currentLayerId+\".timeline.frames.\"+RVS.S.keyFrame+\".transform.x.#size#.v\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastkey:\"v\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tval:RVS.L[RVS.S.DaD.currentLayerId].timeline.frames[RVS.S.keyFrame].transform.x[RVS.screen].v,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\told:RVS.S.DaD.frameOX});\r\n\r\n\t\t\t\t\t\t\tif (RVS.S.DaD.frameOY_N) RVS.F.backup({\tpath:RVS.S.slideId+\".layers.\"+RVS.S.DaD.currentLayerId+\".timeline.frames.\"+RVS.S.keyFrame+\".transform.y.#size#.v\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastkey:\"v\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tval:RVS.L[RVS.S.DaD.currentLayerId].timeline.frames[RVS.S.keyFrame].transform.y[RVS.screen].v,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\told:RVS.S.DaD.frameOY});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tRVS.S.DaD.snapToGrid = false;\r\n\t\t\t\t\t\tRVS.S.DaD.snapToLayers = false;\r\n\r\n\t\t\t\t\t\tRVS.C.layergrid[0].classList.remove(\"layersInDragorResize\");\r\n\t\t\t\t\t\tif (RVS.animationMode!==true) dropLayerAfterMove();\r\n\t\t\t\t\t\tRVS.L[_.uid].position.position = RVS.L[_.uid].group.puid==-1 ? \"absolute\" : RVS.L[_.uid].position.position;\r\n\t\t\t\t\t\ttpGS.gsap.set(lh.w,{opacity:1});\r\n\t\t\t\t\t\tRVS.F.closeBackupGroup({id:bgroupid});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tRVS.C.layergrid[0].classList.remove(\"layersInDragorResize\");\r\n\t\t\t\t\t\ttpGS.gsap.set(lh.w,{opacity:1});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tRVS.F.selectedLayersVisualUpdate();\r\n\r\n\t\t\t\t\tif (RVS.S.updateEsyInputsTimerMemory) {\r\n\t\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('.layer_settings_collector'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\t\t\t\t\tRVS.S.updateEsyInputsTimerMemory = false;\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tRVS.F.selectLayers({id:_.uid,overwrite:true, action:\"add\", keepSelectedFrame:RVS.animationMode===true});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tRVS.F.updateLayerPositionClass(RVS.S.DaD.currentLayerId);\r\n\r\n\t\t\t\t\t/*if (RVS.L[RVS.S.DaD.currentLayerId].type==\"group\") {\r\n\t\t\t\t\t\tRVS.H[RVS.S.DaD.currentLayerId].gpH.style.display=\"block\";\r\n\t\t\t\t\t}*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\tif (_.resize) {\r\n\t\t\tlh.w.resizable({\r\n\t\t\t\thandles:\"n,s,w,e\",\r\n\t\t\t\tstart:function(event,ui) {\r\n\r\n\t\t\t\t\t// STOP LAYER ANIMATION\r\n\t\t\t\t\tRVS.F.stopAndPauseAllLayerAnimation();\r\n\t\t\t\t\tRVS.F.showForms(\"*slidelayout**mode__slidecontent*#form_layer_position\",true);\r\n\t\t\t\t\tRVS.S.WWL = RVS.L[_.uid];\r\n\t\t\t\t\tRVS.S.lpv = RVS.S.WWL.position.vertical[RVS.screen].v;\r\n\t\t\t\t\tRVS.S.lph = RVS.S.WWL.position.horizontal[RVS.screen].v;\r\n\t\t\t\t\tRVS.S.WWHL = RVS.H[_.uid];\r\n\t\t\t\t\tRVS.C.layer_width = RVS.C.layer_width===undefined ? jQuery('#layer_width') : RVS.C.layer_width;\r\n\t\t\t\t\tRVS.C.layer_height = RVS.C.layer_height===undefined ? jQuery('#layer_height') : RVS.C.layer_height;\r\n\t\t\t\t\tRVS.C.layer_covermode = RVS.C.layer_covermode===undefined ? jQuery('#layer_covermode') : RVS.C.layer_covermode;\r\n\r\n\t\t\t\t\twindow.layertemp_width = window.layerneww = ui.size.width;\r\n\t\t\t\t\twindow.layertemp_height = window.layernewh = ui.size.height;\r\n\t\t\t\t\twindow.resizeDirection = \"none\";\r\n\r\n\t\t\t\t\tRVS.F.setZindex({id:_.uid,o:475});\r\n\t\t\t\t\tRVS.C.layergrid.addClass(\"layersInDragorResize\");\r\n\t\t\t\t\t//PREPARE SIMILAR CONTAINER FOR CALCULATING AUTO AND NORMAL HEIGHTS\r\n\t\t\t\t\tif (RVS.S.WWL.type===\"text\" || RVS.S.WWL.type===\"button\") {\r\n\t\t\t\t\t\twindow.layerclone = RVS.S.WWHL.w.clone(false);\r\n\t\t\t\t\t\twindow.layercloneinside = window.layerclone.find('._lc_content_').first();\r\n\t\t\t\t\t\tRVS.C.slide.append(window.layerclone);\r\n\t\t\t\t\t\ttpGS.gsap.set(window.layerclone,{autoAlpha:0});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\tresize:function(event,ui) {\r\n\r\n\t\t\t\t\tvar dir = window.layerneww!=Math.round(ui.size.width) ? \"horizontal\" : \"vertical\";\r\n\r\n\t\t\t\t\twindow.layerneww = Math.round(ui.size.width);\r\n\t\t\t\t\twindow.layernewh = Math.round(ui.size.height);\r\n\r\n\r\n\t\t\t\t\tswitch (RVS.S.WWL.type) {\r\n\t\t\t\t\t\tcase \"text\":\r\n\t\t\t\t\t\tcase \"button\":\r\n\t\t\t\t\t\t\ttpGS.gsap.set([window.layercloneinside],{width:Math.round(ui.size.width), height:\"auto\"});\r\n\t\t\t\t\t\t\tif (RVS.S.WWL.size.height[RVS.screen].v===\"auto\" || window.layercloneinside.height() > Math.round(ui.size.height)) {\r\n\t\t\t\t\t\t\t\tif (dir===\"horizontal\")\r\n\t\t\t\t\t\t\t\t\twindow.layernewh = ui.size.height = window.layercloneinside.outerHeight();\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\twindow.layernewh = ui.size.height = Math.max(parseInt(ui.size.height,0) || 0, parseInt(window.layercloneinside.outerHeight(),0) || 0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\tif (RVS.S.WWL.size.minWidth[RVS.screen].v!==\"none\") window.layerneww = ui.size.width = Math.max(window.layerneww, parseInt(RVS.S.WWL.size.minWidth[RVS.screen].v,0) || 0);\r\n\t\t\t\t\tif (RVS.S.WWL.size.maxWidth[RVS.screen].v!==\"none\") window.layerneww = ui.size.width = Math.min(window.layerneww, parseInt(RVS.S.WWL.size.maxWidth[RVS.screen].v,0) || 0);\r\n\t\t\t\t\tif (RVS.S.WWL.size.minHeight[RVS.screen].v!==\"none\") window.layernewh = ui.size.height = Math.max(window.layernewh, parseInt(RVS.S.WWL.size.minHeight[RVS.screen].v,0) || 0);\r\n\t\t\t\t\tif (RVS.S.WWL.size.maxHeight[RVS.screen].v!==\"none\") window.layernewh = ui.size.height = Math.min(window.layernewh, parseInt(RVS.S.WWL.size.maxHeight[RVS.screen].v,0) || 0);\r\n\r\n\r\n\t\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\t\tRVS.F.showMouseInfo({html:\"<div class='mouse_info_coor'><div><span class='mouselabel'>W</span><span class='mouseval'>\"+window.layerneww+\"</span></div><div><span class='mouselabel'>H</span><span class='mouseval'>\"+window.layernewh+\"</span></div></div><div class='mouse_info_align \"+RVS.S.lph+\" \"+RVS.S.lpv+\"'><span class='mia_tl'></span><span class='mia_tc'></span><span class='mia_tr'></span><span class='mia_ml'></span><span class='mia_mc'></span><span class='mia_mr'></span><span class='mia_bl'></span><span class='mia_bc'></span><span class='mia_br'></span></div>\"});\r\n\t\t\t\t\t});\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t//CHANGE WIDTH AND COVER MODE IF WIDTH CHANGED\r\n\t\t\t\t\tif (window.layertemp_width != window.layerneww) {\r\n\t\t\t\t\t\tif (window.resizeDirection===\"none\") window.resizeDirection=\"horizontal\";\r\n\t\t\t\t\t\tRVS.C.layer_width[0].value = window.layerneww+\"px\";\r\n\t\t\t\t\t\tif (RVS.L[_.uid].size.covermode===\"fullwidth\" || RVS.L[_.uid].size.covermode===\"cover\" || RVS.L[_.uid].size.covermode===\"cover-proportional\") {\r\n\t\t\t\t\t\t\tif (RVS.C.layer_covermode[0].value!==\"custom\") RVS.C.layer_covermode.val(\"custom\").ddTP('change');\r\n\t\t\t\t\t\t\tif (RVS.L[_.uid].size.covermode===\"cover\" || RVS.L[_.uid].size.covermode===\"cover-proportional\")\r\n\t\t\t\t\t\t\t\tjQuery('.layersize_wrap').removeClass(\"disablecontainer\");\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tjQuery('.layersize_wrap_width').removeClass(\"disablecontainer\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//CHANGE HEIGHT AND COVER MODE IF HEIGHT CHANGED\r\n\t\t\t\t\tif (window.layertemp_height != window.layernewh) {\r\n\t\t\t\t\t\tif (window.resizeDirection===\"none\") window.resizeDirection=\"vertical\";\r\n\t\t\t\t\t\tRVS.C.layer_height[0].value = (RVS.S.WWL.type===\"video\" && RVS.S.WWL.size.height[RVS.screen].v===\"auto\" ? \"auto\" : window.layernewh+\"px\");\r\n\t\t\t\t\t\tif (RVS.L[_.uid].size.covermode===\"fullheight\" || RVS.L[_.uid].size.covermode===\"cover\" || RVS.L[_.uid].size.covermode===\"cover-proportional\") {\r\n\t\t\t\t\t\t\tif (RVS.C.layer_covermode[0].value!==\"custom\") RVS.C.layer_covermode.val(\"custom\").ddTP('change');\r\n\t\t\t\t\t\t\tif (RVS.L[_.uid].size.covermode===\"cover\" || RVS.L[_.uid].size.covermode===\"cover-proportional\")\r\n\t\t\t\t\t\t\t\tjQuery('.layersize_wrap').removeClass(\"disablecontainer\");\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tjQuery('.layersize_wrap_height').removeClass(\"disablecontainer\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\t//RESPECT ASPECT RATIO !!!\r\n\t\t\t\t\tif (RVS.S.WWL.size.scaleProportional &&  (RVS.S.WWL.size.aspectRatio[RVS.screen].v!==\"auto\" && RVS.S.WWL.size.aspectRatio[RVS.screen].v!==\"none\")) {\r\n\t\t\t\t\t\tif (window.resizeDirection===\"horizontal\")\r\n\t\t\t\t\t\t\twindow.layernewh = ui.size.height = Math.round(window.layerneww / RVS.S.WWL.size.aspectRatio[RVS.screen].v);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\twindow.layerneww = ui.size.width = Math.round(window.layernewh * RVS.S.WWL.size.aspectRatio[RVS.screen].v);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// VIDEO WITHIN COLUMN ON RESIZE MUST BE HANDLD SPECIAL\r\n\t\t\t\t\tif (RVS.S.WWL.type===\"video\" && RVS.S.WWL.size.height[RVS.screen].v===\"auto\") {\r\n\t\t\t\t\t\tvar prop = RVS.S.WWL.media.ratio.split(\":\");\r\n\t\t\t\t\t\tprop = prop[1] / prop[0];\r\n\t\t\t\t\t\tui.size.height = window.layerneww * prop;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\ttpGS.gsap.set(RVS.H[_.uid].c,{width:window.layerneww, height:window.layernewh});\r\n\t\t\t\t\t\tRVS.F.updateHTMLLayerPosition({uid:_.uid});\r\n\r\n\t\t\t\t\t\t//ELEMENTS IN GROUP NEED TO BE REPOSITIONED ALSO !\r\n\t\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\t\tvar lInColumns = RVS.F.getLayerChildren({layerid:_.uid});\r\n\t\t\t\t\t\tfor (var i in lInColumns) {\r\n\t\t\t\t\t\t\tif(!lInColumns.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\t\tRVS.F.updateHTMLLayerPosition({uid:i});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (RVS.F.updateMinSliderHeights()) RVS.DOC.trigger('updatesliderlayout','layertools.js - 1893');\r\n\r\n\t\t\t\t\t\tRVS.F.updateSharpCorners({uid:_.uid,resize:true});\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tstop:function(event,ui) {\r\n\t\t\t\t\tRVS.C.layergrid.removeClass(\"layersInDragorResize\");\r\n\t\t\t\t\t\tRVS.F.hideMouseInfo();\r\n\t\t\t\t\tRVS.S.justresized = true;\r\n\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"layerresize\",txt:\"Resize Layer\",icon:\"photo_size_select_large\"});\r\n\r\n\t\t\t\t\t\t// IF LAYER WAS TEXT, CLONED HELPCONTAINER MUST BE REMOVED\r\n\t\t\t\t\t\tif (RVS.S.WWL.type===\"text\" || RVS.S.WWL.type===\"button\") {\r\n\t\t\t\t\t\t\twindow.layernewh = window.layercloneinside.height() === window.layernewh && RVS.L[_.uid].type==\"text\" ? \"auto\" : window.layernewh;\r\n\t\t\t\t\t\t\twindow.layerclone.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// IF WIDTH HAS BEEN CHANGED, CHECK INFLUENCES AND SAVE OBJECT CHANGES\r\n\t\t\t\t\t\tif (window.layertemp_width != window.layerneww) {\r\n\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+_.uid+'.size.width.#size#.v',val:window.layerneww+\"px\", uid:_.uid});\r\n\t\t\t\t\t\t\tif (RVS.L[_.uid].size.covermode===\"fullwidth\" || RVS.L[_.uid].size.covermode===\"cover\" || RVS.L[_.uid].size.covermode===\"cover-proportional\")\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+_.uid+'.size.covermode',val:\"custom\", uid:_.uid});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// IF HEIGHT HAS BEEN CHANGED, CHECK INFLUENCES AND SAVE OBJECT CHANGES\r\n\t\t\t\t\t\tif (window.layertemp_height != window.layernewh) {\r\n\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+_.uid+'.size.height.#size#.v',val:(RVS.S.WWL.type===\"video\" && RVS.S.WWL.size.height[RVS.screen].v===\"auto\" ? \"auto\" : isNaN(window.layernewh) ? window.layernewh : window.layernewh+\"px\"), uid:_.uid});\r\n\t\t\t\t\t\t\tif (RVS.L[_.uid].size.covermode===\"fullheight\" || RVS.L[_.uid].size.covermode===\"cover\" || RVS.L[_.uid].size.covermode===\"cover-proportional\")\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+_.uid+'.size.covermode',val:\"custom\", uid:_.uid});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"layerresize\"});\r\n\r\n\r\n\t\t\t\t\tif (RVS.F.updateMinSliderHeights())\r\n\t\t\t\t\t\tRVS.DOC.trigger('updatesliderlayout','layertools.js - 1056');\r\n\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tRVS.S.justresized = false;\r\n\t\t\t\t\t},100);\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n/***********************************\r\n\tMAIN INTERNAL FUNCTIONS\r\n************************************/\r\n\r\n\r\n\t/*\r\n\tAPPEND/PREPEND THE DRAGGED LAYER INTO THE RIGHT CONTAINE BY TRIGGERING THE\r\n\t*/\r\n\tfunction dropLayerAfterMove() {\r\n\t\tclearTimeout(RVS.S.DaD.timer);\r\n\r\n\t\tvar target = RVS.S.DaD.target !== undefined ? RVS.S.DaD.target.into : \"free\";\r\n\t\tif (target===\"column\" || target===\"group\") {\r\n\r\n\t\t\tif (RVS.S.DaD.target!==undefined) {\r\n\t\t\t\tif (RVS.S.DaD.target.columnID!==undefined && (RVS.S.DaD.target.columnType===\"group\" || RVS.S.DaD.target.elementID===undefined || (RVS.S.DaD.target.columnType==\"column\" && RVS.S.DaD.draggedPosType==\"absolute\"))) {\r\n\r\n\t\t\t\t\tif (RVS.S.DaD.target.columnTop || RVS.S.DaD.draggedPosType==\"absolute\") {\r\n\r\n\t\t\t\t\t\tif (RVS.S.DaD.target.columnType!==\"group\" || RVS.S.DaD.fromContainerID != RVS.S.DaD.target.columnID ) {\r\n\t\t\t\t\t\t\t\tvar rp =\r\n\t\t\t\t\t\t\t\t\t{ //only if dropped into a Group\r\n\t\t\t\t\t\t\t\t\t\tx:Math.round((RVS.S.DaD.clone.offset().left-RVS.S.DaD.dropParentPos.x)/RVS.zoom + RVS.S.DaD.scrolldiff.x),\r\n\t\t\t\t\t\t\t\t\t\ty:Math.round((RVS.S.DaD.clone.offset().top-RVS.S.DaD.dropParentPos.y)/RVS.zoom + RVS.S.DaD.scrolldiff.y)\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t// MODIFICATE SIZE OF TEXT LAYERS DROPPED INTO COLUMN\r\n\t\t\t\t\t\t\t\tif (RVS.S.DaD.target.columnType===\"column\") {\r\n\r\n\t\t\t\t\t\t\t\t\tfor (var i in RVS.selLayers) {\r\n\t\t\t\t\t\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\t\t\t\t\t//Only set to Relative if it was Relative Before in the Column\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (RVS.S.DaD.draggedPosType==\"absolute\" && RVS.S.DaD.fromContainerType!==\"column\") {\r\n\t\t\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.selLayers[i]+'.position.position',val:\"relative\", uid:RVS.selLayers[i]});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (RVS.L[RVS.selLayers[i]].type===\"text\") {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var _screens in RVS.V.sizes) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(!RVS.V.sizes.hasOwnProperty(_screens)) continue;\r\n\t\t\t\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.selLayers[i]+'.idle.whiteSpace.'+RVS.V.sizes[_screens]+'.v',val:\"full\", uid:RVS.selLayers[i]});\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (RVS.L[RVS.selLayers[i]].size.width[RVS.V.sizes[_screens]].v.indexOf(\"%\")==-1 && RVS.L[RVS.selLayers[i]].size.width[RVS.V.sizes[_screens]].v!=='auto')\r\n\t\t\t\t\t\t\t\t\t\t\t\tif  ((RVS.S.DaD.target==undefined || RVS.S.DaD.fromContainerID!==RVS.S.DaD.target.columnID) && (RVS.H[RVS.S.DaD.target.columnID].w[0].offsetWidth<parseInt(RVS.L[RVS.selLayers[i]].size.width[RVS.V.sizes[_screens]].v,0)))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.selLayers[i]+'.size.width.'+RVS.V.sizes[_screens]+'.v',val:\"auto\", uid:RVS.selLayers[i]});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (RVS.L[RVS.S.DaD.currentLayerId].position.position!==\"relative\") {\r\n\r\n\t\t\t\t\t\t\t\t\tRVS.F.sortAllSelectedLayers({\tlayer:RVS.S.DaD.currentLayerId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget:RVS.S.DaD.target.columnType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenv:RVS.S.DaD.target.columnID,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdropto:RVS.S.DaD.target.columnType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpospos:RVS.S.DaD.draggedPosType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresetPosition:rp\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tRVS.F.sortAllSelectedLayers({layer:RVS.S.DaD.currentLayerId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget:RVS.S.DaD.target.elementID==undefined ? \"firstingroup\" : RVS.S.DaD.target.elementBefore ? \"before\" : \"after\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenv:RVS.S.DaD.target.elementID!==undefined ? RVS.S.DaD.target.elementID : RVS.S.DaD.target.columnID,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdropto:RVS.S.DaD.target.columnType\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (RVS.L[RVS.S.DaD.currentLayerId].position.position===\"relative\") {\r\n\r\n\t\t\t\t\t\t\t\tRVS.F.sortAllSelectedLayers({layer:RVS.S.DaD.currentLayerId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget:RVS.S.DaD.target.elementID==undefined ? \"firstingroup\" : RVS.S.DaD.target.elementBefore ? \"before\" : \"after\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenv:RVS.S.DaD.target.elementID!==undefined ? RVS.S.DaD.target.elementID : RVS.S.DaD.target.columnID,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdropto:RVS.S.DaD.target.columnType\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tRVS.F.sortAllSelectedLayers({layer:RVS.S.DaD.currentLayerId, target:\"columnend\", env:RVS.S.DaD.target.columnID});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else\r\n\t\t\t\tif (RVS.S.DaD.target.elementID!==undefined) {\r\n\t\t\t\t\tRVS.F.sortAllSelectedLayers({layer:RVS.S.DaD.currentLayerId, target:RVS.S.DaD.target.elementBefore ? \"before\" : \"after\", env:RVS.S.DaD.target.elementID});\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (RVS.L[RVS.S.DaD.currentLayerId].linebreak) {\r\n\t\t\t\tRVS.F.showInfo({content:RVS_LANG.cantpulllinebreakoutside, type:\"goodtoknow\", showdelay:0, hidedelay:3, hideon:\"\", event:\"\" });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( RVS.L[RVS.S.DaD.currentLayerId].group.puid!==-1) {\r\n\t\t\t\tRVS.F.sortAllSelectedLayers({\tlayer:RVS.S.DaD.currentLayerId,\r\n\t\t\t\t\t\t\t\t\ttarget:\"before\",\r\n\t\t\t\t\t\t\t\t\tenv:\"top\",\r\n\t\t\t\t\t\t\t\t\tdropto:\"root\",\r\n\t\t\t\t\t\t\t\t\tresetPosition:{\r\n\t\t\t\t\t\t\t\t\t\t\tx:RVS.S.DaD.startPos.x,\r\n\t\t\t\t\t\t\t\t\t\t\ty:RVS.S.DaD.startPos.y}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// SHOW THE BORDER AND THE TOP/BOTTOM LINE OF\r\n\tfunction drawDroppingTarget() {\r\n\r\n\t\tvar target = RVS.S.DaD.target !== undefined ? RVS.S.DaD.target.into : \"free\";\r\n\r\n\t\tif (target===\"column\" || target===\"group\") {\r\n\t\t\tif (RVS.S.DaD.target!==undefined) {\r\n\r\n\t\t\t\tRVS.C.layergrid[0].classList.remove('drop_in_root');\r\n\t\t\t\tif (RVS.S.DaD.target.rowID!==undefined && RVS.S.DaD.target.rowID!==\"group\") RVS.H[RVS.S.DaD.target.rowID].w[0].className+=\" dont_blur drop_over_layer\";\r\n\t\t\t\tif (RVS.S.DaD.target.columnID!==undefined) {\r\n\t\t\t\t\tRVS.H[RVS.S.DaD.target.columnID].w[0].className+=\" dont_blur drop_over_layer\";\r\n\t\t\t\t\tif ((RVS.SLIDER.settings.snap.adjust!==\"none\")) RVS.F.clearSnapVisual();\r\n\t\t\t\t\tif (RVS.S.DaD.target.elementID===undefined && RVS.L[RVS.S.DaD.currentLayerId].position.position===\"relative\")\r\n\t\t\t\t\t\tif (RVS.S.DaD.target.columnTop)\r\n\t\t\t\t\t\t\tRVS.H[RVS.S.DaD.target.columnID].w[0].classList.add(\"drop_before_firstlayer\");\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tRVS.H[RVS.S.DaD.target.columnID].w[0].classList.add(\"drop_after_lastlayer\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (RVS.S.DaD.target.elementID!==undefined &&  RVS.S.DaD.draggedPosType!==\"absolute\") {\r\n\t\t\t\t\tif (RVS.S.DaD.target.elementBefore)\r\n\t\t\t\t\t\tRVS.H[RVS.S.DaD.target.elementID].w[0].classList.add(\"drop_before_layer\");\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tRVS.H[RVS.S.DaD.target.elementID].w[0].classList.add(\"drop_after_layer\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (RVS.S.DaD.target.columnType==\"column\" && RVS.S.DaD.showInMini==false && RVS.S.DaD.draggedPosType!==\"absolute\") {\r\n\t\t\t\tRVS.S.DaD.showInMini = true;\r\n\t\t\t\ttpGS.gsap.set(RVS.S.DaD.uiHelper,{left:(RVS.S.mP.left-RVS.S.layer_grid_offset.left) / RVS.zoom,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop:(RVS.S.mP.top-RVS.S.layer_grid_offset.top) / RVS.zoom});\r\n\t\t\t\ttpGS.gsap.to(RVS.S.DaD.uiHelper,0.3,{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//left:(RVS.S.mP.left-RVS.S.layer_grid_offset.left) / RVS.zoom,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//top:(RVS.S.mP.top-RVS.S.layer_grid_offset.top) / RVS.zoom,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransformOrigin:\"0 0\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth:RVS.S.DaD.originalWidth,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay:RVS.L[RVS.S.DaD.currentLayerId].idle.display,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity:0.75,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscale:0.6,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//x:0+RVS.S.DaD.scrolldiff.x,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//y:0+RVS.S.DaD.scrolldiff.y\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else\r\n\t\tif (target===\"free\") {\r\n\t\t\tif (RVS.S.DaD.showInMini && RVS.S.DaD.showInMini==true)\r\n\t\t\t\ttpGS.gsap.to(RVS.S.DaD.uiHelper,0.3,{\r\n\t\t\t\t\t\t\t//top:RVS.S.mP.top+RVS.S.rb_ScrollY,\r\n\t\t\t\t\t\t\t//left:RVS.S.mP.left+RVS.S.rb_ScrollX,\r\n\t\t\t\t\t\t\twidth:RVS.L[RVS.S.DaD.currentLayerId].size.width[RVS.screen].v,\r\n\t\t\t\t\t\t\tdisplay:\"block\",\r\n\t\t\t\t\t\t\tscale:1,\r\n\t\t\t\t\t\t\t//x:0-RVS.S.DaD.touchPosition.x+\"px\",\r\n\t\t\t\t\t\t\t//y:0-RVS.S.DaD.touchPosition.y+\"px\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\tRVS.S.DaD.showInMini = false;\r\n\r\n\t\t\tif (RVS.S.DaD.target!==undefined) {\r\n\r\n\t\t\t\tRVS.C.layergrid.addClass(\"drop_in_root\");\r\n\r\n\t\t\t\tif (RVS.S.DaD.target.rowID!==undefined && RVS.S.DaD.target.rowID!==-1 && RVS.S.DaD.target.rowID!==\"group\")\r\n\t\t\t\t\t\tRVS.H[RVS.S.DaD.target.rowID].w[0].className= RVS.H[RVS.S.DaD.target.rowID].w[0].className.split(\"dont_blur\").join(\"\").split(\"drop_over_layer\").join(\"\");\r\n\r\n\t\t\t\tif (RVS.S.DaD.target.columnID!==undefined)\r\n\t\t\t\t\tRVS.H[RVS.S.DaD.target.columnID].w[0].className = RVS.H[RVS.S.DaD.target.columnID].w[0].className\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\"dont_blur\").join(\"\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\"drop_over_layer\").join(\"\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\"drop_before_firstlayer\").join(\"\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\"drop_after_lastlayer\");\r\n\t\t\t\tif (RVS.S.DaD.target.elementID!==undefined)\r\n\t\t\t\t\tRVS.H[RVS.S.DaD.target.elementID].w[0].className = RVS.H[RVS.S.DaD.target.elementID].w[0].className\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\"drop_after_layer\").join(\"\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\"drop_before_layer\").join(\"\");\r\n\r\n\t\t\t\tif (RVS.S.DaD.lastRegisteredRow!==-1 && RVS.S.DaD.lastRegisteredRow!==\"group\" && RVS.S.DaD.lastRegisteredRow!==undefined)\r\n\t\t\t\t\tif (RVS.S.DaD.lastRegisteredRow!==undefined) RVS.H[RVS.S.DaD.lastRegisteredRow].w.className +=\" dont_blur drop_over_layer\";\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n    RVS.F.isParent = function(main,self,found) {\r\n        if (found!==undefined) return found;\r\n        if (self==main) return true;\r\n        if (RVS.L[self]===undefined || RVS.L[self].group===undefined || RVS.L[self].group.puid==-1) return false;\r\n        if (RVS.L[self].group.puid==main) return true; else return RVS.F.isParent(main,RVS.L[self].group.puid,found);\r\n    }\r\n\r\n\tfunction clearHCoors() {\r\n\t\tfor (var i in RVS.H) if (RVS.H.hasOwnProperty(i)) delete RVS.H[i].coor;\r\n\t}\r\n\t/*\r\n\tINIT DRAG AND DROP FUNCTION OF LAYERS\r\n\t*/\r\n\tfunction initDragAndDrop() {\r\n\t\t// DRAG AND DROP LAYERS. FIND DROP ZONE BASED ON WHERE THE LAYER COMES FROM, AND WHERE THE LAYER GOES TO\r\n\r\n\t\tRVS.DOC.on('mousemove','#dropSensor',function(event) {\r\n\t\t\tif (RVS.S.DaD.dropSensor!==1) return;\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\tif (!RVS.S.dragging) return;\r\n\t\t\t\tRVS.S.realDragHappen = true;\r\n\t\t\t\tif (RVS.S.rb_ScrollX!==window.scrollMem.x || RVS.S.rb_ScrollY!==window.scrollMem.y) clearHCoors();\r\n\t\t\t\tvar wrap = jQuery('#dropSensor'),\r\n\t\t\t\t\tb = { x: (event.clientX-15), y: (event.clientY-65)},\r\n\t\t\t\t\two = wrap.offset(),currentZindex,isChild;\r\n\t\t\t\tRVS.S.DaD.dropTimer = 0;\r\n\t\t\t\tRVS.S.DaD.targetBefore = RVS.S.DaD.target;  // FOLLOW THE LAST ELEMENT HAS BEEN HOVERED TO DROP\r\n\t\t\t\tRVS.S.DaD.target = {};\r\n\t\t\t\tRVS.S.DaD.dropParentPos = {x:0, y:0};\r\n\r\n\t\t\t\tclearTimeout(RVS.S.DaD.timer);\r\n\t\t\t\tvar found = false;\r\n\t\t\t\tfor (var i in RVS.H) {\r\n\r\n\t\t\t\t\tif(!RVS.H.hasOwnProperty(i)) continue;\r\n\r\n\t\t\t\t\tclearDragClasses(i);\r\n\t\t\t\t\tif (RVS.H[i].coor===undefined) {\r\n\t\t\t\t\t\tRVS.H[i].coor =  { \ttop: (RVS.H[i].w.offset().top-wo.top - RVS.S.rb_ScrollY),\r\n\t\t\t\t\t\t\t\t\t\t\tleft:(RVS.H[i].w.offset().left-wo.left - RVS.S.rb_ScrollX),\r\n\t\t\t\t\t\t\t\t\t\t\twidth:RVS.H[i].w.outerWidth(),\r\n\t\t\t\t\t\t\t\t\t\t\theight: RVS.H[i].w.outerHeight()\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\tRVS.H[i].coor.right = RVS.H[i].coor.left + (RVS.H[i].coor.width*RVS.zoom);\r\n\t\t\t\t\t\tRVS.H[i].coor.center = RVS.H[i].coor.left + (RVS.H[i].coor.width*RVS.zoom)/2;\r\n\t\t\t\t\t\tRVS.H[i].coor.bottom = RVS.H[i].coor.top + (RVS.H[i].coor.height*RVS.zoom);\r\n\t\t\t\t\t\tRVS.H[i].coor.middle = RVS.H[i].coor.top + (RVS.H[i].coor.height*RVS.zoom)/2;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (RVS.L[i]==undefined || RVS.L[i].visibility===undefined || !RVS.L[i].visibility.visible || RVS.L[i].visibility.locked ||\r\n\t\t\t\t\t\t(RVS.L[i].group.puid!==undefined && RVS.L[i].group.puid!==-1 && RVS.L[RVS.L[i].group.puid]!==undefined && RVS.L[RVS.L[i].group.puid].visibility!==undefined &&\r\n\t\t\t\t\t\t(!RVS.L[RVS.L[i].group.puid].visibility.visible || RVS.L[RVS.L[i].group.puid].visibility.locked))) continue;\r\n\r\n\t\t\t\t\tvar deepestHoveringlevel = -1;\r\n\t\t\t\t\tif (b.x>=RVS.H[i].coor.left && b.x<=RVS.H[i].coor.right && b.y>=RVS.H[i].coor.top && b.y <=RVS.H[i].coor.bottom) {\r\n\r\n\t\t\t\t\t\t// CHECK IF LAYER IS IN THE COLUMN / ROW AND UNDERLAYING FULL ITEMS NOT WINNING\r\n\t\t\t\t\t\tisChild = RVS.F.isParent(RVS.S.DaD.currentLayerId,i);\r\n\r\n\t\t\t\t\t\tif (isChild) continue;\r\n\t\t\t\t\t\tcurrentZindex = RVS.S.DaD.lastGroupParent!==undefined && RVS.S.DaD.lastGroupParent === i ? 474 :\r\n\t\t\t\t\t\t\t\t\t\tRVS.S.DaD.target.groupID!==undefined && RVS.S.DaD.target.groupID!==-1 ? RVS.L[RVS.S.DaD.target.groupID].position.zIndex :\r\n\t\t\t\t\t\t\t\t\t\tRVS.S.DaD.target.puid!==-1 && RVS.S.DaD.target.puid!==undefined ? RVS.L[RVS.S.DaD.target.puid].position.zIndex\r\n\t\t\t\t\t\t\t\t\t\t: RVS.L[i].position.zIndex;\r\n\r\n\t\t\t\t\t\tif (RVS.S.DaD.target.zIndex!==undefined && RVS.S.DaD.target.zIndex>=currentZindex && (RVS.L[i].group.puid==-1 || RVS.L[i].group.puid==undefined)) continue;\r\n\r\n\t\t\t\t\t\tif ( RVS.L[i].type===\"group\" && RVS.L[i].visibility.visible) {\r\n\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.type = RVS.L[i].type;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.rowID = \"group\";\r\n\t\t\t\t\t\t\tif (deepestHoveringlevel!==-1 && RVS.L[i].group.puid==-1) continue;\r\n\t\t\t\t\t\t\tdeepestHoveringlevel = RVS.L[i].group.puid;\r\n\r\n\t\t\t\t\t\t\t/*if (RVS.L[i].group.puid!==-1 && ) {\r\n\t\t\t\t\t\t\t\tRVS.S.DaD.target.groupID = RVS.L[RVS.L[i].group.puid].group.puid;\r\n\t\t\t\t\t\t\t\tRVS.S.DaD.target.columnID = RVS.S.DaD.toContainerID = RVS.L[i].group.puid;\r\n\t\t\t\t\t\t\t} else {\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t\tRVS.S.DaD.target.groupID = RVS.L[i].group.puid;\r\n\t\t\t\t\t\t\t\tRVS.S.DaD.target.columnID = RVS.S.DaD.toContainerID = i;\r\n\t\t\t\t\t\t\t//}\r\n\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.columnType = RVS.S.DaD.toContainerType = \"group\";\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.columnTop = true;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.zIndex = \tcurrentZindex;\r\n\t\t\t\t\t\t\tfound = \"group\";\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tif (RVS.L[i].type===\"column\" && RVS.L[i].visibility.visible && found!==\"group\") {\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.type = RVS.L[i].type;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.groupID = RVS.L[i].group.puid;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.rowID = RVS.L[i].group.puid;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.columnID = RVS.S.DaD.toContainerID = i;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.columnType = RVS.S.DaD.toContainerType = \"column\";\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.columnTop = b.y<=RVS.H[i].coor.middle;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.zIndex = \tcurrentZindex;\r\n\t\t\t\t\t\t\tfound = \"column\";\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tif (found!==\"group\" && RVS.L[i].type!==\"row\" && i!=RVS.S.DaD.currentLayerId && ((RVS.S.DaD.target.columnType!==\"group\" || (RVS.S.DaD.target.columnType!==\"column\" && RVS.S.DaD.draggedPosType!==\"absolute\"))  || (RVS.L[RVS.S.DaD.currentLayerId].position.position==\"relative\" && RVS.L[i].position.position==\"relative\"))) {\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.type = RVS.L[i].type;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.elementID = i;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.puid = RVS.L[i].group.puid;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.elementMiddle = RVS.H[i].coor.middle;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.elementBefore = b.y<=RVS.H[i].coor.middle;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.zIndex = \tcurrentZindex;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar gpcache = RVS.S.DaD.lastGroupParent;\r\n\t\t\t\tdelete RVS.S.DaD.lastGroupParent;\r\n\r\n\t\t\t\tif (RVS.S.DaD.target.rowID===\"group\") {\r\n\t\t\t\t\tRVS.S.DaD.lastGroupParent = RVS.S.DaD.target.columnID;\r\n\t\t\t\t\tRVS.F.setZindex({id:RVS.S.DaD.lastGroupParent,o:474});\r\n\t\t\t\t}\r\n\t\t\t\tif (gpcache!==undefined && RVS.S.DaD.lastGroupParent!==gpcache) RVS.F.setZindex({id:gpcache});\r\n\r\n\r\n\r\n\t\t\t\tif (RVS.S.DaD.target!==undefined && (RVS.S.DaD.target.rowID === \"group\" || (RVS.S.DaD.target.type ==\"column\" && RVS.S.DaD.draggedPosType==\"absolute\") || (RVS.S.DaD.target.type !==\"column\" && RVS.S.DaD.target.columnID!=undefined && RVS.S.DaD.target.columnType!==undefined && RVS.S.DaD.draggedPosType==\"absolute\"))) {\r\n\t\t\t\t\tif (RVS.S.DaD.target.type ==\"column\" && RVS.S.DaD.draggedPosType==\"absolute\") RVS.H[RVS.S.DaD.target.columnID].w_offset = RVS.H[RVS.S.DaD.target.columnID].w.offset();\r\n\t\t\t\t\tRVS.S.DaD.dropParentPos.x = RVS.H[RVS.S.DaD.target.columnID].w_offset.left;\r\n\t\t\t\t\tRVS.S.DaD.dropParentPos.y = RVS.H[RVS.S.DaD.target.columnID].w_offset.top;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Check the Closest Layer in Column if Hovering on Column but not on Layer\r\n\t\t\t\tif (RVS.S.DaD.draggedPosType!==\"absolute\" && RVS.S.DaD.targetBefore!==undefined && RVS.S.DaD.target.elementID===undefined && RVS.S.DaD.target.columnID!==undefined && RVS.S.DaD.target.columnID===RVS.S.DaD.targetBefore.columnID) {\r\n\r\n\t\t\t\t\tvar lInColumns = RVS.F.getLayerChildren({layerid:RVS.S.DaD.target.columnID}),\r\n\t\t\t\t\t\tin_same_vrange = [],\r\n\t\t\t\t\t\tbig_bottom = 0,\r\n\t\t\t\t\t\tsmallest_dist = 10000;\r\n\r\n\t\t\t\t\tfor (var i in lInColumns) {\r\n\t\t\t\t\t\tif(!lInColumns.hasOwnProperty(i) || ((RVS.S.DaD.target.columnType==\"group\" || RVS.S.DaD.target.columnType==\"column\") && (RVS.L[RVS.S.DaD.currentLayerId].position.position!=\"relative\" || RVS.L[i].position.position!==\"relative\"))) continue;\r\n\t\t\t\t\t\tif (i!=RVS.S.DaD.currentLayerId) {\r\n\t\t\t\t\t\t\tif (RVS.H[i].coor.bottom<b.y || RVS.H[i].coor.middle<=b.y && RVS.H[i].coor.bottom>=b.y) {\r\n\t\t\t\t\t\t\t\tin_same_vrange.push(i);\r\n\t\t\t\t\t\t\t\tbig_bottom = big_bottom<RVS.H[i].coor.bottom ? RVS.H[i].coor.bottom : big_bottom;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var k in in_same_vrange) {\r\n\t\t\t\t\t\tif(!in_same_vrange.hasOwnProperty(k)) continue;\r\n\t\t\t\t\t\tvar i = in_same_vrange[k];\r\n\t\t\t\t\t\tif (big_bottom<=RVS.H[i].coor.bottom) {\r\n\t\t\t\t\t\t\tif (smallest_dist>Math.abs(RVS.H[i].coor.center-b.x)) {\r\n\t\t\t\t\t\t\t\tsmallest_dist = Math.abs(RVS.H[i].coor.center-b.x);\r\n\t\t\t\t\t\t\t\tRVS.S.DaD.target.elementID = i;\r\n\t\t\t\t\t\t\t\tRVS.S.DaD.target.elementBefore = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else\r\n\t\t\t\t//CHECK IF THE HOVERED LAYER IS REALLY IN A COLUMN IF COLUMN ALSO HOVERED\r\n\t\t\t\tif (RVS.S.DaD.target.elementID!==undefined && RVS.S.DaD.target.columnID!==undefined)\r\n\t\t\t\t\tif (RVS.S.DaD.target.puid==-1) RVS.S.DaD.target.elementID = undefined;\r\n\r\n\r\n\t\t\t\tif (RVS.S.DaD.target!==undefined && RVS.S.DaD.lastRegisteredRow===RVS.S.DaD.target.rowID) {\r\n\t\t\t\t\tRVS.S.DaD.target.into = \"column\";\r\n\t\t\t\t\tRVS.S.DaD.toContainerID = RVS.S.DaD.target.columnID;\r\n\t\t\t\t\tRVS.S.DaD.toContainerType = RVS.S.DaD.target.columnType;\r\n\t\t\t\t\tclearTimeout(RVS.S.DaD.timerLeaveRow);\r\n\t\t\t\t\tRVS.S.DaD.timerLeaveRowStarted = false;\r\n\r\n\t\t\t\t\tdrawDroppingTarget();\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tRVS.S.DaD.toContainerType = \"root\";\r\n\t\t\t\t\tRVS.S.DaD.target.into = \"free\";\r\n\t\t\t\t\tRVS.S.DaD.toContainerID = -1;\r\n\t\t\t\t\tdrawDroppingTarget();\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// REGISTER ON NEW ROW IF WE STAY 0.6 SEC OVER A COLUMN\r\n\t\t\t\tif (RVS.S.DaD.target!==undefined && RVS.S.DaD.lastRegisteredRow!==RVS.S.DaD.target.rowID && RVS.S.DaD.target.rowID!==undefined)\r\n\t\t\t\t\tRVS.S.DaD.timer = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tRVS.S.DaD.lastRegisteredRow = RVS.S.DaD.target.rowID;\r\n\t\t\t\t\t\tif (RVS.S.DaD.target!==undefined && RVS.S.DaD.lastRegisteredRow===RVS.S.DaD.target.rowID) {\r\n\t\t\t\t\t\t\tif (RVS.S.DaD.lastRegisteredRowBefore && RVS.S.DaD.lastRegisteredRowBefore!==-1 && RVS.S.DaD.lastRegisteredRowBefore!==\"group\")\r\n\t\t\t\t\t\t\t\tRVS.H[RVS.S.DaD.lastRegisteredRowBefore].w[0].className = RVS.H[RVS.S.DaD.lastRegisteredRowBefore].w[0].className.split(\"dont_blur\").join(\"\").split(\"drop_over_layer\").join(\"\");\r\n\r\n\t\t\t\t\t\t\tclearTimeout(RVS.S.DaD.timerLeaveRow);\r\n\r\n\t\t\t\t\t\t\tRVS.S.DaD.timerLeaveRowStarted = false;\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.into = \"column\";\r\n\t\t\t\t\t\t\tRVS.S.DaD.toContainerID = RVS.S.DaD.target.columnID;\r\n\t\t\t\t\t\t\tRVS.S.DaD.toContainerType = RVS.S.DaD.target.columnType;\r\n\t\t\t\t\t\t\tdrawDroppingTarget();\r\n\t\t\t\t\t\t\tRVS.F.updateDraggedWidth(true);\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tRVS.S.DaD.target.into = \"free\";\r\n\t\t\t\t\t\t\tRVS.S.DaD.toContainerType = \"root\";\r\n\t\t\t\t\t\t\tRVS.S.DaD.toContainerID = -1;\r\n\t\t\t\t\t\t\tdrawDroppingTarget();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tRVS.S.DaD.lastRegisteredRowBefore = RVS.S.DaD.lastRegisteredRow;\r\n\t\t\t\t\t},250);\r\n\r\n\t\t\t\tif (RVS.S.DaD.timerLeaveRowStarted!==true && RVS.S.DaD.lastRegisteredRow!==-1 && RVS.S.DaD.target!==undefined && RVS.S.DaD.lastRegisteredRow!==RVS.S.DaD.target.rowID && RVS.S.DaD.target.rowID===undefined) {\r\n\t\t\t\t\tRVS.S.DaD.timerLeaveRowStarted = true;\r\n\t\t\t\t\tRVS.S.DaD.timerLeaveRow = setTimeout(function() {\r\n\t\t\t\t\t\tif (RVS.S.DaD.lastRegisteredRow!==-1 && RVS.S.DaD.lastRegisteredRow!==\"group\")\r\n\t\t\t\t\t\t\tRVS.H[RVS.S.DaD.lastRegisteredRow].w[0].className = RVS.H[RVS.S.DaD.lastRegisteredRow].w[0].className.split(\"dont_blur\").join(\"\").split(\"drop_over_layer\").join(\"\");\r\n\t\t\t\t\t\tRVS.S.DaD.lastRegisteredRow = -1;\r\n\t\t\t\t\t\tRVS.S.DaD.target.into = \"free\";\r\n\t\t\t\t\t\tRVS.S.DaD.toContainerType = \"root\";\r\n\t\t\t\t\t\tRVS.S.DaD.toContainerID = -1;\r\n\t\t\t\t\t\tRVS.S.DaD.timerLeaveRowStarted = false;\r\n\t\t\t\t\t\tdrawDroppingTarget();\r\n\t\t\t\t\t},500);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/*\r\n\tINIT THE MULTPILE LAYER SELECTOR BY DRAWING A RECTANGLE\r\n\t*/\r\n\tfunction initMultipleLayerSelector() {\r\n\t\t/* SELECT MORE THAN ONE LAYER BY DRAW */\r\n\t\tRVS.DOC.on('mousedown','#selectbydraw',function(event) {\r\n\t\t\tRVS.WIN.scrollTop(0);\r\n\t\t\tvar wrap = jQuery('#selectbydraw');\r\n\t\t\twrap.append('<div id=\"selectbydraw_box\"></div>');\r\n\t\t\tRVS.F.updateContentDeltas();\r\n\t\t\tRVS.S.click.y = event.clientY+RVS.S.rb_ScrollY;\r\n\t\t\tRVS.S.click.x = event.clientX+RVS.S.rb_ScrollX;\r\n\t\t\twindow.scrollCacheY = RVS.S.rb_ScrollY;\r\n\t\t\twindow.scrollCacheX = RVS.S.rb_ScrollX;\r\n\t\t\twindow.selectbydraw=1;\r\n\t\t\tRVS.F.selectLayers({overwrite:true});\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('mouseup','#selectbydraw',function(event) {\r\n\t\t\tjQuery('#selectbydraw').remove();\r\n\t\t\tjQuery('#select_by_cursor').trigger('click');\r\n\t\t\tRVS.F.selectLayers({});\r\n\t\t\twindow.selectbydraw=0;\r\n\t\t});\r\n\r\n\r\n\t\t// MULTIPLE SELECT LAYERS BY DRAWING A BOX\r\n\t\tRVS.DOC.on('mousemove','#selectbydraw',function(event) {\r\n\t\t\tif (window.selectbydraw===1) {\r\n\t\t\t\tvar wrap = jQuery('#selectbydraw');\r\n\t\t\t\tRVS.S.DaD.dragdelta.x =(event.clientX+(RVS.S.rb_ScrollX) - RVS.S.click.x);\r\n\t\t\t\tRVS.S.DaD.dragdelta.y =(event.clientY+(RVS.S.rb_ScrollY) - RVS.S.click.y);\r\n\r\n\r\n\t\t\t\tvar newPos = {\r\n\t\t\t\t\t\t\t\tx:RVS.S.click.x, //-RVS.S.layer_wrap_offset.x,\r\n\t\t\t\t\t\t\t\ty:RVS.S.click.y //-RVS.S.layer_wrap_offset.y\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\tnewPos.x = RVS.S.DaD.dragdelta.x<0 ? newPos.x + (RVS.S.DaD.dragdelta.x) : newPos.x;\r\n\t\t\t\tnewPos.y = RVS.S.DaD.dragdelta.y<0 ? newPos.y + (RVS.S.DaD.dragdelta.y) : newPos.y;\r\n\r\n\t\t\t\t//newPos.x = newPos.x -RVS.S.layer_grid_offset.left;\r\n\t\t\t\t//\tnewPos.y = newPos.y -RVS.S.layer_grid_offset.top;\r\n\t\t\t\tvar b = { top:newPos.y, left:newPos.x, right:(newPos.x+Math.abs(RVS.S.DaD.dragdelta.x)), bottom:(newPos.y+Math.abs(RVS.S.DaD.dragdelta.y))},\r\n\t\t\t\t\two = wrap.offset();\r\n\r\n\r\n\t\t\t\ttpGS.gsap.set('#selectbydraw_box',{top:newPos.y, left:newPos.x, width:Math.abs(RVS.S.DaD.dragdelta.x), height:Math.abs(RVS.S.DaD.dragdelta.y)});\r\n\r\n\r\n\t\t\t\tfor (var i in RVS.H) {\r\n\t\t\t\t\tif(!RVS.H.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tvar c = { top: (RVS.H[i].w.offset().top-wo.top),\r\n\t\t\t\t\t\t\t\t\tleft:(RVS.H[i].w.offset().left-wo.left)};\r\n\t\t\t\t\tc.right = c.left + RVS.H[i].w.width();\r\n\t\t\t\t\tc.bottom = c.top + RVS.H[i].w.height();\r\n\r\n\t\t\t\t\tif (RVS.L[i].visibility.locked || !RVS.L[i].visibility.visible)\r\n\t\t\t\t\t\tRVS.F.selectLayers({id:i,overwrite:false, action:\"remove\", ignoreUpdate:\"onlyhtml\" , ignoreFieldUpdates:true, ignoreModeChange:true});\r\n\t\t\t\t\telse\r\n\r\n\t\t\t\t\tif (((c.left>b.left && c.left<b.right && c.top>b.top && c.top <b.bottom) ||\r\n\t\t\t\t\t\t\t(c.right>b.left && c.right<b.right && c.top>b.top && c.top <b.bottom) ||\r\n\t\t\t\t\t\t\t(c.left>b.left && c.left<b.right && c.bottom>b.top && c.bottom <b.bottom) ||\r\n\t\t\t\t\t\t\t(c.right>b.left && c.right<b.right && c.bottom>b.top && c.bottom <b.bottom) ||\r\n\t\t\t\t\t\t\t(b.left>c.left && b.left<c.right && b.top>c.top && b.top <c.bottom) ||\r\n\t\t\t\t\t\t\t(b.right>c.left && b.right<c.right && b.top>c.top && b.top <c.bottom) ||\r\n\t\t\t\t\t\t\t(b.left>c.left && b.left<c.right && b.bottom>c.top && b.bottom <c.bottom) ||\r\n\t\t\t\t\t\t\t(b.right>c.left && b.right<c.right && b.bottom>c.top && b.bottom <c.bottom) ||\r\n\t\t\t\t\t\t\t(b.top<c.top && b.bottom>c.bottom && b.left>c.left && b.right<c.right) ||\r\n\t\t\t\t\t\t\t(b.top>c.top && b.bottom<c.bottom && b.left<c.left && b.right>c.right)\r\n\t\t\t\t\t\t ) && (\r\n\t\t\t\t\t\t\t!(b.left>c.left && b.right<c.right && b.top>c.top && b.bottom<c.bottom)\r\n\t\t\t\t\t\t )) {\r\n\t\t\t\t\t\tRVS.F.selectLayers({id:i,overwrite:false, action:\"add\", ignoreUpdate:\"onlyhtml\", ignoreFieldUpdates:true, ignoreModeChange:true});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tRVS.F.selectLayers({id:i,overwrite:false, action:\"remove\", ignoreUpdate:\"onlyhtml\" , ignoreFieldUpdates:true, ignoreModeChange:true});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/*\r\n\tFIGURE THE RIGHT COLUMN INPUT\r\n\tUsing 5+4+6 should create a 5/15+4/15+6/15\r\n\tUsing 3 should crearte 1/3+1/3+1/3\r\n\tUsing 1/5+3/5+1/5 shouuld stay as it is\r\n\tand all should be calculated and checked again 100%\r\n\t*/\r\n\tRVS.F.figureColumnSizes = function(obj) {\r\n\t\tif (obj.plain!==undefined) {\r\n\t\t\tobj.plain = RVS.F.sanitize_columns(obj.plain);\r\n\t\t\tobj.plain = obj.plain.length===0 || obj.plain===undefined || obj.plain===\"\" ? \"1/2+1/2\" : obj.plain;\r\n\t\t\tobj.cols = obj.temp = obj.plain.split(\"+\");\r\n\t\t}\r\n\r\n\r\n\t\tobj.summ = 0;\r\n\r\n\t\t// FIGURE THE INPUT\r\n\t\t//VALUES ARE DECIMALS\r\n\t\tif (obj.plain.indexOf(\"/\")===-1) {\r\n\t\t\tobj.cols = [];\r\n\t\t\tobj.plain = \"\";\r\n\t\t\t//Single DEC defined, we need to create a full\r\n\t\t\tif (obj.temp.length==1) {\r\n\t\t\t\tvar interval = parseInt(obj.temp[0],0);\r\n\t\t\t\tinterval = interval>9 ? \"9\" : interval;\r\n\t\t\t\tfor (var i=0; i<interval; i++) {\r\n\t\t\t\t\tif (obj.plain.length>0) obj.plain += \"+\";\r\n\t\t\t\t\tobj.plain += \"1/\"+interval;\r\n\t\t\t\t\tobj.cols.push(\"1/\"+interval);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t//Multiple DEC defined\r\n\t\t\t\tvar full = 0;\r\n\t\t\t\tobj.plain = \"\";\r\n\t\t\t\tfor (var i=0;i<obj.temp.length;i++) {\r\n\t\t\t\t\tif (obj.temp[i]!==\"\" && obj.temp[i].length>0)\r\n\t\t\t\t\t\tfull = full + parseInt(obj.temp[i],0);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i=0;i<obj.temp.length;i++) {\r\n\t\t\t\t\tif (obj.temp[i]!==\"\" && obj.temp[i].length>0) {\r\n\t\t\t\t\t\tif (obj.plain.length>0) obj.plain += \"+\";\r\n\t\t\t\t\t\tobj.plain += obj.temp[i]+\"/\"+full;\r\n\t\t\t\t\t\tobj.cols.push(obj.temp[i]+\"/\"+full);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar evals;\r\n\t\tfor (var c in obj.cols) {\r\n\t\t\tif(!obj.cols.hasOwnProperty(c)) continue;\r\n\t\t\tevals = RVS.F.convertFraction(obj.cols[c]);\r\n\t\t\tobj.summ += (100*evals);\r\n\t\t}\r\n\t\tif (Math.round(obj.summ)!==100)\r\n\t\t\tjQuery('#row_column_structure').addClass(\"badvalue\");\r\n\t\telse\r\n\t\t\tjQuery('#row_column_structure').removeClass(\"badvalue\");\r\n\t\treturn obj;\r\n\t};\r\n\r\n\t// FIX THE LAST COLUMN SIZE TO FILL GAP IN CASE COLUMN HAS BEEN DELETED\r\n\tRVS.F.fixColumnsInRows = function(_) {\r\n\t\tif (RVS.L[_.layerid]===undefined || RVS.L[_.layerid].type!==\"row\") return;\r\n\t\tvar cols = RVS.F.getColumnsInRow(_),\r\n\t\t\tsum = 0,\r\n\t\t\tcolsizes = [],\r\n\t\t\tevals;\r\n\r\n\t\tfor (var c in cols) {\r\n\t\t\tif(!cols.hasOwnProperty(c)) continue;\r\n\t\t\tevals = RVS.F.convertFraction(RVS.L[cols[c]].group.columnSize);\r\n\t\t\tsum = sum += (100*evals);\r\n\t\t\tcolsizes.push(RVS.L[cols[c]].group.columnSize.split(\"/\"));\r\n\t\t}\r\n\r\n\t\tvar a = cols.length;\r\n\t\tsum = sum===99.99999999999999 ? 100 : sum;\r\n\r\n\r\n\t\t//ROW IS NOT FILLED WITH COLUMNS 100%\r\n\r\n\t\tif (sum<100) {\r\n\t\t\tvar dif = 100 - sum,\r\n\t\t\t\tuid = cols[cols.length-1],\r\n\t\t\t\tcs = RVS.L[uid].group.columnSize,\r\n\t\t\t\tcn = cs.split(\"/\");\r\n\r\n\t\t\t\tevals = RVS.F.convertFraction(cs);\r\n\r\n\t\t\t\tvar v = (100*evals) / parseInt(cn[0],0),\r\n\t\t\t\t\taddon = dif / v,\r\n\t\t\t\t\tnewcs = parseInt(cn[0],0) + parseInt(addon,0) + \"/\" + cn[1],\r\n\t\t\t\t\tpre = RVS.S.slideId+\".layers.\"+uid+\".group.columnSize\";\r\n\r\n\t\t\t\tif (a===1)\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:pre,val:\"1/1\"});\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:pre,val:newcs});\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:uid});\r\n\t\t}\r\n\r\n\t\t// COLUMNS SIZES SUM BIGGER THAN 100%\r\n\t\tif (sum>100) {\r\n\r\n\r\n\t\t\t//Update Multiplicators\r\n\t\t\tfor (var c in cols) {\r\n\t\t\t\tif(!cols.hasOwnProperty(c)) continue;\r\n\t\t\t\tcolsizes[c][0] = 1;\r\n\t\t\t\tcolsizes[c][1] = a;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var c in cols) {\r\n\t\t\t\tif(!cols.hasOwnProperty(c)) continue;\r\n\t\t\t\tvar uid = cols[c],\r\n\t\t\t\t\tpre = RVS.S.slideId+\".layers.\"+uid+\".group.columnSize\";\r\n\t\t\t\tRVS.F.updateSliderObj({path:pre, val:colsizes[c][0]+\"/\"+colsizes[c][1]});\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:uid});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\t/********************************\r\n\t\tLOCK / UNLOCK LAYERS\r\n\t*********************************/\r\n\t// UPDATE UNLOCK LIST HERE\r\n\tRVS.F.checkLockedLayers = function() {\r\n\t\tlockedLayers = lockedLayers===undefined ? {wrap:jQuery('#locked_layers_list'), switch:jQuery('#layer_lock_iconswitch')} : lockedLayers;\r\n\t\tlockedLayers.default = lockedLayers.default===undefined ? lockedLayers.wrap[0].innerHTML : lockedLayers.default;\r\n\t\tlockedLayers.layers = [];\r\n\r\n\t\tfor (var lid in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(lid)) continue;\r\n\t\t\tif (RVS.L[lid].visibility!==undefined && RVS.L[lid].visibility.locked && jQuery.inArray(lid,lockedLayers.layers)===-1) lockedLayers.layers.push(lid);\r\n\t\t}\r\n\r\n\t\tvar ihtml = '';\r\n\t\tfor (var i in lockedLayers.layers) {\r\n\t\t\tif(!lockedLayers.layers.hasOwnProperty(i)) continue;\r\n\t\t\tvar uid = lockedLayers.layers[i];\r\n\t\t\tif (RVS.H[uid]===undefined || RVS.H[uid].w==undefined) continue;\r\n\t\t\tRVS.H[uid].w.addClass(\"_locked_\");\r\n\t\t\tvar el = document.getElementById('tllayerlist_element_'+RVS.S.slideId+'_'+uid);\r\n\t\t\tif (el.className.indexOf('_locked_')===-1) {\r\n\t\t\t\tel.className+=' _locked_';\r\n\t\t\t\twindow.firstLockTest = window.firstLockTest===undefined ? \"change\" : window.firstLockTest;\r\n\t\t\t}\r\n\t\t\tihtml += '<div data-uid=\"'+uid+'\" class=\"unlock_single_layer lockstep\"><i class=\"material-icons\">lock_open</i>'+RVS.L[uid].alias+'</div>';\r\n\t\t}\r\n\t\tihtml = lockedLayers.default + ihtml;\r\n\t\tlockedLayers.wrap[0].innerHTML = ihtml;\r\n\t};\r\n\r\n\r\n\r\n\t//TRIGGER LOCK/UNLOCK OF 1 SINGLE LAYER\r\n\tRVS.F.lockUnlockLayer = function(_) {\r\n\t\t_.val = _.val===undefined ? !RVS.L[_.uid].visibility.locked : _.val;\r\n\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+_.uid+\".\"+'visibility.locked',val:_.val});\r\n\t\tif (_.val===false && RVS.H[_.uid].w[0].className.indexOf(\"_locked_\")>=0) {\r\n\t\t\tRVS.H[_.uid].w.removeClass(\"_locked_\");\r\n\t\t\tvar el = document.getElementById('tllayerlist_element_'+RVS.S.slideId+'_'+_.uid);\r\n\t\t\tel.className = el.className.replace(' _locked_','');\r\n\t\t}\r\n\t};\r\n\r\n\t//TRIGGER LOCK/UNLOCK ON SELECTED LAYERS\r\n\tRVS.F.lockUnlockLayers = function(_) {\r\n\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\tvar lock = _!==undefined && _.val!==undefined ? _.val : !RVS.L[RVS.selLayers[lid]].visibility.locked;\r\n\t\t\tRVS.F.lockUnlockLayer({uid:RVS.selLayers[lid], val:lock});\r\n\t\t}\r\n\t\tRVS.F.checkLockedLayers();\r\n\t};\r\n\r\n\t/********************************\r\n\t\tSHOW / HIDE LAYERS\r\n\t*********************************/\r\n\t// UPDATE UNLOCK LIST HERE\r\n\tRVS.F.checkShowHideLayers = function() {\r\n\t\tvisibleLayers = visibleLayers===undefined ? {wrap:jQuery('#unvisible_layers_list'), switch:jQuery('#layer_visibility_iconswitch')} : visibleLayers;\r\n\t\tvisibleLayers.default = visibleLayers.default===undefined ? visibleLayers.wrap[0].innerHTML : visibleLayers.default;\r\n\t\tvisibleLayers.layers = [];\r\n\r\n\t\tfor (var lid in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(lid)) continue;\r\n\t\t\tif (RVS.L[lid].visibility!==undefined && RVS.L[lid].visibility.visible===false && jQuery.inArray(lid,visibleLayers.layers)===-1) visibleLayers.layers.push(lid);\r\n\t\t}\r\n\r\n\t\tvar ihtml = \"\";\r\n\t\tfor (var i in visibleLayers.layers) {\r\n\t\t\tif(!visibleLayers.layers.hasOwnProperty(i)) continue;\r\n\t\t\tvar uid = visibleLayers.layers[i];\r\n\t\t\tif (RVS.H[uid]===undefined || RVS.H[uid].w==undefined) continue;\r\n\t\t\tRVS.H[uid].w.addClass(\"_unvisible_\");\r\n\t\t\tvar el = document.getElementById('tllayerlist_element_'+RVS.S.slideId+'_'+uid);\r\n\t\t\tif (el.className.indexOf('_unvisible_')===-1) {\r\n\t\t\t\tel.className+=' _unvisible_';\r\n\t\t\t\twindow.firstLockTest = window.firstLockTest===undefined ? \"change\" : window.firstLockTest;\r\n\t\t\t}\r\n\t\t\tihtml += '<div data-uid=\"'+uid+'\" class=\"visible_single_layer visiblestep\"><i class=\"material-icons\">visibility</i>'+RVS.L[uid].alias+'</div>';\r\n\t\t}\r\n\r\n\t\tihtml = visibleLayers.default + ihtml;\r\n\t\tvisibleLayers.wrap[0].innerHTML = ihtml;\r\n\t};\r\n\r\n\t//TRIGGER SHOW/HIDE OF 1 SINGLE LAYER\r\n\tRVS.F.showHideLayer = function(_) {\r\n\t\tif (_.val===undefined) _.val = !RVS.L[_.uid].visibility.visible;\r\n\t\tRVS.F.updateSliderObj({ignoreBackup:_.ignoreBackup, path:RVS.S.slideId+\".layers.\"+_.uid+\".\"+'visibility.visible',val:_.val});\r\n\t\tif (_.val===true && RVS.H[_.uid].w[0].className.indexOf(\"_unvisible_\")>=0) {\r\n\t\t\tRVS.H[_.uid].w.removeClass(\"_unvisible_\");\r\n\t\t\tvar el = document.getElementById('tllayerlist_element_'+RVS.S.slideId+'_'+_.uid);\r\n\t\t\tel.className = el.className.replace(' _unvisible_','');\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t//TRIGGER SHOW/HIDE ON SELECTED LAYERS\r\n\tRVS.F.showHideLayers = function(_) {\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\tvar vis = _!==undefined && _.val!==undefined ? _.val : !RVS.L[RVS.selLayers[lid]].visibility.visible;\r\n\t\t\tRVS.F.showHideLayer({uid:RVS.selLayers[lid], val:vis});\r\n\t\t}\r\n\t\tRVS.F.checkShowHideLayers();\r\n\t};\r\n\r\n\t// UPDATE COLUMN BREAKPOINTS AND SYNC WITH PARRENT ELEMENT\r\n\tRVS.F.updateColumnBreaksChildren = function() {\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.L[i].type===\"column\")\r\n\t\t\t\tRVS.L[i].group.columnbreakat = RVS.L[RVS.L[i].group.puid].group.columnbreakat;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/*******************************+/\r\n\t// INTELLIGENT SIZE PROCESSES //\r\n\t/*******************************/\r\n\tRVS.F.isIntelligentInherited = function(uid,slide) {\r\n\t\treturn (slide!==undefined ? RVS.SLIDER[slide].layers[uid]!==undefined ? RVS.SLIDER[slide].layers[uid].behavior.intelligentInherit : false : RVS.L[uid]!==undefined ? RVS.L[uid].behavior.intelligentInherit : false);\r\n\t};\r\n\r\n\tRVS.F.inntelligentRespAttrExtend = function(a) {\r\n\t\trespAttrs.push(a);\r\n\t}\r\n\r\n\t//ENABLE THE OPTION INTELLIGENT INHERIT && SET VALUES AUTO CALCULATED\r\n\tRVS.F.setToIntelligentUpdate = function(reset) {\r\n\r\n\t\tRVS.F.updateScreenShrinks();\r\n\t\tvar txt = reset ? \"Reset All values to Intelligent Values\" : \"Enable Intelligent Inherit\";\r\n\t\tRVS.F.openBackupGroup({id:\"IntelligentInherit\",txt:txt,icon:\"important_devices\",lastkey:\"layer\"});\r\n\t\tfor (var li in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(li)) continue;\r\n\t\t\tfor (var r in respAttrs) {\r\n\t\t\t\tif(!respAttrs.hasOwnProperty(r)) continue;\r\n\t\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:respAttrs[r], index:\"v\", uid:RVS.selLayers[li], backup:true, notEdited:reset, reset:reset});\r\n\t\t\t}\r\n\t\t\tfor (var i=0;i<4;i++) {\r\n\t\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:\"padding\", index:i, uid:RVS.selLayers[li], backup:true, notEdited:reset, reset:reset});\r\n\t\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:\"margin\", index:i, uid:RVS.selLayers[li], backup:true, notEdited:reset, reset:reset});\r\n\t\t\t}\r\n\t\t\tRVS.F.updateSliderObj({ignoreResponsive:true, path:RVS.S.slideId+'.layers.'+RVS.selLayers[li]+'.behavior.intelligentInherit',val:true});\r\n\t\t}\r\n\t\tRVS.F.closeBackupGroup({id:\"IntelligentInherit\"});\r\n\t\tRVS.DOC.trigger('sliderSizeChanged');\r\n\t};\r\n\r\n\r\n\tRVS.F.intelligentUpdateValuesOnLayer = function(uid) {\r\n\t\tvar reset = true;\r\n\t\tif (!RVS.L[uid].behavior.intelligentInherit) return;\r\n\t\tfor (var r in respAttrs) {\r\n\t\t\tif(!respAttrs.hasOwnProperty(r)) continue;\r\n\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:respAttrs[r], index:\"v\", uid:uid, backup:false, notEdited:reset, reset:reset});\r\n\t\t}\r\n\t\tfor (var i=0;i<4;i++) {\r\n\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:\"padding\", index:i, uid:uid, backup:false, notEdited:reset, reset:reset});\r\n\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:\"margin\", index:i, uid:uid, backup:false, notEdited:reset, reset:reset});\r\n\t\t}\r\n\t};\r\n\r\n\t// UPDATE VALUES BASED ON THE LATEST SCREEN SIZES / RULES\r\n\tRVS.F.updateAllInheritedSize = function() {\r\n\t\tRVS.S.updatingAllInheritedSizeCounter = RVS.S.updatingAllInheritedSizeCounter===undefined ? 0 : RVS.S.updatingAllInheritedSizeCounter;\r\n\t\tif (RVS.S.updatingAllInheritedSize!==true && RVS.S.updatingAllInheritedSizeCounter>0) {\r\n\t\t\tRVS.S.updatingAllInheritedSize=true;\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\tRVS.F.updateScreenShrinks();\r\n\t\t\t\tfor (var li in RVS.L) {\r\n\t\t\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\t\t\tif (RVS.L[li].type!==\"zone\" && RVS.L[li].behavior.intelligentInherit) {\r\n\t\t\t\t\t\tfor (var r in respAttrs) {\r\n\t\t\t\t\t\t\tif(!respAttrs.hasOwnProperty(r)) continue;\r\n\t\t\t\t\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:respAttrs[r], index:\"v\", uid:RVS.L[li].uid});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i=0;i<4;i++) {\r\n\t\t\t\t\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:\"padding\", index:i, uid:RVS.L[li].uid});\r\n\t\t\t\t\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:\"margin\", index:i, uid:RVS.L[li].uid});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//RVS.F.drawHTMLLayer({uid:RVS.L[li].uid});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.drawHTMLLayers();\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"IntelligentInherit\"});\r\n\t\t\t\tRVS.S.updatingAllInheritedSize = false;\r\n\t\t\t});\r\n\t\t}\r\n\t\tRVS.S.updatingAllInheritedSizeCounter++;\r\n\t};\r\n\r\n\t//DISABLE THE OPTION INTELLIGENT INHERIT\r\n\tRVS.F.disableIntelligentUpdate = function() {\r\n\t\tRVS.F.openBackupGroup({id:\"DIntelligentInherit\",txt:\"Disable Intelligent Inherit\",icon:\"important_devices\",lastkey:\"layer\"});\r\n\t\tfor (var li in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(li)) continue;\r\n\t\t\tRVS.F.updateSliderObj({ignoreResponsive:true, path:RVS.S.slideId+'.layers.'+RVS.selLayers[li]+'.behavior.intelligentInherit',val:false});\r\n\t\t}\r\n\t\tRVS.F.closeBackupGroup({id:\"DIntelligentInherit\"});\r\n\t};\r\n\r\n\t// RESET ALL SIZE VALUES TO DESKTOP\r\n\tRVS.F.resetLayersDeviceSizesToDesktop = function() {\r\n\t\tRVS.F.openBackupGroup({id:\"desktopValueReset\",txt:\"Reset Values to Dekstop\",icon:\"important_devices\",lastkey:\"layer\"});\r\n\t\tfor (var li in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(li)) continue;\r\n\t\t\tfor (var r in respAttrs) {\r\n\t\t\t\tif(!respAttrs.hasOwnProperty(r)) continue;\r\n\t\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:respAttrs[r],  index:\"v\", uid:RVS.selLayers[li], backup:true, allToOne:true, notEdited:true});\r\n\t\t\t}\r\n\t\t\tfor (var i=0;i<4;i++) {\r\n\t\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:\"padding\",  index:i, uid:RVS.selLayers[li], backup:true, allToOne:true, notEdited:true});\r\n\t\t\t\tRVS.F.intelligentUpdate({calcShrink:false,key:\"margin\",  index:i, uid:RVS.selLayers[li], backup:true, allToOne:true, notEdited:true});\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.F.closeBackupGroup({id:\"desktopValueReset\"});\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[lid]});\r\n\t\t}\r\n\t};\r\n\r\n\t// RESET ALL TO NONE EDITED, AND RESHRINK VALUES\r\n\tRVS.F.resetIntelligentInherits = function() {\r\n\t\tRVS.F.setToIntelligentUpdate(true);\r\n\t};\r\n\r\n\t// INTERNAL FUNCTION TO CALCULATE NEW VALUES\r\n\tRVS.F.iUHelp = function(_) {\r\n\t\tvar v = _.l[RVS.V.sizes[0]].v,\r\n\t\t\tmu = 1;\r\n\t\tif (v===null) return;\r\n\t\tfor (var i=0;i<=3;i++) {\r\n\r\n\t\t\tvar s = !RVS.F.isNumeric(v) ? v.indexOf(\"%\")>=0 ? \"%\" :  \"px\" : \"\",\r\n\t\t\t\ttmp = v===\"inherit\" || (!RVS.F.isNumeric(v) && (v.indexOf(\"{\")>=0 || v.indexOf(\"[\")>=0 || jQuery.inArray(v,[\"top\",\"left\",\"bottom\",\"right\",\"center\",\"middle\"])>=0 || (v[0]=='#' && v[2]==\"/\" && v[4]=='#')));\r\n\t\t\tmu = _.iii ? RVS.S.shrink[RVS.V.sizes[i]] : mu;\r\n\r\n\t\t\tif (!_.allToOne)\r\n\t\t\t\tv =  _.reset || !_.l[RVS.V.sizes[i]].e ?\r\n\t\t\t\t\t_.shrink ?  tmp || v===\"auto\" || (!RVS.F.isNumeric(v) && v.indexOf(\"%\")>=0) ? v : parseInt(v,0) * mu  : v \t// IF SHRINK, CHECK IF AUTO & VALUE EXISTS. IF YES, DONT SHRINK\r\n\t\t\t\t\t: _.number && !tmp && v!== \"auto\" ? parseInt(_.l[RVS.V.sizes[i]].v,0) : _.l[RVS.V.sizes[i]].v;\t\t// IF NOT INDEXED, CHECK ONLY IF NMBER OR NOT\r\n\r\n\t\t\tvar wv = _.allToOne ? v : !_.reset && _.l[RVS.V.sizes[i]].e ?  _.l[RVS.V.sizes[i]].v :  _.number ? v===\"auto\" || tmp  ? v :_.minValue!==undefined ? Math.max(_.minValue,Math.round(parseInt(v,0))) : Math.round(parseInt(v,0)) : v;\r\n\t\t\ts = wv===\"auto\" || !RVS.F.isNumeric(wv) ? \"\" : s;\r\n\r\n\t\t\tif (_.backup) {\r\n\t\t\t\tRVS.F.updateSliderObj({ignoreResponsive:true, path:RVS.S.slideId+'.layers.'+_.p+RVS.V.sizes[i]+'.v',val:wv+s});\r\n\t\t\t\tif (_.notEdited) RVS.F.updateSliderObj({ignoreResponsive:true, path:RVS.S.slideId+'.layers.'+_.p+RVS.V.sizes[i]+'.e',val:false});\r\n\t\t\t} else {\r\n\t\t\t\t_.l[RVS.V.sizes[i]].v = wv+s;\r\n\t\t\t\tif (_.notEdited) _.l[RVS.V.sizes[i]].e = false;\r\n\t\t\t}\r\n\t\t\tv=wv+s;\r\n\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// INTELLIGENT UPDATE OF VALUES ON DIFFERENT DEVICES && RESET VALUES ON DEMAND && RESET EDITED  ON DEMAND\r\n\tRVS.F.intelligentUpdate = function(_) {\r\n\t\tif (_.calcShrink) RVS.F.updateScreenShrinks();\r\n\t\tif (RVS.S.respInfoBar.visible) RVS.F.showFieldResponsiveValues();\r\n\t\t_.iii = _.iii === undefined ? true : _.iii;\r\n\t\tvar L = _.slide!==undefined ? RVS.SLIDER[_.slide].layers : RVS.L;\r\n\t\tswitch (_.key) {\r\n\t\t\tcase \"viewPortArea\":\r\n\t\t\t\t_.l = RVS.SLIDER.settings.general.slideshow.viewPortArea;\r\n\t\t\t\t_.minValue = -1500;\r\n\t\t\t\t_.useSuffix = true;\r\n\t\t\t\t_.number = true;\r\n\t\t\t\t_.shrink = true;\r\n\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\tbreak;\r\n\t\t\tcase \"horizontal\":\r\n\t\t\tcase \"vertical\":\r\n\t\t\tcase \"y\":\r\n\t\t\tcase \"x\":\r\n\t\t\t\t_.l = L[_.uid].position[_.key];\r\n\t\t\t\t_.p = _.uid+'.position.'+_.key+'.';\r\n\t\t\t\tif (_.key===\"x\" || _.key===\"y\") {\r\n\t\t\t\t\t_.number = true;\r\n\t\t\t\t\t_.shrink = true;\r\n\t\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\t\t\t// Frames\r\n\t\t\t\t\tfor (var fi in L[_.uid].timeline.frames) {\r\n\r\n\t\t\t\t\t\tif(!L[_.uid].timeline.frames.hasOwnProperty(fi)) continue;\r\n\r\n\t\t\t\t\t\t_.l = L[_.uid].timeline.frames[fi].transform[_.key];\r\n\t\t\t\t\t\t_.p = _.uid+'.timeline.frames.'+fi+'.transform.'+_.key+'.';\r\n\t\t\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\t\t\t\t_.l = L[_.uid].timeline.frames[fi].mask[_.key];\r\n\t\t\t\t\t\t_.p = _.uid+'.timeline.frames.'+fi+'.mask.'+_.key+'.';\r\n\t\t\t\t\t\tRVS.F.iUHelp(_);\r\n\r\n\t\t\t\t\t\t_.l = L[_.uid].timeline.frames[fi].chars[_.key];\r\n\t\t\t\t\t\t_.p = _.uid+'.timeline.frames.'+fi+'.chars.'+_.key+'.';\r\n\t\t\t\t\t\tRVS.F.iUHelp(_);\r\n\r\n\t\t\t\t\t\t_.l = L[_.uid].timeline.frames[fi].words[_.key];\r\n\t\t\t\t\t\t_.p = _.uid+'.timeline.frames.'+fi+'.words.'+_.key+'.';\r\n\t\t\t\t\t\tRVS.F.iUHelp(_);\r\n\r\n\t\t\t\t\t\t_.l = L[_.uid].timeline.frames[fi].lines[_.key];\r\n\t\t\t\t\t\t_.p = _.uid+'.timeline.frames.'+fi+'.lines.'+_.key+'.';\r\n\t\t\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\tbreak;\r\n\t\t\tcase \"width\":\r\n\t\t\tcase \"height\":\r\n\t\t\t\t_.l = L[_.uid].size[_.key];\r\n\t\t\t\t_.p = _.uid+'.size.'+_.key+'.';\r\n\t\t\t\t_.minValue = 1;\r\n\t\t\t\t_.useSuffix = true;\r\n\t\t\t\t_.number = true;\r\n\t\t\t\t_.shrink = true;\r\n\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\tbreak;\r\n\t\t\tcase \"blur\":\r\n\t\t\tcase \"spread\":\r\n\t\t\tcase \"hoffset\":\r\n\t\t\tcase \"voffset\":\r\n\t\t\t\t_.l = L[_.uid].idle.boxShadow[_.key];\r\n\t\t\t\t_.p = _.uid+'.idle.boxShadow.'+_.key+'.';\r\n\t\t\t\t_.useSuffix = true;\r\n\t\t\t\t_.number = true;\r\n\t\t\t\t_.shrink = true;\r\n\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\t\tif (_.key !==\"spread\") {\r\n\t\t\t\t\t_.l = L[_.uid].idle.textShadow[_.key];\r\n\t\t\t\t\t_.p = _.uid+'.idle.textShadow.'+_.key+'.';\r\n\t\t\t\t\t_.useSuffix = true;\r\n\t\t\t\t\t_.number = true;\r\n\t\t\t\t\t_.shrink = true;\r\n\t\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\r\n\t\t\tcase \"margin\":\r\n\t\t\tcase \"padding\":\r\n\t\t\t\tif (_.index===\"v\") {\r\n\t\t\t\t\tfor (_.index=0;_.index<4;_.index++) {\r\n\t\t\t\t\t\t_.val = L[_.uid].idle[_.key][RVS.V.sizes[0]].v[_.index];\r\n\t\t\t\t\t\tvar v = parseInt(_.val,0),\r\n\t\t\t\t\t\t\tmu = 1;\r\n\t\t\t\t\t\tfor (var i=0;i<=3;i++) {\r\n\t\t\t\t\t\t\tmu = _.iii ? RVS.S.shrink[RVS.V.sizes[i]] : mu;\r\n\t\t\t\t\t\t\tv = _.allToOne ? v :  _.reset || !L[_.uid].idle[_.key][RVS.V.sizes[i]].e ? Math.round(v * mu) : parseInt(L[_.uid].idle[_.key][RVS.V.sizes[i]].v[_.index],0);\r\n\t\t\t\t\t\t\tif (_.backup) {\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({ignoreResponsive:true, path:RVS.S.slideId+'.layers.'+_.uid+'.idle.'+_.key+'.'+RVS.V.sizes[i]+'.v.'+_.index,val:v});\r\n\t\t\t\t\t\t\t\tif (_.notEdited) RVS.F.updateSliderObj({ignoreResponsive:true, path:RVS.S.slideId+'.layers.'+_.uid+'.idle.'+_.key+'.'+RVS.V.sizes[i]+'.e',val:false});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tL[_.uid].idle[_.key][RVS.V.sizes[i]].v[_.index] = v;\r\n\t\t\t\t\t\t\t\tif (_.notEdited) L[_.uid].idle[_.key][RVS.V.sizes[i]].e = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_.val = L[_.uid].idle[_.key][RVS.V.sizes[0]].v[_.index];\r\n\t\t\t\t\tvar v = parseInt(_.val,0),\r\n\t\t\t\t\t\tmu = 1;\r\n\t\t\t\t\tfor (var i=0;i<=3;i++) {\r\n\t\t\t\t\t\tmu = _.iii ? RVS.S.shrink[RVS.V.sizes[i]] : mu;\r\n\t\t\t\t\t\tv = _.allToOne ? v :  _.reset || !L[_.uid].idle[_.key][RVS.V.sizes[i]].e ? Math.round(v * mu) : parseInt(L[_.uid].idle[_.key][RVS.V.sizes[i]].v[_.index],0);\r\n\t\t\t\t\t\tif (_.backup) {\r\n\t\t\t\t\t\t\tRVS.F.updateSliderObj({ignoreResponsive:true, path:RVS.S.slideId+'.layers.'+_.uid+'.idle.'+_.key+'.'+RVS.V.sizes[i]+'.v.'+_.index,val:v});\r\n\t\t\t\t\t\t\tif (_.notEdited) RVS.F.updateSliderObj({ignoreResponsive:true, path:RVS.S.slideId+'.layers.'+_.uid+'.idle.'+_.key+'.'+RVS.V.sizes[i]+'.e',val:false});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tL[_.uid].idle[_.key][RVS.V.sizes[i]].v[_.index] = v;\r\n\t\t\t\t\t\t\tif (_.notEdited) L[_.uid].idle[_.key][RVS.V.sizes[i]].e = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"textAlign\":\r\n\t\t\tcase \"fontWeight\":\r\n\t\t\tcase \"borderStyle\":\r\n\t\t\tcase \"color\":\r\n\r\n\t\t\t\t_.l = _.key===\"color\" && L[_.uid].type===\"svg\" ? L[_.uid].idle.svg.color : L[_.uid].idle[_.key];\r\n\t\t\t\t_.p = _.key===\"color\" && L[_.uid].type===\"svg\" ? _.uid+'.idle.svg.color.' : _.uid+'.idle.'+_.key+'.';\r\n\r\n\r\n\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"lineHeight\":\r\n\t\t\tcase \"letterSpacing\":\r\n\t\t\tcase \"fontSize\":\r\n\t\t\t\t_.l = L[_.uid].idle[_.key];\r\n\r\n\t\t\t\t_.p = _.uid+'.idle.'+_.key+'.';\r\n\t\t\t\t_.number = true;\r\n\t\t\t\t_.shrink = true;\r\n\r\n\t\t\t\tif (_.key===\"fontSize\") _.minValue =4;\r\n\t\t\t\tif (_.key===\"lineHeight\") _.minValue =6;\r\n\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\tbreak;\r\n\t\t\tcase \"whiteSpace\":\r\n\t\t\t\t_.p = _.uid+'.idle.whiteSpace.';\r\n\t\t\t\t_.l = L[_.uid].idle[_.key];\r\n\t\t\t\tRVS.F.iUHelp(_);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tif (RVS.F.intelligentUpdateExtend!==undefined && RVS.F.intelligentUpdateExtend[L[_.uid].subtype]!==undefined) {\r\n\t\t\tRVS.F.intelligentUpdateExtend[L[_.uid].subtype](_,L);\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE GROUP LOCKS\r\n\t*/\r\n\tRVS.F.updateGroupLocks = function() {\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.L[i].group && RVS.L[i].type===\"group\" && RVS.H[i]!==undefined) {\r\n\t\t\t  if (RVS.L[i].group.locked)\r\n\t\t\t\tRVS.H[i].w.addClass('_group_locked_');\r\n\t\t\t  else\r\n\t\t\t  \tRVS.H[i].w.removeClass('_group_locked_');\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/********************************\r\n\tINIT LOCAL INPUT BOX FUNCTIONS\r\n\t*********************************/\r\n\tfunction initLocalInputBoxes() {\r\n\r\n\t\t// ReOrder the Layers and set the Correct zIndex Table\r\n\t\tRVS.DOC.on('addImportedLayers',function(e,a) {\r\n\t\t});\r\n\r\n\t\t// COPY HOVER SETTINGS ON ELEMENT IF NEEDED\r\n\t\tRVS.DOC.on('copyhoversettings',function(e,a) {\r\n\t\t\tif (RVS.selLayers.length===0) return;\r\n\t\t\tif (a!==undefined && a===\"checkiffirst\" && RVS.L[RVS.selLayers[0]].hover.copied===true) return;\r\n\t\t\tfor (var li in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(li)) continue;\r\n\t\t\t\tvar l = RVS.L[RVS.selLayers[li]];\r\n\t\t\t\tl.hover.copied = true;\r\n\t\t\t\tl.hover.backgroundColor = l.idle.backgroundColor;\r\n\t\t\t\tl.hover.borderColor = l.idle.borderColor;\r\n\t\t\t\tl.hover.color = l.idle.color[RVS.screen].v;\r\n\t\t\t\tl.hover.borderRadius = RVS.F.safeExtend(true,{},l.idle.borderRadius);\r\n\t\t\t\tl.hover.borderStyle = l.idle.borderStyle[RVS.screen].v;\r\n\t\t\t\tl.hover.borderWidth = l.idle.borderWidth.map(x=>x);\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[li]});\r\n\t\t\t}\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('#form_layer_hover'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\r\n\t\t});\r\n\r\n\t\t// CREATE LINEBREAK IN COLUMNS\r\n\t\tRVS.DOC.on('click','.add_linebreak',function() {\r\n\t\t\tvar list=new Array();\r\n\t\t\tRVS.F.openBackupGroup({id:\"addLineBreak\",txt:\"Add LineBreak\",icon:\"add\",lastkey:\"layer\"});\r\n\t\t\tfor (var i in RVS.selLayers) if(RVS.selLayers.hasOwnProperty(i)) list.push(RVS.selLayers[i])\r\n\r\n\t\t\tfor (i in list) {\r\n\t\t\t\tif(!list.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (RVS.L[list[i]].group.puid!==-1 && (RVS.L[RVS.L[list[i]].group.puid].type===\"column\" || RVS.L[RVS.L[list[i]].group.puid].type===\"group\")) {\r\n\t\t\t\t\tvar newID = RVS.F.addLayer({type:\"linebreak\",forceSelect:false, subtype:this.dataset.subtype, libevent:this.dataset.libevent, libfilters:this.dataset.libfilters});\r\n\t\t\t\t\t//firstadded = firstadded===undefined ? newID : firstadded;\r\n\t\t\t\t\tRVS.F.intelligentUpdateValuesOnLayer(newID);\r\n\t\t\t\t\tRVS.F.sortLayer({layer:\"\"+newID, target:this.dataset.pos, env:\"\"+list[i]});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//RVS.F.selectLayers({id:firstadded,overwrite:true, action:\"add\"});\r\n\t\t\tRVS.F.closeBackupGroup({id:\"addLineBreak\",txt:\"Add LineBreak\",icon:\"add\",lastkey:\"layer\"});\r\n\t\t});\r\n\r\n\t\t//SORT ROW LAYERS\r\n\t\tRVS.DOC.on('updateRowPosition',function(a,param) {\r\n\t\t\tif (param==undefined || param.val===undefined) return;\r\n\t\t\tfor (var i in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (RVS.L[RVS.selLayers[i]].type===\"row\") {\r\n\t\t\t\t\tif (RVS.L[RVS.selLayers[i]].group.puid!==param.val) RVS.F.sortLayer({layer:RVS.selLayers[i], target:\"zone\",env:param.val});\r\n\t\t\t\t} else\r\n\t\t\t\tif (RVS.L[RVS.selLayers[i]].type===\"column\") {\r\n\t\t\t\t\tvar rpuid = RVS.L[RVS.selLayers[i]].group.puid;\r\n\t\t\t\t\tif (RVS.L[rpuid].group.puid!==param.val) RVS.F.sortLayer({layer:rpuid, target:\"zone\",env:param.val});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// IMPORT LAYERS\r\n\t\tRVS.DOC.on('click','#import_layers',function() {\r\n\t\t\tRVS.F.openObjectLibrary({types:[\"modules\"],filter:\"all\", selected:[\"modules\"], context:\"editor\", depth:\"layers\", updatelist:false, staticalso:true, success:{layers:\"addImportedLayers\"}});\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#add_from_layerlibrary', function() {\r\n\t\t\tRVS.F.openObjectLibrary({types:[\"layers\"],filter:\"all\", selected:[\"layers\"], context:\"editor\", depth:\"grouplayers\", success:{layers:\"addLayerLibrary\"}});\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// CHANGE COL STRUCTURE -> UPDATE THE FIELD\r\n\t\tRVS.DOC.on('click','.colselector',function() {\r\n\t\t\tjQuery('#row_column_structure').val(this.dataset.col).change();\r\n\t\t});\r\n\r\n\t\t// TOGGLE GROUP LOCKS\r\n\t\tRVS.DOC.on('click','._group_lock_toggle_',function() {\r\n\t\t\tRVS.L[this.dataset.uid].group.locked = RVS.L[this.dataset.uid].group.locked===undefined ? true : !RVS.L[this.dataset.uid].group.locked;\r\n\t\t\tRVS.F.updateGroupLocks();\r\n\t\t});\r\n\r\n\t\t// UPDATED COL STRUCTURE FIELD -> SELECT CORRECR COL SELECTOR (IF EXISTS)\r\n\t\tRVS.DOC.on('update blur change','#row_column_structure',function() {\r\n\t\t\tif (this.value===undefined || this.value==\"\") return;\r\n\t\t\tvar c = this.value = RVS.F.figureColumnSizes({plain:this.value}).plain;\r\n\t\t\tjQuery('#colselector_wrap .colselector').each(function() {\r\n\t\t\t\tif (c == RVS.F.sanitize_columns(this.dataset.col))\r\n\t\t\t\t\tthis.className=\"colselector selected\";\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.className=\"colselector\";\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// ADD META TO THE CURRENT LAYER\r\n\t\tRVS.DOC.on('addMetaToLayer',function(e,param) {\r\n\t\t\twindow.metatarget = param.eventparam;\r\n\t\t\tRVS.F.RSDialog.create({modalid:'rbm_layer_metas', bgopacity:0.5});\r\n\t\t\tjQuery('#rbm_layer_metas .rbm_content').RSScroll({\r\n\t\t\t\twheelPropagation:false,\r\n\t\t\t\tsuppressScrollX:true\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// CLICK ON ACCORDION, SHOUD OPEN/CLOSE THE META DATAS ACCORDIONS\r\n\t\tRVS.DOC.on('click','.mdl_group_header',function() {\r\n\t\t\tvar group = jQuery(this).closest('.mdl_group');\r\n\t\t\tgroup.toggleClass(\"closed\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click', '#rbm_layer_metas .rbm_close',function() {\r\n\t\t\tRVS.F.RSDialog.close();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.mdl_group_member',function() {\r\n\t\t\tif (window.metatarget===\"layer\") {\r\n\t\t\t\tvar insertAt = jQuery('#ta_layertext')[0].selectionStart;\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"insertMeta\",txt:\"Insert Meta Data\",icon:\"note_add\"});\r\n\t\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\t\tvar uid = RVS.selLayers[lid],\r\n\t\t\t\t\t\tpre = RVS.S.slideId+\".layers.\"+uid+\".text\",\r\n\t\t\t\t\t\tfront = RVS.L[uid].text.substring(0, insertAt),\r\n\t\t\t\t\t\tback = RVS.L[uid].text.substring(insertAt, RVS.L[uid].text.length);\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:pre,val:front + this.dataset.val + back});\r\n\t\t\t\t\tRVS.F.redrawTextLayerInnerHTML(uid);\r\n\t\t\t\t\tRVS.F.drawHTMLLayer({uid:uid});\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"insertMeta\"});\r\n\t\t\t\tRVS.F.updateLayerInputFields();\r\n\t\t\t} else {\r\n\t\t\t\tvar inp = jQuery(window.metatarget),\r\n\t\t\t\t\tinsertAt = inp[0].selectionStart,\r\n\t\t\t\t\tnval = inp.val().substring(0,insertAt) + this.dataset.val + inp.val().substring(insertAt,inp.val().length);\r\n\t\t\t\tinp.val(nval).change();\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('checkforaudiolayer',RVS.F.checkForAudioLayer);\r\n\r\n\r\n\t\tRVS.DOC.on('click','.add_layer',function(e,ep) {\r\n\t\t\tif (this.id===\"import_layers\" || this.id===\"add_from_layerlibrary\") return;\r\n\t\t\tvar obj ={type:this.dataset.type,forceSelect:true, subtype:this.dataset.subtype, evt:this.dataset.evt, libevent:this.dataset.libevent, filter:this.dataset.filter, selected:this.dataset.selected, libfilters:this.dataset.libfilters, extensiongroup:this.dataset.extensiongroup, subsubtype:this.dataset.subsubtype};\r\n\t\t\t//In Case we want to add Layers from Object Library...\r\n\t\t\tif (this.dataset.fromobjlib!==undefined) {\r\n\t\t\t\tvar filters = obj.libfilters==undefined ? ['all'] : obj.libfilters.split(\",\");\r\n\t\t\t\tobj.filter = obj.filter==\"undefined\" || obj.filter==undefined ? \"all\" : obj.filter;\r\n\t\t\t\tobj.selected = [obj.selected==\"undefined\" || obj.selected==undefined ? filters[0] : obj.selected];\r\n\t\t\t\tobj.success = {custom:obj.libevent==undefined  ? obj.success : obj.libevent};\r\n\t\t\t\tobj.extension = obj.extensiongroup;\r\n\t\t\t\tRVS.F.openObjectLibrary(obj);\r\n\t\t\t} else {\r\n\t\t\t\tvar newID = RVS.F.addLayer(obj);\r\n\t\t\t\tRVS.F.intelligentUpdateValuesOnLayer(newID);\r\n\t\t\t\tRVS.F.selectLayers({id:newID,overwrite:true, action:\"add\"});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// DELETE LAYER ON CLICK\r\n\t\tRVS.DOC.on('click','#do_delete_layer',function(p) {\r\n\t\t\tRVS.DOC.trigger(\"do_delete_layer\");\r\n\t\t});\r\n\r\n\r\n\t\t// SELECT ALL LAYERS DUE LAYER LIST\r\n\t\tRVS.DOC.on('click','.all_layer_selector', function() {\r\n\t\t\tRVS.DOC.trigger(\"do_select_all_layer\");\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// DUPLICATE LAYER ON CLICK\r\n\t\tRVS.DOC.on('click','#do_duplicate_layer',function() {\r\n\t\t\tRVS.DOC.trigger(\"do_duplicate_layer\");\r\n\t\t});\r\n\r\n\t\t// COPY LAYERS ON CLICK\r\n\t\tRVS.DOC.on('click','#do_copy_layer',function() {\r\n\t\t\tRVS.DOC.trigger(\"do_copy_layer\");\r\n\t\t});\r\n\r\n\t\t// PASTE LAYERS ON CLICK\r\n\t\tRVS.DOC.on('click','#do_paste_layer',function() {\r\n\t\t\tRVS.DOC.trigger(\"do_paste_layer\");\r\n\t\t});\r\n\r\n\r\n\t\t//MOVE ZIndex in the Background of Layer\r\n\t\tRVS.DOC.on('mouseenter','#do_background_layer, #do_foreground_layer',function() {\r\n\t\t\tvar uid = RVS.selLayers[0];\r\n\t\t\tif (RVS.H[uid]!==undefined) tpGS.gsap.set(RVS.H[uid].w,{zIndex:RVS.L[uid].position.zIndex});\r\n\t\t});\r\n\t\tRVS.DOC.on('mouseleave','#do_background_layer, #do_foreground_layer',function() {\r\n\t\t\tRVS.F.updateSelectedHtmlLayers();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#do_background_layer', function() {\r\n\t\t\tvar uid = RVS.selLayers[0],\r\n\t\t\t\ttid = RVS.F.getLayerAfterZIndex(uid);\r\n\t\t\tswitch(RVS.L[uid].type) {\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\t\tif (tid!==undefined)\r\n\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"after\", env:tid,redraw:true});\r\n\t\t\t\t\telse\r\n\t\t\t\t\tif (RVS.L[uid].group.puid===\"top\")\r\n\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"zone\", env:\"middle\",redraw:true});\r\n\t\t\t\t\telse\r\n\t\t\t\t\tif (RVS.L[uid].group.puid===\"middle\")\r\n\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"zone\", env:\"bottom\",redraw:true});\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"column\":\r\n\t\t\t\t\tif (tid!==undefined)\r\n\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"after\", env:tid,redraw:true});\r\n\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (jQuery.inArray(tid,[\"top\",\"bottom\",\"middle\"])===-1 && RVS.L[uid].group!==undefined && RVS.L[uid].group.puid!==-1 && RVS.L[RVS.L[uid].group.puid].type===\"column\") {\r\n\t\t\t\t\t\ttid = RVS.F.getPrevNextLayerInOrder(uid,\"next\");\r\n\t\t\t\t\t\tif (tid!==uid)\r\n\t\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"after\",env:tid, redraw:true});\r\n\t\t\t\t\t} else\r\n\t\t\t\t\tif (tid!==undefined) {\r\n\t\t\t\t\t\ttid = tid===\"top\" || tid===\"middle\" ? \"bottom\" : tid;\r\n\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"after\", env:tid,redraw:true});\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//MOVE ZIndex in the Foreground of Layer\r\n\t\tRVS.DOC.on('click','#do_foreground_layer', function() {\r\n\t\t\tvar uid = RVS.selLayers[0],\r\n\t\t\t\ttid = RVS.F.getLayerBeforeZIndex(uid);\r\n\t\t\tswitch(RVS.L[uid].type) {\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\t\tif (tid!==undefined)\r\n\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"before\", env:tid,redraw:true});\r\n\t\t\t\t\telse\r\n\t\t\t\t\tif (RVS.L[uid].group.puid===\"bottom\")\r\n\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"zonebottom\", env:\"middle\",redraw:true});\r\n\t\t\t\t\telse\r\n\t\t\t\t\tif (RVS.L[uid].group.puid===\"middle\")\r\n\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"zonebottom\", env:\"top\",redraw:true});\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"column\":\r\n\t\t\t\t\tif (tid!==undefined)\r\n\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"before\", env:tid,redraw:true});\r\n\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (jQuery.inArray(tid,[\"top\",\"bottom\",\"middle\"])===-1 && RVS.L[uid].group!==undefined && RVS.L[uid].group.puid!==-1 && RVS.L[RVS.L[uid].group.puid].type===\"column\") {\r\n\t\t\t\t\t\ttid = RVS.F.getPrevNextLayerInOrder(uid,\"prev\");\r\n\t\t\t\t\t\tif (tid!==uid)\r\n\t\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"before\",env:tid, redraw:true});\r\n\r\n\t\t\t\t\t} else\r\n\t\t\t\t\tif (tid!==undefined) {\r\n\t\t\t\t\t\ttid = tid===\"bottom\" || tid===\"middle\" ? \"top\" : tid;\r\n\t\t\t\t\t\tRVS.F.sortLayer({layer:uid, target:\"before\", env:tid,redraw:true});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.F.clearKeyDowns = function() {\r\n\t\t\twindow.cmdctrldown = false;\r\n\t\t\twindow.shiftdown = false;\r\n\t\t\twindow.altdown = false;\r\n\t\t}\r\n\r\n\t\t// GET RID OF CACHES IN CASE WE FOCUS/BLUR THE WINDOW\r\n\t\twindow.addEventListener('blur', RVS.F.clearKeyDowns);\r\n\t\twindow.addEventListener('focus', RVS.F.clearKeyDowns);\r\n\r\n\t\t// KEYBOARD LISTENERS FOR LAYERS\r\n\t\tRVS.DOC.on('keydown',function(e) {\r\n\t\t\twindow.shiftdown = e.shiftKey;\r\n\t\t\twindow.altdown = e.altKey;\r\n\t\t\tvar noreturn = false,\r\n\t\t\t\tmultip = window.shiftdown ? 10 : 1;\r\n\t\t\tif ((RVS.S.OSName===\"MacOS\" && e.metaKey && !e.ctrlKey) || e.ctrlKey) window.cmdctrldown=true;\r\n\t\t\tif (RVS.S.builderHover && (RVS.S.inFocus===\"none\" || RVS.S.inFocus===undefined)) {\r\n\r\n\t\t\t\tif (window.shiftdown && !(RVS.eMode.top===\"layer\" && RVS.eMode.menu===\"#form_layer_animation\")) RVS.DOC.trigger('squareselection');\r\n\t\t\t\tif (window.cmdctrldown && !(RVS.eMode.top===\"layer\" && RVS.eMode.menu===\"#form_layer_animation\")) RVS.DOC.trigger('cursorselectionadd');\r\n\t\t\t\tif ((RVS.S.OSName===\"MacOS\" && e.metaKey && !e.ctrlKey) || e.ctrlKey)\r\n\t\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t\t\tcase 65: //a\r\n\t\t\t\t\t\t\tRVS.DOC.trigger(\"do_select_all_layer\");\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t\tcase 67: // c\r\n\t\t\t\t\t\t\tRVS.DOC.trigger(\"do_copy_layer\");\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 86: // v\r\n\t\t\t\t\t\t\tRVS.DOC.trigger(\"do_paste_layer\");\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 74: // j\r\n\t\t\t\t\t\t\tif (window.altdown!==true) RVS.DOC.trigger(\"do_duplicate_layer\");\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 79: //o\r\n\t\t\t\t\t\t\tvar radiobtn = document.getElementById(\"magnet_fr_sticky_inh\");\r\n\t\t\t\t\t\t\tradiobtn.checked = true;\r\n\t\t\t\t\t\t\tnoreturn = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 73: //i\r\n\t\t\t\t\t\t\tvar radiobtn = document.getElementById(\"magnet_fr_sticky\");\r\n\t\t\t\t\t\t\tradiobtn.checked = true;\r\n\t\t\t\t\t\t\tnoreturn = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 85: //u\r\n\t\t\t\t\t\t\tvar radiobtn = document.getElementById(\"magnet_fr_none\");\r\n\t\t\t\t\t\t\tradiobtn.checked = true;\r\n\t\t\t\t\t\t\tnoreturn = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t\tcase 8: RVS.DOC.trigger(\"do_delete_layer\");return false;\r\n\t\t\t\t\tcase 46: RVS.DOC.trigger(\"do_delete_layer\");return false;\r\n\t\t\t\t\tcase 37: RVS.F.moveLayerByKeys({x:-1*multip,y:0}); return false;\r\n\t\t\t\t\tcase 39: RVS.F.moveLayerByKeys({x:1*multip,y:0}); return false;\r\n\t\t\t\t\tcase 38: RVS.F.moveLayerByKeys({x:0,y:-1*multip});return false;\r\n\t\t\t\t\tcase 40: RVS.F.moveLayerByKeys({x:0,y:1*multip}); return false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (noreturn) {\r\n\t\t\t\t e.preventDefault();\r\n\t\t\t\t return false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('keyup',function(e) {\r\n\t\t\twindow.shiftdown = e.shiftKey;\r\n\t\t\twindow.altdown = e.altKey;\r\n\t\t\twindow.cmdctrldown = ((RVS.S.OSName===\"MacOS\" && e.metaKey && !e.ctrlKey) || e.ctrlKey);\r\n\r\n\t\t\tif (!window.shiftdown && !window.cmdctrldown) RVS.DOC.trigger('cursorselection');\r\n\r\n\t\t\tif (window.moveByKeyboard) {\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"LayerPosition\"});\r\n\t\t\t\twindow.moveByKeyboard = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\r\n\r\n\t\t/*HIDE, SHOW LAYER GROUPS */\r\n\t\tRVS.DOC.on('click','.ui_free_layers, .ui_top_row_layers',function() {\r\n\t\t\tvar f = jQuery(this);\r\n\t\t\tf.toggleClass(\"selected\");\r\n\t\t\tif (f.hasClass(\"selected\")) {\r\n\t\t\t\tjQuery('#rev_builder_inner').removeClass(this.dataset.realref);\r\n\t\t\t\tjQuery('#timeline').removeClass(this.dataset.ref);\r\n\t\t\t} else {\r\n\t\t\t\tjQuery('#rev_builder_inner').addClass(this.dataset.realref);\r\n\t\t\t\tjQuery('#timeline').addClass(this.dataset.ref);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/*SELECT LAYER ON CLICK ON LAYER*/\r\n\t\tRVS.DOC.on('click dblclick','._lc_',function(e) {\r\n\t\t\tif (RVS.S.inFocus!==undefined && RVS.S.inFocus!==\"none\" && RVS.S.inFocus.history &&  RVS.S.inFocus.value && RVS.S.inFocus.history!=RVS.S.inFocus.value) jQuery(RVS.S.inFocus).trigger(\"change\");\r\n\t\t\tif (e.type===\"click\" && RVS.S.clickedLayer === this.dataset.uid && (RVS.S.clickOnLayerTimer!==undefined && e.timeStamp-RVS.S.clickOnLayerTimer <800)) return false;\r\n\t\t\tRVS.S.clickOnLayerTimer = e.timeStamp;\r\n\t\t\tRVS.S.clickedLayer = this.dataset.uid;\r\n\t\t\tRVS.F.selectLayers({id:this.dataset.uid,overwrite:!window.RS_sel_and_add && !window.cmdctrldown, action:\"add\", ignoreUpdate:false});\r\n\t\t\t//Open Closest Group\r\n\t\t\tif (RVS.L[this.dataset.uid].group.puid !== -1 && RVS.L[this.dataset.uid].type!==\"row\") {\r\n\t\t\t\tvar puid = RVS.L[this.dataset.uid].group.puid;\r\n\t\t\t\tjQuery('#tllayerlist_element_'+RVS.S.slideId+'_'+puid).removeClass(\"collapsed\");\r\n\t\t\t\tif (RVS.L[puid].group.puid !== -1 && RVS.L[puid].type!==\"row\")\r\n\t\t\t\t\tjQuery('#tllayerlist_element_'+RVS.S.slideId+'_'+RVS.L[puid].group.puid).removeClass(\"collapsed\");\r\n\t\t\t\tRVS.F.saveCollapsedGroups();\r\n\t\t\t}\r\n\r\n\t\t\tif (e.type===\"dblclick\") {\r\n\t\t\t\tRVS.F.openSettings({forms:[\"*slidelayout**mode__slidecontent*#form_layer_content\"],uncollapse:true});\r\n\t\t\t\tswitch (RVS.L[this.dataset.uid].type) {\r\n\t\t\t\t\tcase \"text\":\r\n\t\t\t\t\tcase \"button\":\r\n\t\t\t\t\t\tjQuery('#ta_layertext').trigger('focus');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"image\":\r\n\t\t\t\t\t\tif (RVS.L[this.dataset.uid].media.imageLib===\"objectlibrary\")\r\n\t\t\t\t\t\t\tjQuery('#image_layer_object_library_button').trigger('click');\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tjQuery('#image_layer_media_library_button').trigger('click');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"svg\":\r\n\t\t\t\t\t\tRVS.F.openObjectLibrary({types:[\"fonticons\",\"svgs\",\"svgcustom\"],filter:\"all\", selected:[\"svgs\"], success:{icon:\"insertContentFromOL\"}});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Scroll in Position\r\n\t\t\tif (RVS.selLayers.length===1) RVS.F.layerListScrollable('scrollToSelected');\r\n\t\t\tRVS.DOC.trigger('layerselectioncomplete', [this]);\r\n\r\n\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t/*SELECT LAYER ON CLICK ON LAYER*/\r\n\t\tRVS.DOC.on('dblclick','._lc_',function() {\r\n\t\t\tRVS.F.selectLayers({id:this.dataset.uid,overwrite:!window.RS_sel_and_add, action:\"add\", ignoreUpdate:false});\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\r\n\r\n\t\tRVS.DOC.on('mouseenter','.layerlist_element',function() {\r\n\t\t\tif (jQuery.inArray(this.dataset.id,[\"top\",\"bottom\",\"middle\"])==-1) RVS.H[this.dataset.id].w.addClass(\"hoveredinlist\");\r\n\t\t});\r\n\t\tRVS.DOC.on('mouseleave','.layerlist_element',function() {\r\n\t\t\tif (jQuery.inArray(this.dataset.id,[\"top\",\"bottom\",\"middle\"])==-1) RVS.H[this.dataset.id].w.removeClass(\"hoveredinlist\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#unlock_all_layer',function() {\r\n\t\t\tfor (var i in RVS.L) if (RVS.L.hasOwnProperty(i)) {\r\n\t\t\t\tif (RVS.L[i].visibility!==undefined && RVS.L[i].visibility.locked) {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+i+\".\"+'visibility.locked',val:false});\r\n\t\t\t\t\tRVS.H[i].w.removeClass(\"_locked_\");\r\n\t\t\t\t\tvar el = document.getElementById('tllayerlist_element_'+RVS.S.slideId+'_'+i);\r\n\t\t\t\t\tel.className = el.className.replace(' _locked_','');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRVS.F.checkLockedLayers();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.unlock_single_layerm',function() {\r\n\t\t\tRVS.F.lockUnlockLayer({uid:this.dataset.uid, val:false});\r\n\t\t\tRVS.F.checkLockedLayers();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.layer_current_locked',function() {\r\n\t\t\tRVS.F.lockUnlockLayer({uid:this.dataset.uid});\r\n\t\t\tRVS.F.checkLockedLayers();\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('click','#visible_all_layer',function() {\r\n\t\t\tfor (var i in RVS.L) {\r\n\t\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (RVS.L[i].visibility!==undefined && RVS.L[i].visibility.visible===false) {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+i+\".\"+'visibility.visible',val:true});\r\n\t\t\t\t\tRVS.H[i].w.removeClass(\"_unvisible_\");\r\n\t\t\t\t\tvar el = document.getElementById('tllayerlist_element_'+RVS.S.slideId+'_'+i);\r\n\t\t\t\t\tel.className = el.className.replace(' _unvisible_','');\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRVS.F.checkShowHideLayers();\r\n\t\t});\r\n\r\n\r\n\t\t/* TOGGLE SELECTED LAYER LOCKS */\r\n\t\tRVS.DOC.on('click','#toggle_lock_layer',function() {\r\n\t\t\tRVS.F.lockUnlockLayers();\r\n\t\t});\r\n\r\n\t\t/* TOGGLE SELECTED LAYER VISIBILITY */\r\n\t\tRVS.DOC.on('click','#toggle_visible_layer',function() {\r\n\t\t\tRVS.F.showHideLayers({uid:this.dataset.uid});\r\n\t\t});\r\n\r\n\t\t/* SHOW / HIDE MARKING BOXES */\r\n\t\tRVS.DOC.on('click','#hide_highlight_boxes',function() {\r\n\t\t\tjQuery(this).toggleClass(\"selected\");\r\n\t\t\tRVS.C.theEditor.toggleClass(\"nohiglightboxes\");\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('click','.visible_single_layer',function() {\r\n\t\t\tRVS.F.showHideLayer({uid:this.dataset.uid, val:true});\r\n\t\t\tRVS.F.checkShowHideLayers();\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click',' .layer_current_visibility',function() {\r\n\t\t\tRVS.F.showHideLayer({uid:this.dataset.uid});\r\n\t\t\tRVS.F.checkShowHideLayers();\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mouseenter','.visible_single_layer',function(e) {RVS.H[this.dataset.uid].w.addClass(\"hoveredinlist\");});\r\n\t\tRVS.DOC.on('mouseleave','.visible_single_layer',function(e) {RVS.H[this.dataset.uid].w.removeClass(\"hoveredinlist\");});\r\n\r\n\t\tRVS.DOC.on('mouseenter','.unlock_single_layer',function(e) {RVS.H[this.dataset.uid].w.addClass(\"hoveredinlist\");});\r\n\t\tRVS.DOC.on('mouseleave','.unlock_single_layer',function(e) {RVS.H[this.dataset.uid].w.removeClass(\"hoveredinlist\");});\r\n\r\n\t}\r\n\r\n\t/*\r\n\tSELECT, DESELECT TOOLKIT\r\n\t*/\r\n\tfunction selectToolkit(_) {\r\n\t\tvar a = jQuery(_.id);\r\n\t\ta.addClass(\"selected\");\r\n\t\tjQuery(_.remove).removeClass(\"selected\");\r\n\t\tjQuery('#toolkit_selector_ph_icon').html(a[0].dataset.toolkiticon);\r\n\t\tjQuery('#toolkit_selector_ph_icon_sub').html(a[0].dataset.toolkiticonsub);\r\n\t\tif (_.multi && jQuery('#selectbydraw').length===0)\r\n\t\t\tjQuery('#rev_slider_ul').append('<div id=\"selectbydraw\"></div>');\r\n\t\telse\r\n\t\tif (!_.multi)\r\n\t\t\tjQuery('#selectbydraw').remove();\r\n\t\twindow.RS_sel_and_add = _.add;\r\n\t}\r\n\r\n\r\n\r\n\t/*\r\n\tINIT CUSTOM EVENT LISTENERS FOR TRIGGERING FUNCTIONS\r\n\t*/\r\n\tfunction initLocalListeners() {\r\n\r\n\r\n\t\t//Update Layer Position on Event\r\n\t\tRVS.DOC.on('updateLayerPosition',function() {\r\n\t\t\tfor (var si in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(si)) continue;\r\n\t\t\t\tvar i = RVS.selLayers[si];\r\n\t\t\t\tRVS.F.updateHTMLLayerPosition({ uid:i, updateValues:false,lhCwidth:RVS.H[i].c.outerWidth(), lhCheight:RVS.H[i].c.outerHeight()});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Intelligent Sizing Function\r\n\t\tRVS.DOC.on('intelligentInheritUpdate',function(e,par) {\r\n\t\t\tif (par!==undefined)\r\n\t\t\t\tif(par.val===true)\r\n\t\t\t\t\tRVS.F.setToIntelligentUpdate();\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.F.disableIntelligentUpdate();\r\n\t\t\tfor (var l in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(l)) continue;\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[l]});\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('inheritValuesFromDesktop',function(e,par) {\r\n\t\t\tRVS.F.resetLayersDeviceSizesToDesktop();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('resetIntelligentInherits',function(e,par) {\r\n\t\t\tRVS.F.resetIntelligentInherits();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateAllInheritedSize',function(e,par) {\r\n\t\t\tRVS.F.updateAllInheritedSize();\r\n\t\t});\r\n\r\n\r\n\r\n\t\t// REAL UPDATE OF COLUMN AND ROW STRUCTURES !!\r\n\t\tRVS.DOC.on('updateColumnStructure', function() {\r\n\t\t\tRVS.F.openBackupGroup({id:\"RowStructure\",txt:\"Change Row(s) Structure\",icon:\"view_column\"});\r\n\t\t\tvar newstructue = RVS.F.figureColumnSizes({plain:jQuery('#row_column_structure').val()});\r\n\r\n\t\t\tfor (var sl in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(sl)) continue;\r\n\t\t\t\tvar uid = RVS.L[RVS.selLayers[sl]].type===\"column\" ? RVS.L[RVS.selLayers[sl]].group.puid : RVS.selLayers[sl];\r\n\t\t\t\tif (RVS.L[uid].type===\"row\") {\r\n\r\n\t\t\t\t\tvar cols = RVS.F.getColumnsInRow({layerid:uid});\r\n\t\t\t\t\t// CHECK THE AMOUNT OF COLS IN NEW STRUCTURE\r\n\r\n\r\n\t\t\t\t\tif (cols.length>newstructue.cols.length) {\r\n\t\t\t\t\t\tvar lastknown = cols[newstructue.cols.length-1];\r\n\r\n\t\t\t\t\t\tfor (var i=cols.length-1;i>=newstructue.cols.length;i--) {\r\n\t\t\t\t\t\t\tRVS.F.deleteLayerfromLayers({layerid:cols[i], newpuid:lastknown});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//DELETE COLS\r\n\t\t\t\t\t} else\r\n\t\t\t\t\tif (cols.length<newstructue.cols.length) {\r\n\t\t\t\t\t\tfor (var i=cols.length;i<newstructue.cols.length;i++) {\r\n\t\t\t\t\t\t\tRVS.F.addLayerToLayers({type:\"column\", puid:uid, alias:\"column\"});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcols = RVS.F.getColumnsInRow({layerid:uid});\r\n\r\n\t\t\t\t\tfor (var i=0;i<cols.length;i++) {\r\n\t\t\t\t\t\tvar pre = RVS.S.slideId+\".layers.\"+cols[i]+\".group.columnSize\";\r\n\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre,val:newstructue.cols[i]});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRVS.F.closeBackupGroup({id:\"RowStructure\"});\r\n\t\t\tRVS.F.buildLayerLists({force:true});\r\n\t\t\tRVS.F.reOrderHTMLLayers();\r\n\r\n\t\t});\r\n\r\n\t\t// UPDATE THE LAYER ALIAS DUE THE SINGLE INPUT FIELD FOMR TOOLBAR\r\n\t\tRVS.DOC.on('updateLayerAliasFromSingleInput',function(e,param) {\r\n\t\t\tif (param.layerid==undefined) return;\r\n\t\t\tdocument.getElementById('layerlist_element_alias_'+RVS.S.slideId+'_'+param.layerid).innerHTML = RVS.L[param.layerid].alias;\r\n\t\t\tdocument.getElementById('layerlist_element_alias_input_'+RVS.S.slideId+'_'+param.layerid).value = RVS.L[param.layerid].alias;\r\n\t\t\tif (RVS.L[param.layerid].type===\"group\") document.getElementById('_group_head_title_'+RVS.S.slideId+'_'+param.layerid).innerHTML = RVS.L[param.layerid].alias;\r\n\t\t});\r\n\r\n\t\t// UPDATE THE LAYER ALIAS DUE THE SINGLE INPUT FIELD FOMR TOOLBAR\r\n\t\tRVS.DOC.on('udateAbsoluteRelativePosition',function(e,param) {\r\n\t\t\tif (param.layerid==undefined) return;\r\n\t\t});\r\n\r\n\t\t/* SELECT ALL LAYERS */\r\n\t\tRVS.DOC.on('do_select_all_layer', function() {\r\n\t\t\tfor (var i in RVS.L) {\r\n\t\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.F.selectLayers({id:i,overwrite:false, action:\"add\", ignoreUpdate:\"onlyhtml\", ignoreFieldUpdates:true, ignoreModeChange:true});\r\n\t\t\t}\r\n\t\t\tRVS.F.selectLayers({});\r\n\r\n\t\t});\r\n\r\n\t\t// DELETE SELECTED LAYERS\r\n\t\tRVS.DOC.on('do_delete_layer', function() {\r\n\t\t\tRVS.DOC.trigger('previewStopLayerAnimation');\r\n\t\t\tRVS.F.openBackupGroup({id:\"removeLayer\",txt:\"Remove Multiple Layers\",icon:\"delete\",lastkey:\"layer\"});\r\n\t\t\tvar deletelayers = [],\r\n\t\t\t\trows = [],\r\n\t\t\t\trowid;\r\n\r\n\t\t\t//Collect Layers to Delete (First Rows, Columns and Layers without Parrent) & Record Depending Rows\r\n\t\t\tfor (var sli in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(sli)) continue;\r\n\t\t\t\tvar uid = RVS.selLayers[sli];\r\n\r\n\t\t\t\tif (RVS.L[uid].group.puid==-1) deletelayers.push(uid);\r\n\t\t\t\telse\r\n\t\t\t\tif (RVS.L[uid].type===\"row\" || RVS.L[uid].type===\"column\") {\r\n\t\t\t\t\trowid = RVS.L[uid].type===\"row\" ? uid : RVS.L[uid].group.puid;\r\n\t\t\t\t\tif (jQuery.inArray(rowid,rows)===-1) rows.push(rowid);\r\n\t\t\t\t\tdeletelayers.push(uid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var sli in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(sli)) continue;\r\n\t\t\t\tvar uid = RVS.selLayers[sli];\r\n\t\t\t\t//Ignore Elements within other Elements\r\n\t\t\t\tif (RVS.L[uid].group.puid!==-1 && RVS.L[uid].type!==\"column\" && RVS.L[uid].type!==\"row\")   {\r\n\t\t\t\t\tvar puid = RVS.L[RVS.L[uid].group.puid].type===\"column\" ? RVS.L[RVS.L[uid].group.puid].group.puid : RVS.L[uid].group.puid;\r\n\t\t\t\t\tif (jQuery.inArray(puid,deletelayers)===-1) deletelayers.push(uid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//NOW WE CAN REMOVE THE LAYERS\r\n\t\t\tfor (var i in deletelayers) {\r\n\t\t\t\tif(!deletelayers.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.F.deleteLayerfromLayers({layerid:deletelayers[i]});\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t//UPDATE ROWS (Extend, Remove Sizes)\r\n\t\t\tif (rows.length>0) {\r\n\t\t\t\tfor (var i in rows) {\r\n\t\t\t\t\tif(!rows.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tif (RVS.L[rows[i]]!==undefined) {\r\n\t\t\t\t\t\t//Check if Row has still any Elements !?\r\n\t\t\t\t\t\tif (RVS.F.getColumnsInRow({layerid:rows[i]}).length===0)\r\n\t\t\t\t\t\t\tRVS.F.deleteLayerfromLayers({layerid:rows[i]});\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tRVS.F.fixColumnsInRows({layerid:rows[i]});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.closeBackupGroup({id:\"removeLayer\"});\r\n\t\t\tRVS.F.buildLayerLists({force:true});\r\n\r\n\t\t});\r\n\r\n\t\t/*Column Break has Been Changed ! */\r\n\t\tRVS.DOC.on('updateColumnBreak',function(e,p) {\r\n\t\t\tRVS.F.openBackupGroup({id:\"ColumnBreak\",txt:\"Row Breakpoint\",icon:\"layers\",lastkey:\"layer\"});\r\n\t\t\tvar rows = [];\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tif  (RVS.L[RVS.selLayers[lid]].type===\"row\" || RVS.L[RVS.selLayers[lid]].type===\"column\") {\r\n\t\t\t\t\t/* var l = RVS.L[RVS.selLayers[lid]], */\r\n\t\t\t\t\tvar rowid = RVS.L[RVS.selLayers[lid]].type===\"column\" ? RVS.L[RVS.selLayers[lid]].group.puid : RVS.selLayers[lid],\r\n\t\t\t\t\t\tpre = RVS.S.slideId+\".layers.\"+rowid+\".\";\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'group.columnbreakat',val:p.val});\r\n\t\t\t\t\t\trows.push(rowid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRVS.F.closeBackupGroup({id:\"ColumnBreak\"});\r\n\t\t\tfor (var r in rows) {\r\n\t\t\t\tif(!rows.hasOwnProperty(r)) continue;\r\n\t\t\t\tvar cols = RVS.F.getColumnsInRow({layerid:rows[r]});\r\n\t\t\t\tfor (var c in cols) {\r\n\t\t\t\t\tif(!cols.hasOwnProperty(c)) continue;\r\n\t\t\t\t\tRVS.L[cols[c]].group.columnbreakat = p.val;\r\n\t\t\t\t\tRVS.F.drawHTMLLayer({uid:cols[c]});\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:rows[r]});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t/* INIT THE SELECT LAYERS PER DRAW*/\r\n\t\tRVS.DOC.on('squareselection',function() {\r\n\t\t\tselectToolkit({id:'#select_by_draw', remove:\"#select_by_cursor, #select_by_cursor_add\", add:false, multi:true});\r\n\t\t});\r\n\r\n\t\t/* INIT THE CURSOR SELECTIO*/\r\n\t\tRVS.DOC.on('cursorselection',function() {\r\n\t\t\tselectToolkit({id:'#select_by_cursor', remove:\"#select_by_draw, #select_by_cursor_add\", add:false, multi:false});\r\n\t\t});\r\n\t\t/* INIT THE CURSOR SELECTIO*/\r\n\t\tRVS.DOC.on('cursorselectionadd',function() {\r\n\t\t\tselectToolkit({id:'#select_by_cursor_add', remove:\"#select_by_draw, #select_by_cursor\", add:true,multi:false});\r\n\t\t});\r\n\r\n\r\n\t\t/* LOCK LAYER FROM EDIT */\r\n\t\tRVS.DOC.on('lockLayer',function(e,ds) {\r\n\t\t\tRVS.F.lockUnlockLayers(ds);\r\n\t\t});\r\n\r\n\r\n\r\n\t\t/* SHOW/HIDE LAYER FROM EDIT */\r\n\t\tRVS.DOC.on('showHideLayer',function(e,ds) {\r\n\t\t\tRVS.F.showHideLayers(ds);\r\n\t\t});\r\n\r\n\r\n\t\t/*UPDATE LAYER FRAME TO CUSTOM IF ANY VALUE CHANGED*/\r\n\t\tRVS.DOC.on('frameAnimToCustom',function(e,ds) {\r\n\t\t});\r\n\r\n\t\t/***** VIDEO FUNCTIONS */\r\n\t\t// Get VIMEO Thumb\r\n\r\n\t\tRVS.DOC.on('click','.getLayerImageFromVimeo',function() {\r\n\t\t\tjQuery.ajax({\r\n\t\t        type:'GET',\r\n\t\t        url: \"//vimeo.com/api/v2/video/\" + jQuery('#layer_youtubevimeo_id').val() + \".json\",\r\n\t\t        success: function(data){\r\n              jQuery('#layer_video_poster').val(data[0].thumbnail_large).trigger(\"change\");\r\n\t\t        }\r\n\t\t    });\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.getLayerImageFromYouTube',function() {\r\n\t\t\tvar youtubeid = jQuery('#layer_youtubevimeo_id').val();\r\n\t\t\tjQuery('#layer_video_poster').val(location.protocol+\"//img.youtube.com/vi/\"+youtubeid+\"/maxresdefault.jpg\").trigger(\"change\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.removeLayerPoster',function() { // KRIKI, IMAGE, POSTER ID CHANGE BACK\r\n\t\t\tRVS.F.openBackupGroup({id:\"VideoPosterChange\",txt:\"Change Video Poster\",icon:\"layers\",lastkey:\"layer\"});\r\n\t\t\tjQuery('#layer_video_poster').val(RVS.ENV.img_ph_url).trigger(\"change\");\r\n\t\t\tRVS.F.closeBackupGroup({id:\"VideoPosterChange\"});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.resetVideoArguments',function() {\r\n\t\t\tvar type = jQuery('input[name=\"layer_video_type\"]:checked').val();\r\n\t\t\tvar newarg = type===\"vimeo\" ? RVS.ENV.vimeoargs: type===\"youtube\" ? RVS.ENV.youtubeargs : \"\";\r\n\t\t\tjQuery('#layer_video_arg').val(newarg).trigger(\"change\");\r\n\t\t});\r\n\r\n\t\t// UPDATE VIDEO TYPE // VIDEO ID\r\n\t\tRVS.DOC.on('checkVideoID',function(e,par) {\r\n\t\t\tif (par!==undefined && par.val!==undefined) {\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"VideoTypeChange\",txt:\"Change Video Type\",icon:\"layers\",lastkey:\"layer\"});\r\n\t\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\t\t_.uid = RVS.selLayers[lid];\r\n\t\t\t\t\t_.l = RVS.L[_.uid];\r\n\t\t\t\t\t_.pre = RVS.S.slideId+\".layers.\"+_.uid+\".\";\r\n\r\n\t\t\t\t\tif (par.val===\"vimeo\") {\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'media.args',val:RVS.ENV.vimeoargs});\r\n\t\t\t\t\t\tjQuery('#layer_video_arg').val(RVS.ENV.vimeoargs);\r\n\t\t\t\t\t} else\r\n\t\t\t\t\tif (par.val===\"youtube\") {\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'media.args',val:RVS.ENV.youtubeargs});\r\n\t\t\t\t\t\tjQuery('#layer_video_arg').val(RVS.ENV.youtubeargs);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'media.mediaType',val:par.val});\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"VideoTypeChange\"});\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar type = jQuery('input[name=\"layer_video_type\"]:checked').val(),\r\n\t\t\t\tvideoid = jQuery('#layer_youtubevimeo_id').val();\r\n\r\n\t\t\tif (type===\"vimeo\") RVS.F.checkVimeoID({id:videoid});\r\n\t\t\tif (type===\"youtube\") RVS.F.checkYouTubeID({id:videoid});\r\n\t\t});\r\n\r\n\r\n\t\tRVS.F.notChildrenOfList = function(pid,l,_SRC,duplicate) {\r\n\t\t\t// pid = Parent ID of Layer\r\n\t\t\t// l = The List to check against\r\n\t\t\t// _SRC = In which Environment to get Attributes\r\n\t\t\t// Not on the List, and not children of direct parent, or parents parent\r\n\t\t\tif ( _SRC[pid]==undefined || (\"\"+pid==\"-1\")) return true;\r\n\t\t\tif (jQuery.inArray((\"\"+pid),l)!=-1) return false;\r\n\t\t\tif ((\"\"+_SRC[pid].group.puid)!==\"-1\") return jQuery.inArray((\"\"+_SRC[pid].group.puid),l)==-1;\r\n\t\t\telse return duplicate ? true : false;\r\n\t\t}\r\n\r\n\t\t/* LAYER DUPLICATE LISTENER */\r\n\t\tRVS.DOC.on('do_duplicate_layer',function() {\r\n\r\n\t\t\tvar duplicateLayers = [],\r\n\t\t\t\tduplicateLayersID = [],\r\n\t\t\t\tnewLayerIDs = [],\r\n\t\t\t\trows = [];\r\n\r\n\t\t\tfor (var sli in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(sli)) continue;\r\n\t\t\t\tvar uid = RVS.selLayers[sli];\r\n\t\t\t\tduplicateLayers.push({type:RVS.L[uid].type, duplicateId:uid, ignoreBackupGroup:true, ignoreLayerList:true , ignoreOrderHTMLLayers:true});\r\n\t\t\t\tduplicateLayersID.push(\"\"+uid);\r\n\t\t\t\tif (RVS.L[uid].type===\"column\" && jQuery.inArray(RVS.L[uid].group.puid,rows)===-1) rows.push(RVS.L[uid].group.puid);\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.openBackupGroup({id:\"addLayer\",txt:\"Duplicate Layers\",icon:\"layers\",lastkey:\"layer\"});\r\n\r\n\t\t\t// Create new Layers, ignore children of elements which are also getting duplicated\r\n\t\t\tfor (var i in duplicateLayers) {\r\n\t\t\t\tif(!duplicateLayers.hasOwnProperty(i) || !RVS.F.notChildrenOfList(RVS.L[duplicateLayersID[i]].group.puid,duplicateLayersID,RVS.L,true)) continue;\r\n\t\t\t\tnewLayerIDs.push(RVS.F.addLayer(duplicateLayers[i],true));\r\n\t\t\t}\r\n\r\n\t\t\t//UPDATE ROWS (Extend, Remove Sizes)\r\n\t\t\tif (rows.length>0) {\r\n\t\t\t\tfor (var i in rows) {\r\n\t\t\t\t\tif(!rows.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tif (RVS.L[rows[i]]!==undefined)\r\n\t\t\t\t\t\tRVS.F.fixColumnsInRows({layerid:rows[i]});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.buildLayerLists({force:true, ignoreRebuildHTML:true});\r\n\r\n\t\t\tRVS.F.reOrderHTMLLayers();\r\n\r\n\t\t\tfor (var i in newLayerIDs) {\r\n\t\t\t\tif(!newLayerIDs.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.F.updateDuplicatedLayerActionDependencies(newLayerIDs[i],duplicateLayersID[i]);\r\n\t\t\t\tRVS.F.selectLayers({id:newLayerIDs[i],overwrite:false, action:\"add\", ignoreUpdate:true, ignoreFieldUpdates:true});\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.selectedLayersVisualUpdate();\r\n\t\t\tRVS.F.updateSelectedHtmlLayers();\r\n\t\t\tRVS.F.updateZIndexTable();\r\n\t\t\tRVS.F.closeBackupGroup({id:\"addLayer\"});\r\n\t\t\tRVS.DOC.trigger('selectLayersDone');\r\n\t\t});\r\n\r\n\t\t/* LAYER COPY LISTENER */\r\n\t\tRVS.DOC.on('do_copy_layer',function() {\r\n\t\t\twindow.copyPasteLayers = {amount:0, layers:{}};\r\n\t\t\tvar copyLayers = [],\r\n\t\t\t\tcopyLayersID = [];\r\n\r\n\r\n\t\t\tfor (var sli in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(sli)) continue;\r\n\t\t\t\tvar uid = RVS.selLayers[sli];\r\n                copyLayers.push({type:RVS.L[uid].type, duplicateId:uid, ignoreBackupGroup:true, ignoreLayerList:true , ignoreOrderHTMLLayers:true, copyPaste:\"copy\", deep:RVS.F.isDeeperGroup(uid)});\r\n                copyLayersID.push(uid);\r\n\t\t\t}\r\n\r\n\t\t\t// CHECK MULTPILE DUPLICATES, LIKE COLUMN IN ROW WHICH ALREADY IN DUPLICATE MODE. (Parrents Check)\r\n\t\t\tfor (var i in copyLayers) {\r\n\t\t\t\tif(!copyLayers.hasOwnProperty(i)) continue;\r\n                RVS.F.addLayer(copyLayers[i],true);\r\n            }\r\n\t\t\tjQuery('#do_paste_layer').removeClass(\"disabled\");\r\n\t\t});\r\n\r\n\t\t/* LAYER PASTE LISTENER */\r\n\t\tRVS.DOC.on('do_paste_layer', function() {\r\n\t\t\tvar pasteLayers = [],\r\n                tempList = [],\r\n\t\t\t\tpasteLayersID = [],\r\n\t\t\t\tnewLayerIDs = [],\r\n                selG = RVS.F.getFirstSelectedType(\"group\"),\r\n                selC = RVS.F.getFirstSelectedType(\"column\"),\r\n                insertInto = selG==false ? selC==false ? RVS.F.getFirstSelectedType(\"row\") : selC :  selG,\r\n                rows = [];\r\n\r\n\t\t\t//CACHE THE COPY PASTE STRUCTURE\r\n            window.backupCopyPaste = {...window.copyPasteLayers.layers};\r\n\r\n\t\t\t//CHECK IF CURRENTLY ROWS, COLUMNS EXISTS TO INCLUDE THE ITEMS INTO\r\n            insertInto = insertInto==false ? \"-1\" : RVS.L[insertInto]!==undefined && RVS.L[insertInto].type==\"row\" ? RVS.F.getColumnsInRow({layerid:insertInto, type:'column'})[0] : insertInto;\r\n            insertInto = insertInto==undefined || insertInto==false || RVS.L[insertInto]==undefined ? \"-1\" : insertInto;\r\n\r\n\t\t\t//CHECK COPIED COLUMNS WITHOUT PARRENT CONTAINERS\r\n\t\t\tfor (var sli in window.copyPasteLayers.layers) {\r\n\t\t\t\tif(!window.copyPasteLayers.layers.hasOwnProperty(sli)) continue;\r\n                var uid = window.copyPasteLayers.layers[sli].uid,\r\n                    puid = window.copyPasteLayers.layers[sli].group.puid,\r\n                    deeper = RVS.F.isDeeperGroup(window.copyPasteLayers.layers[sli]);\r\n\r\n                tempList.push(\"\"+uid); //Need to push since it skip the rest\r\n\r\n                //Having layers on root Level and inserting them to root can be skipped\r\n                if (insertInto==\"-1\" && (\"\"+puid==\"-1\" || window.copyPasteLayers.layers[puid]!==undefined)) continue;\r\n\r\n                switch (window.copyPasteLayers.layers[sli].type) {\r\n                    case \"group\":\r\n                      if (deeper || insertInto==\"-1\") puid = \"-1\";  //Deeper Construction must go to root\r\n                      else\r\n                      if (RVS.L[insertInto].type==\"column\") puid = insertInto; // Not Deeper Target Column can be addressed\r\n                      else if (RVS.L[insertInto].type==\"group\" && (\"\"+RVS.L[insertInto].group.puid==\"-1\"))\r\n                          window.copyPasteLayers.layers[sli].copiedFromUid == insertInto && insertInto!==\"-1\" ? RVS.L[insertInto].group.puid : insertInto // Into Group only if Parent on root and copied is not equal with insert into\r\n                    break;\r\n\r\n                case \"column\":\r\n\t\t\t\t\t\tif (window.copyPasteLayers.layers[puid]===undefined || window.copyPasteLayers.layers[puid].type!==\"row\") {\r\n                            puid = insertInto!==false && insertInto!==\"-1\" && RVS.L[insertInto].type==\"row\" ? insertInto : RVS.F.addLayerToLayers({type:\"row\",alias:\"row\",buildHTMLLayer:false,copyPaste:\"copy\"});\r\n                            if(puid!==-1 && jQuery.inArray(puid,rows)===-1) rows.push(puid);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"group\":\r\n\t\t\t\t\tcase \"row\":\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n                        //Should have Parrent, But it is not Existing, Not Column and not Group in 2nd Level\r\n                        if (puid>=0 && puid<=5000 && window.copyPasteLayers.layers[puid]===undefined)\r\n                            puid = insertInto;\r\n                        else\r\n                        puid = \"\"+puid===\"-1\" && insertInto!==\"-1\" ? insertInto : puid;\r\n                        break;\r\n                    }\r\n\r\n                    if (RVS.L[puid]!==undefined && RVS.L[puid].type==\"column\" && (window.copyPasteLayers.layers[sli].group.puid==\"-1\" || (window.copyPasteLayers.layers[window.copyPasteLayers.layers[sli].group.puid]==undefined || window.copyPasteLayers.layers[window.copyPasteLayers.layers[sli].group.puid].type!==\"column\"))) {\r\n                        for (var device in RVS.V.sizes) {\r\n\t\t\t\t\t\t\t\tif(!RVS.V.sizes.hasOwnProperty(device)) continue;\r\n\t\t\t\t\t\t\t\tvar s = RVS.V.sizes[device];\r\n                                window.copyPasteLayers.layers[sli].position.position = \"relative\";\r\n                                window.copyPasteLayers.layers[sli].position.horizontal[s].v = \"center\";\r\n\t\t\t\t\t\t\t\twindow.copyPasteLayers.layers[sli].position.vertical[s].v = \"middle\";\r\n\t\t\t\t\t\t\t\twindow.copyPasteLayers.layers[sli].position.x[s].v = 0;\r\n\t\t\t\t\t\t\t\twindow.copyPasteLayers.layers[sli].position.y[s].v = 0;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\twindow.copyPasteLayers.layers[sli].group.puid = puid;\r\n\t\t\t}\r\n\r\n\t\t\t// Paste Elements\r\n\t\t\tfor (var sli in window.copyPasteLayers.layers) {\r\n                if(!window.copyPasteLayers.layers.hasOwnProperty(sli) || !RVS.F.notChildrenOfList((\"\"+window.copyPasteLayers.layers[sli].group.puid),tempList,window.backupCopyPaste)) continue;\r\n                var uid = window.copyPasteLayers.layers[sli].uid;\r\n\t\t\t\tpasteLayers.push({type:window.copyPasteLayers.layers[sli].type, duplicateId:uid, ignoreBackupGroup:true, ignoreLayerList:true , ignoreOrderHTMLLayers:true, copyPaste:\"paste\"});\r\n                pasteLayersID.push(\"\"+uid);\r\n            }\r\n\r\n\r\n            RVS.F.openBackupGroup({id:\"addLayer\",txt:\"Copy Paste Layers\",icon:\"layers\",lastkey:\"layer\"});\r\n            var newid;\r\n            // Create new Layers, ignore children of elements which are also getting duplicated\r\n            for (var i in pasteLayers) {\r\n\t\t\t\tif(!pasteLayers.hasOwnProperty(i)) continue;\r\n                newLayerIDs.push(newid = RVS.F.addLayer(pasteLayers[i]));\r\n                if (RVS.L[newid].type==\"row\") rows.push(newid);\r\n                else if (RVS.L[newid].type===\"column\" && jQuery.inArray(RVS.L[uid].group.puid,rows)===-1) rows.push(RVS.L[uid].group.puid);\r\n            }\r\n\r\n\t\t\t//UPDATE ROWS (Extend, Remove Sizes)\r\n\t\t\tif (rows.length>0) {\r\n\t\t\t\tfor (var i in rows) {\r\n\t\t\t\t\tif(!rows.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tif (RVS.L[rows[i]]!==undefined) RVS.F.fixColumnsInRows({layerid:rows[i]});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.closeBackupGroup({id:\"addLayer\"});\r\n\t\t\tRVS.F.buildLayerLists({force:true, ignoreRebuildHTML:true});\r\n\t\t\tRVS.F.reOrderHTMLLayers();\r\n\t\t\tfor (var i in newLayerIDs) {\r\n\t\t\t\tif(!newLayerIDs.hasOwnProperty(i)) continue;\r\n                RVS.F.updateDuplicatedLayerActionDependencies(newLayerIDs[i], window.copyPasteLayers.layers[pasteLayersID[i]].copiedFromUid);\r\n\t\t\t\tRVS.F.selectLayers({id:newLayerIDs[i],overwrite:false, action:\"add\", ignoreUpdate:true});\r\n\t\t\t}\r\n\t\t\tRVS.F.selectedLayersVisualUpdate();\r\n\t\t\tRVS.F.updateSelectedHtmlLayers();\r\n\r\n            RVS.DOC.trigger('selectLayersDone');\r\n            // RESTORE CACHE\r\n            window.copyPasteLayers.layers ={...window.backupCopyPaste};\r\n        });\r\n\r\n\r\n\t\t/* ADD CONTENT BY OIBJECT LIBRARY EVENT */\r\n\t\tRVS.DOC.on('insertContentFromOL',function(e,par) {\r\n\t\t\tif (par.libraryType==\"fonticons\") {\r\n\t\t\t\tvar cl = par.tags[0]===\"MaterialIcons\" ? \"material-icons\" : par.handle.replace(\".\",\"\"),\r\n\t\t\t\t\tih = par.tags[0]===\"MaterialIcons\" ? par.handle.replace(\".\",\"\") : \"\";\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"PreStyleLAyer\",txt:\"Prestyle Object Layer\",icon:\"layers\",lastkey:\"layer\"});\r\n\t\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"text\",val:'<i class=\"'+cl+'\">'+ih+'</i>',ignoreRedraw:true});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"type\",val:'text',ignoreRedraw:true});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"idle.fontSize.\"+RVS.screen+\".v\",val:'50px',ignoreRedraw:true});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"idle.lineHeight.\"+RVS.screen+\".v\",val:'50px',ignoreRedraw:true});\r\n\t\t\t\t\tRVS.H[RVS.selLayers[lid]].c[0].innerHTML = '<i class=\"'+cl+'\">'+ih+'</i>';\r\n\t\t\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[lid]});\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"PreStyleLAyer\"});\r\n\t\t\t} else\r\n\t\t\tif (par.libraryType===\"svgs\" || par.libraryType===\"svgcustom\") {\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"PreStyleLAyer\",txt:\"Prestyle Object Layer\",icon:\"layers\",lastkey:\"layer\"});\r\n\t\t\t\tvar uids = [];\r\n\t\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\t\tuids.push(RVS.selLayers[lid]);\r\n\t\t\t\t\tif (par.libraryType===\"svgcustom\")\r\n\t\t\t\t\t\tRVS.F.updateLayerObj({path:\"idle.svg.originalColor\",val:true,ignoreRedraw:true});\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tRVS.F.updateLayerObj({path:\"idle.svg.originalColor\",val:false,ignoreRedraw:true});\r\n\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"svg.source\",val:par.img,ignoreRedraw:true});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"type\",val:'svg',ignoreRedraw:true});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"size.width.\"+RVS.screen+\".v\",val:'100px',ignoreRedraw:true});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"size.height.\"+RVS.screen+\".v\",val:'100px',ignoreRedraw:true});\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.updateLayerSVGSrc({uids:uids, src:par.img});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"PreStyleLAyer\"});\r\n\t\t\t}\r\n\t\t\tRVS.F.selectedLayersVisualUpdate();\r\n\t\t\tRVS.F.updateSelectedHtmlLayers();\r\n\t\t\tRVS.F.updateLayerInputFields();\r\n \t\t});\r\n\t}\r\n\r\n\t/* UPDATE LAYER FRAME */\r\n\tRVS.DOC.on('updateLayerFrame',function(e,par) {\r\n\t\tif (par!==undefined) {\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tRVS.F.updateLayerFrame({layerid:parseInt(RVS.selLayers[lid],0), frame:RVS.S.keyFrame});\r\n\t\t\t\tRVS.F.updateFrameRealSpeed();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t/*Column Break has Been Changed ! */\r\n\tRVS.DOC.on('updateLayerFrameStart',function(e,par) {\r\n\t\tif (par!==undefined || par.val!==undefined) {\r\n\t\t\tRVS.F.openBackupGroup({id:\"LayerFrameStart\",txt:\"Layer Frame Start\",icon:\"layers\",lastkey:\"layer\"});\r\n\t\t\t//Check if start is hitting frame before !?\r\n\t\t\tvar lid = parseInt(RVS.selLayers[0],0),\r\n\t\t\t\tPN =  RVS.F.getPrevNextFrame({layerid:lid, frame:RVS.S.keyFrame});\r\n\t\t\t\tcur = parseInt(par.val,0),\r\n\t\t\tcur = cur<PN.prev.end ? PN.prev.end + 10 : cur+PN.cur.framelength>PN.next.start ? PN.next.start - (PN.cur.framelength + 10) : cur;\r\n\t\t\tcur = cur>RVS.F.getSlideLength()*10 ? RVS.F.getSlideLength()*10 : cur;\r\n\t\t\tRVS.F.updateLayerObj({path:\"timeline.frames.\"+RVS.S.keyFrame+'.timeline.start', val:cur});\r\n\r\n\t\t\tRVS.F.closeBackupGroup({id:\"LayerFrameStart\"});\r\n\t\t\tdocument.getElementById('layerframestart').value = cur;\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tRVS.F.updateLayerFrame({layerid:parseInt(RVS.selLayers[lid],0), frame:RVS.S.keyFrame});\r\n\t\t\t\tRVS.F.updateFrameRealSpeed();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n})();\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*************************************\r\n    - \tINTERNAL FUNCTIONS -\r\n***************************************/\r\n\r\n\r\n/*\r\n * Copyright 2015 Small Batch, Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\r\n * use this file except in compliance with the License. You may obtain a copy of\r\n * the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\r\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\r\n * License for the specific language governing permissions and limitations under\r\n * the License.\r\n */\r\n/* Web Font Loader v1.5.18 - (c) Adobe Systems, Google. License: Apache 2.0 */\r\n;(function(window,document,undefined){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function k(a,b,c){k=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?aa:ba;return k.apply(null,arguments)}var n=Date.now||function(){return+new Date};function q(a,b){this.K=a;this.w=b||a;this.G=this.w.document}q.prototype.createElement=function(a,b,c){a=this.G.createElement(a);if(b)for(var d in b)b.hasOwnProperty(d)&&(\"style\"==d?a.style.cssText=b[d]:a.setAttribute(d,b[d]));c&&a.appendChild(this.G.createTextNode(c));return a};function r(a,b,c){a=a.G.getElementsByTagName(b)[0];a||(a=document.documentElement);a&&a.lastChild&&a.insertBefore(c,a.lastChild)}function ca(a,b){function c(){a.G.body?b():setTimeout(c,0)}c()}\r\nfunction s(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(\" \").replace(/\\s+/g,\" \").replace(/^\\s+|\\s+$/,\"\")}function t(a,b){for(var c=a.className.split(/\\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}\r\nfunction u(a){if(\"string\"===typeof a.na)return a.na;var b=a.w.location.protocol;\"about:\"==b&&(b=a.K.location.protocol);return\"https:\"==b?\"https:\":\"http:\"}function v(a,b){var c=a.createElement(\"link\",{rel:\"stylesheet\",href:b,media:\"all\"}),d=!1;c.onload=function(){d||(d=!0)};c.onerror=function(){d||(d=!0)};r(a,\"head\",c)}\r\nfunction w(a,b,c,d){var e=a.G.getElementsByTagName(\"head\")[0];if(e){var f=a.createElement(\"script\",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&\"loaded\"!=this.readyState&&\"complete\"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,\"HEAD\"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);window.setTimeout(function(){g||(g=!0,c&&c(Error(\"Script load timeout\")))},d||5E3);return f}return null};function x(a,b){this.Y=a;this.ga=b};function y(a,b,c,d){this.c=null!=a?a:null;this.g=null!=b?b:null;this.D=null!=c?c:null;this.e=null!=d?d:null}var da=/^([0-9]+)(?:[\\._-]([0-9]+))?(?:[\\._-]([0-9]+))?(?:[\\._+-]?(.*))?$/;y.prototype.compare=function(a){return this.c>a.c||this.c===a.c&&this.g>a.g||this.c===a.c&&this.g===a.g&&this.D>a.D?1:this.c<a.c||this.c===a.c&&this.g<a.g||this.c===a.c&&this.g===a.g&&this.D<a.D?-1:0};y.prototype.toString=function(){return[this.c,this.g||\"\",this.D||\"\",this.e||\"\"].join(\"\")};\r\nfunction z(a){a=da.exec(a);var b=null,c=null,d=null,e=null;a&&(null!==a[1]&&a[1]&&(b=parseInt(a[1],10)),null!==a[2]&&a[2]&&(c=parseInt(a[2],10)),null!==a[3]&&a[3]&&(d=parseInt(a[3],10)),null!==a[4]&&a[4]&&(e=/^[0-9]+$/.test(a[4])?parseInt(a[4],10):a[4]));return new y(b,c,d,e)};function A(a,b,c,d,e,f,g,h){this.N=a;this.k=h}A.prototype.getName=function(){return this.N};function B(a){this.a=a}var ea=new A(\"Unknown\",0,0,0,0,0,0,new x(!1,!1));\r\nB.prototype.parse=function(){var a;if(-1!=this.a.indexOf(\"MSIE\")||-1!=this.a.indexOf(\"Trident/\")){a=C(this);var b=z(D(this)),c=null,d=E(this.a,/Trident\\/([\\d\\w\\.]+)/,1),c=-1!=this.a.indexOf(\"MSIE\")?z(E(this.a,/MSIE ([\\d\\w\\.]+)/,1)):z(E(this.a,/rv:([\\d\\w\\.]+)/,1));\"\"!=d&&z(d);a=new A(\"MSIE\",0,0,0,0,0,0,new x(\"Windows\"==a&&6<=c.c||\"Windows Phone\"==a&&8<=b.c,!1))}else if(-1!=this.a.indexOf(\"Opera\"))a:if(a=z(E(this.a,/Presto\\/([\\d\\w\\.]+)/,1)),z(D(this)),null!==a.c||z(E(this.a,/rv:([^\\)]+)/,1)),-1!=this.a.indexOf(\"Opera Mini/\"))a=\r\nz(E(this.a,/Opera Mini\\/([\\d\\.]+)/,1)),a=new A(\"OperaMini\",0,0,0,C(this),0,0,new x(!1,!1));else{if(-1!=this.a.indexOf(\"Version/\")&&(a=z(E(this.a,/Version\\/([\\d\\.]+)/,1)),null!==a.c)){a=new A(\"Opera\",0,0,0,C(this),0,0,new x(10<=a.c,!1));break a}a=z(E(this.a,/Opera[\\/ ]([\\d\\.]+)/,1));a=null!==a.c?new A(\"Opera\",0,0,0,C(this),0,0,new x(10<=a.c,!1)):new A(\"Opera\",0,0,0,C(this),0,0,new x(!1,!1))}else/OPR\\/[\\d.]+/.test(this.a)?a=F(this):/AppleWeb(K|k)it/.test(this.a)?a=F(this):-1!=this.a.indexOf(\"Gecko\")?\r\n(a=\"Unknown\",b=new y,z(D(this)),b=!1,-1!=this.a.indexOf(\"Firefox\")?(a=\"Firefox\",b=z(E(this.a,/Firefox\\/([\\d\\w\\.]+)/,1)),b=3<=b.c&&5<=b.g):-1!=this.a.indexOf(\"Mozilla\")&&(a=\"Mozilla\"),c=z(E(this.a,/rv:([^\\)]+)/,1)),b||(b=1<c.c||1==c.c&&9<c.g||1==c.c&&9==c.g&&2<=c.D),a=new A(a,0,0,0,C(this),0,0,new x(b,!1))):a=ea;return a};\r\nfunction C(a){var b=E(a.a,/(iPod|iPad|iPhone|Android|Windows Phone|BB\\d{2}|BlackBerry)/,1);if(\"\"!=b)return/BB\\d{2}/.test(b)&&(b=\"BlackBerry\"),b;a=E(a.a,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS|PlayStation|CrKey)/,1);return\"\"!=a?(\"Mac_PowerPC\"==a?a=\"Macintosh\":\"PlayStation\"==a&&(a=\"Linux\"),a):\"Unknown\"}\r\nfunction D(a){var b=E(a.a,/(OS X|Windows NT|Android) ([^;)]+)/,2);if(b||(b=E(a.a,/Windows Phone( OS)? ([^;)]+)/,2))||(b=E(a.a,/(iPhone )?OS ([\\d_]+)/,2)))return b;if(b=E(a.a,/(?:Linux|CrOS|CrKey) ([^;)]+)/,1))for(var b=b.split(/\\s/),c=0;c<b.length;c+=1)if(/^[\\d\\._]+$/.test(b[c]))return b[c];return(a=E(a.a,/(BB\\d{2}|BlackBerry).*?Version\\/([^\\s]*)/,2))?a:\"Unknown\"}\r\nfunction F(a){var b=C(a),c=z(D(a)),d=z(E(a.a,/AppleWeb(?:K|k)it\\/([\\d\\.\\+]+)/,1)),e=\"Unknown\",f=new y,f=\"Unknown\",g=!1;/OPR\\/[\\d.]+/.test(a.a)?e=\"Opera\":-1!=a.a.indexOf(\"Chrome\")||-1!=a.a.indexOf(\"CrMo\")||-1!=a.a.indexOf(\"CriOS\")?e=\"Chrome\":/Silk\\/\\d/.test(a.a)?e=\"Silk\":\"BlackBerry\"==b||\"Android\"==b?e=\"BuiltinBrowser\":-1!=a.a.indexOf(\"PhantomJS\")?e=\"PhantomJS\":-1!=a.a.indexOf(\"Safari\")?e=\"Safari\":-1!=a.a.indexOf(\"AdobeAIR\")?e=\"AdobeAIR\":-1!=a.a.indexOf(\"PlayStation\")&&(e=\"BuiltinBrowser\");\"BuiltinBrowser\"==\r\ne?f=\"Unknown\":\"Silk\"==e?f=E(a.a,/Silk\\/([\\d\\._]+)/,1):\"Chrome\"==e?f=E(a.a,/(Chrome|CrMo|CriOS)\\/([\\d\\.]+)/,2):-1!=a.a.indexOf(\"Version/\")?f=E(a.a,/Version\\/([\\d\\.\\w]+)/,1):\"AdobeAIR\"==e?f=E(a.a,/AdobeAIR\\/([\\d\\.]+)/,1):\"Opera\"==e?f=E(a.a,/OPR\\/([\\d.]+)/,1):\"PhantomJS\"==e&&(f=E(a.a,/PhantomJS\\/([\\d.]+)/,1));f=z(f);g=\"AdobeAIR\"==e?2<f.c||2==f.c&&5<=f.g:\"BlackBerry\"==b?10<=c.c:\"Android\"==b?2<c.c||2==c.c&&1<c.g:526<=d.c||525<=d.c&&13<=d.g;return new A(e,0,0,0,0,0,0,new x(g,536>d.c||536==d.c&&11>d.g))}\r\nfunction E(a,b,c){return(a=a.match(b))&&a[c]?a[c]:\"\"};function G(a){this.ma=a||\"-\"}G.prototype.e=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\\W_]+/g,\"\").toLowerCase());return b.join(this.ma)};function H(a,b){this.N=a;this.Z=4;this.O=\"n\";var c=(b||\"n4\").match(/^([nio])([1-9])$/i);c&&(this.O=c[1],this.Z=parseInt(c[2],10))}H.prototype.getName=function(){return this.N};function I(a){return a.O+a.Z}function ga(a){var b=4,c=\"n\",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.d=a;this.q=a.w.document.documentElement;this.Q=b;this.j=\"wf\";this.h=new G(\"-\");this.ha=!1!==b.events;this.F=!1!==b.classes}function J(a){if(a.F){var b=t(a.q,a.h.e(a.j,\"active\")),c=[],d=[a.h.e(a.j,\"loading\")];b||c.push(a.h.e(a.j,\"inactive\"));s(a.q,c,d)}K(a,\"inactive\")}function K(a,b,c){if(a.ha&&a.Q[b])if(c)a.Q[b](c.getName(),I(c));else a.Q[b]()};function ia(){this.C={}};function L(a,b){this.d=a;this.I=b;this.o=this.d.createElement(\"span\",{\"aria-hidden\":\"true\"},this.I)}\r\nfunction M(a,b){var c=a.o,d;d=[];for(var e=b.N.split(/,\\s*/),f=0;f<e.length;f++){var g=e[f].replace(/['\"]/g,\"\");-1==g.indexOf(\" \")?d.push(g):d.push(\"'\"+g+\"'\")}d=d.join(\",\");e=\"normal\";\"o\"===b.O?e=\"oblique\":\"i\"===b.O&&(e=\"italic\");c.style.cssText=\"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:\"+d+\";\"+(\"font-style:\"+e+\";font-weight:\"+(b.Z+\"00\")+\";\")}\r\nfunction N(a){r(a.d,\"body\",a.o)}L.prototype.remove=function(){var a=this.o;a.parentNode&&a.parentNode.removeChild(a)};function O(a,b,c,d,e,f,g,h){this.$=a;this.ka=b;this.d=c;this.m=d;this.k=e;this.I=h||\"BESbswy\";this.v={};this.X=f||3E3;this.ca=g||null;this.H=this.u=this.t=null;this.t=new L(this.d,this.I);this.u=new L(this.d,this.I);this.H=new L(this.d,this.I);M(this.t,new H(\"serif\",I(this.m)));M(this.u,new H(\"sans-serif\",I(this.m)));M(this.H,new H(\"monospace\",I(this.m)));N(this.t);N(this.u);N(this.H);this.v.serif=this.t.o.offsetWidth;this.v[\"sans-serif\"]=this.u.o.offsetWidth;this.v.monospace=this.H.o.offsetWidth}\r\nvar P={sa:\"serif\",ra:\"sans-serif\",qa:\"monospace\"};O.prototype.start=function(){this.oa=n();M(this.t,new H(this.m.getName()+\",serif\",I(this.m)));M(this.u,new H(this.m.getName()+\",sans-serif\",I(this.m)));Q(this)};function R(a,b,c){for(var d in P)if(P.hasOwnProperty(d)&&b===a.v[P[d]]&&c===a.v[P[d]])return!0;return!1}\r\nfunction Q(a){var b=a.t.o.offsetWidth,c=a.u.o.offsetWidth;b===a.v.serif&&c===a.v[\"sans-serif\"]||a.k.ga&&R(a,b,c)?n()-a.oa>=a.X?a.k.ga&&R(a,b,c)&&(null===a.ca||a.ca.hasOwnProperty(a.m.getName()))?S(a,a.$):S(a,a.ka):ja(a):S(a,a.$)}function ja(a){setTimeout(k(function(){Q(this)},a),50)}function S(a,b){a.t.remove();a.u.remove();a.H.remove();b(a.m)};function T(a,b,c,d){this.d=b;this.A=c;this.S=0;this.ea=this.ba=!1;this.X=d;this.k=a.k}function ka(a,b,c,d,e){c=c||{};if(0===b.length&&e)J(a.A);else for(a.S+=b.length,e&&(a.ba=e),e=0;e<b.length;e++){var f=b[e],g=c[f.getName()],h=a.A,m=f;h.F&&s(h.q,[h.h.e(h.j,m.getName(),I(m).toString(),\"loading\")]);K(h,\"fontloading\",m);h=null;h=new O(k(a.ia,a),k(a.ja,a),a.d,f,a.k,a.X,d,g);h.start()}}\r\nT.prototype.ia=function(a){var b=this.A;b.F&&s(b.q,[b.h.e(b.j,a.getName(),I(a).toString(),\"active\")],[b.h.e(b.j,a.getName(),I(a).toString(),\"loading\"),b.h.e(b.j,a.getName(),I(a).toString(),\"inactive\")]);K(b,\"fontactive\",a);this.ea=!0;la(this)};\r\nT.prototype.ja=function(a){var b=this.A;if(b.F){var c=t(b.q,b.h.e(b.j,a.getName(),I(a).toString(),\"active\")),d=[],e=[b.h.e(b.j,a.getName(),I(a).toString(),\"loading\")];c||d.push(b.h.e(b.j,a.getName(),I(a).toString(),\"inactive\"));s(b.q,d,e)}K(b,\"fontinactive\",a);la(this)};function la(a){0==--a.S&&a.ba&&(a.ea?(a=a.A,a.F&&s(a.q,[a.h.e(a.j,\"active\")],[a.h.e(a.j,\"loading\"),a.h.e(a.j,\"inactive\")]),K(a,\"active\")):J(a.A))};function U(a){this.K=a;this.B=new ia;this.pa=new B(a.navigator.userAgent);this.a=this.pa.parse();this.U=this.V=0;this.R=this.T=!0}\r\nU.prototype.load=function(a){this.d=new q(this.K,a.context||this.K);this.T=!1!==a.events;this.R=!1!==a.classes;var b=new ha(this.d,a),c=[],d=a.timeout;b.F&&s(b.q,[b.h.e(b.j,\"loading\")]);K(b,\"loading\");var c=this.B,e=this.d,f=[],g;for(g in a)if(a.hasOwnProperty(g)){var h=c.C[g];h&&f.push(h(a[g],e))}c=f;this.U=this.V=c.length;a=new T(this.a,this.d,b,d);d=0;for(g=c.length;d<g;d++)e=c[d],e.L(this.a,k(this.la,this,e,b,a))};\r\nU.prototype.la=function(a,b,c,d){var e=this;d?a.load(function(a,b,d){ma(e,c,a,b,d)}):(a=0==--this.V,this.U--,a&&0==this.U?J(b):(this.R||this.T)&&ka(c,[],{},null,a))};function ma(a,b,c,d,e){var f=0==--a.V;(a.R||a.T)&&setTimeout(function(){ka(b,c,d||null,e||null,f)},0)};function na(a,b,c){this.P=a?a:b+oa;this.s=[];this.W=[];this.fa=c||\"\"}var oa=\"//fonts.googleapis.com/css\";na.prototype.e=function(){if(0==this.s.length)throw Error(\"No fonts to load!\");if(-1!=this.P.indexOf(\"kit=\"))return this.P;for(var a=this.s.length,b=[],c=0;c<a;c++)b.push(this.s[c].replace(/ /g,\"+\"));a=this.P+\"?family=\"+b.join(\"%7C\");0<this.W.length&&(a+=\"&subset=\"+this.W.join(\",\"));0<this.fa.length&&(a+=\"&text=\"+encodeURIComponent(this.fa));return a};function pa(a){this.s=a;this.da=[];this.M={}}\r\nvar qa={latin:\"BESbswy\",cyrillic:\"&#1081;&#1103;&#1046;\",greek:\"&#945;&#946;&#931;\",khmer:\"&#x1780;&#x1781;&#x1782;\",Hanuman:\"&#x1780;&#x1781;&#x1782;\"},ra={thin:\"1\",extralight:\"2\",\"extra-light\":\"2\",ultralight:\"2\",\"ultra-light\":\"2\",light:\"3\",regular:\"4\",book:\"4\",medium:\"5\",\"semi-bold\":\"6\",semibold:\"6\",\"demi-bold\":\"6\",demibold:\"6\",bold:\"7\",\"extra-bold\":\"8\",extrabold:\"8\",\"ultra-bold\":\"8\",ultrabold:\"8\",black:\"9\",heavy:\"9\",l:\"3\",r:\"4\",b:\"7\"},sa={i:\"i\",italic:\"i\",n:\"n\",normal:\"n\"},ta=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\r\npa.prototype.parse=function(){for(var a=this.s.length,b=0;b<a;b++){var c=this.s[b].split(\":\"),d=c[0].replace(/\\+/g,\" \"),e=[\"n4\"];if(2<=c.length){var f;var g=c[1];f=[];if(g)for(var g=g.split(\",\"),h=g.length,m=0;m<h;m++){var l;l=g[m];if(l.match(/^[\\w-]+$/)){l=ta.exec(l.toLowerCase());var p=void 0;if(null==l)p=\"\";else{p=void 0;p=l[1];if(null==p||\"\"==p)p=\"4\";else var fa=ra[p],p=fa?fa:isNaN(p)?\"4\":p.substr(0,1);l=l[2];p=[null==l||\"\"==l?\"n\":sa[l],p].join(\"\")}l=p}else l=\"\";l&&f.push(l)}0<f.length&&(e=f);\r\n3==c.length&&(c=c[2],f=[],c=c?c.split(\",\"):f,0<c.length&&(c=qa[c[0]])&&(this.M[d]=c))}this.M[d]||(c=qa[d])&&(this.M[d]=c);for(c=0;c<e.length;c+=1)this.da.push(new H(d,e[c]))}};function V(a,b){this.a=(new B(navigator.userAgent)).parse();this.d=a;this.f=b}var ua={Arimo:!0,Cousine:!0,Tinos:!0};V.prototype.L=function(a,b){b(a.k.Y)};V.prototype.load=function(a){var b=this.d;\"MSIE\"==this.a.getName()&&1!=this.f.blocking?ca(b,k(this.aa,this,a)):this.aa(a)};\r\nV.prototype.aa=function(a){for(var b=this.d,c=new na(this.f.api,u(b),this.f.text),d=this.f.families,e=d.length,f=0;f<e;f++){var g=d[f].split(\":\");3==g.length&&c.W.push(g.pop());var h=\"\";2==g.length&&\"\"!=g[1]&&(h=\":\");c.s.push(g.join(h))}d=new pa(d);d.parse();v(b,c.e());a(d.da,d.M,ua)};function W(a,b){this.d=a;this.f=b;this.p=[]}W.prototype.J=function(a){var b=this.d;return u(this.d)+(this.f.api||\"//f.fontdeck.com/s/css/js/\")+(b.w.location.hostname||b.K.location.hostname)+\"/\"+a+\".js\"};\r\nW.prototype.L=function(a,b){var c=this.f.id,d=this.d.w,e=this;c?(d.__tpwebfontfontdeckmodule__||(d.__tpwebfontfontdeckmodule__={}),d.__tpwebfontfontdeckmodule__[c]=function(a,c){for(var d=0,m=c.fonts.length;d<m;++d){var l=c.fonts[d];e.p.push(new H(l.name,ga(\"font-weight:\"+l.weight+\";font-style:\"+l.style)))}b(a)},w(this.d,this.J(c),function(a){a&&b(!1)})):b(!1)};W.prototype.load=function(a){a(this.p)};function X(a,b){this.d=a;this.f=b;this.p=[]}X.prototype.J=function(a){var b=u(this.d);return(this.f.api||b+\"//use.typekit.net\")+\"/\"+a+\".js\"};X.prototype.L=function(a,b){var c=this.f.id,d=this.d.w,e=this;c?w(this.d,this.J(c),function(a){if(a)b(!1);else{if(d.Typekit&&d.Typekit.config&&d.Typekit.config.fn){a=d.Typekit.config.fn;for(var c=0;c<a.length;c+=2)for(var h=a[c],m=a[c+1],l=0;l<m.length;l++)e.p.push(new H(h,m[l]));try{d.Typekit.load({events:!1,classes:!1})}catch(p){}}b(!0)}},2E3):b(!1)};\r\nX.prototype.load=function(a){a(this.p)};function Y(a,b){this.d=a;this.f=b;this.p=[]}Y.prototype.L=function(a,b){var c=this,d=c.f.projectId,e=c.f.version;if(d){var f=c.d.w;w(this.d,c.J(d,e),function(e){if(e)b(!1);else{if(f[\"__mti_fntLst\"+d]&&(e=f[\"__mti_fntLst\"+d]()))for(var h=0;h<e.length;h++)c.p.push(new H(e[h].fontfamily));b(a.k.Y)}}).id=\"__MonotypeAPIScript__\"+d}else b(!1)};Y.prototype.J=function(a,b){var c=u(this.d),d=(this.f.api||\"fast.fonts.net/jsapi\").replace(/^.*http(s?):(\\/\\/)?/,\"\");return c+\"//\"+d+\"/\"+a+\".js\"+(b?\"?v=\"+b:\"\")};\r\nY.prototype.load=function(a){a(this.p)};function Z(a,b){this.d=a;this.f=b}Z.prototype.load=function(a){var b,c,d=this.f.urls||[],e=this.f.families||[],f=this.f.testStrings||{};b=0;for(c=d.length;b<c;b++)v(this.d,d[b]);d=[];b=0;for(c=e.length;b<c;b++){var g=e[b].split(\":\");if(g[1])for(var h=g[1].split(\",\"),m=0;m<h.length;m+=1)d.push(new H(g[0],h[m]));else d.push(new H(g[0]))}a(d,f)};Z.prototype.L=function(a,b){return b(a.k.Y)};var $=new U(this);$.B.C.custom=function(a,b){return new Z(b,a)};$.B.C.fontdeck=function(a,b){return new W(b,a)};$.B.C.monotype=function(a,b){return new Y(b,a)};$.B.C.typekit=function(a,b){return new X(b,a)};$.B.C.google=function(a,b){return new V(b,a)};this.tpWebFont||(this.tpWebFont={},this.tpWebFont.load=k($.load,$),this.tpWebFontConfig&&$.load(this.tpWebFontConfig));})(this,document);\r\n","Nwdthemes_Revslider/admin/assets/js/modules/objectlibrary.js":"/*!\r\n * REVOLUTION 6.3.11 UTILS OBJECT LIBRARY JS\r\n * @version: 2.0 (25.11.2020)\r\n * @author ThemePunch\r\n*/\r\n\r\n/**********************************\r\n\t-\tGLOBAL VARIABLES\t-\r\n**********************************/\r\n;window.RVS = window.RVS === undefined ? {} : window.RVS;\r\nRVS.F = RVS.F === undefined ? {} : RVS.F;\r\nRVS.ENV = RVS.ENV === undefined ? {} : RVS.ENV;\r\nRVS.LIB = RVS.LIB === undefined ? {} : RVS.LIB;\r\nRVS.V = RVS.V === undefined ? {} : RVS.V;\r\nRVS.S = RVS.S === undefined ? {} : RVS.S;\r\nRVS.C = RVS.C === undefined ? {} : RVS.C;\r\nRVS.WIN = RVS.WIN === undefined ? jQuery(window) : RVS.WIN;\r\n\r\nRVS.DOC = RVS.DOC === undefined ? jQuery(document) : RVS.DOC;\r\n\r\n/**********************************\r\n\t-\tOVERVIEW FUNCTIONS\t-\r\n********************************/\r\n(function() {\r\n\r\n\r\n\r\n\r\n\tvar filtericons = {images:\"photo_camera\",  modules:\"aspect_ratio\",  moduletemplates:\"aspect_ratio\", layers:\"layers\", videos:\"videocam\", svgcustom:\"copyright\", svgs:\"copyright\", fonticons:\"font_download\", objects:\"filter_drama\"},\r\n\t\tobjectSizes = {xs:10, s:25, m:50, l:75, o:100};\r\n\r\n\tvar addonExtendedSubtypes = {\r\n\t\tlottie: 'Lottie Addon',\r\n\t\tslicey:'Slicey Addon',\r\n\t\tbubblemorph:'Bubble Morph Addon',\r\n\t\tshapebuilder:'Shape Builder Addon'\r\n\t}\r\n\r\n\t/*\r\n\tINIT OVERVIEW\r\n\t*/\r\n\tRVS.F.initObjectLibrary = function(hideUpdateBtn) {\r\n\t\tinitLocalListeners();\r\n\t\tcreateCustomSVGDefaults();\r\n\r\n\t\tRVS.F.buildObjectLibrary(hideUpdateBtn);\r\n\t\tRVS.LIB.OBJ.items = {};\r\n\t\tRVS.LIB.OBJ.search = \tjQuery('#searchobjects');\r\n\t\tRVS.LIB.OBJ.infoPlus = jQuery('#rs_extra_objlib_info');\r\n\t\tRVS.LIB.OBJ.uploadCustoms = jQuery('#upload_custom_files');\r\n\t\tRVS.LIB.OBJ.inited = true;\r\n\r\n\r\n\r\n\t\t// Drop Function for Custom Things\r\n\t\tjQuery('#ol_results_wrap').on('dragover dragenter', function(e) {\r\n\t\t\tif (RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].upload===undefined) return;\r\n\t\t\tvar dt = e.originalEvent.dataTransfer;\r\n  \t\t\tif ((dt.types && (dt.types.indexOf ? dt.types.indexOf('Files') != -1 : dt.types.contains('Files'))) && (!RVS.S.dragginginside && jQuery('#filedrop').length===0))\r\n\t\t\t\t RVS.F.browserDroppable.init({onlydrop:false, type:\"custom\",\r\n\t\t\t\tcallBack:RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].upload.callBack, success:\"uploadCustomObject\", action:\"add_to_media_library\"});\r\n\t\t\telse return;\r\n\t\t });\r\n\r\n\r\n\r\n\r\n\t\tRVS.DOC.on('click','#upload_custom_files',function() {\r\n\t\t\tRVS.F.runCustomObjectImport();\r\n\t\t});\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tCUSTOM OBJECT IMPORTER\r\n\t*/\r\n\tRVS.F.runCustomObjectImport = function() {\r\n\t\tRVS.F.browserDroppable.init({\r\n\t\t\t\tonlydrop:false,\r\n\t\t\t\tsuccess:\"uploadCustomObject\",\r\n\t\t\t\ttype:\"custom\",\r\n\t\t\t\tcallBack:RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].upload.callBack\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tRVS.DOC.on('runCustomObjectImport',RVS.F.runCustomObjectImport);\r\n\r\n\r\n\t/*\r\n\tEXTEND FILTER ICONS OF OBJECT LIBRARY\r\n\t */\r\n\tRVS.F.extendFilterIcons = function(_) {\r\n\t\tfiltericons[_.handle] = _.icon;\r\n\t}\r\n\r\n\tRVS.F.extendLibTypes = function(_) {\r\n\t\tRVS.LIB.OBJ.types = RVS.F.safeExtend(true,_,RVS.LIB.OBJ.types);\r\n\t}\r\n\r\n\t/*\r\n\tOPEN OVERVIEW\r\n\t*/\r\n\tRVS.F.openObjectLibrary = function(_) {\r\n\r\n\t\t//RVS.ENV.activated = false;\r\n\r\n\t\tRVS.LIB.OBJ.open = true;\r\n\t\t//moduletemplates, modules, layers, videos, svg, icons, images, favorite\r\n\t\t_ = _===undefined ? {types:\"all\",filter:\"all\", selected:[\"moduletemplates\"], success:{slider:\"addNewSlider\"}} : _;\r\n\r\n\r\n\t\tRVS.S.isRTL = RVS.S.isRTL===undefined ? jQuery(document.body).hasClass(\"rtl\") : RVS.S.isRTL;\r\n\r\n\t\tif (!RVS.LIB.OBJ.inited) RVS.F.initObjectLibrary();\r\n\r\n\t\tif (_.silent!==true) {\r\n\t\t\t// ANIMATE THINGS IN\r\n\t\t\ttpGS.gsap.fromTo(RVS.LIB.OBJ.container_Library,0.7,{scale:0.8,autoAlpha:0,display:\"none\"},{autoAlpha:1,display:\"block\",scale:1,ease:\"power3.inOut\"});\r\n\t\t\ttpGS.gsap.fromTo('#ol_header, #ol_footer',0.5,{autoAlpha:0,ease:\"power3.inOut\"},{autoAlpha:1,opacity:1,ease:\"power3.inOut\",delay:0.5});\r\n\t\t}\r\n\r\n\t\tRVS.LIB.OBJ.staticalso = _.staticalso;\r\n\t\tRVS.LIB.OBJ.success = _.success;\r\n\t\tRVS.LIB.OBJ.selectedType = _.selected[0];\r\n\t\tRVS.LIB.OBJ.selectedFilter = _.filter;\r\n\t\tRVS.LIB.OBJ.selectedFolder = -1;\r\n\t\tRVS.LIB.OBJ.selectedPage = 0;\r\n\t\tRVS.LIB.OBJ.selectedPackage = -1;\t//IN WHICH PACKAGE WE ARE IN\r\n\t\tRVS.LIB.OBJ.selectedModule = -1;\t//IN WHICH\r\n\t\tRVS.LIB.OBJ.selectedModuleTitle = \"\";\r\n\t\tRVS.LIB.OBJ.slideParent = -1;\r\n\t\tRVS.LIB.OBJ.reDownloadTemplate = false;\r\n\t\tRVS.LIB.OBJ.createBlankPage = false;\r\n\t\tRVS.LIB.OBJ.data = _.data;\r\n\t\tRVS.LIB.OBJ.context = _.context===undefined ? \"overview\" : \"editor\";\r\n\t\tRVS.LIB.OBJ.depth = _.depth===undefined ? \"slide\" : _.depth;\r\n\r\n\r\n\t\tjQuery('.ol_filter_type.selected').removeClass(\"selected\");\r\n\t\tjQuery('.ol_filter_type.open').removeClass(\"open\");\r\n\r\n\t\tif (_.types!==\"all\") {\r\n\t\t\tRVS.LIB.OBJ.container_Filters.find('.ol_filter_type').each(function() {\r\n\t\t\t\tif (jQuery.inArray(this.dataset.type,_.types)>=0)\r\n\t\t\t\t\tjQuery(this).show();\r\n\t\t\t\telse\r\n\t\t\t\t\tjQuery(this).hide();\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\tRVS.LIB.OBJ.container_Filters.find('.ol_filter_type').show();\r\n\t\t}\r\n\r\n\t\t// SELECT PREDEFINED ELEMENT\r\n\t\tvar mod = jQuery('#ol_filter_'+_.selected);\r\n\t\tmod.addClass('open');\r\n\t\tmod.find('.ol_filter_headerelement').addClass(\"selected\");\r\n\r\n\t\tmod.find('.ol_filter_listelement[data-filter=\"'+_.filter+'\"]').addClass(\"selected\");\r\n\t\tupdateSearchPlaceHolder(true);\r\n\r\n\t\t//LOAD ITEMS AND CALL FURTHER FUNCTIONS\r\n\t\tRVS.F.loadLibrary({modules:_.selected, event:(_.event!==undefined ? _.event : \"reBuildObjectLibrary\")});\r\n\r\n\t\tif (_.updatelist===false)\r\n\t\t\tjQuery('#obj_updatefromserver').hide();\r\n\t\telse\r\n\t\t\tjQuery('#obj_updatefromserver').show();\r\n\r\n\t\tRVS.S.bodybeforeOpenLibrary = document.body.style.overflow;\r\n\t\tdocument.body.style.overflow = \"hidden\";\r\n\r\n\t};\r\n\r\n\t/*\r\n\tREBUILD THE OBJECT LIBRARY RIGHT SIDE\r\n\t*/\r\n\tRVS.F.reBuildObjectLibrary = function() {\r\n\t\tRVS.F.updateFilteredList();\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tUPDATE THE LIBRARY FROM SERVER\r\n\t*/\r\n\tRVS.F.updateObjectLibraryFromServer = function(obj) {\r\n\t\tRVS.F.removeModuleTemplatesFromLibrary(obj);\r\n\t\tRVS.LIB.OBJ.refreshFromServer = true;\r\n\t\tRVS.F.loadLibrary({modules:[obj], event:\"reBuildObjectLibrary\"});\r\n\t};\r\n\r\n\t/*\r\n\tREMOVE UNNEEDED THINGS FOR THE LIBRARY TO UPDATE IT\r\n\t*/\r\n\tRVS.F.removeModuleTemplatesFromLibrary = function(obj) {\r\n\t\tdelete RVS.LIB.OBJ.types[obj];\r\n\t\tdelete RVS.LIB.OBJ.items[obj];\r\n\t\tRVS.LIB.OBJ.selectedType=obj;\r\n\t\tRVS.LIB.OBJ.lastSelectedType=obj;\r\n\t\tRVS.LIB.OBJ.filteredList = [];\r\n\t\tRVS.LIB.OBJ.oldList = [];\r\n\t\tRVS.LIB.OBJ.pages = [];\r\n\t\tRVS.LIB.OBJ.container_Output[0].innerHTML = \"\";\r\n\r\n\t};\r\n\r\n\tRVS.F.rebuildObjectFilter = function(type) {\r\n\t\trebuildObjectFilter(type);\r\n\t}\r\n\r\n\tfunction rebuildObjectFilter(type) {\r\n\t\tjQuery('#ol_filter_'+type).remove();\r\n\t\taddObjectFilter({groupType:type, groupAlias:RVS_LANG['ol_'+type], icon:filtericons[type], count:RVS.LIB.OBJ.types[type].count, tags:RVS.LIB.OBJ.types[type].tags, custom:RVS.LIB.OBJ.types[type].upload, groupopen:true});\r\n\t}\r\n\r\n\t/*\r\n\tLOAD THE ELEMENTS TO A LIBRARY\r\n\t*/\r\n\tRVS.F.loadLibrary = function(_) {\r\n\r\n\t\t// CHECK ALREADY LOADED LIBRARIES\r\n\t\tvar toload = [],\r\n\t\t\tloaded = [];\r\n\r\n\r\n\t\tfor (var i in _.modules) {\r\n\t\t\tif(!_.modules.hasOwnProperty(i)) continue;\r\n\t\t\tRVS.LIB.OBJ.types[_.modules[i]] = RVS.LIB.OBJ.types[_.modules[i]]===undefined ? {} : RVS.LIB.OBJ.types[_.modules[i]];\r\n\t\t\tRVS.LIB.OBJ.items[_.modules[i]] = RVS.LIB.OBJ.items[_.modules[i]]===undefined ? [] : RVS.LIB.OBJ.items[_.modules[i]];\r\n\t\t\tif (RVS.LIB.OBJ.types[_.modules[i]].loaded !== true || RVS.LIB.OBJ.items[_.modules[i]].length===0)\r\n\t\t\t\ttoload.push(_.modules[i]);\r\n\t\t\telse\r\n\t\t\t\tloaded.push(_.modules[i]);\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// TRY TO LOAD ELEMENTS\r\n\t\tif (toload.length>0) {\r\n\t\t\tRVS.F.ajaxRequest('load_module', {module:toload, refresh_from_server:RVS.LIB.OBJ.refreshFromServer}, function(response){\r\n\r\n\t\t\t\tif(response.success) {\r\n\t\t\t\t\tfor (var type in response.modules) {\r\n\r\n\t\t\t\t\t\tif(!response.modules.hasOwnProperty(type)) continue;\r\n\t\t\t\t\t\tRVS.LIB.OBJ.items[type] = RVS.LIB.OBJ.items[type]===undefined ? [] : RVS.LIB.OBJ.items[type];\r\n\r\n\t\t\t\t\t\tfor (var id in response.modules[type].items) {\r\n\t\t\t\t\t\t\tif(!response.modules[type].items.hasOwnProperty(id)) continue;\r\n\t\t\t\t\t\t\tRVS.LIB.OBJ.items[type][id] = response.modules[type].items[id];\r\n\t\t\t\t\t\t\tRVS.LIB.OBJ.items[type][id].libraryType = type;\r\n\t\t\t\t\t\t\tif (RVS.LIB.OBJ.items[type][id].id===undefined)\r\n\t\t\t\t\t\t\t\tRVS.LIB.OBJ.items[type][id].id = id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (response.modules[type].tags!==undefined) {\r\n\t\t\t\t\t\t\tRVS.LIB.OBJ.types[type].tags = response.modules[type].tags;\r\n\t\t\t\t\t\t\trebuildObjectFilter(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tRVS.LIB.OBJ.types[type].loaded = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_.event!==undefined) RVS.DOC.trigger(_.event, _.eventparam);\r\n\r\n\t\t\t\t\t// trigger custom callback onload (for shortcode wizard)\r\n\t\t\t\t\tif(RVS.LIB.OBJ.success && RVS.LIB.OBJ.success.event) {\r\n\r\n\t\t\t\t\t\tlet param = RVS.LIB.OBJ.success.eventparam || false;\r\n\t\t\t\t\t\tRVS.DOC.trigger(RVS.LIB.OBJ.success.event, param);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t// EVENT NEED TO BE TRIGGERED, NOTHING TO LOAD\r\n\t\tif (loaded.length>0 && toload.length===0 && _.event!==undefined) {\r\n\t\t\tRVS.DOC.trigger(_.event, _.eventparam);\r\n\t\t}\r\n\t\tRVS.LIB.OBJ.refreshFromServer = false;\r\n\t};\r\n\r\n\t/*\r\n\tLOAD SLIDES TO MODULES OR MODULE TEMPLATES\r\n\t*/\r\n\tRVS.F.loadSimpleModule = function(_) {\r\n\r\n\t\tvar exists = false;\r\n\t\tfor (var i in RVS.LIB.OBJ.items[_.modules[0]]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[_.modules[0]].hasOwnProperty(i)) continue;\r\n\t\t\texists = exists===true ? true : RVS.LIB.OBJ.items[_.modules[0]][i].parent==_.moduleid;\r\n\t\t}\r\n\r\n\t\tif (!exists)\r\n\t\t\tRVS.F.ajaxRequest('load_module', {module:_.modules[0], module_id:_.moduleid, module_uid:_.module_uid, static:RVS.LIB.OBJ.staticalso}, function(response){\r\n\t\t\t\tif(response.success) {\r\n\r\n\t\t\t\t\tfor (var type in response.modules) {\r\n\t\t\t\t\t\tif(!response.modules.hasOwnProperty(type)) continue;\r\n\t\t\t\t\t\tRVS.LIB.OBJ.items[type] = RVS.LIB.OBJ.items[type]===undefined ? [] : RVS.LIB.OBJ.items[type];\r\n\t\t\t\t\t\tvar lastid = RVS.LIB.OBJ.items[type].length,\r\n\t\t\t\t\t\t\tsindex = RVS.F.getModuleIndex(_.moduleid,_.parenttype),\r\n\t\t\t\t\t\t\tparenttitle = RVS.LIB.OBJ.items[_.parenttype][sindex].title;\r\n\t\t\t\t\t\tfor (var id in response.modules[type].items) {\r\n\t\t\t\t\t\t\tif(!response.modules[type].items.hasOwnProperty(id)) continue;\r\n\t\t\t\t\t\t\tresponse.modules[type].items[id].libraryType = type;\r\n\t\t\t\t\t\t\tresponse.modules[type].items[id].moduleid = _.moduleid;\r\n\t\t\t\t\t\t\tresponse.modules[type].items[id].module_uid = _.module_uid;\r\n\t\t\t\t\t\t\tresponse.modules[type].items[id].parenttitle = parenttitle;\r\n\t\t\t\t\t\t\tresponse.modules[type].items[id].slideid = response.modules[type].items[id].id===undefined ? id : response.modules[type].items[id].id;\r\n\t\t\t\t\t\t\tresponse.modules[type].items[id].id = parseInt(lastid,0)+parseInt(id,0);\r\n\t\t\t\t\t\t\tRVS.LIB.OBJ.items[type].push(response.modules[type].items[id]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_.event!==undefined) RVS.DOC.trigger(_.event, _.eventparam);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\telse\r\n\t\t\tif (_.event!==undefined) RVS.DOC.trigger(_.event, _.eventparam);\r\n\t};\r\n\r\n\tRVS.F.addonInstalledOnDemand = function(addon) {\r\n\t\tvar changed = false;\r\n\t\tif (RVS.LIB.OBJ===undefined || RVS.LIB.OBJ.items===undefined) return;\r\n\t\tfor (var i in RVS.LIB.OBJ.items.moduletemplates) {\r\n\t\t\tif(!RVS.LIB.OBJ.items.moduletemplates.hasOwnProperty(i)) continue;\r\n\t\t\tvar item = RVS.LIB.OBJ.items.moduletemplates[i];\r\n\t\t\tfor (var j in item.plugin_require) {\r\n\t\t\t\tif(!item.plugin_require.hasOwnProperty(j)) continue;\r\n\t\t\t\tvar lg = item.plugin_require[j].path.split(\"/\");\r\n\t\t\t\tlg = lg[lg.length-1].split('.php')[0];\r\n\t\t\t\tif (lg===addon || item.plugin_require[j].name===addon) {\r\n\t\t\t\t\titem.plugin_require[j].installed = true;\r\n\t\t\t\t\tif (item && item.ref) item.ref.remove();\r\n\t\t\t\t\tdelete item.ref;\r\n\t\t\t\t\tchanged=true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (changed) RVS.F.updateFilteredList({force:true,keeppage:false,noanimation:false});\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE THE PARENT ATTRIBUTES ON THE SINGLE SLIDERS AND FOLDERS\r\n\t*/\r\n\tRVS.F.updateParentAttributes = function() {\r\n\t\tif (window.parentAttributesUpdateForObjects) return false;\r\n\t\tfor (var i in RVS.LIB.OBJ.items.modules) {\r\n\t\t\tif(!RVS.LIB.OBJ.items.modules.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.LIB.OBJ.items.modules[i].folder) {\r\n\t\t\t\twindow.parentAttributesUpdateForObjects = true;\r\n\t\t\t\tfor (var c in RVS.LIB.OBJ.items.modules[i].children) {\r\n\t\t\t\t\tif(!RVS.LIB.OBJ.items.modules[i].children.hasOwnProperty(c)) continue;\r\n\t\t\t\t\tvar sindex = RVS.F.getSliderIndex(RVS.LIB.OBJ.items.modules[i].children[c]);\r\n\t\t\t\t\tif (sindex!==-1) RVS.LIB.OBJ.items.modules[sindex].parent = RVS.LIB.OBJ.items.modules[i].id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// UPDATE THE CURRENT VISIBILITY LIST\r\n\tRVS.F.updateFilteredList = function(_) {\r\n\r\n\t\t_ = _===undefined ? {force:false,keeppage:false,noanimation:false, focusItem:false} : _;\r\n\r\n\t\tif (RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType]!==undefined && RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].infoPlus!==undefined) RVS.LIB.OBJ.infoPlus[0].innerHTML = RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].infoPlus; else RVS.LIB.OBJ.infoPlus[0].innerHTML=\"\";\r\n\t\tif (RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType]!==undefined && RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].upload!==undefined) {\r\n\t\t\tRVS.LIB.OBJ.uploadCustoms[0].innerHTML = RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].upload.buttonText;\r\n\t\t\tRVS.LIB.OBJ.uploadCustoms[0].style.display=\"block\";\r\n\t\t} else {\r\n\t\t\tRVS.LIB.OBJ.uploadCustoms[0].innerHTML=\"\";\r\n\t\t\tRVS.LIB.OBJ.uploadCustoms[0].style.display=\"none\";\r\n\t\t}\r\n\r\n\t\tif (RVS.LIB.OBJ.selectedPackage!==-1) {\r\n\t\t\tRVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].sort(function(b,a) { return b.package_order - a.package_order;});\r\n\t\t\tRVS.LIB.OBJ.container_Sorting.hide();\r\n\t\t} else {\r\n\t\t\tRVS.LIB.OBJ.container_Sorting.show();\r\n\t\t\t//Sort the Sliders First\r\n\t\t\tswitch(RVS.LIB.OBJ.container_Library.find('#sel_olibrary_sorting')[0].value) {\r\n\t\t\t\tcase \"datedesc\":\r\n\t\t\t\t\tif ((RVS.LIB.OBJ.selectedType===\"moduletemplateslides\" || RVS.LIB.OBJ.selectedType===\"moduleslides\"))\r\n\t\t\t\t\t\tRVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].sort(function(b,a) { return b.id - a.id;});\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tRVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].sort(function(a,b) { return b.id - a.id;});\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"title\":\r\n\t\t\t\t\tRVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].sort(function(a,b) { return a.title.toUpperCase().localeCompare(b.title.toUpperCase()); });\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"titledesc\":\r\n\t\t\t\t\tRVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].sort(function(a,b) { return b.title.toUpperCase().localeCompare(a.title.toUpperCase()); });\r\n\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t\tRVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].sort(function(a,b) { return a.id - b.id;});\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.LIB.OBJ.selectedFolder = parseInt(RVS.LIB.OBJ.selectedFolder,0);\r\n\t\tRVS.LIB.OBJ.oldlist = RVS.LIB.OBJ.filteredList;\r\n\t\tRVS.LIB.OBJ.filteredList = [];\r\n\t\tvar s = jQuery('#searchobjects').val().toLowerCase(),\r\n\t\t\tcheckfavorit = jQuery('#obj_fil_favorite').hasClass(\"selected\");\r\n\r\n\t\tif (RVS.LIB.OBJ.selectedType===\"modules\") RVS.F.updateParentAttributes();\r\n\r\n\t\t// ADD SLIDES IF MODULETPYE EXISTS , ORSLIDERS\r\n\r\n\r\n\t\tfor (var i in RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].hasOwnProperty(i)) continue;\r\n\t\t\tvar obj = RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType][i];\r\n\t\t\t/* addToFilter = false; */\r\n\t\t\tobj.parent = obj.parent===undefined ? -1 : obj.parent;\r\n\t\t\tvar folderPath = getParentPath(obj.parent),\r\n\t\t\tch = { a:(!checkfavorit || obj.favorite)}\r\n\r\n\t\t\t// SEARCHED && obj IS CHILDREN FROM SELECTED FOLDER && SEARCHED TEXT IN TITLE OR TAGLIST\r\n\t\t\tif (ch.a) {\r\n\t\t\t\tch.samefolder = (jQuery.inArray(RVS.LIB.OBJ.selectedFolder,folderPath)>=0 ||  jQuery.inArray(\"\"+RVS.LIB.OBJ.selectedFolder,folderPath)>=0);\r\n\t\t\t\tch.b = (s.length>2 && ch.samefolder && (obj.title.toLowerCase().indexOf(s)>=0) && (RVS.LIB.OBJ.selectedFilter==\"all\" || filterMatch({o:obj, filter:RVS.LIB.OBJ.selectedFilter})));\r\n\t\t\t\tch.c = (s.length<3 && RVS.LIB.OBJ.selectedType=== obj.libraryType && RVS.LIB.OBJ.selectedFilter==\"all\" && parseInt(obj.parent,0) == RVS.LIB.OBJ.selectedFolder);\r\n\t\t\t\tch.d = (s.length<3 && RVS.LIB.OBJ.selectedType=== obj.libraryType && filterMatch({o:obj, filter:RVS.LIB.OBJ.selectedFilter}) && ch.samefolder);\r\n\t\t\t\tch.db = (RVS.LIB.OBJ.selectedType===\"moduletemplates\" && RVS.LIB.OBJ.selectedPackage!==-1 && (\"\"+obj.package_parent!==\"true\") && obj.package_id == RVS.LIB.OBJ.selectedPackage);\r\n\t\t\t\tch.e = (RVS.LIB.OBJ.selectedType===\"moduletemplateslides\" || RVS.LIB.OBJ.selectedType===\"moduleslides\");\r\n\t\t\t\tif ( ch.b||ch.c||ch.d||ch.e||ch.db) {\r\n\t\t\t\t\t\tch.f = ((checkfavorit && obj.favorite) && (RVS.LIB.OBJ.selectedPackage==-1 ||  (\"\"+obj.package_id) == (\"\"+RVS.LIB.OBJ.selectedPackage)));\r\n\t\t\t\t\t\tch.g = ((RVS.LIB.OBJ.selectedType===\"moduletemplates\") && (s.length>2 || (((RVS.LIB.OBJ.selectedPackage==-1 && (obj.package_id==undefined ||  obj.package_parent==\"true\")) || (RVS.LIB.OBJ.selectedPackage!==-1 && (obj.package_id == RVS.LIB.OBJ.selectedPackage) && obj.package_parent!=\"true\") ))));\r\n\t\t\t\t\t\tch.h = ((RVS.LIB.OBJ.selectedType===\"moduletemplateslides\" || RVS.LIB.OBJ.selectedType===\"moduleslides\") && RVS.LIB.OBJ.selectedModule==obj.parent);\r\n\t\t\t\t\t\tch.i = (RVS.LIB.OBJ.selectedType!==\"moduletemplates\" && RVS.LIB.OBJ.selectedType!==\"moduletemplateslides\" && RVS.LIB.OBJ.selectedType!==\"moduleslides\");\r\n\t\t\t\t\t\tif (ch.f ||ch.g || ch.h || ch.i) RVS.LIB.OBJ.filteredList.push(obj.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Remove Special Item if there is one and more than 1 item visible\r\n\t\tif (RVS.LIB.OBJ.filteredList.length>1 && RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType]!==undefined && RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].upload !== undefined && (' '+RVS.LIB.OBJ.filteredList[0]).indexOf('_99999')>=0)\r\n\t\t\t RVS.LIB.OBJ.filteredList.splice(0,1);\r\n\r\n\t\t \t//if (RVS.LIB.OBJ.selectedFilter==\"all\") type+\"_99999\"\r\n\t\t// ONLY REDRAW WHEN FORCED OR FILTERED RESULT CHANGED\r\n\t\tif(_.force || JSON.stringify(RVS.LIB.OBJ.oldlist) !== JSON.stringify(RVS.LIB.OBJ.filteredList)){\r\n\t\t\tRVS.F.buildPagination({keeppage:_.keeppage, focusItem:_.focusitem});\r\n\t\t\tRVS.F.drawOverview({noanimation:_.noanimation, focusItem:_.focusItem});\r\n\t\t}\r\n\t\tRVS.LIB.OBJ.container_OutputWrap.RSScroll(\"update\");\r\n\t};\r\n\r\n\r\n\t/*\r\n\tDRAW AN OVERVIEW LIST WITH PRESELECTED FILTERS AND SIZES\r\n\t*/\r\n\tRVS.F.drawOverview = function(_) {\r\n\r\n\t\t_ = _ === undefined ? {noanimation:false} : _;\r\n\t\tRVS.LIB.OBJ.container_Output.find('.rsl_breadcrumb_wrap').remove();\r\n\r\n\r\n\t\tif (RVS.LIB.OBJ.selectedFolder!==-1 || RVS.LIB.OBJ.selectedPackage!==-1 || RVS.LIB.OBJ.selectedModule!==-1) {\r\n\t\t\tvar bread = '<div class=\"rsl_breadcrumb_wrap\">';\r\n\t\t\tbread += '<div class=\"rsl_breadcrumb\" data-folderid=\"-1\"><i class=\"material-icons\">apps</i>'+RVS_LANG.simproot+'</div>';\r\n\t\t\tbread += '<i class=\"rsl_breadcrumb_div material-icons\">keyboard_arrow_right</i>';\r\n\r\n\t\t\tvar folderlist = '';\r\n\t\t\tif (RVS.LIB.OBJ.selectedFolder!==-1) {\r\n\t\t\t\tvar pd = RVS.LIB.OBJ.selectedFolder,\r\n\t\t\t\t\tquit = 0;\r\n\r\n\t\t\t\twhile (pd !== -1 && quit!==100) {\r\n\t\t\t\t\tvar foldertype = RVS.LIB.OBJ.selectedType===\"moduleslides\" ? \"modules\" : RVS.LIB.OBJ.selectedType,\r\n\t\t\t\t\t\tsindex = RVS.F.getModuleIndex(pd,foldertype);\r\n\t\t\t\t\tif (sindex!==-1 && sindex!==\"-1\") {\r\n\t\t\t\t\t\tfolderlist = '<div class=\"rsl_breadcrumb\" data-folderid=\"'+pd+'\"><i class=\"material-icons\">folder_open</i>'+RVS.LIB.OBJ.items[foldertype][sindex].title+'</div>' + '<i class=\"rsl_breadcrumb_div material-icons\">keyboard_arrow_right</i>' + folderlist;\r\n\t\t\t\t\t\tpd = RVS.LIB.OBJ.items[foldertype][sindex].parent || -1;\r\n\t\t\t\t\t\tquit++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tquit=100;\r\n\t\t\t\t\t\tRVS.LIB.OBJ.selectedModule = -1;\r\n\t\t\t\t\t\tRVS.LIB.OBJ.selectedModuleTitle = \"\";\r\n\t\t\t\t\t\tRVS.LIB.OBJ.selectedModuleType = \"\";\r\n\t\t\t\t\t\tunselectOLItems();\r\n\t\t\t\t\t\tif (RVS.LIB.OBJ.selectedType===\"moduletemplates\")\r\n\t\t\t\t\t\t\tRVS.LIB.OBJ.selectedPackage = -1;\r\n\t\t\t\t\t\tif (RVS.LIB.OBJ.selectedType===\"modules\") {\r\n\t\t\t\t\t\t\tRVS.LIB.OBJ.selectedFolder = -1;\r\n\t\t\t\t\t\t\tRVS.F.resetAllFilters();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tRVS.F.updateFilteredList({force:true,keeppage:true,noanimation:true});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbread += folderlist;\r\n\t\t\t}\r\n\t\t\tbread += RVS.LIB.OBJ.selectedPackage!==-1 ? '<div id=\"rsl_bread_selected\" data-folderid=\"'+RVS.LIB.OBJ.selectedPackage+'\" class=\"rsl_breadcrumb\">'+RVS.LIB.OBJ.selectedPackageTitle+'</div>' : '<div id=\"rsl_bread_selected\" class=\"rsl_breadcrumb\"></div>';\r\n\t\t\tbread += RVS.LIB.OBJ.selectedModule!==-1 ? RVS.LIB.OBJ.selectedPackage!==-1 ? '<i class=\"rsl_breadcrumb_div material-icons\">keyboard_arrow_right</i>' + '<div id=\"rsl_bread_selected\" class=\"rsl_breadcrumb\">'+RVS.LIB.OBJ.selectedModuleTitle+'</div>' : '<div id=\"rsl_bread_selected\" class=\"rsl_breadcrumb\">'+RVS.LIB.OBJ.selectedModuleTitle+'</div>' : '<div id=\"rsl_bread_selected\" class=\"rsl_breadcrumb\"></div>';\r\n\t\t\tbread += '</div>';\r\n\t\t\tRVS.LIB.OBJ.container_Output.append(bread);\r\n\t\t}\r\n\r\n\r\n\r\n\t\t//HIDE ALL OLD SELECTED TYPE\r\n\t\tif (RVS.LIB.OBJ.lastSelectedType!==undefined && RVS.LIB.OBJ.lastSelectedType !== RVS.LIB.OBJ.selectedType) for (var i in RVS.LIB.OBJ.items[RVS.LIB.OBJ.lastSelectedType])  if (RVS.LIB.OBJ.items[RVS.LIB.OBJ.lastSelectedType][i].ref!==undefined) RVS.LIB.OBJ.items[RVS.LIB.OBJ.lastSelectedType][i].ref.detach();\r\n\r\n\t\tRVS.LIB.OBJ.lastSelectedType = RVS.LIB.OBJ.selectedType;\r\n\t\tRVS.LIB.OBJ.selectedPage = RVS.LIB.OBJ.selectedPage===undefined ? 1 : RVS.LIB.OBJ.selectedPage;\r\n\r\n\t\t// PREPARE AJAX LOADS\r\n\t\tRVS.LIB.OBJ.waitForLoad = [];\r\n\t\tRVS.LIB.OBJ.waitForLoadIndex = 0;\r\n\r\n\t\tif (jQuery.inArray(RVS.LIB.OBJ.selectedType,['fonticons','images','layers','modules','moduletemplateslides','moduletemplates','moduleslides','objects','svgs','videos'])>=0) {\r\n\t\t\tfor (var i in RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType]) {\r\n\t\t\t\tif(!RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].hasOwnProperty(i)) continue;\r\n\t\t\t\tvar obj = RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType][i];\r\n\t\t\t\tif (jQuery.inArray(obj.id,RVS.LIB.OBJ.pages[RVS.LIB.OBJ.selectedPage-1])>=0) {\r\n\t\t\t\t\tif (obj.ref===undefined) {\r\n\t\t\t\t\t\tif (obj.img!==undefined && ((typeof obj.img===\"object\" && obj.img.url.indexOf(\"//\")===-1) || (typeof obj.img!==\"object\" && obj.img.indexOf(\"//\")===-1)))\r\n\t\t\t\t\t\t\t\tRVS.LIB.OBJ.waitForLoad.push({librarytype:obj.libraryType, mediatype:\"img\", ind:i, id:(typeof obj.img===\"object\" ? obj.img.url : obj.img)});\r\n\r\n\t\t\t\t\t\tif (obj.video_thumb!==undefined && ((typeof obj.video_thumb===\"object\" && obj.video_thumb.url.indexOf(\"//\")===-1) || (typeof obj.video_thumb!==\"object\" && obj.video_thumb.indexOf(\"//\")===-1)))\r\n\t\t\t\t\t\t\t\tRVS.LIB.OBJ.waitForLoad.push({librarytype:obj.libraryType, mediatype:\"video\", ind:i, id:(typeof obj.video_thumb===\"object\" ? obj.video_thumb.url : obj.img)});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.loadAllMissingMedia();\r\n\t\t} else\r\n\t\tif (RVS.F[\"checkLoadedItems_\"+RVS.LIB.OBJ.selectedType]!==undefined) RVS.F[\"checkLoadedItems_\"+RVS.LIB.OBJ.selectedType]();\r\n\t};\r\n\r\n\t// Loading Missing Medias In 1 Go\r\n\tRVS.F.loadAllMissingMedia = function() {\r\n\t\tif (RVS.LIB.OBJ.waitForLoad.length>0) {\r\n\t\t\tif (RVS.LIB.OBJ.waitForLoadIndex<RVS.LIB.OBJ.waitForLoad.length) {\r\n\t\t\t\tvar half = (RVS.LIB.OBJ.waitForLoad[0].librarytype===\"layers\" || RVS.LIB.OBJ.waitForLoad[0].librarytype===\"videos\") ? Math.round(RVS.LIB.OBJ.waitForLoad.length/2) : RVS.LIB.OBJ.waitForLoad.length;\r\n\t\t\t\thalf = RVS.LIB.OBJ.waitForLoad[0].librarytype===\"videos\" ? Math.round(RVS.LIB.OBJ.waitForLoad.length/2)+\" \"+RVS_LANG.elements+\" (\"+Math.round((RVS.LIB.OBJ.waitForLoad.length/2) * 450)/100+\"MB)\" :\r\n\t\t\t\t\t\tRVS.LIB.OBJ.waitForLoad[0].librarytype===\"layers\" ? Math.round(RVS.LIB.OBJ.waitForLoad.length/2)+\" \"+RVS_LANG.elements+\" (\"+Math.round((RVS.LIB.OBJ.waitForLoad.length/2) * 25)/100+\"MB)\" :\r\n\t\t\t\t\t\tMath.round(RVS.LIB.OBJ.waitForLoad.length)+\" \"+RVS_LANG.elements+\" (\"+Math.round((RVS.LIB.OBJ.waitForLoad.length) * 1.5)/100+\"MB)\";\r\n\r\n\t\t\t\tRVS.F.ajaxRequest('load_library_image', RVS.LIB.OBJ.waitForLoad, function(response){\r\n\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\tfor (var i in response.data) {\r\n\t\t\t\t\t\t\tif(!response.data.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\t\tvar ld = response.data[i],\r\n\t\t\t\t\t\t\tobj = RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType][ld.ind];\r\n\t\t\t\t\t\t\tif (ld.mediatype===\"img\") if (typeof obj.img===\"object\") obj.img.url = ld.url; else obj.img = ld.url;\r\n\t\t\t\t\t\t\tif (ld.mediatype===\"video\") if (typeof obj.video_thumb===\"object\") obj.video_thumb.url = ld.url; else obj.video_thumb = ld.url;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tRVS.F.finalDrawOfElements();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"Could Not be loaded. Please try later.\");\r\n\t\t\t\t\t\tRVS.F.finalDrawOfElements();\r\n\t\t\t\t\t}\r\n\t\t\t\t},undefined,undefined,RVS_LANG.loadingthumbs+'<br><span style=\"font-size:17px; line-height:25px;\">'+RVS_LANG.loading+\" \"+half+'</span>');\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\tRVS.F.finalDrawOfElements();\r\n\t};\r\n\r\n\t/*\r\n\tLOAD CUSTOM ITEMS ON DEMAND in 1 GO\r\n\t*/\r\n\tRVS.F.loadCustomLibraryItems = function(type, fsize) {\r\n\t\t// PREPARE AJAX LOAD LIST\r\n\t\tvar waitList = [];\r\n\t\tfor (var i in RVS.LIB.OBJ.items[type]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[type].hasOwnProperty(i)) continue;\r\n\t\t\tvar obj = RVS.LIB.OBJ.items[type][i];\r\n\t\t\tif (jQuery.inArray(obj.id,RVS.LIB.OBJ.pages[RVS.LIB.OBJ.selectedPage-1])>=0 && obj.img==false)\r\n\t\t\t\twaitList.push({ ind:i, id:obj.id, handle:obj.handle});\r\n\t\t}\r\n\r\n\t\t// LOAD THE CUSTOM ITEMS\r\n\t\tif (waitList.length>0) {\r\n\t\t\tvar half = Math.round(waitList.length)+\" \"+RVS_LANG.elements+\" (\"+Math.round((waitList.length) * fsize)/100+\"MB)\";\r\n\r\n\t\t\tRVS.F.ajaxRequest('download_lordicon_file', {handle:waitList}, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tfor (var i in response.data) {\r\n\t\t\t\t\t\tif(!response.data.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tvar ld = response.data[i],\r\n\t\t\t\t\t\tobj = RVS.LIB.OBJ.items[type][ld.ind];\r\n\t\t\t\t\t\tobj.img = ld.url;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tRVS.F.finalDrawOfElements();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"Could Not be loaded. Please try later.\");\r\n\t\t\t\t\tRVS.F.finalDrawOfElements();\r\n\t\t\t\t}\r\n\t\t\t},undefined,undefined,RVS_LANG.loadingthumbs+'<br><span style=\"font-size:17px; line-height:25px;\">'+RVS_LANG.loading+\" \"+half+'</span>');\r\n\t\t}\r\n\t\telse\r\n\t\t\tRVS.F.finalDrawOfElements();\r\n\t}\r\n\r\n\t/*\r\n\tCREATE DUMMY ITEM IN CASE WE ARE IN CUSTOM UPLOAD MODE\r\n\t*/\r\n\tRVS.F.createLibraryDummyDownloadItem = function(type,title) {\r\n\r\n\t\t//IF NO ITEMS YET, WE NEED TO SHOW A DUMMY ITEM\r\n\t\tif (RVS.LIB.OBJ.filteredList.length===0) {\r\n\t\t\tif (RVS.LIB.OBJ[type+\"CustomItemAdded\"]===undefined || RVS.LIB.OBJ.items[type][0].handle!==\"add_custom_item\") {\r\n\t\t\t\tRVS.LIB.OBJ.items[type].unshift({\r\n\t\t\t\t\t\tid: type+\"_99999\",\r\n\t\t\t\t\t\thandle: \"add_custom_item\",\r\n\t\t\t\t\t\tlibraryType: type,\r\n\t\t\t\t\t\tparent: -1,\r\n\t\t\t\t\t\tfavorite: false,\r\n\t\t\t\t\t\ttags: [],\r\n\t\t\t\t\t\ttitle: title,\r\n\t\t\t\t\t\tver: \"1\"\r\n\t\t\t\t});\r\n\t\t\t\tRVS.LIB.OBJ[type+\"CustomItemAdded\"]=true;\r\n\t\t\t\tRVS.LIB.OBJ.items[type][0].tags.push(RVS.LIB.OBJ.selectedFilter);\r\n\t\t\t} else {\r\n\t\t\t\tRVS.LIB.OBJ.items[type][0].tags.push(RVS.LIB.OBJ.selectedFilter);\r\n\t\t\t}\r\n\t\t\tRVS.F.updateFilteredList();\r\n\t\t\tRVS.F.finalDrawOfElements();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tRVS.F.finalDrawOfElements = function() {\r\n\t\tvar d = 0;\r\n\t\t// SHOW /HIDE SIMILAR TYPES BASED ON PAGINATION\r\n\t\tfor (var i in RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].hasOwnProperty(i)) continue;\r\n\t\t\tvar obj = RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType][i];\r\n\t\t\tif (jQuery.inArray(obj.id,RVS.LIB.OBJ.pages[RVS.LIB.OBJ.selectedPage-1])>=0) {\r\n\t\t\t\td++;\r\n\t\t\t\tif ( obj.ref!==undefined && obj.folder) obj.ref.remove();\r\n\t\t\t\tobj.ref = obj.ref===undefined || obj.folder ? RVS.F.buildElement(obj) : obj.ref;\r\n\t\t\t\tobj.ref.appendTo(RVS.LIB.OBJ.container_Output);\r\n\t\t\t} else \tif (obj.ref!==undefined) obj.ref.detach();\r\n\t\t}\r\n\t\tif (RVS.LIB.OBJ.selectedType===\"moduletemplates\") RVS.F.initOnOff(RVS.LIB.OBJ.container_Output);\r\n\t\tupdateScollbarFilters();\r\n\t};\r\n\r\n\t/*\r\n\tBUILD ONE SINGLE ELEMENT IN THE OVERVIEW\r\n\t*/\r\n\tRVS.F.buildElement = function(_,withouttoolbar) {\r\n\t\t/* var folderclass = _.folder ? \"folder_library_element\" : \"\", */\r\n\t\t/* imgobjunder = jQuery('<div class=\"image_container_underlay\"></div>'), */\r\n\t\t// The id on html object should be individual and not conflicting with any other Library\r\n\t\t_.importantid = RVS.F.isNumeric(parseInt(_.id)) ? _.libraryType+'_'+_.id : _.id;\r\n\r\n\t\tvar objhtml = '<div data-objid=\"'+_.id+'\" id=\"'+_.importantid+'\" class=\"olibrary_item\">';\r\n\t\tobjhtml += '\t<div class=\"olibrary_media_wrap\"></div>';\r\n\t\tobjhtml += '\t<div class=\"olibrary_content_wrap\">';\r\n\t\tobjhtml += '\t</div>';\r\n\t\tobjhtml += '</div>';\r\n\r\n\t\tvar obj = jQuery(objhtml),\r\n\t\t\tcwrap  = obj.find('.olibrary_content_wrap'),\r\n\t\t\tiwrap = obj.find('.olibrary_media_wrap'),\r\n\t\t\tcontent =\"\",\r\n\t\t\tinfocontent=\"\",\r\n\t\t\to_ok ='<i class=\"olti_icon olti_green material-icons\">check</i>',\r\n\t\t\to_no ='<i class=\"olti_icon olti_red material-icons\">close</i>';\r\n\r\n\t\tswitch (_.libraryType) {\r\n\t\t\tcase \"moduletemplates\":\r\n\t\t\t\tvar installable = true,\r\n\t\t\t\t\taddoninstallable = true,\r\n\t\t\t\t\tpackinstallable = true;\r\n\t\t\t\tcontent = '<div class=\"olibrary_content_left\">';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_title\">'+_.title+'</div>';\r\n\t\t\t\tcontent +=_.package_parent==\"true\" ? '\t<div class=\"olibrary_content_type oc_package\">'+RVS_LANG.packageBIG+'</div>' : '\t<div class=\"olibrary_content_type oc_purple\">'+RVS_LANG.moduleBIG+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"installed_notinstalled olibrary_content_info oc_gray\">'+(_.installed ? RVS_LANG.installed : RVS_LANG.notinstalled)+'</div>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tcontent += '<div class=\"olibrary_content_right\">';\r\n\t\t\t\tcontent += '\t<i data-id=\"'+_.id+'\" data-type=\"'+_.type+'\" data-libraryType=\"'+_.libraryType+'\" class=\"olibrary_favorit material-icons '+(_.favorite?\"selected\" : \"\")+'\">star</i>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tinfocontent += '<div class=\"ol_template_info_wrap\">';\r\n\t\t\t\tinfocontent += '<div class=\"olti_title\">'+_.title+'</div>';\r\n\t\t\t\tinfocontent += _.description;\r\n\t\t\t\tinfocontent += '<div class=\"div30\"></div>';\r\n\t\t\t\tinfocontent += '<div class=\"olti_title\">'+RVS_LANG.setupnotes+'</div>';\r\n\t\t\t\tinfocontent += _.setup_notes;\r\n\t\t\t\tif (_.required!==undefined || (_.plugin_require!==undefined  && _.plugin_require!==null)) {\r\n\t\t\t\t\tinfocontent += '<div class=\"div30\"></div>';\r\n\t\t\t\t\tinfocontent += '<div class=\"olti_title\">'+RVS_LANG.requirements+'</div>';\r\n\t\t\t\t\tif (_.required!==undefined) infocontent += '<div class=\"olti_content\">'+(RVS.F.compareVersions(_.required,RVS.ENV.revision) ? o_ok : o_no)+'Slider Revolution Version '+_.required+'</div>';\r\n\r\n\r\n\t\t\t\t\tif (RVS.F.compareVersions(_.required,RVS.ENV.revision)==false) installable=false;\r\n\r\n\t\t\t\t\tif (_.plugin_require!==undefined  && _.plugin_require!==null) {\r\n\t\t\t\t\t\tfor (var pi in _.plugin_require) {\r\n\t\t\t\t\t\t\tif(!_.plugin_require.hasOwnProperty(pi)) continue;\r\n\t\t\t\t\t\t\tinfocontent += '<div class=\"olti_content\">'+(_.plugin_require[pi].installed==\"true\" || _.plugin_require[pi].installed==true? o_ok : o_no)+'<a href=\"'+_.plugin_require[pi].url+'\" target=\"_blank\" rel=\"noopener\">'+_.plugin_require[pi].name+'</a></div>';\r\n\t\t\t\t\t\t\tif (_.plugin_require[pi].installed!==\"true\" && _.plugin_require[pi].installed!==true) addoninstallable=false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tinstallable = RVS.ENV.activated===false ? false : installable;\r\n\r\n\r\n\t\t\t\t// WHICH ICON TO SHOW ON MODULES, FOLDERS, PACKAGES BASED ON ACTIVATION AND REQUIRED PLUGINS\r\n\t\t\t\tif (RVS.LIB.OBJ.context===\"editor\") {\r\n\t\t\t\t\tif (_.package_parent==\"true\")\r\n\t\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\" data-elementtype=\"package_parent\" data-title=\"'+_.title+'\" data-packageid=\"'+_.package_id+'\" class=\"material-icons ol_link_to_deeper\">folder</i></div>');\r\n\t\t\t\t\telse\r\n\t\t\t\t\tif (addoninstallable && installable)\r\n\t\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\" data-moduleid=\"'+_.id+'\" data-module_uid=\"'+_.uid+'\" data-elementtype=\"module_parent\" data-title=\"'+_.title+'\" data-packageid=\"'+_.id+'\" class=\"material-icons ol_link_to_deeper\">burst_mode</i></div>');\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">burst_mode</i></div>');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (_.package_parent==\"true\")\r\n\t\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay threeicons\"><i data-librarytype=\"'+_.libraryType+'\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i><i data-librarytype=\"'+_.libraryType+'\" data-elementtype=\"package_parent\" data-title=\"'+_.title+'\" data-packageid=\"'+_.package_id+'\" class=\"material-icons ol_link_to_deeper\">folder</i><i data-preview=\"'+_.preview+'\" data-librarytype=\"'+_.libraryType+'\" data-elementtype=\"\" class=\"material-icons ol_link_to_view\">visibility</i></div>');\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay\"><i data-librarytype=\"'+_.libraryType+'\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i><i data-librarytype=\"'+_.libraryType+'\" data-elementtype=\"\"  data-preview=\"'+_.preview+'\" class=\"material-icons ol_link_to_view\">visibility</i></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar pckg;\r\n\r\n\t\t\t\t// IF PACKAGE KID, CHECK PARRENT PACKAGE DEPENDENCIES\r\n\t\t\t\tif (_.package_id!==undefined && _.package_id!==-1) {\r\n\t\t\t\t\tpckg = isPackageInstallable({packageId:_.package_id});\r\n\t\t\t\t\tif (_.package_parent!=\"true\" && pckg.installable===false) packinstallable = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinfocontent += '<div class=\"div30\"></div>';\r\n\t\t\t\tinfocontent += '<div class=\"olti_title\">'+RVS_LANG.availableversion+'</div>';\r\n\t\t\t\tinfocontent += '<div class=\"olti_content\">'+_.version+'</div>';\r\n\t\t\t\tinfocontent += '<div class=\"div30\"></div>';\r\n\r\n\t\t\t\tvar activateadded = false;\r\n\r\n\r\n\t\t\t\t// IS THE ITEM INSTALLABLE ?\r\n\t\t\t\tif (_.package_parent!=\"true\") {\r\n\t\t\t\t\tif (RVS.ENV.activated) {\r\n\t\t\t\t\t\tif (installable)\r\n\t\t\t\t\t\t\tinfocontent += '<div data-title=\"'+_.title+'\" data-uid=\"'+_.uid+'\" class=\"olti_btn olti_install_template\"><i class=\"material-icons\">file_download</i>'+(addoninstallable ? RVS_LANG.installtemplate : RVS_LANG.installtemplateandaddons)+'</div>';\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tinfocontent += '<div data-title=\"'+_.title+'\" data-uid=\"'+_.uid+'\" class=\"olti_btn olti_install_template notinstallable\"><i class=\"material-icons\">file_download</i>'+RVS_LANG.pluginsmustbeupdated+'</div>';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tactivateadded = true;\r\n\t\t\t\t\t\tinfocontent += '<div class=\"olti_btn olti_install_template notinstallable\"><i class=\"material-icons\">file_download</i>'+RVS_LANG.licencerequired+'</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_.package_id!==undefined && _.package_id!==-1) infocontent += '<div class=\"div10\"></div>';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// IS THE PACKAGE INSTALLABLE ?\r\n\t\t\t\tif (_.package_id!==undefined && _.package_id!==-1)\r\n\t\t\t\t\tif (RVS.ENV.activated && installable)\r\n\t\t\t\t\t\tinfocontent += '<div data-package=\"'+_.package+'\" data-folderuid=\"'+_.uid+'\" data-uids=\"'+pckg.uids.toString()+'\" class=\"olti_btn olti_install_template_package\"><i class=\"material-icons\">file_download</i>'+((installable && packinstallable) ? RVS_LANG.doinstallpackage : RVS_LANG.installpackageandaddons)+'</div>';\r\n\t\t\t\t\telse\r\n\t\t\t\t\tif (!installable)\r\n\t\t\t\t\t\tinfocontent += '<div id=\"updateplugin_sc\" class=\"olti_btn olti_install_template_package\"><i class=\"material-icons\">file_download</i>'+RVS_LANG.checkversion+'</div>';\r\n\t\t\t\t\telse\r\n\t\t\t\t\tif (!activateadded) infocontent += '<div class=\"olti_btn olti_install_template_package notinstallable\"><i class=\"material-icons\">file_download</i>'+RVS_LANG.licencerequired+'</div>';\r\n\r\n\t\t\t\t//REDOWNLOAD CHECK\r\n\r\n\r\n\t\t\t\tif ((_.package_parent!=\"true\" && installable) || (_.package_id!==undefined && _.package_id!==-1 && installable /*&& packinstallable*/)) {\r\n\t\t\t\t\tinfocontent += '<div class=\"div20\"></div>';\r\n\t\t\t\t\tinfocontent += '<div class=\"olti_content\"><input type=\"checkbox\" class=\"redownloadTemplateState\"/>'+RVS_LANG.redownloadTemplate+'</div>';\r\n\t\t\t\t\tinfocontent += '<div class=\"olti_content\"><input type=\"checkbox\" class=\"createBlankPageState\"/>'+RVS_LANG.createBlankPage+'</div>';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinfocontent += '</div>';\r\n\t\t\t\tif (_.img!==undefined && typeof _.img ===\"string\") tpGS.gsap.set(iwrap,{backgroundImage:'url('+_.img+')', \"background-size\":\"cover\", backgroundPosition:\"center center\"});\r\n\t\t\t\telse\r\n\t\t\t\tif (_.img!==undefined && typeof _.img ===\"object\") {\r\n\t\t\t\t\tvar imgobj = _.img.style!==undefined ? jQuery('<div class=\"olibrary_media_style\" style=\"'+_.img.style+'\"></div>') : jQuery('<div class=\"olibrary_media_style\"></div>');\r\n\t\t\t\t\tif (_.img.url!==undefined && _.img.url.length>3)  tpGS.gsap.set(imgobj,{backgroundImage:\"url(\"+_.img.url+\")\"});\r\n\t\t\t\t\tiwrap.append(imgobj);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"moduleslides\":\r\n\t\t\tcase \"moduletemplateslides\":\r\n\r\n\r\n\t\t\t\tvar installable = true,\r\n\t\t\t\t\tpackinstallable = true;\r\n\t\t\t\tcontent = '<div class=\"olibrary_content_left\">';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_title\">'+_.title+'</div>';\r\n\t\t\t\tcontent +=_.package_parent==\"true\" ? '\t<div class=\"olibrary_content_type oc_package\">'+RVS_LANG.packageBIG+'</div>' : '\t<div class=\"olibrary_content_type oc_purple\">'+RVS_LANG.moduleBIG+'</div>';\r\n\r\n\t\t\t\tif (_.libraryType===\"moduletemplateslides\")\r\n\t\t\t\t\tif (_.required!==undefined || (_.plugin_require!==undefined  && _.plugin_require!==null)) {\r\n\t\t\t\t\t\tif (_.required !==undefined && RVS.F.compareVersions(_.required,RVS.ENV.revision)==false) installable=false;\r\n\t\t\t\t\t\tif (_.plugin_require!==undefined  && _.plugin_require!==null)\r\n\t\t\t\t\t\t\tfor (var pi in _.plugin_require) {\r\n\t\t\t\t\t\t\t\tif(!_.plugin_require.hasOwnProperty(pi)) continue;\r\n\t\t\t\t\t\t\t\tif (_.plugin_require[pi].installed!=\"true\" && _.plugin_require[pi].installed!==true && installable) {\r\n\t\t\t\t\t\t\t\t\tinstallable=false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t// SHOW THE LAYERS IF SLIDE SELECTED\r\n\t\t\t\tif (RVS.LIB.OBJ.depth===\"layers\") {\r\n\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\"  data-parenttitle=\"'+_.parenttitle+'\"  data-parent=\"'+_.parent+'\" data-id=\"'+_.id+'\" data-slideid=\"'+_.slideid+'\" data-slidetitle=\"'+_.title+'\" class=\"material-icons ol_link_to_deeper\">layers</i></div>');\r\n\t\t\t\t\tsetObjBg(_,iwrap);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// IF INSTALLABLE, ADD \"INSTALL\"\r\n\r\n\t\t\t\t\tif (installable) {\r\n\t\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\"  data-parenttitle=\"'+_.parenttitle+'\"  data-parent=\"'+_.parent+'\" data-id=\"'+_.id+'\" data-parentuid=\"'+_.module_uid+'\" class=\"material-icons ol_link_to_add\">add</i></div>');\r\n\t\t\t\t\t\tcontent += _.libraryType===\"moduletemplateslides\" ? '\t<div class=\"installed_notinstalled olibrary_content_info oc_gray\">'+(_.installed ? RVS_LANG.installed : RVS_LANG.notinstalled)+'</div>' : '';\r\n\t\t\t\t\t\tcontent += '</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_.libraryType===\"moduletemplateslides\") {\r\n\t\t\t\t\t\tif (_.img!==undefined && typeof _.img ===\"string\") tpGS.gsap.set(iwrap,{backgroundImage:'url('+_.img+')', \"background-size\":\"cover\", backgroundPosition:\"center center\"});\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\tif (_.img!==undefined && typeof _.img ===\"object\") {\r\n\t\t\t\t\t\t\tvar imgobj = _.img.style!==undefined ? jQuery('<div class=\"olibrary_media_style\" style=\"'+_.img.style+'\"></div>') : jQuery('<div class=\"olibrary_media_style\"></div>');\r\n\t\t\t\t\t\t\tif (_.img.url!==undefined && _.img.url.length>3)  tpGS.gsap.set(imgobj,{backgroundImage:\"url(\"+_.img.url+\")\"});\r\n\t\t\t\t\t\t\tiwrap.append(imgobj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else \tsetObjBg(_,iwrap);\r\n\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"svgs\":\r\n\t\t\t\tcontent = '<div class=\"olibrary_content_left\">';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_title\">'+_.title+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_type oc_green\">'+RVS_LANG.iconBIG+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_info oc_gray\">'+RVS_LANG.svgBIG+'</div>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tcontent += '<div class=\"olibrary_content_right\">';\r\n\t\t\t\tcontent += '\t<i data-id=\"'+_.handle+'\" data-type=\"'+_.type+'\" data-libraryType=\"'+_.libraryType+'\" class=\"olibrary_favorit material-icons '+(_.favorite?\"selected\" : \"\")+'\">star</i>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\" data-handle=\"'+_.handle+'\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i></div>');\r\n\t\t\t\tif (_.img!==undefined) {\r\n\t\t\t\t\tjQuery.get(_.img, function(data) {\r\n\t\t\t\t\t\t  var div = RVS.F.cE({cN: \"ol_svg_preview\"});\r\n\t\t\t\t\t\t  div.innerHTML = new XMLSerializer().serializeToString(data.documentElement);\r\n\t\t\t\t\t\t  iwrap.append(div);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t\tiwrap[0].className += \" patternbg\";\r\n\t\t\tbreak;\r\n\t\t\tcase \"fonticons\":\r\n\t\t\t\tcontent = '<div class=\"olibrary_content_left\">';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_title\">'+_.title+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_type oc_green\">'+RVS_LANG.iconBIG+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_info oc_gray\">'+RVS_LANG.fontBIG+'</div>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tcontent += '<div class=\"olibrary_content_right\">';\r\n\t\t\t\tcontent += '\t<i data-id=\"'+_.handle+'\" data-type=\"'+_.type+'\" data-libraryType=\"'+_.libraryType+'\" class=\"olibrary_favorit material-icons '+(_.favorite?\"selected\" : \"\")+'\">star</i>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\" data-handle=\"'+_.handle+'\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i></div>');\r\n\t\t\t\tvar iconclassext = \"\";\r\n\r\n\t\t\t\tif (_.classextension!==undefined) {\r\n\t\t\t\t\tfor (var i in _.classextension) {\r\n\t\t\t\t\t\tif(!_.classextension.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\ticonclassext += \" \"+_.classextension[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (_.tags[0]===\"MaterialIcons\")\r\n\t\t\t\t\tiwrap.append('<i class=\"fonticonobj material-icons\">'+_.handle.replace(\".\",\"\")+'</i>');\r\n\t\t\t\telse\r\n\t\t\t\t\tiwrap.append('<i class=\"fonticonobj '+iconclassext+' '+_.handle.replace(\".\",\"\")+'\"></i>');\r\n\t\t\t\tiwrap[0].className += \" patternbg\";\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"modules\":\r\n\t\t\t\tlet favorites = typeof RS_SHORTCODE_FAV !== 'undefined' && RS_SHORTCODE_FAV.modules ? RS_SHORTCODE_FAV.modules : false;\r\n\r\n\t\t\t\tif(favorites) {\r\n\t\t\t\t\tfor(let fav in favorites) {\r\n\t\t\t\t\t\tif(!favorites.hasOwnProperty(fav)) continue;\r\n\t\t\t\t\t\tif(favorites[fav] === _.id) {\r\n\t\t\t\t\t\t\t_.favorite = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (_.premium) obj.append('<div class=\"rs_lib_premium_wrap'+(RVS.ENV.activated ? '' : ' rs_n_ac_n') +'\"><div class=\"rs_lib_premium_lila\">'+RVS_LANG.premium+'</div><div class=\"rs_lib_premium_red\"><i class=\"material-icons\">visibility_off</i>'+RVS_LANG.premium+'</div><div class=\"rs_lib_premium_red_hover\"><i class=\"material-icons\">visibility_off</i>'+RVS_LANG.premiumunlock+'</div></div>');\r\n\t\t\t\tcontent = '<div class=\"olibrary_content_left\">';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_title\">'+_.title+'</div>';\r\n\r\n\t\t\t\tif (_.folder)\r\n\t\t\t\t\tcontent += '\t<div class=\"olibrary_content_type oc_package\">'+RVS_LANG.folderBIG+'</div>';\r\n\t\t\t\telse\r\n\t\t\t\t\tcontent += '\t<div class=\"olibrary_content_type oc_purple\">'+RVS_LANG.moduleBIG+'</div>';\r\n\t\t\t\tif (!_.folder) content += '\t<div class=\"olibrary_content_info oc_gray\">'+_.type+'</div>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tcontent += '<div class=\"olibrary_content_right\">';\r\n\t\t\t\tcontent += '\t<i data-id=\"'+_.id+'\" data-type=\"'+_.type+'\" data-libraryType=\"'+_.libraryType+'\" class=\"olibrary_favorit material-icons '+(_.favorite?\"selected\" : \"\")+'\">star</i>';\r\n\t\t\t\tcontent += '</div>';\r\n\r\n\t\t\t\tif (_.folder) {\r\n\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\" data-folderid=\"'+_.id+'\" data-elementtype=\"folder_parent\" data-title=\"'+_.title+'\" data-packageid=\"'+_.package_id+'\" class=\"material-icons ol_link_to_deeper\">folder</i></div>');\r\n\t\t\t\t\tfor (var i=1;i<=4;i++) {\r\n\t\t\t\t\t\tvar sio = jQuery('<div class=\"folder_img_placeholder folder_img_'+i+'\"></div>');\r\n\t\t\t\t\t\tif (_.children!==undefined && _.children.length>=i) {\r\n\r\n\t\t\t\t\t\t\t// IT HAS CHILDREN\r\n\t\t\t\t\t\t\tvar _childindex = RVS.F.getSliderIndex(_.children[i-1]);\r\n\t\t\t\t\t\t\tif (_childindex!==-1) setObjBg(RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType][_childindex],sio);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tiwrap.append(sio);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tiwrap.addClass(\"obj_med_darkbg\");\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (RVS.LIB.OBJ.context===\"editor\") {\r\n\t\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\" data-moduleid=\"'+_.id+'\" data-folderid=\"'+_.id+'\" data-elementtype=\"module_parent\" data-title=\"'+_.title+'\" data-packageid=\"'+_.id+'\" class=\"material-icons ol_link_to_deeper\">burst_mode</i></div>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * RVS.LIB.OBJ.shortcode_generator will equal true for the Gutenberg wizard\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\tif(!RVS.LIB.OBJ.shortcode_generator) {\r\n\t\t\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay\"><i data-librarytype=\"'+_.libraryType+'\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i><i data-librarytype=\"'+_.libraryType+'\" data-elementtype=\"\" data-preview=\"'+_.preview+'\"  class=\"material-icons ol_link_to_view\">visibility</i></div>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i></div>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetObjBg(_,iwrap);\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"objects\":\r\n\t\t\t\tcontent = '<div class=\"olibrary_content_left\">';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_title\">'+_.title+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_type oc_cyan\">'+RVS_LANG.objectBIG+'</div>';\r\n\t\t\t\tcontent += '\t<div data-w=\"'+_.width+'\" data-h=\"'+_.height+'\" id=\"sizeinfo_'+_.libraryType+'_'+_.id+'\" class=\"olibrary_content_info oc_gray\">'+_.width+'x'+_.height+'</div>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tcontent += '<div class=\"olibrary_content_right\">';\r\n\t\t\t\tcontent += '\t<i data-id=\"'+_.id+'\" data-type=\"'+_.type+'\" data-libraryType=\"'+_.libraryType+'\" class=\"olibrary_favorit material-icons '+(_.favorite?\"selected\" : \"\")+'\">star</i>';\r\n\t\t\t\tcontent += '</div>';\r\n\r\n\t\t\t\tif (RVS.ENV.activated===false)\r\n\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay\"><div class=\"avtivationicon\"><i class=\"material-icons\">not_interested</i>'+RVS_LANG.licencerequired+'</div></div>');\r\n\t\t\t\telse\r\n\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay\"><div class=\"olibrary_addimage_wrapper\"><div data-id=\"'+_.id+'\" data-size=\"xs\" data-librarytype=\"'+_.libraryType+'\" class=\"ol_link_to_add_image\">xs</div><div data-id=\"'+_.id+'\" data-size=\"s\" data-librarytype=\"'+_.libraryType+'\" class=\"ol_link_to_add_image\">s</div><div data-id=\"'+_.id+'\" data-size=\"m\" data-librarytype=\"'+_.libraryType+'\" class=\"ol_link_to_add_image\">m</div><div data-id=\"'+_.id+'\" data-size=\"l\" data-librarytype=\"'+_.libraryType+'\" class=\"ol_link_to_add_image\">l</div><div data-id=\"'+_.id+'\" data-size=\"o\" data-librarytype=\"'+_.libraryType+'\" class=\"ol_link_to_add_image\">o</div></div></div>');\r\n\t\t\t\tif (_.img!==undefined && typeof _.img ===\"string\") {\r\n\t\t\t\t\tvar imgobj = jQuery('<img class=\"olib_png_obj\" src=\"'+_.img+'\">');\r\n\t\t\t\t\tiwrap.append(imgobj);\r\n\t\t\t\t} else\r\n\t\t\t\tif (_.img!==undefined && typeof _.img ===\"object\") {\r\n\t\t\t\t\tvar imgobj = _.img.style!==undefined ? jQuery('<div class=\"olibrary_media_style\" style=\"'+_.img.style+'\"></div>') : jQuery('<div class=\"olibrary_media_style\"></div>');\r\n\t\t\t\t\tif (_.img.url!==undefined && _.img.url.length>3)  tpGS.gsap.set(imgobj,{backgroundImage:\"url(\"+_.img.url+\")\", backgroundRepeat:\"no-repeat\",\"background-size\":\"contain\", backgroundPosition:\"center center\"});\r\n\t\t\t\t\tiwrap.append(imgobj);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tiwrap[0].className += \" patternbg\";\r\n\t\t\tbreak;\r\n\t\t\tcase \"images\":\r\n\t\t\t\tcontent = '<div class=\"olibrary_content_left\">';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_title\">'+_.title+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_type oc_blue\">'+RVS_LANG.imageBIG+'</div>';\r\n\t\t\t\tcontent += '\t<div data-w=\"'+_.width+'\" data-h=\"'+_.height+'\" id=\"sizeinfo_'+_.libraryType+'_'+_.id+'\" class=\"olibrary_content_info oc_gray\">'+_.width+'x'+_.height+'</div>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tcontent += '<div class=\"olibrary_content_right\">';\r\n\t\t\t\tcontent += '\t<i data-id=\"'+_.id+'\" data-type=\"'+_.type+'\" data-libraryType=\"'+_.libraryType+'\" class=\"olibrary_favorit material-icons '+(_.favorite?\"selected\" : \"\")+'\">star</i>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tif (RVS.ENV.activated===false)\r\n\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay\"><div class=\"avtivationicon\"><i class=\"material-icons\">not_interested</i>'+RVS_LANG.licencerequired+'</div></div>');\r\n\t\t\t\telse\r\n\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay\"><div class=\"olibrary_addimage_wrapper\"><div data-id=\"'+_.id+'\" data-size=\"xs\" data-librarytype=\"'+_.libraryType+'\" class=\"ol_link_to_add_image\">xs</div><div data-id=\"'+_.id+'\" data-size=\"s\" data-librarytype=\"'+_.libraryType+'\" class=\"ol_link_to_add_image\">s</div><div data-id=\"'+_.id+'\" data-size=\"m\" data-librarytype=\"'+_.libraryType+'\" class=\"ol_link_to_add_image\">m</div><div data-id=\"'+_.id+'\" data-size=\"l\" data-librarytype=\"'+_.libraryType+'\" class=\"ol_link_to_add_image\">l</div><div data-id=\"'+_.id+'\" data-size=\"o\" data-librarytype=\"'+_.libraryType+'\" class=\"ol_link_to_add_image\">o</div></div></div>');\r\n\r\n\t\t\t\tif (_.img!==undefined && typeof _.img ===\"string\") tpGS.gsap.set(iwrap,{backgroundImage:'url('+_.img+')', \"background-repeat\":\"no-repeat\", \"background-size\":\"cover\", backgroundPosition:\"center center\", backgroundRepeat:\"no-repeat\"});\r\n\t\t\t\telse\r\n\t\t\t\tif (_.img!==undefined && typeof _.img ===\"object\") {\r\n\t\t\t\t\tvar imgobj = _.img.style!==undefined ? jQuery('<div class=\"olibrary_media_style\" style=\"'+_.img.style+'\"></div>') : jQuery('<div class=\"olibrary_media_style\"></div>');\r\n\t\t\t\t\tif (_.img.url!==undefined && _.img.url.length>3)  tpGS.gsap.set(imgobj,{backgroundImage:\"url(\"+_.img.url+\")\"});\r\n\t\t\t\t\tiwrap.append(imgobj);\r\n\t\t\t\t}\r\n\t\t\t\t\tiwrap[0].className += \" patternbg\";\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"videos\":\r\n\t\t\t\tcontent = '<div class=\"olibrary_content_left\">';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_title\">'+_.title+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_type oc_blue\">'+RVS_LANG.videoBIG+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_info oc_gray\">'+_.width+'x'+_.height+'</div>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tcontent += '<div class=\"olibrary_content_right\">';\r\n\t\t\t\tcontent += '\t<i data-id=\"'+_.id+'\" data-type=\"'+_.type+'\" data-libraryType=\"'+_.libraryType+'\" class=\"olibrary_favorit material-icons '+(_.favorite?\"selected\" : \"\")+'\">star</i>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tinfocontent += '<div class=\"ol_template_info_wrap videopreview\">';\r\n\t\t\t\tinfocontent += '</div>';\r\n\r\n\t\t\t\tobj[0].className += \" show_video_on_hover\";\r\n\t\t\t\tobj[0].dataset.videosource=_.video_thumb.url;\r\n\r\n\t\t\t\tif (RVS.ENV.activated===false)\r\n\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay\"><div class=\"avtivationicon\"><i class=\"material-icons\">not_interested</i>'+RVS_LANG.licencerequired+'</div></div>');\r\n\t\t\t\telse\r\n\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\" data-id=\"'+_.id+'\" data-handle=\"'+_.handle+'\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i></div>');\r\n\r\n\r\n\t\t\t\tiwrap[0].dataset.videosource=_.video_thumb.url;\r\n\t\t\t\tif (_.img!==undefined && typeof _.img ===\"string\") tpGS.gsap.set(iwrap,{backgroundImage:'url('+_.img+')', \"background-repeat\":\"no-repeat\", \"background-size\":\"cover\", backgroundPosition:\"center center\"});\r\n\t\t\t\telse\r\n\t\t\t\tif (_.img!==undefined && typeof _.img ===\"object\") {\r\n\t\t\t\t\tvar imgobj = _.img.style!==undefined ? jQuery('<div class=\"olibrary_media_style\" style=\"'+_.img.style+'\"></div>') : jQuery('<div class=\"olibrary_media_style\"></div>');\r\n\t\t\t\t\tif (_.img.url!==undefined && _.img.url.length>3)  tpGS.gsap.set(imgobj,{backgroundImage:\"url(\"+_.img.url+\")\"});\r\n\t\t\t\t\tiwrap.append(imgobj);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"layers\":\r\n\t\t\t\t_.title = RVS.F.capitaliseAll(_.title.replace(/[_-]/g,' '));\r\n\t\t\t\tcontent = '<div class=\"olibrary_content_left\">';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_title\">'+_.title+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_type oc_blue\">'+RVS_LANG.layersBIG+'</div>';\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_info oc_gray\">'+_.width+'x'+_.height+'</div>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tcontent += '<div class=\"olibrary_content_right\">';\r\n\t\t\t\tcontent += '\t<i data-id=\"'+_.id+'\" data-type=\"'+_.type+'\" data-libraryType=\"'+_.libraryType+'\" class=\"olibrary_favorit material-icons '+(_.favorite?\"selected\" : \"\")+'\">star</i>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t\tinfocontent += '<div class=\"ol_template_info_wrap videopreview\">';\r\n\t\t\t\tinfocontent += '</div>';\r\n\r\n\t\t\t\tobj[0].className += \" show_video_on_hover\";\r\n\t\t\t\tobj[0].dataset.videosource=_.video_thumb.url;\r\n\r\n\t\t\t\tif (RVS.ENV.activated===false)\r\n\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay\"><div class=\"avtivationicon\"><i class=\"material-icons\">not_interested</i>'+RVS_LANG.licencerequired+'</div></div>');\r\n\t\t\t\telse\r\n\t\t\t\t\tobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"'+_.libraryType+'\" data-id=\"'+_.id+'\" data-handle=\"'+_.handle+'\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i></div>');\r\n\r\n\r\n\t\t\t\tiwrap[0].dataset.videosource=_.video_thumb.url;\r\n\t\t\t\tif (_.img!==undefined && typeof _.img ===\"string\") tpGS.gsap.set(iwrap,{backgroundImage:'url('+_.img+')', \"background-repeat\":\"no-repeat\", \"background-size\":\"cover\", backgroundPosition:\"center center\"});\r\n\t\t\t\telse\r\n\t\t\t\tif (_.img!==undefined && typeof _.img ===\"object\") {\r\n\t\t\t\t\tvar imgobj = _.img.style!==undefined ? jQuery('<div class=\"olibrary_media_style\" style=\"'+_.img.style+'\"></div>') : jQuery('<div class=\"olibrary_media_style\"></div>');\r\n\t\t\t\t\tif (_.img.url!==undefined && _.img.url.length>3)  tpGS.gsap.set(imgobj,{backgroundImage:\"url(\"+_.img.url+\")\", backgroundSize:\"cover\"});\r\n\t\t\t\t\tiwrap.append(imgobj);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tif (RVS.F[\"newObjectLibraryItem_\"+_.libraryType]!==undefined) {\r\n\t\t\t\t\tvar details = RVS.F[\"newObjectLibraryItem_\"+_.libraryType](_,obj,iwrap);\r\n\t\t\t\t\tif (details.content!==undefined) content += details.content;\r\n\t\t\t\t\tif (details.infocontent!==undefined)  infocontent += details.infocontent;\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\tif (content!==\"\") cwrap.append(content);\r\n\t\tif (infocontent!==\"\") obj.append(infocontent);\r\n\r\n\r\n\t\t// CALL SELECTBOXES ON CUSTOM ELEMENTS\r\n\t\tif (RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType]!==undefined && RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].upload!==undefined) {\r\n\t\t\tvar sel = obj.find('.olibrary_custom_tagselector');\r\n\t\t\tif (_.tags!==undefined && _.tags[0]!==undefined && _.tags.length>0 && _.tags[0]!==\"All\") sel.val(_.tags[0]); else sel.val(\"all\");\r\n\t\t\tif (sel!==undefined && sel.length>0) sel.ddTP();\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\t};\r\n\r\n\tRVS.F.getCustomTagsOptions = function(type) {\r\n\t\t\tvar opts = '<option value=\"all\">All</option>';\r\n\t\t\tif (RVS.LIB.OBJ.types[type]===undefined || RVS.LIB.OBJ.types[type].tags===undefined) return \"\";\r\n\t\t\tfor (var i in RVS.LIB.OBJ.types[type].tags) {\r\n\t\t\t\tif (!RVS.LIB.OBJ.types[type].tags.hasOwnProperty(i)) continue;\r\n\t\t\t\tvar optname = RVS.LIB.OBJ.types[type].tags[i];\r\n\t\t\t\toptname = optname === undefined ? \"All\" : optname;\r\n\t\t\t\topts = opts+'<option value=\"'+i+'\">'+RVS.LIB.OBJ.types[type].tags[i]+'</option>';\r\n\t\t\t}\r\n\t\t\treturn opts;\r\n\t\t}\r\n\r\n\r\n\tfunction setObjBg(_,imgobj) {\r\n\t\tvar\timgsrc = _.bg.src!==undefined && _.bg.src.length>3 ? _.bg.src : RVS.ENV.plugin_url+'admin/assets/images/sources/'+_.source+\".png\",\r\n\t\t\tstyl = _.bg.style!==undefined ? _.bg.style : {};\r\n\t\t\tif (Array.isArray(styl)) styl = RVS.F.toObject(styl);\r\n\t\tswitch (_.bg.type) {\r\n\t\t\tcase \"image\":\r\n\t\t\t\tstyl.backgroundImage = \"url(\"+imgsrc+\")\";\r\n\t\t\t\ttpGS.gsap.set(imgobj,styl);\r\n\t\t\tbreak;\r\n\t\t\tcase \"color\":\r\n\t\t\tcase \"colored\":\r\n\t\t\tcase \"solid\":\r\n\t\t\t\tvar colval = window.RSColor.get(styl[\"background-color\"]);\r\n\t\t\t\tif (colval.indexOf(\"gradient\")>=0)\r\n\t\t\t\t\ttpGS.gsap.set(imgobj,{backgroundImage:colval});\r\n\t\t\t\telse\r\n\t\t\t\t\ttpGS.gsap.set(imgobj,{backgroundColor:colval});\r\n\t\t\tbreak;\r\n\t\t\tcase \"transparent\":\r\n\t\t\t\ttpGS.gsap.set(imgobj,{backgroundImage:\"url(\"+RVS.ENV.plugin_url+'admin/assets/images/sources/'+(_.source===undefined ? \"gallery\" : _.source)+\".png)\", backgroundRepeat:\"no-repeat\", backgroundSize:\"cover\"});\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.changeOLIBToFolder = function(folder) {\r\n\t\tRVS.LIB.OBJ.selectedFolder = folder;\r\n\t\tRVS.F.resetAllFilters();\r\n\t\tRVS.F.updateFilteredList({force:true,keeppage:false,noanimation:false});\r\n\t}\r\n\r\n\r\n\t/*\r\n\tBUILD THE PAGINATION BASED ON THE CURRENT FILTERS\r\n\t*/\r\n\tRVS.F.buildPagination = function(_) {\r\n\r\n\t\tvar maxamount,\r\n\t\t\textender,\r\n\t\t\tdbl,\r\n\t\t\tcpage = RVS.F.getCookie(\"rs6_library_pagination\");\r\n\r\n\t\tRVS.C.ol_pagination = RVS.C.ol_pagination==undefined ?  jQuery('#ol_pagination') : RVS.C.ol_pagination;\r\n\t\tmaxamount = extender = dbl = getMaxItemOnPage();\r\n\t\tjQuery('#ol_right').scrollTop(0);\r\n\t\t_ = _===undefined ? {keeppage:false} : _;\r\n\r\n\t\t// REBUILD PAGINATION DROPDOWN\r\n\t\tif (RVS.LIB.OBJ.maxAmountPerPage!==maxamount) {\r\n\t\t\tRVS.C.ol_pagination.ddTP('destroy');\r\n\t\t\tRVS.LIB.OBJ.maxAmountPerPage=maxamount;\r\n\t\t\tvar options = RVS.C.ol_pagination[0].options;\r\n\r\n\t\t\tfor (var i=0;i<=4;i++) {\r\n\t\t\t\tvar opt = options[i];\r\n\t\t\t\topt.value = dbl;\r\n\t\t\t\topt.selected = (opt.value===cpage);\r\n\t\t\t\topt.innerHTML = RVS_LANG.show+\" \"+dbl+\" \"+RVS_LANG.perpage;\r\n\t\t\t\tdbl = dbl + extender;\r\n\t\t\t}\r\n\t\t\tRVS.C.ol_pagination.ddTP();\r\n\t\t}\r\n\r\n\r\n\t\tif (RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].length<maxamount) {\r\n\t\t\tRVS.LIB.OBJ.container_Library.find('#ol_footer .rs_fh_right').hide();\r\n\t\t//\tRVS.LIB.OBJ.container_Pagination.val(\"all\");\r\n\t\t} else {\r\n\r\n\t\t\tRVS.LIB.OBJ.container_Library.find('#ol_footer .rs_fh_right').show();\r\n\t\t}\r\n\r\n\r\n\t\tRVS.LIB.OBJ.selectedPage = !_.keeppage ? 1 : jQuery('.page_button.ol_pagination.selected').length>0 ? jQuery('.page_button.ol_pagination.selected').data('page') : 1;\r\n\r\n\t\tvar a = RVS.LIB.OBJ.container_Pagination[0].value || 4,\r\n\t\t\tcounter = 0;\r\n\r\n\t\tRVS.LIB.OBJ.pageAmount = a===\"all\" || parseInt(a,0)===null || parseInt(a,0)===0 ? 1 : Math.ceil(RVS.LIB.OBJ.filteredList.length / parseInt(a,0));\r\n\t\tRVS.LIB.OBJ.itemPerPage = a === \"all\" ? 99999 : parseInt(a,0);\r\n\t\tRVS.LIB.OBJ.itemPerPage = RVS.LIB.OBJ.selectedFolder!=-1 ? RVS.LIB.OBJ.itemPerPage-1 : RVS.LIB.OBJ.itemPerPage;\r\n\t\tRVS.LIB.OBJ.container_PaginationWrap[0].innerHTML = \"\";\r\n\t\tvar sel;\r\n\t\tRVS.LIB.OBJ.selectedPage = RVS.LIB.OBJ.selectedPage>RVS.LIB.OBJ.pageAmount ? RVS.LIB.OBJ.pageAmount : RVS.LIB.OBJ.selectedPage;\r\n\r\n\r\n\t\t// BUILD THE PAGINATION BUTTONS\r\n\t\tif (RVS.LIB.OBJ.pageAmount>1){\r\n\t\t\tfor (var i=1;i<=RVS.LIB.OBJ.pageAmount;i++) {\r\n\r\n\t\t\t\tsel = i!==RVS.LIB.OBJ.selectedPage ? \"\" : \"selected\";\r\n\t\t\t\tRVS.LIB.OBJ.container_PaginationWrap[0].innerHTML += '<div data-page=\"'+i+'\" class=\"'+sel+' page_button ol_pagination\">'+i+'</div>';\r\n\t\t\t\tif (i===1)\r\n\t\t\t\t\tRVS.LIB.OBJ.container_PaginationWrap[0].innerHTML += '<div data-page=\"-9999\" class=\"page_button ol_pagination\">...</div>';\r\n\t\t\t\telse\r\n\t\t\t\tif (i===RVS.LIB.OBJ.pageAmount-1)\r\n\t\t\t\t\tRVS.LIB.OBJ.container_PaginationWrap[0].innerHTML += '<div data-page=\"9999\" class=\"page_button ol_pagination\">...</div>';\r\n\t\t\t}\r\n\t\t}\r\n\t\t// BUILD THE PAGES LIST\r\n\t\tRVS.LIB.OBJ.pages = [];\r\n\t\tRVS.LIB.OBJ.pages.push([]);\r\n\r\n\t\tfor (var f in RVS.LIB.OBJ.filteredList) {\r\n\r\n\t\t\tif(!RVS.LIB.OBJ.filteredList.hasOwnProperty(f)) continue;\r\n\r\n\t\t\tRVS.LIB.OBJ.pages[RVS.LIB.OBJ.pages.length-1].push(RVS.LIB.OBJ.filteredList[f]);\r\n\t\t\tcounter++;\r\n\t\t\tif (counter===RVS.LIB.OBJ.itemPerPage) {\r\n\t\t\t\tcounter = 0;\r\n\t\t\t\tRVS.LIB.OBJ.pages.push([]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsmartPagination();\r\n\r\n\r\n\t};\r\n\r\n\r\n\r\n\t// BUILD THE OBJECT LIBRARY\r\n\tRVS.F.buildObjectLibrary = function(hideUpdateBtn) {\r\n\t\tvar _html = '<div id=\"objectlibrary\" class=\"rs_overview _TPRB_\">';\r\n\t\t_html +='\t<div class=\"rb_the_logo\">SR</div>';\r\n\t\t_html += '\t<div id=\"ol_filters_wrap\">';\r\n\t\t_html += '\t\t<div id=\"ol_filters\"></div>';\r\n\t\t_html +='\t</div>';\r\n\t\t_html +='\t<div id=\"upload_custom_files\"></div>'\r\n\t\t_html +='\t<div id=\"ol_right\">';\r\n\t\t_html +='\t\t<div id=\"ol_header\" class=\"overview_header_footer\">';\r\n\t\t_html +='\t\t\t\t<div class=\"rs_fh_left\"><input class=\"flat_input\" id=\"searchobjects\" type=\"text\" placeholder=\"Search Modules ...\"></div>';\r\n\t\t_html +='\t\t\t\t<div class=\"rs_fh_right\">';\r\n\t\t_html +=' \t\t\t\t\t<div id=\"obj_fil_favorite\"><i class=\"material-icons\">star</i>'+RVS_LANG.ol_favorite+'</div>';\r\n\t\t_html +='\t\t\t\t\t<div id=\"ol_modulessorting\"><i class=\"material-icons reset_select\" id=\"reset_objsorting\">replay</i><select id=\"sel_olibrary_sorting\" data-evt=\"updateObjectLibraryOverview\" data-evtparam=\"#reset_objsorting\" class=\"overview_sortby tos2 nosearchbox callEvent\" data-theme=\"autowidth\" tabindex=\"-1\" aria-hidden=\"true\"><option value=\"datedesc\">'+RVS_LANG.sortbycreation+'</option><option value=\"date\">'+RVS_LANG.creationascending+'</option><option value=\"title\">'+RVS_LANG.sortbytitle+'</option><option value=\"titledesc\">'+RVS_LANG.titledescending+'</option></select></div>';\r\n\t\tif(!hideUpdateBtn)\r\n\t\t\t_html +=' \t\t\t\t<div id=\"obj_updatefromserver\"><i class=\"material-icons\">update</i>'+RVS_LANG.updatefromserver+'</div>';\r\n\t\t_html +=' \t\t\t\t\t<div id=\"obj_addsliderasmodal\">'+RVS_LANG.sliderasmodal+'<input id=\"obj_addsliderasmodal_input\" data-r=\"modal\" class=\"scblockinput\" type=\"checkbox\" value=\"off\"></div>';\r\n\t\t_html +='\t\t\t\t\t<i id=\"ol_close\" class=\"material-icons\">close</i>';\r\n\t\t_html +='\t\t\t\t</div>';\r\n\t\t_html +='\t\t\t\t<div class=\"tp-clearfix\"></div>';\r\n\t\t_html +='\t\t</div>';\r\n\t\t_html +='\t\t<div id=\"ol_results_wrap\">';\r\n\t\t_html +=' \t\t\t<div id=\"ol_right_underlay\"></div>';\r\n\t\t_html +='\t\t\t<div id=\"ol_results\"></div>';\r\n\t\t_html +='\t\t</div>';\r\n\t\t_html +='\t\t<div id=\"ol_footer\" class=\"overview_header_footer\">';\r\n\t\t_html +='\t\t\t<div class=\"rs_fh_left\"><div id=\"rs_copyright\">'+RVS_LANG.copyrightandlicenseinfo+'</div><div id=\"rs_extra_objlib_info\"></div></div>';\r\n\t\t_html +='\t\t\t<div class=\"rs_fh_right\"><div id=\"ol_pagination_wrap\" class=\"ol-pagination\"></div>';\r\n\t\t_html +='\t\t\t\t<select id=\"ol_pagination\" data-evt=\"updateObjectLibraryOverview\" class=\"overview_pagination tos2 nosearchbox callEvent\" data-theme=\"nomargin\"><option selected=\"selected\" value=\"4\"></option><option value=\"8\"></option><option value=\"16\"></option><option value=\"32\"></option><option value=\"64\"></option><option value=\"all\">Show All</option></select>';\r\n\t\t_html +='\t\t\t</div>';\r\n\t\t_html +='\t\t\t<div class=\"tp-clearfix\"></div>';\r\n\t\t_html +='\t\t</div>';\r\n\t\t_html +='\t</div>';\r\n\t\t_html += '</div>';\r\n\r\n\t\tRVS.LIB.OBJ.container_Library = jQuery(_html);\r\n\t\tRVS.LIB.OBJ.container_Underlay = RVS.LIB.OBJ.container_Library.find('#ol_right_underlay');\r\n\t\tRVS.LIB.OBJ.container_Right = RVS.LIB.OBJ.container_Library.find('#ol_right');\r\n\t\tRVS.LIB.OBJ.container_Filters = RVS.LIB.OBJ.container_Library.find('#ol_filters');\r\n\t\tRVS.LIB.OBJ.container_Output = RVS.LIB.OBJ.container_Library.find('#ol_results');\r\n\t\tRVS.LIB.OBJ.container_OutputWrap = RVS.LIB.OBJ.container_Library.find('#ol_results_wrap');\r\n\t\tRVS.LIB.OBJ.container_PaginationWrap = RVS.LIB.OBJ.container_Library.find('#ol_pagination_wrap');\r\n\t\tRVS.LIB.OBJ.container_Pagination = RVS.LIB.OBJ.container_Library.find('#ol_pagination');\r\n\t\tRVS.LIB.OBJ.container_Sorting = RVS.LIB.OBJ.container_Library.find('#ol_modulessorting');\r\n\r\n\r\n\t\t//addObjectFilter({groupType:\"favorite\", groupAlias:RVS_LANG['ol_favorite'],icon:\"star\", tags:{}});\r\n\t\tfor (var types in RVS.LIB.OBJ.types) {\r\n\t\t\tif(!RVS.LIB.OBJ.types.hasOwnProperty(types)) continue;\r\n\t\t\taddObjectFilter({groupType:types, groupAlias:RVS_LANG['ol_'+types], icon:filtericons[types], count:RVS.LIB.OBJ.types[types].count, tags:RVS.LIB.OBJ.types[types].tags, custom:RVS.LIB.OBJ.types[types].upload});\r\n\t\t}\r\n\r\n\t\tjQuery(document.body).append(RVS.LIB.OBJ.container_Library);\r\n\t\t// INITIALISE SELECTBOXES\r\n\t\tjQuery('#sel_olibrary_sorting').ddTP();\r\n\t\tRVS.C.ol_pagination = RVS.C.ol_pagination==undefined ? jQuery('#ol_pagination') : RVS.C.ol_pagination;\r\n\t\tRVS.C.ol_pagination.ddTP();\r\n\t\tupdateScollbarFilters();\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\t/*\r\n\tLOCAL LISTENERS\r\n\t*/\r\n\tfunction initLocalListeners() {\r\n\r\n\t\t// CLICK ON CLOSE SHOULD ANIMATE OL OUT\r\n\t\tRVS.DOC.on('click','#ol_close',function() {\r\n\t\t\tif (RVS.LIB.OBJ.moduleInFocus === true) {\r\n\t\t\t\tunselectOLItems();\r\n\t\t\t\tRVS.LIB.OBJ.moduleInFocus = false;\r\n\t\t\t} else\r\n\t\t\t\tRVS.F.closeObjectLibrary();\r\n\t\t});\r\n\r\n\t\t// RESET THE SORTING\r\n\t\tRVS.DOC.on('click','#reset_objsorting',function() {\r\n\t\t\tunselectOLItems();\r\n\t\t\tjQuery('#sel_olibrary_sorting').val(\"datedesc\").ddTP('change');\r\n\t\t\tRVS.DOC.trigger('updateObjectLibraryOverview',{val:\"datedesc\", eventparam:\"#reset_objsorting\",ignoreCookie:true});\r\n\t\t});\r\n\r\n\t\t//UPDATE SLIDER OVERVIEW\r\n\t\tRVS.DOC.on('updateObjectLibraryOverview',function(e,p) {\r\n\r\n\t\t\tif (p!==undefined && p.eventparam!==undefined) {\r\n\t\t\t\tvar a = p.eventparam === \"#reset_objsorting\" ? p.val===\"datedesc\" ? 0 : 1 : p.val===\"all\" ? 0 : 1,\r\n\t\t\t\t\td = a ===1 ? \"inline-block\" : \"none\";\r\n\r\n\t\t\t\ttpGS.gsap.set(p.eventparam,{autoAlpha:a, display:d});\r\n\t\t\t}\r\n\t\t\tif (p!==undefined && !p.ignoreRebuild) {\r\n\t\t\t\t//hideElementSubMenu({keepOverlay:false});\r\n\t\t\t\tif (p.val!==undefined && p.ignoreCookie!==true) RVS.F.setCookie(\"rs6_library_pagination\",p.val,360);\r\n\t\t\t\tunselectOLItems();\r\n\t\t\t\tRVS.F.updateFilteredList({force:true,keeppage:false,noanimation:false});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//CLICK ON LISTELEMENT SHOULD LOAD THE NEXT LIBRARY\r\n\t\tRVS.DOC.on('click','.ol_filter_listelement',function() {\r\n\t\t\tif (this.className.indexOf('inedit')>=0 || this.className.indexOf('add_ol_new_custom_category')>=0) return;\r\n\t\t\tvar _t = jQuery(this),\r\n\t\t\t\t_c = _t.closest('.ol_filter_type');\r\n\r\n\t\t\tif (this.dataset.subtags!=\"true\") {\r\n\t\t\t\tRVS.LIB.OBJ.lastSelectedType = RVS.LIB.OBJ.selectedType;\r\n\t\t\t\tRVS.LIB.OBJ.selectedType = this.dataset.type;\r\n\t\t\t\tRVS.LIB.OBJ.selectedFilter = this.dataset.filter;\r\n\t\t\t\tRVS.LIB.OBJ.selectedPage = 1;\r\n\t\t\t\tRVS.LIB.OBJ.selectedPackage = -1;\r\n\t\t\t\tRVS.LIB.OBJ.selectedFolder = -1;\r\n\t\t\t\tRVS.F.loadLibrary({modules:[this.dataset.type],event:\"reBuildObjectLibrary\"});\r\n\t\t\t\tjQuery('.ol_filter_listelement.selected').removeClass(\"selected\");\r\n\t\t\t\t_t.addClass(\"selected\");\r\n\t\t\t\t_c.find('.ol_filter_headerelement').addClass(\"selected\");\r\n\t\t\t} else {\r\n\t\t\t\tvar _w = _c.hasClass(\"open\");\r\n\t\t\t\tjQuery('.ol_filter_type.open').removeClass(\"open\");\r\n\t\t\t\tif (!_w) _c.addClass(\"open\");\r\n\t\t\t\tvar ul = _c.find('.ol_filter_group');\r\n\t\t\t\tif (ul.find('.selected').length===0) ul.find('.ol_filter_listelement').first().trigger('click');\r\n\t\t\t}\r\n\r\n\t\t\tupdateSearchPlaceHolder();\r\n\t\t\tunselectOLItems();\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#ol_right_underlay',unselectOLItems);\r\n\r\n\t\t// DELETE SINGLE CUSTOM ITEM\r\n\t\tRVS.DOC.on('click','.ol_link_to_delete',function() {\r\n\t\t\tvar librarytype = this.dataset.librarytype,\r\n\t\t\t\tid = this.dataset.id,\r\n\t\t\t\tcbobj =getObjByID(id, librarytype);\r\n\r\n\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\tbgopacity:0.85,\r\n\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\ticon:'delete',\r\n\t\t\t\ttitle:RVS_LANG.deletecustomitem,\r\n\t\t\t\tmaintext:RVS_LANG.areyousuretodelete+\"?\",\r\n\t\t\t\tsubtext:RVS_LANG.thiswilldeletecustomitem,\r\n\t\t\t\tdo:{\r\n\t\t\t\t\ticon:\"delete\",\r\n\t\t\t\t\ttext:RVS_LANG.yesdeleteit,\r\n\t\t\t\t\tcallback:function() {\r\n\t\t\t\t\t\tRVS.F.ajaxRequest('delete_customlibrary_item', {id:id, type:librarytype}, function(response){\r\n\t\t\t\t\t\t\tdeleteObjByID(id, librarytype);\r\n\t\t\t\t\t\t\tjQuery('#'+librarytype+\"_\"+id).remove();\r\n\t\t\t\t\t\t\tRVS.F.updateFilteredList();\r\n\t\t\t\t\t\t\tRVS.F.finalDrawOfElements();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcancel:{\r\n\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\ttext:RVS_LANG.cancel,\r\n\t\t\t\t},\r\n\t\t\t\tswapbuttons:true\r\n\t\t\t});\r\n\t\t\tjQuery('#rbm_decisionModal').closest('._TPRB_.rb-modal-wrapper').appendTo(jQuery(document.body)).css({zIndex:100000000});\r\n\r\n\r\n\r\n\t\t});\r\n\r\n\t\t//CLICK ON THE LINK_TO_ADD BUTTON\r\n\t\tRVS.DOC.on('click','.ol_link_to_add',function() {\r\n\r\n\t\t\tvar librarytype = this.dataset.librarytype,\r\n\t\t\t\tevent = this.dataset.event;\r\n\r\n\t\t\t// activation check not needed for post/page shortcode wizard\r\n\t\t\tif(librarytype !== 'modules') {\r\n\r\n\t\t\t\tif (RVS.ENV.activated!==\"true\" && RVS.ENV.activated!==true) {\r\n\t\t\t\t\tRVS.F.showRegisterSliderInfo();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch (librarytype) {\r\n\r\n\t\t\t\t// for page & post shortcode wizard\r\n\t\t\t\tcase 'modules':\r\n\r\n\t\t\t\t\tlet ids = jQuery(this).closest('.olibrary_item').attr('data-objid'),\r\n\t\t\t\t\t\tmodules = RVS.LIB.OBJ.items.modules,\r\n\t\t\t\t\t\tlen = modules.length,\r\n\t\t\t\t\t\titm;\r\n\r\n\t\t\t\t\tfor(let i = 0; i < len; i++) {\r\n\r\n\t\t\t\t\t\titm = modules[i];\r\n\t\t\t\t\t\tif(itm.id === ids) break;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tRVS.DOC.trigger(RVS.LIB.OBJ.success.modules, itm);\r\n\t\t\t\t\tRVS.F.closeObjectLibrary();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"moduleslides\":\r\n\t\t\t\tcase \"moduletemplateslides\":\r\n\r\n\r\n\t\t\t\t\tvar _ = RVS.LIB.OBJ.items[this.dataset.librarytype][RVS.F.getModuleIndex(this.dataset.id,this.dataset.librarytype)];\r\n\t\t\t\t\tif (_.installed==undefined) {\r\n\t\t\t\t\t\tvar puid = this.dataset.parentuid;\r\n\t\t\t\t\t\t/* id = this.dataset.id; */\r\n\r\n\t\t\t\t\t\tRVS.F.ajaxRequest('import_template_slider', {uid:puid}, function(response){\r\n\t\t\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\t\t\tsetModuleTemplateInstalled({uid:puid,hiddensliderid:response.hiddensliderid,children:true,slideids:response.slider.slide_ids});\r\n\t\t\t\t\t\t\t\tRVS.DOC.trigger(RVS.LIB.OBJ.success.slide,_.slideid);\r\n\t\t\t\t\t\t\t\tRVS.F.closeObjectLibrary();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},undefined,undefined,RVS_LANG.installingtemplate+'<br><span style=\"font-size:17px; line-height:25px;\">'+this.dataset.parenttitle+'</span>');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tRVS.DOC.trigger(RVS.LIB.OBJ.success.slide,_.slideid);\r\n\t\t\t\t\t\tRVS.F.closeObjectLibrary();\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"moduletemplates\":\r\n\t\t\t\t\tRVS.LIB.OBJ.container_Underlay.show();\r\n\t\t\t\t\tRVS.LIB.OBJ.moduleInFocus = true;\r\n\t\t\t\t\tvar _ = jQuery(this);\r\n\t\t\t\t\tif (this.dataset.librarytype===\"moduletemplates\") {\r\n\t\t\t\t\t\tvar item = _.closest('.olibrary_item'),\r\n\t\t\t\t\t\t\tinfo = item.find('.ol_template_info_wrap');\r\n\t\t\t\t\t\titem.addClass(\"selected\");\r\n\t\t\t\t\t\tvar l = item.offset().left;\r\n\t\t\t\t\t\ttpGS.gsap.set(info,{left:\"auto\",right:\"auto\"});\r\n\r\n\t\t\t\t\t\tif (l+630 > (window.outerWidth + (RVS.S.isRTL ? -300 : 0)))\r\n\t\t\t\t\t\t\tif ((l-340) > 300)\r\n\t\t\t\t\t\t\t\ttpGS.gsap.set(info,{left:\"auto\", right:\"100%\", x:\"-20px\", transformOrigin: \"100% 0%\"});\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t tpGS.gsap.set(info,{left:(item.width() - ((l+630)-window.outerWidth))+\"px\", zIndex:200, right:\"auto\", x:\"20px\", transformOrigin: \"0% 0%\"});\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t tpGS.gsap.set(info,{left: \"100%\", right: \"auto\", x:\"20px\", transformOrigin: \"0% 0%\"});\r\n\r\n\r\n\t\t\t\t\t\tvar onoffs = document.querySelectorAll('.redownloadTemplateState, .createBlankPageState');\r\n\t\t\t\t\t\tfor (var ois in onoffs) {\r\n\t\t\t\t\t\t\tif (!onoffs.hasOwnProperty(ois)) continue;\r\n\t\t\t\t\t\t\tonoffs[ois].checked = onoffs[ois].className.indexOf(\"redownloadTemplateState\")>=0 ? RVS.LIB.OBJ.reDownloadTemplate : RVS.LIB.OBJ.createBlankPage;\r\n\t\t\t\t\t\t\tRVS.F.turnOnOffVisUpdate({input:onoffs[ois]});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"videos\":\r\n\t\t\t\t\tvar response_basic = RVS.F.safeExtend(true,RVS.LIB.OBJ.data,getObjByID(this.dataset.id, this.dataset.librarytype));\r\n\t\t\t\t\tRVS.F.ajaxRequest('load_library_object', {type:\"video\",id:this.dataset.id}, function(response){\r\n\t\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\t\tresponse_basic.img =  response.cover;\r\n\t\t\t\t\t\t\tresponse_basic.video = response.url;\r\n\t\t\t\t\t\t\tRVS.DOC.trigger(RVS.LIB.OBJ.success.video,response_basic);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tRVS.F.closeObjectLibrary();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"layers\":\r\n\t\t\t\t\tvar objlibsrcid = this.dataset.id;\r\n\t\t\t\t\tRVS.F.ajaxRequest('load_library_object', {type:\"layers\",id:this.dataset.id}, function(response){\r\n\t\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\t\t//var _IL = JSON.parse(response.layers);\r\n\t\t\t\t\t\t\tRVS.LIB.OBJ.import = {toImport :[]};\r\n\t\t\t\t\t\t\tfor (var i in response.layers) {\r\n\t\t\t\t\t\t\t\tif(!response.layers.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\t\t\tresponse.layers[i].layerLibSrc = objlibsrcid;\r\n\t\t\t\t\t\t\t\tRVS.LIB.OBJ.import.toImport.push(response.layers[i].uid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tRVS.F.showWaitAMinute({fadeIn:100,text:RVS_LANG.importinglayers});\r\n\r\n\t\t\t\t\t\t\tRVS.F.importSelectedLayers(RVS.F.checkLayersRelativeAbsolute(response.layers));\r\n\r\n\t\t\t\t\t\t\tRVS.DOC.trigger(RVS.LIB.OBJ.success.layers);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tRVS.F.closeObjectLibrary();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"fonticons\":\r\n\t\t\t\tcase \"svgcustom\":\r\n\t\t\t\tcase \"svgs\":\r\n\t\t\t\t\tvar cbobj =getObjByHandle(this.dataset.handle, this.dataset.librarytype);\r\n\t\t\t\t\tif (this.dataset.librarytype===\"svgs\" || this.dataset.librarytype===\"svgcustom\") {\r\n\t\t\t\t\t\tcbobj.svg = cbobj.ref.find('svg');\r\n\t\t\t\t\t\tcbobj.svgfull = cbobj.svg[0].innerHTML;\r\n\t\t\t\t\t\tcbobj.path =   cbobj.svg.find('path').attr('d');\r\n\t\t\t\t\t\tcbobj.viewBox = cbobj.svg[0].viewBox;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tRVS.DOC.trigger(RVS.LIB.OBJ.success.icon,cbobj);\r\n\t\t\t\t\tRVS.F.closeObjectLibrary();\r\n\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tif (event!==undefined) {\r\n\t\t\t\t\t\tRVS.DOC.trigger(event);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar cbobj =getObjByID(this.dataset.id, this.dataset.librarytype);\r\n\t\t\t\t\t\tRVS.DOC.trigger(RVS.LIB.OBJ.success.custom,cbobj);\r\n\t\t\t\t\t\tRVS.F.closeObjectLibrary();\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mouseenter','.ol_link_to_add_image',function() {\r\n\t\t\tvar sizeInfo = document.getElementById('sizeinfo_'+this.dataset.librarytype+'_'+this.dataset.id);\r\n\t\t\tif (sizeInfo!==null && sizeInfo!==undefined)\r\n\t\t\t\tsizeInfo.innerHTML = Math.round(parseInt(sizeInfo.dataset.w,0) * (objectSizes[this.dataset.size]/100)) + \"x\" + Math.round(parseInt(sizeInfo.dataset.h,0) * (objectSizes[this.dataset.size]/100));\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mouseleave','.ol_link_to_add_image',function() {\r\n\t\t\tvar sizeInfo = document.getElementById('sizeinfo_'+this.dataset.librarytype+'_'+this.dataset.id);\r\n\t\t\tif (sizeInfo!==null && sizeInfo!==undefined) sizeInfo.innerHTML = parseInt(sizeInfo.dataset.w,0)  + \"x\" + parseInt(sizeInfo.dataset.h,0);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.ol_link_to_add_image',function() {\r\n\t\t\tif (RVS.ENV.activated!==\"true\" && RVS.ENV.activated!==true) {\r\n\t\t\t\tRVS.F.showRegisterSliderInfo();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar response_basic = RVS.F.safeExtend(true,RVS.LIB.OBJ.data,getObjByID(this.dataset.id, this.dataset.librarytype));\r\n\t\t\tresponse_basic.size = objectSizes[this.dataset.size];\r\n\t\t\tRVS.F.ajaxRequest('load_library_object', {type:objectSizes[this.dataset.size],id:this.dataset.id}, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tresponse_basic.img = response.url;\r\n\t\t\t\t\tRVS.DOC.trigger(RVS.LIB.OBJ.success.image,response_basic);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tRVS.F.closeObjectLibrary();\r\n\t\t});\r\n\r\n\t\t//EVENT CALL TO REDRAW THE LIBRARY STRUCTURE BASED ON ITEMS, SORT, ETC.\r\n\t\tRVS.DOC.on('reBuildObjectLibrary',function() {\r\n\t\t\t//BUILD THE PAGINATION HERE\r\n\t\t\tunselectOLItems();\r\n\t\t\tRVS.F.reBuildObjectLibrary();\r\n\t\t\tjQuery('.ol_filter_type.selected').removeClass(\"selected\");\r\n\t\t\tjQuery('.ol_filter_listelement.selected').removeClass(\"selected\");\r\n\t\t\tjQuery('.ol_filter_listelement').each(function() {\r\n\t\t\t\tif (this.dataset.filter === RVS.LIB.OBJ.selectedFilter && this.dataset.type === RVS.LIB.OBJ.selectedType) this.classList.add(\"selected\");\r\n\t\t\t});\r\n\t\t\tjQuery('.ol_filter_type.open').addClass(\"selected\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('reBuildObjectLibraryAndCheckSingleSlide',function() {\r\n\t\t\t//BUILD THE PAGINATION HERE\r\n\t\t\tunselectOLItems();\r\n\t\t\tRVS.F.reBuildObjectLibrary();\r\n\t\t\t// CHECK IF ONLY 1 SLIDE EXISTS....\r\n\t\t\tvar count = 0,firstid,installed;\r\n\t\t\tfor (var i in RVS.LIB.OBJ.items.moduleslides) {\r\n\t\t\t\tif(!RVS.LIB.OBJ.items.moduleslides.hasOwnProperty(i)) continue;\r\n\t\t\t\tif(RVS.LIB.OBJ.items.moduleslides[i].slider_id===RVS.LIB.OBJ.selectedModule) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t\tfirstid =  RVS.LIB.OBJ.items.moduleslides[i].id;\r\n\t\t\t\t\tinstalled = RVS.LIB.OBJ.items.moduleslides[i].installed;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (count===1 && RVS.LIB.OBJ.depth===\"layers\") enterInModuleSlide(firstid, installed);\r\n\t\t});\r\n\r\n\r\n\t\t// SHOW CONTENT OF OBJECT LIBRARY ELEMENT\r\n\t\tRVS.DOC.on('click','.ol_link_to_view',function() {\r\n\t\t\tvar _ = jQuery(this);\r\n\t\t\tif (_[0].dataset.preview!==undefined && _[0].dataset.preview.length>0) window.open(_[0].dataset.preview,'_blank');\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('mouseenter','.show_video_on_hover',function() {\r\n\t\t\tclearTimeout(window.showVideOnHoverTimer);\r\n\t\t\tvar _ = jQuery(this),\r\n\t\t\t\titem = _.closest('.olibrary_item'),\r\n\t\t\t\tinfo = item.find('.ol_template_info_wrap'),\r\n\t\t\t\tsrc = this.dataset.videosource;\r\n\t\t\twindow.showVideOnHoverTimer = setTimeout(function() {\r\n\t\t\t\titem.find('.videopreview').append('<video id=\"obj_library_mediapreview\" loop autoplay> <source src=\"'+src+'\" type=\"video/mp4\"></video>');\r\n\t\t\t\titem.addClass(\"selected\");\r\n\r\n\t\t\t\tvar l = item.offset().left;\r\n\t\t\t\ttpGS.gsap.set(info,{left:\"auto\",right:\"auto\"});\r\n\t\t\t\tif (l+630 > (window.outerWidth + (RVS.S.isRTL ? -300 : 0)))\r\n\t\t\t\t\tif ((l-340) > 300)\r\n\t\t\t\t\t\ttpGS.gsap.set(info,{left:\"auto\", right:\"100%\", x:\"-20px\", transformOrigin: \"100% 0%\"});\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\t tpGS.gsap.set(info,{left:(item.width() - ((l+630)-window.outerWidth))+\"px\", zIndex:200, right:\"auto\", x:\"20px\", transformOrigin: \"0% 0%\"});\r\n\t\t\t\telse\r\n\t\t\t\t\t tpGS.gsap.set(info,{left: \"100%\", right: \"auto\", x:\"20px\", transformOrigin: \"0% 0%\"});\r\n\t\t\t},500);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mouseleave','.show_video_on_hover',function() {\r\n\t\t\tclearTimeout(window.showVideOnHoverTimer);\r\n\t\t\tunselectOLItems();\r\n\t\t});\r\n\r\n\t\t// GET INTO A PACKAGE\r\n\t\tRVS.DOC.on('click','.ol_link_to_deeper',function() {\r\n\r\n\t\t\tRVS.LIB.OBJ.selectedModule = -1;\r\n\t\t\tRVS.LIB.OBJ.selectedModuleTitle = \"\";\r\n\t\t\tjQuery('#searchobjects').val(\"\");\r\n\r\n\r\n\t\t\tif (this.dataset.librarytype===\"moduletemplates\") {\r\n\t\t\t\tif (this.dataset.elementtype===\"package_parent\") {\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedPackage = this.dataset.packageid;\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedPackageTitle = this.dataset.title;\r\n\t\t\t\t\tunselectOLItems();\r\n\r\n\t\t\t\t\tRVS.F.updateFilteredList({force:true,keeppage:false,noanimation:false});\r\n\t\t\t\t} else\r\n\r\n\t\t\t\tif (this.dataset.elementtype===\"module_parent\") {\r\n\t\t\t\t\t//LOAD ITEMS AND CALL FURTHER FUNCTIONS\r\n\t\t\t\t\tRVS.LIB.OBJ.lastSelectedType = RVS.LIB.OBJ.selectedType;\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedModule = this.dataset.packageid;\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedModuleTitle = this.dataset.title;\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedType = \"moduletemplateslides\";\r\n\t\t\t\t\tRVS.F.loadSimpleModule({modules:[\"moduletemplateslides\"], parenttype:\"moduletemplates\", moduleid:this.dataset.moduleid, module_uid:this.dataset.module_uid, event:\"reBuildObjectLibrary\"});\r\n\t\t\t\t}\r\n\r\n\t\t\t} else\r\n\t\t\tif (this.dataset.librarytype===\"modules\") {\r\n\t\t\t\tif (this.dataset.elementtype===\"folder_parent\") {\r\n\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedFolder = this.dataset.folderid;\r\n\t\t\t\t\tRVS.F.resetAllFilters();\r\n\t\t\t\t\tRVS.F.updateFilteredList({force:true,keeppage:false,noanimation:false});\r\n\t\t\t\t} else\r\n\t\t\t\tif (this.dataset.elementtype===\"module_parent\") {\r\n\r\n\t\t\t\t\t//LOAD ITEMS AND CALL FURTHER FUNCTIONS\r\n\t\t\t\t\tRVS.LIB.OBJ.lastSelectedType = RVS.LIB.OBJ.selectedType;\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedModule = this.dataset.packageid;\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedModuleTitle = this.dataset.title;\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedType = \"moduleslides\";\r\n\t\t\t\t\tRVS.F.loadSimpleModule({modules:[\"moduleslides\"], parenttype:\"modules\", moduleid:this.dataset.moduleid, event:\"reBuildObjectLibraryAndCheckSingleSlide\"});\r\n\t\t\t\t}\r\n\r\n\t\t\t} else\r\n\t\t\tif (this.dataset.librarytype===\"moduleslides\") enterInModuleSlide(this.dataset.id, this.dataset.slideid);\r\n\r\n\t\t\tjQuery('#ol_right').scrollTop(0);\r\n\t\t});\r\n\r\n\t\t//PAGINATION TRIGGER\r\n\t\tRVS.DOC.on('click','.page_button.ol_pagination',function() {\r\n\t\t\tunselectOLItems();\r\n\t\t\tjQuery('.page_button.ol_pagination.selected').removeClass('selected');\r\n\t\t\tRVS.LIB.OBJ.selectedPage = parseInt(this.dataset.page,0)===-9999 ? RVS.LIB.OBJ.selectedPage = parseInt(RVS.LIB.OBJ.selectedPage,0)-3 : parseInt(this.dataset.page,0)===9999 ? RVS.LIB.OBJ.selectedPage = parseInt(RVS.LIB.OBJ.selectedPage,0)+3 : this.dataset.page;\r\n\t\t\tjQuery('.page_button.ol_pagination[data-page='+RVS.LIB.OBJ.selectedPage+']').addClass(\"selected\");\r\n\r\n\t\t\tjQuery('#ol_right').scrollTop(0);\r\n\t\t\tRVS.F.drawOverview();\r\n\t\t\tsmartPagination();\r\n\t\t});\r\n\r\n\r\n\t\t// RESIZE SCREEN\r\n\t\tRVS.WIN.on('resize',function() {\r\n\t\t\tif (RVS.LIB.OBJ.open) {\r\n\t\t\t\tclearTimeout(window.resizedObjectLibraryTimeOut);\r\n\t\t\t\twindow.resizedObjectLibraryTimeOut = setTimeout(function() {\r\n\t\t\t\t\tvar maxamount = getMaxItemOnPage();\r\n\t\t\t\t\tmaxamount=maxamount<1 ? 1 : maxamount;\r\n\t\t\t\t\tunselectOLItems();\r\n\t\t\t\t\tif (RVS.LIB.OBJ.maxAmountPerPage!==maxamount)\r\n\t\t\t\t\t\tRVS.F.updateFilteredList({force:true,keeppage:true,noanimation:true});\r\n\r\n\t\t\t\t},10);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// FOLLOW BREADCRUMB\r\n\t\tRVS.DOC.on('click','.rsl_breadcrumb',function() {\r\n\t\t\tRVS.LIB.OBJ.selectedModule = -1;\r\n\t\t\tRVS.LIB.OBJ.selectedModuleTitle = \"\";\r\n\t\t\tRVS.LIB.OBJ.selectedModuleType = \"\";\r\n\t\t\tRVS.LIB.OBJ.selectedType = RVS.LIB.OBJ.selectedType ===\"moduletemplateslides\" ? \"moduletemplates\" : RVS.LIB.OBJ.selectedType ===\"moduleslides\" ? \"modules\" : RVS.LIB.OBJ.selectedType;\r\n\t\t\tif (this.dataset.folderid!==undefined) {\r\n\t\t\t\tunselectOLItems();\r\n\t\t\t\tif (RVS.LIB.OBJ.selectedType===\"moduletemplates\")\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedPackage = parseInt(this.dataset.folderid,0);\r\n\t\t\t\tif (RVS.LIB.OBJ.selectedType===\"modules\") {\r\n\t\t\t\t\tRVS.LIB.OBJ.selectedFolder = parseInt(this.dataset.folderid,0);\r\n\t\t\t\t\tRVS.F.resetAllFilters();\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.updateFilteredList({force:true,keeppage:true,noanimation:true});\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\t// ADD / REMOVE FROM FAVORIT LIST\r\n\t\tRVS.DOC.on('click','.olibrary_favorit',function() {\r\n\t\t\tvar el = jQuery(this),\r\n\t\t\t\tpar = {do:\"add\",type:this.dataset.librarytype, id:this.dataset.id};\r\n\r\n\t\t\tel.toggleClass('selected');\r\n\t\t\tif (!el.hasClass(\"selected\")) par.do=\"remove\";\r\n\r\n\t\t\tRVS.F.ajaxRequest('set_favorite', par, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tsetFavorite(par);\r\n\t\t\t\t\tRVS.F.updateFilteredList({force:true,keeppage:true,noanimation:true});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#obj_updatefromserver',function() {\r\n\t\t\tRVS.F.updateObjectLibraryFromServer(RVS.LIB.OBJ.selectedType);\r\n\t\t});\r\n\r\n\t\t//CLICK ON/OFF MAIN FAVORIT SWITCH\r\n\t\tRVS.DOC.on('click','#obj_fil_favorite',function(){\r\n\t\t\tvar el = jQuery(this);\r\n\t\t\tel.toggleClass(\"selected\");\r\n\t\t\tunselectOLItems();\r\n\t\t\tRVS.F.updateFilteredList({force:true,keeppage:true,noanimation:true});\r\n\t\t});\r\n\r\n\t\t// SEARCH MODULE TRIGGERING\r\n\t\tRVS.DOC.on('keyup','#searchobjects',function() {\r\n\t\t\tunselectOLItems();\r\n\t\t\tclearTimeout(window.searchKeyUp);\r\n\t\t\twindow.searchKeyUp = setTimeout(function() {\r\n\t\t\t\t RVS.F.updateFilteredList({force:true,keeppage:false,noanimation:false});\r\n\t\t\t\t RVS.LIB.OBJ.container_OutputWrap.RSScroll(\"update\");\r\n\t\t\t},200);\r\n\t\t});\r\n\r\n\t\t//CHANGE REDOWNLOAD STATE\r\n\t\tRVS.DOC.on('change','.redownloadTemplateState',function() {\r\n\t\t\tRVS.LIB.OBJ.reDownloadTemplate = this.checked;\r\n\t\t});\r\n\r\n\t\t//CHANGE REDOWNLOAD STATE\r\n\t\tRVS.DOC.on('change','.createBlankPageState',function() {\r\n\t\t\tRVS.LIB.OBJ.createBlankPage = this.checked;\r\n\t\t});\r\n\r\n\t\t// ADDON INSTALLED FROM TEMPLATE, UPDATES LISTS AND ADDON LISTS\r\n\t\tRVS.F.addonInstalledFromTemplate = function(response,slug) {\r\n\t\t\tRVS.LIB.OBJ.addonsToInstall.splice(0,1);\r\n\t\t\tvar varslug = slug.replace(/-/g, '_'),\r\n\t\t\tcoloraddonthmb = jQuery('#ale_'+slug+' .rs_alethumb_img');\r\n\r\n\t\t\t// IF NOT IN OVERVIEW AND NOT GLOBAL, WE CAN ENABLE IT AFTER INSTALL/ACTIVATE\r\n\t\t\tif (RVS.LIB.ADDONS!==undefined && RVS.LIB.ADDONS[slug]!==undefined && RVS.LIB.ADDONS[slug].global && !RVS.S.ovMode) {\r\n\t\t\t\tRVS.SLIDER.settings.addOns[slug] = RVS.SLIDER.settings.addOns[slug]===undefined ? {} : RVS.SLIDER.settings.addOns[slug];\r\n\t\t\t\tRVS.SLIDER.settings.addOns[slug].enable = true;\r\n\t\t\t\tRVS.LIB.ADDONS[slug].enable = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (RVS.LIB.ADDONS!==undefined && RVS.LIB.ADDONS[slug]!==undefined) RVS.LIB.ADDONS[slug].active=true;\r\n\t\t\t// GET BRICKS AND OTHER VALUES LOADED VIA AJAX FROM ADDON\r\n\t\t\twindow[varslug] = response[slug];\r\n\r\n\t\t\t// handle global AddOns\r\n\t\t\tif(typeof revbuilder !== 'undefined' && (RVS.SLIDER.settings===undefined || !RVS.SLIDER.settings.addOns.hasOwnProperty(slug))) window[varslug].enabled = true;\r\n\t\t\telse window[varslug].enabled = RVS.F._d(RVS.F._truefalse(window[varslug].enabled), (!RVS.S.ovMode ? RVS.SLIDER.settings.addOns[slug]!==undefined ? RVS.SLIDER.settings.addOns[slug].enable : false : false));\r\n\r\n\t\t\t// SHOW THE ICON COLORED\r\n\t\t\ttpGS.gsap.fromTo(coloraddonthmb, 2, {zIndex:\"13\", clip:\"rect(95px 95px 95px 95px)\"},{clip:\"rect(0px 190px 190px 0px)\"});\r\n\r\n\t\t\t// SHOW THE ENABLED BUTTON\r\n\t\t\tjQuery('#ale_'+slug+' .rs_ale_enabled').show();\r\n\r\n\t\t\t// SHOW NEW VALUES OF ADDON IN THE PANEL\r\n\t\t\tRVS.F.showAddonInfos(slug);\r\n\r\n\t\t\t// UPDATE ALREADY CREATED OBJECT LIBRARY ELEMENTS\r\n\t\t\tRVS.F.addonInstalledOnDemand(slug);\r\n\t\t}\r\n\r\n\r\n\t\t// INSTALL ADDONS AND ON THE END INSTALL SLIDER\r\n\t\tRVS.F.installSingleModuleTemplate = function(params) {\r\n\t\t\tif (RVS.LIB.OBJ.addonsToInstall.length>0) {\r\n\t\t\t\tvar slug = RVS.LIB.OBJ.addonsToInstall[0];\r\n\t\t\t\tRVS.F.ajaxRequest('activate_addon', {addon:slug}, function(response){\r\n\t\t\t\t\tif (RVS.LIB.ADDONS!==undefined && RVS.LIB.ADDONS[slug]!==undefined && RVS.LIB.ADDONS[slug].installed==true) {\r\n\t\t\t\t\t\tRVS.F.addonInstalledFromTemplate(response,slug);\r\n\t\t\t\t\t\tRVS.F.installSingleModuleTemplate(params);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tRVS.LIB.ADDONS[slug].installed = true;\r\n\t\t\t\t\t\tRVS.F.installSingleModuleTemplate(params);\r\n\t\t\t\t\t}\r\n\t\t\t\t},undefined,undefined,RVS_LANG.installingaddon+'<br><span style=\"font-size:17px; line-height:25px;\">'+RVS.LIB.OBJ.addonsToInstall[0]+'</span>');\r\n\t\t\t} else\r\n\t\t\tRVS.F.ajaxRequest('import_template_slider', params, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tRVS.LIB.OBJ.sliderPackageIds.push(response.slider.id);\r\n\t\t\t\t\tif (RVS.LIB.OBJ.success!==undefined && RVS.LIB.OBJ.success.slider!==undefined) RVS.DOC.trigger(RVS.LIB.OBJ.success.slider,response);\r\n\t\t\t\t\tif (RVS.LIB.OBJ.createBlankPage && RVS.LIB.OBJ.success && RVS.LIB.OBJ.success.draftpage) RVS.DOC.trigger(RVS.LIB.OBJ.success.draftpage,{pages:RVS.LIB.OBJ.sliderPackageIds});\r\n\t\t\t\t\tsetModuleTemplateInstalled({uid:params.uid,hiddensliderid:response.hiddensliderid});\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.closeObjectLibrary();\r\n\t\t\t},undefined,undefined,RVS_LANG.installtemplate+'<br><span style=\"font-size:17px; line-height:25px;\">'+params.title+'</span>');\r\n\t\t}\r\n\r\n\t\tRVS.F.installModuleTemplateForPackage = function(params) {\r\n\t\t\tif (RVS.LIB.OBJ.addonsToInstall.length>0) {\r\n\t\t\t\tvar slug = RVS.LIB.OBJ.addonsToInstall[0];\r\n\t\t\t\tRVS.F.ajaxRequest('activate_addon', {addon:slug}, function(response){\r\n\t\t\t\t\tif (RVS.LIB.ADDONS!==undefined && RVS.LIB.ADDONS[slug]!==undefined && RVS.LIB.ADDONS[slug].installed==true) {\r\n\t\t\t\t\t\tRVS.F.addonInstalledFromTemplate(response,slug);\r\n\t\t\t\t\t\tRVS.F.installModuleTemplateForPackage(params);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tRVS.LIB.ADDONS[slug].installed = true;\r\n\t\t\t\t\t\tRVS.F.installModuleTemplateForPackage(params);\r\n\t\t\t\t\t}\r\n\t\t\t\t},undefined,undefined,RVS_LANG.installingaddon+'<br><span style=\"font-size:17px; line-height:25px;\">'+RVS.LIB.OBJ.addonsToInstall[0]+'</span>');\r\n\t\t\t} else\r\n\t\t\tRVS.F.ajaxRequest('import_template_slider', params, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\tresponse.silent = true;\r\n\t\t\t\t\t\tresponse.ignoreAjaxFolderMove = true;\r\n\t\t\t\t\t\tif (params.modal) {\r\n\t\t\t\t\t\t\tresponse.slider.modal = jQuery.inArray(\"\"+response.hiddensliderid, RVS.LIB.OBJ.sliderPackageModalsOrig)>=0 || jQuery.inArray(response.uid, RVS.LIB.OBJ.sliderPackageModalsOrigUid)>=0;\r\n\t\t\t\t\t\t\tsetModuleTemplateInstalled({uid:params.uid,hiddensliderid:response.hiddensliderid, modal:response.slider.modal});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (RVS.LIB.OBJ.success!==undefined && RVS.LIB.OBJ.success.slider!==undefined) RVS.DOC.trigger(RVS.LIB.OBJ.success.slider,response);\r\n\t\t\t\t\t\tRVS.LIB.OBJ.sliderPackageIds.push(response.slider.id);\r\n\t\t\t\t\t\tif (response.map!==undefined && response.map.slider!==undefined) RVS.LIB.OBJ.sliderPackageReferenceMap.slider_map = RVS.F.safeExtend(true,RVS.LIB.OBJ.sliderPackageReferenceMap.slider_map,response.map.slider);\r\n\t\t\t\t\t\tif (response.map!==undefined && response.map.slides!==undefined) RVS.LIB.OBJ.sliderPackageReferenceMap.slides_map = RVS.F.safeExtend(true,RVS.LIB.OBJ.sliderPackageReferenceMap.slides_map,response.map.slides);\r\n\r\n\t\t\t\t\t\tif (!params.modal) {\r\n\t\t\t\t\t\t\tif (jQuery.inArray(\"\"+response.hiddensliderid, RVS.LIB.OBJ.sliderPackageModalsOrig)>=0 || jQuery.inArray(response.uid, RVS.LIB.OBJ.sliderPackageModalsOrigUid)>=0) RVS.LIB.OBJ.sliderPackageModals.push(response.slider.id);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (response.slider.modal) RVS.LIB.OBJ.sliderPackageModals.push(response.slider.id);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (RVS.LIB.OBJ.sliderPackageAdditionsUID[response.uid]!==undefined) RVS.LIB.OBJ.sliderPackageAdditions[response.slider.id] = RVS.LIB.OBJ.sliderPackageAdditionsUID[response.uid];\r\n\t\t\t\t\t\tif (!params.modal)\r\n\t\t\t\t\t\t\tif (RVS.LIB.OBJ.sliderPackageAdditionsInstalled[response.hiddensliderid]!==undefined) RVS.LIB.OBJ.sliderPackageAdditions[response.slider.id] = RVS.LIB.OBJ.sliderPackageAdditionsInstalled[response.hiddensliderid];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparams._.index++;\r\n\t\t\t\t\tinstallNextTemplate(params._);\r\n\t\t\t},undefined,undefined,RVS_LANG.installpackage+'<br><span style=\"font-size:17px; line-height:25px;\">'+params._.name+' ('+(params._.index+1)+' / '+(params._.amount+1)+')</span>');\r\n\t\t}\r\n\r\n\t\t//INSTALL A TEMPLATE\r\n\t\tRVS.DOC.on('click','.olti_install_template',function() {\r\n\t\t\tif (RVS.ENV.activated!==\"true\" && RVS.ENV.activated!==true) {\r\n\t\t\t\tRVS.F.showRegisterSliderInfo();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar uid = this.dataset.uid,\r\n\t\t\t\ttemp = getModuleTemplateByUID(uid);\r\n\t\t\tRVS.LIB.OBJ.sliderPackageIds = [];\r\n\t\t\tRVS.LIB.OBJ.addonsToInstall = [];\r\n\t\t\t// FIRST INSTALL ADDONS IF REQUIRED\r\n\t\t\tif (temp.plugin_require!==undefined && temp.plugin_require!=null && temp.plugin_require.length>0) {\r\n\t\t\t\tfor (var pi in temp.plugin_require) {\r\n\t\t\t\t\tif (temp.plugin_require[pi].installed===false) RVS.LIB.OBJ.addonsToInstall.push(temp.plugin_require[pi].path.split(\"/\")[0]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRVS.F.installSingleModuleTemplate((RVS.LIB.OBJ.reDownloadTemplate || temp.installed==false) ? {uid:uid,install:true,title:this.dataset.title} : {uid:this.dataset.uid, sliderid:temp.installed,title:this.dataset.title});\r\n\t\t});\r\n\r\n\t\t//INSTALL A TEMPLATE PACKAGE\r\n\t\tRVS.DOC.on('click','.olti_install_template_package',function() {\r\n\t\t\tif (RVS.ENV.activated!==\"true\" && RVS.ENV.activated!==true) {\r\n\t\t\t\tRVS.F.showRegisterSliderInfo();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.dataset===undefined || this.dataset.uids===undefined)\treturn;\r\n\t\t\tvar uids = this.dataset.uids.split(\",\"),\r\n\t\t\t\tfolderuid = this.dataset.folderuid;\r\n\t\t\tRVS.F.createNewFolder({foldername:this.dataset.package, enter:true, callBack:'sliderPackageInstall', callBackParam:{uids:uids, index:0, folderuid:folderuid, name:this.dataset.package, createBlankPage: RVS.LIB.OBJ.createBlankPage, amount:(uids.length-1)}});\r\n\t\t});\r\n\r\n\t\t//TRIGGER SLIDER PACKAGE INSTALLATION\r\n\t\tRVS.DOC.on('sliderPackageInstall',function(e,par) {\r\n\t\t\tRVS.LIB.OBJ.sliderPackageIds = [];\r\n\t\t\tRVS.LIB.OBJ.sliderPackageReferenceMap = new Object();\r\n\t\t\tRVS.LIB.OBJ.sliderPackageReferenceMap.slider_map = new Object();\r\n\t\t\tRVS.LIB.OBJ.sliderPackageReferenceMap.slides_map = new Object();\r\n\t\t\tRVS.LIB.OBJ.sliderPackageModals = [];\r\n\t\t\tRVS.LIB.OBJ.sliderPackageModalsOrig = [];\r\n\t\t\tRVS.LIB.OBJ.sliderPackageModalsOrigUid = [];\r\n\t\t\tRVS.LIB.OBJ.sliderPackageModal = false;\r\n\t\t\tRVS.LIB.OBJ.sliderPackageAdditions = {};\r\n\t\t\tRVS.LIB.OBJ.sliderPackageAdditionsUID = {};\r\n\t\t\tRVS.LIB.OBJ.sliderPackageAdditionsInstalled = {};\r\n\t\t\tinstallNextTemplate(par);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction installNextTemplate(_) {\r\n\r\n\t\tif (_.index<=_.amount) {\r\n\r\n\t\t\tvar uid= _.uids[_.index],\r\n\t\t\t\ttemp = getModuleTemplateByUID(uid);\r\n\r\n\t\t\tif (temp.modal===1 || temp.modal===\"1\") {\r\n\t\t\t\tRVS.LIB.OBJ.sliderPackageModal = true;\r\n\t\t\t\tRVS.LIB.OBJ.sliderPackageModalsOrig.push(\"\"+temp.installed);\r\n\t\t\t\tRVS.LIB.OBJ.sliderPackageModalsOrigUid.push(temp.uid);\r\n\t\t\t}\r\n\r\n\t\t\tif (temp.additions!==undefined && temp.additions!==\"\") {\r\n\t\t\t\tRVS.LIB.OBJ.sliderPackageAdditionsUID[temp.uid] = temp.additions;\r\n\t\t\t\tRVS.LIB.OBJ.sliderPackageAdditionsInstalled[temp.installed] = temp.additions;\r\n\t\t\t}\r\n\r\n\t\t\tRVS.LIB.OBJ.addonsToInstall = [];\r\n\r\n\r\n\t\t\t// FIRST INSTALL ADDONS IF REQUIRED\r\n\t\t\tif (temp.plugin_require!==null && temp.plugin_require!==undefined && temp.plugin_require.length>0) {\r\n\t\t\t\tfor (var pi in temp.plugin_require) {\r\n\t\t\t\t\tif (temp.plugin_require[pi].installed===false) RVS.LIB.OBJ.addonsToInstall.push(temp.plugin_require[pi].path.split(\"/\")[0]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.installModuleTemplateForPackage((RVS.LIB.OBJ.reDownloadTemplate || temp.installed==false) ? {_:_, folderid:(sliderLibrary!==undefined ? sliderLibrary.selectedFolder : -1) ,uid:uid, modal:true} : {_:_, folderid:(sliderLibrary!==undefined ? sliderLibrary.selectedFolder : -1) ,uid:uid, sliderid:temp.installed});\r\n\r\n\t\t} else {\r\n\t\t\t//Set Package Installed:\r\n\t\t\tsetModuleTemplateInstalled({uid:_.folderuid,hiddensliderid:true});\r\n\t\t\tif (RVS.LIB.OBJ.createBlankPage && RVS.LIB.OBJ.success && RVS.LIB.OBJ.success.draftpage) RVS.DOC.trigger(RVS.LIB.OBJ.success.draftpage,{pages:RVS.LIB.OBJ.sliderPackageIds,modals:RVS.LIB.OBJ.sliderPackageModals,additions:RVS.LIB.OBJ.sliderPackageAdditions});\r\n\t\t\tRVS.F.closeObjectLibrary();\r\n\t\t\t//SAVE FOLDER STRUCTURE IF THERE IS ANY\r\n\t\t\tvar folderid = (sliderLibrary!==undefined ? sliderLibrary.selectedFolder : -1);\r\n\t\t\tif (folderid!==-1) {\r\n\t\t\t\tfolderid = RVS.F.getOVSliderIndex(folderid);\r\n\t\t\t\tRVS.F.ajaxRequest('save_slider_folder', {id:sliderLibrary.sliders[folderid].id, children:sliderLibrary.sliders[folderid].children}, function(response){});\r\n\t\t\t\t// Check if Parrents neet to be saved\r\n\t\t\t\tif (sliderLibrary.sliders[folderid].parent!==-1) {\r\n\t\t\t\t\tvar parentfolderid = RVS.F.getOVSliderIndex(sliderLibrary.sliders[folderid].parent);\r\n\t\t\t\t\tRVS.F.ajaxRequest('save_slider_folder', {id:sliderLibrary.sliders[parentfolderid].id, children:sliderLibrary.sliders[parentfolderid].children}, function(response){});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// IF MODAL EXISTS, WE NEED TO REMAP THE REFERENCES\r\n\t\t\tif (RVS.LIB.OBJ.sliderPackageModal) RVS.F.ajaxRequest('adjust_modal_ids', { map:RVS.LIB.OBJ.sliderPackageReferenceMap},function(response) {});\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tENTER IN SLIDE\r\n\t*/\r\n\tfunction enterInModuleSlide(id,slideid) {\r\n\r\n\t\tRVS.LIB.OBJ.selectedSlideId = id;\r\n\t\tif (RVS.LIB.OBJ.items.moduleslides[RVS.LIB.OBJ.selectedSlideId].layers===undefined)\r\n\t\t\tRVS.F.ajaxRequest('get_layers_by_slide',{slide_id:slideid},function(response) {\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tvar empty = true;\r\n\t\t\t\t\tif (response.layers!==undefined && response.layers!==null) for (var i in response.layers) if ( ! response.layers.hasOwnProperty(i) || !empty) continue; else empty = i==\"top\" || i==\"bottom\" || i==\"middle\";\r\n\t\t\t\t\tif (empty)\r\n\t\t\t\t\t\tRVS.F.showInfo({content:RVS_LANG.nolayersinslide, type:\"success\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tRVS.LIB.OBJ.items.moduleslides[RVS.LIB.OBJ.selectedSlideId].layers = RVS.F.safeExtend(true,{},response.layers);\r\n\t\t\t\t\t\tRVS.F.layerImportList();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\telse\r\n\t\t\tRVS.F.layerImportList();\r\n\t}\r\n\t/*\r\n\tIMPORT LAYERS FUNCTIONS\r\n\t*/\r\n\r\n\tfunction checkImportChildren(_) {\r\n\t\t//SELECT /DESELECT ALL CHILDRENS AND SUBLINGS IF NEEDED\r\n\t\tif ((_.dataset.type===\"column\" || _.dataset.type===\"row\" || _.dataset.type===\"group\")) {\r\n\t\t\tvar lie = _.parentNode.getElementsByClassName('layimpli_element');\r\n\t\t\tif (_.className.indexOf('selected')>=0)\r\n\t\t\t\tfor (let i in lie) {\r\n\t\t\t\t\tif(!lie.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tif (lie[i].className!==undefined && lie[i].className.indexOf('selected')==-1) lie[i].className += \" selected\";\r\n\t\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tfor (let i in lie) {\r\n\t\t\t\t\tif(!lie.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tif(lie[i].className) lie[i].className = lie[i].className.replace('selected','');\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\t// SELECT PARENT NODES IF NEEDED\r\n\t\tif (_.dataset.puid!=-1 && _.className.indexOf('selected')>=0) {\r\n\t\t\tvar _IL = RVS.LIB.OBJ.items.moduleslides[RVS.LIB.OBJ.selectedSlideId].layers;\r\n\t\t\tif (_IL[_.dataset.puid]!==undefined && _IL[_.dataset.puid].type===\"row\") {\r\n\t\t\t\tjQuery('#layi_'+_.dataset.puid).addClass(\"selected\");\r\n\t\t\t\tjQuery('#layi_'+_IL[_.dataset.puid].group.puid).addClass(\"selected\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//SELECT UNSELECTED EMPTY COLUMNS IN SELECTED ROWS\r\n\t\tfor (var i in RVS.LIB.OBJ.import.layers) if (RVS.LIB.OBJ.import.layers.hasOwnProperty(i)) {\r\n\t\t\tif (RVS.LIB.OBJ.import.layers[i].className!==undefined) {\r\n\t\t\t\tlet ds = RVS.LIB.OBJ.import.layers[i].dataset;\r\n\t\t\t\tif (ds.type==\"row\" && RVS.LIB.OBJ.import.layers[i].className.indexOf(\"selected\")>=0) {\r\n\t\t\t\t\tvar lie = RVS.LIB.OBJ.import.layers[i].parentNode.getElementsByClassName('layimpli_element layimpli_level_1');\r\n\t\t\t\t\tfor (let i in lie) {\r\n\t\t\t\t\t\tif(!lie.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tif (lie[i].className!==undefined && lie[i].className.indexOf('selected')==-1) lie[i].className += \" selected\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction addonRequired(subtype) {\r\n\r\n\t\treturn addonExtendedSubtypes!==undefined && addonExtendedSubtypes!==\"\" && addonExtendedSubtypes[subtype]!==undefined ? addonExtendedSubtypes[subtype] : subtype;\r\n\t}\r\n\r\n\tfunction subtypeExists(s) {\r\n\t\tvar found = false;\r\n\t\tfor (var i in RVS.S.extendedLayerTypes) {\r\n\t\t\tif (found==true || !RVS.S.extendedLayerTypes.hasOwnProperty(i)) continue;\r\n\t\t\tif (i===s || RVS.S.extendedLayerTypes[i].subtype === s) found = true;\r\n\t\t}\r\n\r\n\t\t// check if we have actually extended the given subtype, if not then return true\r\n\t\tif(found == false) found = !addonExtendedSubtypes.hasOwnProperty(s);\r\n\r\n\t\treturn found;\r\n\r\n\t}\r\n\r\n\t//Create Single Markup for 1 Import Element\r\n\tfunction importListSingleMarkup(_,level) {\r\n\t\tvar eclass = (_.subtype!==undefined && _.subtype!==\"\" && subtypeExists(_.subtype)==false) ? \"disabled\" : \"\",\r\n\t\t_h='\t<div id=\"layi_'+_.uid+'\" class=\"'+eclass+' layimpli_element layimpli_level_'+level+'\" data-uid=\"'+_.uid+'\" data-type=\"'+_.type+'\" data-puid=\"'+_.group.puid+'\">';\r\n\t\t_h +='\t\t<i class=\"layimpli_icon material-icons\">'+RVS.F.getLayerIcon(_.linebreak ? 'linebreak' : _.type,_.subtype)+'</i>';\r\n\t\t_h +='\t\t<div class=\"layimpli_icon_title\">'+_.alias+'</div>';\r\n\t\t_h +='\t\t<div class=\"layimpli_icon_dimension\">'+_.size.width.d.v+' x '+_.size.height.d.v+'</div>';\r\n\t\tif (_.subtype!==undefined && _.subtype!==\"\" && subtypeExists(_.subtype)==false) {\r\n\t\t\t_h +='\t\t<div class=\"layimpli_icon_required\">Required: '+addonRequired(_.subtype)+'</div>';\r\n\t\t}\r\n\t\tif (_.actions.action.length>0) _h +='\t\t<div class=\"layimpli_icon_dimension\">'+RVS_LANG.layerwithaction+'</div>';\r\n\t\tvar trigby = RVS.F.layerFrameTriggeredBy({layerid:_.uid, src:RVS.LIB.OBJ.items.moduleslides[RVS.LIB.OBJ.selectedSlideId].layers});\r\n\t\tif (trigby.alias!==\"\" && trigby.uid!==\"\")\r\n\t\t\t_h +='\t\t<div class=\"layimpli_icon_dimension\">'+RVS_LANG.triggeredby+' '+trigby.alias+'</div>';\r\n\t\t_h +='\t\t<div class=\"layimpli_icon_checbox material-icons\">radio_button_unchecked</div>';\r\n\t\t_h +='\t</div>';\r\n\t\treturn _h;\r\n\t}\r\n\r\n\t//Update list of To Do import Elements and draw selected/unselected States\r\n\tfunction updateCheckedLayerImportElements() {\r\n\t\tRVS.LIB.OBJ.import.toImport = [];\r\n\t\tfor (var i in RVS.LIB.OBJ.import.layers) {\r\n\t\t\tif(!RVS.LIB.OBJ.import.layers.hasOwnProperty(i)) continue;\r\n\t\t\tlet ds = RVS.LIB.OBJ.import.layers[i].dataset;\r\n\t\t\tif (RVS.LIB.OBJ.import.layers[i]!==undefined && RVS.LIB.OBJ.import.layers[i].className!==undefined) {\r\n\t\t\t\tif (RVS.LIB.OBJ.import.layers[i].className.indexOf('selected')>=0) {\r\n\t\t\t\t\tRVS.LIB.OBJ.import.toImport.push(ds.uid);\r\n\t\t\t\t\tRVS.LIB.OBJ.import.layers[i].getElementsByClassName('layimpli_icon_checbox')[0].innerHTML = \"check_circle_outline\";\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.LIB.OBJ.import.layers[i].getElementsByClassName('layimpli_icon_checbox')[0].innerHTML = \"radio_button_unchecked\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tjQuery('#layers_import_feedback').html((RVS.LIB.OBJ.import.toImport.length>0 ? RVS.LIB.OBJ.import.toImport.length+\" \"+RVS_LANG.nrlayersimporting : RVS_LANG.nothingselected));\r\n\r\n\t}\r\n\r\n\r\n\r\n\t/*\r\n\tBUILD A LIST WITH LAYERS TO SELECT, NAVIGATE\r\n\t*/\r\n\tRVS.F.buildLayerListToSelect = function(_) {\r\n\t\t//BUILD LIST OF LAYERS\r\n\t\tvar markup = '<div class=\"layimpli_main_wrap\">',\r\n\t\t\tcache = {root:\"\"},\r\n\t\t\tlevel;\r\n\r\n\t\t// LAYERS\r\n\t\tfor (var i in _){\r\n\t\t\tif(!_.hasOwnProperty(i)) continue;\r\n\t\t\tif (_[i].type!==\"zone\") {\r\n\t\t\t\t_[i] = RVS.F.safeExtend(true,RVS.F.addLayerObj(_[i].type,undefined,true),_[i]);\r\n\t\t\t\tif (_[i].group!==undefined && _[i].type!==\"row\" && _[i].type!==\"group\" && _[i].type!==\"column\") {\r\n\t\t\t\t\tif (_[i].group.puid==-1)\r\n\t\t\t\t\t\tcache.root += importListSingleMarkup(_[i],0,i);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tcache[_[i].group.puid] = cache[_[i].group.puid]== undefined ? \"\" : cache[_[i].group.puid];\r\n\t\t\t\t\t\tlevel = _[_[i].group.puid].type==\"column\" ? 2 : _[_[i].group.puid].group.puid == undefined || _[_[i].group.puid].group.puid == -1 || _[_[i].group.puid].group.puid == '-1' ? 1 : _[ _[_[i].group.puid].group.puid].type==\"group\" ? 2 : 3;\r\n\t\t\t\t\t\tcache[_[i].group.puid] += importListSingleMarkup(_[i],level,i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// GROUP\r\n\t\tfor (var i in _){\r\n\t\t\tif(!_.hasOwnProperty(i) || _[i].type!==\"group\" ||  _[i].group.puid==-1 || _[i].group.puid=='-1' || _[i].group.puid == undefined) continue;\r\n\t\t\tif (_[i].type===\"group\") {\r\n\t\t\t\tcache[_[i].group.puid] = cache[_[i].group.puid]==undefined ? \"\" : cache[_[i].group.puid];\r\n\t\t\t\tcache[_[i].group.puid] += '<div class=\"layimpli_group_wrap\">';\r\n\t\t\t\tlevel = _[_[i].group.puid].type==\"group\" ? 1 :  _[_[i].group.puid].type==\"column\" ? 2 : 0;\r\n\r\n\t\t\t\tcache[_[i].group.puid] += importListSingleMarkup(_[i],level,i);\r\n\t\t\t\tcache[_[i].group.puid] +='<div class=\"layimpli_group_inner\">';\r\n\t\t\t\tif (cache[_[i].uid]!==undefined) cache[_[i].group.puid] += cache[_[i].uid];\r\n\t\t\t\tcache[_[i].group.puid] +='\t</div>';\r\n\t\t\t\tcache[_[i].group.puid] +='</div>';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// COLUMNS\r\n\t\tfor (var i in _){\r\n\t\t\tif(!_.hasOwnProperty(i)) continue;\r\n\t\t\tif (_[i].type===\"column\") {\r\n\t\t\t\tcache[_[i].group.puid] = cache[_[i].group.puid]==undefined ? \"\" : cache[_[i].group.puid];\r\n\t\t\t\tcache[_[i].group.puid] += '<div class=\"layimpli_group_wrap\">';\r\n\t\t\t\tcache[_[i].group.puid] += importListSingleMarkup(_[i],1,i);\r\n\t\t\t\tcache[_[i].group.puid] +='<div class=\"layimpli_group_inner\">';\r\n\t\t\t\tif (cache[_[i].uid]!==undefined) cache[_[i].group.puid] += cache[_[i].uid];\r\n\t\t\t\tcache[_[i].group.puid] +='\t</div>';\r\n\t\t\t\tcache[_[i].group.puid] +='</div>';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// ROWS\r\n\t\tfor (var i in _) {\r\n\t\t\tif(!_.hasOwnProperty(i)) continue;\r\n\t\t\tif (_[i].type===\"row\" || (_[i].type==\"group\" && ( _[i].group.puid==-1 || _[i].group.puid=='-1' || _[i].group.puid == undefined))) {\r\n\t\t\t\tmarkup += '<div class=\"layimpli_group_wrap\">';\r\n\t\t\t\tmarkup +=\timportListSingleMarkup(_[i],0,i);\r\n\t\t\t\tmarkup +='\t<div class=\"layimpli_group_inner\">';\r\n\t\t\t\tif (cache[_[i].uid]!==undefined) markup += cache[_[i].uid];\r\n\t\t\t\tmarkup +='\t</div>';\r\n\t\t\t\tmarkup +='</div>';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tmarkup += cache.root;\r\n\t\tmarkup += '</div>';\r\n\r\n\t\treturn markup;\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tBUILD LAYER IMPORT LIBRARY\r\n\t*/\r\n\tRVS.F.layerImportList = function() {\r\n\r\n\t\tjQuery('#rb_modal_underlay').appendTo('body');\r\n\r\n\t\t// ADD LISTENERS\r\n\t\tif (RVS.LIB.OBJ.import===undefined || RVS.LIB.OBJ.import.basics===undefined) {\r\n\t\t\tjQuery('.rb-modal-wrapper[data-modal=\"rbm_layerimport\"]').appendTo('body');\r\n\t\t\tRVS.LIB.OBJ.import = { container : jQuery('#rbm_layerimport_list'), basics:true};\r\n\t\t\tRVS.DOC.on('click','#rbm_layerimport .rbm_close',function() {\r\n\t\t\t\tjQuery('#rb_modal_underlay').appendTo('#slider_settings');\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t});\r\n\r\n\t\t\t// Select / Deselect Layers\r\n\t\t\tRVS.DOC.on('click','.layimpli_element',function() {\r\n\t\t\t\tjQuery(this).toggleClass(\"selected\");\r\n\t\t\t\tcheckImportChildren(this);\r\n\t\t\t\tupdateCheckedLayerImportElements();\r\n\t\t\t});\r\n\r\n\t\t\t// Import Layers\r\n\t\t\tRVS.DOC.on('click','#layers_import_from_slides_button',function() {\r\n\t\t\t\tRVS.F.showWaitAMinute({fadeIn:100,text:RVS_LANG.importinglayers});\r\n\t\t\t\tsetTimeout(RVS.F.importSelectedLayers,200);\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t\tRVS.LIB.OBJ.import.container[0].innerHTML = RVS.F.buildLayerListToSelect(RVS.LIB.OBJ.items.moduleslides[RVS.LIB.OBJ.selectedSlideId].layers);\r\n\t\tRVS.LIB.OBJ.import.container.RSScroll({ suppressScrollX:true});\r\n\t\tRVS.LIB.OBJ.import.layers = RVS.LIB.OBJ.import.container[0].getElementsByClassName('layimpli_element');\r\n\t\t//OPEN DIALOG\r\n\t\tRVS.F.RSDialog.create({modalid:'rbm_layerimport', bgopacity:0.85});\r\n\r\n\t};\r\n\r\n\t/*\r\n\tRESER FILTERS\r\n\t*/\r\n\tRVS.F.resetAllFilters = function() {\r\n\t\tRVS.LIB.OBJ.selectedPage = 1;\r\n\t\tjQuery('#sel_olibrary_sorting').val(\"datedesc\").ddTP('change');\r\n\t\tRVS.DOC.trigger('updateObjectLibraryOverview',{val:\"datedesc\", eventparam:\"#reset_objsorting\",ignoreRebuild:true,ignoreCookie:true});\r\n\t};\r\n\r\n\r\n/*******************************\r\n \tINTERNAL FUNCTIONS\r\n*******************************/\r\n\r\n\tRVS.F.closeObjectLibrary = function() {\r\n\t\tunselectOLItems();\r\n\t\tRVS.LIB.OBJ.moduleInFocus = false;\r\n\t\ttpGS.gsap.fromTo(RVS.LIB.OBJ.container_Library,0.7,{autoAlpha:1,display:\"block\",scale:1},{scale:0.8,autoAlpha:0,display:\"none\",ease:\"power3.inOut\"});\r\n\t\ttpGS.gsap.fromTo('#ol_header, #ol_footer',0.5,{autoAlpha:1},{autoAlpha:0,ease:\"power3.inOut\"});\r\n\t\tRVS.LIB.OBJ.open = false;\r\n\t\tdocument.body.style.overflow = RVS.S.bodybeforeOpenLibrary;\r\n\t};\r\n\r\n\tfunction getObjByUID(uid,librarytype) {\r\n\t\tvar ret;\r\n\t\tfor (var i in RVS.LIB.OBJ.items[librarytype]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[librarytype].hasOwnProperty(i)) continue;\r\n\t\t\tret = RVS.LIB.OBJ.items[librarytype][i].uid === uid ? RVS.LIB.OBJ.items[librarytype][i] : ret;\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tfunction deleteObjByID(id,librarytype) {\r\n\t\tvar ret;\r\n\t\tfor (var i in RVS.LIB.OBJ.items[librarytype]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[librarytype].hasOwnProperty(i)) continue;\r\n\t\t\tret = (\"\"+RVS.LIB.OBJ.items[librarytype][i].id === \"\"+id) ? i : ret;\r\n\t\t}\r\n\t\tif (ret!==undefined) RVS.LIB.OBJ.items[librarytype].splice(ret,1)\r\n\t}\r\n\r\n\tRVS.F.isItemExistsInOl = function(id,librarytype) {\r\n\t\tvar ret;\r\n\t\tfor (var i in RVS.LIB.OBJ.items[librarytype]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[librarytype].hasOwnProperty(i) || ret===true) continue;\r\n\t\t\tret = (\"\"+RVS.LIB.OBJ.items[librarytype][i].id === \"\"+id);\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tfunction getObjByID(id,librarytype) {\r\n\t\tvar ret;\r\n\t\tfor (var i in RVS.LIB.OBJ.items[librarytype]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[librarytype].hasOwnProperty(i)) continue;\r\n\t\t\tret = (\"\"+RVS.LIB.OBJ.items[librarytype][i].id === \"\"+id) ? RVS.LIB.OBJ.items[librarytype][i] : ret;\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tfunction getObjByHandle(handle,librarytype) {\r\n\t\tvar ret;\r\n\t\tfor (var i in RVS.LIB.OBJ.items[librarytype]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[librarytype].hasOwnProperty(i)) continue;\r\n\t\t\tret = RVS.LIB.OBJ.items[librarytype][i].handle === handle ? RVS.LIB.OBJ.items[librarytype][i] : ret;\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tfunction getModuleTemplateByUID(uid) {\r\n\t\treturn getObjByUID(uid,\"moduletemplates\");\r\n\t}\r\n\r\n\tfunction setModuleTemplateInstalled(_,modal) {\r\n\r\n\t\tfor (var i in RVS.LIB.OBJ.items.moduletemplates) {\r\n\t\t\tif(!RVS.LIB.OBJ.items.moduletemplates.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.LIB.OBJ.items.moduletemplates[i].uid === _.uid) {\r\n\t\t\t\tRVS.LIB.OBJ.items.moduletemplates[i].installed = _.hiddensliderid;\r\n\t\t\t\tif (modal) RVS.LIB.OBJ.items.moduletemplates[i].modal = \"1\";\r\n\t\t\t\tif (RVS.LIB.OBJ.items.moduletemplates[i].ref!==undefined)\r\n\t\t\t\t\tRVS.LIB.OBJ.items.moduletemplates[i].ref.find('.installed_notinstalled').html(RVS_LANG.installed);\r\n\t\t\t\t//SET ALL CHILDREN TO INSTALLED\r\n\t\t\t\tif (_.children) {\r\n\t\t\t\t\tfor (var ch in RVS.LIB.OBJ.items.moduletemplateslides) {\r\n\t\t\t\t\t\tif(!RVS.LIB.OBJ.items.moduletemplateslides.hasOwnProperty(ch)) continue;\r\n\t\t\t\t\t\tif (RVS.LIB.OBJ.items.moduletemplateslides[ch].parent == RVS.LIB.OBJ.items.moduletemplates[i].id) {\r\n\t\t\t\t\t\t\tRVS.LIB.OBJ.items.moduletemplateslides[ch].installed = _.hiddensliderid;\r\n\t\t\t\t\t\t\tRVS.LIB.OBJ.items.moduletemplateslides[ch].slideid = _.slideids[parseInt(RVS.LIB.OBJ.items.moduletemplateslides[ch].slideid,0)];\r\n\t\t\t\t\t\t\tif (RVS.LIB.OBJ.items.moduletemplateslides[ch].ref!==undefined) RVS.LIB.OBJ.items.moduletemplateslides[ch].ref.find('.installed_notinstalled').html(RVS_LANG.installed);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setFavorite(_) {\r\n\t\tfor (var i in RVS.LIB.OBJ.items[_.type]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[_.type].hasOwnProperty(i)) continue;\r\n\t\t\tif (\"\"+RVS.LIB.OBJ.items[_.type][i].id===\"\"+_.id) RVS.LIB.OBJ.items[_.type][i].favorite = _.do===\"add\" ? true : false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateSearchPlaceHolder(force) {\r\n\t\tif (force) jQuery('#searchobjects').val(\"\");\r\n\t\tvar _ = jQuery('li.ol_filter_listelement.selected');\r\n\t\tif (_.length>0 && _!==undefined)\r\n\t\t\tjQuery('#searchobjects').attr('placeholder',RVS_LANG.search+\" \"+renameTag(_[0].dataset.title).t+\" ...\");\r\n\r\n\t}\r\n\r\n\tfunction unselectOLItems() {\r\n\t\tjQuery('.olibrary_item.selected').removeClass(\"selected\");\r\n\t\tRVS.LIB.OBJ.container_Underlay.hide();\r\n\t\tjQuery('#obj_library_mediapreview').remove();\r\n\t\tRVS.LIB.OBJ.moduleInFocus = false;\r\n\t}\r\n\r\n\t// GET SLIDE INDEX\r\n\tRVS.F.getSliderIndex = function(id) {\r\n\t\tvar ret = -1;\r\n\t\t//id = parseInt(id,0);\r\n\t\tfor (var i in RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType][i].id == id) ret = i;\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n\r\n\t// GET INDEX OF ELEMENT BASED ON TYPE AND ID\r\n\tRVS.F.getModuleIndex = function(id,type) {\r\n\t\tvar ret = -1;\r\n\t\t//id = parseInt(id,0);\r\n\t\tfor (var i in RVS.LIB.OBJ.items[type]) {\r\n\t\t\tif(!RVS.LIB.OBJ.items[type].hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.LIB.OBJ.items[type][i].id == id) ret = i;\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n\r\n\r\n\tfunction getMaxItemOnPage() {\r\n\t\tvar hor = Math.floor((RVS.LIB.OBJ.container_OutputWrap.width()) / 287),\r\n\t\t\tver = Math.floor((RVS.LIB.OBJ.container_OutputWrap.innerHeight())/235);\r\n\t\tif (hor===0 || ver===0) {\r\n\t\t\thor = Math.floor((window.innerWidth - 330) / 287);\r\n\t\t\tver = Math.floor((window.innerHeight - 160)/235);\r\n\t\t}\r\n\r\n\t\treturn hor*ver;\r\n\t}\r\n\r\n\r\n\t// CHECK IF THE MODULETEMPLATES PARRENT PACKAGE INSTALLABLE OR NOT\r\n\tfunction isPackageInstallable(_) {\r\n\r\n\t\tvar paritem,\r\n\t\t\tuids = [],\r\n\t\t\tinstallable = true,\r\n\t\t\taddons = [];\r\n\r\n\t\tfor (var i in RVS.LIB.OBJ.items.moduletemplates) {\r\n\t\t\tif(!RVS.LIB.OBJ.items.moduletemplates.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.LIB.OBJ.items.moduletemplates[i].package_id === _.packageId) {\r\n\t\t\t\tif  (RVS.LIB.OBJ.items.moduletemplates[i].package_parent===\"true\")\r\n\t\t\t\t\tparitem = RVS.LIB.OBJ.items.moduletemplates[i];\r\n\t\t\t\telse\r\n\t\t\t\t\tuids.push({o:parseInt(RVS.LIB.OBJ.items.moduletemplates[i].package_order,0), uid:RVS.LIB.OBJ.items.moduletemplates[i].uid});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tuids.sort(function(a,b) {return a.o - b.o});\r\n\t\tvar retuids = [];\r\n\t\tfor (var i in uids) if (uids.hasOwnProperty(i)) if (uids[i]!==undefined && uids[i].uid!==undefined) retuids.push(uids[i].uid);\r\n\r\n\t\tif (paritem!==undefined) for (var pi in paritem.plugin_require) {\r\n\t\t\tif (paritem.plugin_require[pi].installed!=\"true\") installable=false;\r\n\t\t\taddons.push(paritem.plugin_require[pi]);\r\n\t\t}\r\n\r\n\t\treturn {installable:installable, uids:retuids, addons:addons};\r\n\t}\r\n\r\n\r\n\t// SMART PAGINATION\r\n\tfunction smartPagination() {\r\n\t\tRVS.LIB.OBJ.pageAmount = parseInt(RVS.LIB.OBJ.pageAmount,0);\r\n\t\tRVS.LIB.OBJ.selectedPage = parseInt(RVS.LIB.OBJ.selectedPage,0);\r\n\t\t/* var middle = Math.floor((RVS.LIB.OBJ.pageAmount - RVS.LIB.OBJ.selectedPage)/2); */\r\n\t\tjQuery('.page_button.ol_pagination').each(function() {\r\n\t\t\tvar i = parseInt(this.dataset.page,0),\r\n\t\t\t\ts = false;\r\n\t\t\tif ((i===1) || (i===RVS.LIB.OBJ.pageAmount)) s = true;\r\n\t\t\tif (RVS.LIB.OBJ.selectedPage<4 && i>0 && i<5) s = true;\r\n\t\t\tif (RVS.LIB.OBJ.selectedPage>RVS.LIB.OBJ.pageAmount-3 && i>RVS.LIB.OBJ.pageAmount-4 && i<9999) s = true;\r\n\t\t\tif (i<9999 && i>=RVS.LIB.OBJ.selectedPage-1 && i<=RVS.LIB.OBJ.selectedPage+1 && i>0) s = true;\r\n\t\t\tif ((RVS.LIB.OBJ.selectedPage>=4 && i===-9999) || (RVS.LIB.OBJ.selectedPage<= RVS.LIB.OBJ.pageAmount-3 && i===9999)) s = true;\r\n\t\t\tif (RVS.LIB.OBJ.pageAmount<8) if (i==9999 || i==-9999) s=false; else s=true;\r\n\t\t\tthis.style.display = s ? \"inline-block\" : \"none\";\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// DELIVER PARRENT FOLDERS OF ELEMENT\r\n\tfunction getParentPath(pd) {\r\n\t\tvar f = [];\r\n\t\tf.push(pd);\r\n\t\tvar quit = 0;\r\n\t\twhile (pd !== -1 && quit!==20) {\r\n\t\t\tvar sindex = RVS.F.getSliderIndex(pd);\r\n\t\t\tpd = sindex!==-1 && RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType][pd]!==undefined ? RVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType][pd].parent || -1 : -1;\r\n\t\t\tf.push(pd);\r\n\t\t\tquit++;\r\n\t\t}\r\n\t\treturn f;\r\n\t}\r\n\r\n\t// SELECTED FILTER MATCH\r\n\tfunction filterMatch(_) {\r\n\t\treturn ((_.filter === _.o.source || _.filter === _.o.type || _.filter === _.o.size || jQuery.inArray(_.filter,_.o.tags)>=0 || jQuery.inArray(_.filter,_.o.tag)>=0 || _.filter == _.o.tag || _.filter == _.o.tags));\r\n\t}\r\n\r\n\r\n\t//UPDATE SCROLLBARS\r\n\tfunction updateScollbarFilters() {\r\n\t\tRVS.LIB.OBJ.container_Filters.RSScroll({\r\n\t\t\twheelPropagation:false\r\n\t\t});\r\n\t\tRVS.LIB.OBJ.container_OutputWrap.RSScroll({\r\n\t\t\twheelPropagation:false\r\n\t\t});\r\n\t}\r\n\r\n\tfunction renameTag(a) {\r\n\t\tswitch(a) {\r\n\t\t\tcase \"Slider\": return {o:1, t:\"Slider\"};break;\r\n\t\t\tcase \"Carousel\": return {o:2, t:\"Carousel\"};break;\r\n\t\t\tcase \"Hero\": return {o:3, t:\"Hero\"};break;\r\n\t\t\tcase \"Website\": return {o:4, t:\"Website\"};break;\r\n\t\t\tcase \"Premium\": return {o:5, t:\"Special FX\"};break;\r\n\t\t\tcase \"Postbased\": return {o:6, t:\"Post Based\"};break;\r\n\t\t\tcase \"Socialmedia\": return {o:7, t:\"Social Media\"};break;\r\n\t\t\tcase \"Revolution Base\": return { o:8, t:\"Basic\"};break;\r\n\t\t\tdefault:\r\n\t\t\treturn {o:0, t:a.replace(\"All \",\"\")};\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setSpecialTagOrder(a) {\r\n\t\tswitch(a) {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sortTagsAsNeeded() {\r\n\t\t$(\".listitems.autosort\").each(function(){\r\n\t\t    $(this).html($(this).children('li').sort(function(a, b){\r\n\t\t        return ($(b).data('position')) < ($(a).data('position')) ? 1 : -1;\r\n\t\t    }));\r\n\t\t});\r\n\t}\r\n\r\n\tfunction removeTag(tagid) {\r\n\t\tdelete RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].tags[tagid];\r\n\t}\r\n\r\n\r\n\tRVS.F.updateCustomCategorySelectors = function(type) {\r\n\r\n\t\tvar _ = RVS.LIB.OBJ.items[type];\r\n\t\tfor (var i in _) {\r\n\t\t\tif (!_.hasOwnProperty(i)) continue;\r\n\t\t\tif (_[i].ref!==undefined) {\r\n\t\t\t\tvar _sel = _[i].ref.find('.olibrary_custom_tagselector');\r\n\t\t\t\tif (_sel!==undefined && _sel.length>0) {\r\n\t\t\t\t\t_sel[0].innerHTML = RVS.F.getCustomTagsOptions(type);\r\n\t\t\t\t\tif (_[i].tags!==undefined && _[i].tags[0]!==undefined)\r\n\t\t\t\t\t\t_sel.val(_[i].tags[0]);\r\n\t\t\t\t\t_sel.ddTP();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.DOC.on('click','.filter_tag_name_edit',function() {\r\n\t\tjQuery(this).closest('.ol_filter_listelement').addClass(\"inedit\");\r\n\t\tjQuery(this).siblings('.filter_tag_name_input').trigger('focus');\r\n\t\treturn false;\r\n\t});\r\n\r\n\r\n\t// DELETE TAG FROM CUSTOM CATEGORIES\r\n\tRVS.DOC.on('click','.filter_tag_name_delete',function() {\r\n\t\tvar ol = jQuery(this).closest('.ol_filter_listelement'),\r\n\t\t\tinput = ol.find('.filter_tag_name_input'),\r\n\t\t\tnam = ol.find('.filter_tag_name'),\r\n\t\t\tidtodel = ol[0].dataset.filter,\r\n\t\t\ttypetodel = ol[0].dataset.type;\r\n\r\n\t\tRVS.F.RSDialog.create({\r\n\t\t\tbgopacity:0.85,\r\n\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\ticon:'delete',\r\n\t\t\ttitle:RVS_LANG.deletecustomcategory,\r\n\t\t\tmaintext:RVS_LANG.areyousuretodelete+\"?\",\r\n\t\t\tsubtext:RVS_LANG.thiswilldeletecustomcategory,\r\n\t\t\tdo:{\r\n\t\t\t\ticon:\"delete\",\r\n\t\t\t\ttext:RVS_LANG.yesdeleteit,\r\n\t\t\t\tcallback:function() {\r\n\t\t\t\t\tRVS.F.ajaxRequest('delete_customlibrary_tags', {id:idtodel, type:typetodel}, function(response){\r\n\t\t\t\t\t\tremoveTag(idtodel);\r\n\t\t\t\t\t\tol.remove();\r\n\t\t\t\t\t\tRVS.F.updateCustomCategorySelectors(typetodel);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcancel:{\r\n\t\t\t\ticon:\"cancel\",\r\n\t\t\t\ttext:RVS_LANG.cancel,\r\n\t\t\t},\r\n\t\t\tswapbuttons:true\r\n\t\t});\r\n\t\tjQuery('#rbm_decisionModal').closest('._TPRB_.rb-modal-wrapper').appendTo(jQuery(document.body)).css({zIndex:100000000});\r\n\t\treturn false;\r\n\t});\r\n\r\n\tRVS.DOC.on('keyup','.olibrary_content_title_input',function(e) {\r\n\t\tvar code = (e.keyCode ? e.keyCode : e.which);\r\n\t\tif (code===13)  jQuery(this).blur();\r\n\t});\r\n\tRVS.DOC.on('click','.olibrary_edit_title, .olibrary_edit_title_main',function() {\r\n\t\tvar wrap = jQuery(this).closest('.olibrary_item'),\r\n\t\t\t_title = wrap.find('.olibrary_content_title'),\r\n\t\t\t_input = wrap.find('.olibrary_content_title_input');\r\n\r\n\t\tif (wrap.hasClass(\"selected\")) {\r\n\r\n\t\t} else {\r\n\t\t\twrap.addClass(\"selected\");\r\n\t\t\t_title[0].style.opacity = 0;\r\n\t\t\t_input[0].style.display = \"block\";\r\n\t\t\t_input.trigger('focus');\r\n\t\t}\r\n\t});\r\n\r\n\t// CHANGE TITLE OF CUSTOM ITEM\r\n\tRVS.DOC.on('blur','.olibrary_content_title_input',function() {\r\n\t\tvar _input = jQuery(this),\r\n\t\t\twrap = _input.closest('.olibrary_item'),\r\n\t\t\t_title = _input.siblings('.olibrary_content_title');\r\n\t\twrap.removeClass(\"selected\");\r\n\t\t_title[0].style.opacity = 1;\r\n\t\t_input[0].style.display = \"none\";\r\n\t\tif (this.value === _title[0].innerHTML) {\r\n\t\t\t//NOTHING\r\n\t\t} else {\r\n\t\t\tvar obj= getObjByID(_title[0].dataset.id,_title[0].dataset.librarytype);\r\n\t\t\tobj.title = _input.val();\r\n\t\t\tRVS.F.ajaxRequest('edit_customlibrary_item', {id:_title[0].dataset.id, name:_input.val(), type:_title[0].dataset.librarytype}, function(response){\r\n\t\t\t\t_title[0].innerHTML = _input.val();\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t// UPLOADED ITEMS CHANGED, REDRAW FILTERS AND ELEMENTS\r\n\tRVS.DOC.on('uploadCustomObject',function(e,params) {\r\n\t\tfor (var i in params.items) {\r\n\t\t\tif (!params.items.hasOwnProperty(i)) continue;\r\n\t\t\tif (!RVS.F.isItemExistsInOl(params.items[i].id,RVS.LIB.OBJ.selectedType)) {\r\n\t\t\t\tparams.items[i].libraryType = RVS.LIB.OBJ.selectedType;\r\n\t\t\t\tif (params.items[i].tags===undefined) params.items[i].tags = [];\r\n\t\t\t\tRVS.LIB.OBJ.items[RVS.LIB.OBJ.selectedType].push(params.items[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar newtags = false;\r\n\r\n\t\tfor (i in params.tags) {\r\n\t\t\tif (!params.tags.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].tags[i]===undefined) {\r\n\t\t\t\tRVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].tags[i] = params.tags[i];\r\n\t\t\t\tnewtags=true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (newtags) rebuildObjectFilter(RVS.LIB.OBJ.selectedType);\r\n\r\n\t\tRVS.F.updateFilteredList();\r\n\t\tRVS.F.finalDrawOfElements();\r\n\t});\r\n\r\n\t// CHANGE THE TAG OF A CUSTOM ITEM\r\n\tRVS.DOC.on('change','.olibrary_custom_tagselector',function() {\r\n\t\tvar _sel = jQuery(this),\r\n\t\t\twrap = _sel.closest('.olibrary_content_left'),\r\n\t\t\tobj= getObjByID(wrap[0].dataset.id, wrap[0].dataset.librarytype);\r\n\t\tobj.tags = [_sel.val()];\r\n\t\tRVS.F.ajaxRequest('edit_customlibrary_item', {id:wrap[0].dataset.id, tags:_sel.val(), type:wrap[0].dataset.librarytype}, function(response){\r\n\t\t\tRVS.F.updateFilteredList();\r\n\t\t\tRVS.F.finalDrawOfElements();\r\n\t\t});\r\n\t});\r\n\r\n\tRVS.DOC.on('click','.filter_tag_name_check',function() {\r\n\t\twindow.ignoreCustomCategoryBlur = true;\r\n\t\tupdateCustomCategory(jQuery(this).closest('.ol_filter_listelement'),true);\r\n\t\treturn;\r\n\t});\r\n\r\n\tRVS.DOC.on('keyup','.filter_tag_name_input',function(e) {\r\n\t\tvar code = (e.keyCode ? e.keyCode : e.which);\r\n\t\tif (code===13) updateCustomCategory(jQuery(this).closest('.ol_filter_listelement'),true);\r\n\t});\r\n\r\n\tRVS.DOC.on('blur','.filter_tag_name_input',function() {\r\n\t\tvar ol = jQuery(this).closest('.ol_filter_listelement');\r\n\t\tsetTimeout(function() {\r\n\t\t\tif (window.ignoreCustomCategoryBlur===true) {\r\n\t\t\t\twindow.ignoreCustomCategoryBlur=false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse updateCustomCategory(ol,false);\r\n\t\t},100);\r\n\t});\r\n\r\n\t// ADD NEW TAG TO CUSTOM CATEGORIES\r\n\tRVS.DOC.on('click','.add_ol_new_custom_category',function() {\r\n\t\tRVS.LIB.OBJ.lastSelectedType = RVS.LIB.OBJ.selectedType;\r\n\t\tRVS.LIB.OBJ.selectedType = this.dataset.type;\r\n\r\n\t\tvar name = \"New Category\"; //+Math.round(Math.random()*1000);\r\n\t\tRVS.F.ajaxRequest('create_customlibrary_tags', {name:name, type:this.dataset.type}, function(response){\r\n\t\t\tRVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].tags[response.id] = response.name;\r\n\t\t\trebuildObjectFilter(RVS.LIB.OBJ.selectedType);\r\n\t\t\tRVS.F.updateCustomCategorySelectors(RVS.LIB.OBJ.selectedType);\r\n\r\n\t\t\tRVS.LIB.OBJ.selectedFilter = \"\"+response.id;\r\n\t\t\tRVS.LIB.OBJ.selectedPage = 1;\r\n\t\t\tRVS.LIB.OBJ.selectedPackage = -1;\r\n\t\t\tRVS.LIB.OBJ.selectedFolder = -1;\r\n\t\t\tRVS.F.loadLibrary({modules:[RVS.LIB.OBJ.selectedType],event:\"reBuildObjectLibrary\"});\r\n\t\t\tjQuery('.ol_filter_listelement.selected').removeClass(\"selected\");\r\n\t\t\tvar _t = jQuery('.ol_filter_listelement[data-type=\"'+RVS.LIB.OBJ.selectedType+'\"][data-filter=\"'+RVS.LIB.OBJ.selectedFilter+'\"]'),\r\n\t\t\t\t_c = _t.closest('.ol_filter_type');\r\n\t\t\t_t.addClass(\"selected\");\r\n\t\t\t_c.find('.ol_filter_headerelement').addClass(\"selected\");\r\n\t\t\tif (RVS.F[\"checkLoadedItems_\"+RVS.LIB.OBJ.selectedType]!==undefined) RVS.F[\"checkLoadedItems_\"+RVS.LIB.OBJ.selectedType]();\r\n\t\t});\r\n\t\treturn false;\r\n\t});\r\n\r\n\r\n\r\n\t// EDIT CUSTOM CATEGORY\r\n\tfunction updateCustomCategory(ol,update) {\r\n\t\tsetTimeout(function() {\r\n\t\t\tol.removeClass(\"inedit\");\r\n\t\t},50);\r\n\t\tvar input = ol.find('.filter_tag_name_input'),\r\n\t\t\tnam = ol.find('.filter_tag_name');\r\n\r\n\t\tif (update) {\r\n\t\t\tvar newname = input.val(),\r\n\t\t\t\tid = ol[0].dataset.filter,\r\n\t\t\t\ttype = ol[0].dataset.type;\r\n\r\n\t\t\tRVS.F.ajaxRequest('edit_customlibrary_tags', {id:id, name:newname, type:type}, function(response){\r\n\t\t\t\tnam[0].innerHTML = newname;\r\n\t\t\t\tRVS.LIB.OBJ.types[type].tags[id] = newname;\r\n\t\t\t\tol[0].dataset.title = newname;\r\n\t\t\t\tRVS.F.updateCustomCategorySelectors(type);\r\n\t\t\t});\r\n\r\n\t\t} else\r\n\t\t\tinput[0].value = nam[0].innerHTML;\r\n\t\twindow.ignoreCustomCategoryBlur = true;\r\n\t\tinput.blur();\r\n\t}\r\n\r\n\t// ADD THE SINGLE FILTERS\r\n\tfunction addObjectFilter(_) {\r\n\t\tvar subtags = _.custom!==undefined || (_.tags!==undefined && Object.keys(_.tags).length>0);\r\n\t\t\t_html = '<div data-subtags=\"'+subtags+'\" data-type=\"'+_.groupType+'\" id=\"ol_filter_'+_.groupType+'\" data-title=\"'+_.groupAlias+'\" class=\"ol_filter_type '+(_.groupopen ? \"open\" : \"\")+'\"><div data-filter=\"all\" data-type=\"'+_.groupType+'\" data-title=\"'+_.groupAlias+'\" data-subtags=\"'+subtags+'\" class=\"ol_filter_listelement ol_filter_headerelement\"><i class=\"material-icons\">'+_.icon+'</i><span class=\"filter_type_name\">'+_.groupAlias+'</span></div>';\r\n\t\tif (subtags) {\r\n\t\t\t_html +='<ul class=\"ol_filter_group\">';\r\n\t\t\t_html +='<li data-type=\"'+_.groupType+'\" data-filter=\"all\" data-title=\"All '+_.groupAlias+'\" class=\"ol_filter_listelement\"><span class=\"filter_tag_name\">All</span></li>';\r\n\t\t\tvar prel = new Array(),\r\n\t\t\t\tdynl = new Array();\r\n\r\n\t\t\tfor (var i in _.tags) {\r\n\r\n\t\t\t\tif(!_.tags.hasOwnProperty(i) || typeof _.tags[i] == 'function') continue;\r\n\t\t\t\tvar m = _.groupType===\"moduletemplates\" ? renameTag(_.tags[i]) : {o:0, t:_.tags[i]},\r\n\t\t\t\t\ttagid = _.tagIDs!==undefined ? _.tagIDs[i] : \"noid\",\r\n\t\t\t\t\tcont;\r\n\r\n\r\n\t\t\t\tcont = '<li data-type=\"'+_.groupType+'\" data-filter=\"'+i+'\" data-title=\"'+RVS.F.capitalise(m.t)+'\" class=\"ol_filter_listelement\">';\r\n\t\t\t\tcont += '<span class=\"filter_tag_name\">'+m.t+'</span>';\r\n\r\n\t\t\t\tif (_.custom!==undefined) {\r\n\t\t\t\t\tcont +='<input class=\"filter_tag_name_input\" value=\"'+m.t+'\" type=\"text\">';\r\n\t\t\t\t\tcont += '<i class=\"filter_tag_name_edit material-icons\">edit</i>';\r\n\t\t\t\t\tcont += '<i class=\"filter_tag_name_delete material-icons\">delete</i>';\r\n\t\t\t\t\tcont += '<i class=\"filter_tag_name_check material-icons\">check</i>';\r\n\t\t\t\t\tcont += '<i class=\"filter_tag_name_cancel material-icons\">close</i>';\r\n\t\t\t\t\tcont += '<div class=\"ol_gradientbg\"></div>';\r\n\t\t\t\t}\r\n\t\t\t\tcont += '</li>';\r\n\r\n\r\n\t\t\t\t//if (_.groupType===\"moduletemplates\") {\r\n\t\t\t\tif (m.o==0) dynl.push(cont); else prel[m.o] = cont;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i in prel) if (prel.hasOwnProperty(i)) if (prel[i]!==undefined) _html += prel[i];\r\n\t\t\tfor (var i in dynl) if (dynl.hasOwnProperty(i)) if (dynl[i]!==undefined) _html += dynl[i];\r\n\t\t\tif (_.custom!==undefined) _html +='<li style=\"padding-left:0px\" data-type=\"'+_.groupType+'\" data-filter=\"createcategory\" class=\"ol_filter_listelement add_ol_new_custom_category\"><span class=\"filter_tag_name\"><i style=\"margin-left:10px; font-size:18px\" class=\"material-icons\">add</i>'+RVS_LANG.addcategory+'</span></li>';\r\n\t\t\t_html += '</ul>';\r\n\t\t}\r\n\t\t_html += '</div>';\r\n\r\n\r\n\r\n\t\tRVS.LIB.OBJ.container_Filters.append(_html);\r\n\r\n\r\n\t}\r\n\r\n\r\n\t/*\r\n\tCUSTOM FILES IN CORE\r\n\t*/\r\n\r\n\tRVS.F.checkLoadedItems_svgcustom = function () {\r\n\t\t// Create Dummy if Needed && Load Library Items\r\n\t\tRVS.F.createLibraryDummyDownloadItem('svgcustom', RVS_LANG.uploadfirstitem);\r\n\t\tRVS.F.loadCustomLibraryItems('svgcustom', 2.15);\r\n\t}\r\n\r\n\r\n\tfunction createCustomSVGDefaults() {\r\n\t\t// Custom Core Object Libraries\r\n\t\tRVS.LIB.OBJ.types.svgcustom =  RVS.F.safeExtend(true,{ tags: {},upload: { buttonText: '<i class=\"material-icons\">publish</i> ' + RVS_LANG.importsvgfiles, callBack: function (params) { RVS.F.customSVGUpload(params);}}},RVS.LIB.OBJ.types.svgcustom);\r\n\t\tRVS_LANG['ol_svgcustom'] = 'My SVG Library';\r\n\t}\r\n\r\n\tfunction createContent(item, htmlobj, type, marker) {\r\n\t\t\tvar content = \"\",\r\n\t\t\t\tmedia = htmlobj.find('.olibrary_media_wrap');\r\n\r\n\t\t\tif (type === \"svgcustom\" && (item.tags !== undefined && item.tags[0] !== undefined && RVS.LIB.OBJ.types.svgcustom !== undefined && RVS.LIB.OBJ.types.svgcustom.tags !== undefined && RVS.LIB.OBJ.types.svgcustom.tags[item.tags[0]] === undefined)) item.tags[0] = \"all\";\r\n\r\n\t\t\t// ITEM METAS\r\n\t\t\tcontent = '<div class=\"olibrary_content_left\" data-id=\"' + item.id + '\" data-type=\"' + item.type + '\" data-librarytype=\"' + item.libraryType + '\">';\r\n\r\n\t\t\t// TITLE\r\n\t\t\tif (type === \"svgcustom\") content += '\t<div data-id=\"' + item.id + '\" data-type=\"' + item.type + '\" data-librarytype=\"' + item.libraryType + '\" class=\"' + (item.id !== \"svgcustom_99999\" ? 'olibrary_edit_title_main ' : '') + 'olibrary_content_title\">' + item.title + '</div><input class=\"olibrary_content_title_input\" value=\"' + item.title + '\">';\r\n\r\n\r\n\t\t\t// BLUE MARKER (RED FOR SAVING, AND  SELECT BOX FOR CUSTOM CATEGORIES)\r\n\t\t\tif (item.id === \"svgcustom_99999\")\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_type oc_red\">' + RVS_LANG.savecustomfile + '</div>';\r\n\t\t\telse if (type === \"svgcustom\")\r\n\t\t\t\tcontent += '\t<div class=\"olibrary_content_type oc_blue\">' + RVS_LANG.customfile + '</div><div class=\"olibrary_custom_tagselector_wrap\"><select class=\"olibrary_custom_tagselector tos2 nosearchbox\">' + RVS.F.getCustomTagsOptions(item.libraryType) + '</select></div>';\r\n\r\n\r\n\t\t\tcontent += '</div>';\r\n\r\n\t\t\tif (item.id !== type + \"_99999\") {\r\n\t\t\t\tcontent += '<div class=\"olibrary_content_right\">';\r\n\t\t\t\tcontent += '\t<i data-id=\"' + item.id + '\" data-type=\"' + item.type + '\" data-librarytype=\"' + item.libraryType + '\" class=\"olibrary_favorit material-icons ' + (item.favorite ? \"selected\" : \"\") + '\">star</i>';\r\n\t\t\t\tcontent += '</div>';\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id === \"svgcustom_99999\")\r\n\t\t\t\thtmlobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"' + item.libraryType + '\"  data-event=\"runCustomObjectImport\" data-id=\"' + item.id + '\" data-handle=\"' + item.handle + '\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i></div>');\r\n\t\t\telse if (type === \"svgcustom\")\r\n\t\t\t\thtmlobj.append('<div class=\"olibrary_media_overlay twoicon\"><i data-librarytype=\"' + item.libraryType + '\"  data-id=\"' + item.id + '\" data-handle=\"' + item.handle + '\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i><i data-librarytype=\"' + item.libraryType + '\" data-id=\"' + item.id + '\" data-handle=\"' + item.handle + '\" data-elementtype=\"\" class=\"material-icons ol_link_to_delete\">delete</i></div>');\r\n\t\t\telse if (item.id !== type + \"_99999\")\r\n\t\t\t\thtmlobj.append('<div class=\"olibrary_media_overlay oneicon\"><i data-librarytype=\"' + item.libraryType + '\" data-id=\"' + item.id + '\" data-handle=\"' + item.handle + '\" data-elementtype=\"\" class=\"material-icons ol_link_to_add\">add</i></div>');\r\n\r\n\t\t\tmedia[0].className += \" patternbg nosvgcoloring\";\r\n\r\n\t\t\tif (item.id === \"svgcustom_99999\") {\r\n\t\t\t\tmedia[0].innerHTML = '<div class=\"ol_svg_preview\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"></path></svg></div>';\r\n\t\t\t\tmedia[0].className += \" downloadlottieanim\";\r\n\t\t\t} else {\r\n\t\t\t\tif (item.img!==undefined) {\r\n\t\t\t\t\tjQuery.get(item.img, function(data) {\r\n\t\t\t\t\t\t  var div = RVS.F.cE({cN: \"ol_svg_preview\"});\r\n\t\t\t\t\t\t  div.innerHTML = new XMLSerializer().serializeToString(data.documentElement);\r\n\t\t\t\t\t\t  media[0].appendChild(div);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn {content: content}\r\n\t\t}\r\n\r\n\t// BUILD ITEM CONTAINER FOR CUSTOM LOTTIE FILES\r\n\tRVS.F.newObjectLibraryItem_svgcustom = function (item, htmlobj) {\r\n\t\treturn createContent(item, htmlobj, 'svgcustom', RVS_LANG.customsvgfile);\r\n\t}\r\n\r\n\t/*\r\n\tFUNCTION FOR CUSTOM FILE UPLOAD\r\n\t */\r\n\tRVS.F.customSVGUpload = function (_) {\r\n\t\tjQuery('#filedrop').hide();\r\n\t\tvar adto = RVS.LIB.OBJ.types[RVS.LIB.OBJ.selectedType].tags[RVS.LIB.OBJ.selectedFilter];\r\n\t\tadto = adto === undefined ? \"all\" : adto;\r\n\t\tRVS.F.RSDialog.create({\r\n\t\t\tbgopacity: 0.85,\r\n\t\t\tmodalid: 'rbm_decisionModal',\r\n\t\t\ticon: 'cloud_upload',\r\n\t\t\ttitle: RVS_LANG.svgcustomimport,\r\n\t\t\tmaintext: _.files.length + \" \" + RVS_LANG.svgBIG + \" \" + RVS_LANG.arereadytoimport,\r\n\t\t\tsubtext: RVS_LANG.addtocustomornew,\r\n\t\t\tquickclose: true,\r\n\t\t\tdo: {\r\n\t\t\t\ticon: \"add\",\r\n\t\t\t\ttext: RVS_LANG.addto + \" \" + adto,\r\n\t\t\t\tcallback: function () {\r\n\t\t\t\t\tjQuery('#filedrop').show();\r\n\t\t\t\t\tRVS.F.uploadFiles({\r\n\t\t\t\t\t\tcustoms: {\r\n\t\t\t\t\t\t\ttype: RVS.LIB.OBJ.selectedType,\r\n\t\t\t\t\t\t\tid: RVS.LIB.OBJ.selectedFilter\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tform: RVS.fileDropForm,\r\n\t\t\t\t\t\tfiles: _.files,\r\n\t\t\t\t\t\tfileindex: 0,\r\n\t\t\t\t\t\treport: '#fileprocessing_',\r\n\t\t\t\t\t\tsuccessFinal: _.success,\r\n\t\t\t\t\t\taction: 'upload_customlibrary_item'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcancel: {\r\n\t\t\t\ticon: \"folder\",\r\n\t\t\t\ttext: RVS_LANG.createnewcategory,\r\n\t\t\t\tcallback: function () {\r\n\t\t\t\t\tjQuery('#filedrop').show();\r\n\t\t\t\t\tRVS.F.uploadFiles({\r\n\t\t\t\t\t\tcustoms: {\r\n\t\t\t\t\t\t\ttype: RVS.LIB.OBJ.selectedType,\r\n\t\t\t\t\t\t\ttag: 'New Category'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tform: RVS.fileDropForm,\r\n\t\t\t\t\t\tfiles: _.files,\r\n\t\t\t\t\t\tfileindex: 0,\r\n\t\t\t\t\t\treport: '#fileprocessing_',\r\n\t\t\t\t\t\tsuccessFinal: _.success,\r\n\t\t\t\t\t\taction: 'upload_customlibrary_item'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tswapbuttons: true\r\n\t\t});\r\n\t\tjQuery('#rbm_decisionModal').closest('._TPRB_.rb-modal-wrapper').appendTo(jQuery('body')).css({\r\n\t\t\tzIndex: 100000000\r\n\t\t});\r\n\t}\r\n\r\n})();","Nwdthemes_Revslider/admin/assets/js/modules/slide.js":"/*!\r\n * REVOLUTION 6.0.0 EDITOR SLIDE JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\n(function() {\r\n\tvar layerlistElementMarkup = '<div class=\"the_layers_in_slide\" id=\"the_layers_in_slide_###\">',\r\n\t\tatiw,\r\n\t\tpzdrag,\r\n\t\tthbRptr;\r\n\r\n\tlayerlistElementMarkup += '\t\t<div class=\"resizeMainLayerListWrap\" id=\"resizeMainLayerListWrap_###\">';\r\n\tlayerlistElementMarkup += '\t\t\t<div class=\"mainLayerListWrap\" id=\"mainLayerListWrap_###\">';\r\n\tlayerlistElementMarkup += '\t\t\t</div>';\r\n\tlayerlistElementMarkup += '\t\t</div>';\r\n\tlayerlistElementMarkup += '\t</div>';\r\n\r\n\tRVS.LIB=RVS.LIB===undefined ? RVS.LIB = {} : RVS.LIB;\r\n\r\n\r\n\t/****************************************\r\n\t\t-\tPUBLIC FUNCTIONS -\r\n\t****************************************/\r\n\r\n\t/*\r\n\tINITIALISE ALL LISTENERS AND INTERNAL FUNCTIONS FOR SLIDE EDITING/BUILDING\r\n\t*/\r\n\tRVS.F.initSlideBuilder = function() {\r\n\t\tthbRptr = jQuery('#slide_thumb_repeater');\r\n\r\n\t\tRVS.DOC.on('mouseenter','.slide_list_element',function() {\r\n\t\t\tthbRptr[0].innerHTML = \"\";\r\n\t\t\tif (RVS.SLIDER.settings.general.useWPML)\r\n\t\t\t\tjQuery('#slide_thumb_repeater').append(jQuery(this).find('.sle_thumb').clone());\r\n\t\t\telse\r\n\t\t\t\tjQuery('#slide_thumb_repeater').append(jQuery(this).find('.sle_thumb').first().clone());\r\n\t\t\tthbRptr.show();\r\n\t\t});\r\n\t\tRVS.DOC.on('mouseleave','.slide_list_element',function() {\r\n\t\t\tthbRptr[0].innerHTML = \"\";\r\n\t\t});\r\n\r\n\t\tcreateSlideAnimationList();\r\n\t\tinitLocalInputBoxes();\r\n\t\tinitLocalListeners();\r\n\t\tinitKenBurnDrag();\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.changeFlags = function(_) {\r\n\t\t_ = RVS.SLIDER[RVS.S.slideId].slide.child;\r\n\t\tdocument.getElementById(RVS.S.slideId+'_flag_source').innerHTML = RVS.SLIDER.settings.general.useWPML && typeof RS_WPML_LANGS!==\"undefined\" && RS_WPML_LANGS!==undefined && _!==undefined && _.language!==undefined && _.language!==\"\" && _.language!==false && RS_WPML_LANGS[_.language]!==undefined ? '<span class=\"wpml_flag_wrap\"><img src=\"'+RS_WPML_LANGS[_.language].image+'\" class=\"wpml-img-flag\" /></span>': '';\r\n\t}\r\n\r\n\t/*\r\n\tBUILD A SLIDE WHERE OBJ ATTRIBUTES EXISTING ALREADY\r\n\t*/\r\n\tRVS.F.addToSlideList = function(obj) {\r\n\t\tif (RVS.SLIDER.settings.general.useWPML) RVS.F.updateEasyInputs({container:jQuery('#form_slidergeneral_general_usewpml'),trigger:\"init\"});\r\n\t\tvar _llem = layerlistElementMarkup.split('###').join(RVS.S.slideId),\r\n\t\t\t_ = RVS.SLIDER[obj.id].slide,\r\n\t\t\tflag = RVS.SLIDER.settings.general.useWPML && typeof RS_WPML_LANGS!==\"undefined\" && RS_WPML_LANGS!==undefined && _.child!==undefined && _.child.language!==undefined && _.child.language!==\"\" && _.child.language!==false && RS_WPML_LANGS[_.child.language]!==undefined ? '<span id=\"'+obj.id+'_flag_source\" class=\"flag_container aaa\"><span class=\"wpml_flag_wrap\"><img src=\"'+RS_WPML_LANGS[_.child.language].image+'\" class=\"wpml-img-flag\" /></span></span>' : '<span id=\"'+obj.id+'_flag_source\" class=\"flag_container bbb\"></span>',\r\n\t\t\taddchildslide =  typeof RS_WPML_LANGS!==\"undefined\" && RS_WPML_LANGS!==undefined ? '<div class=\"addchildslide\" data-id=\"'+obj.id+'\"><i class=\"material-icons\">playlist_add</i></div>' : '',\r\n\t\t\tslideelement = _.static.isstatic ?\r\n\t\t\t    jQuery('<div id=\"slide_list_element_'+obj.id+'\" class=\"do_not_sort_slide_list_element slide_list_element static-slide-btn\" data-ref=\"'+obj.id+'\"><div class=\"sle_description\"><i class=\"material-icons\">layers</i>'+_.title+'</div></div>') :\r\n\t\t\t    _.child===undefined || _.child.parentId===undefined || _.child.parentId===\"\" || _.child.parentId.length===0 || _.child.parentId===false ?\r\n\t\t\t\tjQuery('<li id=\"slide_list_element_'+obj.id+'\" class=\"slide_list_element sortable_slide_list_element\" data-ref=\"'+obj.id+'\"><div class=\"slide_elemenet_content\"><div class=\"sle_thumb\"></div><div class=\"sle_description\"><i class=\"material-icons\">swap_vert</i>'+flag+'<span id=\"slide_list_element_title_index_'+obj.id+'\"></span><span id=\"slide_list_element_title_'+obj.id+'\">'+_.title+'</span></div><div class=\"slidetab_toolbox\"><div id=\"publish_toggle_icon_'+obj.id+'\" class=\"'+_.publish.state+'slide\"><i class=\"publishedicon material-icons\">visibility</i><i class=\"unpublishedicon material-icons\">visibility_off</i></div><div class=\"deleteslide\"><i class=\"material-icons\">delete</i></div><div class=\"duplicateslide\"><i class=\"material-icons\">content_copy</i></div><div class=\"editslide\" data-id=\"'+obj.id+'\" ><i class=\"material-icons\">settings</i></div>'+addchildslide+'</div>'+_llem+'</div><div id=\"slide_list_element_childwrap_'+obj.id+'\" class=\"slide_list_child_element_wrap\"></div></li>'):\r\n\t\t\t\tjQuery('<li id=\"slide_list_element_'+obj.id+'\" class=\"slide_list_child_element\" data-ref=\"'+obj.id+'\"><div class=\"sle_thumb\"></div><div class=\"slide_elemenet_content\"><div class=\"sle_description\">'+flag+'<span id=\"slide_list_element_title_'+obj.id+'\">'+_.title+'</span></div><div class=\"slidetab_toolbox\"><div id=\"publish_toggle_icon_'+obj.id+'\" class=\"'+_.publish.state+'slide\"><i class=\"publishedicon material-icons\">visibility</i><i class=\"unpublishedicon material-icons\">visibility_off</i></div><div class=\"deleteslide\"><i class=\"material-icons\">delete</i></div><div class=\"editslide\" data-id=\"'+obj.id+'\" ><i class=\"material-icons\">settings</i></div></div>'+_llem+'</div></li>');\r\n\r\n\t\tvar thmb = slideelement.find('.sle_thumb');\r\n\t\tupdateSlideThumbs({id:obj.id, target:thmb});\r\n\t\tif (_.static.isstatic)\r\n\t\t\tslideelement.insertBefore(RVS.C.slideList);\r\n\t\telse {\r\n\t\t\tif (_.child.parentId!==\"\" && _.child.parentId!==undefined)\r\n\t\t\t\tjQuery('#slide_list_element_childwrap_'+_.child.parentId).append(slideelement);\r\n\t\t\telse\r\n\t\t\t\tRVS.C.slideList.append(slideelement);\r\n\t\t}\r\n\t\t//slideelement.insertBefore('#slide_picker_wrap #newslide');\r\n\t\tif (obj.ignoreSort!==true) {\r\n\t\t\tRVS.F.makeSlideListSortable();\r\n\t\t\tRVS.F.makeSlideListScroll();\r\n\t\t}\r\n\r\n\r\n\t};\r\n\r\n\tRVS.F.makeSlideListScroll = function() {\t\t\r\n\t\tif (RVS.S.slidesListSB===undefined)\r\n\t\t\tRVS.S.slidesListSB = RVS.C.slideList.RSScroll({\r\n\t\t\t\twheelPropagation:false,\r\n\t\t\t\tsuppressScrollX:true,\r\n\t\t\t\tminScrollbarLength:100\r\n\t\t\t});\r\n\t\telse\r\n\t\t\tRVS.C.slideList.RSScroll(\"update\");\r\n\t\tRVS.DOC.on('mouseenter','#slidelist',function() {\t\t\t\r\n\t\t\tRVS.C.slideList.RSScroll(\"update\");\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t/* SINGLE\r\n\tGET NEXT AVAILABLE SLIDE ID AND RUN ADDREMOVESLIDEWITHBACKUP\r\n\t*/\r\n\tRVS.F.addRemoveSlideWithBackupAfterSlideId = function(params) {\r\n\t\tvar amount = params.urls!==undefined ? params.urls.length : 1,\r\n\t\t\ttemp = RVS.F.safeExtend(true,{},params.slideObj);\r\n\t\t\ttemp.slide.child.parentId = params.parentId!==undefined ? params.parentId : \"\";\r\n\r\n\t\tRVS.F.ajaxRequest('create_slide', {slider_id:RVS.ENV.sliderID, amount:amount}, function(response){\r\n\t\t\tif(response.success) {\r\n\t\t\t\tfor (var i in response.slide_id) {\r\n\t\t\t\t\tif(!response.slide_id.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tparams.slideId = response.slide_id[i];\r\n\t\t\t\t\tparams.slideObj = RVS.F.safeExtend(true,{},temp);\r\n\t\t\t\t\tparams.slideObj.id = params.slideObj.slide.uid = response.slide_id[i];\r\n\r\n\t\t\t\t\tif (params.urls!==undefined && params.urls.length>0) {\r\n\t\t\t\t\t\tparams.slideObj.slide.bg.type=\"image\";\r\n\t\t\t\t\t\tparams.slideObj.slide.bg.image=params.urls[i].url.split(\" \").join(\"%20\");\r\n\t\t\t\t\t\tparams.slideObj.slide.bg.imageSourceType=\"full\";\r\n\t\t\t\t\t\tRVS.F.slideinWork(response.slide_id[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tRVS.F.addRemoveSlideWithBackup(params);\r\n\t\t\t\t\tif (params.parentID!==undefined || params.fromSlideId!==undefined) {\r\n\t\t\t\t\t\tRVS.F.convertIDStoTxt();\r\n\t\t\t\t\t\tRVS.F.saveSlides({index:0,slides:RVS.SLIDER.slideIDs, trigger:RVS.F.saveSliderSettings,works:RVS.SLIDER.inWork,force:true});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (params.fromSlideId!==undefined) RVS.F.duplicateSkinColors({type:\"slide\", slideFrom:params.fromSlideId, slideTo:params.slideId});\r\n\t\t\t\t\tRVS.DOC.trigger('newSlideCreated', [response.slide_id[i]]);\r\n\t\t\t\t}\r\n\t\t\t\tif (params.endOfMain!==undefined) params.endOfMain();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tCREATE NEW SLIDE ON DEMAND - DUPLICATE OR NEW SLIDE WITH BACKUP\r\n\t*/\r\n\tRVS.F.addRemoveSlideWithBackup = function(obj,index)\t{\r\n\t\tRVS.F.openBackupGroup({id:obj.id,txt:obj.step,icon:obj.icon,lastkey:\"#\"+obj.slideId});\r\n\t\t // Push Slide Object to Slider Array\r\n\t\tRVS.SLIDER[obj.slideId] = obj.slideObj;\r\n\r\n\t\tvar _n = RVS.SLIDER.slideIDs.slice(),\r\n\t\t\tcache,\r\n\t\t\tmMO,\r\n\t\t\tfocusindex,\r\n\t\t\tssf = false;\r\n\r\n\t\tif (obj.id===\"deleteslide\") {\r\n\t\t\tvar _deleteIndex,sli;\r\n\t\t\t// Kill WPML CHILD ELEMENTS IF PARENT DELETED\r\n\t\t\tfor (var i in RVS.SLIDER.slideIDs) {\r\n\t\t\t\tsli = \"\"+RVS.SLIDER.slideIDs[i];\r\n\t\t\t\tif (RVS.SLIDER[sli]!==undefined && RVS.SLIDER[sli].slide!==undefined && RVS.SLIDER[sli].slide.child!==undefined && (\"\"+RVS.SLIDER[sli].slide.child.parentId===\"\"+obj.slideId)) {\r\n\t\t\t\t\t// Delete This Slide also !\r\n\t\t\t\t\t_deleteIndex = RVS.F._inArray(sli,_n);\r\n\t\t\t\t\tfocusindex = _deleteIndex-1 >=0 ? _deleteIndex-1 : _deleteIndex;\r\n\t\t\t\t\tif (\"\"+sli==\"\"+RVS.S.slideId) ssf = true;\r\n\t\t\t\t\t_n.splice(_deleteIndex,1);\r\n\t\t\t\t\tRVS.SLIDER[sli] = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_deleteIndex = RVS.F._inArray(obj.slideId,_n);\r\n\t\t\tfocusindex = _deleteIndex-1 >=0 ? _deleteIndex-1 : _deleteIndex;\r\n\t\t\tif (RVS.S.slideId==obj.slideId) ssf = true;\r\n\t\t\t_n.splice(_deleteIndex,1);\r\n\r\n\t\t\tRVS.F.updateSliderObj({path:'slideIDs',val:_n});\r\n\t\t\tcache = jQuery('#slide_list_element_'+obj.slideId).removeClass(\"selected\").detach();\r\n\r\n\t\t} else {\r\n\t\t\t_n.push(obj.slideId);\r\n\t\t\tRVS.F.updateSliderObj({path:'slideIDs',val:_n});\r\n\t\t\tRVS.F.addToSlideList({id:obj.slideId});\r\n\t\t\tmMO = {mode:\"slidelayout\",set:true, slide:obj.slideId};\r\n\t\t}\r\n\t\tRVS.F.backup({path:obj.slideId, cache:cache, beforeSelected:obj.beforeSelected, icon:obj.icon,txt:obj.step,lastkey:\"#\"+obj.slideId,force:true,val:RVS.F.safeExtend(true,{},RVS.SLIDER[obj.slideId]), old:obj.slideObjOld, backupType:\"slide\", bckpGrType:obj.id});\r\n\r\n\t\tif (jQuery('.slide_list_element.sortable_slide_list_element').length==0) mMO = {mode:\"sliderlayout\",set:true};\r\n\r\n\t\tif (mMO!==undefined) RVS.F.mainMode(mMO);\r\n\t\telse if (ssf) RVS.F.setSlideFocus({slideid:(focusindex>=RVS.SLIDER.slideIDs.length ? RVS.SLIDER.slideIDs[0] : RVS.SLIDER.slideIDs[focusindex])});\r\n\r\n\t\tRVS.F.closeBackupGroup({id:obj.id});\r\n\t\tif (obj.after!==undefined) obj.after();\r\n\t};\r\n\r\n\r\n\r\n\r\n\t/*\r\n\tSLIDE FOCUSED\r\n\t*/\r\n\tRVS.F.setSlideFocus = function(obj) {\r\n\t\tRVS.F.setEditorUrl(obj.slideid);\r\n\t\tRVS.F.slideinWork(obj.slideid);\r\n\r\n\t\tdelete RVS.S.bgobj;\r\n\r\n\t\tRVS.DOC.trigger('beforeSlideChange');\r\n\t\tjQuery('.slide_list_element.selected, .slide_list_child_element.selected').removeClass(\"selected\");\r\n\t\tjQuery('#slide_list_element_'+obj.slideid).addClass(\"selected\");\r\n\t\tjQuery('.slide_li').hide(); // MOve to Else if want to show underlaying Slide also.\r\n\r\n\t\tif (RVS.SLIDER[obj.slideid].slide.static.isstatic) {\r\n\t\t\twindow.lastSlideSettingForm = \"static\";\r\n\t\t\tRVS.F.updateStaticStartEndList();\r\n\t\t\tRVS.C.vW.classList.add(\"staticlayersview\");\r\n\t\t\tRVS.F.openSettings({forms:[\"*slidelayout**mode__slidestyle*#form_slidestatic\"], uncollapse:true});\r\n\t\t} else {\r\n\t\t\tRVS.C.vW.classList.remove(\"staticlayersview\");\r\n\t\t\tif (window.lastSlideSettingForm === \"static\") {\r\n\t\t\t\twindow.lastSlideSettingForm = jQuery('.slide_submodule_trigger.selected').data('forms');\r\n\t\t\t\tRVS.F.openSettings({forms:window.lastSlideSettingForm, uncollapse:true});\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.DOC.trigger(\"slideAmountUpdated\");\r\n\r\n\t\tRVS.S.slideId = obj.slideid;\r\n\t\tRVS.ENV.firstLayoutAfterSlideload = true;\r\n\t\t\t\r\n\t\tRVS.DOC.trigger('showLastEditedSlideStatic');\r\n\t\tRVS.DOC.trigger(\"slideFocusChanged\");\r\n\r\n\t\t//CHECK SLIDE EXISTENS\r\n\t\tif (jQuery('#slide_'+obj.slideid).length===0) {\r\n\r\n\t\t\t// CREATE THE SLIDE HERE, AND LOAD ALL ELEMENTS ETC.\r\n\t\t\tvar newSlide = jQuery('#slide_li_template').clone();\r\n\t\t\tnewSlide.attr('id',\"slide_\"+obj.slideid);\r\n\t\t\tif (RVS.SLIDER[obj.slideid].slide.static.isstatic) newSlide.addClass(\"static_slide_li\");\r\n\t\t\tnewSlide.find('.crumb_title').html('<i class=\"material-icons\">wallpaper</i>'+RVS.SLIDER[obj.slideid].slide.title);\r\n\t\t\tRVS.S.ulInner.append(newSlide);\r\n\t\t\tRVS.TL[RVS.S.slideId] = RVS.TL[RVS.S.slideId]===undefined ? {} : RVS.TL[RVS.S.slideId];\r\n\t\t}\r\n\r\n\t\t// Trigger Slide Change Event\r\n\t\tif (RVS.S.lastVisibleSlideId!==obj.slideid) RVS.DOC.trigger(\"slideChanged\");\r\n\t\tRVS.S.lastVisibleSlideId = obj.slideid;\r\n\r\n\t\tRVS.C.slide = jQuery('#slide_'+obj.slideid);\r\n\r\n\t\t// CREATE SLIDE BG CONTAINERS\r\n\t\tif (RVS.SBGS===undefined || RVS.SBGS[RVS.S.slideId]===undefined) {\r\n\t\t\tRVS.SBGS = RVS.SBGS===undefined ? {} : RVS.SBGS;\r\n\t\t\tRVS.SBGS[RVS.S.slideId] = {\r\n\t\t\t\twrap : RVS.F.cE({t:'rs-sbg-px'}),\r\n\t\t\t\tn : {\r\n\t\t\t\t\tsbg : RVS.F.cE({t:'rs-sbg-wrap',cN:'in'}),\r\n\t\t\t\t\tcanvas : RVS.F.cE({t:'canvas'}),\r\n\t\t\t\t\tbgvid : false,\r\n\t\t\t\t\tloadobj:{}\r\n\t\t\t\t},\r\n\t\t\t\tc : {\r\n\t\t\t\t\tsbg : RVS.F.cE({t:'rs-sbg-wrap'}),\r\n\t\t\t\t\tcanvas : RVS.F.cE({t:'canvas'}),\r\n\t\t\t\t\tbgvid : false,\r\n\t\t\t\t\tprevious : true,\r\n\t\t\t\t\tloadobj:{}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tRVS.SBGS[RVS.S.slideId].n.sbg.appendChild(RVS.SBGS[RVS.S.slideId].n.canvas);\r\n\t\t\tRVS.SBGS[RVS.S.slideId].c.sbg.appendChild(RVS.SBGS[RVS.S.slideId].c.canvas);\r\n\t\t\tRVS.SBGS[RVS.S.slideId].wrap.appendChild(RVS.SBGS[RVS.S.slideId].n.sbg);\r\n\t\t\tRVS.SBGS[RVS.S.slideId].wrap.appendChild(RVS.SBGS[RVS.S.slideId].c.sbg);\r\n\t\t\tRVS.C.slide.prepend(RVS.SBGS[RVS.S.slideId].wrap);\r\n\t\t\tRVS.SBGS[RVS.S.slideId].c.ctx = RVS.SBGS[RVS.S.slideId].c.canvas.getContext('2d');\r\n\t\t\tRVS.SBGS[RVS.S.slideId].n.ctx = RVS.SBGS[RVS.S.slideId].n.canvas.getContext('2d');\r\n\r\n\t\t}\r\n\r\n\r\n\t\tRVS.C.layergrid = RVS.C.slide.find('.layer_grid');\r\n\t\tRVS.DOC.trigger('sliderProgressUpdate');\r\n\t\tif (!window.contentDeltaFirstRun) RVS.F.updateContentDeltas();\r\n\t\t RVS.C.rZone.top = RVS.C.layergrid.find('.row_wrapper_top');\r\n\t\t RVS.C.rZone.middle = RVS.C.layergrid.find('.row_wrapper_middle');\r\n\t\t RVS.C.rZone.bottom = RVS.C.layergrid.find('.row_wrapper_bottom');\r\n\r\n\t\tRVS.C.layergrid.attr(\"id\",\"layer_grid_\"+obj.slideid);\r\n\t\tRVS.HALL = RVS.HALL==undefined ? {} : RVS.HALL;\r\n\t\tRVS.HALL[RVS.S.slideId] = RVS.HALL[RVS.S.slideId] == undefined ? {} : RVS.HALL[RVS.S.slideId];\r\n\t\tRVS.H = RVS.HALL[RVS.S.slideId];\r\n\r\n\r\n\t\tRVS.C.slide.show();\r\n\t\tRVS.DOC.trigger('updatesliderlayout','setSlideFocus-139');\r\n\t\tRVS.F.setRulers();\r\n\r\n\t\tRVS.F.updateFields(obj.ignoreUpdateFields);\r\n\r\n\r\n\r\n\t\t//CALL BASIC CHANGES\r\n\r\n\t\tif (RVS.S.slideBGCallFirsttime!==undefined) RVS.F.redrawSlideBG();\r\n\t\tif (RVS.S.slideInputFieldsInitialised) RVS.F.udpateSelectedSlideAnim(true);\r\n\r\n\t\tRVS.F.updateParallaxLevelTexts();\r\n\t\tRVS.F.setRulers();\r\n\t\tvar beforeSelected = RVS.selLayers.length;\r\n\r\n\t\t//Build Layers here\r\n\t\tRVS.F.buildLayerLists({ignoreSelectLayers:obj.ignoreUpdateFields, ignoreDrawLayers:true});\r\n\t\t\r\n\t\tRVS.F.updateReferencigToggleLayerType();\t\t\t\r\n\t\tRVS.F.updateAllLayerFrames();\r\n\r\n\t\tRVS.F.updateSelectedHtmlLayers(true,true);\r\n\r\n\t\tif (RVS.S.slideBGCallFirsttime!==undefined && RVS.selLayers.length!=beforeSelected) RVS.F.selectedLayersVisualUpdate();\r\n\r\n\t\tRVS.S.slideBGCallFirsttime=true;\r\n\r\n\t\tRVS.DOC.trigger('updateScrollBars');\r\n\r\n\t\tRVS.DOC.trigger(\"updateAllInheritedSize\");\r\n\t\tRVS.DOC.trigger(\"slideFocusFunctionEnd\");\r\n\r\n\t\tif (RVS.S.firstPreparation!==undefined && RVS.S.firstPreparation!==1) RVS.F.expandCollapseTimeLine(true,\"open\");\r\n\r\n\t\tRVS.DOC.trigger('updateSlideLoopRange');\r\n\t\tRVS.DOC.trigger('updateFixedScrollRange');\r\n\t\t RVS.F.reOrderHTMLLayers(); // To show Groups in Columns at Start\r\n\r\n\t\t//Create a First Save Option to make sure that we have some Basic to compare\r\n\t\tRVS.S.lastSaved = RVS.S.lastSaved===undefined ? {} : RVS.S.lastSaved;\r\n\t\tsetTimeout(function() {\r\n\t\t\tif (RVS.S.lastSaved[RVS.S.slideId] === undefined && RVS.S.zIndexAtStartChanged!==true) {\r\n\t\t\t\t\tRVS.S.lastSaved[RVS.S.slideId] =\r\n\t\t\t\t\t\t{\tparams : JSON.stringify(RVS.F.simplifySlide(RVS.SLIDER[RVS.S.slideId].slide)),\r\n\t\t\t\t\t\t\tlayers : JSON.stringify(RVS.F.simplifyAllLayer(RVS.SLIDER[RVS.S.slideId].layers))\r\n\t\t\t\t\t\t};\r\n\t\t\t\tdelete RVS.S.zIndexAtStartChanged;\r\n\t\t\t}\r\n\t\t},500);\r\n\t};\r\n\r\n\tRVS.F.getAllSlidesBgDimension = function() {\r\n\t\tfor (var i in RVS.SLIDER.slideIDs) {\r\n\t\t\tif (!RVS.SLIDER.slideIDs.hasOwnProperty(i)) continue;\r\n\t\t\tRVS.F.loadBGImages(RVS.SLIDER.slideIDs[i]);\r\n\t\t\tRVS.F.slideinWork(RVS.SLIDER.slideIDs[i]);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t IF CAROUSEL AND JUSTIFY WALL ENABLED, SLIDER BG DIMENSION NEED TO BE CALCULATED\r\n\t */\r\n    RVS.F.loadBGImages = function(slideId,type) {\r\n\r\n\r\n        // Build Cache for Loaded Images\r\n        RVS.allimages= RVS.allimages===undefined ? {src:[], dim:[], img:[]} : RVS.allimages;\r\n        //if (!RVS.F.JWALL()) return;\r\n        slideId = slideId === undefined ? RVS.S.slideId : slideId;\r\n\r\n\r\n        if (jQuery.inArray(RVS.SLIDER[slideId].slide.bg.type,[\"image\",\"youtube\",\"html5\",\"vimeo\",\"external\"])>=0 || (type===\"c\" && slideId!==undefined && RVS.SBGS!==undefined && RVS.SBGS[RVS.S.slideId]!==undefined && RVS.SBGS[RVS.S.slideId][type].src!==undefined)) {\r\n            // type  - n Next (coming Image), c - Current (previous Image leaving)\r\n            var src = type===\"c\" ? RVS.SBGS[RVS.S.slideId][type].src : RVS.SBGS[RVS.S.slideId].n.src; // RVS.SLIDER[slideId].slide.bg.type===\"external\" ? RVS.SLIDER[slideId].slide.bg.externalSrc : RVS.SLIDER[slideId].slide.bg.image;\r\n\r\n\r\n            if (RVS.SLIDER[slideId].slide.bg.type===\"external\" && src===\"\") src = RVS.ENV.plugin_url+\"admin/assets/images/transparent.png\";\r\n            if (src===undefined) return;\r\n            src = src.split(\" \").join('%20');\r\n\r\n            if (type!==undefined) RVS.SBGS[RVS.S.slideId][type].loadobj = RVS.SBGS[RVS.S.slideId][type].loadobj === undefined ? {} : RVS.SBGS[RVS.S.slideId][type].loadobj;\r\n            var index = jQuery.inArray(src,RVS.allimages.src);\r\n            if (index>=0) {\r\n                if (RVS.allimages.dim[index]!==undefined) {\r\n                    if (type!==\"c\") {\r\n                        RVS.SLIDER[slideId].slide.bg.imageWidth = RVS.allimages.dim[index].w;\r\n                        RVS.SLIDER[slideId].slide.bg.imageHeight = RVS.allimages.dim[index].h;\r\n                        RVS.SLIDER[slideId].slide.bg.imageRatio = RVS.allimages.dim[index].r;\r\n                    }\r\n\r\n                    if (type!==undefined) {\r\n                        RVS.SBGS[RVS.S.slideId][type].loadobj.img = RVS.allimages.img[index];\r\n                        RVS.SBGS[RVS.S.slideId][type].loadobj.width = RVS.allimages.dim[index].w;\r\n                        RVS.SBGS[RVS.S.slideId][type].loadobj.height = RVS.allimages.dim[index].h;\r\n                        RVS.SBGS[RVS.S.slideId][type].loadobj.src = RVS.allimages.src[index];\r\n                        RVS.SBGS[RVS.S.slideId][type].loadobj.progress = \"loaded\";\r\n                    }\r\n                    RVS.DOC.trigger('device_area_dimension_update');\r\n                }\r\n            } else {\r\n\r\n                if (src!==RVS.S.lastLoadedBGImage) {\r\n                    RVS.S.lastLoadedBGImage = src;\r\n                    index = RVS.allimages.src.length;\r\n                    RVS.allimages.img[index] = new Image();\r\n                    RVS.F.getImgWithCORS(RVS.allimages.img[index], src);\r\n                    if (type!==undefined) RVS.SBGS[RVS.S.slideId][type].loadobj.progress = \"loading\";\r\n                    RVS.allimages.src[index] = src;\r\n                    RVS.allimages.img[index].tpRequest = 0;\r\n\r\n                    RVS.allimages.img[index].onload=function() {\r\n                        RVS.allimages.dim[index] = {w:this.width, h:this.height, r: this.width/this.height};\r\n\r\n                        if (type!==undefined) {\r\n                            RVS.SBGS[RVS.S.slideId][type].loadobj.img = RVS.allimages.img[index];\r\n                            RVS.SBGS[RVS.S.slideId][type].loadobj.src = RVS.allimages.src[index];\r\n                            RVS.SBGS[RVS.S.slideId][type].loadobj.width = this.width;\r\n                            RVS.SBGS[RVS.S.slideId][type].loadobj.height = this.height;\r\n                            RVS.SBGS[RVS.S.slideId][type].loadobj.progress = \"loaded\";\r\n\t\t\t\t\t\t}\r\n\r\n                        if (type!==\"c\") {\r\n\t\t\t\t\t\t\tRVS.SLIDER[slideId].slide.bg.imageWidth = this.width;\r\n\t\t\t\t\t\t\tRVS.SLIDER[slideId].slide.bg.imageHeight = this.height;\r\n\t\t\t\t\t\t\tRVS.SLIDER[slideId].slide.bg.imageRatio = this.width/this.height;\r\n                        }\r\n                        RVS.DOC.trigger('device_area_dimension_update');\r\n                        if (this.tpRequest===1) {\r\n                            console.info('%c'+RVS_LANG.CORSWARNING,'color:#f1c40f;')\r\n                            console.info(this.src);\r\n                        }\r\n                    };\r\n                    RVS.allimages.img[index].onerror = function(e, m, o) {\r\n                        if(this.tpRequest === 0 && this.crossOrigin) {\r\n                            delete this[\"crossOrigin\"];\r\n                            this.removeAttribute(\"crossorigin\")\r\n                            this.tpRequest = 1;\r\n                            this.src = this.src;\r\n                        }\r\n                    }\r\n\r\n                    RVS.allimages.img[index].src = RVS.allimages.src[index];\r\n\t\t\t\t}\r\n            }\r\n        }\r\n\t}\r\n\r\n\t/*\r\n\tDRAW THE BG OF THE CURRENT SLIDE\r\n\t*/\r\n    RVS.F.redrawSlideBG = function(obj) {\r\n\r\n        if (RVS.C.slide===undefined) return;\r\n        clearTimeout(RVS.S.redrawSlideBGTimeOut);\r\n        RVS.S.redrawSlideBGTimeOut = setTimeout(function() {\r\n                var _ = RVS.SLIDER[RVS.S.slideId].slide,\r\n                    slideBGFrom;\r\n\r\n                if (obj!==undefined && obj.liveColorChange && obj.backgroundColor!==undefined) slideBGFrom = { bg:{color:obj.backgroundColor, type:\"solid\"}};\r\n                else\r\n                    for (var i in RVS.JHOOKS.redrawSlideBG) {\r\n                        if(!RVS.JHOOKS.redrawSlideBG.hasOwnProperty(i)) continue;\r\n                        slideBGFrom = RVS.JHOOKS.redrawSlideBG[i](slideBGFrom);\r\n                    }\r\n\r\n                //BUILD BG OBJECT\r\n                RVS.SBGS[RVS.S.slideId].n = RVS.F.safeExtend(true,RVS.SBGS[RVS.S.slideId].n,RVS.F.getSlideBGObj({slideBGFrom:slideBGFrom}));\r\n                RVS.SBGS[RVS.S.slideId].c = RVS.F.safeExtend(true,RVS.SBGS[RVS.S.slideId].c,RVS.F.getSlideBGObj({type:\"c\", slideBGFrom : { bg:{color:\"transparent\", repeat:\"repeat\",position:\"center center\",fit:\"50%\", src:RVS.ENV.plugin_url+\"admin/assets/images/light_pattern_2x.png\"}}}));\r\n\r\n                //LOAD IMAGES IF NOT YET LOADED\r\n\t\t\t\tif (RVS.SBGS[RVS.S.slideId].n.loadobj.img===undefined || RVS.S.lastSlideBGSrc!==RVS.SLIDER[RVS.S.slideId].slide.bg.type\r\n\t\t\t\t\t|| (RVS.SBGS[RVS.S.slideId].n.loadobj.src!==RVS.SBGS[RVS.S.slideId].n.src && RVS.SBGS[RVS.S.slideId].n.src !== '')) RVS.F.loadBGImages(undefined,\"n\");\r\n                if (RVS.SBGS[RVS.S.slideId].c.loadobj.img===undefined) RVS.F.loadBGImages(undefined,\"c\");\r\n\r\n\r\n                RVS.S.lastSlideBGSrc = RVS.SLIDER[RVS.S.slideId].slide.bg.type;\r\n\r\n                //UPDATE PAN ZOOM SETTINGS AS WELL\r\n                updateKenBurnSettings();\r\n\r\n                // ADD FILTER TO CONTAINERS\r\n                RVS.SBGS[RVS.S.slideId].wrap.className = _.bg.mediaFilter;\r\n                if (RVS.SBGS[RVS.S.slideId].n.usebgColor && RVS.SBGS[RVS.S.slideId].n.bgcolor==\"transparent\") {\r\n                    RVS.F.resetSlideTL();\r\n                    RVS.SBGS[RVS.S.slideId].n.ctx.clearRect(0,0,RVS.SBGS[RVS.S.slideId].n.ctx.canvas.width, RVS.SBGS[RVS.S.slideId].n.ctx.canvas.height);\r\n                }\r\n                else\r\n                    RVS.F.buildSlideAnimation();\r\n\r\n                //PUT ANIMATION IN POSITION\r\n                RVS.F.slideAnimation({progress:1,type:\"slide\"});\r\n\r\n                var sliderOverlay = document.getElementById('slider_overlay');\r\n                if(sliderOverlay) RVS.C.slide[0].querySelector('rs-sbg-wrap').appendChild(sliderOverlay);\r\n\r\n                //BUILD PAN ZOOM EFFECT ????\r\n                RVS.DOC.trigger('redrawSlideBGDone');\r\n            },100);\r\n\r\n        };\r\n\r\n        RVS.F.updateSlideInputFields = function() {\r\n            if (RVS.S.slideInputFieldsInitialised!==true && RVS.F.slideInputFieldsInitialisedInfo!==true) {\r\n                RVS.F.udpateSelectedSlideAnim(true);\r\n                RVS.F.showWaitAMinute({fadeIn:0,text:RVS_LANG.updatingfields});\r\n                RVS.S.slideInputFieldsInitialised = true;\r\n                RVS.F.slideInputFieldsInitialisedInfo=true;\r\n            }\r\n\r\n            setTimeout(function() {\r\n\r\n                RVS.F.updateEasyInputs({container:jQuery('.slide_settings_collector, #do_title_slide'), path:RVS.S.slideId+\".slide.\", trigger:\"init\"});\r\n                jQuery('#s_bg_color').val(RVS.SLIDER[RVS.S.slideId].slide.bg.color).rsColorPicker(\"refresh\");\r\n                jQuery('#slide_bg_type').trigger('change');\r\n\r\n                updateSlideThumbs();\r\n\r\n                if (RVS.F.slideInputFieldsInitialisedInfo===true) {\r\n                    RVS.F.showWaitAMinute({fadeOut:2,text:RVS_LANG.updatingfields});\r\n                    RVS.F.slideInputFieldsInitialisedInfo=false;\r\n                }\r\n                RVS.DOC.trigger('slideInputFieldsUpdated');\r\n            },5);\r\n\r\n        }\r\n\r\n\t/*\r\n\tUPDATE THE INPUT FIELDS TO SHOW THE CURRENT SELECTED VALUES\r\n\t*/\r\n    RVS.F.updateFields = function(ignoreUpdateFields) {\r\n\r\n\t\t// Update Specials\r\n\t\tbuildSlideToLinkDrop();\r\n\r\n\t\t//Reset Transition List\r\n        RVS.F.updateSlideAnimationView();\r\n        //Update Fields If Slide Mode selected and not yet Updated.\r\n        if (ignoreUpdateFields!==true) {\r\n\r\n            RVS.F.updateSlideInputFields();\r\n        }\r\n\r\n\t\tRVS.F.updateSlideBasedNavigationStyle();\r\n\r\n        //Update Ken Burn Settings\r\n        updateKenBurnBasics(ignoreUpdateFields);\r\n\r\n        //Update Alternating Animations\r\n        RVS.F.alternatingSlideAnims();\r\n\r\n\t\t//Update TimeLine\r\n\t\tRVS.F.buildSlideFrames();\r\n\t\tRVS.F.updateSlideFrames();\r\n\t\tRVS.F.updateMaxTime({pos:true, cont:true});\r\n        if (RVS.S.firstTimeGoToIdle!==undefined) RVS.F.goToIdle();\r\n        RVS.S.firstTimeGoToIdle = true;\r\n    };\r\n\r\n\r\n\r\n    /*GET BG IMAGE OBJECT */\r\n    RVS.F.getSlideBGObj = function(obj) {\r\n\r\n        obj.id = obj.id===undefined ? RVS.S.slideId : obj.id;\r\n\r\n        var _ = obj.slideBGFrom===undefined ? RVS.SLIDER[obj.id].slide : obj.slideBGFrom,\r\n            bgobj = {\r\n                bgcolor:\"transparent\",\r\n                bgrepeat:_.bg.repeat,\r\n                bgposition:(_.bg.position===\"percentage\" ? parseInt(_.bg.positionX,0)+\"% \"+parseInt(_.bg.positionY,0)+\"%\" : _.bg.position),\r\n                bgfit:(_.bg.fit===\"percentage\" ? parseInt(_.bg.fitX,0)+\"% \"+parseInt(_.bg.fitY,0)+\"%\" : _.bg.fit),\r\n            },\r\n            sip = jQuery('#slide_bg_image_path');\r\n\r\n\r\n        if (obj.type!==\"c\") {  // ONLY RUN THIS IF IT IS NOT THE \"CURRENT SBGS (PREVIOUS SLIDE)\"\r\n            switch (_.bg.type) {\r\n                case \"trans\":\r\n                    bgobj.usebgColor = true;\r\n                break;\r\n                case \"solid\":\r\n                    var sbg = window.RSColor.get(_.bg.color);\r\n                    //BG COLOR OF SLIDER\r\n                    if (sbg.indexOf(\"gradient\")>=0)\r\n                        bgobj.bgcolor = sbg;\r\n                    else\r\n                        bgobj.bgcolor = _.bg.color;\r\n                    bgobj.type=\"solid\";\r\n                    bgobj.usebgColor = true;\r\n                break;\r\n                case \"external\":\r\n                    var iurl = _.bg.externalSrc.split(' ').join('%20');\r\n                    bgobj.src = iurl;\r\n                    sip.val(_.bg.externalSrc);\r\n                    sip.height(Math.max(25, (8 + ((_.bg.externalSrc.length/20) * 16))));\r\n\t\t\t\t\tsip.trigger('changedvalue',{sip:sip[0].value})\r\n                    bgobj.type=\"image\";\r\n                    bgobj.usebgColor = false;\r\n                break;\r\n                case \"html5\":\r\n                case \"vimeo\":\r\n                case \"youtube\":\r\n                case \"image\":\r\n                    var iurl = _.bg.image.split(' ').join('%20');\r\n                    bgobj.src = iurl;\r\n\t\t\t\t\tsip.val(_.bg.image);\r\n\t\t\t\t\tsip.trigger('changedvalue',{sip:sip[0].value})\t\t\t\t\r\n                    if (_.bg.image!==undefined )\r\n                        sip.height(Math.max(25, (8 + ((_.bg.image.length/20) * 16))));\r\n                    else\r\n                    if (_.bg.image!==undefined )\r\n                        sip.height(Math.max(25, (8 + ((_.bg.image.length/20) * 16))));\r\n                    bgobj.type=\"image\";\r\n                    bgobj.usebgColor = false;\r\n                break;\r\n            }\r\n        } else {\r\n            bgobj.src = _.bg.src;\r\n        }\r\n        return bgobj;\r\n    }\r\n\r\n\t/*\r\n\tGET THE CSS OBJECT OF A SLIDE THUMBNAIL\r\n\t*/\r\n\tRVS.F.getSlideBGDrawObj = function(obj) {\r\n\t\tobj = obj===undefined ? {updateSip:false} : obj;\r\n\t\tobj.id = obj.id===undefined ? RVS.S.slideId : obj.id;\r\n\r\n\t\tvar _ = obj.slideBGFrom===undefined ? RVS.SLIDER[obj.id].slide : obj.slideBGFrom,\r\n\t\t\tbgobj = {\r\n\t\t\t\tbackgroundImage:\"\",\r\n\t\t\t\tbackgroundColor:\"transparent\",\r\n\t\t\t\tbackgroundRepeat:_.bg.repeat,\r\n\t\t\t\tbackgroundPosition:(_.bg.position===\"percentage\" ? parseInt(_.bg.positionX,0)+\"% \"+parseInt(_.bg.positionY,0)+\"%\" : _.bg.position),\r\n\t\t\t\t\"background-size\":(_.bg.fit===\"percentage\" ? parseInt(_.bg.fitX,0)+\"% \"+parseInt(_.bg.fitY,0)+\"%\" : _.bg.fit),\r\n\t\t\t},\r\n\t\t\tsip = jQuery('#slide_bg_image_path');\r\n\r\n\t\tswitch (_.bg.type) {\r\n\t\t\tcase \"solid\":\r\n\t\t\t\tvar sbg = window.RSColor.get(_.bg.color);\r\n\t\t\t\t//BG COLOR OF SLIDER\r\n\r\n\t\t\t\tif (sbg.indexOf(\"gradient\")>=0)\r\n\t\t\t\t\tbgobj = {background:sbg};\r\n\t\t\t\telse\r\n\t\t\t\t\tbgobj.backgroundColor = _.bg.color;\r\n\t\t\tbreak;\r\n\t\t\tcase \"trans\":\r\n\t\t\tbreak;\r\n\t\t\tcase \"external\":\r\n\t\t\t\tvar iurl = _.bg.externalSrc.split(' ').join('%20');\r\n\r\n\t\t\t\tbgobj.backgroundImage = 'url('+iurl+')';\r\n\t\t\t\tif (obj.updateSip) {\r\n\t\t\t\t\tsip.val(_.bg.externalSrc);\r\n\t\t\t\t\tsip.height(Math.max(25, (8 + ((_.bg.externalSrc.length/20) * 16))));\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"html5\":\r\n\t\t\tcase \"vimeo\":\r\n\t\t\tcase \"youtube\":\r\n\t\t\tcase \"image\":\r\n\t\t\t\tvar iurl = _.bg.image.split(' ').join('%20');\r\n\r\n\t\t\t\tbgobj.backgroundImage = 'url(\"'+iurl+'\")';\r\n\t\t\t\tif (obj.updateSip) {\r\n\t\t\t\t\tsip.val(_.bg.image);\r\n\t\t\t\t\tif (_.bg.image!==undefined )\r\n\t\t\t\t\t\tsip.height(Math.max(25, (8 + ((_.bg.image.length/20) * 16))));\r\n\t\t\t\t\telse\r\n\t\t\t\t\tif (_.bg.image!==undefined )\r\n\t\t\t\t\t\tsip.height(Math.max(25, (8 + ((_.bg.image.length/20) * 16))));\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn bgobj;\r\n\t};\r\n\r\n\r\n\t/*\r\n\tGET THE SMALLEST SLIDE LENGTH BASED ON ADDED LAYERS AND CURRENT SELECTED TIME\r\n\t*/\r\n\tRVS.F.slideMinLength = function(v) {\r\n\t\tvar _tempv = v;\r\n\t\tv = (v===\"default\" || v===\"Default\" || v===0 || v===\"0ms\") ? parseInt(RVS.SLIDER.settings.def.delay,0) : parseInt(v,0);\r\n\r\n\t\tvar min = RVS.F.setSmallestSlideLength({left:v/10})*10;\r\n\t\treturn  (_tempv===\"Default\" || _tempv===0 || _tempv===\"0ms\" || _tempv===\"default\") ? \"Default\" : min;\r\n\t};\r\n\r\n\t/*\r\n\tGET SLIDE LENGTH BASED ON DEFAULT AND EDITED VALUE\r\n\t*/\r\n\tRVS.F.getSlideLength = function(slideid) {\t\t\r\n\t\tslideid = slideid===undefined ? RVS.S.slideId : slideid;\r\n\t\tif (RVS.SLIDER[slideid]===undefined) return 800;\r\n\t\tvar d = RVS.SLIDER[slideid].slide.timeline.delay;\r\n\t\td = d == undefined || d==\"\" || d===\"default\" || d==0 || d===\"Default\"  ? RVS.SLIDER.settings.def.delay : d;\r\n\t\td = d == undefined || d==\"\" || d===\"default\" || d==0 || d===\"Default\"  ? 8000 : parseInt(d,0);\r\n\t\treturn d/10;\r\n\t};\r\n\r\n\r\n\t/*\r\n\tSLIDE ANIMATION HANDLINGS\r\n\t*/\r\n\tRVS.F.getSlideAnimParams = function(attribute) {\r\n\r\n\t\t//RVS.S.slideTrans\r\n\t\tvar currentSelected = jQuery('#active_transitions_innerwrap li.selected').index();\r\n\t\tcurrentSelected = currentSelected===-1 ? 1 : currentSelected;\r\n\t\tif (RVS.SLIDER[RVS.S.slideId].slide.timeline[attribute]!==undefined) {\r\n\t\t\tvar\tr = RVS.SLIDER[RVS.S.slideId].slide.timeline[attribute][currentSelected];\r\n\t\t\tif (currentSelected===0)\r\n\t\t\t\tr = r==\"default\" && attribute==\"duration\" ? RVS.F.getSliderTransitionParameters(RVS.SLIDER[RVS.S.slideId].slide.timeline.transition[currentSelected]).TR[10] : r;\r\n\t\t\telse\r\n\t\t\t\tr = r==\"default\" && attribute==\"duration\" ? RVS.SLIDER[RVS.S.slideId].slide.timeline[attribute][currentSelected]===undefined ?  RVS.SLIDER.settings.def.transitionDuration : RVS.F.getSliderTransitionParameters(RVS.SLIDER[RVS.S.slideId].slide.timeline.transition[currentSelected]).TR[10] : r;\r\n\t\t} else r = \"default\";\r\n\r\n\t\treturn r;\r\n\t};\r\n\r\n\r\n\t/*\r\n\tBUILD THE SLIDE ANIMATION\r\n\t*/\r\n\tRVS.F.buildSlideAnimation = function(obj) {\r\n\t\tif ((RVS.SBGS[RVS.S.slideId].n.type!==\"image\" || RVS.SBGS[RVS.S.slideId].n.loadobj.progress===\"loaded\") && RVS.SBGS[RVS.S.slideId].c.loadobj.progress===\"loaded\")\r\n\t\t\tRVS._R.animateSlide(undefined,RVS._R.convertSlideAnimVals(obj===undefined ? RVS.SLIDER[RVS.S.slideId].slide.slideChange : obj));\r\n\t};\r\n\r\n\t/*\r\n\tSET THE SLIDE ANIMATION PROGRESS POSITION\r\n\t*/\r\n\tRVS.F.slideAnimation = function(obj) {\r\n\t\tif (RVS.TL[RVS.S.slideId][obj.type]===undefined) return;\r\n\t\tif (obj.progress!==undefined) {\r\n\t\t\tRVS.TL[RVS.S.slideId][obj.type].progress(0.9999);\r\n\t\t\tRVS.TL[RVS.S.slideId][obj.type].progress(obj.progress);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/****************************************\r\n\t\t-\tINTERNAL FUNCTIONS -\r\n\t****************************************/\r\n\r\n\tfunction setActiveSlide(_) {\r\n\r\n\t\tvar slidetab = jQuery('#slide_list_element_'+_.id);\r\n\t\tif (_.openclose) {\r\n\t\t\tif (!slidetab.hasClass(\"opened_slidetab\")) {\r\n\t\t\t\tjQuery('.slide_list_element.sortable_slide_list_element').removeClass(\"opened_slidetab\");\r\n\t\t\t\tslidetab.addClass(\"opened_slidetab\");\r\n\t\t\t\tif (RVS.S.slideId!==_.id) {\r\n\t\t\t\t\tRVS.F.setSlideFocus({slideid:_.id});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tslidetab.removeClass(\"opened_slidetab\");\r\n\t\t\t}\r\n\t\t} else\r\n\r\n\t\tif (RVS.S.slideId!==_.id) RVS.F.setSlideFocus({slideid:_.id});\r\n\r\n\r\n\t\tif (RVS.S.vWmode!==\"mode__slidelayout\") RVS.F.mainMode({mode:\"slidelayout\",set:false});\r\n\t\tRVS.F.showHideLayerEditor({mode:\"slidelayout\"});\r\n\t\tsetTimeout(function() {\r\n\t\t\tRVS.DOC.trigger('sliderSizeChanged');\r\n\t\t\tRVS.DOC.trigger('device_area_availibity');\r\n\t\t},500);\r\n\r\n\t}\r\n\r\n\tRVS.F.setSlideAnimPresetToCustom = function() {\r\n\t\tRVS.SLIDER[RVS.S.slideId].slide.slideChange.preset = \"custom\";\r\n\t\tRVS.F.udpateSelectedSlideAnim();\r\n\t}\r\n\r\n\tfunction getAltSlideCnt(i) {\r\n\t\treturn '<div class=\"slide_anim_alternates\"><div class=\"remove_altslide basic_action_button leftbutton onlyicon\" data-index=\"'+i+'\"><i class=\"material-icons\">delete</i></div><div class=\"slide_alt_slide\"><label_a>'+(parseInt(i)+2)+'.'+RVS_LANG.transition+'</label_a><select class=\"slideinput tos2 searchbox easyinit slideAnimSelect\" data-theme=\"wideopentos2\" data-r=\"slideChange.alt.'+i+'\"></select></div></div>';\r\n\t}\r\n\r\n\t/*ALTERNATING SLIDE ANIMATONS*/\r\n\tRVS.F.alternatingSlideAnims = function() {\r\n\t\tRVS.C.altslcon = RVS.C.altslcon===undefined ? jQuery('#sanimation_sfalternates') : RVS.C.altslcon;\r\n\t\tvar cnt = \"\",\r\n\t\t\talt = RVS.SLIDER[RVS.S.slideId].slide.slideChange.alt;\r\n\t\tif (alt!==undefined && Array.isArray(alt) && alt.length>0)\r\n\t\t\tfor ( var i in alt) cnt += getAltSlideCnt(i);\r\n\r\n\t\tRVS.C.altslcon[0].innerHTML = cnt;\r\n\r\n\r\n\t\tRVS.C.altslcon.find('.tos2.slideAnimSelect').each(function() {\r\n\t\t\tRVS.F.createSlideAnimOptions(this);\r\n\t\t});\r\n\t}\r\n\r\n\tRVS.F.updateAlternateSlideAnims = function() {\r\n\t\tRVS.F.alternatingSlideAnims();\r\n\t\tRVS.C.altslcon.find('.tos2.slideAnimSelect').ddTP({placeholder:\"Enter or Select\"});\r\n\t\tRVS.F.updateEasyInputs({container:RVS.C.altslcon, path:RVS.S.slideId+\".slide.\", trigger:\"init\"});\r\n\t}\r\n\r\n\t/*\r\n\tINIT LOCAL INPUT BOX FUNCTIONS\r\n\t*/\r\n\tfunction initLocalInputBoxes() {\r\n\r\n\t\tRVS.DOC.on('changeflags',RVS.F.changeFlags);\r\n\r\n\t\tRVS.DOC.on('click','.remove_altslide',function() {\r\n\t\t\tvar old = RVS.SLIDER[RVS.S.slideId].slide.slideChange.alt.join(\",\").split(\",\");\r\n\t\t\tRVS.SLIDER[RVS.S.slideId].slide.slideChange.alt.splice(this.dataset.index,1);\r\n\t\t\tRVS.F.openBackupGroup({id:'slide_transition',txt:\"Slide Transition Change\",icon:'calendar_view_day'});\r\n\t\t\tRVS.F.backup({\tpath:RVS.S.slideId+\".slide.slideChange.alt\",\r\n\t\t\t\t\t\tval:RVS.SLIDER[RVS.S.slideId].slide.slideChange.alt,\r\n\t\t\t\t\t\told:old,\r\n\t\t\t\t\t\tbackupType:\"array\",\r\n\t\t\t\t\t\tmode:'slidealttransition',\r\n\t\t\t\t\t\tcallBack:function() {\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\tRVS.F.closeBackupGroup({id:'slide_transition'});\r\n\t\t\tRVS.F.updateAlternateSlideAnims();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('addslidetransition',function() {\r\n\t\t\tRVS.SLIDER[RVS.S.slideId].slide.slideChange.alt = RVS.SLIDER[RVS.S.slideId].slide.slideChange.alt===undefined ? [] : RVS.SLIDER[RVS.S.slideId].slide.slideChange.alt;\r\n\t\t\tRVS.SLIDER[RVS.S.slideId].slide.slideChange.alt.push(\"\");\r\n\t\t\tvar a = jQuery(getAltSlideCnt(RVS.SLIDER[RVS.S.slideId].slide.slideChange.alt.length-1));\r\n\t\t\tRVS.C.altslcon.append(a);\r\n\t\t\ta.find('.slideAnimSelect').each(function() {\r\n\t\t\t\tRVS.F.createSlideAnimOptions(this);\r\n\t\t\t\tjQuery(this).ddTP({placeholder:\"Enter or Select\"});\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateSlideAnimationView',RVS.F.updateSlideAnimationView);\r\n\t\tRVS.DOC.on('updateSlideAnimation',function(a,b) {\r\n\t\t\tif (b!==undefined) {\r\n\t\t\t\tif (b.eventparam===\"tocustom\") RVS.F.setSlideAnimPresetToCustom();\r\n\t\t\t\tRVS.F.redrawSlideBG();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateSlideAnimationFavoits',function(a,b) {\r\n\t\t\tif (b!==undefined) {\r\n\t\t\t\tRVS.F.showHidePresetFavorits(RVS.LIB.SLTR_FAVORIT,\"slide_trans_mains\");\r\n\t\t\t\tif (RVS.SLIDER[RVS.S.slideId].slide.slideChange.favorit) {\r\n\t\t\t\t\tRVS.S.ATI[0].classList.add(\"showonlyfavoritpresets\");\r\n\t\t\t\t\tRVS.S.ATIR[0].classList.add(\"showonlyfavoritpresets\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.S.ATI[0].classList.remove(\"showonlyfavoritpresets\");\r\n\t\t\t\t\tRVS.S.ATIR[0].classList.remove(\"showonlyfavoritpresets\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('colrowslideanimchange',function(inp,b) {\r\n\t\t\tif (b!==undefined && b.eventparam!==undefined) {\r\n\t\t\t\tvar type =  b.eventparam.indexOf(\"in.\")>=0 ? \"in\" : \"out\",\r\n\t\t\t\t\tkeep = b.eventparam.indexOf(\".col\")>=0 ? \"col\" : \"row\",\r\n\t\t\t\t\tchange = keep===\"row\" ? \"col\" : \"row\";\r\n\t\t\t\tif (parseInt(RVS.SLIDER[RVS.S.slideId].slide.slideChange[type].col)*parseInt(RVS.SLIDER[RVS.S.slideId].slide.slideChange[type].row)>1000) {\r\n\t\t\t\t\tRVS.SLIDER[RVS.S.slideId].slide.slideChange[type][change] = Math.floor(1000/parseInt(RVS.SLIDER[RVS.S.slideId].slide.slideChange[type][keep]));\r\n\t\t\t\t\tdocument.getElementById('sltrans_'+type+'_'+change).value = RVS.SLIDER[RVS.S.slideId].slide.slideChange[type][change]\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// UPDATE ROW / COL VIA ADDON IF NEEDED\r\n\t\t\t\tif (RVS.JHOOKS.extendSlideAnimationRowCol)\r\n\t\t\t\t\tfor (var i in RVS.JHOOKS.extendSlideAnimationRowCol) {\r\n\t\t\t\t\t\tif(!RVS.JHOOKS.extendSlideAnimationRowCol.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tRVS.JHOOKS.extendSlideAnimationRowCol[i](type,keep,change);\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\tRVS.F.setSlideAnimPresetToCustom();\r\n\t\t\tRVS.F.redrawSlideBG();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.editslide',function() {\r\n\t\t\tsetActiveSlide({id:this.dataset.id});\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\r\n\r\n\t\tRVS.DOC.on('showLastEditedSlideStatic',function() {\r\n\t\t\tjQuery('.showunderstatic').removeClass(\"showunderstatic\");\r\n\t\t\tif (RVS.SLIDER[RVS.S.slideId].slide.static.isstatic && RVS.S.lastShownSlideId!==undefined) {\r\n\t\t\t\tif (RVS.SLIDER[RVS.S.slideId].slide.static.lastEdited) {\r\n\t\t\t\t\tjQuery('#slide_'+RVS.S.lastShownSlideId).addClass(\"showunderstatic\");\r\n\t\t\t\t\tjQuery('#slide_'+RVS.S.lastShownSlideId).find('._lc_.selected').removeClass(\"selected\");\r\n\t\t\t\t\tsetTimeout(function() {jQuery('#slide_'+RVS.S.slideId).addClass(\"hideslotsinslide\");},200);\r\n\t\t\t\t\t// jQuery()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery('#slide_'+RVS.S.slideId).removeClass(\"hideslotsinslide\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\r\n\t\tRVS.DOC.on('click','.open_close_slide',function() {\r\n\t\t\tsetActiveSlide({id:this.dataset.id, openclose:true});\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// LISTEN TO ACTIVE SELECTED SLIDE TRANSITION\r\n\t\tRVS.DOC.on('click','.added_slide_transition',function() {\r\n\t\t\tjQuery('.added_slide_transition.selected').removeClass(\"selected\");\r\n\t\t\tthis.className = this.className+\" selected\";\r\n\t\t\tRVS.S.slideTrans = jQuery(this).index();\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('#active_transitions_settings'), path:RVS.S.slideId+\".slide.\", trigger:\"init\"});\r\n\t\t\tRVS.F.updateSlideFrames();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.transition-replace',function() {RVS.DOC.trigger(\"showhidetransitions\");});\r\n\r\n\t\tRVS.DOC.on(\"mouseenter mouseleave\", '#active_transitions_innerwrap_results .presetelement.dark_btn, #active_transitions_innerwrap_results .presets_listelement.dark_btn',function(e) {\r\n\t\t\tclearTimeout(window.backToDefaultAnimationTimer);\r\n\r\n\t\t\tRVS.S.demoSlideAnim = e.type===\"mouseenter\" ? {\r\n\t\t\t\tkey : this.dataset.custom==\"true\" && this.dataset!==undefined && this.dataset.key!==undefined ? (this.dataset.key).replace(\"custom_\",\"\") : \"\"+this.dataset.rndgrp!==\"undefined\" || \"\"+this.dataset.rndmain!==\"undefined\" ?  RVS._R.getRandomSlideTrans(this.dataset.rndmain,this.dataset.rndgrp,RVS.LIB.SLTR)  : this.dataset.key,\r\n\t\t\t\tpreset : this.dataset.custom==\"true\" ? RVS.F.safeExtend(true,{},RVS.LIB.SLTR_CUSTOM[this.dataset.key.replace(\"custom_\",\"\")].preset) : undefined\r\n\t\t\t} : undefined;\r\n\t\t\twindow.backToDefaultAnimationTimer = setTimeout(RVS.F.showExampleOrSelectedSlideAnim,e.type===\"mouseenter\" ? 200 : 0);\r\n\t\t});\r\n\t}\r\n\r\n\tRVS.F.clearSBGSAttrs = function(_,onlyhelp) {\r\n\t\tdelete _.help_canvas;\r\n\t\tdelete _.help_ctx;\r\n\t\tif (_.cube!==undefined) {\r\n\t\t\tif (document.body.contains(_.cube.c)) _.cube.c.parentNode.removeChild(_.cube.c);\r\n\t\t\tdelete _.cube;\r\n\t\t}\r\n\t\ttpGS.gsap.set([_.canvas,_.sbg],{x:0, y:0, z:0, rotateX:0, rotateY:0,rotateZ:0});\r\n\r\n\t\tif (onlyhelp!==true) {\r\n\t\t\tdelete _.shadowCTX;\r\n\t\t\tdelete _.shadowCanvas;\r\n\t\t\tdelete _.SLOT;\r\n\t\t\tdelete _.cDIMS;\r\n\t\t\tdelete _.mDIM;\r\n\t\t\tdelete _.usebgColor;\r\n\t\t\tdelete _.usepattern;\r\n\t\t\tRVS.F.redrawSlideBG();\r\n\t\t}\r\n\t}\r\n\t// SHOW DEMO ( PREVIEW ) OR SELECTED SLIDE ANIMAITION\r\n\tRVS.F.showExampleOrSelectedSlideAnim = function() {\r\n\r\n\r\n\t\tif (RVS.S.demoSlideAnim!==undefined) {\r\n\t\t\tRVS.TL[RVS.S.slideId].slide.pause();\r\n\t\t\tRVS.F.clearSBGSAttrs(RVS.SBGS[RVS.S.slideId].c,true);\r\n\t\t\tRVS.F.clearSBGSAttrs(RVS.SBGS[RVS.S.slideId].n,true);\r\n\r\n\t\t\tRVS.TL[RVS.S.slideId].slideRepeat = true;\r\n\t\t\tRVS.F.buildSlideAnimation(getSlideTransitionDefaults(RVS.S.demoSlideAnim.preset!==undefined ? {preset:RVS.S.demoSlideAnim.preset} : {key:RVS.S.demoSlideAnim.key}));\r\n\t\t\tRVS.TL[RVS.S.slideId].slide.progress(0).play();\r\n\t\t} else {\r\n\t\t\t// IF WE DELETE ALL, WE NEED TO RECREATE THEM !!!\r\n\t\t\tRVS.TL[RVS.S.slideId].slide.pause();\r\n\t\t\tRVS.F.clearSBGSAttrs(RVS.SBGS[RVS.S.slideId].c);\r\n\t\t\tRVS.F.clearSBGSAttrs(RVS.SBGS[RVS.S.slideId].n);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tfunction buildSlideToLinkDrop() {\r\n\t\tvar linktoslide = document.getElementById('slide_seo_linktoslide');\r\n\t\tif (linktoslide!==null) {\r\n\t\t\tvar iH = \"\";\r\n\r\n\t\t\tiH += '<option value=\"nothing\">- Not Choosen -</option>';\r\n\t\t\tiH += '<option value=\"next\">- Next Slide  -</option>';\r\n\t\t\tiH += '<option value=\"prev\">- Previous Slide -</option>';\r\n\t\t\tiH += '<option value=\"scroll_under\">- Scroll Below Slider -</option>';\r\n\t\t\tfor (var slides in RVS.SLIDER.slideIDs) {\r\n\t\t\t\tif(!RVS.SLIDER.slideIDs.hasOwnProperty(slides)) continue;\r\n\t\t\t\tvar nu = RVS.SLIDER.slideIDs[slides],\r\n\t\t\t\t\ttx = RVS.SLIDER[nu].slide.title;\r\n\t\t\t\ttx = tx===undefined ? \"Slide\" : tx;\r\n\t\t\t\tiH += '<option value=\"'+nu+'\">'+tx+' (ID:'+nu+')</option>';\r\n\t\t\t}\r\n\t\t\tlinktoslide.innerHTML = iH;\r\n\t\t}\r\n\t}\r\n\tRVS.F.warnFilterWithTransitions = function() {\r\n\t\tif (RVS.SLIDER[RVS.S.slideId].slide.bg.mediaFilter!==\"none\" && RVS.SLIDER[RVS.S.slideId].slide.slideChange.e==\"tpbasic\")\r\n\t\t\tRVS.F.showInfo({content:RVS_LANG.filtertransitionissuepre, type:\"goodtoknow\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t\r\n\t}\r\n\t/*\r\n\tINIT CUSTOM EVENT LISTENERS FOR TRIGGERING FUNCTIONS\r\n\t*/\r\n\tfunction initLocalListeners() {\r\n\t\t//RVS.DOC.on('',function() {);\r\n\r\n\t\tRVS.DOC.on('updateslidebasicmediafilter',function(evt) {\t\t\t\r\n\t\t\tRVS.F.redrawSlideBG(evt);\r\n\t\t\tRVS.F.warnFilterWithTransitions();\r\n\t\t});\r\n\t\t\r\n\t\tRVS.DOC.on('updateslidebasic',RVS.F.redrawSlideBG);\r\n\r\n\t\tRVS.DOC.on('updateslidebasicmpeg',function() {\r\n\t\t\tRVS.F.videoExtract.get(RVS.SLIDER[RVS.S.slideId].slide.bg.mpeg,function(data) {\r\n\t\t\t\tRVS.F.setBGPosterImage(data.path,data.id,\"slide\");\r\n\t\t\t\tRVS.F.redrawSlideBG();\r\n\t\t\t},RVS.SLIDER[RVS.S.slideId].slide.bg.video.startAt,\"slide\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('coloredit colorcancel',colorEditSlider);\r\n\t\tRVS.DOC.on('showSlideFilter',tempSlideFilter);\r\n\t\tRVS.DOC.on('updateKenBurnBasics',function() {\r\n\t\t\tupdateKenBurnBasics();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateKenBurnSettings',function() {updateKenBurnSettings(true)});\r\n\t\tRVS.DOC.on('previewKenBurn',function() {RVS.TL[RVS.S.slideId].panzoom.play();});\r\n\t\tRVS.DOC.on('previewStopKenBurn',function() { RVS.TL[RVS.S.slideId].panzoom.pause();});\r\n\r\n\t\tRVS.DOC.on('rewindKenBurn',function() { RVS.TL[RVS.S.slideId].panzoom.progress(0).pause();});\r\n\t\tRVS.DOC.on('beforeLayoutModeChange accordionaction',function() {\r\n\t\t\tRVS.F.updateTimeLine({state:\"stop\",timeline:\"panzoom\"});\r\n\t\t\tRVS.F.changeSwitchState({el:jQuery('#kenburn_simulator')[0],state:\"play\"});\r\n\t\t});\r\n\t\tRVS.DOC.on('updateslidethumbs',function() {\r\n\t\t\tupdateSlideThumbs();\r\n\t\t});\r\n\t\tRVS.DOC.on('resetslideadminthumb',function(e,p) {\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".\"+p,val:\"\"});\r\n\t\t\tupdateSlideThumbs();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('changeToLayerMode',function() { RVS.F.showHideLayerEditor({mode:\"slidecontent\"});});\r\n\t\tRVS.DOC.on('changeToSlideMode',function() { RVS.F.showHideLayerEditor({mode:\"slidelayout\"});});\r\n\r\n\t\tRVS.DOC.on(\"windowresized\",RVS.F.redrawSlideBG);\r\n\r\n\r\n\t\tRVS.DOC.on('sliderSizeChanged',RVS.F.redrawSlideBG);\r\n\r\n\r\n\t\tRVS.DOC.on('showhidetransitions',function() {\r\n\t\t\tvar ts = jQuery('#transition_selector');\r\n\t\t\tif (ts.is(':visible'))\r\n\t\t\t\tts.hide();\r\n\t\t\telse\r\n\t\t\t\tts.show();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateSlideNameInList',function() {\r\n\t\t\tjQuery('#slide_list_element_title_'+RVS.S.slideId).html(RVS.SLIDER[RVS.S.slideId].slide.title);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#do_edit_slidename',function() {\r\n\t\t\tjQuery('#slide_title_field').trigger('focus');\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('slide_ajax_calls',function(e, _) {\r\n\r\n\t\t\tvar preset,\r\n\t\t\t\tkey;\r\n\r\n\r\n\r\n\t\t\t// GET CHANGES\r\n\t\t\tif (_.mode===\"overwrite\" || _.mode===\"create\") preset = RVS.F.safeExtend(true,{},RVS.SLIDER[RVS.S.slideId].slide.slideChange);\r\n\r\n\t\t\t// GET TINDEX\r\n\t\t\tif (_.mode===\"overwrite\" || _.mode==\"rename\") key = _.pl.data(\"key\");\r\n\r\n\t\t\t// RENAME, TAKE FIRST EXISTING OBJECT\r\n\t\t\tif (_.mode===\"rename\") { preset = RVS.LIB.SLTR_CUSTOM[_.key].preset; RVS.LIB.SLTR_CUSTOM[_.key].title=_.newname;}\r\n\r\n\t\t\tif (_.mode===\"delete\") {\r\n\r\n\t\t\t\tRVS.F.ajaxRequest('delete_custom_templates_slidetransitions', {id:_.key.replace(\"custom_\",\"\")},function(response) {\r\n\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\tdelete RVS.LIB.SLTR_CUSTOM[_.key];\r\n\t\t\t\t\t\t_.pl.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// CALL CREATE / RENAME / OVERWRITE AJAX FUNCTION\r\n\t\t\t\tRVS.F.ajaxRequest('save_custom_templates_slidetransitions', {id:_.key, obj:{title:_.newname, preset:preset}}, function(response){\r\n\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\tRVS.LIB.SLTR_CUSTOM[response.data.id] = {title:_.newname, preset:preset};\r\n\t\t\t\t\t\tif (_.mode===\"create\") _.element[0].dataset.key = response.data.id;\r\n\t\t\t\t\t\tif (_.mode===\"rename\") _.pl.find('.cla_custom_name').text(_.newname);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t })\r\n\t}\r\n\r\n\r\n\t/*\r\n\tSHOW HIDE LAYER / SLIDE EDITOR MODE\r\n\t*/\r\n\tRVS.F.showHideLayerEditor = function(obj) {\r\n\t\tvar selected;\r\n\t\tRVS.eMode = RVS.eMode===undefined ? {top:\"\", menu:\"\"} : RVS.eMode;\r\n\t\tif (obj.mode === \"slidecontent\") {\r\n\t\t\tRVS.C.vW.classList.add('mode__slidecontent');\r\n\t\t\tRVS.C.vW.classList.remove('mode__slidestyle');\r\n\t\t\tRVS.eMode.top = \"layer\";\r\n\t\t\tselected = jQuery('.layer_submodule_trigger.selected');\r\n\t\t\tif (selected!==undefined && obj.openSettings!==false) RVS.F.openSettings({forms:selected.data(\"forms\"), uncollapse:selected[0].dataset.collapse});\r\n\t\t} else {\r\n\t\t\tRVS.C.vW.classList.remove('mode__slidecontent');\r\n\t\t\tRVS.C.vW.classList.add('mode__slidestyle');\r\n\t\t\tRVS.eMode.top = \"slide\";\r\n\t\t\tselected  = jQuery('.slide_submodule_trigger.selected');\r\n\t\t}\r\n\t\tif (selected!==undefined && selected.length>=1 && selected.data(\"forms\")!==undefined) RVS.eMode.menu = selected.data(\"forms\")[0];\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tINIT KEN BURN DRAG FUNCTION\r\n\t*/\r\n\tfunction initKenBurnDrag() {\r\n\t\tpzdrag = {\tcontainer:jQuery('#kenburn_timeline')};\r\n\t\tpzdrag.pin = pzdrag.container.find('.pz_pin');\r\n\t\tpzdrag.done = pzdrag.container.find('.pz_timedone');\r\n\t\tpzdrag.pinWidth = \t9;\r\n\t\tpzdrag.hovered = false;\r\n\r\n\t\tpzdrag.pin.draggable({\r\n\t\t\taxis:\"x\",\r\n\t\t\tcontainment: \"parent\",\r\n\t\t\tstart:function(event,ui) {\r\n\t\t\t\tpzdrag.container.addClass(\"indrag\");\r\n\t\t\t\tpzdrag.containerWidth = pzdrag.container.width();\r\n\t\t\t},\r\n\t\t\tstop:function(event,ui) {\r\n\t\t\t\tpzdrag.container.removeClass(\"indrag\");\r\n\t\t\t},\r\n\t\t\tdrag:function(event,ui) {\r\n\t\t\t\tupdatePzTimeDone({left:ui.position.left, force:true});\r\n\t\t\t\tRVS.F.updateTimeLine({state:\"progress\",timeline:\"panzoom\",prgs:ui.position.left / (pzdrag.containerWidth -pzdrag.pinWidth)});\r\n\t\t\t}\r\n\t\t});\r\n\t\tpzdrag.container.on('mouseenter',function() {\r\n\t\t\tpzdrag.hovered = true;\r\n\t\t\tpzdrag.laststate = RVS.F.updateTimeLine({state:\"getstate\",timeline:\"panzoom\"});\r\n\t\t\tRVS.F.updateTimeLine({state:\"pause\",timeline:\"panzoom\"});\r\n\t\t}).on('mouseleave',function() {\r\n\t\t\tpzdrag.hovered = false;\r\n\t\t\tif (pzdrag.laststate)\r\n\t\t\t\tRVS.F.updateTimeLine({state:\"play\",timeline:\"panzoom\"});\r\n\t\t});\r\n\t}\r\n\r\n\tfunction updatePzTimeDone(obj) {\r\n\t\tif (pzdrag.hovered===false || obj.force===true) {\r\n\t\t\ttpGS.gsap.set(pzdrag.done,{width:obj.left});\r\n\t\t\tif (obj.auto)\r\n\t\t\t\ttpGS.gsap.set(pzdrag.pin,{left:obj.left});\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tUPDATE THE THUMBS IN THE SLIDE (ADMIN AND NAVIGATION)\r\n\t*/\r\n\tfunction updateSlideThumbs(obj) {\r\n\t\tobj = obj===undefined ? {id:RVS.S.slideId, target:['#admin_purpose_thumbnail, #slide_list_element_'+RVS.S.slideId+' .sle_thumb'], default:true} : obj;\r\n\r\n\t\tvar adminsrc = RVS.SLIDER[obj.id].slide.thumb.customAdminThumbSrc,\r\n\t\t\tnavsrc = RVS.SLIDER[obj.id].slide.thumb.customThumbSrc;\r\n\r\n\r\n\r\n\t\tif (adminsrc===null || adminsrc==null || adminsrc===undefined || adminsrc.length<3) {\r\n\t\t\tvar thmbbg = RVS.F.getSlideBGDrawObj(obj);\r\n\t\t\tif (thmbbg.backgroundImage===\"\" && thmbbg.backgroundColor===\"transparent\") {\r\n\t\t\t\tthmbbg.backgroundImage =  'url('+RVS.ENV.plugin_url+\"admin/assets/images/trans_tile.png\"+')';\r\n\t\t\t\tthmbbg.backgroundSize = \"16px\";\r\n\t\t\t\tthmbbg['background-size'] = \"16px\";\r\n\t\t\t\tthmbbg.backgroundRepeat = \"repeat\";\r\n\t\t\t}\r\n\t\t\tif (obj.target!==undefined && obj.target[0]!==undefined) tpGS.gsap.set(obj.target,thmbbg);\r\n\t\t}\r\n\t\telse\r\n\t\t\ttpGS.gsap.set(obj.target,{\"background-size\":\"cover\", backgroundPosition:\"center center\", backgroundRepeat:\"no-repeat\",backgroundImage:'url('+adminsrc+')'});\r\n\r\n\r\n\r\n\t\tif (obj.default) {\r\n\t\t\tif (navsrc===undefined || navsrc.length<3 || navsrc[navsrc.length-1]===\"/\")\r\n\t\t\t\ttpGS.gsap.set([\"#navigation_purpose_thumbnail\",\"#thumbs_\"+obj.id,\"#tabs_\"+obj.id,\"#bullets_\"+obj.id,\"#arrow_\"+obj.id],RVS.F.getSlideBGDrawObj());\r\n\t\t\telse\r\n\t\t\t\ttpGS.gsap.set([\"#navigation_purpose_thumbnail\",\"#thumbs_\"+obj.id,\"#tabs_\"+obj.id,\"#bullets_\"+obj.id,\"#arrow_\"+obj.id],{\"background-size\":\"cover\", backgroundPosition:\"center center\", backgroundRepeat:\"no-repeat\",backgroundImage:'url('+navsrc+')'});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\tUPDATE SORTABLE FEATURE OF SLIDE LIST\r\n\t**/\r\n\tRVS.F.makeSlideListSortable = function() {\r\n\t\tvar sl = RVS.C.slideList;\r\n\t\tif (RVS.C.slideList.hasClass(\"ui-sortable\")) RVS.C.slideList.sortable('destroy');\r\n\r\n\t\tindexSlides();\r\n\t\tRVS.C.slideList.sortable({\r\n\t\t\titem:\".sortable_slide_list_element\",\r\n\t\t\tcancel:\"#theslidermodule, #newslide, .do_not_sort_slide_list_element\",\r\n\t\t\tstart:function(event,ui) {\r\n\t\t\t\t// var nodes = Array.prototype.slice.call(document.getElementById(\"slidelist\").getElementsByClassName(\"sortable_slide_list_element\"));\r\n\t\t\t\tRVS.C.vW.classList.add(\"slides_in_sort\");\r\n\t\t\t\tRVS.C.slideList.sortable(\"refreshPositions\");\r\n\t\t\t},\r\n\t\t\tstop:function(event,ui) {\r\n\t\t\t\tRVS.C.vW.classList.remove(\"slides_in_sort\");\r\n\t\t\t\tvar nodes = Array.prototype.slice.call(document.getElementById(\"slidelist\").getElementsByClassName(\"sortable_slide_list_element\")),\r\n\t\t\t\t\t_nn = [],\r\n\t\t\t\t\tstat = \"\";\r\n\t\t\t\tfor (var sti in RVS.SLIDER.slideIDs) {\r\n\t\t\t\t\tif(!RVS.SLIDER.slideIDs.hasOwnProperty(sti)) continue;\r\n\t\t\t\t\tif ((\"\"+RVS.SLIDER.slideIDs[sti]).indexOf(\"static_\")>=0) stat = RVS.SLIDER.slideIDs[sti];\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i in nodes) {\r\n\t\t\t\t\tif(!nodes.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t_nn.push(nodes[i].dataset.ref);\r\n\t\t\t\t}\r\n\t\t\t\t_nn.push(stat);\r\n\t\t\t\tRVS.F.updateSliderObj({path:'slideIDs',val:_nn});\r\n\t\t\t\tindexSlides();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/*\r\n\tINDEXING THE SLIDES\r\n\t*/\r\n\tfunction indexSlides() {\r\n\t\tvar indexes = {},\r\n\t\t\t_index=1;\r\n\t\tfor (var ind in RVS.SLIDER.slideIDs) {\r\n\t\t\tif(!RVS.SLIDER.slideIDs.hasOwnProperty(ind)) continue;\r\n\t\t\tindexes[RVS.SLIDER.slideIDs[ind]] = _index;\r\n\t\t\tif ((RVS.F.isNumeric(RVS.SLIDER.slideIDs[ind]) || RVS.SLIDER.slideIDs[ind].indexOf(\"static\")==-1) && (RVS.SLIDER[RVS.SLIDER.slideIDs[ind]]!==undefined && RVS.SLIDER[RVS.SLIDER.slideIDs[ind]].slide!==undefined && RVS.SLIDER[RVS.SLIDER.slideIDs[ind]].slide.child!==undefined && (RVS.SLIDER[RVS.SLIDER.slideIDs[ind]].slide.child.parentId==undefined || RVS.SLIDER[RVS.SLIDER.slideIDs[ind]].slide.child.parentId==\"\"))) _index++;\r\n\t\t}\r\n\r\n\t\tfor (var ind in indexes) {\r\n\t\t\tif(!indexes.hasOwnProperty(ind)) continue;\r\n\t\t\tvar el = document.getElementById('slide_list_element_title_index_'+ind);\r\n\t\t\tif (el!==null && el!==undefined) el.innerHTML = \"#\"+indexes[ind]+\" \";\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction FOtoA(a) {\r\n\t\t//If Multiple Values written like this:  {1:\"fade\",2:\"parallax\"....} convert them to array: [\"fade\",\"parallax\"....]\r\n        if (typeof a===\"object\" && !Array.isArray(a) && ((a[0]!==undefined && (typeof a[0]===\"string\" || typeof a[0]===\"number\")) || (a[1]!==undefined && (typeof a[1]===\"string\" || typeof a[1]===\"number\")))) a = Object.values(a);\r\n\t\treturn a;\r\n\t}\r\n\r\n\tfunction FCV(b) {\r\n        b = b===undefined ? ['default'] : b;\r\n        return Array.isArray(b) && typeof b[0]!=='object' ?  b : typeof b[0]===\"object\" ? Object.values(b[0]) : [b];\r\n    }\r\n\r\n\t/**\r\n\tSLIDE ANIMATION SETTINGS\r\n\t**/\r\n    RVS.F.updateSlideAnimationView = function() {\r\n\t\tRVS.F.updateEasyInputs({container:jQuery('#active_transitions_settings'), path:RVS.S.slideId+\".slide.\", trigger:\"init\"});\r\n        if (RVS.C.sltran===undefined) {\r\n            RVS.C.sltran = {};\r\n            RVS.C.sltmenu = {};\r\n            RVS.C.sltaddon = RVS.C.sltaddon===undefined ? {} : RVS.C.sltaddon;\r\n            RVS.C.sltran.all_globals = jQuery('#sltrans_all_globals');\r\n            RVS.C.sltran.pause = jQuery('#sltrans_pause');\r\n            RVS.C.sltran.flow = jQuery('#sltrans_flow');\r\n            RVS.C.sltran.in_full_wrap = jQuery('#sltrans_in_full_wrap');\r\n            RVS.C.sltran.in_rowcol_wrap = jQuery('#sltrans_in_rowcol_wrap');\r\n            RVS.C.sltran.in_ease_wrap = jQuery('#sltrans_in_ease_wrap');\r\n            RVS.C.sltran.in_mamo_wrap = jQuery('#sltrans_in_mamo_wrap');\r\n            RVS.C.sltran.in_xy_wrap = jQuery('#sltrans_in_xy_wrap');\r\n            RVS.C.sltran.in_rzo_wrap = jQuery('#sltrans_in_rzo_wrap');\r\n            RVS.C.sltran.in_sxsy_wrap = jQuery('#sltrans_in_sxsy_wrap');\r\n            RVS.C.sltran.in_auto_input_wrap = jQuery('#sltrans_in_auto_input_wrap');\r\n            RVS.C.sltran.in_filter_input_wrap = jQuery('#sltrans_in_filter_input_wrap');\r\n            RVS.C.sltran.filters_wrap = jQuery('#sltrans_filters_wrap');\r\n            RVS.C.sltran.d3_wrap = jQuery('#sltrans_3d_wrap');\r\n\r\n            RVS.C.sltran.out_rowcol_wrap = jQuery('#sltrans_out_rowcol_wrap');\r\n            RVS.C.sltran.out_ease_wrap = jQuery('#sltrans_out_ease_wrap');\r\n            RVS.C.sltran.out_mask_wrap = jQuery('#sltrans_out_mask_wrap');\r\n            RVS.C.sltran.out_xy_wrap = jQuery('#sltrans_out_xy_wrap');\r\n            RVS.C.sltran.out_rzo_wrap = jQuery('#sltrans_out_rzo_wrap');\r\n            RVS.C.sltran.out_sxsy_wrap = jQuery('#sltrans_out_sxsy_wrap');\r\n            RVS.C.sltran.out_full_wrap = jQuery('#sltrans_out_full_wrap');\r\n\r\n            RVS.C.sltmenu.in = jQuery('#slidein_ts_wrapbrtn');\r\n            RVS.C.sltmenu.out = jQuery('#slideout_ts_wrapbrtn');\r\n            RVS.C.sltmenu.filter = jQuery('#slidefilter_ts_wrapbrtn');\r\n            RVS.C.sltmenu.ddd = jQuery('#slide3d_ts_wrapbrtn');\r\n        }\r\n\r\n        var i,j,q,u;\r\n\r\n        for (i in RVS.C.sltaddon) if (RVS.C.sltaddon.hasOwnProperty(i) && RVS.C.sltaddon[i].slt_areas!==undefined) for (q in RVS.C.sltaddon[i].slt_areas) if (RVS.C.sltaddon[i].slt_areas.hasOwnProperty(q)) RVS.C.sltaddon[i].slt_areas[q].hide();\r\n        for (i in RVS.C.sltaddon) if (RVS.C.sltaddon.hasOwnProperty(i) && RVS.C.sltaddon[i].menu!==undefined) for (q in RVS.C.sltaddon[i].menu) if (RVS.C.sltaddon[i].menu.hasOwnProperty(q)) RVS.C.sltaddon[i].menu[q][0].classList.add(\"disabled\");\r\n\r\n        switch (RVS.SLIDER[RVS.S.slideId].slide.slideChange.e) {\r\n            case 'none':\r\n                for (i in RVS.C.sltran) if (RVS.C.sltran.hasOwnProperty(i)) RVS.C.sltran[i].hide();\r\n                for (i in RVS.C.sltmenu) if (RVS.C.sltmenu.hasOwnProperty(i)) RVS.C.sltmenu[i][0].classList.add(\"disabled\");\r\n            break;\r\n            case 'basic':\r\n                for (i in RVS.C.sltran) if (RVS.C.sltran.hasOwnProperty(i)) RVS.C.sltran[i].show();\r\n                for (i in RVS.C.sltmenu) if (RVS.C.sltmenu.hasOwnProperty(i)) RVS.C.sltmenu[i][0].classList.remove(\"disabled\");\r\n            break;\r\n            case \"slidingoverlay\":\r\n                for (i in RVS.C.sltran) if (RVS.C.sltran.hasOwnProperty(i)) if (jQuery.inArray(i,[\"in_full_wrap\", \"out_full_wrap\", \"filters_wrap\",\"pause\",\"flow\",\"d3_wrap\"])>=0) RVS.C.sltran[i].hide(); else RVS.C.sltran[i].show();\r\n                for (i in RVS.C.sltmenu) if (RVS.C.sltmenu.hasOwnProperty(i)) RVS.C.sltmenu[i][0].classList.add(\"disabled\");\r\n                //for (i in RVS.C.sltmenu) if (RVS.C.sltmenu.hasOwnProperty(i)) if (jQuery.inArray(i,[\"in\",\"out\",\"filter\"])) RVS.C.sltmenu[i][0].classList.add(\"disabled\"); else RVS.C.sltmenu[i][0].classList.remove(\"disabled\");\r\n            break;\r\n            default:\r\n                RVS.DOC.trigger('updateSlideAnimationViewDefault');\r\n            break;\r\n\t\t}\r\n\t}\r\n\r\n    // Update Selected Anim Lisrt\r\n    RVS.F.udpateSelectedSlideAnim = function(open) {\r\n        if (RVS.S.calledSlideAnimListUpdate) return;\r\n        RVS.S.calledSlideAnimListUpdate = true;\r\n        requestAnimationFrame(function() {\r\n            RVS.S.calledSlideAnimListUpdate=false;\r\n            RVS.S.ATI.find('.s_s_preset').removeClass('s_s_preset');\r\n            RVS.S.ATIR.find('.s_s_preset').removeClass('s_s_preset');\r\n            var el = RVS.S.ATIR.find('.presets_listelement[data-key=\"'+RVS.SLIDER[RVS.S.slideId].slide.slideChange.preset+'\"]')[0];\r\n            if (el!==undefined && el!==null) {\r\n                el.classList.add(\"s_s_preset\");\r\n                var main = document.getElementById(el.dataset.grpid),\r\n                    grp = document.getElementById(el.dataset.grpid+\"_\"+el.dataset.grp),\r\n                    head;\r\n\r\n                if (main!==undefined && main!==null) {\r\n                    main.classList.add('s_s_preset');\r\n                    if (open && main.className.indexOf(\"open\")==-1) {\r\n                        head = main.getElementsByClassName('presets_liste_head');\r\n                        if (head!==undefined && head!==null && head.length>0) head[0].click();\r\n                    }\r\n                }\r\n\r\n                if (grp!==undefined && grp!==null) {\r\n                    grp.classList.add('s_s_preset');\r\n                    if (open && grp.className.indexOf(\"open\")==-1) {\r\n                        head = grp.getElementsByClassName('presetssgroup_head');\r\n                        if (head!==undefined && head!==null && head.length>0) head[0].click();\r\n                    }\r\n                }\r\n\t\t\t}\r\n        });\r\n    }\r\n\r\n    function appendPresets(grp,title,id,ref) {\r\n\r\n        var cont = RVS.F.createPresets({\r\n            modern:true,\r\n            icon:grp.icon,\r\n\t\t\teclass:grp.eclass,\r\n            groupid:id,\r\n            groupclass:\"slide_trans_templates\",\r\n            maingrpclass:\"slide_trans_mains\",\r\n            title:title,\r\n            customevt:\"slide_ajax_calls\",\r\n            groups: grp,\r\n            ref:ref,\r\n            favoriteAjax:\"slide_transitions\",\r\n            favoriteList:RVS.LIB.SLTR_FAVORIT,\r\n            onclick: function(key,custom,main,sub,rndgrp,rndmain) {\r\n                        if (custom=='true' || custom==true)\r\n                            addTransitionToActive({preset:RVS.LIB.SLTR_CUSTOM[key.replace(\"custom_\",\"\")].preset,customkey:key});\r\n                        else\r\n                            addTransitionToActive({key:key,main:main,sub:sub});\r\n                        RVS.DOC.trigger(\"showhidetransitions\");\r\n                        RVS.F.updateSlideFrames();\r\n                        RVS.F.udpateSelectedSlideAnim();\r\n                        RVS.F.updateSlideAnimationView();\r\n            }});\r\n        RVS.S.ATI.append(cont.main);\r\n        RVS.S.ATIR.append(cont.inner);\r\n\t}\r\n\r\n    function createSlideAnimationList() {\r\n\r\n        RVS.LIB.SLTR_CUSTOM = RVS.LIB.SLTR_CUSTOM===undefined ? {} : RVS.LIB.SLTR_CUSTOM;\r\n        var list = {};\r\n        RVS.S.ATI = jQuery('#active_transitions_innerwrap'),\r\n        RVS.S.ATIR = jQuery('#active_transitions_innerwrap_results');\r\n\r\n        // EXTEND SLIDE LIST IF NEEDED\r\n        for (var i in RVS.JHOOKS.extendSlideAnimationList) {\r\n            if(!RVS.JHOOKS.extendSlideAnimationList.hasOwnProperty(i)) continue;\r\n            RVS.JHOOKS.extendSlideAnimationList[i]();\r\n        }\r\n\r\n        for (var main in RVS.LIB.SLTR) {\r\n            if (!RVS.LIB.SLTR.hasOwnProperty(main)) continue;\r\n            list[main] = list[main]===undefined ? {} : list[main];\r\n            for (var group in RVS.LIB.SLTR[main]) {\r\n                if (!RVS.LIB.SLTR[main].hasOwnProperty(group)) continue;\r\n                if (group===\"noSubLevel\") list[main].noSubLevel = RVS.LIB.SLTR[main].noSubLevel;\r\n                else\r\n                if (group==\"icon\") list[main].icon = RVS.LIB.SLTR[main].icon;\r\n\t\t\t\telse\r\n\t\t\t\tif (group==\"eclass\") list[main].eclass = RVS.LIB.SLTR[main].eclass;\r\n                else\r\n                if (RVS.LIB.SLTR[main].noSubLevel) {\r\n                    list[main][main] = list[main][main]===undefined ? { title:RVS_LANG[\"sltr_\"+main]===undefined ? main : RVS_LANG[\"sltr_\"+main], elements:{}} : list[main][main];\r\n                    list[main][main].elements[group] = {title:RVS.LIB.SLTR[main][group].title, grp: group, main:main};\r\n                    if (RVS.LIB.SLTR[main][group].rndgrp!==undefined) list[main][main].elements[group].rndgrp = RVS.LIB.SLTR[main][group].rndgrp;\r\n                    if (RVS.LIB.SLTR[main][group].rndmain!==undefined) list[main][main].elements[group].rndmain = RVS.LIB.SLTR[main][group].rndmain;\r\n                } else {\r\n                    list[main][group] = list[main][group]===undefined ? { title:RVS_LANG[\"sltr_\"+group]===undefined ? group : RVS_LANG[\"sltr_\"+group], elements:{}} : list[main][group];\r\n                    for (var element in RVS.LIB.SLTR[main][group]) if (element!==\"icon\" && RVS.LIB.SLTR[main][group].hasOwnProperty(element)) list[main][group].elements[element] = {title:RVS.LIB.SLTR[main][group][element].title, grp: group, main:main};\r\n                }\r\n            }\r\n\t\t}\r\n\r\n        var j = 0;\r\n        for (main in list) if (list.hasOwnProperty(main)) appendPresets(list[main],(RVS_LANG[\"sltr_\"+main]===undefined ? main : RVS_LANG[\"sltr_\"+main]), 'slide_trans_templates'+(j++),main);\r\n\r\n\r\n        //Add Custom\r\n        appendPresets({icon:\"tune\",custom:{title:RVS_LANG.customtransitionpresets,elements:RVS.LIB.SLTR_CUSTOM,custom:true}}, RVS_LANG.customtemplates, 'slide_trans_templates_custom',\"custom\");\r\n\r\n        updateTransitionListe();\r\n\r\n    }\r\n\r\n\tfunction convertToArray(a) {\r\n\t\tif (typeof a === \"object\" && !Array.isArray(a))\r\n\t\t\treturn Object.keys(a).map(function(key) { return [a[key]];});\r\n\t\telse\r\n\t\treturn a;\r\n\t}\r\n\r\n\t/**\r\n\tSLIDE ANIMATION CREATE / ADD ACTIVE ANIMATION TO LIST\r\n\t**/\r\n    function addTransitionToActive(obj) {\r\n        var tl = getSlideTransitionDefaults(obj);\r\n        RVS.F.openBackupGroup({id:'slide_transition',txt:\"Slide Transition Change\",icon:'calendar_view_day'});\r\n        RVS.F.backup({    path:RVS.S.slideId+\".slide.slideChange\",\r\n                        val:tl,\r\n                        old:RVS.F.safeExtend(true,{},RVS.SLIDER[RVS.S.slideId].slide.slideChange),\r\n                        backupType:\"object\",\r\n                        mode:'slidetransition',\r\n                        callBack:function() {\r\n                            RVS.F.updateEasyInputs({container:jQuery('#form_slide_transition'), path:RVS.S.slideId+\".slide.\", trigger:\"init\"});\r\n                        }\r\n                    });\r\n\r\n        RVS.SLIDER[RVS.S.slideId].slide.slideChange = RVS.F.safeExtend(true,{},RVS.SLIDER[RVS.S.slideId].slide.slideChange,tl);\r\n\r\n        RVS.F.closeBackupGroup({id:'slide_transition'});\r\n\r\n        RVS.F.updateEasyInputs({container:jQuery('#form_slide_transition'), path:RVS.S.slideId+\".slide.\", trigger:\"init\"});\r\n\r\n        RVS.F.redrawSlideBG();\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\tUPDATE TRANSITION LIST NOW\r\n\t**/\r\n\tfunction updateTransitionListe() {\r\n\t\tvar group = jQuery('.transgroup.selected').data('group');\r\n\t\tjQuery('.inner_transitions').hide();\r\n\t\tjQuery('.inner_transitions.'+group).show();\r\n\r\n\t\tRVS.F.udpateSelectedSlideAnim();\r\n\t}\r\n\r\n\r\n\t/*\r\n\tTEMPORARY FILTER FOR SLIDE IMAGE\r\n\t*/\r\n\tfunction tempSlideFilter(e,param) {\r\n\t\tRVS.C.slide.find('.slots_wrapper').attr('class','slots_wrapper '+param);\r\n\t}\r\n\r\n\tfunction colorEditSliderSub(n,val,c) {\r\n\t\tswitch (n) {\r\n\t\t\tcase \"slide_bg_color\":\tRVS.F.redrawSlideBG({liveColorChange:true, backgroundColor:val}); break;\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tEDIT / CANCEL A COLOR VALUE (SHOW LIVE THE CHANGES)\r\n\t*/\r\n\tfunction colorEditSlider(e,inp, val,gradient,onSave,GC) {\r\n\t\tvar canceled = false;\r\n\t\tif (inp!==undefined) window.lastColorEditjObj = jQuery(inp);\r\n\t\telse {\r\n\t\t\tif (window.lastColorEditjObj!==undefined) val = window.RSColor.get(window.lastColorEditjObj.val());\r\n\t\t\tcanceled = true;\r\n\t\t}\r\n\t\tif (val===undefined) return;\r\n\t\tcolorEditSliderSub(window.lastColorEditjObj[0].name, val,canceled)\r\n\t\tif (GC && canceled!==true)\r\n\t\t\tfor (var i in GC.ref) {\r\n\t\t\t\tif (GC.ref[i].type===\"slide\" && GC.ref[i].slide===RVS.S.slideId) colorEditSliderSub(GC.ref[i].inpname,val);\r\n\t\t\t\tif (GC.ref[i].type===\"slide\" && onSave) {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:GC.ref[i].r,val:val});\r\n\t\t\t\t\tif (GC.ref[i].slide===RVS.S.slideId) {\r\n\t\t\t\t\t\tvar upinp = jQuery('input[name='+GC.ref[i].inpname+']');\r\n\t\t\t\t\t\tif (upinp.length>0) {\r\n\t\t\t\t\t\t\tupinp[0].value = val;\r\n\t\t\t\t\t\t\tupinp.rsColorPicker(\"refresh\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else RVS.F.slideinWork(GC.ref[i].slide);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/***\r\n\tPAN ZOOM MAGIC\r\n\t***/\r\n\r\n\tRVS.F.buildKenBurn = function() {\r\n\t\tupdateKenBurnBasics();\r\n\t}\r\n\r\n\t/*\r\n\tMOVE KEN BURN SETTINGS FROM ONE CONTAINER TO AN OTHER\r\n\t*/\r\n\tfunction updateKenBurnBasics(ignoreredraw) {\r\n\t\tif (RVS.SLIDER[RVS.S.slideId].slide.panzoom.set) {\r\n\t\t\tjQuery('#slide_bg_settings_wrapper').appendTo(jQuery('#ken_burn_bg_setting_on'));\r\n\t\t\tjQuery('#internal_kenburn_settings').hide();\r\n\t\t\tjQuery('#kenburnissue').hide();\r\n\t\t} else {\r\n\t\t\tjQuery('#slide_bg_settings_wrapper').appendTo(jQuery('#ken_burn_bg_setting_off'));\r\n\t\t\tRVS.SBGS[RVS.S.slideId].n.canvas.style.filter=\"none\";\r\n\t\t\tif (RVS.TL[RVS.S.slideId]!==undefined && RVS.TL[RVS.S.slideId].panzoom!=undefined) {\r\n\t\t\t\tRVS.TL[RVS.S.slideId].panzoom.pause().kill();\r\n\t\t\t\tRVS.TL[RVS.S.slideId].panzoom=undefined;\r\n\t\t\t\tRVS.SBGS[RVS.S.slideId].n.panzoom = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//Update Basics should Redraw the BG again\r\n\t\tif (ignoreredraw!==true) RVS.F.redrawSlideBG();\r\n\t}\r\n\r\n\r\n\t/*\r\n\tUPDATE KENBURN TIMELINE WITH OUR WITHOUT PROGRESS\r\n\t*/\r\n\r\n\tfunction getPanValues(_) {\r\n\t\treturn {\r\n\t\t\tduration:parseInt(_.duration)/1000,\r\n\t\t\tease:_.ease,\r\n\t\t\tscalestart:parseInt(_.fitStart)/100,\r\n\t\t\tscaleend:parseInt(_.fitEnd)/100,\r\n\t\t\trotatestart:parseFloat(_.rotateStart),\r\n\t\t\trotateend:parseFloat(_.rotateEnd),\r\n\t\t\tblurstart:_.blurStart,\r\n\t\t\tblurend:_.blurEnd,\r\n\t\t\toffsetstart:[_.xStart,_.yStart],\r\n\t\t\toffsetend:[_.xEnd,_.yEnd]\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction updateKenBurnSettings(cont) {\r\n\t\tif (RVS.SLIDER[RVS.S.slideId].slide.bg.type!==\"image\" && RVS.SLIDER[RVS.S.slideId].slide.bg.type!==\"external\") RVS.SLIDER[RVS.S.slideId].slide.panzoom.set = false;\r\n\t\tif (!RVS.SLIDER[RVS.S.slideId].slide.panzoom.set) {\r\n\t\t\tdelete RVS.SBGS[RVS.S.slideId].n.panzoom;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ((RVS.SBGS[RVS.S.slideId].n.type!==\"image\" || RVS.SBGS[RVS.S.slideId].n.loadobj.progress===\"loaded\") && RVS.SBGS[RVS.S.slideId].c.loadobj.progress===\"loaded\") {\r\n\t\t\tvar prgs = 0,\r\n\t\t\t\ttl = 0,\r\n\t\t\t\tactive = false;\r\n\r\n\t\t\tif (RVS.TL[RVS.S.slideId].panzoom!==undefined) {\r\n\t\t\t\ttl = RVS.TL[RVS.S.slideId].panzoom.time();\r\n\t\t\t\tprgs = RVS.TL[RVS.S.slideId].panzoom.progress();\r\n\t\t\t\tactive = RVS.TL[RVS.S.slideId].panzoom.isActive();\r\n\t\t\t\tRVS.TL[RVS.S.slideId].panzoom.kill();\r\n\t\t\t}\r\n\t\t\tRVS.SBGS[RVS.S.slideId].n.panzoom = true;\r\n\t\t\tRVS.SBGS[RVS.S.slideId].n.panvalues = getPanValues(RVS.SLIDER[RVS.S.slideId].slide.panzoom);\r\n\r\n\r\n\t\t\tRVS._R.startPanZoom(RVS.SBGS[RVS.S.slideId].n,undefined,0.01,RVS.SBGS[RVS.S.slideId].n.skeyindex,'prepare');\r\n\t\t\tRVS.TL[RVS.S.slideId].panzoom.render(tl,true,true);\r\n\r\n\t\t\tpzdrag.containerWidth= pzdrag.containerWidth===undefined ? pzdrag.container.width() : pzdrag.containerWidth;\r\n\t\t\tupdatePzTimeDone({left: (prgs *(pzdrag.containerWidth -pzdrag.pinWidth)),auto:true });\r\n\r\n\r\n\t\t\tRVS.TL[RVS.S.slideId].panzoom.eventCallback(\"onUpdate\", function() {\r\n\t\t\t\tpzdrag.containerWidth= pzdrag.containerWidth===undefined ? pzdrag.container.width() : pzdrag.containerWidth;\r\n\t\t\t\tupdatePzTimeDone({left: (RVS.TL[RVS.S.slideId].panzoom.progress() *(pzdrag.containerWidth -pzdrag.pinWidth)),auto:true });\r\n\t\t\t});\r\n\r\n\t\t\tRVS.TL[RVS.S.slideId].panzoom.eventCallback(\"onComplete\", function() {\r\n\t\t\t\tRVS.F.changeSwitchState({el:jQuery('#kenburn_simulator')[0],state:\"play\"});\r\n\t\t\t\tRVS.TL[RVS.S.slideId].panzoom.pause();\r\n\t\t\t});\r\n\r\n\t\t\tif (active) RVS.TL[RVS.S.slideId].panzoom.play();\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tBUILD AND EXTEND DEFAULT SLIDE\r\n\t*/\r\n\tRVS.F.addSlideObj = function(obj,compare) {\r\n\r\n\t\tvar empty = obj===undefined || jQuery.isEmptyObject(obj);\r\n\t\tobj = obj===undefined ? {} : obj;\r\n\t\tif(obj && obj.bg && ['cover', 'contain', 'percentage', 'auto'].indexOf(obj.bg.fit) === -1) obj.bg.fit = 'cover';\r\n\t\tvar newSlide = {};\r\n\t\tnewSlide.addOns = obj.addOns || {};\r\n\t\tnewSlide.version = RVS.ENV.revision;\r\n\t\t/*newSlide.version = _d(obj.version,\"6.0.0\");\r\n\t\tnewSlide.version = newSlide.version<\"6.0.0\" ? \"6.0.0\" : newSlide.version;*/\r\n\t\tnewSlide.static = _d(obj.static,{\r\n\t\t\t\tisstatic:false,\r\n\t\t\t\toverflow:\"hidden\",\r\n\t\t\t\tposition:\"front\",\r\n\t\t\t\tlastEdited:true\r\n\t\t});\r\n\t\tnewSlide.runtime=_d(obj.runtime,{\r\n\t\t\tcollapsedGroups:[]\r\n\t\t});\r\n\t\tnewSlide.title = _d(obj.title,\"New Slide\");\r\n\t\tnewSlide.child = _d(obj.child,{\r\n\t\t\tparentId:\"\",\r\n\t\t\tlanguage:\"\"\r\n\t\t});\r\n\t\tnewSlide.bg = _d(obj.bg,{\r\n\t\t\ttype : \"trans\",\r\n\t\t\tcolor:\"#ffffff\",\r\n\t\t\texternalSrc:\"\",\r\n\t\t\tfit:\"cover\",\r\n\t\t\tfitX:\"100\",\r\n\t\t\tfitY:\"100\",\r\n\t\t\tposition:\"center center\",\r\n\t\t\tpositionX:\"0\",\r\n\t\t\tpositionY:\"0\",\r\n\t\t\trepeat:\"no-repeat\",\r\n\t\t\timage:\"\",\r\n\t\t\timageId:\"\",\r\n\t\t\tcrossOriginVideo: false,\r\n\t\t\timageFromStream:false,\r\n\t\t\timageSourceType:\"full\",\r\n\t\t\timageLib:\"nothing\",\r\n\t\t\tgalleryType:\"gallery\",\r\n\t\t\tmpeg:\"\",\r\n\t\t\togv:\"\",\r\n\t\t\twebm:\"\",\r\n\t\t\tvimeo:\"\",\r\n\t\t\tyoutube:\"\",\r\n\t\t\tmediaFilter:\"none\",\r\n\t\t\tvideo:{\r\n\t\t\t\targs:\"\",\r\n\t\t\t\targsVimeo:\"\",\r\n\t\t\t\tdottedOverlay:\"none\",\r\n\t\t\t\tdottedOverlaySize:1,\r\n\t\t\t\tdottedColorA:\"transparent\",\r\n\t\t\t\tdottedColorB:\"#000000\",\r\n\t\t\t\tstartAt:\"\",\r\n\t\t\t\tendAt:\"\",\r\n\t\t\t\tfitCover:true,\r\n\t\t\t\tforceRewind:true,\r\n\t\t\t\tloop:true,\r\n\t\t\t\tpausetimer:false,\r\n\t\t\t\tmute:true,\r\n\t\t\t\tnextSlideAtEnd:false,\r\n\t\t\t\tratio:\"16:9\",\r\n\t\t\t\tspeed:1,\r\n                volume:0,\r\n                startAfterTransition:false\r\n            },\r\n\t\t\tvideoId:\"\",\r\n\t\t\tvideoFromStream:false\r\n\t\t});\r\n        if (newSlide!==undefined && newSlide.bg!==undefined && newSlide.bg.video!==undefined) {\r\n            if (newSlide.bg.video.dottedOverlay.indexOf(\"white\")>0) newSlide.bg.video.dottedColorB = \"rgba(255,255,255,255)\";\r\n            if (newSlide.bg.video.dottedOverlay.indexOf(\"twoxtwo\")>=0) newSlide.bg.video.dottedOverlay = \"1\";\r\n            else if (newSlide.bg.video.dottedOverlay.indexOf(\"threexthree\")>=0) newSlide.bg.video.dottedOverlay = \"2\";\r\n        }\r\n\r\n\t\t// CHANGES, TO SET LOOP AND PAUSE TIMER INDEPENDENT, HAVING 4 CASES\r\n\t\tif (newSlide.bg.video!==undefined && compare!==undefined) {\r\n\t\t\tnewSlide.bg.video.loop = newSlide.bg.video.loop===true || (obj!==undefined && obj.bg!==undefined && obj.bg.video!==undefined && (obj.bg.video.loop===\"loopandnoslidestop\" || obj.bg.video.loop===\"loop\" || obj.bg.video.loop===true || obj.bg.video.loop===\"true\")) ? true : false;\r\n\t\t\tnewSlide.bg.video.pausetimer =obj.pausetimer!==undefined && (obj.pausetimer===true || obj.pausetimer===false) ? obj.pausetimer : obj!==undefined && obj.bg!==undefined && obj.bg.video!==undefined && obj.bg.video.loop === \"loop\"  ? true : false;\r\n\t\t\tif (newSlide.bg.video.loop===true && newSlide.bg.video.nextSlideAtEnd===true) newSlide.bg.video.loop = false;\r\n\t\t}\r\n\r\n\t\tnewSlide.thumb = _d(obj.thumb,{\r\n\t\t\tcustomThumbSrc:\"\",\r\n\t\t\tcustomThumbSrcId:\"\",\r\n\t\t\tcustomAdminThumbSrc:\"\",\r\n\t\t\tcustomAdminThumbSrcId:\"\",\r\n\t\t\tdimension:\"orig\"\r\n\t\t\t/*fromStream:true*/\r\n\t\t});\r\n\t\tnewSlide.info = _d(obj.info,{\r\n\t\t\tparams:[{v:\"\",l:10},{v:\"\",l:10},{v:\"\",l:10},{v:\"\",l:10},{v:\"\",l:10},{v:\"\",l:10},{v:\"\",l:10},{v:\"\",l:10},{v:\"\",l:10},{v:\"\",l:10}],\r\n\t\t\tdescription:\"\"\r\n\t\t});\r\n\t\tnewSlide.attributes = _d(obj.attributes,{\r\n\t\t\ttitle:\"\",\r\n\t\t\ttitleOption:\"media_library\",\r\n\t\t\tclass:\"\",\r\n\t\t\tdata:\"\",\r\n\t\t\tid:\"\",\r\n\t\t\tattr:\"\",\r\n\t\t\talt:\"\",\r\n            altOption:\"media_library\",\r\n            deeplink:\"\"\r\n        });\r\n\t\tnewSlide.publish = _d(obj.publish,{\r\n\t\t\tfrom:\"\",\r\n\t\t\tto:\"\",\r\n\t\t\tstate:\"published\"\r\n\t\t});\r\n\r\n\t\tnewSlide.timeline = _d(obj.timeline,{\r\n\t\t\tstopOnPurpose:false,\r\n\t\t\tdelay:\"Default\",\r\n\t\t\ttransition:[\"fade\"],\r\n\t\t\tslots:[0],\r\n\t\t\tduration:[1000],\r\n\t\t\teaseIn:[\"default\"],\r\n\t\t\teaseOut:[\"default\"],\r\n\t\t\trotation:[0],\r\n\t\t\tloop:{\r\n\t\t\t\tset:false,\r\n\t\t\t\trepeat:\"unlimited\",\r\n\t\t\t\tstart:2500,\r\n\t\t\t\tend:4500\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tnewSlide.timeline.loop = newSlide.timeline.loop === undefined ? {set:false, repeat:\"unlimited\", start:2500, end:4500} : newSlide.timeline.loop;\r\n\r\n        //Need to Translate old values to New Values\r\n        newSlide.slideChange = newSlide.timeline.transition!==undefined || obj.slideChange===undefined ? migrateSlideAnimations(newSlide.timeline,compare) : _d(obj.slideChange, RVS._R.getSlideAnim_EmptyObject());\r\n\t\tif (compare && (newSlide.slideChange!==undefined && newSlide.slideChange.in!==undefined && newSlide.slideChange.in.o==1)) delete newSlide.slideChange.in.o;\r\n\r\n        if (newSlide.timeline.transition) {\r\n            delete newSlide.timeline.duration;\r\n            delete newSlide.timeline.slots;\r\n            delete newSlide.timeline.easeIn;\r\n            delete newSlide.timeline.easeOut;\r\n            delete newSlide.timeline.transition;\r\n            delete newSlide.timeline.rotation;\r\n        }\r\n\r\n\r\n\t\tnewSlide.visibility = _d(obj.visibility,{\r\n\t\t\thideAfterLoop:0,\r\n\t\t\thideOnMobile:false,\r\n\t\t\thideFromNavigation:false\r\n\t\t});\r\n\r\n\t\tnewSlide.effects = _d(obj.effects,{\r\n\t\t\tparallax:\"-\",\r\n\t\t\tfade:\"default\",\r\n\t\t\tblur:\"default\",\r\n\t\t\tgrayscale:\"default\"\r\n\t\t});\r\n\t\tnewSlide.panzoom = _d(obj.panzoom,{\r\n\t\t\tset:false,\r\n\t\t\tblurStart:0,\r\n\t\t\tblurEnd:0,\r\n\t\t\tduration:10000,\r\n\t\t\tease:\"none\",\r\n\t\t\tfitEnd:100,\r\n\t\t\tfitStart:100,\r\n\t\t\txEnd:0,\r\n\t\t\tyEnd:0,\r\n\t\t\txStart:0,\r\n\t\t\tyStart:0,\r\n\t\t\trotateStart:0,\r\n\t\t\trotateEnd:0\r\n\t\t});\r\n\t\tnewSlide.seo = _d(obj.seo,{\r\n\t\t\tset:false,\r\n\t\t\tlink:\"\",\r\n\t\t\tlinkHelp:\"auto\",\r\n\t\t\tslideLink:\"nothing\",\r\n\t\t\ttarget:\"_self\",\r\n\t\t\tz:\"front\",\r\n\t\t\ttype:\"regular\",\r\n\t\t\ttag:\"l\"\r\n\r\n\t\t});\r\n\t\tnewSlide.nav = _d(obj.nav,{\r\n\t\t\t\t\t\tarrows:{presets:{}},\r\n\t\t\t\t\t\tthumbs:{presets:{}},\r\n\t\t\t\t\t\ttabs:{presets:{}},\r\n\t\t\t\t\t\tbullets:{presets:{}}\r\n\t\t\t\t\t});\r\n\r\n\t\t/* Store view visibility */\r\n\r\n\t\tnewSlide.store_permissions = _d(obj.store_permissions, false);\r\n\t\tnewSlide.allow_stores = {};\r\n\t\tif (obj.allow_stores) {\r\n\t\t\tfor (var i in obj.allow_stores) if (obj.allow_stores.hasOwnProperty(i)) {\r\n\t\t\t\tnewSlide.allow_stores[i] = obj.allow_stores[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// backwards compatibility\r\n\t\tif (obj.store_id) {\r\n\t\t\tvar storeIds = obj.store_id.split(',');\r\n\t\t\tnewSlide.store_permissions = storeIds.indexOf('0') == -1;\r\n\t\t\tfor (var i in storeIds) if (storeIds.hasOwnProperty(i) && storeIds[i] !== '0') {\r\n\t\t\t\tnewSlide.allow_stores['store' + storeIds[i]] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newSlide;\r\n\t};\r\n\r\n\t// SIMPLIFY SINGLE Slide OBJECT STRUCTURE\r\n\tRVS.F.simplifySlide = function(_) {\r\n\t\tif (_.type===\"zone\")\r\n\t\t\treturn RVS.F.safeExtend(true,{},_);\r\n\t\telse\r\n\t\t\treturn RVS.F.safeExtend(true,{}, RVS.F.simplifyObject(RVS.F.addSlideObj(undefined,true),RVS.F.safeExtend(true,{},_)));\r\n\t};\r\n\t// SIMPLIFY ALL Slide STRUCTURE\r\n\tRVS.F.simplifyAllSlide = function(_) {\r\n\t\twindow.__Slides = {};\r\n\t\tfor (var i in RVS.SLIDER.slideIDs) {\r\n\t\t\tif(!RVS.SLIDER.slideIDs.hasOwnProperty(i)) continue;\r\n            if (!RVS.F.isNumeric(RVS.SLIDER.slideIDs[i]) && RVS.SLIDER.slideIDs[i].indexOf(\"static\")>=0) {\r\n            } else {\r\n\t\t\t\twindow.__Slides[RVS.SLIDER.slideIDs[i]] = RVS.F.simplifySlide(RVS.SLIDER[RVS.SLIDER.slideIDs[i]].slide);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// BUILD THE FULL LAYER STRUCTURE OF SIMPLIFIED STRUCTURES\r\n\tRVS.F.expandSlide = function(slide) {\r\n\t\treturn RVS.F.safeExtend(true,RVS.F.addSlideObj(), slide);\r\n\t};\r\n\r\n    // Backend only solution for cross origin images (IE 11 does not support URL)\r\n    RVS.F.getImgWithCORS = function(img, url) {\r\n        if(URL && typeof URL === 'function'){\r\n            if ((new URL(url, window.location.href)).origin !== window.location.origin) {\r\n                img.crossOrigin = \"anonymous\";\r\n            }\r\n        } else {\r\n            console.warn(\"URL object is not available\");\r\n        }\r\n    }\r\n\r\n\t/***********************************\r\n\t\t\tINTERNAL FUNCTIONS\r\n\t************************************/\r\n\tRVS.F.getSlideTransitionDefaults = function(_) { return getSlideTransitionDefaults(_);}\r\n    function getSlideTransitionDefaults(_) {\r\n        var b = _.preset!==undefined ? RVS.F.safeExtend(true,RVS._R.getSlideAnim_EmptyObject(),_.preset) :\r\n                _.key!==undefined ? RVS._R.getAnimObjectByKey(_.key,RVS.LIB.SLTR)!==undefined ? RVS.F.safeExtend(true,{},RVS._R.getSlideAnim_EmptyObject(),RVS._R.getAnimObjectByKey(_.key,RVS.LIB.SLTR)) : RVS._R.getSlideAnim_EmptyObject():\r\n                RVS._R.getSlideAnim_EmptyObject();\r\n\r\n        if (_.slot!==undefined) b.in.col = b.in.row = _.slot;\r\n        b.speed = Math.round(b.speed);\r\n\r\n        b.preset = _.key!==undefined ? _.key : _.customkey!==undefined ? _.customkey : \"custom\";\r\n\r\n\r\n        return b;\r\n    }\r\n\r\n    /* MIGATION OF OLD TRANSITIONS TO THE NEW TRANSITION TABLE */\r\n    function migrateSlideAnimations(tl,compare) {\r\n        var alltrans = tl.transition;\r\n\r\n\r\n        if (compare) return RVS._R.getSlideAnim_EmptyObject();\r\n        var a = [\"duration\",\"rotation\",\"easeIn\",\"easeOut\",\"slots\",\"transition\"];\r\n\r\n        if (tl.slots!==undefined) tl.slots = FCV(FOtoA(tl.slots));\r\n        if (tl.slots!==undefined) tl.slots = FCV(FOtoA(tl.slots));\r\n\r\n        if (tl.transition===\"undefined\" || tl.transition===undefined) tl.transition = [\"fade\"];\r\n        //FALL BACK ON RANDOM ANIMATIONS\r\n        if (tl.transition[0]===\"random\" || tl.transition[0]===\"random-static\" || tl.transition[0]===\"random-premium\" || tl.transition===\"random\" || tl.transition===\"random-static\" || tl.transition===\"random-premium\") {\r\n            tl.transition = [\"rndany\"];\r\n            tl.slots = [1];\r\n            try{tl.duration = tl.duration===undefined || tl.duration[0]===undefined || tl.duration<500 || tl.duration[0]<500 ? 750 : tl.duration} catch(e) {}\r\n        }\r\n\r\n        for (var i in a) if (a.hasOwnProperty(i)) tl[a[i]] = FCV(FOtoA(tl[a[i]]));\r\n\r\n        var nslot = false;\r\n        for (i in RVS.LIB.SLTR.basic) if (RVS.LIB.SLTR.basic.hasOwnProperty(i)) for (var j in RVS.LIB.SLTR.basic[i]) if (nslot) continue; else nslot = j===tl.transition[0];\r\n\r\n\r\n        var settings = getSlideTransitionDefaults({\r\n            key:tl.transition[0]==\"fade\" || tl.transition[0]==\"default\" ? \"fade\" : tl.transition[0],\r\n            slot:nslot ? 1 : tl.slots!==undefined && tl.slots[0]!==undefined && tl.slots[0]!==\"default\" ? tl.slots[0] : undefined\r\n        });\r\n\r\n\r\n        if (tl.transition[0]===\"3dcurtain-vertical\" || tl.transition[0]===\"3dcurtain-horizontal\" || tl.transition===\"3dcurtain-vertical\" || tl.transition===\"3dcurtain-horizontal\") {\r\n            settings.speed = tl.duration[0]===undefined || tl.duration[0]===\"default\" || tl.duration[0]==\"d\" ? 500 : parseInt(parseInt(tl.duration[0])/3);\r\n        } else\r\n        if (tl.duration[0]!==undefined && tl.duration[0]!==\"default\") settings.speed = tl.duration[0];\r\n\r\n        //FIX RANDOM SPEED\r\n        if (settings.speed===\"random\") settings.speed = 1000;\r\n\r\n        if (tl.easeIn[0]!==undefined && tl.easeIn[0]!==\"default\") settings.in.e = tl.easeIn[0];\r\n        if (tl.easeOut[0]!==undefined && tl.easeOut[0]!==\"default\") settings.out.e = tl.easeOut[0];\r\n        if (tl.rotation[0]!==undefined && tl.rotation[0]!==\"default\" && tl.rotation[0]!==0) settings.in.r = tl.rotation[0];\r\n        if (tl.rotation[0]!==undefined && tl.rotation[0]!==\"default\" && tl.rotation[0]!==0) settings.out.r = tl.rotation[0];\r\n\r\n        if (alltrans!==undefined && Array.isArray(alltrans) && alltrans.length>1) {\r\n            settings.alt = [];\r\n            for (var i=1;i<alltrans.length;i++)  settings.alt.push(alltrans[i])\r\n\r\n        }\r\n\r\n\r\n        return settings;\r\n\r\n    }\r\n\r\n\t/*\r\n\tSET VALUE TO A OR B DEPENDING IF VALUE A EXISTS AND NOT UNDEFINED OR NULL\r\n\t*/\r\n\tfunction _d(a,b) {\r\n\t\tif (a===undefined || a===null)\r\n\t\t\treturn b;\r\n\t\telse\r\n\t\t\treturn a;\r\n\t}\r\n\r\n\r\n\tfunction _truefalse(v) {\r\n\t\tif (v===\"false\" || v===false || v===\"off\" || v===undefined || v===0 || v===-1)\r\n\t\t\tv=false;\r\n\t\telse\r\n\t\t\tv=true;\r\n\t\treturn v;\r\n\t}\r\n\r\n})();\r\n","Nwdthemes_Revslider/admin/assets/js/modules/rightclick.js":"/*!\r\n * REVOLUTION 6.0.0 EDITOR RIGHTCLICK JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\n/*\r\n\tBEGIN RIGHT CLICK MENU\r\n*/\r\n\r\n\r\njQuery(function() {\t\r\n\tvar BufferX = 50,\r\n\t\tBufferY = 50,\r\n\t\tMargin = 10,\r\n\t\tSelectedItem,\r\n\t\tSingleLayers,\r\n\t\tSingleParents,\r\n\t\tSupressClick,\r\n\t\tCopiedLayer,\r\n\t\tCopiedTitle,\r\n\t\tPasteLayer,\r\n\t\tPasteTitle,\r\n\t\tRcMenuAdded,\r\n\t\tRcMenuOpen,\r\n\t\tLayerMenu,\r\n\t\tPrevItem,\r\n\t\tCopiedBG,\r\n\t\tCurEvent,\r\n\t\tSlideId,\r\n\t\tPasteBg,\r\n\t\tPanZoom,\r\n\t\tBgMenu,\r\n\t\tWin;\r\n\r\n\tRVS.DOC = RVS.DOC===undefined ? jQuery(document) : RVS.DOC;\r\n\r\n\t\r\n\r\n\tfunction addMenus() {\r\n\r\n\t\tLayerMenu =\r\n\r\n\t\t\tjQuery('<div class=\"tool_dd_wrap rc-menu-wrap\" id=\"rc_layer_menu\">' +\r\n\t\t\t\t'<div class=\"toolbar_dd_subdrop_wrap\">' +\r\n\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-single\"><i class=\"material-icons\">edit</i>Edit</div>' +\r\n\t\t\t\t\t'<div class=\"toolbar_dd_subdrop\">' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-layer-edit\" data-type=\"content\" data-rcevent=\"editlayer\"><i class=\"material-icons\">edit</i>Content</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-layer-edit\" data-type=\"image\" data-rcevent=\"editlayer\"><i class=\"material-icons\">edit</i>Image</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"style\" data-rcevent=\"editlayer\"><i class=\"material-icons\">color_lens</i>Base Style</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"advstyle\" data-rcevent=\"editlayer\"><i class=\"material-icons\">invert_colors</i>Adv. Style</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"hover\" data-rcevent=\"editlayer\"><i class=\"material-icons\">mouse</i>Hover Style</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"sizepos\" data-rcevent=\"editlayer\"><i class=\"material-icons\">open_with</i>Size & Position</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"responsive\" data-rcevent=\"editlayer\"><i class=\"material-icons\">photo_size_select_large</i>Responsivity</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"animation\" data-rcevent=\"editlayer\"><i class=\"material-icons\">play_arrow</i>Animation</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"scroll\" data-rcevent=\"editlayer\"><i class=\"material-icons\">system_update_alt</i>On Scroll</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"actions\" data-rcevent=\"editlayer\"><i class=\"material-icons\">touch_app</i>Actions</div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"toolbar_dd_subdrop_wrap\">' +\r\n\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"layer\" data-rcevent=\"copylayer\"><i class=\"material-icons\" data-title=\"Layer(s)\">content_paste</i>Copy</div>' +\r\n\t\t\t\t\t'<div class=\"toolbar_dd_subdrop\">' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"layer\" data-rcevent=\"copylayer\"><i class=\"material-icons\" data-title=\"Layers(s)\">layers</i>Selected Layers</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-single\" data-type=\"idle\" data-rcevent=\"copylayersettings\" data-title=\"Base Style\"><i class=\"material-icons\">color_lens</i>Base Style</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-single\" data-type=\"idleadv\" data-rcevent=\"copylayersettings\" data-title=\"Adv. Style\"><i class=\"material-icons\">invert_colors</i>Adv. Style</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-single\" data-type=\"hover\" data-rcevent=\"copylayersettings\" data-title=\"Hover Style\"><i class=\"material-icons\">mouse</i>Hover Style</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-single\" data-type=\"size\" data-rcevent=\"copylayersettings\" data-title=\"Size\"><i class=\"material-icons\">aspect_ratio</i>Size</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-single\" data-type=\"position\" data-rcevent=\"copylayersettings\" data-title=\"Position\"><i class=\"material-icons\">open_with</i>Position</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-single\" data-type=\"behavior\" data-rcevent=\"copylayersettings\" data-title=\"Responsivity\"><i class=\"material-icons\">photo_size_select_large</i>Responsivity</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-single\" data-type=\"timeline\" data-rcevent=\"copylayersettings\" data-title=\"Animation\"><i class=\"material-icons\">play_arrow</i>Animation</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-single\" data-type=\"effects\" data-rcevent=\"copylayersettings\" data-title=\"On Scroll\"><i class=\"material-icons\">system_update_alt</i>On Scroll</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item rc-menu-single\" data-type=\"actions\" data-rcevent=\"copylayersettings\" data-title=\"Actions\"><i class=\"material-icons\">touch_app</i>Actions</div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div id=\"rc_paste_layer\" class=\"rc-menu-item\" data-rcevent=\"paste\"><i class=\"material-icons\">file_download</i><span class=\"rc-menu-paste\">Paste</span></div>' +\r\n\t\t\t\t'<div class=\"rc-menu-item\" data-rcevent=\"duplicatelayer\"><i class=\"material-icons\">content_copy</i>Duplicate</div>' +\r\n\t\t\t\t'<div class=\"rc-menu-item\" data-rcevent=\"deletelayer\"><i class=\"material-icons\">delete</i>Delete</div>' +\r\n\t\t\t\t'<div class=\"rc-menu-item\" data-rcevent=\"hidelayer\"><i class=\"material-icons\">visibility</i>Show/Hide</div>' +\r\n\t\t\t\t'<div class=\"rc-menu-item\" data-rcevent=\"locklayer\"><i class=\"material-icons\">lock_outline</i>Lock/Unlock</div>' +\r\n\t\t\t\t'<div class=\"rc-menu-item\" data-rcevent=\"disable\"><i class=\"material-icons\">toggle_off</i>Disable Menu</div>' +\r\n\t\t\t'</div>').on('mouseleave', closeMenu);\r\n\r\n\t\tBgMenu =\r\n\r\n\t\t\tjQuery('<div class=\"tool_dd_wrap rc-menu-wrap\" id=\"rc_bg_menu\">' +\r\n\t\t\t\t'<div class=\"rc-menu-item rc-menu-bg-edit\" data-type=\"content\" data-rcevent=\"editbg\"><i class=\"material-icons\">edit</i>Edit</div>' +\r\n\t\t\t\t'<div class=\"toolbar_dd_subdrop_wrap rc-menu-bg-edit\" data-type=\"image\">' +\r\n\t\t\t\t\t'<div class=\"rc-menu-item\"><i class=\"material-icons\">edit</i>Edit</div>' +\r\n\t\t\t\t\t'<div class=\"toolbar_dd_subdrop\">' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"image\" data-rcevent=\"editbg\" data-title=\"Background\"><i class=\"material-icons\">style</i>Media Library</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"objectlibrary\" data-rcevent=\"editbg\" data-title=\"Animation\"><i class=\"material-icons\">camera_enhance</i>Object Library</div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"toolbar_dd_subdrop_wrap\">' +\r\n\t\t\t\t\t'<div class=\"rc-menu-item\"><i class=\"material-icons\">content_paste</i>Copy</div>' +\r\n\t\t\t\t\t'<div class=\"toolbar_dd_subdrop\">' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"background\" data-rcevent=\"copybg\" data-title=\"Background\"><i class=\"material-icons\">color_lens</i>Background</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"animation\" data-rcevent=\"copybg\" data-title=\"Animation\"><i class=\"material-icons\">invert_colors</i>Animation</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"filter\" data-rcevent=\"copybg\" data-title=\"Filter\"><i class=\"material-icons\">blur_on</i>Filter</div>' +\r\n\t\t\t\t\t\t'<div class=\"rc-menu-item\" data-type=\"onscroll\" data-rcevent=\"copybg\" data-title=\"On Scroll\"><i class=\"material-icons\">system_update_alt</i>On Scroll</div>' +\r\n\t\t\t\t\t\t'<div id=\"rc_menu_panzoom\" class=\"rc-menu-item\" data-type=\"panzoom\" data-rcevent=\"copybg\" data-title=\"Ken Burns\"><i class=\"material-icons\">leak_add</i>Ken Burns</div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div id=\"rc_paste_bg\" class=\"rc-menu-item\" data-rcevent=\"paste\"><i class=\"material-icons\">file_download</i><span class=\"rc-menu-paste\">Paste</span></div>' +\r\n\t\t\t\t'<div class=\"rc-menu-item\" data-rcevent=\"disable\"><i class=\"material-icons\">toggle_off</i>Disable Menu</div>' +\r\n\t\t\t'</div>').on('mouseleave', closeMenu);\r\n\r\n\t\tPasteLayer = LayerMenu.find('#rc_paste_layer');\r\n\t\tPasteBg = BgMenu.find('#rc_paste_bg');\r\n\r\n\t\tvar bodies = jQuery(document.body).on('click.rcmenu', '.rc-menu-item:not(.rc-menu-title)', menuSelection).on('click.rcmenu', bodyClick);\r\n\t\tjQuery('#main_hor_toolbar, #the_right_toolbar, #timeline_settings').on('mouseover.rcmenu', closeMenu);\r\n\r\n\t\tbodies.append(LayerMenu).append(BgMenu);\r\n\t\tSingleLayers = jQuery('.rc-menu-single');\r\n\t\tSingleParents = SingleLayers.parents('.toolbar_dd_subdrop_wrap');\r\n\r\n\t\tPasteTitle = jQuery('.rc-menu-paste');\r\n\t\tPanZoom = jQuery('#rc_menu_panzoom');\r\n\r\n\t\tWin = RVS.WIN.on('resize.rcmenu', closeMenu);\r\n\t\tRcMenuAdded = true;\r\n\r\n\t}\r\n\r\n\tvar events = {\r\n\r\n\t\teditlayer: function() {\r\n\r\n\t\t\tvar triggers;\r\n\t\t\tswitch(this.dataset.type) {\r\n\r\n\t\t\t\tcase 'content':\r\n\t\t\t\t\ttriggers = ['#gst_layer_1'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'image':\r\n\t\t\t\t\ttriggers = ['#gst_layer_1', '#image_layer_media_library_button'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'style':\r\n\t\t\t\t\ttriggers = ['#gst_layer_3'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'advstyle':\r\n\t\t\t\t\ttriggers = ['#gst_layer_6'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'size':\r\n\t\t\t\t\ttriggers = ['#gst_layer_2'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hover':\r\n\t\t\t\t\ttriggers = ['#gst_layer_9'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'scroll':\r\n\t\t\t\t\ttriggers = ['#gst_layer_8'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'responsive':\r\n\t\t\t\t\ttriggers = ['#gst_layer_13'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'animation':\r\n\t\t\t\t\ttriggers = ['#gst_layer_4'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'actions':\r\n\t\t\t\t\ttriggers = ['#gst_layer_5'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tSupressClick = true;\r\n\t\t\ttriggers.unshift('#module_layers_trigger');\r\n\r\n\t\t\tvar len = triggers.length;\r\n\t\t\tfor(var i = 0; i < len; i++) {\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tjQuery(triggers[i]).trigger('click');\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e) {}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tSupressClick = true;\r\n\r\n\t\t},\r\n\r\n\t\teditbg: function() {\r\n\r\n\t\t\tvar triggers;\r\n\t\t\tswitch(this.dataset.type) {\r\n\r\n\t\t\t\tcase 'content':\r\n\t\t\t\t\ttriggers = ['#gst_slide_1'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'image':\r\n\t\t\t\t\ttriggers = ['#gst_slide_1', '#slide_bg_image_btn'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'objectlibrary':\r\n\t\t\t\t\ttriggers = ['#gst_slide_1', '#slide_object_library_btn'];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tSupressClick = true;\r\n\t\t\ttriggers.unshift('#module_slide_trigger');\r\n\r\n\t\t\tvar len = triggers.length;\r\n\t\t\tfor(var i = 0; i < len; i++) {\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tjQuery(triggers[i]).trigger('click');\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e) {}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tSupressClick = false;\r\n\r\n\t\t},\r\n\r\n\t\tduplicatelayer: function() {\r\n\r\n\t\t\tRVS.DOC.trigger('do_duplicate_layer');\r\n\r\n\t\t},\r\n\r\n\t\tdeletelayer: function() {\r\n\r\n\t\t\tRVS.DOC.trigger('do_delete_layer');\r\n\r\n\t\t},\r\n\r\n\t\thidelayer: function() {\r\n\r\n\t\t\tRVS.F.showHideLayers();\r\n\r\n\t\t},\r\n\r\n\t\tlocklayer: function() {\r\n\r\n\t\t\tRVS.F.lockUnlockLayers();\r\n\r\n\t\t},\r\n\r\n\t\tcopylayer: function() {\r\n\r\n\t\t\tCopiedBG = false;\r\n\t\t\tPrevItem = false;\r\n\r\n\t\t\tCopiedLayer = true;\r\n\t\t\tCopiedTitle = 'Paste Layer(s)';\r\n\r\n\t\t\tif(RVS.selLayers && RVS.selLayers.length === 1) {\r\n\r\n\t\t\t\tvar tpe = RVS.L[SelectedItem.dataset.uid].type;\r\n\t\t\t\tif(tpe && tpe.search(/column|row|zone/) === -1) {\r\n\r\n\t\t\t\t\tvar itm = RVS.H[SelectedItem.dataset.uid],\r\n\t\t\t\t\t\thh = itm.w_height,\r\n\t\t\t\t\t\tww = itm.w_width;\r\n\r\n\t\t\t\t\tif(ww === 'auto') ww = itm.w.outerWidth(true);\r\n\t\t\t\t\telse if(ww.search('%') !== -1) ww = itm.w.closest('.layer_grid').width() * (parseInt(ww, 10) * 0.01);\r\n\t\t\t\t\telse ww = parseInt(ww, 10);\r\n\r\n\t\t\t\t\tif(hh === 'auto') hh = itm.w.outerHeight(true);\r\n\t\t\t\t\telse if(hh.search('%') !== -1) \thh = itm.w.closest('.layer_grid').height() * (parseInt(hh, 10) * 0.01);\t\t\t\t\t\r\n\t\t\t\t\telse hh = parseInt(hh, 10);\r\n\r\n\t\t\t\t\tvar perc = RVS.S.shrink[RVS.screen];\r\n\t\t\t\t\tww *= perc;\r\n\t\t\t\t\thh *= perc;\r\n\r\n\t\t\t\t\tPrevItem = {w: ww * 0.5, h: hh * 0.5, keys: Object.keys(RVS.H)};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tSlideId = RVS.S.slideId;\r\n\t\t\tRVS.DOC.trigger('do_copy_layer');\r\n\r\n\t\t},\r\n\r\n\t\tcopylayersettings: function() {\r\n\r\n\t\t\tCopiedBG = false;\r\n\r\n\t\t\tvar tpe = this.dataset.type,\r\n\t\t\t\ttitl = this.dataset.title,\r\n\t\t\t\tlayrs = RVS.L[SelectedItem.dataset.uid];\r\n\r\n\t\t\tif(!layrs) {\r\n\r\n\t\t\t\tconsole.log('Wrong object path when copying layer style/settings');\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(tpe.search('idle') === -1) {\r\n\t\t\t\tCopiedLayer = [tpe, RVS.F.safeExtend(true, {}, layrs[tpe]), titl, RVS.selLayers[0]];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tCopiedLayer = [tpe, buildStyle(layrs.idle, tpe), titl];\r\n\t\t\t}\r\n\r\n\t\t\tCopiedTitle = 'Paste ' + titl;\r\n\r\n\t\t},\r\n\r\n\t\tcopybg: function() {\r\n\r\n\t\t\tCopiedLayer = false;\r\n\r\n\t\t\tvar settings = RVS.SLIDER[RVS.S.slideId].slide,\r\n\t\t\t\ttitl = this.dataset.title,\r\n\t\t\t\ttpe = this.dataset.type,\r\n\t\t\t\tobj;\r\n\r\n\t\t\tswitch(tpe) {\r\n\r\n\t\t\t\tcase 'background':\r\n\r\n\t\t\t\t\tobj = RVS.F.safeExtend(true, {}, settings.bg);\r\n\t\t\t\t\tdelete obj.mediaFilter;\r\n\t\t\t\t\tCopiedBG = [tpe, obj, titl];\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'animation':\r\n\r\n\t\t\t\t\tCopiedBG = [tpe, getSlideAnimation(settings.timeline), titl];\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'filter':\r\n\r\n\t\t\t\t\tCopiedBG = [tpe, settings.bg.mediaFilter, titl];\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'onscroll':\r\n\r\n\t\t\t\t\tCopiedBG = [tpe, RVS.F.safeExtend(true, {}, settings.effects), titl];\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'panzoom':\r\n\r\n\t\t\t\t\tobj = RVS.F.safeExtend(true, {}, settings.panzoom);\r\n\t\t\t\t\tsettings = settings.bg;\r\n\r\n\t\t\t\t\tobj.bg = {position: settings.position, positionX: settings.positionX, positionY: settings.positionY};\r\n\t\t\t\t\tCopiedBG = [tpe, obj, titl];\r\n\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tCopiedTitle = 'Paste ' + titl;\r\n\r\n\t\t},\r\n\r\n\t\tpaste: function(e) {\r\n\r\n\t\t\tif(CopiedLayer) pasteLayer(e);\r\n\t\t\telse pasteBG();\r\n\r\n\t\t},\r\n\r\n\t\tdisable: function() {\r\n\r\n\t\t\tBgMenu.remove();\r\n\t\t\tLayerMenu.remove();\r\n\r\n\t\t\tWin.off('.rcmenu');\r\n\t\t\tjQuery(document.body).off('.rcmenu');\r\n\r\n\t\t\tjQuery('#main_hor_toolbar, #the_right_toolbar, #timeline_settings').off('.rcmenu');\r\n\t\t\tPasteLayer = PasteBg = SingleLayers = SingleParents = PasteTitle = PanZoom = SelectedItem = CopiedLayer = CopiedBG = CurEvent = BgMenu = LayerMenu = Win = undefined;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction pastePosition(e, uid) {\r\n\r\n\t\tvar position = RVS.L[uid].position,\r\n\t\t\talignX = position.horizontal[RVS.screen].v,\r\n\t\t\talignY = position.vertical[RVS.screen].v;\r\n\r\n\t\tvar grid = RVS.H[uid].w.closest('.layer_grid'),\r\n\t\t\tpos = grid.offset();\r\n\r\n\t\tvar mouseX = Math.round((e.pageX - pos.left) - PrevItem.w),\r\n\t\t\tmouseY = Math.round((e.pageY - pos.top) - PrevItem.h),\r\n\t\t\tcalcX = mouseX,\r\n\t\t\tcalcY = mouseY;\r\n\r\n\t\tswitch(alignX) {\r\n\r\n\t\t\tcase 'right':\r\n\t\t\t\tcalcX = grid.width() - mouseX;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'center':\r\n\t\t\t\tcalcX = Math.round((grid.width() * 0.5) - PrevItem.w);\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tswitch(alignY) {\r\n\r\n\t\t\tcase 'bottom':\r\n\t\t\t\tcalcY = grid.height() - mouseY;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'center':\r\n\t\t\t\tcalcY = Math.round((grid.height() * 0.5) - PrevItem.h);\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tvar posHor = RVS.F.safeExtend(true, {}, position.horizontal),\r\n\t\t\tposVer = RVS.F.safeExtend(true, {}, position.vertical),\r\n\t\t\tcurScren,\r\n\t\t\tlen = 4,\r\n\t\t\tiLen,\r\n\t\t\tlast,\r\n\t\t\tsize,\r\n\t\t\ti;\r\n\r\n\t\tvar sizes = RVS.V.sizes.slice().reverse();\r\n\t\twhile(RVS.screen !== sizes[0]) sizes.shift();\r\n\t\tfor(i = 0; i < 4; i++) posHor[RVS.V.sizes[i]].e = false;\r\n\r\n\t\tlen = sizes.length;\r\n\t\tiLen = len - 1;\r\n\t\tcalcX += 'px';\r\n\t\tcalcY += 'px';\r\n\r\n\t\tfor(i = 0; i < len; i++) {\r\n\r\n\t\t\tsize = sizes[i];\r\n\t\t\tlast = i === iLen;\r\n\t\t\tcurScren = RVS.screen === size || last;\r\n\r\n\t\t\tif(curScren || position.x[size].e) position.x[size] = {v: calcX, e: true, u: 'px'};\r\n\t\t\tif(curScren || position.y[size].e) position.y[size] = {v: calcY, e: true, u: 'px'};\r\n\r\n\t\t\tpH = RVS.F.safeExtend(true, {}, posHor);\r\n\t\t\tpV = RVS.F.safeExtend(true, {}, posVer);\r\n\r\n\t\t\tif(curScren) {\r\n\r\n\t\t\t\tpH[size].e = true;\r\n\t\t\t\tpV[size].e = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tposition.horizontal[size] = RVS.F.safeExtend(true, {}, pH[size]);\r\n\t\t\tposition.vertical[size] = RVS.F.safeExtend(true, {}, pV[size]);\r\n\r\n\t\t}\r\n\r\n\t\tsizes = RVS.V.sizes.slice();\r\n\t\twhile(RVS.screen !== sizes[0]) sizes.shift();\r\n\r\n\t\tif(sizes.length) sizes.shift();\r\n\t\tlen = sizes.length;\r\n\r\n\t\tfor(i = 0; i < len; i++) {\r\n\r\n\t\t\tsize = sizes[i];\r\n\r\n\t\t\tposition.x[size].e = false;\r\n\t\t\tposition.y[size].e = false;\r\n\r\n\t\t\tposition.horizontal[size] = RVS.F.safeExtend(true, {}, posHor[size]);\r\n\t\t\tposition.vertical[size] = RVS.F.safeExtend(true, {}, posVer[size]);\r\n\r\n\t\t}\r\n\r\n\t\t// RVS.F.intelligentUpdateValuesOnLayer(uid);\r\n\t\t// RVS.H[uid].w.trigger('click');\r\n\r\n\t\tfor (var li in RVS.L) {\r\n\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.L[li].type !== 'zone') RVS.F.drawHTMLLayer({uid: li});\r\n\r\n\t\t}\r\n\r\n\t\tRVS.S.clickedLayer = uid;\r\n\r\n\t}\r\n\r\n\tfunction pasteLayer(e) {\r\n\r\n\r\n\r\n\t\tif(!CopiedLayer || CopiedLayer === false) {\r\n\r\n\t\t\tconsole.log('pasting from layer copy failed');\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar uid;\r\n\r\n\t\t// copied the entire layer(s)\r\n\t\tif(CopiedLayer === true) {\r\n\t\t\t\r\n\t\t\tRVS.DOC.trigger('do_paste_layer');\r\n\t\t\tif(!PrevItem || SlideId !== RVS.S.slideId) return;\r\n\r\n\t\t\tvar newKeys = Object.keys(RVS.H),\r\n\t\t\t\tlen = newKeys.length;\r\n\r\n\t\t\tfor(var i = 0; i < len; i++) {\r\n\r\n\t\t\t\tif(PrevItem.keys.indexOf(newKeys[i]) === -1) {\r\n\r\n\t\t\t\t\tuid = newKeys[i];\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(uid) pastePosition(e, uid);\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// copied layer settings\r\n\t\tvar path = CopiedLayer[0],\r\n\t\t\tval = CopiedLayer[1],\r\n\t\t\tids = CopiedLayer[3];\r\n\r\n\t\t// open backup group\r\n\t\tRVS.F.openBackupGroup({id: 'pasteLayerSettings', txt: 'Paste Layer ' + CopiedLayer[2], icon: 'file_download'});\r\n\r\n\t\t// pasting settings\r\n\t\tif(path.search('idle') === -1) {\r\n\r\n\t\t\tif(path === 'timeline') {\r\n\t\t\t\tRVS.TL[RVS.S.slideId].layers[RVS.selLayers[0]] = RVS.F.safeExtend(true, {}, RVS.TL[RVS.S.slideId].layers[ids]);\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.updateLayerObj({path: path, val: val});\r\n\t\t\tif(path === 'timeline') {\r\n\r\n\t\t\t\tRVS.F.reDrawListElements();\r\n\t\t\t\tjQuery(SelectedItem).trigger('click');\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// pasting styles\r\n\t\telse {\r\n\r\n\t\t\t// idle styles vary depending on whether the basic or advanced was copied\r\n\t\t\tfor(var prop in val) {\t\t\t\t\t\r\n\t\t\t\tif(!val.hasOwnProperty(prop)) continue;\t\t\t\t\r\n\t\t\t\tRVS.F.updateLayerObj({path: 'idle.' + prop, val: val[prop]});\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tRVS.F.updateLayerInputFields();\r\n\t\tRVS.F.closeBackupGroup({id: 'pasteLayerSettings'});\r\n\r\n\t\tRVS.S.clickedLayer = null;\r\n\r\n\t}\r\n\r\n\tfunction adjustPanZoom(settings, val) {\r\n\r\n\t\tsettings.position = val.position;\r\n\t\tsettings.positionX = val.positionX;\r\n\t\tsettings.positionY = val.positionY;\r\n\r\n\t\tRVS.F.updateEasyInputs({container: jQuery('#slide_bg_settings_wrapper'), path:RVS.S.slideId + '.slide.', trigger: 'init'});\r\n\t\tjQuery('#sl_pz_set').change();\r\n\r\n\t}\r\n\r\n\tfunction pasteBG() {\r\n\r\n\t\tif(!CopiedBG || CopiedBG === false) {\r\n\r\n\t\t\tconsole.log('pasting from bg copy failed');\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar container,\r\n\t\t\tpath = CopiedBG[0],\r\n\t\t\tval = CopiedBG[1],\r\n\t\t\tsettings = RVS.SLIDER[RVS.S.slideId].slide;\r\n\r\n\t\t// open backup group\r\n\t\tRVS.F.openBackupGroup({id: 'pasteBgSettings', txt: 'Paste BG ' + CopiedBG[2], icon: 'file_download'});\r\n\r\n\t\tswitch(path) {\r\n\r\n\t\t\tcase 'background':\r\n\t\t\t\tRVS.F.safeExtend(true, settings.bg, val);\r\n\t\t\t\tcontainer = '#form_slidebg_source';\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'animation':\r\n\t\t\t\tRVS.F.safeExtend(true, settings.timeline, val);\r\n\t\t\t\tcontainer = '#form_slide_transition';\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'filter':\r\n\t\t\t\tsettings.bg.mediaFilter = val;\r\n\t\t\t\tcontainer = '#form_slidebg_filters';\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'onscroll':\r\n\t\t\t\tRVS.F.safeExtend(true, settings.effects, val);\r\n\t\t\t\tcontainer = '#form_slide_onscroll';\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'panzoom':\r\n\t\t\t\tRVS.F.safeExtend(true, settings.panzoom, val);\r\n\t\t\t\tcontainer = '#form_slidebg_kenburn';\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\t// Update Input Fields in Slide Settings\r\n\t\tRVS.F.updateEasyInputs({container: container, path:RVS.S.slideId + '.slide.', trigger: 'init'});\r\n\r\n\t\t// needs to be updated manually\r\n\t\tif(path === 'panzoom') adjustPanZoom(settings.bg, val.bg);\r\n\t\telse if(path === 'animation') RVS.F.updateSlideAnimation();\r\n\r\n\t\t// close backup group\r\n\t\tRVS.F.closeBackupGroup({id: 'pasteBgSettings'});\r\n\r\n\t\t// redraw the stage\r\n\t\tRVS.DOC.trigger('updateslidebasic');\r\n\r\n\t}\r\n\r\n\tfunction getSlideAnimation(settings) {\r\n\r\n\t\tvar props = ['transition', 'duration', 'easeIn', 'easeOut', 'slots', 'rotation'],\r\n\t\t\tlen = props.length,\r\n\t\t\tobj = {},\r\n\t\t\tprop;\r\n\r\n\t\tfor(var i = 0; i < len; i++) {\r\n\r\n\t\t\tprop = props[i];\r\n\t\t\tobj[prop] = RVS.F.safeExtend(true, {}, settings[prop]);\r\n\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\r\n\t}\r\n\r\n\tfunction buildStyle(layrs, tpe) {\r\n\r\n\t\tvar styles;\r\n\t\tif(tpe === 'idle') {\r\n\r\n\t\t\t// copy all idle field paths here\r\n\t\t\tstyles = [\r\n\r\n\t\t\t\t'fontSize',\r\n\t\t\t\t'lineHeight',\r\n\t\t\t\t'fontWeight',\r\n\t\t\t\t'letterSpacing',\r\n\t\t\t\t'fontStyle',\r\n\t\t\t\t'textDecoration',\r\n\t\t\t\t'textTransform',\r\n\t\t\t\t'selectable',\r\n\t\t\t\t'fontFamily',\r\n\t\t\t\t'color',\r\n\t\t\t\t'backgroundColor',\r\n\t\t\t\t'backgroundImage',\r\n\t\t\t\t'backgroundImageId',\r\n\t\t\t\t'backgroundPosition',\r\n\t\t\t\t'backgroundSize',\r\n\t\t\t\t'backgroundRepeat',\r\n\t\t\t\t'margin',\r\n\t\t\t\t'padding',\r\n\t\t\t\t'borderColor',\r\n\t\t\t\t'borderStyle',\r\n\t\t\t\t'borderWidth',\r\n\t\t\t\t'borderRadius'\r\n\r\n\t\t\t];\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\t// copy all advanced field paths here\r\n\t\t\tstyles = [\r\n\r\n\t\t\t\t'rotationX',\r\n\t\t\t\t'rotationY',\r\n\t\t\t\t'rotationZ',\r\n\t\t\t\t'opacity',\r\n\t\t\t\t'boxShadow',\r\n\t\t\t\t'textShadow',\r\n\t\t\t\t'filter',\r\n\t\t\t\t'spikeUse',\r\n\t\t\t\t'spikeLeft',\r\n\t\t\t\t'spikeLeftWidth',\r\n\t\t\t\t'spikeRight',\r\n\t\t\t\t'spikeRightWidth',\r\n\t\t\t\t'cornerLeft',\r\n\t\t\t\t'cornerRight'\r\n\r\n\t\t\t];\r\n\r\n\t\t}\r\n\r\n\t\tvar len = styles.length,\r\n\t\t\tobj = {},\r\n\t\t\tval;\r\n\r\n\t\tfor(var i = 0; i < len; i++) {\r\n\r\n\t\t\tval = layrs[styles[i]];\r\n\t\t\tif(!val) continue;\r\n\r\n\t\t\t// deep array copy\r\n\t\t\tif(Array.isArray(val)) val = JSON.parse(JSON.stringify(val));\r\n\r\n\t\t\t// deep object copy\r\n\t\t\telse if(typeof val === 'object') val = RVS.F.safeExtend(true, {}, val);\r\n\r\n\t\t\t// primitive value\r\n\t\t\tobj[styles[i]] = val;\r\n\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\r\n\t}\r\n\r\n\tfunction menuSelection(e) {\r\n\r\n\t\tvar evt = this.dataset.rcevent;\r\n\t\tif(evt && events[evt]) events[this.dataset.rcevent].call(this, e);\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tfunction closeMenu() {\r\n\r\n\t\tif(RcMenuOpen) {\r\n\r\n\t\t\tRcMenuOpen = false;\r\n\t\t\tLayerMenu.hide();\r\n\t\t\tBgMenu.hide();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction removeClasses(i, className) {\r\n\r\n\t\treturn (className.match (/(^|\\s)rc-\\align-\\S+/g) || []).join(' ');\r\n\r\n\t}\r\n\r\n\t// close menu when somewhere else on the stage is clicked\r\n\tfunction bodyClick(e) {\r\n\r\n\t\tif(!RcMenuOpen || SupressClick) return;\r\n\t\tvar isTarget = e.target.id === 'rc_layer_menu' || jQuery(e.target).closest('#rc_layer_menu').length;\r\n\t\tif(!isTarget) closeMenu();\r\n\r\n\t}\r\n\r\n\tfunction adjustLayerMenu() {\r\n\r\n\t\t// edit view\r\n\t\tvar tpe = this.className.split('_lc_type_');\r\n\t\ttpe = tpe[1].split(' ')[0];\r\n\t\ttpe = tpe.search(/text|button|video|audio/) !== -1 ? 'content' : tpe === 'image' ? 'image' : false;\r\n\r\n\t\tjQuery('.rc-menu-layer-edit').hide();\r\n\t\tif(tpe) jQuery('.rc-menu-layer-edit[data-type=\"' + tpe + '\"').show();\r\n\r\n\t\t// paste view\r\n\t\tif(CopiedLayer) {\r\n\r\n\t\t\tPasteLayer.removeClass('disabled');\r\n\t\t\tPasteTitle.text(CopiedTitle);\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tPasteLayer.addClass('disabled');\r\n\t\t\tPasteTitle.text('Paste');\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction adjustBgMenu() {\r\n\r\n\t\t// edit view\r\n\t\tjQuery('.rc-menu-bg-edit').hide();\r\n\t\tvar tpe = RVS.SLIDER[RVS.S.slideId].slide.bg.type === 'image' ? 'image' : 'content';\r\n\t\tif(tpe) jQuery('.rc-menu-bg-edit[data-type=\"' + tpe + '\"]').show();\r\n\r\n\t\t// paste view\r\n\t\tif(CopiedLayer === true || CopiedBG) {\r\n\r\n\t\t\tPasteBg.removeClass('disabled');\r\n\t\t\tPasteTitle.text(CopiedTitle);\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tPasteBg.addClass('disabled');\r\n\t\t\tPasteTitle.text('Paste');\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction layerSelected(e, $this) {\r\n\r\n\t\trightClick.call($this);\r\n\r\n\t}\r\n\r\n\tfunction rightClick() {\r\n\r\n\t\tif(!RcMenuAdded) addMenus();\r\n\r\n\t\tvar menu,\r\n\t\t\tmethod,\r\n\t\t\tbgType,\r\n\t\t\t$this = jQuery(this);\r\n\r\n\t\tif($this.hasClass('_lc_')) {\r\n\r\n\t\t\tBgMenu.hide();\r\n\t\t\tadjustLayerMenu.call(this);\r\n\t\t\tmenu = LayerMenu.removeClass(removeClasses);\r\n\r\n\t\t\tmethod = RVS.selLayers && RVS.selLayers.length === 1 ? 'removeClass' : 'addClass';\r\n\t\t\tSingleLayers[method]('disabled');\r\n\t\t\tSingleParents[method]('disabled');\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tLayerMenu.hide();\r\n\t\t\tadjustBgMenu();\r\n\t\t\tmenu = BgMenu.removeClass(removeClasses);\r\n\r\n\t\t\tbgType = RVS.SLIDER[RVS.S.slideId].slide.bg.type;\r\n\t\t\tmethod = bgType === 'image' || bgType === 'external' ? 'show' : 'hide';\r\n\t\t\tPanZoom[method]();\r\n\r\n\t\t}\r\n\r\n\t\tvar alignX,\r\n\t\t\talignY,\r\n\t\t\tleft,\r\n\t\t\ttops;\r\n\r\n\t\tif(CurEvent.pageX < Win.width() - menu.width() - BufferX) {\r\n\r\n\t\t\tleft = CurEvent.pageX + Margin;\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tleft = CurEvent.pageX - menu.width() - Margin;\r\n\t\t\talignX = 'rc-align-right';\r\n\r\n\t\t}\r\n\r\n\t\tif(CurEvent.pageY < Win.height() - menu.height() - BufferY) {\r\n\r\n\t\t\ttops = CurEvent.pageY + Margin;\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\ttops = CurEvent.pageY - menu.height() - Margin;\r\n\t\t\talignY = 'rc-align-bottom';\r\n\r\n\t\t}\r\n\r\n\t\tif(alignX) menu.addClass(alignX);\r\n\t\tif(alignY) menu.addClass(alignY);\r\n\r\n\t\tmenu.css({'left': left, 'top': tops}).show();\r\n\t\tRcMenuOpen = true;\r\n\t\tCurEvent = false;\r\n\r\n\t}\r\n\r\n\tjQuery(document.body).on('contextmenu.rcmenu', '.layer_grid, ._lc_', function(evt) {\r\n\r\n\t\tif(CurEvent) return false;\r\n\t\tSelectedItem = this;\r\n\t\tCurEvent = evt;\r\n\r\n\t\tvar $this = jQuery(this);\r\n\t\tif($this.hasClass('_lc_') && !$this.hasClass('selected')) {\r\n\r\n\t\t\tRVS.DOC.one('layerselectioncomplete.rcmenu', layerSelected);\r\n\t\t\t$this.trigger('click');\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\trightClick.call(this);\r\n\t\treturn false;\r\n\r\n\t});\r\n\r\n});\r\n/*\r\n\tEND RIGHT CLICK MENU\r\n*/\r\n\r\n","Nwdthemes_Revslider/admin/assets/js/modules/basics.js":"/*!\r\n * REVOLUTION 6.0.0 UTILS - BUILDER BASIC JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\n/**********************************\r\n\t-\tGLOBAL VARIABLES\t-\r\n**********************************/\r\n;window.RVS = window.RVS === undefined ? {} : window.RVS;\r\nRVS.F = RVS.F === undefined ? {} : RVS.F;\r\nRVS.ENV = RVS.ENV === undefined ? {} : RVS.ENV;\r\nRVS.LIB = RVS.LIB === undefined ? {} : RVS.LIB;\r\nRVS.V = RVS.V === undefined ? {} : RVS.V;\r\nRVS.S = RVS.S === undefined ? {} : RVS.S;\r\nRVS.C = RVS.C === undefined ? {} : RVS.C;\r\nRVS.WIN = RVS.WIN === undefined ? jQuery(window) : RVS.WIN;\r\n\r\nRVS.DOC = RVS.DOC === undefined ? jQuery(document) : RVS.DOC;\r\n\r\nRVS.F.closest = function(el, fn) {return el && (fn(el) ? el : RVS.F.closest(el.parentNode, fn));};\r\nRVS.F.closestNode = function(el,node) { return RVS.F.closest(el,function(el) {   return el.nodeName === node;});};\r\nRVS.F.closestClass = function(el,cs) { return RVS.F.closest(el,function(el) {    return (' '+el.className+' ').indexOf(' '+cs+' ') >=0;});};\r\nRVS.F.isNumeric = function(n) { return !isNaN(parseFloat(n)) && isFinite(n);}\r\nRVS.F.trim = function(t) { return t!==undefined && t!==null && typeof t==\"string\" ? t.trim() : t;}\r\n\r\nRVS.S.setShowHide = [];\r\nRVS.S.setUnsetClasses = {};\r\nRVS.S.initOnOffList = {};\r\n\r\n\r\n/* perfect scrollbar jquery plugin */\r\nif(!jQuery.fn.RSScroll) {\r\n\tjQuery.fn.RSScroll = function(v, y) {\r\n\r\n\t\tif(!v || typeof v !== 'string') {\r\n\t\t\treturn this.each(function(i) {\r\n\t\t\t\tvar $this = jQuery(this),\r\n\t\t\t\t\tps = $this.data('revsliderps');\r\n\t\t\t\tif(!ps) $this.data('revsliderps', new RSPerfectScrollbar(this, v || {}));\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tswitch(v) {\r\n\t\t\t\tcase 'update':\r\n\t\t\t\t\treturn this.each(function() {\r\n\t\t\t\t\t\tvar ps = jQuery(this).data('revsliderps');\r\n\t\t\t\t\t\tif(ps) ps.update();\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'scrollTop':\r\n\t\t\t\t\treturn this.each(function() {\r\n\t\t\t\t\t\tthis.scrollTop = y;\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'destroy':\r\n\t\t\t\t\treturn this.each(function() {\r\n\t\t\t\t\t\tvar $this = jQuery(this),\r\n\t\t\t\t\t\t\tps = $this.data('revsliderps');\r\n\t\t\t\t\t\tif(ps) {\r\n\t\t\t\t\t\t\tps.destroy();\r\n\t\t\t\t\t\t\t$this.removeData('revsliderps');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n/* CREATE DOM FRAGEMENT*/\r\nRVS.F.cF = function() {\r\n    return document.createDocumentFragment();\r\n}\r\n\r\n/* CREATE ICON */\r\nRVS.F.cI = function(_) {\r\n    let i = document.createElement('i');\r\n    i.className='material-icons'+(_.cN!==undefined ? \" \"+_.cN : \"\");\r\n    i.textContent = _.c;\r\n    if (_.id) i.id = _.id;\r\n\r\n    if (_.ds) for (let d in _.ds) if(_.ds.hasOwnProperty(d)) i.dataset[d] = _.ds[d];\r\n    return i;\r\n}\r\n\r\n/* CREATE DOM ELEMENT */\r\nRVS.F.cE = function(_) {\r\n    let e = document.createElement(_.t || 'div');\r\n    if (_.con!==undefined) e.textContent = _.con;\r\n\tif (_.txt!==undefined) e.innerHTML = _.txt;\r\n    if (_.id) e.id = _.id;\r\n    if (_.cN) e.className = _.cN;\r\n    if (_.ds) for (let i in _.ds) if(_.ds.hasOwnProperty(i)) e.dataset[i] = _.ds[i];\r\n    if (_.icon) if (_.con!==undefined) e.insertBefore(RVS.F.cI(_.icon),e.firstChild); else e.appendChild(RVS.F.cI(_.icon));\r\n    if (_.type) e.type = _.type;\r\n    return e;\r\n}\r\n\r\n/*!\r\n * perfect-scrollbar v1.4.0\r\n * (c) 2018 Hyunje Jun\r\n * @license MIT\r\n */\r\n!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"NOfunction\"==typeof define&&define.amd?define(e):t.RSPerfectScrollbar=e()}(this,function(){\"use strict\";function t(t){return getComputedStyle(t)}function e(t,e){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];\"number\"==typeof r&&(r+=\"px\"),t.style[i]=r}return t}function i(t){var e=document.createElement(\"div\");return e.className=t,e}function r(t,e){if(!v)throw new Error(\"No element matching method supported\");return v.call(t,e)}function l(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function n(t,e){return Array.prototype.filter.call(t.children,function(t){return r(t,e)})}function o(t,e){var i=t.element.classList,r=m.state.scrolling(e);i.contains(r)?clearTimeout(Y[e]):i.add(r)}function s(t,e){Y[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(m.state.scrolling(e))},t.settings.scrollingThreshold)}function a(t,e){o(t,e),s(t,e)}function c(t){if(\"function\"==typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent(\"CustomEvent\");return e.initCustomEvent(t,!1,!1,void 0),e}function h(t,e,i,r,l){var n=i[0],o=i[1],s=i[2],h=i[3],u=i[4],d=i[5];void 0===r&&(r=!0),void 0===l&&(l=!1);var f=t.element;t.reach[h]=null,f[s]<1&&(t.reach[h]=\"start\"),f[s]>t[n]-t[o]-1&&(t.reach[h]=\"end\"),e&&(f.dispatchEvent(c(\"ps-scroll-\"+h)),e<0?f.dispatchEvent(c(\"ps-scroll-\"+u)):e>0&&f.dispatchEvent(c(\"ps-scroll-\"+d)),r&&a(t,h)),t.reach[h]&&(e||l)&&f.dispatchEvent(c(\"ps-\"+h+\"-reach-\"+t.reach[h]))}function u(t){return parseInt(t,10)||0}function d(t){return r(t,\"input,[contenteditable]\")||r(t,\"select,[contenteditable]\")||r(t,\"textarea,[contenteditable]\")||r(t,\"button,[contenteditable]\")}function f(e){var i=t(e);return u(i.width)+u(i.paddingLeft)+u(i.paddingRight)+u(i.borderLeftWidth)+u(i.borderRightWidth)}function p(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function b(t,i){var r={width:i.railXWidth},l=Math.floor(t.scrollTop);i.isRtl?r.left=i.negativeScrollAdjustment+t.scrollLeft+i.containerWidth-i.contentWidth:r.left=t.scrollLeft,i.isScrollbarXUsingBottom?r.bottom=i.scrollbarXBottom-l:r.top=i.scrollbarXTop+l,e(i.scrollbarXRail,r);var n={top:l,height:i.railYHeight};i.isScrollbarYUsingRight?i.isRtl?n.right=i.contentWidth-(i.negativeScrollAdjustment+t.scrollLeft)-i.scrollbarYRight-i.scrollbarYOuterWidth:n.right=i.scrollbarYRight-t.scrollLeft:i.isRtl?n.left=i.negativeScrollAdjustment+t.scrollLeft+2*i.containerWidth-i.contentWidth-i.scrollbarYLeft-i.scrollbarYOuterWidth:n.left=i.scrollbarYLeft+t.scrollLeft,e(i.scrollbarYRail,n),e(i.scrollbarX,{left:i.scrollbarXLeft,width:i.scrollbarXWidth-i.railBorderXWidth}),e(i.scrollbarY,{top:i.scrollbarYTop,height:i.scrollbarYHeight-i.railBorderYWidth})}function g(t,e){function i(e){b[d]=g+Y*(e[a]-v),o(t,f),R(t),e.stopPropagation(),e.preventDefault()}function r(){s(t,f),t[p].classList.remove(m.state.clicking),t.event.unbind(t.ownerDocument,\"mousemove\",i)}var l=e[0],n=e[1],a=e[2],c=e[3],h=e[4],u=e[5],d=e[6],f=e[7],p=e[8],b=t.element,g=null,v=null,Y=null;t.event.bind(t[h],\"mousedown\",function(e){g=b[d],v=e[a],Y=(t[n]-t[l])/(t[c]-t[u]),t.event.bind(t.ownerDocument,\"mousemove\",i),t.event.once(t.ownerDocument,\"mouseup\",r),t[p].classList.add(m.state.clicking),e.stopPropagation(),e.preventDefault()})}var v=\"undefined\"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),m={main:\"ps\",element:{thumb:function(t){return\"rs__scrollbar-\"+t},rail:function(t){return\"rs__scrollbar-\"+t+\"-rail\"},consuming:\"ps__child--consume\"},state:{focus:\"ps--focus\",clicking:\"ps--clicking\",active:function(t){return\"ps--active-\"+t},scrolling:function(t){return\"ps--scrolling-\"+t}}},Y={x:null,y:null},X=function(t){this.element=t,this.handlers={}},w={isEmpty:{configurable:!0}};X.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},X.prototype.unbind=function(t,e){var i=this;this.handlers[t]=this.handlers[t].filter(function(r){return!(!e||r===e)||(i.element.removeEventListener(t,r,!1),!1)})},X.prototype.unbindAll=function(){var t=this;for(var e in t.handlers)if(t.handlers.hasOwnProperty(e))t.unbind(e)},w.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return 0===t.handlers[e].length})},Object.defineProperties(X.prototype,w);var y=function(){this.eventElements=[]};y.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return e||(e=new X(t),this.eventElements.push(e)),e},y.prototype.bind=function(t,e,i){this.eventElement(t).bind(e,i)},y.prototype.unbind=function(t,e,i){var r=this.eventElement(t);r.unbind(e,i),r.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(r),1)},y.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]},y.prototype.once=function(t,e,i){var r=this.eventElement(t),l=function(t){r.unbind(e,l),i(t)};r.bind(e,l)};var W=function(t,e,i,r,l){void 0===r&&(r=!0),void 0===l&&(l=!1);var n;if(\"top\"===e)n=[\"contentHeight\",\"containerHeight\",\"scrollTop\",\"y\",\"up\",\"down\"];else{if(\"left\"!==e)throw new Error(\"A proper axis should be provided\");n=[\"contentWidth\",\"containerWidth\",\"scrollLeft\",\"x\",\"left\",\"right\"]}h(t,i,n,r,l)},L={isWebKit:\"undefined\"!=typeof document&&\"WebkitAppearance\"in document.documentElement.style,supportsTouch:\"undefined\"!=typeof window&&(\"ontouchstart\"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:\"undefined\"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:\"undefined\"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},R=function(t){var e=t.element,i=Math.floor(e.scrollTop);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(n(e,m.element.rail(\"x\")).forEach(function(t){return l(t)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(n(e,m.element.rail(\"y\")).forEach(function(t){return l(t)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=p(t,u(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=u((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=p(t,u(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=u(i*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),b(e,t),t.scrollbarXActive?e.classList.add(m.state.active(\"x\")):(e.classList.remove(m.state.active(\"x\")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=0),t.scrollbarYActive?e.classList.add(m.state.active(\"y\")):(e.classList.remove(m.state.active(\"y\")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)},T={\"click-rail\":function(t){t.event.bind(t.scrollbarY,\"mousedown\",function(t){return t.stopPropagation()}),t.event.bind(t.scrollbarYRail,\"mousedown\",function(e){var i=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top>t.scrollbarYTop?1:-1;t.element.scrollTop+=i*t.containerHeight,R(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,\"mousedown\",function(t){return t.stopPropagation()}),t.event.bind(t.scrollbarXRail,\"mousedown\",function(e){var i=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=i*t.containerWidth,R(t),e.stopPropagation()})},\"drag-thumb\":function(t){g(t,[\"containerWidth\",\"contentWidth\",\"pageX\",\"railXWidth\",\"scrollbarX\",\"scrollbarXWidth\",\"scrollLeft\",\"x\",\"scrollbarXRail\"]),g(t,[\"containerHeight\",\"contentHeight\",\"pageY\",\"railYHeight\",\"scrollbarY\",\"scrollbarYHeight\",\"scrollTop\",\"y\",\"scrollbarYRail\"])},keyboard:function(t){function e(e,r){var l=Math.floor(i.scrollTop);if(0===e){if(!t.scrollbarYActive)return!1;if(0===l&&r>0||l>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var n=i.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===n&&e<0||n>=t.contentWidth-t.containerWidth&&e>0)return!t.settings.wheelPropagation}return!0}var i=t.element,l=function(){return r(i,\":hover\")},n=function(){return r(t.scrollbarX,\":focus\")||r(t.scrollbarY,\":focus\")};t.event.bind(t.ownerDocument,\"keydown\",function(r){if(!(r.isDefaultPrevented&&r.isDefaultPrevented()||r.defaultPrevented)&&(l()||n())){var o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){if(\"IFRAME\"===o.tagName)o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(d(o))return}var s=0,a=0;switch(r.which){case 37:s=r.metaKey?-t.contentWidth:r.altKey?-t.containerWidth:-30;break;case 38:a=r.metaKey?t.contentHeight:r.altKey?t.containerHeight:30;break;case 39:s=r.metaKey?t.contentWidth:r.altKey?t.containerWidth:30;break;case 40:a=r.metaKey?-t.contentHeight:r.altKey?-t.containerHeight:-30;break;case 32:a=r.shiftKey?t.containerHeight:-t.containerHeight;break;case 33:a=t.containerHeight;break;case 34:a=-t.containerHeight;break;case 36:a=t.contentHeight;break;case 35:a=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&0!==s||t.settings.suppressScrollY&&0!==a||(i.scrollTop-=a,i.scrollLeft+=s,R(t),e(s,a)&&r.preventDefault())}})},wheel:function(e){function i(t,i){var r=Math.floor(o.scrollTop),l=0===o.scrollTop,n=r+o.offsetHeight===o.scrollHeight,s=0===o.scrollLeft,a=o.scrollLeft+o.offsetWidth===o.scrollWidth;return!(Math.abs(i)>Math.abs(t)?l||n:s||a)||!e.settings.wheelPropagation}function r(t){var e=t.deltaX,i=-1*t.deltaY;return void 0!==e&&void 0!==i||(e=-1*t.wheelDeltaX/6,i=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,i*=10),e!==e&&i!==i&&(e=0,i=t.wheelDelta),t.shiftKey?[-i,-e]:[e,i]}function l(e,i,r){if(!L.isWebKit&&o.querySelector(\"select:focus\"))return!0;if(!o.contains(e))return!1;for(var l=e;l&&l!==o;){if(l.classList.contains(m.element.consuming))return!0;var n=t(l);if([n.overflow,n.overflowX,n.overflowY].join(\"\").match(/(scroll|auto)/)){var s=l.scrollHeight-l.clientHeight;if(s>0&&!(0===l.scrollTop&&r>0||l.scrollTop===s&&r<0))return!0;var a=l.scrollWidth-l.clientWidth;if(a>0&&!(0===l.scrollLeft&&i<0||l.scrollLeft===a&&i>0))return!0}l=l.parentNode}return!1}function n(t){var n=r(t),s=n[0],a=n[1];if(!l(t.target,s,a)){var c=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(a?o.scrollTop-=a*e.settings.wheelSpeed:o.scrollTop+=s*e.settings.wheelSpeed,c=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(s?o.scrollLeft+=s*e.settings.wheelSpeed:o.scrollLeft-=a*e.settings.wheelSpeed,c=!0):(o.scrollTop-=a*e.settings.wheelSpeed,o.scrollLeft+=s*e.settings.wheelSpeed),R(e),(c=c||i(s,a))&&!t.ctrlKey&&(t.stopPropagation(),t.preventDefault())}}var o=e.element;void 0!==window.onwheel?e.event.bind(o,\"wheel\",n):void 0!==window.onmousewheel&&e.event.bind(o,\"mousewheel\",n)},touch:function(e){function i(t,i){var r=Math.floor(h.scrollTop),l=h.scrollLeft,n=Math.abs(t),o=Math.abs(i);if(o>n){if(i<0&&r===e.contentHeight-e.containerHeight||i>0&&0===r)return 0===window.scrollY&&i>0&&L.isChrome}else if(n>o&&(t<0&&l===e.contentWidth-e.containerWidth||t>0&&0===l))return!0;return!0}function r(t,i){h.scrollTop-=i,h.scrollLeft-=t,R(e)}function l(t){return t.targetTouches?t.targetTouches[0]:t}function n(t){return!(t.pointerType&&\"pen\"===t.pointerType&&0===t.buttons||(!t.targetTouches||1!==t.targetTouches.length)&&(!t.pointerType||\"mouse\"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function o(t){if(n(t)){var e=l(t);u.pageX=e.pageX,u.pageY=e.pageY,d=(new Date).getTime(),null!==p&&clearInterval(p)}}function s(e,i,r){if(!h.contains(e))return!1;for(var l=e;l&&l!==h;){if(l.classList.contains(m.element.consuming))return!0;var n=t(l);if([n.overflow,n.overflowX,n.overflowY].join(\"\").match(/(scroll|auto)/)){var o=l.scrollHeight-l.clientHeight;if(o>0&&!(0===l.scrollTop&&r>0||l.scrollTop===o&&r<0))return!0;var s=l.scrollLeft-l.clientWidth;if(s>0&&!(0===l.scrollLeft&&i<0||l.scrollLeft===s&&i>0))return!0}l=l.parentNode}return!1}function a(t){if(n(t)){var e=l(t),o={pageX:e.pageX,pageY:e.pageY},a=o.pageX-u.pageX,c=o.pageY-u.pageY;if(s(t.target,a,c))return;r(a,c),u=o;var h=(new Date).getTime(),p=h-d;p>0&&(f.x=a/p,f.y=c/p,d=h),i(a,c)&&t.preventDefault()}}function c(){e.settings.swipeEasing&&(clearInterval(p),p=setInterval(function(){e.isInitialized?clearInterval(p):f.x||f.y?Math.abs(f.x)<.01&&Math.abs(f.y)<.01?clearInterval(p):(r(30*f.x,30*f.y),f.x*=.8,f.y*=.8):clearInterval(p)},10))}if(L.supportsTouch||L.supportsIePointer){var h=e.element,u={},d=0,f={},p=null;L.supportsTouch?(e.event.bind(h,\"touchstart\",o),e.event.bind(h,\"touchmove\",a),e.event.bind(h,\"touchend\",c)):L.supportsIePointer&&(window.PointerEvent?(e.event.bind(h,\"pointerdown\",o),e.event.bind(h,\"pointermove\",a),e.event.bind(h,\"pointerup\",c)):window.MSPointerEvent&&(e.event.bind(h,\"MSPointerDown\",o),e.event.bind(h,\"MSPointerMove\",a),e.event.bind(h,\"MSPointerUp\",c)))}}},H=function(r,l){var n=this;if(void 0===l&&(l={}),\"string\"==typeof r&&(r=document.querySelector(r)),!r||!r.nodeName)throw new Error(\"no element is specified to initialize RSPerfectScrollbar\");this.element=r,r.classList.add(m.main),this.settings={handlers:[\"click-rail\",\"drag-thumb\",\"keyboard\",\"wheel\",\"touch\"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1};for(var o in l)if(l.hasOwnProperty(o))n.settings[o]=l[o];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var s=function(){return r.classList.add(m.state.focus)},a=function(){return r.classList.remove(m.state.focus)};this.isRtl=\"rtl\"===t(r).direction,this.isNegativeScroll=function(){var t=r.scrollLeft,e=null;return r.scrollLeft=-1,e=r.scrollLeft<0,r.scrollLeft=t,e}(),this.negativeScrollAdjustment=this.isNegativeScroll?r.scrollWidth-r.clientWidth:0,this.event=new y,this.ownerDocument=r.ownerDocument||document,this.scrollbarXRail=i(m.element.rail(\"x\")),r.appendChild(this.scrollbarXRail),this.scrollbarX=i(m.element.thumb(\"x\")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute(\"tabindex\",0),this.event.bind(this.scrollbarX,\"focus\",s),this.event.bind(this.scrollbarX,\"blur\",a),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var c=t(this.scrollbarXRail);this.scrollbarXBottom=parseInt(c.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=u(c.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=u(c.borderLeftWidth)+u(c.borderRightWidth),e(this.scrollbarXRail,{display:\"block\"}),this.railXMarginWidth=u(c.marginLeft)+u(c.marginRight),e(this.scrollbarXRail,{display:\"\"}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=i(m.element.rail(\"y\")),r.appendChild(this.scrollbarYRail),this.scrollbarY=i(m.element.thumb(\"y\")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute(\"tabindex\",0),this.event.bind(this.scrollbarY,\"focus\",s),this.event.bind(this.scrollbarY,\"blur\",a),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var h=t(this.scrollbarYRail);this.scrollbarYRight=parseInt(h.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=u(h.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?f(this.scrollbarY):null,this.railBorderYWidth=u(h.borderTopWidth)+u(h.borderBottomWidth),e(this.scrollbarYRail,{display:\"block\"}),this.railYMarginHeight=u(h.marginTop)+u(h.marginBottom),e(this.scrollbarYRail,{display:\"\"}),this.railYHeight=null,this.railYRatio=null,this.reach={x:r.scrollLeft<=0?\"start\":r.scrollLeft>=this.contentWidth-this.containerWidth?\"end\":null,y:r.scrollTop<=0?\"start\":r.scrollTop>=this.contentHeight-this.containerHeight?\"end\":null},this.isAlive=!0,this.settings.handlers.forEach(function(t){return T[t](n)}),this.lastScrollTop=Math.floor(r.scrollTop),this.lastScrollLeft=r.scrollLeft,this.event.bind(this.element,\"scroll\",function(t){return n.onScroll(t)}),R(this)};return H.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,e(this.scrollbarXRail,{display:\"block\"}),e(this.scrollbarYRail,{display:\"block\"}),this.railXMarginWidth=u(t(this.scrollbarXRail).marginLeft)+u(t(this.scrollbarXRail).marginRight),this.railYMarginHeight=u(t(this.scrollbarYRail).marginTop)+u(t(this.scrollbarYRail).marginBottom),e(this.scrollbarXRail,{display:\"none\"}),e(this.scrollbarYRail,{display:\"none\"}),R(this),W(this,\"top\",0,!1,!0),W(this,\"left\",0,!1,!0),e(this.scrollbarXRail,{display:\"\"}),e(this.scrollbarYRail,{display:\"\"}))},H.prototype.onScroll=function(t){this.isAlive&&(R(this),W(this,\"top\",this.element.scrollTop-this.lastScrollTop),W(this,\"left\",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},H.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),l(this.scrollbarX),l(this.scrollbarY),l(this.scrollbarXRail),l(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},H.prototype.removePsClasses=function(){this.element.className=this.element.className.split(\" \").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(\" \")},H});\r\n\r\n/**********************************\r\n\t-\tREVBUILDER ADMIN\t-\r\n********************************/\r\n\r\n(function() {\r\n\r\n\tvar errorMessageID = null,\r\n\t\tsuccessMessageID = null,\r\n\t\tajaxLoaderID = null,\r\n\t\tajaxHideButtonID = null,\r\n\t\tonOffListen;\r\n\r\n\t/* COPYRIGHT HANDLINGS */\r\n\tRVS.DOC.on('click','#rs_copyright' , function() {\r\n\t\tRVS.F.RSDialog.create({modalid:'#rbm_copyright', bgopacity:0.25});\r\n\t});\r\n\r\n\tRVS.DOC.on('click','#rbm_copyright .rbm_close' , function() {\r\n\t\tRVS.F.RSDialog.close();\r\n\t});\r\n\r\n\tRVS.DOC.on('click','.copyright_sel',function() {\r\n\t\tjQuery('.copyright_sel').removeClass(\"selected\");\r\n\t\tjQuery('.crm_content_wrap').removeClass(\"selected\")\r\n\t\tthis.className+=\" selected\";\r\n\t\tdocument.getElementById('crm_'+this.dataset.crm).className+=\" selected\";\r\n\t});\r\n\r\n\tRVS.F.CO = function(v,t) {\r\n\t\tvar o = document.createElement('option');\r\n\t\to.value = v;\r\n\t\to.innerText = t;\r\n\t\treturn o;\r\n\t}\r\n\r\n\tRVS.F.capitalise = function(a) {\r\n\t\treturn a.substr(0,1).toUpperCase()+a.substr(1);\r\n\t};\r\n\r\n\tRVS.F.capitaliseAll = function(a) {\r\n\t\tvar s = a.split(\" \");\r\n\t\tfor (var i in s) if (s.hasOwnProperty(i)) s[i] = s[i].substr(0,1).toUpperCase()+s[i].substr(1);\r\n\r\n\t\treturn s.join(\" \");\r\n\t};\r\n\r\n\tRVS.F.debug = function(txt) {\r\n\t\tconsole.log(txt);\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.compareVersion = function(v1, v2) {\r\n\t\tif (typeof v1 !== 'string') return false;\r\n\t\tif (typeof v2 !== 'string') return false;\r\n\t\tv1 = v1.split('.');\r\n\t\tv2 = v2.split('.');\r\n\t\tconst k = Math.min(v1.length, v2.length);\r\n\t\tfor (let i = 0; i < k; ++ i) {\r\n\t\t\tv1[i] = parseInt(v1[i], 10);\r\n\t\t\tv2[i] = parseInt(v2[i], 10);\r\n\t\t\tif (v1[i] > v2[i]) return 1;\r\n\t\t\tif (v1[i] < v2[i]) return -1;\r\n\t\t}\r\n\t\treturn v1.length == v2.length ? 0: (v1.length < v2.length ? -1 : 1);\r\n\t};\r\n\r\n\t/*\r\n\t ACTIVATE THE PLUGIN FROM INFO BOX\r\n\t */\r\n\t RVS.DOC.on('click','#rbmas_activateplugin',function() {\r\n \t\tvar code = jQuery('#rbmas_purchasekey').val();\r\n \t\tRVS.F.ajaxRequest('activate_plugin', {code:code},function(response) {\r\n \t\t\tif (response.success) {\r\n \t\t\t\tRVS.ENV.activated = true;\r\n \t\t\t\tRVS.ENV.code = code;\r\n \t\t\t\tjQuery('.rbmas_close').trigger('click');\r\n \t\t\t\tRVS.DOC.trigger(\"registrationdone\");\r\n \t\t\t\tif (RVS!==undefined && RVS.F!==undefined) {\r\n \t\t\t\t\tif (RVS.F.updateDraw!==undefined) RVS.F.updateDraw();\r\n \t\t\t\t\tif (RVS.F.isActivated!==undefined) RVS.F.isActivated();\r\n \t\t\t\t\tif (RVS.F.notifications!==undefined && RVS.S.ovMode) RVS.F.notifications();\r\n\t\t\t\t\t//Update Rwed Badgesa\r\n\t\t\t\t\tjQuery('.rs_lib_premium_wrap .rs_lib_premium_red').each(function() {\r\n\t\t\t\t\t\tthis.className = \"rs_lib_premium_lila\";\r\n\t\t\t\t\t\tthis.innerHTML = RVS_LANG.premium_template;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tjQuery('#rs_premium .rs_lib_premium_red').each(function() {\r\n\t\t\t\t\t\tthis.className = \"rs_lib_premium_lila\";\r\n\t\t\t\t\t\tthis.innerHTML = RVS_LANG.premium_template;\r\n\t\t\t\t\t});\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t});\r\n\t });\r\n\r\n\r\n\r\n\t/*\r\n\tASK FOR TRACKING\r\n\t*/\r\n\r\n\tfunction addWeeks(numOfWeeks, date = new Date()) { date. setDate(date. getDate() + numOfWeeks * 7); return date; }\r\n\tRVS.DOC.on('udpateTrackingEnv',function() {\r\n\t\tif (RVS.SLIDER!==undefined && RVS.SLIDER.globals!==undefined) {\r\n\t\t\tRVS.SLIDER.globals.tracking = RVS.SLIDER.globals.trackingOnOff == true || RVS.SLIDER.globals.trackingOnOff=='true' ? 'enabled' : '1999-01-01';\r\n\t\t\tRVS.ENV.tracking = RVS.SLIDER.globals.tracking;\r\n\t\t}\r\n\t});\r\n\r\n\t//UPDATE TRACKING INFOS\r\n\tRVS.F.updateTrackingInfo = function() {\r\n\t\tRVS.F.ajaxRequest('update_global_settings', {global_settings:{tracking : RVS.ENV.tracking},update:true}, function(response){\r\n\t\t\tif (response!==undefined && (response.success==true || response.success==\"true\")) {\r\n\t\t\t\tif (RVS.SLIDER!==undefined && RVS.SLIDER.globals!==undefined) {\r\n\t\t\t\t\tRVS.SLIDER.globals.tracking = RVS.ENV.tracking;\r\n\t\t\t\t\tRVS.SLIDER.globals.trackingOnOff = RVS.ENV.trackingOnOff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRVS.F.RSDialog.close();\r\n\t\t});\r\n\t}\r\n\r\n\tRVS.F.reqTracking = function() {\r\n\t\tif (RVS.F.dontShowTracking) return;\r\n\t\tif (RVS.ENV.tracking==\"enabled\") return;\r\n\t\tlet today = (new Date()).toISOString().split('T')[0]\r\n\t\tif (RVS.ENV.tracking>=today && RVS.ENV.tracking!==\"disabled\") return;\r\n\t\tif (RVS.F.showTrackingFirstgo) RVS.F.showTrackingFirstgo();\r\n\t}\r\n\r\n\tRVS.F.showTrackingFirstgo = function() {\r\n\t\tif (RVS.F.dontShowTracking) return;\r\n\t\tRVS.F.RSDialog.create({modalid:'#rbm_tracking_firstgo', bgopacity:0.8});\r\n\t\ttpGS.gsap.from('#rbm_des_rocket',0.5,{scale:0.3,opacity:0,y:25,x:-25,delay:0.5});\r\n\t\ttpGS.gsap.from('#rbm_des_charts',0.7,{scale:0.3,rotation:70,opacity:0,delay:0.3});\r\n\t\ttpGS.gsap.from('#rbm_des_rsicon',1,{scale:0,rotation:-270,opacity:0,delay:0.1});\r\n\t\tif (RVS.S.shTFreg==undefined) {\r\n\t\t\tRVS.DOC.on('click','#rbm_track_enable',function() {\r\n\t\t\t\tRVS.ENV.tracking = \"enabled\";\r\n\t\t\t\tRVS.ENV.trackingOnOff = true;\r\n\t\t\t\tRVS.F.updateTrackingInfo();\r\n\t\t\t});\r\n\t\t\tRVS.DOC.on('click','#rbm_track_disable',function() {\r\n\t\t\t\tRVS.ENV.tracking = (addWeeks(5)).toISOString().split('T')[0];\r\n\t\t\t\tRVS.ENV.trackingOnOff = false;\r\n\t\t\t\tRVS.F.updateTrackingInfo();\r\n\t\t\t});\r\n\t\t\tRVS.DOC.on('click','#rbm_tracking_firstgo .rbm_close',function() {\r\n\t\t\t\tRVS.ENV.tracking = (addWeeks(0.3)).toISOString().split('T')[0];\r\n\t\t\t\tRVS.ENV.trackingOnOff = false;\r\n\t\t\t\tRVS.F.updateTrackingInfo();\r\n\t\t\t});\r\n\t\t\tRVS.S.shTFreg = true;\r\n\t\t}\r\n\t}\r\n\r\n\tsetTimeout(function() {\r\n\t\tRVS.F.reqTracking();\r\n\t},1500);\r\n\r\n\t/**********************************\r\n\t\t-\tIMAGE AND VIDEO DIALOG -\r\n\t********************************/\r\n\r\n\t/*RVS.F.purchasePaddle = function() {\r\n\t\tPaddle.Setup({ vendor: 107530 });\r\n\t\tPaddle.Checkout.open({\r\n\t        product: 581373,\r\n\t        successCallback: function(data) {\r\n\t        //console.log(data);\r\n\t        alert('Thanks for your purchase.');\r\n\t        },\r\n\t        closeCallback: function(data) {\r\n\t        \tRVS.F.showInfo({content:RVS_LANG.paddlecancel, type:\"info\", showdelay:0, hidedelay:0, hideon:\"click\", event:\"\" });\r\n\t        \t//console.log(data);\r\n\t        }\r\n\t    });\r\n\t}*/\r\n\r\n\tRVS.F.openMageImageDialog = function(title, onInsert, isMultiple, fileType) {\r\n\t\tgalleryBrowser.openDialog(\r\n\t\t\trevMageImageUploadUrl.replace('file_type', fileType ? fileType : 'image'),\r\n\t\t\tfalse,\r\n\t\t\tfalse,\r\n\t\t\ttitle,\r\n\t\t\t{},\r\n\t\t\tonInsert\r\n\t\t);\r\n\t}\r\n\r\n\tRVS.F.openAddImageDialog = function(title,onInsert,isMultiple){\r\n\t\tif(!title)\r\n\t\t\ttitle = RVS_LANG.select_image;\r\n\t\tRVS.F.openMageImageDialog(title, onInsert, isMultiple);\r\n\t};\r\n\r\n\tRVS.F.openAddVideoDialog = function(title,onInsert,isMultiple){\r\n\t\tif(!title)\r\n\t\t\ttitle = RVS_LANG.select_image;\r\n\t\tRVS.F.openMageImageDialog(title, onInsert, isMultiple, 'video');\r\n\t};\r\n\r\n\r\n    RVS.S.layerIcons = RVS.F.safeExtend(true,RVS.S.layerIcons,{\r\n        zone:\"storage\",\r\n        shape:\"crop_landscape\",\r\n        image:\"filter_hdr\",\r\n        audio:\"audiotrack\",\r\n        button:\"radio_button_checked\",\r\n        column:\"view_column\",\r\n        group:\"format_shapes\",\r\n        row:\"reorder\",\r\n        object:\"filter_drama\",\r\n        svg:\"filter_drama\",\r\n\t\t\tvideo:\"live_tv\",\r\n\t\t\tlinebreak:\"keyboard_return\"\r\n    });\r\n\r\n\r\nRVS.F.getLayerIcon = function(_,_sub) {\r\n    return _sub!==undefined && RVS.S.layerIcons[_sub]!==undefined ? RVS.S.layerIcons[_sub] : _!==undefined && RVS.S.layerIcons[_]!==undefined ? RVS.S.layerIcons[_] : 'title';\r\n}\r\n\t/**********************************\r\n\t\t- \tCUSTOM DIALOG WINDOW \t-\r\n\t***********************************/\r\n\tvar ModalBefore,\r\n\t\tOpenedModal,\r\n\t\tModalScroll,\r\n\t\tModalContent,\r\n\t\tModalUnderlay;\r\n\r\n\tRVS.F.setCookie = function(cname, cvalue, exdays) {\r\n\t  var d = new Date();\r\n\t  d.setTime(d.getTime() + (exdays*24*60*60*1000));\r\n\t  var expires = \"expires=\"+ d.toUTCString();\r\n\t  document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n\t}\r\n\r\n\tRVS.F.getCookie = function (cname) {\r\n\t\tvar name = cname + \"=\";\r\n\t\tvar ca = document.cookie.split(';');\r\n\t\tfor (var i = 0; i < ca.length; i++) {\r\n\t\t\tvar c = ca[i];\r\n\t\t\twhile (c.charAt(0) == ' ') {\r\n\t\t\t\tc = c.substring(1);\r\n\t\t\t}\r\n\t\t\tif (c.indexOf(name) == 0) {\r\n\t\t\t\treturn decodeURIComponent(c.substring(name.length, c.length));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tRVS.F.toObject = function(arr) {\r\n\t\tvar rv = {};\r\n\t\tfor (var i = 0; i < arr.length; ++i)\r\n\t\trv[i] = arr[i];\r\n\t\treturn rv;\r\n\t}\r\n\r\n\tRVS.F.RSDialog = {\r\n\r\n\t\tcreate: function(obj) {\r\n\t\t\tobj.modalid = obj.modalid.replace('#', '');\r\n\t\t\tvar modal = jQuery('.rb-modal-wrapper[data-modal=\"' + obj.modalid + '\"]');\r\n\t\t\tmodal.addClass(\"_TPRB_\");\r\n\t\t\tif(!modal.length) {\r\n\t\t\t\tconsole.log('modal error: ' + obj.modalid);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tModalScroll = modal.find('.rb-modal-inner');\r\n\t\t\tModalContent = modal.find('.rb_modal');\r\n\r\n\t\t\tif(!ModalUnderlay) ModalUnderlay = jQuery('#rb_modal_underlay');\r\n\t\t\tif(!obj.hasOwnProperty('bgopacity')) obj.bgopacity = 0.05;\r\n\r\n\t\t\tif(OpenedModal && OpenedModal[0].dataset.modal !== obj.modalid) ModalBefore = OpenedModal;\r\n\t\t\tOpenedModal = modal;\r\n\r\n\t\t\tmodal.show();\r\n\t\t\tModalUnderlay.css('z-index', parseInt(modal.css('z-index'), 10) - 1).show();\r\n\r\n\t\t\tif(obj.modalid === 'rbm_decisionModal') RVS.F.RSDialog.doCancelModal(obj);\r\n\t\t\tRVS.F.RSDialog.center();\r\n\r\n\t\t\ttpGS.gsap.to(ModalUnderlay, 0.3, {opacity: obj.bgopacity, ease: tpGS.Power3.EaseInOut});\r\n\t\t\ttpGS.gsap.fromTo(modal, 0.3, {autoAlpha: 0, scale: 0.9}, {autoAlpha: 1, scale: 1, ease: tpGS.Power3.EaseInOut});\r\n\r\n\t\t},\r\n\t\tsetDragScroll: function(posTop) {\r\n\r\n\t\t\tif(posTop > 0) {\r\n\t\t\t\tModalContent.draggable({handle:'.rbm_header', axis: false, cancel: '.rbm_close'});\r\n\t\t\t\tModalScroll.RSScroll('destroy');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tModalContent.draggable({handle:'.rbm_header', axis: 'x', cancel: '.rbm_close'});\r\n\t\t\t\tModalScroll.RSScroll({wheelPropagation: true, suppressScrollX: false, minScrollbarLength: 30});\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcenter:function() {\r\n\r\n\t\t\tif(!OpenedModal) return;\r\n\r\n\t\t\tvar posTop = Math.max((window.innerHeight * 0.5) - (ModalContent.height() * 0.5), 0),\r\n\t\t\t\tposLeft = 'auto';\r\n\r\n\t\t\tif(OpenedModal[0].dataset.centerineditor) {\r\n\t\t\t\tposLeft = Math.round((RVS.C.rb.width() * 0.5) - (ModalContent.width() * 0.5));\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.RSDialog.setDragScroll(posTop);\r\n\t\t\tModalContent.css({marginTop: Math.ceil(posTop), marginLeft: posLeft, left: 0, top: 0});\r\n\t\t\tModalScroll.RSScroll('update');\r\n\r\n\t\t},\r\n\t\tclose: function(_) {\r\n\r\n\t\t\tif(OpenedModal) {\r\n\t\t\t\ttpGS.gsap.killTweensOf(OpenedModal);\r\n\t\t\t\tOpenedModal.hide().css('opacity', 0);\r\n\t\t\t}\r\n\t\t\tif(!ModalBefore && ModalUnderlay) {\r\n\t\t\t\ttpGS.gsap.killTweensOf(ModalUnderlay);\r\n\t\t\t\tModalUnderlay.hide().css('opacity', 0);\r\n\t\t\t}\r\n\r\n\t\t\tModalUnderlay.css('z-index', 999995);\r\n\t\t\tOpenedModal = ModalBefore;\r\n\t\t\tModalBefore = undefined;\r\n\r\n\t\t},\r\n\t\tdoCancelModal: function(_) {\r\n\r\n\t\t\tdocument.getElementById('decmod_icon').innerHTML = _.icon;\r\n\t\t\tdocument.getElementById('decmod_title').innerHTML = _.title;\r\n\t\t\tdocument.getElementById('decmod_maintxt').innerHTML = _.maintext;\r\n\t\t\tdocument.getElementById('decmod_subtxt').innerHTML = _.subtext;\r\n\t\t\tvar ddi, ddt;\r\n\t\t\tif (_.do!==undefined) {\r\n\t\t\t\tddi = document.getElementById('decmod_do_icon');\r\n\t\t\t\tddt = document.getElementById('decmod_do_txt');\r\n\t\t\t\tif (ddi!==undefined) ddi.innerHTML = _.do.icon;\r\n\t\t\t\tif (ddt!==undefined) ddt.innerHTML = _.do.text;\r\n\t\t\t\tjQuery('#decmod_do_btn').show().off('click').on('click', function() {\r\n\t\t\t\t\tif (_.do.event!==undefined)\tRVS.DOC.trigger(_.do.event,_.do.eventparam);\r\n\t\t\t\t\tif (_.do.callback!==undefined) _.do.callback();\r\n\t\t\t\t\tif (_.do.keepDialog!==true) {\r\n\t\t\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tjQuery('#decmod_do_btn').hide();\r\n\t\t\t}\r\n\t\t\tif (_.cancel!==undefined) {\r\n\t\t\t\tddi = document.getElementById('decmod_dont_icon');\r\n\t\t\t\tddt = document.getElementById('decmod_dont_txt');\r\n\t\t\t\tif (ddi!==undefined) ddi.innerHTML = _.cancel.icon;\r\n\t\t\t\tif (ddt!==undefined) ddt.innerHTML = _.cancel.text;\r\n\t\t\t\tjQuery('#decmod_dont_btn').show().off('click').on('click', function() {\r\n\t\t\t\t\tif (_.cancel.callback!==undefined) _.cancel.callback();\r\n\t\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tjQuery('#decmod_dont_btn').hide();\r\n\t\t\t}\r\n\t\t\tif (_.swapbuttons) {\r\n\t\t\t\tjQuery('#decmod_do_btn').css({float:\"right\", marginLeft:\"10px\",marginRight:\"0px\"});\r\n\t\t\t} else {\r\n\t\t\t\tjQuery('#decmod_do_btn').css({float:\"none\", marginLeft:\"0px\",marginRight:\"10px\"});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//CLICKING IN MODAL AND RELEASEING AFTER LEAVING OUTSIDE SHOUD BE IGNORED\r\n\tRVS.DOC.on('mousedown','.rb_modal',function() {\r\n\t\tRVS.S.clickStartOnModal = true;\r\n\t}).on('mouseup','.rb_modal',function() {\r\n\t\tsetTimeout(function() {\r\n\t\t\tRVS.S.clickStartOnModal = false;\r\n\t\t},50);\r\n\t});\r\n\r\n\t// close modal when clicked outside the box, also escape key\r\n\tRVS.DOC.on('click', '.rb-modal-content',function() {\r\n\t\tif(OpenedModal && RVS.S.clickStartOnModal!==true) OpenedModal.find('.rbm_close').trigger('click');\r\n\t\tRVS.S.clickStartOnModal = false;\r\n\t}).on('click', '.rb_modal', function(e) {e.stopPropagation();})\r\n\t\t.on('keydown', function(e,d) {if(e.keyCode == '27' && OpenedModal) OpenedModal.find('.rbm_close').trigger('click');});\r\n\r\n\t// reposition modal\r\n\tjQuery(window).on('resize', RVS.F.RSDialog.center);\r\n\r\n\r\n\tRVS.F.triggerShowHideDep = function(obj,rv) {\r\n\t\tif (obj.dataset.show!==undefined && obj.dataset.hide!==undefined && (obj.type!==\"radio\" || obj.checked))\r\n\t\t\tRVS.F.showHideGroups({hide:obj.dataset.hide, show:obj.dataset.show, val:rv, showprio:obj.dataset.showprio});\r\n\t\telse\r\n\t\t\tRVS.F.showHideDep({target:obj.dataset.showhide, nortarget:obj.dataset.hideshow, value: (rv===undefined ? obj.value : rv), depend:obj.dataset.showhidedep });\r\n\t};\r\n\r\n\tRVS.F.triggerInput = function(obj) {\r\n\t\tif (obj.inp===undefined) return;\r\n\t\tvar inps = obj.inp.split(\",\");\r\n\t\tobj.when = obj.when===\"true\" ? true : obj.when===\"false\" ? false : obj.when;\r\n\t\tobj.whennot = obj.whennot===\"true\" ? true : obj.whennot===\"false\" ? false : obj.whennot;\r\n\r\n\t\tfor (var inp in inps) {\r\n\t\t\tif(!inps.hasOwnProperty(inp)) continue;\r\n\t\t\tvar _i = jQuery(inps[inp].replace(\"*val*\",obj.dep));\r\n\t\t\tif (obj.val!==undefined && _i!==undefined && _i!==null && _i.length>0) {\r\n\t\t\t\tobj.val = obj.val.replace(\"*val*\",obj.dep);\r\n\t\t\t\tif ((obj.when!==undefined && obj.dep==obj.when) || (obj.whennot!==undefined && obj.dep!=obj.whennot) || (obj.when===undefined && obj.whennot===undefined))\r\n\t\t\t\t\tif(_i[0].type===\"checkbox\") _i.checked = obj.val==='false' || obj.val===false ? false : true; else _i.val(obj.val);\r\n\t\t\t}\r\n\t\t\t_i.trigger(\"change\");\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// COLLECT ALL SHOW,HIDE, SET,UNSET AND DO THEM ON 1 GO\r\n\tRVS.F.setUnsetHelp = function(_,addremove,cl,showhide) {\r\n\r\n\t\tif (_==undefined) return;\r\n\t\tvar t=\"\"\r\n\t\tcl = cl===undefined ? 'showhide_hidden' : cl;\r\n\t\tRVS.S.setUnsetClasses[cl] = RVS.S.setUnsetClasses[cl] || [];\r\n\r\n\t\t// UPDATE AND SYNC LISTS\r\n\t\tfor (var i=0;i<_.length;i++) t += _[i]+\",\";\r\n\t\tRVS.S.setUnsetClasses[cl].push({query:t,type:addremove});\r\n\t\tif (showhide!==undefined) RVS.S.setShowHide.push({query:t, type:showhide});\r\n\t\tif (!RVS.S.setUnserRafCalled) RVS.F.setUnsetRAF();\r\n\t}\r\n\r\n\tRVS.F.setUnsetRAF = function() {\r\n\t\tRVS.S.setUnserRafCalled = true;\r\n\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\tvar i,j,q,el,qs;\r\n\t\t\tfor (i in RVS.S.setUnsetClasses) {\r\n\t\t\t\tif (!RVS.S.setUnsetClasses.hasOwnProperty(i)) continue;\r\n\t\t\t\tfor (j=0;j<RVS.S.setUnsetClasses[i].length;j++) {\r\n\t\t\t\t\tqs = RVS.S.setUnsetClasses[i][j].query.slice(0,-1);\r\n\t\t\t\t\tif (qs===undefined || qs===\"\" || qs===\" \" || qs===\",\") continue;\r\n\t\t\t\t\tel = document.querySelectorAll(qs[qs.length-1]==\",\" ? qs.slice(0,-1) : qs);\r\n\t\t\t\t\tfor (q=0;q<el.length;q++) el[q].classList[RVS.S.setUnsetClasses[i][j].type](i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRVS.S.setUnsetClasses={};\r\n\r\n\t\t\tfor (j=0;j<RVS.S.setShowHide.length;j++) {\r\n\t\t\t\tqs = RVS.S.setShowHide[j].query.slice(0,-1);\r\n\t\t\t\tif (qs==\"\" || qs===undefined || qs===\" \" || qs===\",\") continue;\r\n\t\t\t\tel = document.querySelectorAll(qs[qs.length-1]==\",\" ? qs.slice(0,-1) : qs);\r\n\t\t\t\tfor (q=0;q<el.length;q++) jQuery(el[q])[RVS.S.setShowHide[j].type===\"hide\" ? 'hide' : 'show']();\r\n\t\t\t}\r\n\t\t\tRVS.S.setShowHide=[];\r\n\t\t\tRVS.S.setUnserRafCalled=false;\r\n\t\t});\r\n\t}\r\n\r\n\tRVS.F.showHideDep = function(obj) {\r\n\t\tvar _ = obj.target!==undefined ? obj.target.split(\",\") : undefined,\r\n\t\t\t_nnor = obj.nortarget!==undefined ? obj.nortarget.split(\",\") : undefined,\r\n\t\t\tdep = obj.depend===\"true\" ? true : obj.depend===\"false\" ? false : obj.depend;\r\n\r\n\t\tif (typeof dep === \"string\" && dep.indexOf(\"!!\")>=0) {\r\n\t\t\tdep = dep.replace(\"!!\",\"\");\r\n\t\t\tif (obj.value!==dep)  {\r\n\t\t\t\tRVS.F.setUnsetHelp(_,'remove',undefined,'show');\r\n\t\t\t\tRVS.F.setUnsetHelp(_nnor,'add',undefined,'hide');\r\n\t\t\t} else  {\r\n\t\t\t\tRVS.F.setUnsetHelp(_,'add',undefined,'hide');\r\n\t\t\t\tRVS.F.setUnsetHelp(_nnor,'remove',undefined,'show');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (obj.value===dep) {\r\n\t\t\t\tRVS.F.setUnsetHelp(_,'remove',undefined,'show');\r\n\t\t\t\tRVS.F.setUnsetHelp(_nnor,'add',undefined,'hide');\r\n\t\t\t} else {\r\n\t\t\t\tRVS.F.setUnsetHelp(_,'add',undefined,'hide');\r\n\t\t\t\tRVS.F.setUnsetHelp(_nnor,'remove',undefined,'show');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/*RVS.F.showHideDep = function(obj) {\r\n\t\tvar _ = jQuery(obj.target),_nnor = jQuery(obj.nortarget),dep = obj.depend===\"true\" ? true : obj.depend===\"false\" ? false : obj.depend;\r\n\t\tif (typeof dep === \"string\" && dep.indexOf(\"!!\")>=0) {\r\n\t\t\tdep = dep.replace(\"!!\",\"\");\r\n\t\t\tif (obj.value!==dep) requestAnimationFrame(function() {\t_.show().removeClass(\"showhide_hidden\");_nnor.hide().addClass(\"showhide_hidden\");});\r\n\t\t\telse requestAnimationFrame(function() {\t_.hide().addClass(\"showhide_hidden\");_nnor.show().removeClass(\"showhide_hidden\");});\r\n\t\t} else {if (obj.value===dep) requestAnimationFrame(function() {\t_.show().removeClass(\"showhide_hidden\");_nnor.hide().addClass(\"showhide_hidden\");});\r\n\t\t\telse requestAnimationFrame(function() {\t_.hide().addClass(\"showhide_hidden\");_nnor.show().removeClass(\"showhide_hidden\");});\r\n\t\t}\r\n\t}*/\r\n\r\n\tRVS.F.showHideGroups = function(obj) {\r\n\r\n\t\tif (obj.val!==undefined) {\r\n\t\t\tobj.show = obj.show.split('*val*').join(obj.val).split(' ').join(''); //replace(/\\*val\\*/g,obj.val).replace(/ /g,\"\");\r\n\t\t\tobj.hide = obj.hide.split('*val*').join(obj.val).split(' ').join(''); //replace(/\\*val\\*/g,obj.val).replace(/ /g,\"\");\r\n\t\t}\r\n\r\n\t\tif (obj.show!==\"\" && obj.hide!==\"\")\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\tif (obj.showprio===\"hide\") {\r\n\t\t\t\t\tjQuery(obj.show).show();\r\n\t\t\t\t\tjQuery(obj.hide).hide();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery(obj.hide).hide();\r\n\t\t\t\t\tjQuery(obj.show).show();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\t/****************************************************************************\r\n\t-\tUPDATE THE INPUT BOXES ANY ART FROM OBJECT VALUES ON DEMAND \t-\r\n\t*****************************************************************************/\r\n\tRVS.F.updateEasyInput = function(obj) {\r\n\r\n\t\tobj.nval = obj.nval==='false' ? false : obj.nval==='true' ? true : obj.nval;\r\n\t\tobj.path = obj.path===undefined ? \"settings.\" : obj.path;\r\n\r\n\t\tvar commonvalue = undefined,\r\n\t\t\ttempval = \"\",\r\n\t\t\tty = obj.el.type,\r\n\t\t\tds = obj.el.dataset,\r\n\t\t\t_v;\r\n\r\n\t\tswitch (ty) {\r\n\t\t\tcase \"checkbox\":\r\n\t\t\tcase \"text\":\r\n\t\t\tcase \"textarea\":\r\n\t\t\tcase \"select-one\":\r\n\t\t\tcase \"select-multiple\":\r\n\t\t\t\tif (!obj.multiselection) {\r\n\t\t\t\t\tcommonvalue = obj.nval===undefined ? RVS.F.getDeepVal({root:obj.root, path:obj.path+obj.el.dataset.r}) : obj.nval;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var li in RVS.selLayers) {\r\n\t\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(li)) continue;\r\n\t\t\t\t\t\ttempval = obj.nval===undefined ? RVS.F.getDeepVal({root:obj.root, path:obj.path+RVS.selLayers[li]+'.'+obj.el.dataset.r}) : obj.nval;\r\n\t\t\t\t\t\tif (commonvalue==undefined || commonvalue==tempval)\r\n\t\t\t\t\t\t\tcommonvalue = tempval;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tcommonvalue = ds.multiplaceholder!==undefined ? ds.multiplaceholder : \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tif (commonvalue===undefined && obj.el.dataset.default!==undefined ) commonvalue =  obj.el.dataset.default;\r\n\r\n\t\t\t\tif (ty === \"select-one\") {\r\n\t\t\t\t\t//if(obj.el.className.indexOf('setboxes')>=0) RVS.F.checkAvailableTagS2({select:jQuery(obj.el),val:commonvalue});\r\n\t\t\t\t\tobj.el.value = commonvalue;\r\n\t\t\t\t\tjQuery(obj.el).ddTP('change');\r\n\t\t\t\t} else if (ty === \"select-multiple\") {\r\n\t\t\t\t\tif(!Array.isArray(commonvalue)) commonvalue=commonvalue.split(\",\");\r\n\t\t\t\t\tfor (var i = 0; i < obj.el.options.length; i++) obj.el.options[i].selected = commonvalue.indexOf(obj.el.options[i].value) >= 0;\r\n\t\t\t\t\tjQuery(obj.el).ddTP('change');\r\n\r\n\t\t\t\t} else  if (ty === \"checkbox\")\r\n\t\t\t\t\tobj.el.checked = commonvalue===undefined ? undefined : commonvalue === \"false\" || commonvalue === false ? false : true;\r\n\t\t\t\telse {\r\n\t\t\t\t\tobj.el.value = commonvalue;\r\n\t\t\t\t\tobj.el.history = obj.el.value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// SET / UNSET SELECTED CONTAINERS BASED ON THE CURRENT VALUE\r\n\t\t\t\tif (ds.unselect!==undefined || ds.select!==undefined) RVS.F.setUnsetSelected({unselect:ds.unselect, select:ds.select, val:obj.el.value, rval:ds.rval, prval:ds.prval, prvalif:ds.prvalif});\r\n\r\n\t\t\t\tif (obj.el.id===\"layer_action_type\") obj.el.value = RVS_LANG[\"layeraction_\"+obj.el.value];\r\n\t\t\t\tif (obj.el.value===undefined || obj.el.value===\"undefined\") obj.el.value= \"\";\r\n\r\n\t\t\t\tif (ty===\"text\" && obj.el.className.indexOf('my-color-field')>=0) jQuery(obj.el).rsColorPicker(\"refresh\");\r\n\t\t\tbreak;\r\n\t\t\tcase \"radio\":\r\n\t\t\t\tif (!obj.multiselection)\r\n\t\t\t\t\t commonvalue = obj.nval===undefined ? obj.el.value === RVS.F.getDeepVal({root:obj.root, path:obj.path+obj.el.dataset.r}) : obj.nval;\r\n\t\t\t\telse\r\n\t\t\t\t\tfor (var li in RVS.selLayers) {\r\n\t\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(li)) continue;\r\n\t\t\t\t\t\ttempval = obj.nval===undefined ? obj.el.value === RVS.F.getDeepVal({root:obj.root, path:obj.path+RVS.selLayers[li]+'.'+obj.el.dataset.r}) : obj.nval;\r\n\t\t\t\t\t\tif (commonvalue==undefined || commonvalue==tempval)\r\n\t\t\t\t\t\t\tcommonvalue = tempval;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tcommonvalue = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\tobj.el.checked = commonvalue;\r\n\t\t\t\t// SET / UNSET SELECTED CONTAINERS BASED ON THE CURRENT VALUE\r\n\t\t\t\tif (ds.unselect!==undefined || ds.select!==undefined)\r\n\t\t\t\t\tif (obj.el.checked.checked)\r\n\t\t\t\t\t\tRVS.F.setUnsetSelected({unselect:ds.unselect, select:ds.select, val:obj.el.checked, rval:ds.rval, prval:ds.prval, prvalif:ds.prvalif});\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t};\r\n\r\n\tRVS.F.updateEasyInputs = function(obj) {\r\n\t\tobj.path = obj.path===undefined ? \"settings.\" : obj.path;\r\n\t\t// EASY INITS (GO THROUGH IN LOOP AND INITIALISE THE INPUTS)\r\n\t\tjQuery(obj.container).find('.easyinit').each(function(i) {\r\n\t\t\tRVS.F.updateEasyInput({el:this, path:obj.path, multiselection:obj.multiselection, root:obj.root});\r\n\t\t\tif (obj.trigger===\"init\" || obj.visualUpdate) {\r\n\t\t\t\tif (obj.trigger===\"init\") this.dispatchEvent(new Event('init', {'bubbles':true}));\r\n\t\t\t\tif (this.type===\"checkbox\") RVS.F.turnOnOffVisUpdate({input:this});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t};\r\n\r\n\r\n\t/****************************************************************************+\r\n\t\t-\tSET / GET OBJECT VALUES IN THE MAIN OBJECT STRUCTURE RECURSIVE \t-\r\n\t*****************************************************************************/\r\n\t// get deep value from path\r\n\tRVS.F.getDeepValue = function(obj, path) {\r\n\t\tif(typeof path === 'string')\r\n\t\t\tpath = path.split('.');\r\n\t\tif(path.length > 1) {\r\n\t\t\tvar prop = path.shift();\r\n\t\t\treturn obj.hasOwnProperty(prop) ? RVS.F.getDeepValue(obj[prop], path) : undefined;\r\n\t\t}\r\n\t\treturn obj.hasOwnProperty(path[0]) ? obj[path[0]] : undefined;\r\n\t}\r\n\r\n\t// write deep value from path\r\n\tRVS.F.writeDeepPath = function(obj, path, val) {\r\n\r\n\t\tif(typeof path !== 'string') return;\r\n\r\n\t\tvar paths = path.split('.'),\r\n\t\t\tlen = paths.length,\r\n\t\t\ttotal = len - 1,\r\n\t\t\tdata = obj;\r\n\t\tif(!len) return;\r\n\t\tfor(var i = 0; i < len; i++) {\r\n\t\t\tif(i < total) data = data[paths[i]];\r\n\t\t\telse data[paths[i]] = val;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tRVS.F.getConcVals = function(_,screen) {\r\n\t\treturn _.replace('#size#',screen).replace('#curlayer#',(RVS.selLayers!==undefined ? RVS.selLayers[0] : '#curlayer#')).replace('#slide#',RVS.S.slideId).replace('#curslidetrans#',RVS.S.slideTrans).replace('#actionindex#',RVS.S.actionIdx).replace('#targetlayer#',RVS.S.actionTrgtLayerId).replace('#frame#','timeline.frames.'+RVS.S.keyFrame).replace('#framekey#',RVS.S.keyFrame);\r\n\t}\r\n\r\n\t//***************************************************\r\n\t// GET THE VALUE OF THE OBJECT DEFINED BY THE PATH //\r\n\t//***************************************************\r\n\tRVS.F.getDeepVal = function(_) {\r\n\r\n\t\tif (_===undefined || _.path.indexOf('#targetlayer#')>=0 && (RVS.S.actionTrgtLayerId===undefined || RVS.S.actionTrgtLayerId===\"none\")) return;\r\n\t\treturn RVS.F.getDeepValue(_.root===undefined ? RVS.SLIDER : _.root, RVS.F.getConcVals(_.path,(_.screen===undefined ? RVS.screen : _.screen)));\r\n\t};\r\n\r\n\r\n\tRVS.F.minMaxCheck = function(_) {\r\n\t\t_.v = _.v!==\"wrong\" && _.max!==undefined ? Math.min(_.v,_.max) : _.v;\r\n\t\t_.v = _.v!==\"wrong\" && _.min!==undefined ? Math.max(_.v,_.min) : _.v;\r\n\t\treturn _.v;\r\n\t};\r\n\r\n\t// CHECK THE NUMMERIC INPUT FIELD, AND ALLOW ONLY VALUES AND SUFFIXES WITH CORRECT CONTENT\r\n\tRVS.F.checkNumInput = function(_) {\r\n\r\n\t\t// Split Numeric from Text first\r\n\t\tvar valisnum = RVS.F.isNumeric(_.val),\r\n\t\t\t_n = valisnum ? _.val : _.val.replace(/[^0-9\\.\\-]+/g,\"\"),\r\n\t\t\t_t = valisnum ? \"\" : _.val.replace(/[0-9\\.\\-]+/g,\"\"),\r\n\t\t\t_oldt = _.history!==undefined ? _.history.replace(/\\d+/,'') : \"px\",\r\n\t\t\t_a = _.allowed!==undefined ?_.allowed.toLowerCase().split(\",\") : [\"px\"],\r\n\t\t\t_s = \"\";\r\n\t\t_n = _n===\"\" ? \"wrong\" : _n;\r\n\t\t_t = _t.toLowerCase();\r\n\r\n\r\n\r\n\t\t// CHECK RANDOM VALUES\r\n\t\tif ((jQuery.inArray(\"random\",_a)>=0  && _t[0]===\"{\" && _t[_t.length-1]===\"}\") || (jQuery.inArray(\"cycle\",_a)>=0  && _t[0]===\"[\" && _t[_t.length-1]===\"]\") || (jQuery.inArray(\"dir\",_a)>=0  && (\"\"+_.val)[0]===\"(\")  &&  (\"\"+_.val)[(\"\"+_.val).length-1]===\")\") {\r\n\t\t\t_.val = _.val.replace(/[^[\\d||%||(||)||\\-||{||}||.||,||\\[||\\]]+/g,'');\r\n\t\t\treturn _.val;\r\n\t\t} else\r\n\t\tif (jQuery.inArray(\"#/#\",_a)>=0  && _t[0]===\"#\" && _t[_t.length-1]===\"#\" && _.val[2]===\"/\")\r\n\t\t\treturn _.val;\r\n\t\telse {\r\n\t\t\tfor (var i in _a) {\r\n\t\t\t\tif(!_a.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (_t == _a[i] || _t == \"-\"+_a[i]) _s = _a[i];\r\n\t\t\t}\r\n\t\t\tif (_n===\"wrong\" && _s===\"\" && _.val.length>0) {\r\n\r\n\t\t\t\treturn \"badvalue\";\r\n\t\t\t}\r\n\r\n\t\t\t_n = _n===\"wrong\" ? 0 : _n;\r\n\r\n\t\t\tif (_s===\"%\" || _s===\"px\" || _s===\"ms\" || _s===\"deg\" || _s===\"chars\" || _s===\"words\" || _s===\"char\" || _s===\"-%\" || _s===\"-px\" || _s===\"-ms\" || _s===\"-deg\" || _s===\"x\" || _s===\"x\") {\r\n\r\n\t\t\t\treturn RVS.F.minMaxCheck({v:_n,min:_.min,max:_.max}) + _s;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tif (_s!==\"\") {\r\n\r\n\t\t\t\treturn _s.toLowerCase(); //charAt(0).toUpperCase() + _s.slice(1).toLowerCase();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tif (_.val.length<=1 || _.val == _n) {\r\n\r\n\t\t\t\tif (jQuery.inArray(\"none\",_a)>=0 && _n===0) return \"none\";\r\n\t\t\t\t_oldt = jQuery.inArray(_oldt,_a)>=0 && (_oldt===\"px\" || _oldt===\"%\" || _oldt===\"ms\" || _oldt===\"deg\" || _oldt===\"char\" || _oldt===\"chars\" || _oldt===\"words\" || _s===\"x\" || _s===\"x\")? _oldt : jQuery.inArray(\"px\",_a)>=0 ? \"px\" : jQuery.inArray(\"ms\",_a)>=0  ? \"ms\" : jQuery.inArray(\"%\",_a)>=0  ? \"%\" : jQuery.inArray(\"deg\",_a)>=0  ? \"deg\" : jQuery.inArray(\"chars\",_a)>=0  ? \"chars\" : jQuery.inArray(\"words\",_a)>=0  ? \"words\": jQuery.inArray(\"x\",_a)>=0  ? \"x\": \"\";\r\n\t\t\t\treturn RVS.F.minMaxCheck({v:_n,min:_.min,max:_.max})+_oldt;\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn \"badvalue\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\t// Add Listeners to all SelectBoxes\r\n\tRVS.DOC.on('change init update focus','.tos2, .basicinput, .scblockinput, .slideinput, .sliderinput, .globalinput, .layerinput, .navinput, .navstyleinput, .indeplayerinput, .actioninput, .targetlayeractioninput',function(e) {\r\n\t\tvar\tcT = e.currentTarget,\r\n\t\t\tds = cT.dataset,\r\n\t\t\tv = cT.type===\"checkbox\" ? this.checked : this.value;\r\n\r\n\t\t// QUALITY CHECK\r\n\t\tif (ds.numeric) {\r\n\t\t\tv = RVS.F.checkNumInput({val:v, allowed:ds.allowed, history:ds.history, min:ds.min, max:ds.max});\r\n\t\t\tif (v===\"badvalue\") {\r\n\t\t\t\tcT.classList.add(\"badvalue\");\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tcT.classList.remove(\"badvalue\");\r\n\t\t\t}\r\n\t\t\tcT.value=v;\r\n\t\t\tds.history=cT.value;\r\n\t\t}\r\n\r\n\t\tif (ds.sanitize===\"true\") v = RVS.F.sanitize_input(v);\r\n\r\n\t\tif (cT.type!==undefined && cT.type.indexOf('select')>=0) {\r\n\r\n\t\t\tif (ds.select2rsId===undefined && (\" \"+cT.className).indexOf(' tos2')>=0) {\r\n\t\t\t\t// WPML LANG SELECTORS\r\n\t\t\t\tif (cT.className.indexOf('wpml_lang_selector')>=0) jQuery(cT).ddTP({  placeholder:\"Select From List\", pre: '<span><img src=\"#data#\" class=\"wpml-img-flag\" />',preData : 'src'\t});\r\n\t\t\t\tjQuery(cT).ddTP({placeholder:((\" \"+cT.className).indexOf(' searchbox')>=0 ? \"Enter or Select\" : \"Select From List\")});\r\n\t\t\t}\r\n\t\t\tif (cT.type===\"select-multiple\") {\r\n\t\t\t\tv = [];\r\n\t\t\t\tfor (var soi in cT.selectedOptions) {\r\n\t\t\t\t\tif (!cT.selectedOptions.hasOwnProperty(soi)) continue;\r\n\t\t\t\t\tv.push(cT.selectedOptions[soi].value)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// CHAIN REACTIONS\r\n\r\n\t\t//Trigger SHOW HIDE ELEMENTS\r\n\t\tif ((ds.showhide!==undefined || ds.show!==undefined || ds.hide!==undefined) && (cT.type!==\"radio\" || cT.checked))\r\n\t\t\tRVS.F.triggerShowHideDep(cT,v);\r\n\r\n\t\t// SET / UNSET SELECTED CONTAINERS BASED ON THE CURRENT VALUE\r\n\t\tif ((ds.unselect!==undefined || ds.select!==undefined) && (cT.type!==\"radio\" ||  cT.checked))\r\n\t\t\tRVS.F.setUnsetSelected({unselect:ds.unselect, select:ds.select, val:v, rval:ds.rval, prval:ds.prval, prvalif:ds.prvalif});\r\n\r\n\t\tif (ds.setclasson!==undefined || ds.class!==undefined) {\r\n\t\t\tif (cT.type!==\"radio\" || cT.checked)\r\n\t\t\t\tRVS.F.setUnsetClass({container:ds.setclasson===\"body\" ? document.body : document.getElementById(ds.setclasson), class:ds.class, inversclass:ds.inversclass, val:v, rval:ds.rval});\r\n\t\t}\r\n\r\n\t\t//DISABLE, ENABLE CONTAINERS\r\n\t\tif (ds.disable!==undefined || ds.enable!==undefined) {\r\n\t\t\tif (cT.type!==\"radio\" || cT.checked) RVS.F.setEnableDisable({disable:ds.disable, enable:ds.enable, switch:ds.disableenable===\"switch\", val:v});\r\n\r\n\t\t}\r\n\r\n\t\t//MAKE CONTAINERS AVAILABLE, UNAVAILABLE\r\n\t\tif (ds.available!==undefined || ds.unavailable!==undefined)\r\n\t\t\tif (cT.type!==\"radio\" ||  cT.checked)\r\n\t\t\t\tRVS.F.setUnAvailable({unavailable:ds.unavailable, available:ds.available, val:v});\r\n\r\n\t\t//UPDATE OTHER INPUTS\r\n\t\tif (ds.change!==undefined) {\r\n\t\t\tif (ds.changewhen!==undefined && ((v===ds.changewhen) || (v===true && ds.changewhen===\"true\") ||  (v===false && ds.changewhen===\"false\")))\r\n\t\t\t\tRVS.F.setInputTo({field:ds.change, val:ds.changeto, path:ds.path});\r\n\r\n\t\t\tif (ds.changewhennot!==undefined && (v!==ds.changewhennot))\r\n\t\t\t\tif (!(((v===false || v===\"false\") && ds.changewhennot+\"\"===\"false\") || ((v===true || v===\"true\") && ds.changewhennot+\"\"===\"true\")))\r\n\t\t\t\t\tRVS.F.setInputTo({field:ds.change, val:ds.changeto, path:ds.path});\r\n\t\t}\r\n\r\n\t\t// UPDATE A TEXT OF ANY CONTAINER WITH THE NEW VALUE\r\n\t\tif (ds.updatetext!==undefined) document.getElementById(ds.updatetext.replace(\"#\",\"\")).innerText = v;\r\n\r\n\t\t// WHAT EVENT\r\n\t\tswitch (e.type) {\r\n\t\t\tcase \"change\":\r\n\r\n\t\t\t\tif (ds.r!==undefined) {\r\n\t\t\t\t\t// replaces block above\r\n\t\t\t\t\t// Check Value against some Function, and update it before pushing it into Object and Undo\r\n\t\t\t\t\tif (ds.valcheck!==undefined && RVS.F.hasOwnProperty(ds.valcheck) && typeof RVS.F[ds.valcheck] === 'function') {\r\n\t\t\t\t\t\tvar v = RVS.F[ds.valcheck](v);\r\n\t\t\t\t\t\tif (ds.numeric) v = RVS.F.checkNumInput({val:v, allowed:ds.allowed, history:ds.history, min:ds.min, max:ds.max});\r\n\t\t\t\t\t\tthis.value = v;\r\n\t\t\t\t\t\tds.history = v;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((\" \"+this.className).indexOf(\" scblockinput\")>=0) RVS.F.writeDeepPath(RVS.SC.BLOCK,ds.r, v);\r\n\r\n\r\n\t\t\t\t\t//Update Value of Object in Slide Settings\r\n\t\t\t\t\tif ((\" \"+this.className).indexOf(\" slideinput\")>=0)\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".slide.\"+ds.r,val:v,evt:ds.evt, evtparam:ds.evtparam});\r\n\r\n\t\t\t\t\t//Update Value of Object in Navigation Presets\r\n\t\t\t\t\tif ((\" \"+this.className).indexOf(\" navstyleinput\")>=0) {\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:ds.r+\"-def\",val:true});\r\n\t\t\t\t\t\tjQuery(\"#\"+e.currentTarget.id+'-def').prop('checked','checked');\r\n\t\t\t\t\t\tRVS.F.turnOnOff(RVS.F.closestClass(document.getElementById(e.currentTarget.id+'-def'),'tponoffwrap'),false);\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:ds.r,val:v,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//Update Value of Object in Global Settings\r\n\t\t\t\t\tif ((\" \"+this.className).indexOf(\" globalinput\")>=0) RVS.F.updateSliderObj({path:ds.r,val:v,evt:ds.evt, evtparam:ds.evtparam});\r\n\r\n\r\n\t\t\t\t\t//Update Value of Object in Slider Settings\r\n\t\t\t\t\tif ((\" \"+this.className).indexOf(\" sliderinput\")>=0) RVS.F.updateSliderObj({path:\"settings.\"+ds.r,val:v,evt:ds.evt, evtparam:ds.evtparam});\r\n\r\n\r\n\t\t\t\t\t//LAYER INPUT CHANGE, ALL LAYERS NEED TO BE UPDATES\r\n\t\t\t\t\tif ((\" \"+this.className).indexOf(\" layerinput\")>=0)\r\n\t\t\t\t\t\tif (ds.updateviaevt!=='true' && ds.updateviaevt!=true)\r\n\t\t\t\t\t\t\tRVS.F.updateLayerObj({path:ds.r,val:v,evt:ds.evt, evtparam:ds.evtparam});\r\n\r\n\r\n\t\t\t\t\t//ACTION INPUT CHANGE\r\n\t\t\t\t\tif ((\" \"+this.className).indexOf(\" actioninput\")>=0) {\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+RVS.selLayers[0]+\".\"+ds.r,val:v,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//ACTION's TARGET LAYER INPUT CHANGE\r\n\t\t\t\t\tif ((\" \"+this.className).indexOf(\" targetlayeractioninput\")>=0) {\r\n\t\t\t\t\t\tif (RVS.S.actionTrgtLayerId!==undefined && (\"\"+RVS.S.actionTrgtLayerId).indexOf(\"static-\")>=0)\r\n\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.SLIDER.staticSlideId+\".layers.\"+(\"\"+RVS.S.actionTrgtLayerId).replace(\"static-\",\"\")+\".\"+ds.r,val:v,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+RVS.S.actionTrgtLayerId+\".\"+ds.r,val:v,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//LAYER INPUT CHANGE, FULL PATH IS DEFINED, SINGLE LAYER UPDATE\r\n\t\t\t\t\tif ((\" \"+this.className).indexOf(\" indeplayerinput\")>=0)\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+ds.r,val:v,evt:ds.evt, evtparam:ds.evtparam});\r\n\r\n\r\n\t\t\t\t\t// Values with Navigation Style Fields should change to Custom Preset\r\n\t\t\t\t\tif ((\" \"+this.className).indexOf(\" presetToCustom\")>=0) {\r\n\t\t\t\t\t\tjQuery('#sr_'+ds.evtparam+'_style_preset').val(\"\").ddTP('change');\r\n\t\t\t\t\t\tRVS.SLIDER.settings.nav[ds.evtparam].preset=\"\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//Trigger Also Other Inputs based on the Change\r\n\t\t\t\t\tif (this.dataset.triggerinp!==undefined)\r\n\t\t\t\t\t\tRVS.F.triggerInput({inp:this.dataset.triggerinp, dep:v, val:this.dataset.triggerinpval, when:this.dataset.triggerwhen, whennot:this.dataset.triggerwhennot});\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ((\" \"+this.className).indexOf(\" callEvent\")>=0) jQuery(document.body).trigger(ds.evt,{event:e,val:v,eventparam:ds.evtparam});\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"focusin\":\r\n\t\t\t\t//Check if Focus Based Event need to be triggered\r\n\t\t\t\tif (ds.focusevt!==undefined) RVS.DOC.trigger(ds.focusevt,{event:e,val:v,eventparam:ds.focusevtparam});\r\n\r\n\t\t\t\t//Input Element has Focused\r\n\t\t\t\tif (ds.responsive!==undefined) {\r\n\t\t\t\t\tRVS.S.respInfoBar.visible = true;\r\n\t\t\t\t\tRVS.F.showFieldResponsiveValues(this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Put Cursor to the Right Position, Or Select all Input\r\n\t\t\t\tif (ds.cursortoclick==\"true\")\r\n\t\t\t\t\t window.setTimeout(function() {\r\n\t\t\t\t        moveCaretToEnd(this);\r\n\t\t\t\t    }, 1);\r\n\t\t\t\t else\r\n\t\t\t\t\tjQuery(this).trigger('select');\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\t/* MOVE CURSOR TO CLICK POSITION */\r\n\tfunction moveCaretToEnd(el) {\r\n\t    if (typeof el.selectionStart == \"number\") {\r\n\t        el.selectionStart = el.selectionEnd = el.value.length;\r\n\t    } else if (typeof el.createTextRange != \"undefined\") {\r\n\t        el.focus();\r\n\t        var range = el.createTextRange();\r\n\t        range.collapse(false);\r\n\t        range.select();\r\n\t    }\r\n\t}\r\n\r\n\r\n\t/**********************************************\r\n\t\t-\tSHOW / HIDE INFO AND WAIT A MINUTE\t-\r\n\t**********************************************/\r\n\r\n\tRVS.F.showInfo = function(obj) {\r\n\r\n\t\tif (obj.type==\"register\" && jQuery('#rbm_activate_slider').length>0) return;\r\n\t\tvar info = obj.type==\"register\" ? obj.content : '<i class=\"material-icons info\">info</i>';\r\n\t\tif (obj.type==\"info\") info = '<i class=\"material-icons info\">info</i>';\r\n\t\tif (obj.type==\"goodtoknow\") info = '<i class=\"material-icons goodtoknow\">mode_comment</i>';\r\n\t\tif (obj.type==\"warning\") info = '<i class=\"material-icons cancel\">close</i>';\r\n\t\tif (obj.type==\"success\") info = '<i class=\"material-icons ok\">done</i>';\r\n\r\n\r\n\t\tobj.showdelay = obj.showdelay != undefined ? obj.showdelay : 0;\r\n\t\tobj.hidedelay = obj.hidedelay != undefined ? obj.hidedelay : 0;\r\n\t\tif (jQuery('#rb_maininfo_wrap').length===0) {\r\n\t\t\tjQuery(document.body).append('<div id=\"rb_maininfo_wrap\"></div>');\r\n\t\t}\r\n\t\t// CHECK IF THE TOOLBOX WRAPPER EXIST ALREADY\r\n\t\tif (jQuery('#eg-toolbox-wrapper').length==0) {\r\n\t\t\tjQuery('#rb_maininfo_wrap').append('<div id=\"eg-toolbox-wrapper\"></div>').appendTo(jQuery(document.body));\r\n\t\t\t// jQuery('#rb_maininfo_wrap').appendTo(jQuery(document.body));\r\n\t\t}\r\n\r\n\t\t// ADD NEW INFO BOX\r\n\t\tif (obj.type===\"register\")\r\n\t\t\tjQuery('#eg-toolbox-wrapper').append(info);\r\n\t\telse\r\n\t\t\tjQuery('#eg-toolbox-wrapper').append('<div class=\"eg-toolbox newadded\">'+info+obj.content+'</div>');\r\n\r\n\t\tvar nt = jQuery('#eg-toolbox-wrapper').find('.eg-toolbox.newadded');\r\n\t\tnt.removeClass('newadded');\r\n\r\n\t\t// ANIMATE THE INFO BOX\r\n\t\ttpGS.gsap.fromTo(nt,0.5,{y:-50,autoAlpha:0,transformOrigin:\"50% 50%\", transformPerspective:900, rotationX:-90},{autoAlpha:1,y:0,rotationX:0,ease:\"back.out\",delay:obj.showdelay});\r\n\r\n\r\n\t\tif (obj.hideon != \"event\") {\r\n\t\t\tif (obj.type==\"register\")\r\n\t\t\t\tnt.find('.rbmas_close').on('click',function() {tpGS.gsap.to(nt,0.3,{x:200,ease:\"power3.inOut\",autoAlpha:0,onComplete:function() {nt.remove();}});});\r\n\t\t\telse\r\n\t\t\t\tnt.on('click',function() {tpGS.gsap.to(nt,0.3,{x:200,ease:\"power3.inOut\",autoAlpha:0,onComplete:function() {nt.remove();}});})\r\n\r\n\t\t\tif (obj.hidedelay !=0 && obj.hideon!=\"click\")\r\n\t\t\t\ttpGS.gsap.to(nt,0.3,{x:200,ease:\"power3.inOut\",autoAlpha:0,delay:obj.hidedelay + obj.showdelay, onComplete:function() {nt.remove();}});\r\n\t\t} else  {\r\n\t\t\tjQuery('#eg-toolbox-wrapper').on(obj.event,function() {\r\n\t\t\t\ttpGS.gsap.to(nt,0.3,{x:200,ease:\"power3.inOut\",autoAlpha:0,onComplete:function() {nt.remove();}});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.showRegisterSliderInfo = function() {\r\n\t\tif (window.rbmContent===undefined) {\r\n\t\t\twindow.rbmContent =  '<div id=\"rbm_activate_slider\" class=\"eg-toolbox newadded _TPRB_\">';\r\n\t\t\twindow.rbmContent += '<div class=\"rbmas_close\"><i class=\"material-icons\">close</i></div>';\r\n\t\t\twindow.rbmContent += '<div class=\"rbmas_def_page\">';\r\n\t\t\twindow.rbmContent += '\t<div class=\"rbmas_title\">'+RVS_LANG.active_sr_to_access+'</div>';\r\n\t\t\twindow.rbmContent += '\t<div class=\"rbmas_benef\"><i class=\"material-icons\">check</i>'+RVS_LANG.active_sr_tmp_obl+'</div>';\r\n\t\t\twindow.rbmContent += '\t<div class=\"rbmas_benef\"><i class=\"material-icons\">check</i>'+RVS_LANG.addons+'</div>';\r\n\t\t\twindow.rbmContent += '\t<div class=\"rbmas_benef\"><i class=\"material-icons\">check</i>'+RVS_LANG.active_sr_inst_upd+'</div>';\r\n\t\t\twindow.rbmContent += '\t<div class=\"rbmas_benef\"><i class=\"material-icons\">check</i>'+RVS_LANG.active_sr_one_on_one+'</div>';\r\n\t\t\twindow.rbmContent += '\t<div class=\"dcenter\">';\r\n\t\t\twindow.rbmContent += '\t\t<div class=\"div30\"></div><div id=\"rbmas_active_plugin_now\" style=\"width:220px\" class=\"basic_action_button longbutton basic_action_lilabutton\"><i class=\"material-icons\">vpn_key</i>'+(RVS.ENV.selling ? RVS_LANG.ihavelicensekey : RVS_LANG.ihavepurchasecode)+'</div>';\r\n            window.rbmContent += '        <div class=\"div0\"></div><a href=\"'+(RVS.ENV.selling ? 'https://account.sliderrevolution.com/portal/pricing/?utm_source=admin&utm_medium=button&utm_campaign=srusers&utm_content=buykey' : 'https://codecanyon.net/item/slider-revolution-responsive-magento-extension/9332896?ref=nwdthemes&license=regular&open_purchase_for_item_id=9332896&purchasable=source') +'\" target=\"_blank\" style=\"width:220px\" class=\"basic_action_button longbutton basic_action_coloredbutton\"><i class=\"material-icons\">shopping_cart</i>'+(RVS.ENV.selling ? RVS_LANG.getlicensekey : RVS_LANG.getpurchasecode)+'</a>';\r\n            window.rbmContent += '\t</div>';\r\n\t\t\twindow.rbmContent += '</div>';\r\n\t\t\twindow.rbmContent += '<div class=\"rbmas_activate_page\">';\r\n\t\t\twindow.rbmContent += '\t<div class=\"rbmas_title\">'+(RVS.ENV.selling ? RVS_LANG.active_sr_plg_activ_key : RVS_LANG.active_sr_plg_activ)+'</div>';\r\n\t\t\twindow.rbmContent += '\t<input class=\"codeinput\" id=\"rbmas_purchasekey\" placeholder=\"'+(RVS.ENV.selling ? RVS_LANG.enterlicensekey : RVS_LANG.enterpurchasecode)+'\">';\r\n\t\t\twindow.rbmContent += '\t<purplebutton id=\"rbmas_activateplugin\" class=\"fullwidth mcg_next_page\"><i class=\"material-icons\">vpn_key</i>'+(RVS.ENV.selling ? RVS_LANG.registerKey : RVS_LANG.registerCode)+'</purplebutton>';\r\n\t\t\twindow.rbmContent += '\t<div class=\"dcenter\">';\r\n\t\t\twindow.rbmContent += '\t\t<div class=\"div65\"></div><div class=\"rbmas_solidtitle\">'+(RVS.ENV.selling ? RVS_LANG.onelicensekey : RVS_LANG.onepurchasekey)+'</div>';\r\n\t\t\twindow.rbmContent += '\t\t<div class=\"div30\"></div><div class=\"rbmas_solidtext\">'+(RVS.ENV.selling ? RVS_LANG.onelicensekey_info : RVS_LANG.onepurchasekey_info)+'</div>';\r\n            window.rbmContent += '        <div class=\"div30\"></div><a '+(RVS.ENV.selling ? 'style=\"width:185px !important; margin-right:10px;\"' : '')+' href=\"'+(RVS.ENV.selling ? 'https://account.sliderrevolution.com/portal/pricing/' : 'https://codecanyon.net/item/slider-revolution-responsive-magento-extension/9332896?ref=nwdthemes&license=regular&open_purchase_for_item_id=9332896&purchasable=source') +'\" target=\"_blank\" rel=\"noopener\" class=\"basic_action_button longbutton basic_action_coloredbutton\"><i class=\"material-icons\">shopping_cart</i>'+(RVS.ENV.selling ? RVS_LANG.getlicensekey : RVS_LANG.getpurchasecode)+'</a>';\r\n            if (RVS.ENV.selling)\r\n                window.rbmContent += '<a href=\"https://account.sliderrevolution.com/portal/\" target=\"_blank\" rel=\"noopener\" style=\"width:185px !important\" class=\"basic_action_button longbutton basic_action_coloredbutton basic_action_coloredpurplebutton\"><i class=\"material-icons\">person</i>'+RVS_LANG.membersarea+'</a>';\r\n            window.rbmContent += '\t</div>';\r\n\t\t\twindow.rbmContent += '</div>';\r\n\t\t\twindow.rbmContent += '<div id=\"rbm_activate_slider_deco\"></div>';\r\n\t\t\twindow.rbmContent += '<div>';\r\n\t\t\tRVS.DOC.on('click','#rbmas_active_plugin_now',function() {\r\n\t\t\t\tjQuery('#rbm_activate_slider').addClass(\"rbmas_show_activate\");\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}\r\n\t\tRVS.F.showInfo({content:window.rbmContent, type:\"register\", showdelay:0, hidedelay:0, hideon:\"\", event:\"\" });\r\n\t};\r\n\r\n \tRVS.F.showWaitAMinute = function(obj) {\r\n\t\tvar wm = jQuery('#waitaminute');\r\n\t\tRVS.S.wamCounter = RVS.S.wamCounter===undefined ? 0 : RVS.S.wamCounter;\r\n\r\n\t\t// SHOW AND HIDE WITH DELAY\r\n\t\tif (obj.delay!=undefined) {\r\n\t\t\tRVS.S.wamCounter++;\r\n\t\t\ttpGS.gsap.to(wm,0.3,{autoAlpha:1,ease:\"power3.inOut\"});\r\n\t\t\ttpGS.gsap.set(wm,{display:\"block\"});\r\n\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tRVS.S.wamCounter--;\r\n\t\t\t\tif (RVS.S.wamCounter===0)\r\n\t\t\t\t\ttpGS.gsap.to(wm,0.3,{autoAlpha:0,ease:\"power3.inOut\",onComplete:function() {\r\n\t\t\t\t\t\ttpGS.gsap.set(wm,{display:\"block\"});\r\n\t\t\t\t\t}});\r\n\t\t\t},obj.delay);\r\n\t\t}\r\n\r\n\t\t// SHOW IT\r\n\t\tif (obj.fadeIn != undefined) {\r\n\t\t\tif (wm && wm.length>0) {\r\n\t\t\t\ttpGS.gsap.to(wm,obj.fadeIn/1000,{autoAlpha:1,ease:\"power3.inOut\"});\r\n\t\t\t\ttpGS.gsap.set(wm,{display:\"block\"});\r\n\t\t\t}\r\n\t\t\tRVS.S.wamCounter++;\r\n\t\t}\r\n\r\n\t\t// HIDE IT\r\n\t\tif (obj.fadeOut != undefined) {\r\n\t\t\tRVS.S.wamCounter--;\r\n\t\t\tRVS.S.wamCounter=RVS.S.wamCounter<0 ? 0 : RVS.S.wamCounter;\r\n\t\t\tif (RVS.S.wamCounter<=0 && wm && wm.length>0)\r\n\t\t\t\ttpGS.gsap.to(wm,obj.fadeOut/1000,{autoAlpha:0,ease:\"power3.inOut\",onComplete:function() { tpGS.gsap.set(wm,{display:\"block\"});}});\r\n\t\t}\r\n\r\n\t\t// CHANGE TEXT\r\n\t\tif (obj.text != undefined) {\r\n\t\t\tswitch (obj.text) {\r\n\t\t\t\tcase \"progress1\":\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\twm.html('<div class=\"waitaminute-message\">'+obj.text+'</div>');\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\twm.html('<div class=\"waitaminute-message\">'+RVS_LANG.please_wait_a_moment+'</div>');\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t };\r\n\r\n\t/*********************************************\r\n\t\t-\tON OFF SWITCH BUTTON MANAGEMENT\t-\r\n\t*********************************************/\r\n\r\n\t/*\r\n\tTurn On/OFF CheckBox Buttons Handling\r\n\t*/\r\n\tRVS.F.turnOnOff = function (btn,change) {\r\n\t\tvar i = btn.getElementsByTagName('INPUT')[0];\r\n\t\tif (i.checked===true) {\r\n\t\t\tif (change) {\r\n\t\t\t\ti.checked = false;\r\n\t\t\t\ti.dispatchEvent(new Event('change',{\"bubbles\":true}));\r\n\t\t\t\tbtn.classList.add(\"off\");\r\n\t\t\t} else {\r\n\t\t\t\tbtn.classList.remove(\"off\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (change) {\r\n\t\t\t\ti.checked = true;\r\n\t\t\t\ti.dispatchEvent(new Event('change',{\"bubbles\":true}));\r\n\t\t\t\tbtn.classList.remove(\"off\");\r\n\t\t\t}  else {\r\n\t\t\t\tbtn.classList.add(\"off\");\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tON OFF VISIUAL UPDATE\r\n\t*/\r\n\tRVS.F.turnOnOffVisUpdate = function (obj) {\r\n\t\tobj.btn = obj.btn===undefined ? RVS.F.closestClass(obj.input,'tponoff_inner') : obj.btn;\r\n\t\tif (obj.btn===null || obj.btn===undefined) return;\r\n\t\tobj.wrap = RVS.F.closestClass(obj.btn,'tponoffwrap');\r\n\t\tobj.input = obj.input===undefined ? obj.btn.getElementsByTagName('INPUT')[0] : obj.input;\r\n\t\tif (obj.input.checked===true) {\r\n\t\t\tobj.wrap.classList.add('on');\r\n\t\t\tobj.wrap.classList.remove('off');\r\n\t\t} else {\r\n\t\t\tobj.wrap.classList.add('off');\r\n\t\t\tobj.wrap.classList.remove('on');\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\t// ON OFF SWITCH INITIALISATION\r\n\tRVS.F.initOnOff = function(el) {\r\n\r\n\t\tel = el===undefined ? \"document\" : el[0]===undefined ? el : el[0];\r\n\t\tif (el===\"document\"  && RVS.S.initOnOffList.document===undefined) RVS.S.initOnOffList.document = true;\r\n\t\tif (el!==\"document\" && RVS.S.initOnOffList[el.id]===undefined) RVS.S.initOnOffList[el.id] = el;\r\n\r\n\t\tif (RVS.S.initOnOffListRaff!==true) {\r\n\t\t\tRVS.S.initOnOffListRaff = true;\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\tif (RVS.S.initOnOffList.document!==undefined) {\r\n\t\t\t\t\tRVS.F.initOnOffRAF(document);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i in RVS.S.initOnOffList) {\r\n\t\t\t\t\t\tif (!RVS.S.initOnOffList.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tRVS.F.initOnOffRAF(RVS.S.initOnOffList[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tRVS.S.initOnOffList = {};\r\n\t\t\t\tdelete RVS.S.initOnOffListRaff;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.initOnOffRAF = function(el) {\r\n\t\tvar checks = el.querySelectorAll(\"input[type='checkbox']\");\r\n\t\tfor (var i in checks) {\r\n\t\t \tif (!checks.hasOwnProperty(i)) continue;\r\n\t\t \tif (checks[i].className.indexOf('simplechkbx')==-1 && checks[i].className.indexOf('tponoff')==-1) {\r\n\t\t \t\tchecks[i].className +=' tponoff';\r\n\t\t \t\tvar _wrap = RVS.F.cE({cN:\"tponoffwrap\"}),\r\n\t\t \t\t\t_inner = RVS.F.cE({cN:\"tponoff_inner\"}),\r\n\t\t \t\t\t_on = RVS.F.cE({cN:\"tponoff_on\"}),\r\n\t\t \t\t\t_off = RVS.F.cE({cN:\"tponoff_off\"});\r\n\t\t \t\t_on.textContent = \"On\";\r\n\t\t \t\t_off.textContent = \"Off\";\r\n\t\t \t\t_inner.appendChild(_off);\r\n\t\t \t\t_inner.appendChild(_on);\r\n\t\t \t\t_wrap.appendChild(_inner);\r\n\t\t \t\t_wrap  = checks[i].parentNode.insertBefore(_wrap, checks[i]);\r\n\t\t \t\t_on.appendChild(checks[i]);\r\n\r\n\t\t \t}\r\n\t\t}\r\n\r\n\t\tif (onOffListen===undefined) {\r\n\t\t\tonOffListen = true;\r\n\t\t\tRVS.DOC.on('click','.tponoffwrap',function() {\r\n\t\t\t\tRVS.F.turnOnOff(this,true);\r\n\t\t\t});\r\n\t\t}\r\n\t\tRVS.F.updateAllOnOff();\r\n\t}\r\n\r\n\t/* UPDATE ALL ONOFF BUTTONS */\r\n\tRVS.F.updateAllOnOff = function() {\r\n\t\tif (RVS.S.updateingAllOnOff===undefined) {\r\n\t\t\tRVS.S.updateingAllOnOff=true;\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\tjQuery('.tponoffwrap').each(function() { RVS.F.turnOnOff(this,false);});\r\n\t\t\t\tdelete RVS.S.updateingAllOnOff;\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n\r\n\r\n\t/* HELP EXPORTER */\r\n\tRVS.F.getAllShortCodes = function() {\r\n\t\tconsole.log(\"\");\r\n\t\tconsole.log(\"%c -------  INSERT SHORTCODE PARAMETERS INTO TEMPLATE LIBRARY  --------\",\"background:#222;color:#bada55\");\r\n\t\tconsole.log(\"\");\r\n\t\tjQuery('.slider_slug').find('input').each(function() {\r\n\t\t\tvar _ = RVS.SC.parseShortCode(this.value),txt=\"\";\r\n\r\n\t\t\tif (_!==undefined && _.attributes!==undefined) {\r\n\t\t\t\tvar _ = _.attributes;\r\n\t\t\t\tif (_.usage!==undefined) txt += ' usage=\"'+_.usage+'\"';\r\n\t\t\t\tif (_.modal!==undefined) txt += ' modal=\"'+_.modal+'\"';\r\n\t\t\t\tif (_.offset!==undefined) txt += ' offset=\"'+_.offset+'\"';\r\n\t\t\t\tif (_.layout!==undefined) txt += ' layout=\"'+_.layout+'\"';\r\n\t\t\t\tif (_.zindex!==undefined) txt += ' zindex=\"'+_.zindex+'\"';\r\n\t\t\t\tif (txt!==\"\" && txt!==undefined) {\r\n\t\t\t\t\tconsole.log(\"%c====   \"+_.alias+\"   ==== \",\"background:#222;font-size:13px; line-height:15px;\");console.log(\"%c\"+txt,\"background:#222;color:#c0392b;font-size:10px; line-height:15px;\");console.log(\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tconsole.log(\"%c -------------------------------------------------------------------\",\"background:#222;color:#bada55\");\r\n\t}\r\n\r\n\r\n\r\n\t/*********************************************\r\n\t\t-\tAJAX / ERROR AND SUCCESS MESSAGES -\r\n\t**********************************************/\r\n\r\n\tRVS.F.ajaxRequest = function(action,data,successFunction,hideOverlay,hideError,waitMessage,hideSuccess){\r\n\t\tvar objData = {\r\n\t\t\taction:RVS.ENV.plugin_dir+\"_ajax_action\",\r\n\t\t\tclient_action:action,\r\n\t\t\tnonce:RVS.ENV.nonce,\r\n\t\t\tform_key:window.FORM_KEY,\r\n\t\t\tdata:data\r\n\t\t};\r\n\r\n\t\thideErrorMessage();\r\n\t\tshowAjaxLoader();\r\n\t\thideAjaxButton();\r\n\r\n\t\tif(hideOverlay===undefined)\r\n\t\t\tif (waitMessage!==undefined)\r\n\t\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:waitMessage});\r\n\t\t\telse\r\n\t\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.please_wait_a_moment});\r\n\r\n\t\tjQuery.ajax({\r\n\t\t\ttype:\"post\",\r\n\t\t\turl:ajaxurl,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata:objData,\r\n\t\t\tsuccess:function(response){\r\n\r\n\t\t\t\tif(hideOverlay===undefined && !response.is_redirect)\r\n\t\t\t\t\tRVS.F.showWaitAMinute({fadeOut:500});\r\n\r\n\t\t\t\thideAjaxLoader();\r\n\r\n\t\t\t\tif(!response){ RVS.F.showErrorMessage(\"Empty ajax response!\"); return(false);}\r\n\t\t\t\tif(response == -1){RVS.F.showErrorMessage(\"ajax error!!!\"); return(false);}\r\n\t\t\t\tif(response == 0){ RVS.F.showErrorMessage(\"ajax error, action: <b>\"+action+\"</b> not found\");return(false);}\r\n\r\n\t\t\t\tif(response.success == undefined){RVS.F.showErrorMessage(\"The 'success' param is a must!\");return(false);}\r\n\r\n\t\t\t\tif(response.success == false){\r\n\r\n\t\t\t\t\tif(hideError===undefined){RVS.F.showErrorMessage(response.message);return(false);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(typeof successFunction == \"function\"){\r\n\t\t\t\t\t\t\tsuccessFunction(response);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\t//success actions:\r\n\r\n\t\t\t\t\t//run a success event function\r\n\t\t\t\t\tif(typeof successFunction == \"function\"){\r\n\t\t\t\t\t\tsuccessFunction(response);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(response.message && hideSuccess!==true)\r\n\t\t\t\t\t\tshowSuccessMessage(response.message);\r\n\r\n\t\t\t\t\tif(response.is_redirect)\r\n\t\t\t\t\t\tlocation.href=response.redirect_url;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror:function(jqXHR, textStatus, errorThrown){\r\n\r\n\t\t\t\tif(hideOverlay===undefined)\r\n\t\t\t\t\tRVS.F.showWaitAMinute({fadeOut:500});\r\n\r\n\t\t\t\thideAjaxLoader();\r\n\t\t\t\tswitch(action) {\r\n\t\t\t\t\tcase \"preview_slider\":\r\n                        jQuery('#rbm_preview .rbm_close').trigger('click');\r\n                        RVS.F.showInfo({content:RVS_LANG.previewnotworking, type:\"info\", showdelay:0, hidedelay:5, hideon:\"\", event:\"\" });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"check_system\":\r\n\t\t\t\t\t\tRVS.F.showInfo({content:RVS_LANG.checksystemnotworking, type:\"info\", showdelay:0, hidedelay:5, hideon:\"\", event:\"\" });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(textStatus == \"parsererror\") RVS.F.debug(jqXHR.responseText);\r\n\t\t\t\t\t\tRVS.F.showErrorMessage(\"Ajax Error!!! \" + textStatus);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t};//ajaxrequest\r\n\r\n\r\n\tRVS.F.showErrorMessage = function(htmlError){\r\n\t\tRVS.F.showInfo({content:htmlError, type:\"warning\", showdelay:0, hidedelay:3, hideon:\"\", event:\"\" });\r\n\t\tshowAjaxButton();\r\n\t};\r\n\tRVS.F.setErrorMessageID = function(id){\r\n\t\terrorMessageID = id;\r\n\t};\r\n\r\n\tRVS.F.setSuccessMessageID = function(id){\r\n\t\tsuccessMessageID = id;\r\n\t};\r\n\r\n\tRVS.F.hideSuccessMessage = function(){\r\n\t\tif(successMessageID){\r\n\t\t\tjQuery(\"#\"+successMessageID).hide();\r\n\t\t\tsuccessMessageID = null;\t//can be used only once.\r\n\t\t}\r\n\t\telse\r\n\t\t\tjQuery(\"#success_message\").slideUp(\"slow\").fadeOut(\"slow\");\r\n\r\n\t\tshowAjaxButton();\r\n\t};\r\n\r\n\tvar showAjaxLoader = function(){\r\n\t\tif(ajaxLoaderID)\r\n\t\t\tjQuery(\"#\"+ajaxLoaderID).show();\r\n\t};\r\n\r\n\tvar hideAjaxLoader = function(){\r\n\t\tif(ajaxLoaderID){\r\n\t\t\tjQuery(\"#\"+ajaxLoaderID).hide();\r\n\t\t\tajaxLoaderID = null;\r\n\t\t}\r\n\t};\r\n\r\n\tvar hideAjaxButton = function(){\r\n\t\tif(ajaxHideButtonID){\r\n\t\t\tvar doHide = ajaxHideButtonID.split(',');\r\n\t\t\tif(doHide.length > 1){\r\n\t\t\t\tfor(var i = 0; i < doHide.length; i++){\r\n\t\t\t\t\tjQuery(\"#\"+doHide[i]).hide();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tjQuery(\"#\"+ajaxHideButtonID).hide();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar showAjaxButton = function(){\r\n\t\tif(ajaxHideButtonID){\r\n\t\t\tvar doShow = ajaxHideButtonID.split(',');\r\n\t\t\tif(doShow.length > 1){\r\n\t\t\t\tfor(var i = 0; i < doShow.length; i++){\r\n\t\t\t\t\tjQuery(\"#\"+doShow[i]).show();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tjQuery(\"#\"+ajaxHideButtonID).show();\r\n\t\t\t}\r\n\t\t\tajaxHideButtonID = null;\r\n\t\t}\r\n\t};\r\n\r\n\tvar hideErrorMessage = function(){\r\n\t\tif(errorMessageID !== null){\r\n\t\t\tjQuery(\"#\"+errorMessageID).hide();\r\n\t\t\terrorMessageID = null;\r\n\t\t}else\r\n\t\t\tjQuery(\"#error_message\").hide();\r\n\t};\r\n\r\n\tvar showSuccessMessage = function(htmlSuccess){\r\n\r\n\t\tRVS.F.showInfo({content:htmlSuccess, type:\"success\", showdelay:0, hidedelay:1, hideon:\"\", event:\"\" });\r\n\r\n\t\tshowAjaxButton();\r\n\t};\r\n\r\n\r\n})();\r\n\r\n\r\n// FIX FOR NOT USED GLOBAL FUNCTIONS\r\nwindow.UniteLayersRev =  {addon_callbacks: []};\r\nUniteLayersRev.addPreventLeave = UniteLayersRev.add_layer_actions = UniteLayersRev.add_layer_change = function() { console.log(\"Function is depricated. Please Update Addons\");};\r\n","Nwdthemes_Revslider/admin/assets/js/modules/optimizer.js":"/*!\r\n * REVOLUTION 6.3.3 UTILS OPTMIZE CONTENT\r\n * @version: 2.0 (08.12.2020)\r\n * @author ThemePunch\r\n*/\r\n\r\n/**********************************\r\n\t-\tGLOBAL VARIABLES\t-\r\n**********************************/\r\n;window.RVS = window.RVS === undefined ? {} : window.RVS;\r\nRVS.F = RVS.F === undefined ? {} : RVS.F;\r\nRVS.ENV = RVS.ENV === undefined ? {} : RVS.ENV;\r\nRVS.LIB = RVS.LIB === undefined ? {} : RVS.LIB;\r\nRVS.V = RVS.V === undefined ? {} : RVS.V;\r\nRVS.S = RVS.S === undefined ? {} : RVS.S;\r\nRVS.C = RVS.C === undefined ? {} : RVS.C;\r\nRVS.WIN = RVS.WIN === undefined ? jQuery(window) : RVS.WIN;\r\n\r\nRVS.DOC = RVS.DOC === undefined ? jQuery(document) : RVS.DOC;\r\nRVS.OZ = RVS.OZ === undefined ? {} : RVS.OZ;\r\n\r\n/**********************************\r\n\t-\tOPTIMIZER FUNCTIONS\t-\r\n********************************/\r\n(function() {\r\n\t/*\r\n\tOPEN OPTIMIZER\r\n\t*/\r\n\tRVS.F.openOptimizer = function(_) {\r\n\t\toptimizerListener();\r\n\t\tif (_!==undefined && ((_.sliderid!==undefined && _.sliderid!==\"\") || (_.alias!==undefined && _.alias!==\"\"))) {\r\n\r\n\t\t\tRVS.F.showWaitAMinute({fadeIn:0,text:RVS_LANG.loadingcontent});\r\n\t\t\tvar params = {};\r\n\t\t\tif (_.alias!==undefined && _.alias!==\"\") params.alias = _.alias;\r\n\t\t\tif (_.sliderid!==undefined && _.sliderid!==\"\") params.id = 'slider-'+_.sliderid;\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tRVS.F.ajaxRequest('get_full_slider_object', params , function(response){\r\n\r\n\t\t\t\t\tif (response.id===undefined) {\r\n\t\t\t\t\t\tRVS.F.showWaitAMinute({fadeOut:500,text:RVS_LANG.preparingdatas});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tRVS.ENV.sliderid = response.id;\r\n\t\t\t\t\t\tRVS.ENV.sliderID = response.id;\r\n\t\t\t\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.preparingdatas});\r\n\t\t\t\t\t\tresponse.slider_params.alias = response.alias;\r\n\t\t\t\t\t\tresponse.slider_params.title = response.title;\r\n\t\t\t            //Init Slider SETTINGS\r\n\t\t\t            RVS.OZ = {slideIDs:[]};\r\n\t\t\t            RVS.OZ.settings = RVS.F.safeExtend(true,{},response.slider_params);\r\n\t\t\t            if (response.static_slide!==undefined && response.static_slide.params!=undefined && response.static_slide.params.static!==undefined && response.static_slide.params.static.isstatic===true) {\r\n\t\t\t            \tRVS.OZ[response.static_slide.id] = {\r\n\t\t\t            \t\tslide:RVS.F.safeExtend(true,{},response.static_slide.params),\r\n\t\t\t\t\t\t\t\tlayers:RVS.F.safeExtend(true,{},response.static_slide.layers)\r\n\t\t\t            \t}\r\n\t\t\t            \tRVS.OZ.slideIDs.push(response.static_slide.id);\r\n\t\t\t            }\r\n\t\t\t            for (var sindex in response.slides) {\r\n\t\t\t\t\t\t\tif(response.slides.hasOwnProperty(sindex)) {\r\n\t\t\t\t\t\t\t\tlet slide = response.slides[sindex];\r\n\t\t\t\t\t\t\t\tRVS.OZ[slide.id] = {\r\n\t\t\t\t\t\t\t\t\tslide:RVS.F.safeExtend(true,{},slide.params),\r\n\t\t\t\t\t\t\t\t\tlayers:RVS.F.safeExtend(true,{},slide.layers)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tRVS.OZ.slideIDs.push(slide.id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t            }\r\n\t\t\t            buildOptimizer();\r\n\t\t\t            RVS.F.showWaitAMinute({fadeOut:500,text:RVS_LANG.preparingdatas});\r\n\r\n\t\t\t        }\r\n\t\t        },undefined,true);\r\n\t\t        RVS.F.showWaitAMinute({fadeOut:0,text:RVS_LANG.loadingcontent});\r\n\t\t\t},100);\r\n\r\n\t    } else\r\n\t    if (RVS.SLIDER!==undefined) {\r\n\t    \tRVS.S.optimID = RVS.SLIDER.id;\r\n\t    \tRVS.OZ = RVS.F.safeExtend(true,{},RVS.SLIDER);\r\n\t    \tbuildOptimizer();\r\n\t    }\r\n\t};\r\n\r\n\r\n\r\n\t// BUILD BASIC CONTAINERS\r\n\tfunction buildOptimizer(selid) {\r\n\t\tif (RVS.ENV.optimizer===undefined) {\r\n\t\t\tvar _= '<div class=\"rb-modal-wrapper _TPRB_\" data-modal=\"rbm_optimizer\">';\r\n\t\t\t\t_+='\t<div class=\"rb-modal-inner\">';\r\n\t\t\t\t_+='\t\t<div class=\"rb-modal-content\">';\r\n\t\t\t\t_+='\t\t\t<div id=\"rbm_optimizer\" class=\"rb_modal form_inner\">';\r\n\t\t\t\t_+='\t\t\t\t<div class=\"rbm_header\"><i class=\"rbm_symbol material-icons\">flash_on</i><span class=\"rbm_title\">'+RVS_LANG.optimizertitel+'</span><i class=\"rbm_close material-icons\">close</i></div>';\r\n\t\t\t\t_+='<div class=\"rbm_header_content\">';\r\n\t\t\t\t_+='<div class=\"optim_row noborder\" style=\"height:50px\">';\r\n\t\t\t\t_+='<div class=\"optim_cell op_c_a optim_title\">'+RVS_LANG.element+'</div>';\r\n\t\t\t\t_+='<div class=\"optim_cell op_c_b optim_title\">'+RVS_LANG.filesize+'</div>';\r\n\t\t\t\t_+='<div class=\"optim_cell op_c_c optim_title\">'+RVS_LANG.dimensions+'<i id=\"more_about_optimizer\" class=\"material-icons\">help</i><div class=\"optim_subtitles\"><div class=\"optim_subtitle\" style=\"width:90px\">'+RVS_LANG.toosmall+'</div><div class=\"optim_subtitle\" style=\"width:139px\">'+RVS_LANG.standard1x+'</div><div class=\"optim_subtitle\" style=\"width:91px\">'+RVS_LANG.retina2x+'</div><div class=\"optim_subtitle\" style=\"width:69px\">'+RVS_LANG.oversized+'</div></div></div>';\r\n\t\t\t\t_+='<div class=\"optim_cell op_c_d optim_title\">'+RVS_LANG.suggestion+'</div>'; //<div class=\"optim_subtitles\"><div class=\"optim_subtitle\" style=\"width:33px\">25%</div><div class=\"optim_subtitle\" style=\"width:33px\">50%</div><div class=\"optim_subtitle\" style=\"width:33px\">75%</div><div class=\"optim_subtitle\" style=\"width:33px\">100%</div></div>\r\n\t\t\t\t_+='<div class=\"optim_cell op_c_e\"></div>';\t\t//<div class=\"optim_checkbox\" style=\"margin-top:15px\"><i class=\"material-icons\">check</i></div>\r\n\t\t\t\t_+='</div>';\r\n\t\t\t\t_+='</div>';\r\n\t\t\t\t_+='\t\t\t\t<div id=\"rbm_optimizer_list\" class=\"rbm_content\">';\r\n\t\t\t\t_+='\t\t\t\t</div>';\r\n\t\t\t\t_+='\t\t\t\t<div class=\"rbm_footer\">';\r\n\t\t\t\t_+='\t\t\t\t\t<div id=\"optimizer_compression\">';\r\n                _+='                        <div class=\"opt_loaded_title\">'+RVS_LANG.servercompression+'<a target=\"_blank\" rel=\"noopener\" href=\"https://www.sliderrevolution.com/faq/what-is-server-compression-gzip-brotli/\"><i class=\"material-icons\">help</i></a></div>';\r\n                _+='                        <div class=\"opt_loaded_subtitle\"><a target=\"_blank\" rel=\"noopener\" href=\"https://www.sliderrevolution.com/faq/what-is-server-compression-gzip-brotli/\">'+(RVS.ENV.output_compress.length===0 ? +RVS_LANG.noservercompression : RVS.ENV.output_compress.toString())+'</a></div>';\r\n                _+='\t\t\t\t\t</div>';\r\n\t\t\t\t_+='\t\t\t\t\t<div id=\"opt_summary\">';\r\n\t\t\t\t_+='\t\t\t\t\t\t<div id=\"optimizer_fullsize\">0 kb</div><div id=\"optimizer_cachedsize\"></div>';\r\n\t\t\t\t_+='\t\t\t\t\t\t<div class=\"optimier_footerinfo\">';\r\n\t\t\t\t_+='\t\t\t\t\t\t\t<div class=\"opt_loaded_title\" id=\"optimized_prec\">'+RVS_LANG.sizeafteroptim+'</div>';\r\n\t\t\t\t_+='\t\t\t\t\t\t\t<div class=\"opt_loaded_subtitle\" id=\"optimize_to_save\">'+RVS_LANG.loadedmediainfo+'</div>';\r\n\t\t\t\t_+='\t\t\t\t\t\t</div>';\r\n\t\t\t\t_+='\t\t\t\t\t</div>';\r\n\t\t\t\t_+='\t\t\t\t\t<div id=\"rbm_optpanel_savebtn\" class=\"large_actionbutton basic_action_coloredbutton\"><i class=\"material-icons mr10\">flash_on</i><span class=\"rbm_cp_save_text\">'+RVS_LANG.savechanges+'</span></div>';\r\n\t\t\t\t_+='\t\t\t\t</div>';\r\n\t\t\t\t_+='\t\t\t</div>';\r\n\t\t\t\t_+='\t\t</div>';\r\n\t\t\t\t_+='\t</div>';\r\n\t\t\t\t_+='</div>';\r\n\t\t\tRVS.ENV.optimizer = jQuery(_);\r\n\t\t\tRVS.ENV.optlist = RVS.ENV.optimizer.find('#rbm_optimizer_list');\r\n\t\t\tjQuery(document.body).append(RVS.ENV.optimizer);\r\n\t\t}\r\n\t\tRVS.ENV.optlist[0].innerHTML = \"\";\r\n\t\tRVS.F.RSDialog.create({modalid:'#rbm_optimizer', bgopacity:0.5});\r\n\t\tRVS.S.optUID = 0;\r\n\t\tRVS.OZ.slideFullSize = 0;\r\n\t\tRVS.OZ.list = {};\r\n\t\tRVS.OZ.loadAddons = [];\r\n\t\tRVS.OZ.addOnsFullSize = 0;\r\n\t\tcreateOptimizerList();\r\n\t\tjQuery('#rbm_optimizer_list').RSScroll({wheelPropagation:false, suppressScrollX:true});\r\n\t\tRVS.F.RSDialog.center();\r\n\t\t//if (RVS.S.optUID===0) RVS.F.RSDialog.close();\r\n\t}\r\n\r\n\tfunction buildRow(_) {\r\n\t\tRVS.S.optUID++;\r\n\t\tvar t ='<div id=\"OPTROW_'+RVS.S.optUID+'\" class=\"optim_row\" data-uid=\"'+RVS.S.optUID+'\">';\r\n\t\t\tt+='<div class=\"optim_cell op_c_a\"><div class=\"opt_img\" style=\"background-image:url('+_.url+')\"></div>'+_.alias+'</div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_b\">'+RVS_LANG.calculating+'</div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_c\"><ofs_mark class=\"ofsmark_a\"></ofs_mark><ofs_mark class=\"ofsmark_b\"><div class=\"ofsinfo\" data-optim=\"'+_.rw+' x '+_.rh+'\"></div></ofs_mark><ofs_mark class=\"ofsmark_c\"><div class=\"ofsinfo\" data-optim=\"'+(2*_.rw)+' x '+(2*_.rh)+'\"></div></ofs_mark><ofs_mark class=\"ofsmark_d\"></ofs_mark><opt_fs_grd></opt_fs_grd></div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_d\"></div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_e\"></div>';\t\t//<div class=\"optim_checkbox\"><i class=\"material-icons\">check</i></div>\r\n\t\t\tt+='</div>';\r\n\t\tRVS.OZ.list[RVS.S.optUID] = {row:jQuery(t), url:_.url, rw:_.rw, rh:_.rh, path:_.path, bgsize:_.bgsize, pathURL:_.pathURL, pathSize:_.pathSize, slideid:_.slideid, layerid:_.layerid, imgtype:_.imgtype};\r\n\t\treturn RVS.OZ.list[RVS.S.optUID].row;\r\n\t}\r\n\r\n\tfunction isWebSave(_) {\r\n\t\tif (RVS==undefined || RVS.LIB===undefined || RVS.LIB.FONTS===undefined) return false;\r\n\t\tvar ret = false;\r\n\t\tfor (var i in RVS.LIB.FONTS) {\r\n\t\t\tif (ret===true || !RVS.LIB.FONTS.hasOwnProperty(i) || (RVS.LIB.FONTS[i].type!==\"custom\" && RVS.LIB.FONTS[i].type!==\"websafe\")) continue;\r\n\t\t\tret = RVS.LIB.FONTS[i].label == _;\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tfunction buildFontRow(_) {\r\n\t\t_.alias = _.alias.trimStart();\r\n\t\t_.alias = _.alias.trimEnd();\r\n\t\tvar family = _.alias.split(' ').join('+'),\r\n\t\t\tidfam = (_.alias.split(' ').join('_')).split(\",\").join('_'),\r\n\t\t\tweights = _.weights.toString().split(\",\").join('%2C'),\r\n\t\t\twebSafe = isWebSave(_.alias);\r\n\r\n\t\tvar t ='<div class=\"optim_row\">';\r\n\t\t\tt+='<div class=\"optim_cell op_c_a\"><i class=\"material-icons\">text_fields</i>'+_.alias+' '+_.weights.toString()+'</div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_b\" id=\"fontrowsize_'+idfam+'\">'+(webSafe===true ? 'N.A' : RVS_LANG.calculating)+'</div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_c\"></div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_d\"></div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_e\"></div>';\r\n\t\t\tt+='</div>';\r\n\t\tt = jQuery(t);\r\n\t\tif (webSafe!==true)\tgetFontURLS(\"https://fonts.googleapis.com/css?family=\"+family+\":\"+weights, _.alias,idfam);\r\n\t\treturn t;\r\n\t}\r\n\r\n\tfunction buildAddonRow(_) {\r\n\t\tRVS.OZ.loadAddons.push(_.slug);\r\n\t\t_.alias = _.alias.replace(\"Slider Revolution\",\"\");\r\n\t\tvar aliasid = _.alias.split(\" \").join(\"_\");\r\n\t\tvar t ='<div class=\"optim_row\">';\r\n\t\t\tt+='<div class=\"optim_cell op_c_a\"><i class=\"material-icons\">extension</i>'+_.alias+'</div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_b\" id=\"addrowsize_'+_.slug+'\">'+RVS_LANG.calculating+'</div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_c\"></div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_d\"></div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_e\"></div>';\r\n\t\t\tt+='</div>';\r\n\t\tt = jQuery(t);\r\n\r\n\t\treturn t;\r\n\t}\r\n\r\n\tfunction buildCoreRow(_) {\r\n\t\tvar t ='<div class=\"optim_row\">';\r\n\t\t\tt+='<div class=\"optim_cell op_c_a\"><i class=\"material-icons\">code</i>'+_.alias+'</div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_b\">'+_.size+'</div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_c\"></div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_d\">'+_.warning+'</div>';\r\n\t\t\tt+='<div class=\"optim_cell op_c_e\"></div>';\r\n\t\t\tt+='</div>';\r\n\t\tt = jQuery(t);\r\n\r\n\t\treturn t;\r\n\t}\r\n\r\n\tfunction getAvailableSizes() {\r\n\t\tvar r = [];\r\n\t\tif (RVS.V.sizes===undefined) {\r\n\t\t\tRVS.V.sizes = [\"d\",\"n\",\"t\",\"m\"];\r\n\t\t\tRVS.V.sizesold = [\"desktop\",\"notebook\",\"tablet\",\"mobile\"];\r\n\t\t}\r\n\t\tfor (var i in RVS.V.sizes) if (RVS.V.sizes.hasOwnProperty(i)) {\r\n\t\t\tif (RVS.OZ.settings.size.custom[RVS.V.sizes[i]]===true) r.push(RVS.V.sizes[i]);\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\tfunction addFontFamily(l) {\r\n\t\tif (l.idle!==undefined && l.idle.fontFamily===undefined) l.idle.fontFamily = \"Roboto\";\r\n\t\tRVS.OZ.fontFamilies=RVS.OZ.fontFamilies===undefined ? {} : RVS.OZ.fontFamilies;\r\n\t\tRVS.OZ.fontFamilies[l.idle.fontFamily]=RVS.OZ.fontFamilies[l.idle.fontFamily]===undefined ? { weights:[], italic:false} : RVS.OZ.fontFamilies[l.idle.fontFamily];\r\n\t\tfor (var i in RVS.V.avSizes) if (RVS.V.avSizes.hasOwnProperty(i)) {\r\n\t\t\tif (l.idle!==undefined && l.idle.fontWeight!==undefined && l.idle.fontWeight[RVS.V.avSizes[i]]!==undefined && jQuery.inArray(l.idle.fontWeight[RVS.V.avSizes[i]].v,RVS.OZ.fontFamilies[l.idle.fontFamily].weights)===-1)\r\n\t\t\t\tRVS.OZ.fontFamilies[l.idle.fontFamily].weights.push(l.idle.fontWeight[RVS.V.avSizes[i]].v);\r\n\t\t}\r\n\t\tRVS.OZ.fontFamilies[l.idle.fontFamily].italic = RVS.OZ.fontFamilies[l.idle.fontFamily].italic===true || l.idle.fontStyle===true ? true : false;\r\n\r\n\t}\r\n\r\n\tfunction get_fontSizes(url,fontid,idfam) {\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\txhr.open(\"HEAD\",url,true);\r\n\t\txhr.onreadystatechange = function() {\r\n\t\t\tif (this.readyState === this.DONE) {\r\n\t\t\t\tvar size = parseInt(xhr.getResponseHeader(\"Content-Length\"));\r\n\t\t\t\tRVS.OZ.fontFamilies[fontid].size = RVS.OZ.fontFamilies[fontid].size===undefined ? size : RVS.OZ.fontFamilies[fontid].size + size;\r\n\t\t\t\tjQuery('#fontrowsize_'+idfam)[0].innerHTML = Math.round(parseInt(RVS.OZ.fontFamilies[fontid].size) / 1000)\t+ \" kb\";\r\n\t\t\t\tupdateSummary();\r\n\t\t\t}\r\n\t\t}\r\n\t\txhr.onerror = function(e) {\r\n\t   \t\tjQuery('#fontrowsize_'+idfam)[0].innerHTML = \"N.A.\";\r\n\t   }\r\n\t\txhr.send();\r\n\t}\r\n\r\n\tfunction getFontURLS(url, fontid,idfam) {\r\n\t   var xhr = new XMLHttpRequest();\r\n\t   xhr.open(\"GET\", url, true);\r\n\t   xhr.onreadystatechange = function() {\r\n\t       if (this.readyState == this.DONE) {\r\n\t       \t\tvar urls=[],\r\n\t       \t\t\turls_temp = xhr.response.split(\"url(\");\r\n\t       \t\tfor (var i in urls_temp) if (urls_temp.hasOwnProperty(i)) {\r\n\t       \t\t\tif (urls_temp[i][0]!=='h' && urls_temp[i][0]!=='H') continue;\r\n\t       \t\t\tvar url = urls_temp[i].split(') format');\r\n\t       \t\t\tif (jQuery.inArray(url[0],urls)==-1) urls.push(url[0]);\r\n\t       \t\t}\r\n\t       \t\tfor (var j in urls) if (urls.hasOwnProperty(j)) get_fontSizes(urls[j],fontid,idfam);\r\n\t       }\r\n\t   };\r\n\t   xhr.onerror = function(e) {\r\n\t   \t\tjQuery('#fontrowsize_'+idfam)[0].innerHTML = \"N.A.\";\r\n\t   }\r\n\t   xhr.send();\r\n\t}\r\n\r\n\r\n\tfunction min(_,parentSize,column,breakat) {\r\n\t\tvar\tm = 0,\r\n\t\t\tsizes={};\r\n\t\tfor (var i in RVS.V.avSizes) if (RVS.V.avSizes.hasOwnProperty(i)) {\r\n\t\t\tvar ns = m;\r\n\t\t\tif (column!==undefined) {\r\n\t\t\t\tif (breakat===\"notebook\" && jQuery.inArray(RVS.V.avSizes[i],[\"t\",\"m\",\"n\"])>=0) column = 1;\r\n\t\t\t\tif (breakat===\"mobile\" && jQuery.inArray(RVS.V.avSizes[i],[\"m\"])>=0) column = 1;\r\n\t\t\t\tif (breakat===\"tablet\" && jQuery.inArray(RVS.V.avSizes[i],[\"t\",\"m\"])>=0) column = 1;\r\n\t\t\t\tns = parentSize[RVS.V.avSizes[i]] * column;\r\n\t\t\t} else {\r\n\t\t\t\tif (_!==undefined && _[RVS.V.avSizes[i]]!==undefined)\r\n\t\t\t\t \tns =  _[RVS.V.avSizes[i]].v!==undefined ? RVS.F.isNumeric((parseInt(_[RVS.V.avSizes[i]].v))) ? _[RVS.V.avSizes[i]].v : m :\r\n\t\t\t\t \t\t RVS.F.isNumeric((parseInt(_[RVS.V.avSizes[i]]))) ? _[RVS.V.avSizes[i]] : m;\r\n\r\n\t\t\t\tif ((ns+\"\").indexOf('%')>=0) ns = parentSize[RVS.V.avSizes[i]]*(parseInt(ns,0)/100); else ns = parseInt(ns,0);\r\n\t\t\t}\r\n\t\t\tm = Math.max(ns,m);\r\n\t\t\tsizes[RVS.V.avSizes[i]] = ns;\r\n\t\t}\r\n\t\treturn {max:parseInt(m,0), sizes:sizes};\r\n\t}\r\n\r\n\tfunction getRequiredDim(w,h, mw, mh) {\r\n\t\tvar r = {w:w, h:h};\r\n\t\tif (w>h) {\r\n\t\t\tif (w>mw) r.w = mw;\r\n\t\t} else {\r\n\t\t\tif (h>mh) r.h = mh;\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\tfunction createOptimizerList() {\r\n\r\n\t\tRVS.V.avSizes = getAvailableSizes();\r\n\t\tRVS.OZ.toLoad = {};\r\n\t\t// IF SLIDER DIMENSIONS ARE KNOWN, OTHER WAY WE CAN NOT CALCULATE IMAGE SIZES, ETC.\r\n\t\tif (RVS.OZ!==undefined && RVS.OZ.settings!==undefined && RVS.OZ.settings.size!==undefined) {\r\n\r\n\t\t\tvar stagedims = { w: min(RVS.OZ.settings.size.width), h:min(RVS.OZ.settings.size.height)},\r\n\t\t\t\trdim = getRequiredDim(stagedims.w.max, stagedims.h.max, 1920, 1920),\r\n\t\t\t\tfontrow, addonsrow;\r\n\r\n\t\t\t// Check Slider BG\r\n\t\t\tif (RVS.OZ.settings!==undefined && RVS.OZ.settings.layout!==undefined && RVS.OZ.settings.layout.bg!==undefined && RVS.OZ.settings.layout.bg.useImage && RVS.OZ.settings.layout.bg.image!==undefined && RVS.OZ.settings.layout.bg.image!==\"\" && RVS.OZ.settings.layout.bg.image.length<5) {\r\n\t\t\t\tRVS.ENV.optlist.append(buildRow({alias:RVS_LANG.modulbackground, url:RVS.OZ.settings.layout.bg.image, rw:rdim.w, rh:rdim.h, pathURL:\"settings.layout.bg.image\", pathSize:\"settings.layout.bg.imageSourceType\", slideid:\"settings\"}));\r\n\t\t\t\tRVS.OZ.toLoad[RVS.S.optUID] = RVS.OZ.list[RVS.S.optUID].url;\r\n\t\t\t}\r\n\r\n\t\t\t// Check Slide Backgrounds\r\n\t\t\tfor (var i in RVS.OZ.slideIDs) if (RVS.OZ.slideIDs.hasOwnProperty(i)) {\r\n\t\t\t\tvar li = RVS.OZ.slideIDs[i];\r\n\t\t\t\tif (RVS.OZ[li]!==undefined && RVS.OZ[li].slide!==undefined && RVS.OZ[li].slide.bg!==undefined) {\r\n\t\t\t\t\tif (RVS.OZ[li].slide.bg.type===\"image\" || RVS.OZ[li].slide.bg.type===\"external\" || RVS.OZ[li].slide.bg.type===\"html5\" || RVS.OZ[li].slide.bg.type===\"youtube\" || RVS.OZ[li].slide.bg.type===\"vimeo\") {\r\n\t\t\t\t\t\tif (RVS.OZ[li].slide.bg.image===undefined || RVS.OZ[li].slide.bg.image===\"\" || RVS.OZ[li].slide.bg.image.length<5) {\r\n\t\t\t\t\t\t\t// Nothing to Do\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tRVS.OZ[li].slide.title = RVS.OZ[li].slide.title===undefined ? \"Slide\" : RVS.OZ[li].slide.title;\r\n\t\t\t\t\t\t\tRVS.ENV.optlist.append(buildRow({alias:'#'+(parseInt(i)+1)+' '+RVS.OZ[li].slide.title, url:RVS.OZ[li].slide.bg.image, rw:rdim.w, rh:rdim.h,  pathURL:li+\".slide.bg.image\", pathSize:li+\".slide.bg.imageSourceType\", slideid:li}));\r\n\t\t\t\t\t\t\tRVS.OZ.toLoad[RVS.S.optUID] = RVS.OZ.list[RVS.S.optUID].url;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// COLLECT LAYERS\r\n\t\t\tfor (var i in RVS.OZ.slideIDs) if (RVS.OZ.slideIDs.hasOwnProperty(i)) {\r\n\t\t\t\tvar li = RVS.OZ.slideIDs[i];\r\n\t\t\t\tif (RVS.OZ[li]!==undefined && RVS.OZ[li].layers!==undefined) {\r\n\t\t\t\t\tfor (var j in RVS.OZ[li].layers) if (RVS.OZ[li].layers.hasOwnProperty(j)) {\r\n\t\t\t\t\t\tvar l = RVS.OZ[li].layers[j],row=0, fontrow;\r\n\t\t\t\t\t\t// BACKGROUND IMAGES\r\n\r\n\t\t\t\t\t\tif (l.idle!==undefined && l.idle.backgroundImage!==undefined && l.idle.backgroundImage.length>4) row = {layerid:j, imgtype: \"bg\",bgsize:l.idle.backgroundSize, alias:l.alias, url:l.idle.backgroundImage, path:li+\".layers.\"+j+\".idle.\", pathURL:li+\".layers.\"+j+\".idle.backgroundImage\", pathSize:li+\".layers.\"+j+\".behavior.imageSourceType\", slideid:li};\r\n\t\t\t\t\t\t// IMAGE SOURCE\r\n\t\t\t\t\t\tif (l.type===\"image\" && l.media!==undefined && l.media.imageUrl!==undefined && l.media.imageUrl.length>4) row = {layerid:j, imgtype: \"image\", alias:l.alias, url:l.media.imageUrl,  pathURL:li+\".layers.\"+j+\".media.imageUrl\", pathSize:li+\".layers.\"+j+\".behavior.imageSourceType\", slideid:li};\r\n\t\t\t\t\t\t// VIDEO POSTER SOURCE\r\n\t\t\t\t\t\tif ((l.type===\"video\") && l.media!==undefined && l.media.posterUrl!==undefined && l.media.posterUrl.length>4) row = {layerid:j, imgtype: \"poster\", alias:l.alias, url:l.media.posterUrl, pathURL:li+\".layers.\"+j+\".media.posterUrl\" , pathSize:li+\".layers.\"+j+\".behavior.imageSourceType\", slideid:li};\r\n\r\n\t\t\t\t\t\t// TEXT LAYERS\r\n\t\t\t\t\t\tif ((l.type===\"text\") || l.type===\"button\") addFontFamily(l);\r\n\r\n\t\t\t\t\t\tif (row!==undefined && row!==0) {\r\n\t\t\t\t\t\t\tvar pdim = {w:stagedims.w.sizes, h:stagedims.w.sizes};\r\n\t\t\t\t\t\t\tif (l.group.puid!==-1 && l.group.puid!==undefined) {\r\n\t\t\t\t\t\t\t\tvar player = RVS.OZ[li].layers[l.group.puid];\r\n\t\t\t\t\t\t\t\tif (player.type===\"group\") {\r\n\t\t\t\t\t\t\t\t\tpdim.w = min(player.size.width,pdim.w).sizes;\r\n\t\t\t\t\t\t\t\t\tpdim.h = min(player.size.height,pdim.h).sizes;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (l.type===\"column\") {\r\n\t\t\t\t\t\t\t\trow.rw = min(l.size.width,pdim.w, RVS.F.convertFraction(l.group.columnSize),l.group.columnbreakat).max;\r\n\t\t\t\t\t\t\t\trow.rh = min(l.size.height,pdim.h).max;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\trow.rw =  min(l.size.width,pdim.w).max;\r\n\t\t\t\t\t\t\t\trow.rh =  min(l.size.height,pdim.h).max;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tRVS.ENV.optlist.append(buildRow(row));\r\n\t\t\t\t\t\t\tRVS.OZ.toLoad[RVS.S.optUID] = RVS.OZ.list[RVS.S.optUID].url;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// COLLECT FONT LIBRARIES\r\n\r\n\t\t\tfor (i in RVS.OZ.fontFamilies) {\r\n\t\t\t\tif (!RVS.OZ.fontFamilies.hasOwnProperty(i)) continue;\r\n\t\t\t\tfontrow = buildFontRow({alias:i, weights:RVS.OZ.fontFamilies[i].weights});\r\n\t\t\t\tRVS.ENV.optlist.append(fontrow);\r\n\t\t\t}\r\n\r\n\t\t\t// COLLECT ADDONS\r\n\t\t\tfor (i in RVS.OZ.settings.addOns) if (RVS.OZ.settings.addOns.hasOwnProperty(i)) {\r\n\t\t\t\tif (!RVS.OZ.settings.addOns.hasOwnProperty(i) || RVS.OZ.settings.addOns[i].enable!==true ) continue;\r\n\r\n                addonsrow = buildAddonRow({alias:(RVS.LIB.ADDONS===undefined || RVS.LIB.ADDONS[i]===undefined || RVS.LIB.ADDONS[i].full_title===undefined ? i : RVS.LIB.ADDONS[i].full_title), slug:i});\r\n\t\t\t\tRVS.ENV.optlist.append(addonsrow);\r\n\t\t\t}\r\n\t\t\tvar comp = RVS.ENV.output_compress!==undefined && RVS.ENV.output_compress.length>0;\r\n\t\t\tRVS.ENV.optlist.append(buildCoreRow({alias:RVS_LANG.coretools, size:comp ? \"43 kb\" : \"116 kb\", warning:comp ? \"\" : RVS_LANG.enablecompression}));\r\n\t\t\tRVS.ENV.optlist.append(buildCoreRow({alias:RVS_LANG.corejs, size:comp ? \"72 kb\" : \"289 kb\", warning:comp ? \"\" : RVS_LANG.enablecompression}));\r\n\t\t\tRVS.ENV.optlist.append(buildCoreRow({alias:RVS_LANG.corecss, size:comp ? \"11 kb\" : \"55 kb\", warning:comp ? \"\" : RVS_LANG.enablecompression}));\r\n\t\t\tRVS.OZ.coreFullSize = comp ? 134 : 481;\r\n\r\n\t\t\t// LOAD ADDON SIZES\r\n\t\t\tgetAddonInfos();\r\n\r\n\t\t\t// LOAD IMAGE SIZES\r\n\t\t\tgetImageInfos();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction compareSize(_) {\r\n\t\tvar OH = _.h, OW = _.w, temp, opted = false, rsized = true;\r\n\r\n\t\t// IF AUTO RECOMMENDED WIDTH/HEIGHT IS COMING IN\r\n\t\tif (_.rh===0 && _.rw===0) { _.rh = _.h; _.rw = _.w};\r\n\t\tif (_.rh===0) _.rh = (_.rw/_.w) * _.h;\r\n\t\tif (_.rw===0) _.rw = (_.rh/_.h) * _.w;\r\n\r\n\t\treturn {width:_.rw, height:_.rh};\r\n\t}\r\n\r\n\tfunction updateListView() {\r\n\t\tRVS.OZ.minFullSize = 0;\r\n\t\tfor (var i in RVS.OZ.list) {\r\n\t\t\tif (!RVS.OZ.list.hasOwnProperty(i)) continue;\r\n\t\t\tvar l = RVS.OZ.list[i],\r\n\t\t\t\tcont = jQuery(l.row.find('.op_c_c')),\r\n\t\t\t\tmaxbad = {index:-1, val:0},\r\n\t\t\t\tmingood = {index:-1, val:999999},\r\n\t\t\t\tdef = { index:-1, val:99999},\r\n\t\t\t\tcalW=\"width\",optimal,\r\n\t\t\t\tamnt = 0,\r\n\t\t\t\tgamnt = 0,\r\n\t\t\t\tdefcs = 0,\r\n\t\t\t\tdefsize = 0,\r\n\t\t\t\tok,retina,\r\n\t\t\t\tleft,\r\n\t\t\t\tpositions = [];\r\n\r\n\t\t\tif (l.selected!==undefined) {\r\n\t\t\t\tif (RVS.F.isNumeric(l.selected.size)) {\r\n\t\t\t\t\tl.currentSize = l.selected.size;\r\n\t\t\t\t\tl.currentUrl = l.selected.url;\r\n\t\t\t\t\tvar size = Math.round(l.selected.size/1000) + \" kb\";\r\n\t\t\t\t\tl.row.find('.op_c_b')[0].innerHTML = size;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptimal = compareSize({rw:l.rw, rh:l.rh, w:l.selected.width, h:l.selected.height});\r\n\t\t\t\tif (optimal.width<optimal.height && l.selected.width>l.selected.height) calW = \"height\";\r\n\t\t\t\tif (l.bgsize===\"contain\") if (calW===\"width\") calW=\"height\"; else calW=\"width\";\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (optimal!==undefined) {\r\n\t\t\t\tfor (var iis in l.images) {\r\n\t\t\t\t\tif (!l.images.hasOwnProperty(iis)) continue;\r\n\t\t\t\t\tvar cs = ((l.images[iis][calW] / optimal[calW])*100)/3;\r\n\t\t\t\t\tif (cs>=33 && cs<=67) gamnt++;\r\n\t\t\t\t\tif (l.images[iis].default==true) {\r\n\t\t\t\t\t\tok = cs>=33 && cs<=67;\r\n\t\t\t\t\t\tretina = cs>67;\r\n\t\t\t\t\t\tdefcs = cs;\r\n\t\t\t\t\t\tdefsize = l.images[iis].size;\r\n\t\t\t\t\t\tamnt = addMarkpoint({cont:cont, ozindex:i, imgindex:iis, left:(cs>100 ? 100 : cs), amnt:amnt, class:\"selected original\"})\r\n\t\t\t\t\t} else if (l.images[iis][calW]===optimal[calW] || l.images[iis][calW]*2===optimal[calW]) amnt = addMarkpoint({cont:cont, ozindex:i, imgindex:iis, left:(cs>100 ? 100 : cs), amnt:amnt})\r\n\t\t\t\t\telse if (maxbad.val<cs && cs<33) maxbad={index:iis, val:cs, size:l.images[iis].size};\r\n\t\t\t\t\telse if (mingood.val>cs && cs>67) mingood={index:iis, val:cs, size:l.images[iis].size};\r\n\t\t\t\t\telse if (cs>33 && cs<67) {\r\n\t\t\t\t\t\tleft = (cs<38 ? 38 : cs>62 ? 62 : cs);\r\n\t\t\t\t\t\tfor (var p in positions) if (positions.hasOwnProperty(p)) if (Math.abs(positions[p]-left)<3) left += left<positions[p] ? -3 : 3;\r\n\t\t\t\t\t\tpositions.push(left);\r\n\t\t\t\t\t\tamnt = addMarkpoint({cont:cont,ozindex:i, imgindex:iis, left:left, amnt:amnt});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tl.images[iis].cs = cs;\r\n\t\t\t\t}\r\n\t\t\t\tif (maxbad.index!==-1) {\r\n\t\t\t\t\tif (Math.abs(maxbad.val-defcs)<3) maxbad.val += defcs<maxbad.val ? 3 : -3;\r\n\t\t\t\t\tleft = (maxbad.val<=3 ?  3 :  maxbad.val>30 ? 30 : maxbad.val);\r\n\t\t\t\t\tamnt = addMarkpoint({cont:cont,ozindex:i, imgindex:maxbad.index, left:left, amnt:amnt});\r\n\t\t\t\t}\r\n\t\t\t\tif (mingood.index!==-1 && (retina!==true || defcs>mingood.val)) {\r\n\t\t\t\t\tif (Math.abs(mingood.val-defcs)<3) mingood.val += defcs<mingood.val ? 3 : -3;\r\n\t\t\t\t\tleft = (mingood.val>=97 ? 97 : mingood.val<70 ? 70 : mingood.val);\r\n\t\t\t\t\tamnt = addMarkpoint({cont:cont, ozindex:i, imgindex:mingood.index, left:left, amnt:amnt});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// COLLECT SMALLEST VALUES\r\n\t\t\t\tvar addition = defsize;\r\n\t\t\t\tif (maxbad.index!==-1 && RVS.F.isNumeric(parseInt(maxbad.size,0))) addition = defsize>maxbad.size ? parseInt(maxbad.size,0) : defsize; else\r\n\t\t\t\tif (mingood.index!==-1 && RVS.F.isNumeric(parseInt(mingood.size,0))) addition = defsize>mingood.size ? parseInt(mingood.size,0) : defsize;\r\n\t\t\t\tRVS.OZ.minFullSize += addition;\r\n\t\t\t}\r\n\t\t\tvar suggest = \"\";\r\n\t\t\tif (gamnt===0) suggest = RVS_LANG.chgimgsizesrc;\r\n\t\t\telse if (gamnt>0 && ok!==true) suggest = RVS_LANG.pickandim;\r\n\t\t\tif (suggest!==\"\") l.row.find('.op_c_d')[0].innerHTML = suggest;\r\n\t\t\tl.row[0].dataset.currentinfo = suggest;\r\n\t\t}\r\n\t\tRVS.OZ.minFullSize = RVS.OZ.minFullSize/1000;\r\n\t\tupdateSummary(true);\r\n\t}\r\n\r\n\tfunction addMarkpoint(_) {\r\n\t\t_.class=_.class===undefined ? \"\" : _.class;\r\n\t\t_.cont.append('<div data-ozindex=\"'+_.ozindex+'\" data-imgindex=\"'+_.imgindex+'\" class=\"ofs_markpoint '+_.class+'\" style=\"left:'+_.left+'%\"></div>');\r\n\t\treturn _.amnt+1;\r\n\t}\r\n\r\n\tfunction getImageInfos() {\r\n\t\tRVS.F.ajaxRequest('get_same_aspect_ratio', {images:RVS.OZ.toLoad} , function(response){\r\n\t\t\tif (response.success) {\r\n\t\t\t\tfor (var i in response.images) {\r\n\t\t\t\t\tif (!response.images.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tRVS.OZ.list[i].images = RVS.F.safeExtend(true,{},response.images[i]);\r\n\t\t\t\t\tfor (var j in RVS.OZ.list[i].images) {\r\n\t\t\t\t\t\tif (!RVS.OZ.list[i].images.hasOwnProperty(j)) continue;\r\n\t\t\t\t\t\tif (RVS.OZ.list[i].images[j].default===true) RVS.OZ.list[i].selected = RVS.F.safeExtend(true,{},RVS.OZ.list[i].images[j])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tupdateListView();\r\n\r\n\t\t\t}\r\n\t\t},undefined,true);\r\n\t}\r\n\r\n\tfunction getAddonInfos() {\r\n\t\tif (RVS.OZ.loadAddons===undefined || RVS.OZ.loadAddons.length==0) return;\r\n\t\tRVS.F.ajaxRequest('get_addons_sizes', {addons:RVS.OZ.loadAddons} , function(response){\r\n\t\t\tif (response.success) {\r\n\t\t\t\tfor (var i in response.addons) if (response.addons.hasOwnProperty(i)) {\r\n                    if (RVS.F.isNumeric(parseInt(response.addons[i]))) {\r\n\t\t\t\t\t\tvar v = Math.round(parseInt(response.addons[i],0)/1000);\r\n\t\t\t\t\t\tjQuery('#addrowsize_'+i).html(v+\" kb\");\r\n\t\t\t\t\t\tRVS.OZ.addOnsFullSize+=v;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tupdateListView();\r\n\t\t\t}\r\n\t\t},undefined,true);\r\n\t}\r\n\r\n\tfunction updateSummary(cache) {\r\n\t\tvar existingurls = [];\r\n\t\tRVS.OZ.slideFullSize = 0;\r\n\t\tfor (var i in RVS.OZ.list) {\r\n\t\t\tif (!RVS.OZ.list.hasOwnProperty(i)) continue;\r\n\t\t\tvar l = RVS.OZ.list[i];\r\n\t\t\tif (RVS.F.isNumeric(l.currentSize)) {\r\n\t\t\t\tif (jQuery.inArray(l.currentUrl,existingurls)==-1) {\r\n\t\t\t\t\texistingurls.push(l.currentUrl);\r\n\t\t\t\t\tRVS.OZ.slideFullSize += Math.round(l.currentSize/1000);\r\n\t\t\t\t\tvar size = Math.round(l.currentSize/1000) + \" kb\";\r\n\t\t\t\t\tl.row.find('.op_c_b')[0].innerHTML = size;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// DOUBLE LOADED, MAYBE MARK SOMEHOW ?\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.OZ.fontsFullSize = 0;\r\n\t\tfor (var j in RVS.OZ.fontFamilies) {\r\n\t\t\tif (!RVS.OZ.fontFamilies.hasOwnProperty(j)) continue;\r\n\t\t\tif (RVS.OZ.fontFamilies[j].size!==undefined && RVS.F.isNumeric(parseInt(RVS.OZ.fontFamilies[j].size)))\r\n\t\t\t\tRVS.OZ.fontsFullSize += Math.round(parseInt(RVS.OZ.fontFamilies[j].size) / 1000);\r\n\t\t}\r\n\t\tif (cache===true) RVS.OZ.slideFullSizeCache = RVS.OZ.slideFullSize;\r\n\r\n\t\tvar std = parseInt(RVS.OZ.fontsFullSize)+parseInt(RVS.OZ.addOnsFullSize)+parseInt(RVS.OZ.coreFullSize),\r\n\t\t\tbef = parseInt(RVS.OZ.slideFullSizeCache)+std,\r\n\t\t\tmini = parseInt(RVS.OZ.minFullSize)+std,\r\n\t\t\taft = parseInt(RVS.OZ.slideFullSize)+std,\r\n\t\t\tproc = Math.round((mini/bef)*100),\r\n\t\t\tdiffproc = Math.round(((bef-aft)/bef)*100),\r\n\t\t\tdiftxt = (bef-aft)===0 ? \"\" : \" ( \"+(bef<aft ? \"+\" : \"-\")+Math.abs((diffproc))+\"% ~ \"+(bef-aft)+ \" kb)\";\r\n\r\n\r\n\t\tjQuery('#optimizer_fullsize').html(aft+\" kb\");\r\n\t\tjQuery('#optimizer_cachedsize').html((RVS.OZ.slideFullSizeCache+std)+\" kb\");\r\n\t\tjQuery('#optimized_prec').html(RVS_LANG.sizeafteroptim+diftxt);\r\n\t\tjQuery('#optimize_to_save').html(RVS_LANG.loadedmediainfo+\" \"+(100-proc)+\"% ~ \"+(bef-mini)+\" kb\");\r\n\t}\r\n\r\n\tfunction optimizerListener() {\r\n\t\tif (RVS.S.optimizerListener!==undefined) return;\r\n\t\t// CLOSE EDITOR\r\n\t\tRVS.DOC.on('click','#rbm_optimizer .rbm_close' , function() {\r\n\t\t\tRVS.F.RSDialog.close();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.optim_checkbox',function() {\r\n\t\t\tjQuery(this).toggleClass(\"checked\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mouseenter','.ofsinfo',function(e) {\r\n\t\t\tvar el = jQuery(this),\r\n\t\t\t\trow = el.closest('.optim_row'),\r\n\t\t\t\t_d = row.find('.op_c_d');\r\n\t\t\t_d[0].innerHTML = 'Optimal: '+this.dataset.optim;\r\n\t\t});\r\n\t\tRVS.DOC.on('mouseleave','.ofsinfo',function(e) {\r\n\t\t\tvar el = jQuery(this),\r\n\t\t\t\trow = el.closest('.optim_row'),\r\n\t\t\t\t_d = row.find('.op_c_d');\r\n\t\t\trow[0].dataset.currentinfo = row[0].dataset.currentinfo===undefined ? \"\" : row[0].dataset.currentinfo;\r\n\t\t\t_d[0].innerHTML = row[0].dataset.currentinfo;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click mouseenter','.ofs_markpoint',function(e) {\r\n\r\n\t\t\tvar el = jQuery(this),\r\n\t\t\t\trow = el.closest('.optim_row'),\r\n\t\t\t\t_b = row.find('.op_c_b'),\r\n\t\t\t\t_d = row.find('.op_c_d'),\r\n\t\t\t\t_e = row.find('.op_c_e'),\r\n\t\t\t\tuid = row[0].dataset.uid,\r\n\t\t\t\timg = RVS.OZ.list[uid].images[el[0].dataset.imgindex];\r\n\r\n\r\n\t\t\tif (e.type===\"mouseenter\") {\r\n\t\t\t\tRVS.OZ.list[uid].lastSize = RVS.OZ.list[uid].currentSize;\r\n\t\t\t\tRVS.OZ.list[uid].lastUrl = RVS.OZ.list[uid].currentUrl;\r\n\t\t\t} else {\r\n\t\t\t\tif (el.hasClass(\"selected\")) return;\r\n\t\t\t\tRVS.OZ.list[uid].lastSize=img.size;\r\n\t\t\t\tRVS.OZ.list[uid].lastUrl=img.url;\r\n\t\t\t}\r\n\r\n\t\t\tRVS.OZ.list[row[0].dataset.uid].currentSize = img.size;\r\n\t\t\tRVS.OZ.list[row[0].dataset.uid].currentUrl = img.url;\r\n\t\t\t_d[0].innerHTML = 'Dimension: '+img.width+' x '+img.height;\r\n\t\t\tif (RVS.F.isNumeric(img.size)) _b[0].innerHTML = Math.round(img.size/1000) + \" kb\";\r\n\r\n\t\t\tif (e.type!==\"mouseenter\") {\r\n\t\t\t\tRVS.OZ.list[uid].pickedImage = el[0].dataset.imgindex;\r\n\t\t\t\trow.find('.ofs_markpoint.selected').removeClass(\"selected\");\r\n\t\t\t\tel.addClass(\"selected\");\r\n\t\t\t\trow[0].dataset.currentinfo = img.cs<31 || img.cs>69 ? RVS_LANG.pickandim : \"\";\r\n\t\t\t\tif (img.default!==true) _e[0].innerHTML = '<i class=\"material-icons\">flash_on</i>'; else _e[0].innerHTML='';\r\n\r\n\t\t\t}\r\n\t\t\tupdateSummary();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mouseleave','.ofs_markpoint',function() {\r\n\t\t\tvar el = jQuery(this),\r\n\t\t\t\trow = el.closest('.optim_row'),\r\n\t\t\t\tb = row.find('.op_c_b'),\r\n\t\t\t\td = row.find('.op_c_d'),\r\n\t\t\t\tuid = row[0].dataset.uid;\r\n\r\n\t\t\tif (RVS.OZ.list[uid].lastSize!==RVS.OZ.list[uid].currentSize) {\r\n\t\t\t\tRVS.OZ.list[uid].currentSize = RVS.OZ.list[uid].lastSize;\r\n\t\t\t\tRVS.OZ.list[uid].currentUrl = RVS.OZ.list[uid].lastUrl;\r\n\t\t\t\tif (RVS.F.isNumeric(RVS.OZ.list[uid].lastSize)) b[0].innerHTML = Math.round(RVS.OZ.list[uid].lastSize/1000) + \" kb\";\r\n\t\t\t\tupdateSummary();\r\n\t\t\t}\r\n\t\t\trow[0].dataset.currentinfo = row[0].dataset.currentinfo===undefined ? \"\" : row[0].dataset.currentinfo;\r\n\t\t\td[0].innerHTML = row[0].dataset.currentinfo;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#rbm_optpanel_savebtn',function() {\r\n\t\t\tvar changes = [],\r\n\t\t\t\tlayers = [];\r\n\t\t\tfor (var i in RVS.OZ.list) {\r\n\t\t\t\tif (!RVS.OZ.list.hasOwnProperty(i) || RVS.OZ.list[i].pickedImage===undefined) continue;\r\n\t\t\t\tvar l = RVS.OZ.list[i];\r\n\t\t\t\tvar img = l.images[l.pickedImage];\r\n\t\t\t\tif (img.default!==true) {\r\n\t\t\t\t\tif (jQuery.inArray(l.slideid,changes)==-1) changes.push(l.slideid);\r\n\t\t\t\t\tif (l.layerid!==undefined) layers.push({slideid:l.slideid, layerid:l.layerid, type:l.imgtype, url:img.url});\r\n\t\t\t\t\twriteDeepPath(RVS.OZ, l.pathURL, img.url);\r\n\t\t\t\t\twriteDeepPath(RVS.OZ, l.pathSize, l.pickedImage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (changes.length>0) {\r\n\t\t\t\tif (RVS.SLIDER !== undefined && typeof RVS.SLIDER.inWork != 'undefined') {\r\n\t\t\t\t\tfor (i in changes) if (changes.hasOwnProperty(i)) {\r\n\t\t\t\t\t\tif (changes[i]!==\"settings\" && jQuery.inArray(changes[i],RVS.SLIDER.inWork)==-1) RVS.SLIDER.inWork.push(changes[i]);\r\n\t\t\t\t\t\tRVS.SLIDER[changes[i]] = RVS.F.safeExtend(true,RVS.SLIDER[changes[i]],RVS.OZ[changes[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (i in layers) {\r\n\t\t\t\t\t\tif(!layers.hasOwnProperty((i))) continue;\r\n\t\t\t\t\t\tvar li = layers[i],\r\n\t\t\t\t\t\t\tlayer = jQuery('#_lc_'+li.slideid+\"_\"+li.layerid+\"_\");\r\n\t\t\t\t\t\tif (layer.length>0) {\r\n\t\t\t\t\t\t\tif (li.type===\"image\") layer.find('._lc_image_inside_').attr('src',li.url);\r\n\t\t\t\t\t\t\tRVS.F.drawHTMLLayer({uid:li.layerid});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tRVS.F.convertIDStoTxt();\r\n\t\t\t\t\tRVS.F.convertArrayToObjects();\r\n\t\t\t\t\tRVS.F.saveSlides({index:0,slides:RVS.SLIDER.slideIDs, trigger:RVS.F.saveSliderSettings,works:RVS.SLIDER.inWork});\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor (i in changes) if (changes.hasOwnProperty(i)) {\r\n\t\t\t\t\t\tRVS.OZ.inWork = RVS.OZ.inWork===undefined ? [] : RVS.OZ.inWork;\r\n\t\t\t\t\t\tif (changes[i]!==\"settings\" && jQuery.inArray(changes[i],RVS.OZ.inWork)==-1) RVS.OZ.inWork.push(changes[i]);\r\n\t\t\t\t\t\tRVS.OZ[changes[i]] = RVS.F.safeExtend(true,RVS.OZ[changes[i]],RVS.OZ[changes[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (i in layers) {\r\n\t\t\t\t\t\tif(!layers.hasOwnProperty((i))) continue;\r\n\t\t\t\t\t\tvar li = layers[i],\r\n\t\t\t\t\t\t\tlayer = jQuery('#_lc_'+li.slideid+\"_\"+li.layerid+\"_\");\r\n\t\t\t\t\t\tif (layer.length>0) {\r\n\t\t\t\t\t\t\tif (li.type===\"image\") layer.find('._lc_image_inside_').attr('src',li.url);\r\n\t\t\t\t\t\t\tRVS.F.drawHTMLLayer({uid:li.layerid});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconvertIDStoTxt();\r\n\t\t\t\t\tconvertArrayToObjects();\r\n\t\t\t\t\tsaveSlides({index:0,slides:RVS.OZ.slideIDs, trigger:saveSliderSettings,works:RVS.OZ.inWork});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//SAVE CHANGES\r\n\t\t\t}\r\n\t\t\tRVS.F.RSDialog.close();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#more_about_optimizer',function() {\r\n\t\t\tRVS.F.RSDialog.create({modalid:'#rbm_optimizer_infos', bgopacity:0.5});\r\n\t\t\tRVS.F.RSDialog.center();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#rbm_optimizer_infos .rbm_close',function() {\r\n\t\t\tRVS.F.RSDialog.close();\r\n\t\t});\r\n\r\n\t\tjQuery('#rbm_optimizer_infos').closest('.rb-modal-wrapper').appendTo(jQuery(document.body));\r\n\r\n\t\tRVS.S.optimizerListener = true;\r\n\t}\r\n\r\n\tconvertIDStoTxt = function() {\r\n\t\tfor (var i in RVS.OZ.slideIDs) if(RVS.OZ.slideIDs.hasOwnProperty(i)) RVS.OZ.slideIDs[i] = \"\"+RVS.OZ.slideIDs[i];\r\n\t\tfor (var i in RVS.OZ.inWork) if(RVS.OZ.inWork.hasOwnProperty(i)) RVS.OZ.inWork[i] = \"\"+RVS.OZ.inWork[i];\r\n\t}\r\n\r\n\tfunction saveSlides(_) {\r\n\t\tif (_.index < _.slides.length) {\r\n\t\t\t_.order = _.order===undefined ? 0 : _.order;\r\n\t\t\t_.order++;\r\n\t\t\tvar slideindex = _.slides[_.index],\r\n\t\t\t\tworkindex = jQuery.inArray(slideindex+\"\",RVS.OZ.inWork);\r\n\r\n\t\t\tif (workindex>=0) {\r\n\t\t\t\tvar params = JSON.stringify(RVS.OZ[_.slides[_.index]].slide),\r\n\t\t\t\t\tlayers = JSON.stringify(RVS.OZ[_.slides[_.index]].layers),\r\n\t\t\t\t\toptions = {slider_id:RVS.ENV.sliderID, slide_id:_.slides[_.index], params:params, layers:layers, slide_order:_.order};\r\n\t\t\t\tRVS.DOC.trigger('rs_save_slide_params', [options]);\r\n\t\t\t\tRVS.F.ajaxRequest('save_slide', options, function(response){\r\n\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\t_.index++;\r\n\t\t\t\t\t\tsaveSlides(_);\r\n\t\t\t\t\t}\r\n\t\t\t\t},undefined,undefined,RVS_LANG.saveslide+'<br><span style=\"font-size:17px; line-height:25px;\">\"'+RVS.OZ[_.slides[_.index]].slide.title+'\"</span>');\r\n\r\n\t\t\t} else {\r\n\t\t\t\t_.index++;\r\n\t\t\t\tsaveSlides(_);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tRVS.OZ.inWork = RVS.OZ.inWork===undefined ? [] : RVS.OZ.inWork;\r\n\t\t\tif (_.trigger!==undefined) _.trigger();\r\n\t\t}\r\n\t};\r\n\r\n\tfunction convertArrayToObjects() {\r\n\t\tRVS.OZ.settings.nav.arrows.presets = Object.assign({},RVS.OZ.settings.nav.arrows.presets);\r\n\t\tRVS.OZ.settings.nav.bullets.presets = Object.assign({},RVS.OZ.settings.nav.bullets.presets);\r\n\t\tRVS.OZ.settings.nav.thumbs.presets = Object.assign({},RVS.OZ.settings.nav.thumbs.presets);\r\n\t\tRVS.OZ.settings.nav.tabs.presets = Object.assign({},RVS.OZ.settings.nav.tabs.presets);\r\n\t\tif (RVS.OZ.settings.skins!==undefined && RVS.OZ.settings.skins.colors!==undefined)  RVS.OZ.settings.skins.colors = Object.assign({},RVS.OZ.settings.skins.colors);\r\n\r\n\t};\r\n\r\n\r\n\r\n\tfunction saveSliderSettings() {\r\n\t\tvar params = JSON.stringify(RVS.OZ.settings),\r\n\t\t\tslideids = RVS.OZ.slideIDs.slice(),\r\n\t\t\tstaticindex = -1;\r\n\t\t\tfor (var si in slideids) {\r\n\t\t\t\tif(!slideids.hasOwnProperty(si)) continue;\r\n\t\t\t\tif ((\"\"+slideids[si]).indexOf(\"static\")>=0) staticindex = si;\r\n\t\t\t}\r\n\t\t\tif (staticindex > -1) {\r\n\t\t\t\tslideids.splice(staticindex,1);\r\n\t\t\t}\r\n\t\tRVS.F.ajaxRequest('save_slider', {slider_id:RVS.ENV.sliderID, params:params, slide_ids:/*RVS.OZ.slideIDs*/slideids}, function(response){\r\n\t\t\tif (response.success && response.missing!==undefined && response.missing.length>0) saveSlides({index:0,slides:RVS.OZ.slideIDs,works:response.missing});\r\n\t\t},undefined,undefined,RVS_LANG.saveslide+'<br><span style=\"font-size:17px; line-height:25px;\">'+RVS_LANG.slidersettings+'</span>');\r\n\t};\r\n\r\n\r\n    // write deep value from path\r\n\tfunction writeDeepPath(obj, path, val,ds) {\r\n\t\tif(typeof path !== 'string') return;\r\n\r\n\t\tvar paths = path.split('.'),\r\n\t\t\tlen = paths.length,\r\n\t\t\ttotal = len - 1,\r\n\t\t\tdata = obj;\r\n\t\tif(!len) return;\r\n\t\tfor(var i = 0; i < len; i++) {\r\n\t\t\tif (i< total && data[paths[i]]===undefined) data[paths[i]] = {};\r\n\t\t\tif(i < total) data = data[paths[i]];\r\n\t\t\telse data[paths[i]] = val;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getDeepValue(obj, path,ds) {\r\n\t\tif(typeof path === 'string') path = path.split('.');\r\n\t\tif(path.length > 1) {\r\n\t\t\tvar prop = path.shift();\r\n\t\t\tif (prop==='#slider#') prop = ds.slider;\r\n\t\t\tif (prop==='#slide#') prop = ds.slide;\r\n\t\t\tif (prop==='#layer#') prop = ds.layer;\r\n\t\t\treturn obj.hasOwnProperty(prop) ? getDeepValue(obj[prop], path,ds) : undefined;\r\n\t\t}\r\n\t\treturn obj.hasOwnProperty(path[0]) ? obj[path[0]] : undefined;\r\n\t}\r\n\r\n\r\n\r\n\t//SAVE ORIGINAL DATA STRUCTURES BEFORE START TO EDITING THEM\r\n\tfunction replaceId(a,w,b) { while (a.indexOf(w)>=0) a = a.replace(w,b); return a;}\r\n\tfunction shorten(a,n){ return (a.length > n) ? a.substr(0, n-1) + '&hellip;' : a;};\r\n\r\n})();","Nwdthemes_Revslider/js/mixins/browser-mixin.js":"define([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var mixin = {\r\n\r\n            /**\r\n             * @param {*} url\r\n             * @param {*} width\r\n             * @param {*} height\r\n             * @param {*} title\r\n             * @param {Object} options\r\n             * @param {Function} options\r\n             */\r\n            openDialog: function(url, width, height, title, options, onInsert) {\r\n                var windowId = this.windowId,\r\n                    content = '<div class=\"popup-window\" id=\"' + windowId + '\"></div>';\r\n\r\n                if (this.modalLoaded) {\r\n\r\n                    if (!_.isUndefined(options)) {\r\n                        this.modal.modal('option', 'closed', options.closed);\r\n                    }\r\n\r\n                    this.modal.modal('openModal');\r\n                    $(window).trigger('reload.MediaGallery');\r\n\r\n                    return;\r\n                }\r\n\r\n                this.modal = $(content).modal($.extend({\r\n                    title:  title || 'Insert File...',\r\n                    modalClass: 'magento',\r\n                    type: 'slide',\r\n                    buttons: []\r\n                }, options));\r\n\r\n                this.modal.modal('openModal');\r\n\r\n                $.ajax({\r\n                    url: url,\r\n                    type: 'get',\r\n                    context: $(this),\r\n                    showLoader: true\r\n\r\n                }).done(function (data) {\r\n                    this.modal.html(data).trigger('contentUpdated');\r\n                    this.modal.find('#insert_files').data('onInsert', onInsert);\r\n                    this.modalLoaded = true;\r\n                }.bind(this));\r\n\r\n            }\r\n\r\n        },\r\n\r\n        widgetMixin = {\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             * @return {Boolean}\r\n             */\r\n            insert: function (event) {\r\n                var fileRow = $(event.currentTarget),\r\n                    onInsert = this.element.find('#insert_files').data('onInsert');\r\n\r\n                if (!fileRow.prop('id')) {\r\n                    return false;\r\n                }\r\n\r\n                return $.ajax({\r\n                    url: this.options.onInsertUrl,\r\n                    data: {\r\n                        filename: fileRow.attr('id'),\r\n                        node: this.activeNode.id,\r\n                        store: this.options.storeId,\r\n                        'as_is': 0,\r\n                        'force_static_path': 0,\r\n                        'form_key': FORM_KEY\r\n                    },\r\n                    context: this,\r\n                    showLoader: true\r\n                }).done($.proxy(function (data) {\r\n                    if (typeof data == 'string') {\r\n                        data = JSON.parse(data.replace(/(\\r\\n|\\n|\\r)/gm, \"\").trim());\r\n                    }\r\n                    if (data.image) {\r\n                        onInsert(data.image, Base64.encode(data.image), data.width, data.height);\r\n                        MediabrowserUtility.closeDialog();\r\n                    } else if (data.ajaxRedirect) {\r\n                        document.location = data.ajaxRedirect;\r\n                    }\r\n                }, this));\r\n            }\r\n\r\n        }\r\n\r\n    return function (widget) {\r\n        if (typeof widget == 'undefined') {\r\n            // 2.2.6 and below\r\n            widget = window.MediabrowserUtility;\r\n            require.config({\r\n                paths: {\r\n                    'jquery/file-uploader': 'jquery/fileUploader/jquery.fileupload-fp',\r\n                    'prototype': 'legacy-build.min'\r\n                },\r\n                shim: {\r\n                    'jquery/file-uploader': {\r\n                        deps: ['prototype']\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (typeof revMageImageUploadUrl != 'undefined') {\r\n            $.extend(widget, mixin);\r\n            $.widget('mage.mediabrowser', $.mage.mediabrowser, widgetMixin);\r\n        }\r\n        return widget;\r\n    };\r\n\r\n});","Nwdthemes_Revslider/export/js/jquery-migrate.js":"/*!\r\n * jQuery Migrate - v1.2.1 - 2013-05-08\r\n * https://github.com/jquery/jquery-migrate\r\n * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT\r\n */\r\n(function( jQuery, window, undefined ) {\r\n// See http://bugs.jquery.com/ticket/13335\r\n// \"use strict\";\r\n\r\n\r\nvar warnedAbout = {};\r\n\r\n// List of warnings already given; public read only\r\njQuery.migrateWarnings = [];\r\n\r\n// Set to true to prevent console output; migrateWarnings still maintained\r\n// jQuery.migrateMute = false;\r\n\r\n// Show a message on the console so devs know we're active\r\nif ( !jQuery.migrateMute && window.console && window.console.log ) {\r\n\twindow.console.log(\"JQMIGRATE: Logging is active\");\r\n}\r\n\r\n// Set to false to disable traces that appear with warnings\r\nif ( jQuery.migrateTrace === undefined ) {\r\n\tjQuery.migrateTrace = true;\r\n}\r\n\r\n// Forget any warnings we've already given; public\r\njQuery.migrateReset = function() {\r\n\twarnedAbout = {};\r\n\tjQuery.migrateWarnings.length = 0;\r\n};\r\n\r\nfunction migrateWarn( msg) {\r\n\tvar console = window.console;\r\n\tif ( !warnedAbout[ msg ] ) {\r\n\t\twarnedAbout[ msg ] = true;\r\n\t\tjQuery.migrateWarnings.push( msg );\r\n\t\tif ( console && console.warn && !jQuery.migrateMute ) {\r\n\t\t\tconsole.warn( \"JQMIGRATE: \" + msg );\r\n\t\t\tif ( jQuery.migrateTrace && console.trace ) {\r\n\t\t\t\tconsole.trace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction migrateWarnProp( obj, prop, value, msg ) {\r\n\tif ( Object.defineProperty ) {\r\n\t\t// On ES5 browsers (non-oldIE), warn if the code tries to get prop;\r\n\t\t// allow property to be overwritten in case some other plugin wants it\r\n\t\ttry {\r\n\t\t\tObject.defineProperty( obj, prop, {\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tget: function() {\r\n\t\t\t\t\tmigrateWarn( msg );\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t},\r\n\t\t\t\tset: function( newValue ) {\r\n\t\t\t\t\tmigrateWarn( msg );\r\n\t\t\t\t\tvalue = newValue;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t} catch( err ) {\r\n\t\t\t// IE8 is a dope about Object.defineProperty, can't warn there\r\n\t\t}\r\n\t}\r\n\r\n\t// Non-ES5 (or broken) browser; just set the property\r\n\tjQuery._definePropertyBroken = true;\r\n\tobj[ prop ] = value;\r\n}\r\n\r\nif ( document.compatMode === \"BackCompat\" ) {\r\n\t// jQuery has never supported or tested Quirks Mode\r\n\tmigrateWarn( \"jQuery is not compatible with Quirks Mode\" );\r\n}\r\n\r\n\r\nvar attrFn = jQuery( \"<input/>\", { size: 1 } ).attr(\"size\") && jQuery.attrFn,\r\n\toldAttr = jQuery.attr,\r\n\tvalueAttrGet = jQuery.attrHooks.value && jQuery.attrHooks.value.get ||\r\n\t\tfunction() { return null; },\r\n\tvalueAttrSet = jQuery.attrHooks.value && jQuery.attrHooks.value.set ||\r\n\t\tfunction() { return undefined; },\r\n\trnoType = /^(?:input|button)$/i,\r\n\trnoAttrNodeType = /^[238]$/,\r\n\trboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,\r\n\truseDefault = /^(?:checked|selected)$/i;\r\n\r\n// jQuery.attrFn\r\nmigrateWarnProp( jQuery, \"attrFn\", attrFn || {}, \"jQuery.attrFn is deprecated\" );\r\n\r\njQuery.attr = function( elem, name, value, pass ) {\r\n\tvar lowerName = name.toLowerCase(),\r\n\t\tnType = elem && elem.nodeType;\r\n\r\n\tif ( pass ) {\r\n\t\t// Since pass is used internally, we only warn for new jQuery\r\n\t\t// versions where there isn't a pass arg in the formal params\r\n\t\tif ( oldAttr.length < 4 ) {\r\n\t\t\tmigrateWarn(\"jQuery.fn.attr( props, pass ) is deprecated\");\r\n\t\t}\r\n\t\tif ( elem && !rnoAttrNodeType.test( nType ) &&\r\n\t\t\t(attrFn ? name in attrFn : jQuery.isFunction(jQuery.fn[name])) ) {\r\n\t\t\treturn jQuery( elem )[ name ]( value );\r\n\t\t}\r\n\t}\r\n\r\n\t// Warn if user tries to set `type`, since it breaks on IE 6/7/8; by checking\r\n\t// for disconnected elements we don't warn on $( \"<button>\", { type: \"button\" } ).\r\n\tif ( name === \"type\" && value !== undefined && rnoType.test( elem.nodeName ) && elem.parentNode ) {\r\n\t\tmigrateWarn(\"Can't change the 'type' of an input or button in IE 6/7/8\");\r\n\t}\r\n\r\n\t// Restore boolHook for boolean property/attribute synchronization\r\n\tif ( !jQuery.attrHooks[ lowerName ] && rboolean.test( lowerName ) ) {\r\n\t\tjQuery.attrHooks[ lowerName ] = {\r\n\t\t\tget: function( elem, name ) {\r\n\t\t\t\t// Align boolean attributes with corresponding properties\r\n\t\t\t\t// Fall back to attribute presence where some booleans are not supported\r\n\t\t\t\tvar attrNode,\r\n\t\t\t\t\tproperty = jQuery.prop( elem, name );\r\n\t\t\t\treturn property === true || typeof property !== \"boolean\" &&\r\n\t\t\t\t\t( attrNode = elem.getAttributeNode(name) ) && attrNode.nodeValue !== false ?\r\n\r\n\t\t\t\t\tname.toLowerCase() :\r\n\t\t\t\t\tundefined;\r\n\t\t\t},\r\n\t\t\tset: function( elem, value, name ) {\r\n\t\t\t\tvar propName;\r\n\t\t\t\tif ( value === false ) {\r\n\t\t\t\t\t// Remove boolean attributes when set to false\r\n\t\t\t\t\tjQuery.removeAttr( elem, name );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// value is true since we know at this point it's type boolean and not false\r\n\t\t\t\t\t// Set boolean attributes to the same name and set the DOM property\r\n\t\t\t\t\tpropName = jQuery.propFix[ name ] || name;\r\n\t\t\t\t\tif ( propName in elem ) {\r\n\t\t\t\t\t\t// Only set the IDL specifically if it already exists on the element\r\n\t\t\t\t\t\telem[ propName ] = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telem.setAttribute( name, name.toLowerCase() );\r\n\t\t\t\t}\r\n\t\t\t\treturn name;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Warn only for attributes that can remain distinct from their properties post-1.9\r\n\t\tif ( ruseDefault.test( lowerName ) ) {\r\n\t\t\tmigrateWarn( \"jQuery.fn.attr('\" + lowerName + \"') may use property instead of attribute\" );\r\n\t\t}\r\n\t}\r\n\r\n\treturn oldAttr.call( jQuery, elem, name, value );\r\n};\r\n\r\n// attrHooks: value\r\njQuery.attrHooks.value = {\r\n\tget: function( elem, name ) {\r\n\t\tvar nodeName = ( elem.nodeName || \"\" ).toLowerCase();\r\n\t\tif ( nodeName === \"button\" ) {\r\n\t\t\treturn valueAttrGet.apply( this, arguments );\r\n\t\t}\r\n\t\tif ( nodeName !== \"input\" && nodeName !== \"option\" ) {\r\n\t\t\tmigrateWarn(\"jQuery.fn.attr('value') no longer gets properties\");\r\n\t\t}\r\n\t\treturn name in elem ?\r\n\t\t\telem.value :\r\n\t\t\tnull;\r\n\t},\r\n\tset: function( elem, value ) {\r\n\t\tvar nodeName = ( elem.nodeName || \"\" ).toLowerCase();\r\n\t\tif ( nodeName === \"button\" ) {\r\n\t\t\treturn valueAttrSet.apply( this, arguments );\r\n\t\t}\r\n\t\tif ( nodeName !== \"input\" && nodeName !== \"option\" ) {\r\n\t\t\tmigrateWarn(\"jQuery.fn.attr('value', val) no longer sets properties\");\r\n\t\t}\r\n\t\t// Does not return so that setAttribute is also used\r\n\t\telem.value = value;\r\n\t}\r\n};\r\n\r\n\r\nvar matched, browser,\r\n\toldInit = jQuery.fn.init,\r\n\toldParseJSON = jQuery.parseJSON,\r\n\t// Note: XSS check is done below after string is trimmed\r\n\trquickExpr = /^([^<]*)(<[\\w\\W]+>)([^>]*)$/;\r\n\r\n// $(html) \"looks like html\" rule change\r\njQuery.fn.init = function( selector, context, rootjQuery ) {\r\n\tvar match;\r\n\r\n\tif ( selector && typeof selector === \"string\" && !jQuery.isPlainObject( context ) &&\r\n\t\t\t(match = rquickExpr.exec( jQuery.trim( selector ) )) && match[ 0 ] ) {\r\n\t\t// This is an HTML string according to the \"old\" rules; is it still?\r\n\t\tif ( selector.charAt( 0 ) !== \"<\" ) {\r\n\t\t\tmigrateWarn(\"$(html) HTML strings must start with '<' character\");\r\n\t\t}\r\n\t\tif ( match[ 3 ] ) {\r\n\t\t\tmigrateWarn(\"$(html) HTML text after last tag is ignored\");\r\n\t\t}\r\n\t\t// Consistently reject any HTML-like string starting with a hash (#9521)\r\n\t\t// Note that this may break jQuery 1.6.x code that otherwise would work.\r\n\t\tif ( match[ 0 ].charAt( 0 ) === \"#\" ) {\r\n\t\t\tmigrateWarn(\"HTML string cannot start with a '#' character\");\r\n\t\t\tjQuery.error(\"JQMIGRATE: Invalid selector string (XSS)\");\r\n\t\t}\r\n\t\t// Now process using loose rules; let pre-1.8 play too\r\n\t\tif ( context && context.context ) {\r\n\t\t\t// jQuery object as context; parseHTML expects a DOM object\r\n\t\t\tcontext = context.context;\r\n\t\t}\r\n\t\tif ( jQuery.parseHTML ) {\r\n\t\t\treturn oldInit.call( this, jQuery.parseHTML( match[ 2 ], context, true ),\r\n\t\t\t\t\tcontext, rootjQuery );\r\n\t\t}\r\n\t}\r\n\treturn oldInit.apply( this, arguments );\r\n};\r\njQuery.fn.init.prototype = jQuery.fn;\r\n\r\n// Let $.parseJSON(falsy_value) return null\r\njQuery.parseJSON = function( json ) {\r\n\tif ( !json && json !== null ) {\r\n\t\tmigrateWarn(\"jQuery.parseJSON requires a valid JSON string\");\r\n\t\treturn null;\r\n\t}\r\n\treturn oldParseJSON.apply( this, arguments );\r\n};\r\n\r\njQuery.uaMatch = function( ua ) {\r\n\tua = ua.toLowerCase();\r\n\r\n\tvar match = /(chrome)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n\t\t/(webkit)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n\t\t/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n\t\t/(msie) ([\\w.]+)/.exec( ua ) ||\r\n\t\tua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec( ua ) ||\r\n\t\t[];\r\n\r\n\treturn {\r\n\t\tbrowser: match[ 1 ] || \"\",\r\n\t\tversion: match[ 2 ] || \"0\"\r\n\t};\r\n};\r\n\r\n// Don't clobber any existing jQuery.browser in case it's different\r\nif ( !jQuery.browser ) {\r\n\tmatched = jQuery.uaMatch( navigator.userAgent );\r\n\tbrowser = {};\r\n\r\n\tif ( matched.browser ) {\r\n\t\tbrowser[ matched.browser ] = true;\r\n\t\tbrowser.version = matched.version;\r\n\t}\r\n\r\n\t// Chrome is Webkit, but Webkit is also Safari.\r\n\tif ( browser.chrome ) {\r\n\t\tbrowser.webkit = true;\r\n\t} else if ( browser.webkit ) {\r\n\t\tbrowser.safari = true;\r\n\t}\r\n\r\n\tjQuery.browser = browser;\r\n}\r\n\r\n// Warn if the code tries to get jQuery.browser\r\nmigrateWarnProp( jQuery, \"browser\", jQuery.browser, \"jQuery.browser is deprecated\" );\r\n\r\njQuery.sub = function() {\r\n\tfunction jQuerySub( selector, context ) {\r\n\t\treturn new jQuerySub.fn.init( selector, context );\r\n\t}\r\n\tjQuery.extend( true, jQuerySub, this );\r\n\tjQuerySub.superclass = this;\r\n\tjQuerySub.fn = jQuerySub.prototype = this();\r\n\tjQuerySub.fn.constructor = jQuerySub;\r\n\tjQuerySub.sub = this.sub;\r\n\tjQuerySub.fn.init = function init( selector, context ) {\r\n\t\tif ( context && context instanceof jQuery && !(context instanceof jQuerySub) ) {\r\n\t\t\tcontext = jQuerySub( context );\r\n\t\t}\r\n\r\n\t\treturn jQuery.fn.init.call( this, selector, context, rootjQuerySub );\r\n\t};\r\n\tjQuerySub.fn.init.prototype = jQuerySub.fn;\r\n\tvar rootjQuerySub = jQuerySub(document);\r\n\tmigrateWarn( \"jQuery.sub() is deprecated\" );\r\n\treturn jQuerySub;\r\n};\r\n\r\n\r\n// Ensure that $.ajax gets the new parseJSON defined in core.js\r\njQuery.ajaxSetup({\r\n\tconverters: {\r\n\t\t\"text json\": jQuery.parseJSON\r\n\t}\r\n});\r\n\r\n\r\nvar oldFnData = jQuery.fn.data;\r\n\r\njQuery.fn.data = function( name ) {\r\n\tvar ret, evt,\r\n\t\telem = this[0];\r\n\r\n\t// Handles 1.7 which has this behavior and 1.8 which doesn't\r\n\tif ( elem && name === \"events\" && arguments.length === 1 ) {\r\n\t\tret = jQuery.data( elem, name );\r\n\t\tevt = jQuery._data( elem, name );\r\n\t\tif ( ( ret === undefined || ret === evt ) && evt !== undefined ) {\r\n\t\t\tmigrateWarn(\"Use of jQuery.fn.data('events') is deprecated\");\r\n\t\t\treturn evt;\r\n\t\t}\r\n\t}\r\n\treturn oldFnData.apply( this, arguments );\r\n};\r\n\r\n\r\nvar rscriptType = /\\/(java|ecma)script/i,\r\n\toldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;\r\n\r\njQuery.fn.andSelf = function() {\r\n\tmigrateWarn(\"jQuery.fn.andSelf() replaced by jQuery.fn.addBack()\");\r\n\treturn oldSelf.apply( this, arguments );\r\n};\r\n\r\n// Since jQuery.clean is used internally on older versions, we only shim if it's missing\r\nif ( !jQuery.clean ) {\r\n\tjQuery.clean = function( elems, context, fragment, scripts ) {\r\n\t\t// Set context per 1.8 logic\r\n\t\tcontext = context || document;\r\n\t\tcontext = !context.nodeType && context[0] || context;\r\n\t\tcontext = context.ownerDocument || context;\r\n\r\n\t\tmigrateWarn(\"jQuery.clean() is deprecated\");\r\n\r\n\t\tvar i, elem, handleScript, jsTags,\r\n\t\t\tret = [];\r\n\r\n\t\tjQuery.merge( ret, jQuery.buildFragment( elems, context ).childNodes );\r\n\r\n\t\t// Complex logic lifted directly from jQuery 1.8\r\n\t\tif ( fragment ) {\r\n\t\t\t// Special handling of each script element\r\n\t\t\thandleScript = function( elem ) {\r\n\t\t\t\t// Check if we consider it executable\r\n\t\t\t\tif ( !elem.type || rscriptType.test( elem.type ) ) {\r\n\t\t\t\t\t// Detach the script and store it in the scripts array (if provided) or the fragment\r\n\t\t\t\t\t// Return truthy to indicate that it has been handled\r\n\t\t\t\t\treturn scripts ?\r\n\t\t\t\t\t\tscripts.push( elem.parentNode ? elem.parentNode.removeChild( elem ) : elem ) :\r\n\t\t\t\t\t\tfragment.appendChild( elem );\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( i = 0; (elem = ret[i]) != null; i++ ) {\r\n\t\t\t\t// Check if we're done after handling an executable script\r\n\t\t\t\tif ( !( jQuery.nodeName( elem, \"script\" ) && handleScript( elem ) ) ) {\r\n\t\t\t\t\t// Append to fragment and handle embedded scripts\r\n\t\t\t\t\tfragment.appendChild( elem );\r\n\t\t\t\t\tif ( typeof elem.getElementsByTagName !== \"undefined\" ) {\r\n\t\t\t\t\t\t// handleScript alters the DOM, so use jQuery.merge to ensure snapshot iteration\r\n\t\t\t\t\t\tjsTags = jQuery.grep( jQuery.merge( [], elem.getElementsByTagName(\"script\") ), handleScript );\r\n\r\n\t\t\t\t\t\t// Splice the scripts into ret after their former ancestor and advance our index beyond them\r\n\t\t\t\t\t\tret.splice.apply( ret, [i + 1, 0].concat( jsTags ) );\r\n\t\t\t\t\t\ti += jsTags.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t};\r\n}\r\n\r\nvar eventAdd = jQuery.event.add,\r\n\teventRemove = jQuery.event.remove,\r\n\teventTrigger = jQuery.event.trigger,\r\n\toldToggle = jQuery.fn.toggle,\r\n\toldLive = jQuery.fn.live,\r\n\toldDie = jQuery.fn.die,\r\n\tajaxEvents = \"ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess\",\r\n\trajaxEvent = new RegExp( \"\\\\b(?:\" + ajaxEvents + \")\\\\b\" ),\r\n\trhoverHack = /(?:^|\\s)hover(\\.\\S+|)\\b/,\r\n\thoverHack = function( events ) {\r\n\t\tif ( typeof( events ) !== \"string\" || jQuery.event.special.hover ) {\r\n\t\t\treturn events;\r\n\t\t}\r\n\t\tif ( rhoverHack.test( events ) ) {\r\n\t\t\tmigrateWarn(\"'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'\");\r\n\t\t}\r\n\t\treturn events && events.replace( rhoverHack, \"mouseenter$1 mouseleave$1\" );\r\n\t};\r\n\r\n// Event props removed in 1.9, put them back if needed; no practical way to warn them\r\nif ( jQuery.event.props && jQuery.event.props[ 0 ] !== \"attrChange\" ) {\r\n\tjQuery.event.props.unshift( \"attrChange\", \"attrName\", \"relatedNode\", \"srcElement\" );\r\n}\r\n\r\n// Undocumented jQuery.event.handle was \"deprecated\" in jQuery 1.7\r\nif ( jQuery.event.dispatch ) {\r\n\tmigrateWarnProp( jQuery.event, \"handle\", jQuery.event.dispatch, \"jQuery.event.handle is undocumented and deprecated\" );\r\n}\r\n\r\n// Support for 'hover' pseudo-event and ajax event warnings\r\njQuery.event.add = function( elem, types, handler, data, selector ){\r\n\tif ( elem !== document && rajaxEvent.test( types ) ) {\r\n\t\tmigrateWarn( \"AJAX events should be attached to document: \" + types );\r\n\t}\r\n\teventAdd.call( this, elem, hoverHack( types || \"\" ), handler, data, selector );\r\n};\r\njQuery.event.remove = function( elem, types, handler, selector, mappedTypes ){\r\n\teventRemove.call( this, elem, hoverHack( types ) || \"\", handler, selector, mappedTypes );\r\n};\r\n\r\njQuery.fn.error = function() {\r\n\tvar args = Array.prototype.slice.call( arguments, 0);\r\n\tmigrateWarn(\"jQuery.fn.error() is deprecated\");\r\n\targs.splice( 0, 0, \"error\" );\r\n\tif ( arguments.length ) {\r\n\t\treturn this.bind.apply( this, args );\r\n\t}\r\n\t// error event should not bubble to window, although it does pre-1.7\r\n\tthis.triggerHandler.apply( this, args );\r\n\treturn this;\r\n};\r\n\r\njQuery.fn.toggle = function( fn, fn2 ) {\r\n\r\n\t// Don't mess with animation or css toggles\r\n\tif ( !jQuery.isFunction( fn ) || !jQuery.isFunction( fn2 ) ) {\r\n\t\treturn oldToggle.apply( this, arguments );\r\n\t}\r\n\tmigrateWarn(\"jQuery.fn.toggle(handler, handler...) is deprecated\");\r\n\r\n\t// Save reference to arguments for access in closure\r\n\tvar args = arguments,\r\n\t\tguid = fn.guid || jQuery.guid++,\r\n\t\ti = 0,\r\n\t\ttoggler = function( event ) {\r\n\t\t\t// Figure out which function to execute\r\n\t\t\tvar lastToggle = ( jQuery._data( this, \"lastToggle\" + fn.guid ) || 0 ) % i;\r\n\t\t\tjQuery._data( this, \"lastToggle\" + fn.guid, lastToggle + 1 );\r\n\r\n\t\t\t// Make sure that clicks stop\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\t// and execute the function\r\n\t\t\treturn args[ lastToggle ].apply( this, arguments ) || false;\r\n\t\t};\r\n\r\n\t// link all the functions, so any of them can unbind this click handler\r\n\ttoggler.guid = guid;\r\n\twhile ( i < args.length ) {\r\n\t\targs[ i++ ].guid = guid;\r\n\t}\r\n\r\n\treturn this.click( toggler );\r\n};\r\n\r\njQuery.fn.live = function( types, data, fn ) {\r\n\tmigrateWarn(\"jQuery.fn.live() is deprecated\");\r\n\tif ( oldLive ) {\r\n\t\treturn oldLive.apply( this, arguments );\r\n\t}\r\n\tjQuery( this.context ).on( types, this.selector, data, fn );\r\n\treturn this;\r\n};\r\n\r\njQuery.fn.die = function( types, fn ) {\r\n\tmigrateWarn(\"jQuery.fn.die() is deprecated\");\r\n\tif ( oldDie ) {\r\n\t\treturn oldDie.apply( this, arguments );\r\n\t}\r\n\tjQuery( this.context ).off( types, this.selector || \"**\", fn );\r\n\treturn this;\r\n};\r\n\r\n// Turn global events into document-triggered events\r\njQuery.event.trigger = function( event, data, elem, onlyHandlers  ){\r\n\tif ( !elem && !rajaxEvent.test( event ) ) {\r\n\t\tmigrateWarn( \"Global events are undocumented and deprecated\" );\r\n\t}\r\n\treturn eventTrigger.call( this,  event, data, elem || document, onlyHandlers  );\r\n};\r\njQuery.each( ajaxEvents.split(\"|\"),\r\n\tfunction( _, name ) {\r\n\t\tjQuery.event.special[ name ] = {\r\n\t\t\tsetup: function() {\r\n\t\t\t\tvar elem = this;\r\n\r\n\t\t\t\t// The document needs no shimming; must be !== for oldIE\r\n\t\t\t\tif ( elem !== document ) {\r\n\t\t\t\t\tjQuery.event.add( document, name + \".\" + jQuery.guid, function() {\r\n\t\t\t\t\t\tjQuery.event.trigger( name, null, elem, true );\r\n\t\t\t\t\t});\r\n\t\t\t\t\tjQuery._data( this, name, jQuery.guid++ );\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tteardown: function() {\r\n\t\t\t\tif ( this !== document ) {\r\n\t\t\t\t\tjQuery.event.remove( document, name + \".\" + jQuery._data( this, name ) );\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n);\r\n\r\n\r\n})( jQuery, window );\r\n","Nwdthemes_Revslider/export/js/requirejs-config.js":"(function(require){\r\n    (function() {\r\n        /**\r\n         * Copyright \u00a9 2016 Magento. All rights reserved.\r\n         * See COPYING.txt for license details.\r\n         */\r\n\r\n        var config = {\r\n            \"waitSeconds\": 0,\r\n            \"map\": {\r\n                \"*\": {\r\n                    \"ko\": \"knockoutjs/knockout\",\r\n                    \"knockout\": \"knockoutjs/knockout\",\r\n                    \"mageUtils\": \"mage/utils/main\",\r\n                    \"rjsResolver\": \"mage/requirejs/resolver\"\r\n                }\r\n            },\r\n            \"shim\": {\r\n                \"jquery-migrate\": [\"jquery\"],\r\n                \"jquery/jquery.hashchange\": [\"jquery\", \"jquery-migrate\"],\r\n                \"jquery/jstree/jquery.hotkeys\": [\"jquery\"],\r\n                \"jquery/hover-intent\": [\"jquery\"],\r\n                \"mage/adminhtml/backup\": [\"prototype\"],\r\n                \"mage/captcha\": [\"prototype\"],\r\n                \"mage/common\": [\"jquery\"],\r\n                \"mage/new-gallery\": [\"jquery\"],\r\n                \"mage/webapi\": [\"jquery\"],\r\n                \"jquery/ui\": [\"jquery\"],\r\n                \"MutationObserver\": [\"es6-collections\"],\r\n                \"tinymce\": {\r\n                    \"exports\": \"tinymce\"\r\n                },\r\n                \"moment\": {\r\n                    \"exports\": \"moment\"\r\n                },\r\n                \"matchMedia\": {\r\n                    \"exports\": \"mediaCheck\"\r\n                },\r\n                \"jquery/jquery-storageapi\": {\r\n                    \"deps\": [\"jquery/jquery.cookie\"]\r\n                }\r\n            },\r\n            \"paths\": {\r\n                \"jquery/validate\": \"jquery/jquery.validate\",\r\n                \"jquery/hover-intent\": \"jquery/jquery.hoverIntent\",\r\n                \"jquery/file-uploader\": \"jquery/fileUploader/jquery.fileupload-fp\",\r\n                \"jquery/jquery.hashchange\": \"jquery/jquery.ba-hashchange.min\",\r\n                \"prototype\": \"legacy-build.min\",\r\n                \"jquery/jquery-storageapi\": \"jquery/jquery.storageapi.min\",\r\n                \"text\": \"mage/requirejs/text\",\r\n                \"domReady\": \"requirejs/domReady\",\r\n                \"tinymce\": \"tiny_mce/tiny_mce_src\"\r\n            },\r\n            \"deps\": [\r\n                \"jquery-migrate\"\r\n            ],\r\n            \"config\": {\r\n                \"mixins\": {\r\n                    \"jquery/jstree/jquery.jstree\": {\r\n                        \"mage/backend/jstree-mixin\": true\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        require(['jquery'], function ($) {\r\n            $.noConflict();\r\n        });\r\n\r\n        require.config(config);\r\n    })();\r\n\r\n    (function() {\r\n        var config = {\r\n            paths: {\r\n                revolutionTools:        'rbtools.min',\r\n                rs6:                    'rs6.min',\r\n                vimeoPlayer:            'vimeo.player.min'\r\n            },\r\n            shim: {\r\n                rs6: {\r\n                    deps: ['jquery', 'revolutionTools']\r\n                }\r\n            }\r\n        };\r\n        require.config(config);\r\n    })();\r\n\r\n})(require);"}
}});
