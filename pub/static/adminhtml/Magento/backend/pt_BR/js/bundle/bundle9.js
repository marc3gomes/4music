require.config({"config": {
        "jsbuild":{"Nwdthemes_Revslider/admin/assets/js/plugins/RevMirror.js":"!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"NOfunction\"==typeof define&&define.amd?define(t):e.RevMirror=t()}(this,function(){\"use strict\";var e=navigator.userAgent,t=navigator.platform,g=/gecko\\/\\d/i.test(e),r=/MSIE \\d/.test(e),n=/Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(e),i=/Edge\\/(\\d+)/.exec(e),x=r||n||i,C=x&&(r?document.documentMode||6:+(i||n)[1]),b=!i&&/WebKit\\//.test(e),o=b&&/Qt\\/\\d+\\.\\d+/.test(e),l=!i&&/Chrome\\//.test(e),v=/Opera\\//.test(e),a=/Apple Computer/.test(navigator.vendor),s=/Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(e),u=/PhantomJS/.test(e),c=!i&&/AppleWebKit/.test(e)&&/Mobile\\/\\w+/.test(e),h=/Android/.test(e),f=c||h||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),w=c||/Mac/.test(t),d=/\\bCrOS\\b/.test(e),p=/win/i.test(t),m=v&&e.match(/Version\\/(\\d*\\.\\d*)/);m&&(m=Number(m[1])),m&&15<=m&&(b=!(v=!1));var y=w&&(o||v&&(null==m||m<12.11)),S=g||x&&9<=C;function L(e){return new RegExp(\"(^|\\\\s)\"+e+\"(?:$|\\\\s)\\\\s*\")}var k,T=function(e,t){var r=e.className,n=L(t).exec(r);if(n){var i=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(i?n[1]+i:\"\")}};function M(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function N(e,t){return M(e).appendChild(t)}function A(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),\"string\"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function O(e,t,r,n){var i=A(e,t,r,n);return i.setAttribute(\"role\",\"presentation\"),i}function D(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function W(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function H(e,t){var r=e.className;L(t).test(r)||(e.className+=(r?\" \":\"\")+t)}function F(e,t){for(var r=e.split(\" \"),n=0;n<r.length;n++)r[n]&&!L(r[n]).test(t)&&(t+=\" \"+r[n]);return t}k=document.createRange?function(e,t,r,n){var i=document.createRange();return i.setEnd(n||e,r),i.setStart(e,t),i}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd(\"character\",r),n.moveStart(\"character\",t),n};var P=function(e){e.select()};function E(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function I(e,t,r){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function z(e,t,r,n,i){null==t&&-1==(t=e.search(/[^\\s\\u00a0]/))&&(t=e.length);for(var o=n||0,l=i||0;;){var s=e.indexOf(\"\\t\",o);if(s<0||t<=s)return l+(t-o);l+=s-o,l+=r-l%r,o=s+1}}c?P=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:x&&(P=function(e){try{e.select()}catch(e){}});var R=function(){this.id=null};function B(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}R.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var G=30,U={toString:function(){return\"RevMirror.Pass\"}},V={scroll:!1},K={origin:\"*mouse\"},j={origin:\"+move\"};function X(e,t,r){for(var n=0,i=0;;){var o=e.indexOf(\"\\t\",n);-1==o&&(o=e.length);var l=o-n;if(o==e.length||t<=i+l)return n+Math.min(l,t-i);if(i+=o-n,n=o+1,t<=(i+=r-i%r))return n}}var Y=[\"\"];function _(e){for(;Y.length<=e;)Y.push($(Y)+\" \");return Y[e]}function $(e){return e[e.length-1]}function q(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function Z(){}function Q(e,t){var r;return Object.create?r=Object.create(e):(Z.prototype=e,r=new Z),t&&I(t,r),r}var J=/[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;function ee(e){return/\\w/.test(e)||\"\u0080\"<e&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function te(e,t){return t?!!(-1<t.source.indexOf(\"\\\\w\")&&ee(e))||t.test(e):ee(e)}function re(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ne=/[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;function ie(e){return 768<=e.charCodeAt(0)&&ne.test(e)}function oe(e,t,r){for(;(r<0?0<t:t<e.length)&&ie(e.charAt(t));)t+=r;return t}function le(e,t,r){for(var n=r<t?-1:1;;){if(t==r)return t;var i=(t+r)/2,o=n<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:r;e(o)?r=o:t=o+n}}function se(e,t,r){var n=this;this.input=r,n.scrollbarFiller=A(\"div\",null,\"RevMirror-scrollbar-filler\"),n.scrollbarFiller.setAttribute(\"cm-not-content\",\"true\"),n.gutterFiller=A(\"div\",null,\"RevMirror-gutter-filler\"),n.gutterFiller.setAttribute(\"cm-not-content\",\"true\"),n.lineDiv=O(\"div\",null,\"RevMirror-code\"),n.selectionDiv=A(\"div\",null,null,\"position: relative; z-index: 1\"),n.cursorDiv=A(\"div\",null,\"RevMirror-cursors\"),n.measure=A(\"div\",null,\"RevMirror-measure\"),n.lineMeasure=A(\"div\",null,\"RevMirror-measure\"),n.lineSpace=O(\"div\",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,\"position: relative; outline: none\");var i=O(\"div\",[n.lineSpace],\"RevMirror-lines\");n.mover=A(\"div\",[i],null,\"position: relative\"),n.sizer=A(\"div\",[n.mover],\"RevMirror-sizer\"),n.sizerWidth=null,n.heightForcer=A(\"div\",null,null,\"position: absolute; height: \"+G+\"px; width: 1px;\"),n.gutters=A(\"div\",null,\"RevMirror-gutters\"),n.lineGutter=null,n.scroller=A(\"div\",[n.sizer,n.heightForcer,n.gutters],\"RevMirror-scroll\"),n.scroller.setAttribute(\"tabIndex\",\"-1\"),n.wrapper=A(\"div\",[n.scrollbarFiller,n.gutterFiller,n.scroller],\"RevMirror\"),x&&C<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),b||g&&f||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,r.init(n)}function ae(e,t){if((t-=e.first)<0||t>=e.size)throw new Error(\"There is no line \"+(t+e.first)+\" in the document.\");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function ue(e,r,n){var i=[],o=r.line;return e.iter(r.line,n.line+1,function(e){var t=e.text;o==n.line&&(t=t.slice(0,n.ch)),o==r.line&&(t=t.slice(r.ch)),i.push(t),++o}),i}function ce(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function he(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function fe(e){if(null==e.parent)return null;for(var t=e.parent,r=B(t.lines,e),n=t.parent;n;n=(t=n).parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function de(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var l=0;l<e.lines.length;++l){var s=e.lines[l].height;if(t<s)break;t-=s}return r+l}function pe(e,t){return t>=e.first&&t<e.first+e.size}function ge(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ve(e,t,r){if(void 0===r&&(r=null),!(this instanceof ve))return new ve(e,t,r);this.line=e,this.ch=t,this.sticky=r}function me(e,t){return e.line-t.line||e.ch-t.ch}function ye(e,t){return e.sticky==t.sticky&&0==me(e,t)}function be(e){return ve(e.line,e.ch)}function we(e,t){return me(e,t)<0?t:e}function xe(e,t){return me(e,t)<0?e:t}function Ce(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Se(e,t){if(t.line<e.first)return ve(e.first,0);var r,n,i,o=e.first+e.size-1;return t.line>o?ve(o,ae(e,o).text.length):(n=ae(e,(r=t).line).text.length,null==(i=r.ch)||n<i?ve(r.line,n):i<0?ve(r.line,0):r)}function Le(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=Se(e,t[n]);return r}var ke=!1,Te=!1;function Me(e,t,r){this.marker=e,this.from=t,this.to=r}function Ne(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function Oe(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function Ae(e,t){if(t.full)return null;var r=pe(e,t.from.line)&&ae(e,t.from.line).markedSpans,n=pe(e,t.to.line)&&ae(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,l=0==me(t.from,t.to),s=function(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&\"bookmark\"==l.type&&(!r||!o.marker.insertLeft)){var s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new Me(l,o.from,s?null:o.to))}}return n}(r,i,l),a=function(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.to||(l.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&\"bookmark\"==l.type&&(!r||o.marker.insertLeft)){var s=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new Me(l,s?null:o.from-t,null==o.to?null:o.to-t))}}return n}(n,o,l),u=1==t.text.length,c=$(t.text).length+(u?i:0);if(s)for(var h=0;h<s.length;++h){var f=s[h];if(null==f.to){var d=Ne(a,f.marker);d?u&&(f.to=null==d.to?null:d.to+c):f.to=i}}if(a)for(var p=0;p<a.length;++p){var g=a[p];if(null!=g.to&&(g.to+=c),null==g.from)Ne(s,g.marker)||(g.from=c,u&&(s||(s=[])).push(g));else g.from+=c,u&&(s||(s=[])).push(g)}s&&(s=De(s)),a&&a!=s&&(a=De(a));var v=[s];if(!u){var m,y=t.text.length-2;if(0<y&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(m||(m=[])).push(new Me(s[b].marker,null,null));for(var w=0;w<y;++w)v.push(m);v.push(a)}return v}function De(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function We(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function He(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Fe(e){return e.inclusiveLeft?-1:0}function Pe(e){return e.inclusiveRight?1:0}function Ee(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=me(n.from,i.from)||Fe(e)-Fe(t);if(o)return-o;var l=me(n.to,i.to)||Pe(e)-Pe(t);return l||t.id-e.id}function Ie(e,t){var r,n=Te&&e.markedSpans;if(n)for(var i=void 0,o=0;o<n.length;++o)(i=n[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||Ee(r,i.marker)<0)&&(r=i.marker);return r}function ze(e){return Ie(e,!0)}function Re(e){return Ie(e,!1)}function Be(e,t){var r,n=Te&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!r||Ee(r,o.marker)<0)&&(r=o.marker)}return r}function Ge(e,t,r,n,i){var o=ae(e,t),l=Te&&o.markedSpans;if(l)for(var s=0;s<l.length;++s){var a=l[s];if(a.marker.collapsed){var u=a.marker.find(0),c=me(u.from,r)||Fe(a.marker)-Fe(i),h=me(u.to,n)||Pe(a.marker)-Pe(i);if(!(0<=c&&h<=0||c<=0&&0<=h)&&(c<=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?0<=me(u.to,r):0<me(u.to,r))||0<=c&&(a.marker.inclusiveRight&&i.inclusiveLeft?me(u.from,n)<=0:me(u.from,n)<0)))return!0}}}function Ue(e){for(var t;t=ze(e);)e=t.find(-1,!0).line;return e}function Ve(e,t){var r=ae(e,t),n=Ue(r);return r==n?t:fe(n)}function Ke(e,t){if(t>e.lastLine())return t;var r,n=ae(e,t);if(!je(e,n))return t;for(;r=Re(n);)n=r.find(1,!0).line;return fe(n)+1}function je(e,t){var r=Te&&t.markedSpans;if(r)for(var n=void 0,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Xe(e,t,n))return!0}}function Xe(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return Xe(e,n.line,Ne(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&Xe(e,t,i))return!0}function Ye(e){for(var t=0,r=(e=Ue(e)).parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;o=(r=o).parent)for(var l=0;l<o.children.length;++l){var s=o.children[l];if(s==r)break;t+=s.height}return t}function _e(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=ze(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=Re(n);){var o=t.find(0,!0);r-=n.text.length-o.from.ch,r+=(n=o.to.line).text.length-o.to.ch}return r}function $e(e){var r=e.display,t=e.doc;r.maxLine=ae(t,t.first),r.maxLineLength=_e(r.maxLine),r.maxLineChanged=!0,t.iter(function(e){var t=_e(e);t>r.maxLineLength&&(r.maxLineLength=t,r.maxLine=e)})}var qe=null;function Ze(e,t,r){var n;qe=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&\"before\"==r?n=i:qe=i),o.from==t&&(o.from!=o.to&&\"before\"!=r?n=i:qe=i)}return null!=n?n:qe}var Qe=function(){var I=\"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\",z=\"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";var R=/[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/,B=/[stwN]/,G=/[LRr]/,U=/[Lb1n]/,V=/[1n]/;function K(e,t,r){this.level=e,this.from=t,this.to=r}return function(e,t){var r=\"ltr\"==t?\"L\":\"R\";if(0==e.length||\"ltr\"==t&&!R.test(e))return!1;for(var n,i=e.length,o=[],l=0;l<i;++l)o.push((n=e.charCodeAt(l))<=247?I.charAt(n):1424<=n&&n<=1524?\"R\":1536<=n&&n<=1785?z.charAt(n-1536):1774<=n&&n<=2220?\"r\":8192<=n&&n<=8203?\"w\":8204==n?\"b\":\"L\");for(var s=0,a=r;s<i;++s){var u=o[s];\"m\"==u?o[s]=a:a=u}for(var c=0,h=r;c<i;++c){var f=o[c];\"1\"==f&&\"r\"==h?o[c]=\"n\":G.test(f)&&\"r\"==(h=f)&&(o[c]=\"R\")}for(var d=1,p=o[0];d<i-1;++d){var g=o[d];\"+\"==g&&\"1\"==p&&\"1\"==o[d+1]?o[d]=\"1\":\",\"!=g||p!=o[d+1]||\"1\"!=p&&\"n\"!=p||(o[d]=p),p=g}for(var v=0;v<i;++v){var m=o[v];if(\",\"==m)o[v]=\"N\";else if(\"%\"==m){var y=void 0;for(y=v+1;y<i&&\"%\"==o[y];++y);for(var b=v&&\"!\"==o[v-1]||y<i&&\"1\"==o[y]?\"1\":\"N\",w=v;w<y;++w)o[w]=b;v=y-1}}for(var x=0,C=r;x<i;++x){var S=o[x];\"L\"==C&&\"1\"==S?o[x]=\"L\":G.test(S)&&(C=S)}for(var L=0;L<i;++L)if(B.test(o[L])){var k=void 0;for(k=L+1;k<i&&B.test(o[k]);++k);for(var T=\"L\"==(L?o[L-1]:r),M=T==(\"L\"==(k<i?o[k]:r))?T?\"L\":\"R\":r,N=L;N<k;++N)o[N]=M;L=k-1}for(var O,A=[],D=0;D<i;)if(U.test(o[D])){var W=D;for(++D;D<i&&U.test(o[D]);++D);A.push(new K(0,W,D))}else{var H=D,F=A.length;for(++D;D<i&&\"L\"!=o[D];++D);for(var P=H;P<D;)if(V.test(o[P])){H<P&&A.splice(F,0,new K(1,H,P));var E=P;for(++P;P<D&&V.test(o[P]);++P);A.splice(F,0,new K(2,E,P)),H=P}else++P;H<D&&A.splice(F,0,new K(1,H,D))}return\"ltr\"==t&&(1==A[0].level&&(O=e.match(/^\\s+/))&&(A[0].from=O[0].length,A.unshift(new K(0,0,O[0].length))),1==$(A).level&&(O=e.match(/\\s+$/))&&($(A).to-=O[0].length,A.push(new K(0,i-O[0].length,i)))),\"rtl\"==t?A.reverse():A}}();function Je(e,t){var r=e.order;return null==r&&(r=e.order=Qe(e.text,t)),r}var et=[],tt=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent(\"on\"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||et).concat(r)}};function rt(e,t){return e._handlers&&e._handlers[t]||et}function nt(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent(\"on\"+t,r);else{var n=e._handlers,i=n&&n[t];if(i){var o=B(i,r);-1<o&&(n[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function it(e,t){var r=rt(e,t);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function ot(e,t,r){return\"string\"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),it(e,r||t.type,e,t),ht(t)||t.RevMirrorIgnore}function lt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==B(r,t[n])&&r.push(t[n])}function st(e,t){return 0<rt(e,t).length}function at(e){e.prototype.on=function(e,t){tt(this,e,t)},e.prototype.off=function(e,t){nt(this,e,t)}}function ut(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ct(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ht(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ft(e){ut(e),ct(e)}function dt(e){return e.target||e.srcElement}function pt(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),w&&e.ctrlKey&&1==t&&(t=3),t}var gt,vt,mt=function(){if(x&&C<9)return!1;var e=A(\"div\");return\"draggable\"in e||\"dragDrop\"in e}();function yt(e){if(null==gt){var t=A(\"span\",\"\u200b\");N(e,A(\"span\",[t,document.createTextNode(\"x\")])),0!=e.firstChild.offsetHeight&&(gt=t.offsetWidth<=1&&2<t.offsetHeight&&!(x&&C<8))}var r=gt?A(\"span\",\"\u200b\"):A(\"span\",\"\u00a0\",null,\"display: inline-block; width: 1px; margin-right: -1px\");return r.setAttribute(\"cm-text\",\"\"),r}function bt(e){if(null!=vt)return vt;var t=N(e,document.createTextNode(\"A\u062eA\")),r=k(t,0,1).getBoundingClientRect(),n=k(t,1,2).getBoundingClientRect();return M(e),!(!r||r.left==r.right)&&(vt=n.right-r.right<3)}var wt,xt=3!=\"\\n\\nb\".split(/\\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf(\"\\n\",t);-1==i&&(i=e.length);var o=e.slice(t,\"\\r\"==e.charAt(i-1)?i-1:i),l=o.indexOf(\"\\r\");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\\r\\n?|\\n/)},Ct=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints(\"StartToEnd\",t)},St=\"oncopy\"in(wt=A(\"div\"))||(wt.setAttribute(\"oncopy\",\"return;\"),\"function\"==typeof wt.oncopy),Lt=null;var kt={},Tt={};function Mt(e){if(\"string\"==typeof e&&Tt.hasOwnProperty(e))e=Tt[e];else if(e&&\"string\"==typeof e.name&&Tt.hasOwnProperty(e.name)){var t=Tt[e.name];\"string\"==typeof t&&(t={name:t}),(e=Q(t,e)).name=t.name}else{if(\"string\"==typeof e&&/^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(e))return Mt(\"application/xml\");if(\"string\"==typeof e&&/^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(e))return Mt(\"application/json\")}return\"string\"==typeof e?{name:e}:e||{name:\"null\"}}function Nt(e,t){t=Mt(t);var r=kt[t.name];if(!r)return Nt(e,\"text/plain\");var n=r(e,t);if(Ot.hasOwnProperty(t.name)){var i=Ot[t.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n[\"_\"+o]=n[o]),n[o]=i[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var l in t.modeProps)n[l]=t.modeProps[l];return n}var Ot={};function At(e,t){I(t,Ot.hasOwnProperty(e)?Ot[e]:Ot[e]={})}function Dt(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function Wt(e,t){for(var r;e.innerMode&&(r=e.innerMode(t))&&r.mode!=e;)t=r.state,e=r.mode;return r||{mode:e,state:t}}function Ht(e,t,r){return!e.startState||e.startState(t,r)}var Ft=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};Ft.prototype.eol=function(){return this.pos>=this.string.length},Ft.prototype.sol=function(){return this.pos==this.lineStart},Ft.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ft.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ft.prototype.eat=function(e){var t=this.string.charAt(this.pos);if(\"string\"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ft.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ft.prototype.eatSpace=function(){for(var e=this.pos;/[\\s\\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ft.prototype.skipToEnd=function(){this.pos=this.string.length},Ft.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(-1<t)return this.pos=t,!0},Ft.prototype.backUp=function(e){this.pos-=e},Ft.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=z(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Ft.prototype.indentation=function(){return z(this.string,null,this.tabSize)-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Ft.prototype.match=function(e,t,r){if(\"string\"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&0<n.index?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Ft.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ft.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ft.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ft.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Pt=function(e,t){this.state=e,this.lookAhead=t},Et=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function It(t,r,n,e){var a=[t.state.modeGen],i={};Xt(t,r.text,t.doc.mode,n,function(e,t){return a.push(e,t)},i,e);for(var u=n.state,o=function(e){n.baseTokens=a;var o=t.state.overlays[e],l=1,s=0;n.state=!0,Xt(t,r.text,o.mode,n,function(e,t){for(var r=l;s<e;){var n=a[l];e<n&&a.splice(l,1,e,a[l+1],n),l+=2,s=Math.min(e,n)}if(t)if(o.opaque)a.splice(r,l-r,e,\"overlay \"+t),l=r+2;else for(;r<l;r+=2){var i=a[r+1];a[r+1]=(i?i+\" \":\"\")+\"overlay \"+t}},i),n.state=u,n.baseTokens=null,n.baseTokenPos=1},l=0;l<t.state.overlays.length;++l)o(l);return{styles:a,classes:i.bgClass||i.textClass?i:null}}function zt(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=Rt(e,fe(t)),i=t.text.length>e.options.maxHighlightLength&&Dt(e.doc.mode,n.state),o=It(e,t,n);i&&(n.state=i),t.stateAfter=n.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Rt(r,n,e){var t=r.doc,i=r.display;if(!t.mode.startState)return new Et(t,!0,n);var o=function(e,t,r){for(var n,i,o=e.doc,l=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;l<s;--s){if(s<=o.first)return o.first;var a=ae(o,s-1),u=a.stateAfter;if(u&&(!r||s+(u instanceof Pt?u.lookAhead:0)<=o.modeFrontier))return s;var c=z(a.text,null,e.options.tabSize);(null==i||c<n)&&(i=s-1,n=c)}return i}(r,n,e),l=o>t.first&&ae(t,o-1).stateAfter,s=l?Et.fromSaved(t,l,o):new Et(t,Ht(t.mode),o);return t.iter(o,n,function(e){Bt(r,e.text,s);var t=s.line;e.stateAfter=t==n-1||t%5==0||t>=i.viewFrom&&t<i.viewTo?s.save():null,s.nextLine()}),e&&(t.modeFrontier=s.line),s}function Bt(e,t,r,n){var i=e.doc.mode,o=new Ft(t,e.options.tabSize,r);for(o.start=o.pos=n||0,\"\"==t&&Gt(i,r.state);!o.eol();)Ut(i,o,r.state),o.start=o.pos}function Gt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=Wt(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function Ut(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=Wt(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error(\"Mode \"+e.name+\" failed to advance stream.\")}Et.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Et.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,\"\"),size:this.baseTokens[this.baseTokenPos]-e}},Et.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Et.fromSaved=function(e,t,r){return t instanceof Pt?new Et(e,Dt(e.mode,t.state),r,t.lookAhead):new Et(e,Dt(e.mode,t),r)},Et.prototype.save=function(e){var t=!1!==e?Dt(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new Pt(t,this.maxLookAhead):t};var Vt=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r};function Kt(e,t,r,n){var i,o,l=e.doc,s=l.mode,a=ae(l,(t=Se(l,t)).line),u=Rt(e,t.line,r),c=new Ft(a.text,e.options.tabSize,u);for(n&&(o=[]);(n||c.pos<t.ch)&&!c.eol();)c.start=c.pos,i=Ut(s,c,u.state),n&&o.push(new Vt(c,i,Dt(l.mode,u.state)));return n?o:new Vt(c,i,u.state)}function jt(e,t){if(e)for(;;){var r=e.match(/(?:^|\\s+)line-(background-)?(\\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?\"bgClass\":\"textClass\";null==t[n]?t[n]=r[2]:new RegExp(\"(?:^|s)\"+r[2]+\"(?:$|s)\").test(t[n])||(t[n]+=\" \"+r[2])}return e}function Xt(e,t,r,n,i,o,l){var s=r.flattenSpans;null==s&&(s=e.options.flattenSpans);var a,u=0,c=null,h=new Ft(t,e.options.tabSize,n),f=e.options.addModeClass&&[null];for(\"\"==t&&jt(Gt(r,n.state),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(s=!1,l&&Bt(e,t,n,h.pos),h.pos=t.length,a=null):a=jt(Ut(r,h,n.state,f),o),f){var d=f[0].name;d&&(a=\"m-\"+(a?d+\" \"+a:d))}if(!s||c!=a){for(;u<h.start;)i(u=Math.min(h.start,u+5e3),c);c=a}h.start=h.pos}for(;u<h.pos;){var p=Math.min(h.pos,u+5e3);i(p,c),u=p}}var Yt=function(e,t,r){this.text=e,He(this,t),this.height=r?r(this):1};Yt.prototype.lineNo=function(){return fe(this)},at(Yt);var _t={},$t={};function qt(e,t){if(!e||/^\\s*$/.test(e))return null;var r=t.addModeClass?$t:_t;return r[e]||(r[e]=e.replace(/\\S+/g,\"cm-$&\"))}function Zt(e,t){var r=O(\"span\",null,null,b?\"padding-right: .1px\":null),n={pre:O(\"pre\",[r],\"RevMirror-line\"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(x||b)&&e.getOption(\"lineWrapping\")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,l=void 0;n.pos=0,n.addToken=Jt,bt(e.display.measure)&&(l=Je(o,e.doc.direction))&&(n.addToken=er(n.addToken,l)),n.map=[],rr(o,n,zt(e,o,t!=e.display.externalMeasured&&fe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=F(o.styleClasses.bgClass,n.bgClass||\"\")),o.styleClasses.textClass&&(n.textClass=F(o.styleClasses.textClass,n.textClass||\"\"))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(yt(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(b){var s=n.content.lastChild;(/\\bcm-tab\\b/.test(s.className)||s.querySelector&&s.querySelector(\".cm-tab\"))&&(n.content.className=\"cm-tab-wrap-hack\")}return it(e,\"renderLine\",e,t.line,n.pre),n.pre.className&&(n.textClass=F(n.pre.className,n.textClass||\"\")),n}function Qt(e){var t=A(\"span\",\"\u2022\",\"cm-invalidchar\");return t.title=\"\\\\u\"+e.charCodeAt(0).toString(16),t.setAttribute(\"aria-label\",t.title),t}function Jt(e,t,r,n,i,o,l){if(t){var s,a=e.splitSpaces?function(e,t){if(1<e.length&&!/  /.test(e))return e;for(var r=t,n=\"\",i=0;i<e.length;i++){var o=e.charAt(i);\" \"!=o||!r||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=\"\u00a0\"),n+=o,r=\" \"==o}return n}(t,e.trailingSpace):t,u=e.cm.state.specialChars,c=!1;if(u.test(t)){s=document.createDocumentFragment();for(var h=0;;){u.lastIndex=h;var f=u.exec(t),d=f?f.index-h:t.length-h;if(d){var p=document.createTextNode(a.slice(h,h+d));x&&C<9?s.appendChild(A(\"span\",[p])):s.appendChild(p),e.map.push(e.pos,e.pos+d,p),e.col+=d,e.pos+=d}if(!f)break;h+=d+1;var g=void 0;if(\"\\t\"==f[0]){var v=e.cm.options.tabSize,m=v-e.col%v;(g=s.appendChild(A(\"span\",_(m),\"cm-tab\"))).setAttribute(\"role\",\"presentation\"),g.setAttribute(\"cm-text\",\"\\t\"),e.col+=m}else\"\\r\"==f[0]||\"\\n\"==f[0]?(g=s.appendChild(A(\"span\",\"\\r\"==f[0]?\"\u240d\":\"\u2424\",\"cm-invalidchar\"))).setAttribute(\"cm-text\",f[0]):((g=e.cm.options.specialCharPlaceholder(f[0])).setAttribute(\"cm-text\",f[0]),x&&C<9?s.appendChild(A(\"span\",[g])):s.appendChild(g)),e.col+=1;e.map.push(e.pos,e.pos+1,g),e.pos++}}else e.col+=t.length,s=document.createTextNode(a),e.map.push(e.pos,e.pos+t.length,s),x&&C<9&&(c=!0),e.pos+=t.length;if(e.trailingSpace=32==a.charCodeAt(t.length-1),r||n||i||c||l){var y=r||\"\";n&&(y+=n),i&&(y+=i);var b=A(\"span\",[s],y,l);return o&&(b.title=o),e.content.appendChild(b)}e.content.appendChild(s)}}function er(h,f){return function(e,t,r,n,i,o,l){r=r?r+\" cm-force-border\":\"cm-force-border\";for(var s=e.pos,a=s+t.length;;){for(var u=void 0,c=0;c<f.length&&!((u=f[c]).to>s&&u.from<=s);c++);if(u.to>=a)return h(e,t,r,n,i,o,l);h(e,t.slice(0,u.to-s),r,n,null,o,l),n=null,t=t.slice(u.to-s),s=u.to}}}function tr(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement(\"span\"))),i.setAttribute(\"cm-marker\",r.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function rr(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var l,s,a,u,c,h,f,d=i.length,p=0,g=1,v=\"\",m=0;;){if(m==p){a=u=c=h=s=\"\",f=null,m=1/0;for(var y=[],b=void 0,w=0;w<n.length;++w){var x=n[w],C=x.marker;\"bookmark\"==C.type&&x.from==p&&C.widgetNode?y.push(C):x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)?(null!=x.to&&x.to!=p&&m>x.to&&(m=x.to,u=\"\"),C.className&&(a+=\" \"+C.className),C.css&&(s=(s?s+\";\":\"\")+C.css),C.startStyle&&x.from==p&&(c+=\" \"+C.startStyle),C.endStyle&&x.to==m&&(b||(b=[])).push(C.endStyle,x.to),C.title&&!h&&(h=C.title),C.collapsed&&(!f||Ee(f.marker,C)<0)&&(f=x)):x.from>p&&m>x.from&&(m=x.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==m&&(u+=\" \"+b[S]);if(!f||f.from==p)for(var L=0;L<y.length;++L)tr(t,0,y[L]);if(f&&(f.from||0)==p){if(tr(t,(null==f.to?d+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(d<=p)break;for(var k=Math.min(d,m);;){if(v){var T=p+v.length;if(!f){var M=k<T?v.slice(0,k-p):v;t.addToken(t,M,l?l+a:a,c,p+M.length==m?u:\"\",h,s)}if(k<=T){v=v.slice(k-p),p=k;break}p=T,c=\"\"}v=i.slice(o,o=r[g++]),l=qt(r[g++],t.cm.options)}}else for(var N=1;N<r.length;N+=2)t.addToken(t,i.slice(o,o=r[N]),qt(r[N+1],t.cm.options))}function nr(e,t,r){this.line=t,this.rest=function(e){for(var t,r;t=Re(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}(t),this.size=this.rest?fe($(this.rest))-r+1:1,this.node=this.text=null,this.hidden=je(e,t)}function ir(e,t,r){for(var n,i=[],o=t;o<r;o=n){var l=new nr(e.doc,ae(e.doc,o),o);n=o+l.size,i.push(l)}return i}var or=null;var lr=null;function sr(e,t){var r=rt(e,t);if(r.length){var n,i=Array.prototype.slice.call(arguments,2);or?n=or.delayedCallbacks:lr?n=lr:(n=lr=[],setTimeout(ar,0));for(var o=function(e){n.push(function(){return r[e].apply(null,i)})},l=0;l<r.length;++l)o(l)}}function ar(){var e=lr;lr=null;for(var t=0;t<e.length;++t)e[t]()}function ur(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];\"text\"==o?fr(e,t):\"gutter\"==o?pr(e,t,r,n):\"class\"==o?dr(e,t):\"widget\"==o&&gr(e,t,n)}t.changes=null}function cr(e){return e.node==e.text&&(e.node=A(\"div\",null,null,\"position: relative\"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),x&&C<8&&(e.node.style.zIndex=2)),e.node}function hr(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):Zt(e,t)}function fr(e,t){var r=t.text.className,n=hr(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,dr(e,t)):r&&(t.text.className=r)}function dr(e,t){!function(e,t){var r=t.bgClass?t.bgClass+\" \"+(t.line.bgClass||\"\"):t.line.bgClass;if(r&&(r+=\" RevMirror-linebackground\"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var n=cr(t);t.background=n.insertBefore(A(\"div\",null,r),n.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?cr(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=\"\");var r=t.textClass?t.textClass+\" \"+(t.line.textClass||\"\"):t.line.textClass;t.text.className=r||\"\"}function pr(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=cr(t);t.gutterBackground=A(\"div\",null,\"RevMirror-gutter-background \"+t.line.gutterClass,\"left: \"+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+\"px; width: \"+n.gutterTotalWidth+\"px\"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var l=cr(t),s=t.gutter=A(\"div\",null,\"RevMirror-gutter-wrapper\",\"left: \"+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+\"px\");if(e.display.input.setUneditable(s),l.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=\" \"+t.line.gutterClass),!e.options.lineNumbers||o&&o[\"RevMirror-linenumbers\"]||(t.lineNumber=s.appendChild(A(\"div\",ge(e.options,r),\"RevMirror-linenumber RevMirror-gutter-elt\",\"left: \"+n.gutterLeft[\"RevMirror-linenumbers\"]+\"px; width: \"+e.display.lineNumInnerWidth+\"px\"))),o)for(var a=0;a<e.options.gutters.length;++a){var u=e.options.gutters[a],c=o.hasOwnProperty(u)&&o[u];c&&s.appendChild(A(\"div\",[c],\"RevMirror-gutter-elt\",\"left: \"+n.gutterLeft[u]+\"px; width: \"+n.gutterWidth[u]+\"px\"))}}}function gr(e,t,r){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild,i=void 0;n;n=i)i=n.nextSibling,\"RevMirror-linewidget\"==n.className&&t.node.removeChild(n);vr(e,t,r)}function vr(e,t,r){if(mr(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)mr(e,t.rest[n],t,r,!1)}function mr(e,t,r,n,i){if(t.widgets)for(var o=cr(r),l=0,s=t.widgets;l<s.length;++l){var a=s[l],u=A(\"div\",[a.node],\"RevMirror-linewidget\");a.handleMouseEvents||u.setAttribute(\"cm-ignore-events\",\"true\"),yr(a,u,r,n),e.display.input.setUneditable(u),i&&a.above?o.insertBefore(u,r.gutter||r.text):o.appendChild(u),sr(a,\"redraw\")}}function yr(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+\"px\",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+\"px\"),t.style.width=i+\"px\"}e.coverGutter&&(t.style.zIndex=5,t.style.position=\"relative\",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+\"px\"))}function br(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!D(document.body,e.node)){var r=\"position: relative;\";e.coverGutter&&(r+=\"margin-left: -\"+t.display.gutters.offsetWidth+\"px;\"),e.noHScroll&&(r+=\"width: \"+t.display.wrapper.clientWidth+\"px;\"),N(t.display.measure,A(\"div\",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function wr(e,t){for(var r=dt(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&\"true\"==r.getAttribute(\"cm-ignore-events\")||r.parentNode==e.sizer&&r!=e.mover)return!0}function xr(e){return e.lineSpace.offsetTop}function Cr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Sr(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=N(e.measure,A(\"pre\",\"x\")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Lr(e){return G-e.display.nativeBarWidth}function kr(e){return e.display.scroller.clientWidth-Lr(e)-e.display.barWidth}function Tr(e){return e.display.scroller.clientHeight-Lr(e)-e.display.barHeight}function Mr(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var i=0;i<e.rest.length;i++)if(fe(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Nr(e,t,r,n){return Dr(e,Ar(e,t),r,n)}function Or(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[sn(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function Ar(e,t){var r=fe(t),n=Or(e,r);n&&!n.text?n=null:n&&n.changes&&(ur(e,n,r,tn(e)),e.curOp.forceUpdate=!0),n||(n=function(e,t){var r=fe(t=Ue(t)),n=e.display.externalMeasured=new nr(e.doc,t,r);n.lineN=r;var i=n.built=Zt(e,n);return n.text=i.pre,N(e.display.lineMeasure,i.pre),n}(e,t));var i=Mr(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Dr(e,t,r,n,i){t.before&&(r=-1);var o,l=r+(n||\"\");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,r){var n=e.options.lineWrapping,i=n&&kr(e);if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var l=t.text.firstChild.getClientRects(),s=0;s<l.length-1;s++){var a=l[s],u=l[s+1];2<Math.abs(a.bottom-u.bottom)&&o.push((a.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,r,n){var i,o=Fr(t.map,r,n),l=o.node,s=o.start,a=o.end,u=o.collapse;if(3==l.nodeType){for(var c=0;c<4;c++){for(;s&&ie(t.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+a<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+a));)++a;if((i=x&&C<9&&0==s&&a==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Pr(k(l,s,a).getClientRects(),n)).left||i.right||0==s)break;a=s,s-=1,u=\"right\"}x&&C<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Lt)return Lt;var t=N(e,A(\"span\",\"x\")),r=t.getBoundingClientRect(),n=k(t,0,1).getBoundingClientRect();return Lt=1<Math.abs(r.left-n.left)}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}(e.display.measure,i))}else{var h;0<s&&(u=n=\"right\"),i=e.options.lineWrapping&&1<(h=l.getClientRects()).length?h[\"right\"==n?h.length-1:0]:l.getBoundingClientRect()}if(x&&C<9&&!s&&(!i||!i.left&&!i.right)){var f=l.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+en(e.display),top:f.top,bottom:f.bottom}:Hr}for(var d=i.top-t.rect.top,p=i.bottom-t.rect.top,g=(d+p)/2,v=t.view.measure.heights,m=0;m<v.length-1&&!(g<v[m]);m++);var y=m?v[m-1]:0,b=v[m],w={left:(\"right\"==u?i.right:i.left)-t.rect.left,right:(\"left\"==u?i.left:i.right)-t.rect.left,top:y,bottom:b};i.left||i.right||(w.bogus=!0);e.options.singleCursorHeightPerLine||(w.rtop=d,w.rbottom=p);return w}(e,t,r,n)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Wr,Hr={left:0,right:0,top:0,bottom:0};function Fr(e,t,r){for(var n,i,o,l,s,a,u=0;u<e.length;u+=3)if(s=e[u],a=e[u+1],t<s?(i=0,o=1,l=\"left\"):t<a?o=(i=t-s)+1:(u==e.length-3||t==a&&e[u+3]>t)&&(i=(o=a-s)-1,a<=t&&(l=\"right\")),null!=i){if(n=e[u+2],s==a&&r==(n.insertLeft?\"left\":\"right\")&&(l=r),\"left\"==r&&0==i)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)n=e[2+(u-=3)],l=\"left\";if(\"right\"==r&&i==a-s)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)n=e[(u+=3)+2],l=\"right\";break}return{node:n,start:i,end:o,collapse:l,coverStart:s,coverEnd:a}}function Pr(e,t){var r=Hr;if(\"left\"==t)for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var i=e.length-1;0<=i&&(r=e[i]).left==r.right;i--);return r}function Er(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Ir(e){e.display.externalMeasure=null,M(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Er(e.display.view[t])}function zr(e){Ir(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Rr(){return l&&h?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Br(){return l&&h?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Gr(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=br(e.widgets[r]));return t}function Ur(e,t,r,n,i){if(!i){var o=Gr(t);r.top+=o,r.bottom+=o}if(\"line\"==n)return r;n||(n=\"local\");var l=Ye(t);if(\"local\"==n?l+=xr(e.display):l-=e.display.viewOffset,\"page\"==n||\"window\"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+(\"window\"==n?0:Br());var a=s.left+(\"window\"==n?0:Rr());r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function Vr(e,t,r){if(\"div\"==r)return t;var n=t.left,i=t.top;if(\"page\"==r)n-=Rr(),i-=Br();else if(\"local\"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:i-l.top}}function Kr(e,t,r,n,i){return n||(n=ae(e.doc,t.line)),Ur(e,n,Nr(e,n,t.ch,i),r)}function jr(n,e,i,o,l,s){function a(e,t){var r=Dr(n,l,e,t?\"right\":\"left\",s);return t?r.left=r.right:r.right=r.left,Ur(n,o,r,i)}o=o||ae(n.doc,e.line),l||(l=Ar(n,o));var u=Je(o,n.doc.direction),t=e.ch,r=e.sticky;if(t>=o.text.length?(t=o.text.length,r=\"before\"):t<=0&&(t=0,r=\"after\"),!u)return a(\"before\"==r?t-1:t,\"before\"==r);function c(e,t,r){return a(r?e-1:e,1==u[t].level!=r)}var h=Ze(u,t,r),f=qe,d=c(t,h,\"before\"==r);return null!=f&&(d.other=c(t,f,\"before\"!=r)),d}function Xr(e,t){var r=0;t=Se(e.doc,t),e.options.lineWrapping||(r=en(e.display)*t.ch);var n=ae(e.doc,t.line),i=Ye(n)+xr(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function Yr(e,t,r,n,i){var o=ve(e,t,r);return o.xRel=i,n&&(o.outside=!0),o}function _r(e,t,r){var n=e.doc;if((r+=e.display.viewOffset)<0)return Yr(n.first,0,null,!0,-1);var i=de(n,r),o=n.first+n.size-1;if(o<i)return Yr(n.first+n.size-1,ae(n,o).text.length,null,!0,1);t<0&&(t=0);for(var l=ae(n,i);;){var s=Qr(e,l,i,t,r),a=Be(l,s.ch+(0<s.xRel?1:0));if(!a)return s;var u=a.find(1);if(u.line==i)return u;l=ae(n,i=u.line)}}function $r(t,e,r,n){n-=Gr(e);var i=e.text.length,o=le(function(e){return Dr(t,r,e-1).bottom<=n},i,0);return{begin:o,end:i=le(function(e){return Dr(t,r,e).top>n},o,i)}}function qr(e,t,r,n){return r||(r=Ar(e,t)),$r(e,t,r,Ur(e,t,Dr(e,r,n),\"line\").top)}function Zr(e,t,r,n){return!(e.bottom<=r)&&(e.top>r||(n?e.left:e.right)>t)}function Qr(r,e,t,n,i){i-=Ye(e);var o=Ar(r,e),l=Gr(e),s=0,a=e.text.length,u=!0,c=Je(e,r.doc.direction);if(c){var h=(r.options.lineWrapping?function(e,t,r,n,i,o,l){var s=$r(e,t,n,l),a=s.begin,u=s.end;/\\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,h=null,f=0;f<i.length;f++){var d=i[f];if(!(d.from>=u||d.to<=a)){var p=1!=d.level,g=Dr(e,n,p?Math.min(u,d.to)-1:Math.max(a,d.from)).right,v=g<o?o-g+1e9:g-o;(!c||v<h)&&(c=d,h=v)}}c||(c=i[i.length-1]);c.from<a&&(c={from:a,to:c.to,level:c.level});c.to>u&&(c={from:c.from,to:u,level:c.level});return c}:function(n,i,o,l,s,a,u){var e=le(function(e){var t=s[e],r=1!=t.level;return Zr(jr(n,ve(o,r?t.to:t.from,r?\"before\":\"after\"),\"line\",i,l),a,u,!0)},0,s.length-1),t=s[e];if(0<e){var r=1!=t.level,c=jr(n,ve(o,r?t.from:t.to,r?\"after\":\"before\"),\"line\",i,l);Zr(c,a,u,!0)&&c.top>u&&(t=s[e-1])}return t})(r,e,t,o,c,n,i);s=(u=1!=h.level)?h.from:h.to-1,a=u?h.to:h.from-1}var f,d,p=null,g=null,v=le(function(e){var t=Dr(r,o,e);return t.top+=l,t.bottom+=l,!!Zr(t,n,i,!1)&&(t.top<=i&&t.left<=n&&(p=e,g=t),!0)},s,a),m=!1;if(g){var y=n-g.left<g.right-n,b=y==u;v=p+(b?0:1),d=b?\"after\":\"before\",f=y?g.left:g.right}else{u||v!=a&&v!=s||v++,d=0==v?\"after\":v==e.text.length?\"before\":Dr(r,o,v-(u?1:0)).bottom+l<=i==u?\"after\":\"before\";var w=jr(r,ve(t,v,d),\"line\",e,o);f=w.left,m=i<w.top||i>=w.bottom}return Yr(t,v=oe(e.text,v,1),d,m,n-f)}function Jr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Wr){Wr=A(\"pre\");for(var t=0;t<49;++t)Wr.appendChild(document.createTextNode(\"x\")),Wr.appendChild(A(\"br\"));Wr.appendChild(document.createTextNode(\"x\"))}N(e.measure,Wr);var r=Wr.offsetHeight/50;return 3<r&&(e.cachedTextHeight=r),M(e.measure),r||1}function en(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=A(\"span\",\"xxxxxxxxxx\"),r=A(\"pre\",[t]);N(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return 2<i&&(e.cachedCharWidth=i),i||10}function tn(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,l=0;o;o=o.nextSibling,++l)r[e.options.gutters[l]]=o.offsetLeft+o.clientLeft+i,n[e.options.gutters[l]]=o.clientWidth;return{fixedPos:rn(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function rn(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function nn(n){var i=Jr(n.display),o=n.options.lineWrapping,l=o&&Math.max(5,n.display.scroller.clientWidth/en(n.display)-3);return function(e){if(je(n.doc,e))return 0;var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;r++)e.widgets[r].height&&(t+=e.widgets[r].height);return o?t+(Math.ceil(e.text.length/l)||1)*i:t+i}}function on(e){var t=e.doc,r=nn(e);t.iter(function(e){var t=r(e);t!=e.height&&he(e,t)})}function ln(e,t,r,n){var i=e.display;if(!r&&\"true\"==dt(t).getAttribute(\"cm-not-content\"))return null;var o,l,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,l=t.clientY-s.top}catch(t){return null}var a,u=_r(e,o,l);if(n&&1==u.xRel&&(a=ae(e.doc,u.line).text).length==u.ch){var c=z(a,a.length,e.options.tabSize)-a.length;u=ve(u.line,Math.max(0,Math.round((o-Sr(e.display).left)/en(e.display))-c))}return u}function sn(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if((t-=r[n].size)<0)return n}function an(e){e.display.input.showSelection(e.display.input.prepareSelection())}function un(e,t){void 0===t&&(t=!0);for(var r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=0;l<r.sel.ranges.length;l++)if(t||l!=r.sel.primIndex){var s=r.sel.ranges[l];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var a=s.empty();(a||e.options.showCursorWhenSelecting)&&cn(e,s.head,i),a||fn(e,s,o)}}return n}function cn(e,t,r){var n=jr(e,t,\"div\",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(A(\"div\",\"\u00a0\",\"RevMirror-cursor\"));if(i.style.left=n.left+\"px\",i.style.top=n.top+\"px\",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+\"px\",n.other){var o=r.appendChild(A(\"div\",\"\u00a0\",\"RevMirror-cursor RevMirror-secondarycursor\"));o.style.display=\"\",o.style.left=n.other.left+\"px\",o.style.top=n.other.top+\"px\",o.style.height=.85*(n.other.bottom-n.other.top)+\"px\"}}function hn(e,t){return e.top-t.top||e.left-t.left}function fn(l,e,t){var r=l.display,n=l.doc,i=document.createDocumentFragment(),o=Sr(l.display),T=o.left,M=Math.max(r.sizerWidth,kr(l)-r.sizer.offsetLeft)-o.right,N=\"ltr\"==n.direction;function O(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),i.appendChild(A(\"div\",null,\"RevMirror-selected\",\"position: absolute; left: \"+e+\"px;\\n                             top: \"+t+\"px; width: \"+(null==r?M-e:r)+\"px;\\n                             height: \"+(n-t)+\"px\"))}function s(r,y,b){var w,x,o=ae(n,r),C=o.text.length;function S(e,t){return Kr(l,ve(r,e),\"div\",o,t)}function L(e,t,r){var n=qr(l,o,null,e),i=\"ltr\"==t==(\"after\"==r)?\"left\":\"right\";return S(\"after\"==r?n.begin:n.end-(/\\s/.test(o.text.charAt(n.end-1))?2:1),i)[i]}var k=Je(o,n.direction);return function(e,t,r,n){if(!e)return n(t,r,\"ltr\",0);for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<r&&l.to>t||t==r&&l.to==t)&&(n(Math.max(l.from,t),Math.min(l.to,r),1==l.level?\"rtl\":\"ltr\",o),i=!0)}i||n(t,r,\"ltr\")}(k,y||0,null==b?C:b,function(e,t,r,n){var i=\"ltr\"==r,o=S(e,i?\"left\":\"right\"),l=S(t-1,i?\"right\":\"left\"),s=null==y&&0==e,a=null==b&&t==C,u=0==n,c=!k||n==k.length-1;if(l.top-o.top<=3){var h=(N?a:s)&&c,f=(N?s:a)&&u?T:(i?o:l).left,d=h?M:(i?l:o).right;O(f,o.top,d-f,o.bottom)}else{var p,g,v,m;i?(p=N&&s&&u?T:o.left,g=N?M:L(e,r,\"before\"),v=N?T:L(t,r,\"after\"),m=N&&a&&c?M:l.right):(p=N?L(e,r,\"before\"):T,g=!N&&s&&u?M:o.right,v=!N&&a&&c?T:l.left,m=N?L(t,r,\"after\"):M),O(p,o.top,g-p,o.bottom),o.bottom<l.top&&O(T,o.bottom,null,l.top),O(v,l.top,m-v,l.bottom)}(!w||hn(o,w)<0)&&(w=o),hn(l,w)<0&&(w=l),(!x||hn(o,x)<0)&&(x=o),hn(l,x)<0&&(x=l)}),{start:w,end:x}}var a=e.from(),u=e.to();if(a.line==u.line)s(a.line,a.ch,u.ch);else{var c=ae(n,a.line),h=ae(n,u.line),f=Ue(c)==Ue(h),d=s(a.line,a.ch,f?c.text.length+1:null).end,p=s(u.line,f?0:null,u.ch).start;f&&(d.top<p.top-2?(O(d.right,d.top,null,d.bottom),O(T,p.top,p.left,p.bottom)):O(d.right,d.top,p.left-d.right,d.bottom)),d.bottom<p.top&&O(T,d.bottom,null,p.top)}t.appendChild(i)}function dn(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility=\"\",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(r=!r)?\"\":\"hidden\"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility=\"hidden\")}}function pn(e){e.state.focused||(e.display.input.focus(),vn(e))}function gn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,mn(e))},100)}function vn(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),\"nocursor\"!=e.options.readOnly&&(e.state.focused||(it(e,\"focus\",e,t),e.state.focused=!0,H(e.display.wrapper,\"RevMirror-focused\"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),b&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),dn(e))}function mn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(it(e,\"blur\",e,t),e.state.focused=!1,T(e.display.wrapper,\"RevMirror-focused\")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function yn(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i=t.view[n],o=void 0;if(!i.hidden){if(x&&C<8){var l=i.node.offsetTop+i.node.offsetHeight;o=l-r,r=l}else{var s=i.node.getBoundingClientRect();o=s.bottom-s.top}var a=i.line.height-o;if(o<2&&(o=Jr(t)),(.005<a||a<-.005)&&(he(i.line,o),bn(i.line),i.rest))for(var u=0;u<i.rest.length;u++)bn(i.rest[u])}}}function bn(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function wn(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-xr(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=de(t,n),l=de(t,i);if(r&&r.ensure){var s=r.ensure.from.line,a=r.ensure.to.line;s<o?l=de(t,Ye(ae(t,o=s))+e.wrapper.clientHeight):Math.min(a,t.lastLine())>=l&&(o=de(t,Ye(ae(t,a))-e.wrapper.clientHeight),l=a)}return{from:o,to:Math.max(l,o+1)}}function xn(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=rn(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+\"px\",l=0;l<r.length;l++)if(!r[l].hidden){e.options.fixedGutter&&(r[l].gutter&&(r[l].gutter.style.left=o),r[l].gutterBackground&&(r[l].gutterBackground.style.left=o));var s=r[l].alignable;if(s)for(var a=0;a<s.length;a++)s[a].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+\"px\")}}function Cn(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=ge(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(A(\"div\",[A(\"div\",r)],\"RevMirror-linenumber RevMirror-gutter-elt\")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width=\"\",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l)+1,n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+\"px\",si(e),!0}return!1}function Sn(e,t){var r=e.display,n=Jr(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop,o=Tr(e),l={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+Cr(r),a=t.top<n,u=t.bottom>s-n;if(t.top<i)l.scrollTop=a?0:t.top;else if(t.bottom>i+o){var c=Math.min(t.top,(u?s:t.bottom)-o);c!=i&&(l.scrollTop=c)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft,f=kr(e)-(e.options.fixedGutter?r.gutters.offsetWidth:0),d=t.right-t.left>f;return d&&(t.right=t.left+f),t.left<10?l.scrollLeft=0:t.left<h?l.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>f+h-3&&(l.scrollLeft=t.right+(d?0:10)-f),l}function Ln(e,t){null!=t&&(Mn(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function kn(e){Mn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Tn(e,t,r){null==t&&null==r||Mn(e),null!=t&&(e.curOp.scrollLeft=t),null!=r&&(e.curOp.scrollTop=r)}function Mn(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Nn(e,Xr(e,t.from),Xr(e,t.to),t.margin))}function Nn(e,t,r,n){var i=Sn(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});Tn(e,i.scrollLeft,i.scrollTop)}function On(e,t){Math.abs(e.doc.scrollTop-t)<2||(g||li(e,{top:t}),An(e,t,!0),g&&li(e),ti(e,100))}function An(e,t,r){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Dn(e,t,r,n){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,xn(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Wn(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+Cr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+Lr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}var Hn=function(e,t,r){this.cm=r;var n=this.vert=A(\"div\",[A(\"div\",null,null,\"min-width: 1px\")],\"RevMirror-vscrollbar\"),i=this.horiz=A(\"div\",[A(\"div\",null,null,\"height: 100%; min-height: 1px\")],\"RevMirror-hscrollbar\");n.tabIndex=i.tabIndex=-1,e(n),e(i),tt(n,\"scroll\",function(){n.clientHeight&&t(n.scrollTop,\"vertical\")}),tt(i,\"scroll\",function(){i.clientWidth&&t(i.scrollLeft,\"horizontal\")}),this.checkedZeroWidth=!1,x&&C<8&&(this.horiz.style.minHeight=this.vert.style.minWidth=\"18px\")};Hn.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display=\"block\",this.vert.style.bottom=t?n+\"px\":\"0\";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+\"px\"}else this.vert.style.display=\"\",this.vert.firstChild.style.height=\"0\";if(t){this.horiz.style.display=\"block\",this.horiz.style.right=r?n+\"px\":\"0\",this.horiz.style.left=e.barLeft+\"px\";var o=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+\"px\"}else this.horiz.style.display=\"\",this.horiz.firstChild.style.width=\"0\";return!this.checkedZeroWidth&&0<e.clientHeight&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},Hn.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,\"horiz\")},Hn.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,\"vert\")},Hn.prototype.zeroWidthHack=function(){var e=w&&!s?\"12px\":\"18px\";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents=\"none\",this.disableHoriz=new R,this.disableVert=new R},Hn.prototype.enableZeroWidthBar=function(r,n,i){r.style.pointerEvents=\"auto\",n.set(1e3,function e(){var t=r.getBoundingClientRect();(\"vert\"==i?document.elementFromPoint(t.right-1,(t.top+t.bottom)/2):document.elementFromPoint((t.right+t.left)/2,t.bottom-1))!=r?r.style.pointerEvents=\"none\":n.set(1e3,e)})},Hn.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Fn=function(){};function Pn(e,t){t||(t=Wn(e));var r=e.display.barWidth,n=e.display.barHeight;En(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&yn(e),En(e,Wn(e)),r=e.display.barWidth,n=e.display.barHeight}function En(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+\"px\",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+\"px\",r.heightForcer.style.borderBottom=n.bottom+\"px solid transparent\",n.right&&n.bottom?(r.scrollbarFiller.style.display=\"block\",r.scrollbarFiller.style.height=n.bottom+\"px\",r.scrollbarFiller.style.width=n.right+\"px\"):r.scrollbarFiller.style.display=\"\",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display=\"block\",r.gutterFiller.style.height=n.bottom+\"px\",r.gutterFiller.style.width=t.gutterWidth+\"px\"):r.gutterFiller.style.display=\"\"}Fn.prototype.update=function(){return{bottom:0,right:0}},Fn.prototype.setScrollLeft=function(){},Fn.prototype.setScrollTop=function(){},Fn.prototype.clear=function(){};var In={native:Hn,null:Fn};function zn(r){r.display.scrollbars&&(r.display.scrollbars.clear(),r.display.scrollbars.addClass&&T(r.display.wrapper,r.display.scrollbars.addClass)),r.display.scrollbars=new In[r.options.scrollbarStyle](function(e){r.display.wrapper.insertBefore(e,r.display.scrollbarFiller),tt(e,\"mousedown\",function(){r.state.focused&&setTimeout(function(){return r.display.input.focus()},0)}),e.setAttribute(\"cm-not-content\",\"true\")},function(e,t){\"horizontal\"==t?Dn(r,e):On(r,e)},r),r.display.scrollbars.addClass&&H(r.display.wrapper,r.display.scrollbars.addClass)}var Rn=0;function Bn(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Rn},t=e.curOp,or?or.ops.push(t):t.ownsGroup=or={ops:[t],delayedCallbacks:[]}}function Gn(e){!function(e,t){var r=e.ownsGroup;if(r)try{!function(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}(r)}finally{or=null,t(r)}}(e.curOp,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,r=0;r<t.length;r++)Un(t[r]);for(var n=0;n<t.length;n++)(i=t[n]).updatedDisplay=i.mustUpdate&&ii(i.cm,i.update);var i;for(var o=0;o<t.length;o++)Vn(t[o]);for(var l=0;l<t.length;l++)Kn(t[l]);for(var s=0;s<t.length;s++)jn(t[s])}(e)})}function Un(e){var t,r,n=e.cm,i=n.display;!(r=(t=n).display).scrollbarsClipped&&r.scroller.offsetWidth&&(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=Lr(t)+\"px\",r.sizer.style.marginBottom=-r.nativeBarWidth+\"px\",r.sizer.style.borderRightWidth=Lr(t)+\"px\",r.scrollbarsClipped=!0),e.updateMaxLine&&$e(n),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&n.options.lineWrapping,e.update=e.mustUpdate&&new ni(n,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Vn(e){var t=e.cm,r=t.display;e.updatedDisplay&&yn(t),e.barMeasure=Wn(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Nr(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Lr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-kr(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function Kn(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+\"px\",e.maxScrollLeft<t.doc.scrollLeft&&Dn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==W();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Pn(t,e.barMeasure),e.updatedDisplay&&ai(t,e.barMeasure),e.selectionChanged&&dn(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&pn(e.cm)}function jn(e){var t=e.cm,r=t.display,n=t.doc;(e.updatedDisplay&&oi(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&An(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Dn(t,e.scrollLeft,!0,!0),e.scrollToPos)&&function(e,t){if(!ot(e,\"scrollCursorIntoView\")){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!u){var o=A(\"div\",\"\u200b\",null,\"position: absolute;\\n                         top: \"+(t.top-r.viewOffset-xr(e.display))+\"px;\\n                         height: \"+(t.bottom-t.top+Lr(e)+r.barHeight)+\"px;\\n                         left: \"+t.left+\"px; width: \"+Math.max(2,t.right-t.left)+\"px;\");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,r,n){var i;null==n&&(n=0),e.options.lineWrapping||t!=r||(r=\"before\"==(t=t.ch?ve(t.line,\"before\"==t.sticky?t.ch-1:t.ch,\"after\"):t).sticky?ve(t.line,t.ch+1,\"before\"):t);for(var o=0;o<5;o++){var l=!1,s=jr(e,t),a=r&&r!=t?jr(e,r):s,u=Sn(e,i={left:Math.min(s.left,a.left),top:Math.min(s.top,a.top)-n,right:Math.max(s.left,a.left),bottom:Math.max(s.bottom,a.bottom)+n}),c=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=u.scrollTop&&(On(e,u.scrollTop),1<Math.abs(e.doc.scrollTop-c)&&(l=!0)),null!=u.scrollLeft&&(Dn(e,u.scrollLeft),1<Math.abs(e.doc.scrollLeft-h)&&(l=!0)),!l)break}return i}(t,Se(n,e.scrollToPos.from),Se(n,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var l=0;l<i.length;++l)i[l].lines.length||it(i[l],\"hide\");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&it(o[s],\"unhide\");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&it(t,\"changes\",t,e.changeObjs),e.update&&e.update.finish()}function Xn(e,t){if(e.curOp)return t();Bn(e);try{return t()}finally{Gn(e)}}function Yn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Bn(e);try{return t.apply(e,arguments)}finally{Gn(e)}}}function _n(e){return function(){if(this.curOp)return e.apply(this,arguments);Bn(this);try{return e.apply(this,arguments)}finally{Gn(this)}}}function $n(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Bn(e);try{return t.apply(this,arguments)}finally{Gn(e)}}}function qn(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Te&&Ve(e.doc,t)<i.viewTo&&Qn(e);else if(r<=i.viewFrom)Te&&Ke(e.doc,r+n)>i.viewFrom?Qn(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)Qn(e);else if(t<=i.viewFrom){var o=Jn(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):Qn(e)}else if(r>=i.viewTo){var l=Jn(e,t,t,-1);l?(i.view=i.view.slice(0,l.index),i.viewTo=l.lineN):Qn(e)}else{var s=Jn(e,t,t,-1),a=Jn(e,r,r+n,1);s&&a?(i.view=i.view.slice(0,s.index).concat(ir(e,s.lineN,a.lineN)).concat(i.view.slice(a.index)),i.viewTo+=n):Qn(e)}var u=i.externalMeasured;u&&(r<u.lineN?u.lineN+=n:t<u.lineN+u.size&&(i.externalMeasured=null))}function Zn(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[sn(e,t)];if(null!=o.node){var l=o.changes||(o.changes=[]);-1==B(l,r)&&l.push(r)}}}function Qn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Jn(e,t,r,n){var i,o=sn(e,t),l=e.display.view;if(!Te||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=e.display.viewFrom,a=0;a<o;a++)s+=l[a].size;if(s!=t){if(0<n){if(o==l.length-1)return null;i=s+l[o].size-t,o++}else i=s-t;t+=i,r+=i}for(;Ve(e.doc,r)!=r;){if(o==(n<0?0:l.length-1))return null;r+=n*l[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function ei(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function ti(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,E(ri,e))}function ri(a){var u=a.doc;if(!(u.highlightFrontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,h=Rt(a,u.highlightFrontier),f=[];u.iter(h.line,Math.min(u.first+u.size,a.display.viewTo+500),function(e){if(h.line>=a.display.viewFrom){var t=e.styles,r=e.text.length>a.options.maxHighlightLength?Dt(u.mode,h.state):null,n=It(a,e,h,!0);r&&(h.state=r),e.styles=n.styles;var i=e.styleClasses,o=n.classes;o?e.styleClasses=o:i&&(e.styleClasses=null);for(var l=!t||t.length!=e.styles.length||i!=o&&(!i||!o||i.bgClass!=o.bgClass||i.textClass!=o.textClass),s=0;!l&&s<t.length;++s)l=t[s]!=e.styles[s];l&&f.push(h.line),e.stateAfter=h.save(),h.nextLine()}else e.text.length<=a.options.maxHighlightLength&&Bt(a,e.text,h),e.stateAfter=h.line%5==0?h.save():null,h.nextLine();if(+new Date>c)return ti(a,a.options.workDelay),!0}),u.highlightFrontier=h.line,u.modeFrontier=Math.max(u.modeFrontier,h.line),f.length&&Xn(a,function(){for(var e=0;e<f.length;e++)Zn(a,f[e],\"text\")})}}var ni=function(e,t,r){var n=e.display;this.viewport=t,this.visible=wn(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=kr(e),this.force=r,this.dims=tn(e),this.events=[]};function ii(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return Qn(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==ei(e))return!1;Cn(e)&&(Qn(e),t.dims=tn(e));var i=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),l=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(i,r.viewTo)),Te&&(o=Ve(e.doc,o),l=Ke(e.doc,l));var s,a,u,c,h=o!=r.viewFrom||l!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;a=o,u=l,0==(c=(s=e).display).view.length||a>=c.viewTo||u<=c.viewFrom?(c.view=ir(s,a,u),c.viewFrom=a):(c.viewFrom>a?c.view=ir(s,a,c.viewFrom).concat(c.view):c.viewFrom<a&&(c.view=c.view.slice(sn(s,a))),c.viewFrom=a,c.viewTo<u?c.view=c.view.concat(ir(s,c.viewTo,u)):c.viewTo>u&&(c.view=c.view.slice(0,sn(s,u)))),c.viewTo=u,r.viewOffset=Ye(ae(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+\"px\";var f=ei(e);if(!h&&0==f&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var d=function(e){if(e.hasFocus())return null;var t=W();if(!t||!D(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&D(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}(e);return 4<f&&(r.lineDiv.style.display=\"none\"),function(r,e,t){var n=r.display,i=r.options.lineNumbers,o=n.lineDiv,l=o.firstChild;function s(e){var t=e.nextSibling;return b&&w&&r.display.currentWheelTarget==e?e.style.display=\"none\":e.parentNode.removeChild(e),t}for(var a=n.view,u=n.viewFrom,c=0;c<a.length;c++){var h=a[c];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;l!=h.node;)l=s(l);var f=i&&null!=e&&e<=u&&h.lineNumber;h.changes&&(-1<B(h.changes,\"gutter\")&&(f=!1),ur(r,h,u,t)),f&&(M(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(ge(r.options,u)))),l=h.node.nextSibling}else{var d=(v=u,m=t,void 0,y=hr(p=r,g=h),g.text=g.node=y.pre,y.bgClass&&(g.bgClass=y.bgClass),y.textClass&&(g.textClass=y.textClass),dr(p,g),pr(p,g,v,m),vr(p,g,m),g.node);o.insertBefore(d,l)}u+=h.size}var p,g,v,m,y;for(;l;)l=s(l)}(e,r.updateLineNumbers,t.dims),4<f&&(r.lineDiv.style.display=\"\"),r.renderedView=r.view,function(e){if(e&&e.activeElt&&e.activeElt!=W()&&(e.activeElt.focus(),e.anchorNode&&D(document.body,e.anchorNode)&&D(document.body,e.focusNode))){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),t.removeAllRanges(),t.addRange(r),t.extend(e.focusNode,e.focusOffset)}}(d),M(r.cursorDiv),M(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,h&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,ti(e,400)),!(r.updateLineNumbers=null)}function oi(e,t){for(var r=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=kr(e)||(r&&null!=r.top&&(r={top:Math.min(e.doc.height+Cr(e.display)-Tr(e),r.top)}),t.visible=wn(e.display,e.doc,r),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&ii(e,t);n=!1){yn(e);var i=Wn(e);an(e),Pn(e,i),ai(e,i),t.force=!1}t.signal(e,\"update\",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,\"viewportChange\",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function li(e,t){var r=new ni(e,t);if(ii(e,r)){yn(e),oi(e,r);var n=Wn(e);an(e),Pn(e,n),ai(e,n),r.finish()}}function si(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+\"px\"}function ai(e,t){e.display.sizer.style.minHeight=t.docHeight+\"px\",e.display.heightForcer.style.top=t.docHeight+\"px\",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Lr(e)+\"px\"}function ui(e){var t=e.display.gutters,r=e.options.gutters;M(t);for(var n=0;n<r.length;++n){var i=r[n],o=t.appendChild(A(\"div\",null,\"RevMirror-gutter \"+i));\"RevMirror-linenumbers\"==i&&((e.display.lineGutter=o).style.width=(e.display.lineNumWidth||1)+\"px\")}t.style.display=n?\"\":\"none\",si(e)}function ci(e){var t=B(e.gutters,\"RevMirror-linenumbers\");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat([\"RevMirror-linenumbers\"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}ni.prototype.signal=function(e,t){st(e,t)&&this.events.push(arguments)},ni.prototype.finish=function(){for(var e=0;e<this.events.length;e++)it.apply(null,this.events[e])};var hi=0,fi=null;function di(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}}function pi(e){var t=di(e);return t.x*=fi,t.y*=fi,t}function gi(e,t){var r=di(t),n=r.x,i=r.y,o=e.display,l=o.scroller,s=l.scrollWidth>l.clientWidth,a=l.scrollHeight>l.clientHeight;if(n&&s||i&&a){if(i&&w&&b)e:for(var u=t.target,c=o.view;u!=l;u=u.parentNode)for(var h=0;h<c.length;h++)if(c[h].node==u){e.display.currentWheelTarget=u;break e}if(n&&!g&&!v&&null!=fi)return i&&a&&On(e,Math.max(0,l.scrollTop+i*fi)),Dn(e,Math.max(0,l.scrollLeft+n*fi)),(!i||i&&a)&&ut(t),void(o.wheelStartX=null);if(i&&null!=fi){var f=i*fi,d=e.doc.scrollTop,p=d+o.wrapper.clientHeight;f<0?d=Math.max(0,d+f-50):p=Math.min(e.doc.height,p+f+50),li(e,{top:d,bottom:p})}hi<20&&(null==o.wheelStartX?(o.wheelStartX=l.scrollLeft,o.wheelStartY=l.scrollTop,o.wheelDX=n,o.wheelDY=i,setTimeout(function(){if(null!=o.wheelStartX){var e=l.scrollLeft-o.wheelStartX,t=l.scrollTop-o.wheelStartY,r=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,r&&(fi=(fi*hi+r)/(hi+1),++hi)}},200)):(o.wheelDX+=n,o.wheelDY+=i))}}x?fi=-.53:g?fi=15:l?fi=-.7:a&&(fi=-1/3);var vi=function(e,t){this.ranges=e,this.primIndex=t};vi.prototype.primary=function(){return this.ranges[this.primIndex]},vi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(!ye(r.anchor,n.anchor)||!ye(r.head,n.head))return!1}return!0},vi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new mi(be(this.ranges[t].anchor),be(this.ranges[t].head));return new vi(e,this.primIndex)},vi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},vi.prototype.contains=function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(0<=me(t,n.from())&&me(e,n.to())<=0)return r}return-1};var mi=function(e,t){this.anchor=e,this.head=t};function yi(e,t){var r=e[t];e.sort(function(e,t){return me(e.from(),t.from())}),t=B(e,r);for(var n=1;n<e.length;n++){var i=e[n],o=e[n-1];if(0<=me(o.to(),i.from())){var l=xe(o.from(),i.from()),s=we(o.to(),i.to()),a=o.empty()?i.from()==i.head:o.from()==o.head;n<=t&&--t,e.splice(--n,2,new mi(a?s:l,a?l:s))}}return new vi(e,t)}function bi(e,t){return new vi([new mi(e,t||e)],0)}function wi(e){return e.text?ve(e.from.line+e.text.length-1,$(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function xi(e,t){if(me(e,t.from)<0)return e;if(me(e,t.to)<=0)return wi(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=wi(t).ch-t.to.ch),ve(r,n)}function Ci(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new mi(xi(i.anchor,t),xi(i.head,t)))}return yi(r,e.sel.primIndex)}function Si(e,t,r){return e.line==t.line?ve(r.line,e.ch-t.ch+r.ch):ve(r.line+(e.line-t.line),e.ch)}function Li(e){e.doc.mode=Nt(e.options,e.doc.modeOption),ki(e)}function ki(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ti(e,100),e.state.modeGen++,e.curOp&&qn(e)}function Ti(e,t){return 0==t.from.ch&&0==t.to.ch&&\"\"==$(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Mi(e,n,t,i){function o(e){return t?t[e]:null}function r(e,t,r){!function(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),We(e),He(e,r);var i=n?n(e):1;i!=e.height&&he(e,i)}(e,t,r,i),sr(e,\"change\",e,n)}function l(e,t){for(var r=[],n=e;n<t;++n)r.push(new Yt(u[n],o(n),i));return r}var s=n.from,a=n.to,u=n.text,c=ae(e,s.line),h=ae(e,a.line),f=$(u),d=o(u.length-1),p=a.line-s.line;if(n.full)e.insert(0,l(0,u.length)),e.remove(u.length,e.size-u.length);else if(Ti(e,n)){var g=l(0,u.length-1);r(h,h.text,d),p&&e.remove(s.line,p),g.length&&e.insert(s.line,g)}else if(c==h)if(1==u.length)r(c,c.text.slice(0,s.ch)+f+c.text.slice(a.ch),d);else{var v=l(1,u.length-1);v.push(new Yt(f+c.text.slice(a.ch),d,i)),r(c,c.text.slice(0,s.ch)+u[0],o(0)),e.insert(s.line+1,v)}else if(1==u.length)r(c,c.text.slice(0,s.ch)+u[0]+h.text.slice(a.ch),o(0)),e.remove(s.line+1,p);else{r(c,c.text.slice(0,s.ch)+u[0],o(0)),r(h,f+h.text.slice(a.ch),d);var m=l(1,u.length-1);1<p&&e.remove(s.line+1,p-1),e.insert(s.line+1,m)}sr(e,\"change\",e,n)}function Ni(e,s,a){!function e(t,r,n){if(t.linked)for(var i=0;i<t.linked.length;++i){var o=t.linked[i];if(o.doc!=r){var l=n&&o.sharedHist;a&&!l||(s(o.doc,l),e(o.doc,t,l))}}}(e,null,!0)}function Oi(e,t){if(t.cm)throw new Error(\"This document is already in use.\");on((e.doc=t).cm=e),Li(e),Ai(e),e.options.lineWrapping||$e(e),e.options.mode=t.modeOption,qn(e)}function Ai(e){(\"rtl\"==e.doc.direction?H:T)(e.display.lineDiv,\"RevMirror-rtl\")}function Di(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Wi(e,t){var r={from:be(t.from),to:wi(t),text:ue(e,t.from,t.to)};return Ii(e,r,t.from.line,t.to.line+1),Ni(e,function(e){return Ii(e,r,t.from.line,t.to.line+1)},!0),r}function Hi(e){for(;e.length;){if(!$(e).ranges)break;e.pop()}}function Fi(e,t,r,n){var i=e.history;i.undone.length=0;var o,l,s,a=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&(\"+\"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||\"*\"==t.origin.charAt(0)))&&(o=(s=i).lastOp==n?(Hi(s.done),$(s.done)):s.done.length&&!$(s.done).ranges?$(s.done):1<s.done.length&&!s.done[s.done.length-2].ranges?(s.done.pop(),$(s.done)):void 0))l=$(o.changes),0==me(t.from,t.to)&&0==me(t.from,l.to)?l.to=wi(t):o.changes.push(Wi(e,t));else{var u=$(i.done);for(u&&u.ranges||Ei(e.sel,i.done),o={changes:[Wi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,l||it(e,\"historyAdded\")}function Pi(e,t,r,n){var i,o,l,s,a,u=e.history,c=n&&n.origin;r==u.lastSelOp||c&&u.lastSelOrigin==c&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==c||(i=e,o=c,l=$(u.done),s=t,\"*\"==(a=o.charAt(0))||\"+\"==a&&l.ranges.length==s.ranges.length&&l.somethingSelected()==s.somethingSelected()&&new Date-i.history.lastSelTime<=(i.cm?i.cm.options.historyEventDelay:500)))?u.done[u.done.length-1]=t:Ei(t,u.done),u.lastSelTime=+new Date,u.lastSelOrigin=c,u.lastSelOp=r,n&&!1!==n.clearRedo&&Hi(u.undone)}function Ei(e,t){var r=$(t);r&&r.ranges&&r.equals(e)||t.push(e)}function Ii(t,r,e,n){var i=r[\"spans_\"+t.id],o=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,n),function(e){e.markedSpans&&((i||(i=r[\"spans_\"+t.id]={}))[o]=e.markedSpans),++o})}function zi(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Ri(e,t){var r=function(e,t){var r=t[\"spans_\"+e.id];if(!r)return null;for(var n=[],i=0;i<t.text.length;++i)n.push(zi(r[i]));return n}(e,t),n=Ae(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)e:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(r[i]=l)}return r}function Bi(e,t,r){for(var n=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)n.push(r?vi.prototype.deepCopy.call(o):o);else{var l=o.changes,s=[];n.push({changes:s});for(var a=0;a<l.length;++a){var u=l[a],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var h in u)(c=h.match(/^spans_(\\d+)$/))&&-1<B(t,Number(c[1]))&&($(s)[h]=u[h],delete u[h])}}}return n}function Gi(e,t,r,n){if(n){var i=e.anchor;if(r){var o=me(t,i)<0;o!=me(r,i)<0?(i=t,t=r):o!=me(t,r)<0&&(t=r)}return new mi(i,t)}return new mi(r||t,t)}function Ui(e,t,r,n,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Yi(e,new vi([Gi(e.sel.primary(),t,r,i)],0),n)}function Vi(e,t,r){for(var n=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)n[o]=Gi(e.sel.ranges[o],t[o],null,i);Yi(e,yi(n,e.sel.primIndex),r)}function Ki(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,Yi(e,yi(i,e.sel.primIndex),n)}function ji(e,t,r,n){Yi(e,bi(t,r),n)}function Xi(e,t,r){var n=e.history.done,i=$(n);i&&i.ranges?_i(e,n[n.length-1]=t,r):Yi(e,t,r)}function Yi(e,t,r){_i(e,t,r),Pi(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function _i(e,t,r){var n,i,o,l;(st(e,\"beforeSelectionChange\")||e.cm&&st(e.cm,\"beforeSelectionChange\"))&&(n=e,o=r,l={ranges:(i=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new mi(Se(n,e[t].anchor),Se(n,e[t].head))},origin:o&&o.origin},it(n,\"beforeSelectionChange\",n,l),n.cm&&it(n.cm,\"beforeSelectionChange\",n.cm,l),t=l.ranges!=i.ranges?yi(l.ranges,l.ranges.length-1):i),$i(e,Zi(e,t,r&&r.bias||(me(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),r&&!1===r.scroll||!e.cm||kn(e.cm)}function $i(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,lt(e.cm)),sr(e,\"cursorActivity\",e))}function qi(e){$i(e,Zi(e,e.sel,null,!1))}function Zi(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],a=Ji(e,l.anchor,s&&s.anchor,r,n),u=Ji(e,l.head,s&&s.head,r,n);(i||a!=l.anchor||u!=l.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new mi(a,u))}return i?yi(i,t.primIndex):t}function Qi(e,t,r,n,i){var o=ae(e,t.line);if(o.markedSpans)for(var l=0;l<o.markedSpans.length;++l){var s=o.markedSpans[l],a=s.marker;if((null==s.from||(a.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(a.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(it(a,\"beforeCursorEnter\"),a.explicitlyCleared)){if(o.markedSpans){--l;continue}break}if(!a.atomic)continue;if(r){var u=a.find(n<0?1:-1),c=void 0;if((n<0?a.inclusiveRight:a.inclusiveLeft)&&(u=eo(e,u,-n,u&&u.line==t.line?o:null)),u&&u.line==t.line&&(c=me(u,r))&&(n<0?c<0:0<c))return Qi(e,u,t,n,i)}var h=a.find(n<0?-1:1);return(n<0?a.inclusiveLeft:a.inclusiveRight)&&(h=eo(e,h,n,h.line==t.line?o:null)),h?Qi(e,h,t,n,i):null}}return t}function Ji(e,t,r,n,i){var o=n||1,l=Qi(e,t,r,o,i)||!i&&Qi(e,t,r,o,!0)||Qi(e,t,r,-o,i)||!i&&Qi(e,t,r,-o,!0);return l||(e.cantEdit=!0,ve(e.first,0))}function eo(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?Se(e,ve(t.line-1)):null:0<r&&t.ch==(n||ae(e,t.line)).text.length?t.line<e.first+e.size-1?ve(t.line+1,0):null:new ve(t.line,t.ch+r)}function to(e){e.setSelection(ve(e.firstLine(),0),ve(e.lastLine()),V)}function ro(i,e,t){var o={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return o.canceled=!0}};return t&&(o.update=function(e,t,r,n){e&&(o.from=Se(i,e)),t&&(o.to=Se(i,t)),r&&(o.text=r),void 0!==n&&(o.origin=n)}),it(i,\"beforeChange\",i,o),i.cm&&it(i.cm,\"beforeChange\",i.cm,o),o.canceled?null:{from:o.from,to:o.to,text:o.text,origin:o.origin}}function no(e,t,r){if(e.cm){if(!e.cm.curOp)return Yn(e.cm,no)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(st(e,\"beforeChange\")||e.cm&&st(e.cm,\"beforeChange\"))||(t=ro(e,t,!0))){var n=ke&&!r&&function(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=B(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(0),a=0;a<i.length;++a){var u=i[a];if(!(me(u.to,s.from)<0||0<me(u.from,s.to))){var c=[a,1],h=me(u.from,s.from),f=me(u.to,s.to);(h<0||!l.inclusiveLeft&&!h)&&c.push({from:u.from,to:s.from}),(0<f||!l.inclusiveRight&&!f)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-3}}return i}(e,t.from,t.to);if(n)for(var i=n.length-1;0<=i;--i)io(e,{from:n[i].from,to:n[i].to,text:i?[\"\"]:t.text,origin:t.origin});else io(e,t)}}function io(e,r){if(1!=r.text.length||\"\"!=r.text[0]||0!=me(r.from,r.to)){var t=Ci(e,r);Fi(e,r,t,e.cm?e.cm.curOp.id:NaN),so(e,r,t,Ae(e,r));var n=[];Ni(e,function(e,t){t||-1!=B(n,e.history)||(ho(e.history,r),n.push(e.history)),so(e,r,null,Ae(e,r))})}}function oo(i,o,e){var t=i.cm&&i.cm.state.suppressEdits;if(!t||e){for(var l,r=i.history,n=i.sel,s=\"undo\"==o?r.done:r.undone,a=\"undo\"==o?r.undone:r.done,u=0;u<s.length&&(l=s[u],e?!l.ranges||l.equals(i.sel):l.ranges);u++);if(u!=s.length){for(r.lastOrigin=r.lastSelOrigin=null;;){if(!(l=s.pop()).ranges){if(t)return void s.push(l);break}if(Ei(l,a),e&&!l.equals(i.sel))return void Yi(i,l,{clearRedo:!1});n=l}var c=[];Ei(n,a),a.push({changes:c,generation:r.generation}),r.generation=l.generation||++r.maxGeneration;for(var h=st(i,\"beforeChange\")||i.cm&&st(i.cm,\"beforeChange\"),f=function(e){var r=l.changes[e];if(r.origin=o,h&&!ro(i,r,!1))return s.length=0,{};c.push(Wi(i,r));var t=e?Ci(i,r):$(s);so(i,r,t,Ri(i,r)),!e&&i.cm&&i.cm.scrollIntoView({from:r.from,to:wi(r)});var n=[];Ni(i,function(e,t){t||-1!=B(n,e.history)||(ho(e.history,r),n.push(e.history)),so(e,r,null,Ri(e,r))})},d=l.changes.length-1;0<=d;--d){var p=f(d);if(p)return p.v}}}}function lo(e,t){if(0!=t&&(e.first+=t,e.sel=new vi(q(e.sel.ranges,function(e){return new mi(ve(e.anchor.line+t,e.anchor.ch),ve(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){qn(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)Zn(e.cm,n,\"gutter\")}}function so(e,t,r,n){if(e.cm&&!e.cm.curOp)return Yn(e.cm,so)(e,t,r,n);if(t.to.line<e.first)lo(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);lo(e,i),t={from:ve(e.first,0),to:ve(t.to.line+i,t.to.ch),text:[$(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ve(o,ae(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ue(e,t.from,t.to),r||(r=Ci(e,t)),e.cm?function(e,t,r){var n=e.doc,i=e.display,o=t.from,l=t.to,s=!1,a=o.line;e.options.lineWrapping||(a=fe(Ue(ae(n,o.line))),n.iter(a,l.line+1,function(e){if(e==i.maxLine)return s=!0}));-1<n.sel.contains(t.from,t.to)&&lt(e);Mi(n,t,r,nn(e)),e.options.lineWrapping||(n.iter(a,o.line+t.text.length,function(e){var t=_e(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;r<n;n--){var i=ae(e,n).stateAfter;if(i&&(!(i instanceof Pt)||n+i.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}})(n,o.line),ti(e,400);var u=t.text.length-(l.line-o.line)-1;t.full?qn(e):o.line!=l.line||1!=t.text.length||Ti(e.doc,t)?qn(e,o.line,l.line+1,u):Zn(e,o.line,\"text\");var c=st(e,\"changes\"),h=st(e,\"change\");if(h||c){var f={from:o,to:l,text:t.text,removed:t.removed,origin:t.origin};h&&sr(e,\"change\",e,f),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}(e.cm,t,n):Mi(e,t,n),_i(e,r,V)}}function ao(e,t,r,n,i){var o;(n||(n=r),me(n,r)<0)&&(r=(o=[n,r])[0],n=o[1]);\"string\"==typeof t&&(t=e.splitLines(t)),no(e,{from:r,to:n,text:t,origin:i})}function uo(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function co(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)uo(o.ranges[s].anchor,t,r,n),uo(o.ranges[s].head,t,r,n)}else{for(var a=0;a<o.changes.length;++a){var u=o.changes[a];if(r<u.from.line)u.from=ve(u.from.line+n,u.from.ch),u.to=ve(u.to.line+n,u.to.ch);else if(t<=u.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function ho(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;co(e.done,r,n,i),co(e.undone,r,n,i)}function fo(e,t,r,n){var i=t,o=t;return\"number\"==typeof t?o=ae(e,Ce(e,t)):i=fe(t),null==i?null:(n(o,i)&&e.cm&&Zn(e.cm,i,r),o)}function po(e){this.lines=e,this.parent=null;for(var t=0,r=0;r<e.length;++r)e[r].parent=this,t+=e[r].height;this.height=t}function go(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}mi.prototype.from=function(){return xe(this.anchor,this.head)},mi.prototype.to=function(){return we(this.anchor,this.head)},mi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},po.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r,n=e,i=e+t;n<i;++n){var o=this.lines[n];this.height-=o.height,(r=o).parent=null,We(r),sr(o,\"delete\")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},go.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(e<i){var o=Math.min(t,i-e),l=n.height;if(n.removeInner(e,o),this.height-=l-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof po))){var s=[];this.collapse(s),this.children=[new po(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,r),i.lines&&50<i.lines.length){for(var l=i.lines.length%25+25,s=l;s<i.lines.length;){var a=new po(i.lines.slice(s,s+=25));i.height-=a.height,this.children.splice(++n,0,a),a.parent=this}i.lines=i.lines.slice(0,l),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new go(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var r=B(e.parent.children,e);e.parent.children.splice(r+1,0,t)}else{var n=new go(e.children);(n.parent=e).children=[n,t],e=n}t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e);if(i.iterN(e,l,r))return!0;if(0==(t-=l))break;e=0}else e-=o}}};var vo=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};function mo(e,t,r){Ye(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ln(e,r)}vo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=fe(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var o=br(this);he(r,Math.max(0,r.height-o)),e&&(Xn(e,function(){mo(e,r,-o),Zn(e,n,\"widget\")}),sr(e,\"lineWidgetCleared\",e,this,n))}},vo.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=br(this)-t;i&&(he(n,n.height+i),r&&Xn(r,function(){r.curOp.forceUpdate=!0,mo(r,n,i),sr(r,\"lineWidgetChanged\",r,e,fe(n))}))},at(vo);var yo=0,bo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++yo};function wo(t,n,i,e,r){if(e&&e.shared)return function(e,r,n,i,o){(i=I(i)).shared=!1;var l=[wo(e,r,n,i,o)],s=l[0],a=i.widgetNode;return Ni(e,function(e){a&&(i.widgetNode=a.cloneNode(!0)),l.push(wo(e,Se(e,r),Se(e,n),i,o));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;s=$(l)}),new xo(l,s)}(t,n,i,e,r);if(t.cm&&!t.cm.curOp)return Yn(t.cm,wo)(t,n,i,e,r);var o=new bo(t,r),l=me(n,i);if(e&&I(e,o,!1),0<l||0==l&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=O(\"span\",[o.replacedWith],\"RevMirror-widget\"),e.handleMouseEvents||o.widgetNode.setAttribute(\"cm-ignore-events\",\"true\"),e.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Ge(t,n.line,n,i,o)||n.line!=i.line&&Ge(t,i.line,n,i,o))throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");Te=!0}o.addToHistory&&Fi(t,{from:n,to:i,origin:\"markText\"},t.sel,NaN);var s,a=n.line,u=t.cm;if(t.iter(a,i.line+1,function(e){var t,r;u&&o.collapsed&&!u.options.lineWrapping&&Ue(e)==u.display.maxLine&&(s=!0),o.collapsed&&a!=n.line&&he(e,0),t=e,r=new Me(o,a==n.line?n.ch:null,a==i.line?i.ch:null),t.markedSpans=t.markedSpans?t.markedSpans.concat([r]):[r],r.marker.attachLine(t),++a}),o.collapsed&&t.iter(n.line,i.line+1,function(e){je(t,e)&&he(e,0)}),o.clearOnEnter&&tt(o,\"beforeCursorEnter\",function(){return o.clear()}),o.readOnly&&(ke=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++yo,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)qn(u,n.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var c=n.line;c<=i.line;c++)Zn(u,c,\"text\");o.atomic&&qi(u.doc),sr(u,\"markerAdded\",u,o)}return o}bo.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t=this.doc.cm,r=t&&!t.curOp;if(r&&Bn(t),st(this,\"clear\")){var n=this.find();n&&sr(this,\"clear\",n.from,n.to)}for(var i=null,o=null,l=0;l<this.lines.length;++l){var s=e.lines[l],a=Ne(s.markedSpans,e);t&&!e.collapsed?Zn(t,fe(s),\"text\"):t&&(null!=a.to&&(o=fe(s)),null!=a.from&&(i=fe(s))),s.markedSpans=Oe(s.markedSpans,a),null==a.from&&e.collapsed&&!je(e.doc,s)&&t&&he(s,Jr(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var c=Ue(e.lines[u]),h=_e(c);h>t.display.maxLineLength&&(t.display.maxLine=c,t.display.maxLineLength=h,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&qn(t,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&qi(t.doc)),t&&sr(t,\"markerCleared\",t,this,i,o),r&&Gn(t),this.parent&&this.parent.clear()}},bo.prototype.find=function(e,t){var r,n;null==e&&\"bookmark\"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],l=Ne(o.markedSpans,this);if(null!=l.from&&(r=ve(t?o:fe(o),l.from),-1==e))return r;if(null!=l.to&&(n=ve(t?o:fe(o),l.to),1==e))return n}return r&&{from:r,to:n}},bo.prototype.changed=function(){var o=this,l=this.find(-1,!0),s=this,a=this.doc.cm;l&&a&&Xn(a,function(){var e=l.line,t=fe(l.line),r=Or(a,t);if(r&&(Er(r),a.curOp.selectionChanged=a.curOp.forceUpdate=!0),a.curOp.updateMaxLine=!0,!je(s.doc,e)&&null!=s.height){var n=s.height;s.height=null;var i=br(s)-n;i&&he(e,e.height+i)}sr(a,\"markerChanged\",a,o)})},bo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=B(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},bo.prototype.detachLine=function(e){if(this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},at(bo);var xo=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};function Co(e){return e.findMarks(ve(e.first,0),e.clipPos(ve(e.lastLine())),function(e){return e.parent})}function So(o){for(var e=function(e){var t=o[e],r=[t.primary.doc];Ni(t.primary.doc,function(e){return r.push(e)});for(var n=0;n<t.markers.length;n++){var i=t.markers[n];-1==B(r,i.doc)&&(i.parent=null,t.markers.splice(n--,1))}},t=0;t<o.length;t++)e(t)}xo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();sr(this,\"clear\")}},xo.prototype.find=function(e,t){return this.primary.find(e,t)},at(xo);var Lo=0,ko=function(e,t,r,n,i){if(!(this instanceof ko))return new ko(e,t,r,n,i);null==r&&(r=0),go.call(this,[new po([new Yt(\"\",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var o=ve(r,0);this.sel=bi(o),this.history=new Di(null),this.id=++Lo,this.modeOption=t,this.lineSep=n,this.direction=\"rtl\"==i?\"rtl\":\"ltr\",this.extend=!1,\"string\"==typeof e&&(e=this.splitLines(e)),Mi(this,{from:o,to:o,text:e}),Yi(this,bi(o),V)};ko.prototype=Q(go.prototype,{constructor:ko,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ce(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:$n(function(e){var t=ve(this.first,0),r=this.first+this.size-1;no(this,{from:t,to:ve(r,ae(this,r).text.length),text:this.splitLines(e),origin:\"setValue\",full:!0},!0),this.cm&&Tn(this.cm,0,0),Yi(this,bi(t),V)}),replaceRange:function(e,t,r,n){ao(this,e,t=Se(this,t),r=r?Se(this,r):t,n)},getRange:function(e,t,r){var n=ue(this,Se(this,e),Se(this,t));return!1===r?n:n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(pe(this,e))return ae(this,e)},getLineNumber:function(e){return fe(e)},getLineHandleVisualStart:function(e){return\"number\"==typeof e&&(e=ae(this,e)),Ue(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Se(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||\"head\"==e?t.head:\"anchor\"==e?t.anchor:\"end\"==e||\"to\"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:$n(function(e,t,r){ji(this,Se(this,\"number\"==typeof e?ve(e,t||0):e),null,r)}),setSelection:$n(function(e,t,r){ji(this,Se(this,e),Se(this,t||e),r)}),extendSelection:$n(function(e,t,r){Ui(this,Se(this,e),t&&Se(this,t),r)}),extendSelections:$n(function(e,t){Vi(this,Le(this,e),t)}),extendSelectionsBy:$n(function(e,t){Vi(this,Le(this,q(this.sel.ranges,e)),t)}),setSelections:$n(function(e,t,r){if(e.length){for(var n=[],i=0;i<e.length;i++)n[i]=new mi(Se(this,e[i].anchor),Se(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Yi(this,yi(n,t),r)}}),addSelection:$n(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new mi(Se(this,e),Se(this,t||e))),Yi(this,yi(n,n.length-1),r)}),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=ue(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=ue(this,r[n].from(),r[n].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||\"+input\")},replaceSelections:$n(function(e,t,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var l=i.ranges[o];n[o]={from:l.from(),to:l.to(),text:this.splitLines(e[o]),origin:r}}for(var s=t&&\"end\"!=t&&function(e,t,r){for(var n=[],i=ve(e.first,0),o=i,l=0;l<t.length;l++){var s=t[l],a=Si(s.from,i,o),u=Si(wi(s),i,o);if(i=s.to,o=u,\"around\"==r){var c=e.sel.ranges[l],h=me(c.head,c.anchor)<0;n[l]=new mi(h?u:a,h?a:u)}else n[l]=new mi(a,a)}return new vi(n,e.sel.primIndex)}(this,n,t),a=n.length-1;0<=a;a--)no(this,n[a]);s?Xi(this,s):this.cm&&kn(this.cm)}),undo:$n(function(){oo(this,\"undo\")}),redo:$n(function(){oo(this,\"redo\")}),undoSelection:$n(function(){oo(this,\"undo\",!0)}),redoSelection:$n(function(){oo(this,\"redo\",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new Di(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Bi(this.history.done),undone:Bi(this.history.undone)}},setHistory:function(e){var t=this.history=new Di(this.history.maxGeneration);t.done=Bi(e.done.slice(0),null,!0),t.undone=Bi(e.undone.slice(0),null,!0)},setGutterMarker:$n(function(e,r,n){return fo(this,e,\"gutter\",function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[r]=n)&&re(t)&&(e.gutterMarkers=null),!0})}),clearGutter:$n(function(t){var r=this;this.iter(function(e){e.gutterMarkers&&e.gutterMarkers[t]&&fo(r,e,\"gutter\",function(){return e.gutterMarkers[t]=null,re(e.gutterMarkers)&&(e.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(\"number\"==typeof e){if(!pe(this,e))return null;if(!(e=ae(this,t=e)))return null}else if(null==(t=fe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:$n(function(e,r,n){return fo(this,e,\"gutter\"==r?\"gutter\":\"class\",function(e){var t=\"text\"==r?\"textClass\":\"background\"==r?\"bgClass\":\"gutter\"==r?\"gutterClass\":\"wrapClass\";if(e[t]){if(L(n).test(e[t]))return!1;e[t]+=\" \"+n}else e[t]=n;return!0})}),removeLineClass:$n(function(e,o,l){return fo(this,e,\"gutter\"==o?\"gutter\":\"class\",function(e){var t=\"text\"==o?\"textClass\":\"background\"==o?\"bgClass\":\"gutter\"==o?\"gutterClass\":\"wrapClass\",r=e[t];if(!r)return!1;if(null==l)e[t]=null;else{var n=r.match(L(l));if(!n)return!1;var i=n.index+n[0].length;e[t]=r.slice(0,n.index)+(n.index&&i!=r.length?\" \":\"\")+r.slice(i)||null}return!0})}),addLineWidget:$n(function(e,t,r){return i=e,o=new vo(n=this,t,r),(l=n.cm)&&o.noHScroll&&(l.display.alignWidgets=!0),fo(n,i,\"widget\",function(e){var t=e.widgets||(e.widgets=[]);if(null==o.insertAt?t.push(o):t.splice(Math.min(t.length-1,Math.max(0,o.insertAt)),0,o),o.line=e,l&&!je(n,e)){var r=Ye(e)<n.scrollTop;he(e,e.height+br(o)),r&&Ln(l,o.height),l.curOp.forceUpdate=!0}return!0}),l&&sr(l,\"lineWidgetAdded\",l,o,\"number\"==typeof i?i:fe(i)),o;var n,i,o,l}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return wo(this,Se(this,e),Se(this,t),r,r&&r.type||\"range\")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return wo(this,e=Se(this,e),e,r,\"bookmark\")},findMarksAt:function(e){var t=[],r=ae(this,(e=Se(this,e)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(i,o,l){i=Se(this,i),o=Se(this,o);var s=[],a=i.line;return this.iter(i.line,o.line+1,function(e){var t=e.markedSpans;if(t)for(var r=0;r<t.length;r++){var n=t[r];null!=n.to&&a==i.line&&i.ch>=n.to||null==n.from&&a!=i.line||null!=n.from&&a==o.line&&n.from>=o.ch||l&&!l(n.marker)||s.push(n.marker.parent||n.marker)}++a}),s},getAllMarks:function(){var n=[];return this.iter(function(e){var t=e.markedSpans;if(t)for(var r=0;r<t.length;++r)null!=t[r].from&&n.push(t[r].marker)}),n},posFromIndex:function(r){var n,i=this.first,o=this.lineSeparator().length;return this.iter(function(e){var t=e.text.length+o;if(r<t)return n=r,!0;r-=t,++i}),Se(this,ve(i,n))},indexFromPos:function(e){var t=(e=Se(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+r}),t},copy:function(e){var t=new ko(ce(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new ko(ce(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),l=e.clipPos(i.to);if(me(o,l)){var s=wo(e,o,l,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}(n,Co(this)),n},unlinkDoc:function(e){if(e instanceof Cl&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),So(Co(this));break}}if(e.history==this.history){var r=[e.id];Ni(e,function(e){return r.push(e.id)},!0),e.history=new Di(null),e.history.done=Bi(this.history.done,r),e.history.undone=Bi(this.history.undone,r)}},iterLinkedDocs:function(e){Ni(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):xt(e)},lineSeparator:function(){return this.lineSep||\"\\n\"},setDirection:$n(function(e){var t;(\"rtl\"!=e&&(e=\"ltr\"),e!=this.direction)&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Xn(t=this.cm,function(){Ai(t),qn(t)}))})}),ko.prototype.eachLine=ko.prototype.iter;var To=0;function Mo(e){var i=this;if(No(i),!ot(i,e)&&!wr(i.display,e)){ut(e),x&&(To=+new Date);var o=ln(i,e,!0),t=e.dataTransfer.files;if(o&&!i.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var l=t.length,s=Array(l),a=0,r=function(e,r){if(!i.options.allowDropFileTypes||-1!=B(i.options.allowDropFileTypes,e.type)){var n=new FileReader;n.onload=Yn(i,function(){var e=n.result;if(/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(e)&&(e=\"\"),s[r]=e,++a==l){var t={from:o=Se(i.doc,o),to:o,text:i.doc.splitLines(s.join(i.doc.lineSeparator())),origin:\"paste\"};no(i.doc,t),Xi(i.doc,bi(o,wi(t)))}}),n.readAsText(e)}},n=0;n<l;++n)r(t[n],n);else{if(i.state.draggingText&&-1<i.doc.sel.contains(o))return i.state.draggingText(e),void setTimeout(function(){return i.display.input.focus()},20);try{var u=e.dataTransfer.getData(\"Text\");if(u){var c;if(i.state.draggingText&&!i.state.draggingText.copy&&(c=i.listSelections()),_i(i.doc,bi(o,o)),c)for(var h=0;h<c.length;++h)ao(i.doc,\"\",c[h].anchor,c[h].head,\"drag\");i.replaceSelection(u,\"around\",\"paste\"),i.display.input.focus()}}catch(e){}}}}function No(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Oo(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName(\"RevMirror\"),r=0;r<t.length;r++){var n=t[r].RevMirror;n&&e(n)}}var Ao=!1;function Do(){var e;Ao||(tt(window,\"resize\",function(){null==e&&(e=setTimeout(function(){e=null,Oo(Wo)},100))}),tt(window,\"blur\",function(){return Oo(mn)}),Ao=!0)}function Wo(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ho={3:\"Pause\",8:\"Backspace\",9:\"Tab\",13:\"Enter\",16:\"Shift\",17:\"Ctrl\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Esc\",32:\"Space\",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"Left\",38:\"Up\",39:\"Right\",40:\"Down\",44:\"PrintScrn\",45:\"Insert\",46:\"Delete\",59:\";\",61:\"=\",91:\"Mod\",92:\"Mod\",93:\"Mod\",106:\"*\",107:\"=\",109:\"-\",110:\".\",111:\"/\",127:\"Delete\",145:\"ScrollLock\",173:\"-\",186:\";\",187:\"=\",188:\",\",189:\"-\",190:\".\",191:\"/\",192:\"`\",219:\"[\",220:\"\\\\\",221:\"]\",222:\"'\",63232:\"Up\",63233:\"Down\",63234:\"Left\",63235:\"Right\",63272:\"Delete\",63273:\"Home\",63275:\"End\",63276:\"PageUp\",63277:\"PageDown\",63302:\"Insert\"},Fo=0;Fo<10;Fo++)Ho[Fo+48]=Ho[Fo+96]=String(Fo);for(var Po=65;Po<=90;Po++)Ho[Po]=String.fromCharCode(Po);for(var Eo=1;Eo<=12;Eo++)Ho[Eo+111]=Ho[Eo+63235]=\"F\"+Eo;var Io={};function zo(e){var t,r,n,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var l=0;l<o.length-1;l++){var s=o[l];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error(\"Unrecognized modifier name: \"+s);n=!0}}return t&&(e=\"Alt-\"+e),r&&(e=\"Ctrl-\"+e),i&&(e=\"Cmd-\"+e),n&&(e=\"Shift-\"+e),e}function Ro(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if(\"...\"==n){delete e[r];continue}for(var i=q(r.split(\" \"),zo),o=0;o<i.length;o++){var l=void 0,s=void 0;o==i.length-1?(s=i.join(\" \"),l=n):(s=i.slice(0,o+1).join(\" \"),l=\"...\");var a=t[s];if(a){if(a!=l)throw new Error(\"Inconsistent bindings for \"+s)}else t[s]=l}delete e[r]}for(var u in t)e[u]=t[u];return e}function Bo(e,t,r,n){var i=(t=Ko(t)).call?t.call(e,n):t[e];if(!1===i)return\"nothing\";if(\"...\"===i)return\"multi\";if(null!=i&&r(i))return\"handled\";if(t.fallthrough){if(\"[object Array]\"!=Object.prototype.toString.call(t.fallthrough))return Bo(e,t.fallthrough,r,n);for(var o=0;o<t.fallthrough.length;o++){var l=Bo(e,t.fallthrough[o],r,n);if(l)return l}}}function Go(e){var t=\"string\"==typeof e?e:Ho[e.keyCode];return\"Ctrl\"==t||\"Alt\"==t||\"Shift\"==t||\"Mod\"==t}function Uo(e,t,r){var n=e;return t.altKey&&\"Alt\"!=n&&(e=\"Alt-\"+e),(y?t.metaKey:t.ctrlKey)&&\"Ctrl\"!=n&&(e=\"Ctrl-\"+e),(y?t.ctrlKey:t.metaKey)&&\"Cmd\"!=n&&(e=\"Cmd-\"+e),!r&&t.shiftKey&&\"Shift\"!=n&&(e=\"Shift-\"+e),e}function Vo(e,t){if(v&&34==e.keyCode&&e.char)return!1;var r=Ho[e.keyCode];return null!=r&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(r=e.code),Uo(r,e,t))}function Ko(e){return\"string\"==typeof e?Io[e]:e}function jo(t,e){for(var r=t.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=e(r[i]);n.length&&me(o.from,$(n).to)<=0;){var l=n.pop();if(me(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}Xn(t,function(){for(var e=n.length-1;0<=e;e--)ao(t.doc,\"\",n[e].from,n[e].to,\"+delete\");kn(t)})}function Xo(e,t,r){var n=oe(e.text,t+r,r);return n<0||n>e.text.length?null:n}function Yo(e,t,r){var n=Xo(e,t.ch,r);return null==n?null:new ve(t.line,n,r<0?\"after\":\"before\")}function _o(e,t,r,n,i){if(e){var o=Je(r,t.doc.direction);if(o){var l,s=i<0?$(o):o[0],a=i<0==(1==s.level)?\"after\":\"before\";if(0<s.level||\"rtl\"==t.doc.direction){var u=Ar(t,r);l=i<0?r.text.length-1:0;var c=Dr(t,u,l).top;l=le(function(e){return Dr(t,u,e).top==c},i<0==(1==s.level)?s.from:s.to-1,l),\"before\"==a&&(l=Xo(r,l,1))}else l=i<0?s.to:s.from;return new ve(n,l,a)}}return new ve(n,i<0?r.text.length:0,i<0?\"before\":\"after\")}Io.basic={Left:\"goCharLeft\",Right:\"goCharRight\",Up:\"goLineUp\",Down:\"goLineDown\",End:\"goLineEnd\",Home:\"goLineStartSmart\",PageUp:\"goPageUp\",PageDown:\"goPageDown\",Delete:\"delCharAfter\",Backspace:\"delCharBefore\",\"Shift-Backspace\":\"delCharBefore\",Tab:\"defaultTab\",\"Shift-Tab\":\"indentAuto\",Enter:\"newlineAndIndent\",Insert:\"toggleOverwrite\",Esc:\"singleSelection\"},Io.pcDefault={\"Ctrl-A\":\"selectAll\",\"Ctrl-D\":\"deleteLine\",\"Ctrl-Z\":\"undo\",\"Shift-Ctrl-Z\":\"redo\",\"Ctrl-Y\":\"redo\",\"Ctrl-Home\":\"goDocStart\",\"Ctrl-End\":\"goDocEnd\",\"Ctrl-Up\":\"goLineUp\",\"Ctrl-Down\":\"goLineDown\",\"Ctrl-Left\":\"goGroupLeft\",\"Ctrl-Right\":\"goGroupRight\",\"Alt-Left\":\"goLineStart\",\"Alt-Right\":\"goLineEnd\",\"Ctrl-Backspace\":\"delGroupBefore\",\"Ctrl-Delete\":\"delGroupAfter\",\"Ctrl-S\":\"save\",\"Ctrl-F\":\"find\",\"Ctrl-G\":\"findNext\",\"Shift-Ctrl-G\":\"findPrev\",\"Shift-Ctrl-F\":\"replace\",\"Shift-Ctrl-R\":\"replaceAll\",\"Ctrl-[\":\"indentLess\",\"Ctrl-]\":\"indentMore\",\"Ctrl-U\":\"undoSelection\",\"Shift-Ctrl-U\":\"redoSelection\",\"Alt-U\":\"redoSelection\",fallthrough:\"basic\"},Io.emacsy={\"Ctrl-F\":\"goCharRight\",\"Ctrl-B\":\"goCharLeft\",\"Ctrl-P\":\"goLineUp\",\"Ctrl-N\":\"goLineDown\",\"Alt-F\":\"goWordRight\",\"Alt-B\":\"goWordLeft\",\"Ctrl-A\":\"goLineStart\",\"Ctrl-E\":\"goLineEnd\",\"Ctrl-V\":\"goPageDown\",\"Shift-Ctrl-V\":\"goPageUp\",\"Ctrl-D\":\"delCharAfter\",\"Ctrl-H\":\"delCharBefore\",\"Alt-D\":\"delWordAfter\",\"Alt-Backspace\":\"delWordBefore\",\"Ctrl-K\":\"killLine\",\"Ctrl-T\":\"transposeChars\",\"Ctrl-O\":\"openLine\"},Io.macDefault={\"Cmd-A\":\"selectAll\",\"Cmd-D\":\"deleteLine\",\"Cmd-Z\":\"undo\",\"Shift-Cmd-Z\":\"redo\",\"Cmd-Y\":\"redo\",\"Cmd-Home\":\"goDocStart\",\"Cmd-Up\":\"goDocStart\",\"Cmd-End\":\"goDocEnd\",\"Cmd-Down\":\"goDocEnd\",\"Alt-Left\":\"goGroupLeft\",\"Alt-Right\":\"goGroupRight\",\"Cmd-Left\":\"goLineLeft\",\"Cmd-Right\":\"goLineRight\",\"Alt-Backspace\":\"delGroupBefore\",\"Ctrl-Alt-Backspace\":\"delGroupAfter\",\"Alt-Delete\":\"delGroupAfter\",\"Cmd-S\":\"save\",\"Cmd-F\":\"find\",\"Cmd-G\":\"findNext\",\"Shift-Cmd-G\":\"findPrev\",\"Cmd-Alt-F\":\"replace\",\"Shift-Cmd-Alt-F\":\"replaceAll\",\"Cmd-[\":\"indentLess\",\"Cmd-]\":\"indentMore\",\"Cmd-Backspace\":\"delWrappedLineLeft\",\"Cmd-Delete\":\"delWrappedLineRight\",\"Cmd-U\":\"undoSelection\",\"Shift-Cmd-U\":\"redoSelection\",\"Ctrl-Up\":\"goDocStart\",\"Ctrl-Down\":\"goDocEnd\",fallthrough:[\"basic\",\"emacsy\"]},Io.default=w?Io.macDefault:Io.pcDefault;var $o={selectAll:to,singleSelection:function(e){return e.setSelection(e.getCursor(\"anchor\"),e.getCursor(\"head\"),V)},killLine:function(r){return jo(r,function(e){if(e.empty()){var t=ae(r.doc,e.head.line).text.length;return e.head.ch==t&&e.head.line<r.lastLine()?{from:e.head,to:ve(e.head.line+1,0)}:{from:e.head,to:ve(e.head.line,t)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return jo(t,function(e){return{from:ve(e.from().line,0),to:Se(t.doc,ve(e.to().line+1,0))}})},delLineLeft:function(e){return jo(e,function(e){return{from:ve(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(r){return jo(r,function(e){var t=r.charCoords(e.head,\"div\").top+5;return{from:r.coordsChar({left:0,top:t},\"div\"),to:e.from()}})},delWrappedLineRight:function(n){return jo(n,function(e){var t=n.charCoords(e.head,\"div\").top+5,r=n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:t},\"div\");return{from:e.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ve(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ve(e.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return qo(t,e.head.line)},{origin:\"+move\",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Zo(t,e.head)},{origin:\"+move\",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return function(e,t){var r=ae(e.doc,t),n=function(e){for(var t;t=Re(e);)e=t.find(1,!0).line;return e}(r);n!=r&&(t=fe(n));return _o(!0,e,r,t,-1)}(t,e.head.line)},{origin:\"+move\",bias:-1})},goLineRight:function(r){return r.extendSelectionsBy(function(e){var t=r.cursorCoords(e.head,\"div\").top+5;return r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:t},\"div\")},j)},goLineLeft:function(r){return r.extendSelectionsBy(function(e){var t=r.cursorCoords(e.head,\"div\").top+5;return r.coordsChar({left:0,top:t},\"div\")},j)},goLineLeftSmart:function(n){return n.extendSelectionsBy(function(e){var t=n.cursorCoords(e.head,\"div\").top+5,r=n.coordsChar({left:0,top:t},\"div\");return r.ch<n.getLine(r.line).search(/\\S/)?Zo(n,e.head):r},j)},goLineUp:function(e){return e.moveV(-1,\"line\")},goLineDown:function(e){return e.moveV(1,\"line\")},goPageUp:function(e){return e.moveV(-1,\"page\")},goPageDown:function(e){return e.moveV(1,\"page\")},goCharLeft:function(e){return e.moveH(-1,\"char\")},goCharRight:function(e){return e.moveH(1,\"char\")},goColumnLeft:function(e){return e.moveH(-1,\"column\")},goColumnRight:function(e){return e.moveH(1,\"column\")},goWordLeft:function(e){return e.moveH(-1,\"word\")},goGroupRight:function(e){return e.moveH(1,\"group\")},goGroupLeft:function(e){return e.moveH(-1,\"group\")},goWordRight:function(e){return e.moveH(1,\"word\")},delCharBefore:function(e){return e.deleteH(-1,\"char\")},delCharAfter:function(e){return e.deleteH(1,\"char\")},delWordBefore:function(e){return e.deleteH(-1,\"word\")},delWordAfter:function(e){return e.deleteH(1,\"word\")},delGroupBefore:function(e){return e.deleteH(-1,\"group\")},delGroupAfter:function(e){return e.deleteH(1,\"group\")},indentAuto:function(e){return e.indentSelection(\"smart\")},indentMore:function(e){return e.indentSelection(\"add\")},indentLess:function(e){return e.indentSelection(\"subtract\")},insertTab:function(e){return e.replaceSelection(\"\\t\")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),l=z(e.getLine(o.line),o.ch,n);t.push(_(n-l%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection(\"add\"):e.execCommand(\"insertTab\")},transposeChars:function(l){return Xn(l,function(){for(var e=l.listSelections(),t=[],r=0;r<e.length;r++)if(e[r].empty()){var n=e[r].head,i=ae(l.doc,n.line).text;if(i)if(n.ch==i.length&&(n=new ve(n.line,n.ch-1)),0<n.ch)n=new ve(n.line,n.ch+1),l.replaceRange(i.charAt(n.ch-1)+i.charAt(n.ch-2),ve(n.line,n.ch-2),n,\"+transpose\");else if(n.line>l.doc.first){var o=ae(l.doc,n.line-1).text;o&&(n=new ve(n.line,1),l.replaceRange(i.charAt(0)+l.doc.lineSeparator()+o.charAt(o.length-1),ve(n.line-1,o.length-1),n,\"+transpose\"))}t.push(new mi(n,n))}l.setSelections(t)})},newlineAndIndent:function(n){return Xn(n,function(){for(var e=n.listSelections(),t=e.length-1;0<=t;t--)n.replaceRange(n.doc.lineSeparator(),e[t].anchor,e[t].head,\"+input\");e=n.listSelections();for(var r=0;r<e.length;r++)n.indentLine(e[r].from().line,null,!0);kn(n)})},openLine:function(e){return e.replaceSelection(\"\\n\",\"start\")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function qo(e,t){var r=ae(e.doc,t),n=Ue(r);return n!=r&&(t=fe(n)),_o(!0,e,n,t,1)}function Zo(e,t){var r=qo(e,t.line),n=ae(e.doc,r.line),i=Je(n,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\\S/)),l=t.line==r.line&&t.ch<=o&&t.ch;return ve(r.line,l?0:o,r.sticky)}return r}function Qo(e,t,r){if(\"string\"==typeof t&&!(t=$o[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=U}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}var Jo=new R;function el(e,t,r,n){var i=e.state.keySeq;if(i){if(Go(t))return\"handled\";if(/\\'$/.test(t)?e.state.keySeq=null:Jo.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),tl(e,i+\" \"+t,r,n))return!0}return tl(e,t,r,n)}function tl(e,t,r,n){var i=function(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=Bo(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&Bo(t,e.options.extraKeys,r,e)||Bo(t,e.options.keyMap,r,e)}(e,t,n);return\"multi\"==i&&(e.state.keySeq=t),\"handled\"==i&&sr(e,\"keyHandled\",e,t,r),\"handled\"!=i&&\"multi\"!=i||(ut(r),dn(e)),!!i}function rl(t,e){var r=Vo(e,!0);return!!r&&(e.shiftKey&&!t.state.keySeq?el(t,\"Shift-\"+r,e,function(e){return Qo(t,e,!0)})||el(t,r,e,function(e){if(\"string\"==typeof e?/^go[A-Z]/.test(e):e.motion)return Qo(t,e)}):el(t,r,e,function(e){return Qo(t,e)}))}var nl=null;function il(e){var t=this;if(t.curOp.focus=W(),!ot(t,e)){x&&C<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=rl(t,e);v&&(nl=n?r:null,!n&&88==r&&!St&&(w?e.metaKey:e.ctrlKey)&&t.replaceSelection(\"\",null,\"cut\")),18!=r||/\\bRevMirror-crosshair\\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function r(e){18!=e.keyCode&&e.altKey||(T(t,\"RevMirror-crosshair\"),nt(document,\"keyup\",r),nt(document,\"mouseover\",r))}H(t,\"RevMirror-crosshair\"),tt(document,\"keyup\",r),tt(document,\"mouseover\",r)}(t)}}function ol(e){16==e.keyCode&&(this.doc.sel.shift=!1),ot(this,e)}function ll(e){var t=this;if(!(wr(t.display,e)||ot(t,e)||e.ctrlKey&&!e.altKey||w&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(v&&r==nl)return nl=null,void ut(e);if(!v||e.which&&!(e.which<10)||!rl(t,e)){var i,o=String.fromCharCode(null==n?r:n);if(\"\\b\"!=o)if(!el(i=t,\"'\"+o+\"'\",e,function(e){return Qo(i,e,!0)}))t.display.input.onKeyPress(e)}}}var sl,al,ul=function(e,t,r){this.time=e,this.pos=t,this.button=r};function cl(e){var t=this,r=t.display;if(!(ot(t,e)||r.activeTouch&&r.input.supportsTouch()))if(r.input.ensurePolled(),r.shift=e.shiftKey,wr(r,e))b||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100));else if(!dl(t,e)){var n,i,o,l=ln(t,e),s=pt(e),a=l?(n=l,i=s,o=+new Date,al&&al.compare(o,n,i)?(sl=al=null,\"triple\"):sl&&sl.compare(o,n,i)?(al=new ul(o,n,i),sl=null,\"double\"):(sl=new ul(o,n,i),al=null,\"single\")):\"single\";window.focus(),1==s&&t.state.selectingText&&t.state.selectingText(e),l&&function(r,e,n,t,i){var o=\"Click\";\"double\"==t?o=\"Double\"+o:\"triple\"==t&&(o=\"Triple\"+o);return el(r,Uo(o=(1==e?\"Left\":2==e?\"Middle\":\"Right\")+o,i),i,function(e){if(\"string\"==typeof e&&(e=$o[e]),!e)return!1;var t=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),t=e(r,n)!=U}finally{r.state.suppressEdits=!1}return t})}(t,s,l,a,e)||(1==s?l?function(e,t,r,n){x?setTimeout(E(pn,e),0):e.curOp.focus=W();var i,o=function(e,t,r){var n=e.getOption(\"configureMouse\"),i=n?n(e,t,r):{};if(null==i.unit){var o=d?r.shiftKey&&r.metaKey:r.altKey;i.unit=o?\"rectangle\":\"single\"==t?\"char\":\"double\"==t?\"word\":\"line\"}(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||r.shiftKey);null==i.addNew&&(i.addNew=w?r.metaKey:r.ctrlKey);null==i.moveOnDrag&&(i.moveOnDrag=!(w?r.altKey:r.ctrlKey));return i}(e,r,n),l=e.doc.sel;e.options.dragDrop&&mt&&!e.isReadOnly()&&\"single\"==r&&-1<(i=l.contains(t))&&(me((i=l.ranges[i]).from(),t)<0||0<t.xRel)&&(0<me(i.to(),t)||t.xRel<0)?function(t,r,n,i){var o=t.display,l=!1,s=Yn(t,function(e){b&&(o.scroller.draggable=!1),t.state.draggingText=!1,nt(o.wrapper.ownerDocument,\"mouseup\",s),nt(o.wrapper.ownerDocument,\"mousemove\",a),nt(o.scroller,\"dragstart\",u),nt(o.scroller,\"drop\",s),l||(ut(e),i.addNew||Ui(t.doc,n,null,null,i.extend),b||x&&9==C?setTimeout(function(){o.wrapper.ownerDocument.body.focus(),o.input.focus()},20):o.input.focus())}),a=function(e){l=l||10<=Math.abs(r.clientX-e.clientX)+Math.abs(r.clientY-e.clientY)},u=function(){return l=!0};b&&(o.scroller.draggable=!0);(t.state.draggingText=s).copy=!i.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop();tt(o.wrapper.ownerDocument,\"mouseup\",s),tt(o.wrapper.ownerDocument,\"mousemove\",a),tt(o.scroller,\"dragstart\",u),tt(o.scroller,\"drop\",s),gn(t),setTimeout(function(){return o.input.focus()},20)}(e,n,t,o):function(v,e,m,y){var l=v.display,b=v.doc;ut(e);var w,x,C=b.sel,t=C.ranges;y.addNew&&!y.extend?(x=b.sel.contains(m),w=-1<x?t[x]:new mi(m,m)):(w=b.sel.primary(),x=b.sel.primIndex);if(\"rectangle\"==y.unit)y.addNew||(w=new mi(m,m)),m=ln(v,e,!0,!0),x=-1;else{var r=hl(v,m,y.unit);w=y.extend?Gi(w,r.anchor,r.head,y.extend):r}y.addNew?-1==x?(x=t.length,Yi(b,yi(t.concat([w]),x),{scroll:!1,origin:\"*mouse\"})):1<t.length&&t[x].empty()&&\"char\"==y.unit&&!y.extend?(Yi(b,yi(t.slice(0,x).concat(t.slice(x+1)),0),{scroll:!1,origin:\"*mouse\"}),C=b.sel):Ki(b,x,w,K):(Yi(b,new vi([w],x=0),K),C=b.sel);var S=m;function s(e){if(0!=me(S,e))if(S=e,\"rectangle\"==y.unit){for(var t=[],r=v.options.tabSize,n=z(ae(b,m.line).text,m.ch,r),i=z(ae(b,e.line).text,e.ch,r),o=Math.min(n,i),l=Math.max(n,i),s=Math.min(m.line,e.line),a=Math.min(v.lastLine(),Math.max(m.line,e.line));s<=a;s++){var u=ae(b,s).text,c=X(u,o,r);o==l?t.push(new mi(ve(s,c),ve(s,c))):u.length>c&&t.push(new mi(ve(s,c),ve(s,X(u,l,r))))}t.length||t.push(new mi(m,m)),Yi(b,yi(C.ranges.slice(0,x).concat(t),x),{origin:\"*mouse\",scroll:!1}),v.scrollIntoView(e)}else{var h,f=w,d=hl(v,e,y.unit),p=f.anchor;0<me(d.anchor,p)?(h=d.head,p=xe(f.from(),d.anchor)):(h=d.anchor,p=we(f.to(),d.head));var g=C.ranges.slice(0);g[x]=function(e,t){var r=t.anchor,n=t.head,i=ae(e.doc,r.line);if(0==me(r,n)&&r.sticky==n.sticky)return t;var o=Je(i);if(!o)return t;var l=Ze(o,r.ch,r.sticky),s=o[l];if(s.from!=r.ch&&s.to!=r.ch)return t;var a,u=l+(s.from==r.ch==(1!=s.level)?0:1);if(0==u||u==o.length)return t;if(n.line!=r.line)a=0<(n.line-r.line)*(\"ltr\"==e.doc.direction?1:-1);else{var c=Ze(o,n.ch,n.sticky),h=c-l||(n.ch-r.ch)*(1==s.level?-1:1);a=c==u-1||c==u?h<0:0<h}var f=o[u+(a?-1:0)],d=a==(1==f.level),p=d?f.from:f.to,g=d?\"after\":\"before\";return r.ch==p&&r.sticky==g?t:new mi(new ve(r.line,p,g),n)}(v,new mi(Se(b,p),h)),Yi(b,yi(g,x),K)}}var a=l.wrapper.getBoundingClientRect(),u=0;function n(e){v.state.selectingText=!1,u=1/0,ut(e),l.input.focus(),nt(l.wrapper.ownerDocument,\"mousemove\",i),nt(l.wrapper.ownerDocument,\"mouseup\",o),b.history.lastSelOrigin=null}var i=Yn(v,function(e){0!==e.buttons&&pt(e)?function e(t){var r=++u;var n=ln(v,t,!0,\"rectangle\"==y.unit);if(!n)return;if(0!=me(n,S)){v.curOp.focus=W(),s(n);var i=wn(l,b);(n.line>=i.to||n.line<i.from)&&setTimeout(Yn(v,function(){u==r&&e(t)}),150)}else{var o=t.clientY<a.top?-20:t.clientY>a.bottom?20:0;o&&setTimeout(Yn(v,function(){u==r&&(l.scroller.scrollTop+=o,e(t))}),50)}}(e):n(e)}),o=Yn(v,n);v.state.selectingText=o,tt(l.wrapper.ownerDocument,\"mousemove\",i),tt(l.wrapper.ownerDocument,\"mouseup\",o)}(e,n,t,o)}(t,l,a,e):dt(e)==r.scroller&&ut(e):2==s?(l&&Ui(t.doc,l),setTimeout(function(){return r.input.focus()},20)):3==s&&(S?pl(t,e):gn(t)))}}function hl(e,t,r){if(\"char\"==r)return new mi(t,t);if(\"word\"==r)return e.findWordAt(t);if(\"line\"==r)return new mi(ve(t.line,0),Se(e.doc,ve(t.line+1,0)));var n=r(e,t);return new mi(n.from,n.to)}function fl(e,t,r,n){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&ut(t);var l=e.display,s=l.lineDiv.getBoundingClientRect();if(o>s.bottom||!st(e,r))return ht(t);o-=s.top-l.viewOffset;for(var a=0;a<e.options.gutters.length;++a){var u=l.gutters.childNodes[a];if(u&&u.getBoundingClientRect().right>=i)return it(e,r,e,de(e.doc,o),e.options.gutters[a],t),ht(t)}}function dl(e,t){return fl(e,t,\"gutterClick\",!0)}function pl(e,t){wr(e.display,t)||function(e,t){if(!st(e,\"gutterContextMenu\"))return!1;return fl(e,t,\"gutterContextMenu\",!1)}(e,t)||ot(e,t,\"contextmenu\")||e.display.input.onContextMenu(t)}function gl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\\s*cm-s-\\S+/g,\"\")+e.options.theme.replace(/(^|\\s)\\s*/g,\" cm-s-\"),zr(e)}ul.prototype.compare=function(e,t,r){return this.time+400>e&&0==me(t,this.pos)&&r==this.button};var vl={toString:function(){return\"RevMirror.Init\"}},ml={},yl={};function bl(e){ui(e),qn(e),xn(e)}function wl(e,t,r){if(!t!=!(r&&r!=vl)){var n=e.display.dragFunctions,i=t?tt:nt;i(e.display.scroller,\"dragstart\",n.start),i(e.display.scroller,\"dragenter\",n.enter),i(e.display.scroller,\"dragover\",n.over),i(e.display.scroller,\"dragleave\",n.leave),i(e.display.scroller,\"drop\",n.drop)}}function xl(e){e.options.lineWrapping?(H(e.display.wrapper,\"RevMirror-wrap\"),e.display.sizer.style.minWidth=\"\",e.display.sizerWidth=null):(T(e.display.wrapper,\"RevMirror-wrap\"),$e(e)),on(e),qn(e),zr(e),setTimeout(function(){return Pn(e)},100)}function Cl(e,t){var r=this;if(!(this instanceof Cl))return new Cl(e,t);this.options=t=t?I(t):{},I(ml,t,!1),ci(t);var n=t.value;\"string\"==typeof n&&(n=new ko(n,t.mode,null,t.lineSeparator,t.direction)),this.doc=n;var i=new Cl.inputStyles[t.inputStyle](this),o=this.display=new se(e,n,i);for(var l in ui(o.wrapper.RevMirror=this),gl(this),t.lineWrapping&&(this.display.wrapper.className+=\" RevMirror-wrap\"),zn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new R,keySeq:null,specialChars:null},t.autofocus&&!f&&o.input.focus(),x&&C<11&&setTimeout(function(){return r.display.input.reset(!0)},20),function(i){var o=i.display;tt(o.scroller,\"mousedown\",Yn(i,cl)),tt(o.scroller,\"dblclick\",x&&C<11?Yn(i,function(e){if(!ot(i,e)){var t=ln(i,e);if(t&&!dl(i,e)&&!wr(i.display,e)){ut(e);var r=i.findWordAt(t);Ui(i.doc,r.anchor,r.head)}}}):function(e){return ot(i,e)||ut(e)});S||tt(o.scroller,\"contextmenu\",function(e){return pl(i,e)});var r,n={end:0};function l(){o.activeTouch&&(r=setTimeout(function(){return o.activeTouch=null},1e3),(n=o.activeTouch).end=+new Date)}function s(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return 400<r*r+n*n}tt(o.scroller,\"touchstart\",function(e){if(!ot(i,e)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(e)&&!dl(i,e)){o.input.ensurePolled(),clearTimeout(r);var t=+new Date;o.activeTouch={start:t,moved:!1,prev:t-n.end<=300?n:null},1==e.touches.length&&(o.activeTouch.left=e.touches[0].pageX,o.activeTouch.top=e.touches[0].pageY)}}),tt(o.scroller,\"touchmove\",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),tt(o.scroller,\"touchend\",function(e){var t=o.activeTouch;if(t&&!wr(o,e)&&null!=t.left&&!t.moved&&new Date-t.start<300){var r,n=i.coordsChar(o.activeTouch,\"page\");r=!t.prev||s(t,t.prev)?new mi(n,n):!t.prev.prev||s(t,t.prev.prev)?i.findWordAt(n):new mi(ve(n.line,0),Se(i.doc,ve(n.line+1,0))),i.setSelection(r.anchor,r.head),i.focus(),ut(e)}l()}),tt(o.scroller,\"touchcancel\",l),tt(o.scroller,\"scroll\",function(){o.scroller.clientHeight&&(On(i,o.scroller.scrollTop),Dn(i,o.scroller.scrollLeft,!0),it(i,\"scroll\",i))}),tt(o.scroller,\"mousewheel\",function(e){return gi(i,e)}),tt(o.scroller,\"DOMMouseScroll\",function(e){return gi(i,e)}),tt(o.wrapper,\"scroll\",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(e){ot(i,e)||ft(e)},over:function(e){ot(i,e)||(!function(e,t){var r=ln(e,t);if(r){var n=document.createDocumentFragment();cn(e,r,n),e.display.dragCursor||(e.display.dragCursor=A(\"div\",null,\"RevMirror-cursors RevMirror-dragcursors\"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),N(e.display.dragCursor,n)}}(i,e),ft(e))},start:function(e){return function(e,t){if(x&&(!e.state.draggingText||+new Date-To<100))ft(t);else if(!ot(e,t)&&!wr(e.display,t)&&(t.dataTransfer.setData(\"Text\",e.getSelection()),t.dataTransfer.effectAllowed=\"copyMove\",t.dataTransfer.setDragImage&&!a)){var r=A(\"img\",null,null,\"position: fixed; left: 0; top: 0;\");r.src=\"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\",v&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),v&&r.parentNode.removeChild(r)}}(i,e)},drop:Yn(i,Mo),leave:function(e){ot(i,e)||No(i)}};var e=o.input.getField();tt(e,\"keyup\",function(e){return ol.call(i,e)}),tt(e,\"keydown\",Yn(i,il)),tt(e,\"keypress\",Yn(i,ll)),tt(e,\"focus\",function(e){return vn(i,e)}),tt(e,\"blur\",function(e){return mn(i,e)})}(this),Do(),Bn(this),this.curOp.forceUpdate=!0,Oi(this,n),t.autofocus&&!f||this.hasFocus()?setTimeout(E(vn,this),20):mn(this),yl)yl.hasOwnProperty(l)&&yl[l](r,t[l],vl);Cn(this),t.finishInit&&t.finishInit(this);for(var s=0;s<Sl.length;++s)Sl[s](r);Gn(this),b&&t.lineWrapping&&\"optimizelegibility\"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering=\"auto\")}Cl.defaults=ml,Cl.optionHandlers=yl;var Sl=[];function Ll(e,t,r,n){var i,o=e.doc;null==r&&(r=\"add\"),\"smart\"==r&&(o.mode.indent?i=Rt(e,t).state:r=\"prev\");var l=e.options.tabSize,s=ae(o,t),a=z(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\\s*/)[0];if(n||/\\S/.test(s.text)){if(\"smart\"==r&&((u=o.mode.indent(i,s.text.slice(c.length),s.text))==U||150<u)){if(!n)return;r=\"prev\"}}else u=0,r=\"not\";\"prev\"==r?u=t>o.first?z(ae(o,t-1).text,null,l):0:\"add\"==r?u=a+e.options.indentUnit:\"subtract\"==r?u=a-e.options.indentUnit:\"number\"==typeof r&&(u=a+r),u=Math.max(0,u);var h=\"\",f=0;if(e.options.indentWithTabs)for(var d=Math.floor(u/l);d;--d)f+=l,h+=\"\\t\";if(f<u&&(h+=_(u-f)),h!=c)return ao(o,h,ve(t,0),ve(t,c.length),\"+input\"),!(s.stateAfter=null);for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<c.length){var v=ve(t,c.length);Ki(o,p,new mi(v,v));break}}}Cl.defineInitHook=function(e){return Sl.push(e)};var kl=null;function Tl(e){kl=e}function Ml(e,t,r,n,i){var o=e.doc;e.display.shift=!1,n||(n=o.sel);var l,s=e.state.pasteIncoming||\"paste\"==i,a=xt(t),u=null;if(s&&1<n.ranges.length)if(kl&&kl.text.join(\"\\n\")==t){if(n.ranges.length%kl.text.length==0){u=[];for(var c=0;c<kl.text.length;c++)u.push(o.splitLines(kl.text[c]))}}else a.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(u=q(a,function(e){return[e]}));for(var h=n.ranges.length-1;0<=h;h--){var f=n.ranges[h],d=f.from(),p=f.to();f.empty()&&(r&&0<r?d=ve(d.line,d.ch-r):e.state.overwrite&&!s?p=ve(p.line,Math.min(ae(o,p.line).text.length,p.ch+$(a).length)):kl&&kl.lineWise&&kl.text.join(\"\\n\")==t&&(d=p=ve(d.line,0))),l=e.curOp.updateInput;var g={from:d,to:p,text:u?u[h%u.length]:a,origin:i||(s?\"paste\":e.state.cutIncoming?\"cut\":\"+input\")};no(e.doc,g),sr(e,\"inputRead\",e,g)}t&&!s&&Ol(e,t),kn(e),e.curOp.updateInput=l,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Nl(e,t){var r=e.clipboardData&&e.clipboardData.getData(\"Text\");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Xn(t,function(){return Ml(t,r,0,null,\"paste\")}),!0}function Ol(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;0<=n;n--){var i=r.ranges[n];if(!(100<i.head.ch||n&&r.ranges[n-1].head.line==i.head.line)){var o=e.getModeAt(i.head),l=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(-1<t.indexOf(o.electricChars.charAt(s))){l=Ll(e,i.head.line,\"smart\");break}}else o.electricInput&&o.electricInput.test(ae(e.doc,i.head.line).text.slice(0,i.head.ch))&&(l=Ll(e,i.head.line,\"smart\"));l&&sr(e,\"electricInput\",e,i.head.line)}}}function Al(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,o={anchor:ve(i,0),head:ve(i+1,0)};r.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function Dl(e,t){e.setAttribute(\"autocorrect\",\"off\"),e.setAttribute(\"autocapitalize\",\"off\"),e.setAttribute(\"spellcheck\",!!t)}function Wl(){var e=A(\"textarea\",null,null,\"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\"),t=A(\"div\",[e],null,\"overflow: hidden; position: relative; width: 3px; height: 0px;\");return b?e.style.width=\"1000px\":e.setAttribute(\"wrap\",\"off\"),c&&(e.style.border=\"1px solid black\"),Dl(e),t}function Hl(n,i,o,e,l){var t=i,r=o,s=ae(n,i.line);function a(e){var t,r;if(null==(t=l?function(t,r,s,e){var a=Je(r,t.doc.direction);if(!a)return Yo(r,s,e);s.ch>=r.text.length?(s.ch=r.text.length,s.sticky=\"before\"):s.ch<=0&&(s.ch=0,s.sticky=\"after\");var n=Ze(a,s.ch,s.sticky),i=a[n];if(\"ltr\"==t.doc.direction&&i.level%2==0&&(0<e?i.to>s.ch:i.from<s.ch))return Yo(r,s,e);var o,u=function(e,t){return Xo(r,e instanceof ve?e.ch:e,t)},l=function(e){return t.options.lineWrapping?(o=o||Ar(t,r),qr(t,r,o,e)):{begin:0,end:r.text.length}},c=l(\"before\"==s.sticky?u(s,-1):s.ch);if(\"rtl\"==t.doc.direction||1==i.level){var h=1==i.level==e<0,f=u(s,h?1:-1);if(null!=f&&(h?f<=i.to&&f<=c.end:f>=i.from&&f>=c.begin)){var d=h?\"before\":\"after\";return new ve(s.line,f,d)}}var p=function(e,t,r){for(var n=function(e,t){return t?new ve(s.line,u(e,1),\"before\"):new ve(s.line,e,\"after\")};0<=e&&e<a.length;e+=t){var i=a[e],o=0<t==(1!=i.level),l=o?r.begin:u(r.end,-1);if(i.from<=l&&l<i.to)return n(l,o);if(l=o?i.from:u(i.to,-1),r.begin<=l&&l<r.end)return n(l,o)}},g=p(n+e,e,c);if(g)return g;var v=0<e?c.end:u(c.begin,-1);return null==v||0<e&&v==r.text.length||!(g=p(0<e?0:a.length-1,e,l(v)))?null:g}(n.cm,s,i,o):Yo(s,i,o))){if(e||(r=i.line+o)<n.first||r>=n.first+n.size||(i=new ve(r,i.ch,i.sticky),!(s=ae(n,r))))return!1;i=_o(l,n.cm,s,i.line,o)}else i=t;return!0}if(\"char\"==e)a();else if(\"column\"==e)a(!0);else if(\"word\"==e||\"group\"==e)for(var u=null,c=\"group\"==e,h=n.cm&&n.cm.getHelper(i,\"wordChars\"),f=!0;!(o<0)||a(!f);f=!1){var d=s.text.charAt(i.ch)||\"\\n\",p=te(d,h)?\"w\":c&&\"\\n\"==d?\"n\":!c||/\\s/.test(d)?null:\"p\";if(!c||f||p||(p=\"s\"),u&&u!=p){o<0&&(o=1,a(),i.sticky=\"after\");break}if(p&&(u=p),0<o&&!a(!f))break}var g=Ji(n,i,t,r,!0);return ye(t,g)&&(g.hitSide=!0),g}function Fl(e,t,r,n){var i,o,l=e.doc,s=t.left;if(\"page\"==n){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(a-.5*Jr(e.display),3);i=(0<r?t.bottom:t.top)+r*u}else\"line\"==n&&(i=0<r?t.bottom+3:t.top-3);for(;(o=_r(e,s,i)).outside;){if(r<0?i<=0:i>=l.height){o.hitSide=!0;break}i+=5*r}return o}var Pl=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new R,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function El(e,t){var r=Or(e,t.line);if(!r||r.hidden)return null;var n=ae(e.doc,t.line),i=Mr(r,n,t.line),o=Je(n,e.doc.direction),l=\"left\";o&&(l=Ze(o,t.ch)%2?\"right\":\"left\");var s=Fr(i.map,t.ch,l);return s.offset=\"right\"==s.collapse?s.end:s.start,s}function Il(e,t){return t&&(e.bad=!0),e}function zl(e,t,r){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[r]))return Il(e.clipPos(ve(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==n)return Rl(o,t,r)}}function Rl(u,e,t){var r=u.text.firstChild,n=!1;if(!e||!D(r,e))return Il(ve(fe(u.line),0),!0);if(e==r&&(n=!0,e=r.childNodes[t],t=0,!e)){var i=u.rest?$(u.rest):u.line;return Il(ve(fe(i),i.text.length),n)}var o=3==e.nodeType?e:null,l=e;for(o||1!=e.childNodes.length||3!=e.firstChild.nodeType||(o=e.firstChild,t&&(t=o.nodeValue.length));l.parentNode!=r;)l=l.parentNode;var c=u.measure,h=c.maps;function s(e,t,r){for(var n=-1;n<(h?h.length:0);n++)for(var i=n<0?c.map:h[n],o=0;o<i.length;o+=3){var l=i[o+2];if(l==e||l==t){var s=fe(n<0?u.line:u.rest[n]),a=i[o]+r;return(r<0||l!=e)&&(a=i[o+(r?1:0)]),ve(s,a)}}}var a=s(o,l,t);if(a)return Il(a,n);for(var f=l.nextSibling,d=o?o.nodeValue.length-t:0;f;f=f.nextSibling){if(a=s(f,f.firstChild,0))return Il(ve(a.line,a.ch-d),n);d+=f.textContent.length}for(var p=l.previousSibling,g=t;p;p=p.previousSibling){if(a=s(p,p.firstChild,-1))return Il(ve(a.line,a.ch+g),n);g+=p.textContent.length}}Pl.prototype.init=function(e){var t=this,l=this,s=l.cm,a=l.div=e.lineDiv;function r(e){if(!ot(s,e)){if(s.somethingSelected())Tl({lineWise:!1,text:s.getSelections()}),\"cut\"==e.type&&s.replaceSelection(\"\",null,\"cut\");else{if(!s.options.lineWiseCopyCut)return;var t=Al(s);Tl({lineWise:!0,text:t.text}),\"cut\"==e.type&&s.operation(function(){s.setSelections(t.ranges,0,V),s.replaceSelection(\"\",null,\"cut\")})}if(e.clipboardData){e.clipboardData.clearData();var r=kl.text.join(\"\\n\");if(e.clipboardData.setData(\"Text\",r),e.clipboardData.getData(\"Text\")==r)return void e.preventDefault()}var n=Wl(),i=n.firstChild;s.display.lineSpace.insertBefore(n,s.display.lineSpace.firstChild),i.value=kl.text.join(\"\\n\");var o=document.activeElement;P(i),setTimeout(function(){s.display.lineSpace.removeChild(n),o.focus(),o==a&&l.showPrimarySelection()},50)}}Dl(a,s.options.spellcheck),tt(a,\"paste\",function(e){ot(s,e)||Nl(e,s)||C<=11&&setTimeout(Yn(s,function(){return t.updateFromDOM()}),20)}),tt(a,\"compositionstart\",function(e){t.composing={data:e.data,done:!1}}),tt(a,\"compositionupdate\",function(e){t.composing||(t.composing={data:e.data,done:!1})}),tt(a,\"compositionend\",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),tt(a,\"touchstart\",function(){return l.forceCompositionEnd()}),tt(a,\"input\",function(){t.composing||t.readFromDOMSoon()}),tt(a,\"copy\",r),tt(a,\"cut\",r)},Pl.prototype.prepareSelection=function(){var e=un(this.cm,!1);return e.focus=this.cm.state.focused,e},Pl.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Pl.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Pl.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),n=r.from(),i=r.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var o=zl(t,e.anchorNode,e.anchorOffset),l=zl(t,e.focusNode,e.focusOffset);if(!o||o.bad||!l||l.bad||0!=me(xe(o,l),n)||0!=me(we(o,l),i)){var s=t.display.view,a=n.line>=t.display.viewFrom&&El(t,n)||{node:s[0].measure.map[2],offset:0},u=i.line<t.display.viewTo&&El(t,i);if(!u){var c=s[s.length-1].measure,h=c.maps?c.maps[c.maps.length-1]:c.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(a&&u){var f,d=e.rangeCount&&e.getRangeAt(0);try{f=k(a.node,a.offset,u.offset,u.node)}catch(e){}f&&(!g&&t.state.focused?(e.collapse(a.node,a.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),d&&null==e.anchorNode?e.addRange(d):g&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Pl.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Pl.prototype.showMultipleSelections=function(e){N(this.cm.display.cursorDiv,e.cursors),N(this.cm.display.selectionDiv,e.selection)},Pl.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Pl.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return D(this.div,t)},Pl.prototype.focus=function(){\"nocursor\"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Pl.prototype.blur=function(){this.div.blur()},Pl.prototype.getField=function(){return this.div},Pl.prototype.supportsTouch=function(){return!0},Pl.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():Xn(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},Pl.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Pl.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(h&&l&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/RevMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:\"keydown\",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var r=zl(t,e.anchorNode,e.anchorOffset),n=zl(t,e.focusNode,e.focusOffset);r&&n&&Xn(t,function(){Yi(t.doc,bi(r,n),V),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}}},Pl.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,r,n=this.cm,i=n.display,o=n.doc.sel.primary(),l=o.from(),s=o.to();if(0==l.ch&&l.line>n.firstLine()&&(l=ve(l.line-1,ae(n.doc,l.line-1).length)),s.ch==ae(n.doc,s.line).text.length&&s.line<n.lastLine()&&(s=ve(s.line+1,0)),l.line<i.viewFrom||s.line>i.viewTo-1)return!1;l.line==i.viewFrom||0==(e=sn(n,l.line))?(t=fe(i.view[0].line),r=i.view[0].node):(t=fe(i.view[e].line),r=i.view[e-1].node.nextSibling);var a,u,c=sn(n,s.line);if(c==i.view.length-1?(a=i.viewTo-1,u=i.lineDiv.lastChild):(a=fe(i.view[c+1].line)-1,u=i.view[c+1].node.previousSibling),!r)return!1;for(var h=n.doc.splitLines(function(a,e,t,u,c){var r=\"\",h=!1,f=a.doc.lineSeparator(),d=!1;function p(){h&&(r+=f,d&&(r+=f),h=d=!1)}function g(e){e&&(p(),r+=e)}function v(e){if(1==e.nodeType){var t=e.getAttribute(\"cm-text\");if(t)return void g(t);var r,n=e.getAttribute(\"cm-marker\");if(n){var i=a.findMarks(ve(u,0),ve(c+1,0),(s=+n,function(e){return e.id==s}));return void(i.length&&(r=i[0].find(0))&&g(ue(a.doc,r.from,r.to).join(f)))}if(\"false\"==e.getAttribute(\"contenteditable\"))return;var o=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;o&&p();for(var l=0;l<e.childNodes.length;l++)v(e.childNodes[l]);/^(pre|p)$/i.test(e.nodeName)&&(d=!0),o&&(h=!0)}else 3==e.nodeType&&g(e.nodeValue.replace(/\\u200b/g,\"\").replace(/\\u00a0/g,\" \"));var s}for(;v(e),e!=t;)e=e.nextSibling,d=!1;return r}(n,r,u,t,a)),f=ue(n.doc,ve(t,0),ve(a,ae(n.doc,a).text.length));1<h.length&&1<f.length;)if($(h)==$(f))h.pop(),f.pop(),a--;else{if(h[0]!=f[0])break;h.shift(),f.shift(),t++}for(var d=0,p=0,g=h[0],v=f[0],m=Math.min(g.length,v.length);d<m&&g.charCodeAt(d)==v.charCodeAt(d);)++d;for(var y=$(h),b=$(f),w=Math.min(y.length-(1==h.length?d:0),b.length-(1==f.length?d:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==h.length&&1==f.length&&t==l.line)for(;d&&d>l.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)d--,p++;h[h.length-1]=y.slice(0,y.length-p).replace(/^\\u200b+/,\"\"),h[0]=h[0].slice(d).replace(/\\u200b+$/,\"\");var x=ve(t,d),C=ve(a,f.length?$(f).length-p:0);return 1<h.length||h[0]||me(x,C)?(ao(n.doc,h,x,C,\"+input\"),!0):void 0},Pl.prototype.ensurePolled=function(){this.forceCompositionEnd()},Pl.prototype.reset=function(){this.forceCompositionEnd()},Pl.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Pl.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Pl.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Xn(this.cm,function(){return qn(e.cm)})},Pl.prototype.setUneditable=function(e){e.contentEditable=\"false\"},Pl.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Yn(this.cm,Ml)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Pl.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(\"nocursor\"!=e)},Pl.prototype.onContextMenu=function(){},Pl.prototype.resetPosition=function(){},Pl.prototype.needsContentAttribute=!0;var Bl,Gl,Ul,Vl=function(e){this.cm=e,this.prevInput=\"\",this.pollingFast=!1,this.polling=new R,this.hasSelection=!1,this.composing=null};Vl.prototype.init=function(t){var e=this,r=this,n=this.cm;this.createField(t);var i=this.textarea;function o(e){if(!ot(n,e)){if(n.somethingSelected())Tl({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var t=Al(n);Tl({lineWise:!0,text:t.text}),\"cut\"==e.type?n.setSelections(t.ranges,null,V):(r.prevInput=\"\",i.value=t.text.join(\"\\n\"),P(i))}\"cut\"==e.type&&(n.state.cutIncoming=!0)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),c&&(i.style.width=\"0px\"),tt(i,\"input\",function(){x&&9<=C&&e.hasSelection&&(e.hasSelection=null),r.poll()}),tt(i,\"paste\",function(e){ot(n,e)||Nl(e,n)||(n.state.pasteIncoming=!0,r.fastPoll())}),tt(i,\"cut\",o),tt(i,\"copy\",o),tt(t.scroller,\"paste\",function(e){wr(t,e)||ot(n,e)||(n.state.pasteIncoming=!0,r.focus())}),tt(t.lineSpace,\"selectstart\",function(e){wr(t,e)||ut(e)}),tt(i,\"compositionstart\",function(){var e=n.getCursor(\"from\");r.composing&&r.composing.range.clear(),r.composing={start:e,range:n.markText(e,n.getCursor(\"to\"),{className:\"RevMirror-composing\"})}}),tt(i,\"compositionend\",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},Vl.prototype.createField=function(e){this.wrapper=Wl(),this.textarea=this.wrapper.firstChild},Vl.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=un(e);if(e.options.moveInputWithCursor){var i=jr(e,r.sel.primary().head,\"div\"),o=t.wrapper.getBoundingClientRect(),l=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+l.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+l.left-o.left))}return n},Vl.prototype.showSelection=function(e){var t=this.cm.display;N(t.cursorDiv,e.cursors),N(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+\"px\",this.wrapper.style.left=e.teLeft+\"px\")},Vl.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput=\"\";var r=t.getSelection();this.textarea.value=r,t.state.focused&&P(this.textarea),x&&9<=C&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value=\"\",x&&9<=C&&(this.hasSelection=null))}},Vl.prototype.getField=function(){return this.textarea},Vl.prototype.supportsTouch=function(){return!1},Vl.prototype.focus=function(){if(\"nocursor\"!=this.cm.options.readOnly&&(!f||W()!=this.textarea))try{this.textarea.focus()}catch(e){}},Vl.prototype.blur=function(){this.textarea.blur()},Vl.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Vl.prototype.receivedFocus=function(){this.slowPoll()},Vl.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Vl.prototype.fastPoll=function(){var t=!1,r=this;r.pollingFast=!0,r.polling.set(20,function e(){r.poll()||t?(r.pollingFast=!1,r.slowPoll()):(t=!0,r.polling.set(60,e))})},Vl.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ct(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=r.value;if(i==n&&!t.somethingSelected())return!1;if(x&&9<=C&&this.hasSelection===i||w&&/[\\uf700-\\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||n||(n=\"\u200b\"),8666==o)return this.reset(),this.cm.execCommand(\"undo\")}for(var l=0,s=Math.min(n.length,i.length);l<s&&n.charCodeAt(l)==i.charCodeAt(l);)++l;return Xn(t,function(){Ml(t,i.slice(l),n.length-l,null,e.composing?\"*compose\":null),1e3<i.length||-1<i.indexOf(\"\\n\")?r.value=e.prevInput=\"\":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor(\"to\"),{className:\"RevMirror-composing\"}))}),!0},Vl.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Vl.prototype.onKeyPress=function(){x&&9<=C&&(this.hasSelection=null),this.fastPoll()},Vl.prototype.onContextMenu=function(e){var r=this,n=r.cm,i=n.display,o=r.textarea,t=ln(n,e),l=i.scroller.scrollTop;if(t&&!v){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(t)&&Yn(n,Yi)(n.doc,bi(t),V);var s=o.style.cssText,a=r.wrapper.style.cssText;r.wrapper.style.cssText=\"position: absolute\";var u,c=r.wrapper.getBoundingClientRect();if(o.style.cssText=\"position: absolute; width: 30px; height: 30px;\\n      top: \"+(e.clientY-c.top-5)+\"px; left: \"+(e.clientX-c.left-5)+\"px;\\n      z-index: 1000; background: \"+(x?\"rgba(255, 255, 255, .05)\":\"transparent\")+\";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\",b&&(u=window.scrollY),i.input.focus(),b&&window.scrollTo(null,u),i.input.reset(),n.somethingSelected()||(o.value=r.prevInput=\" \"),r.contextMenuPending=!0,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),x&&9<=C&&f(),S){ft(e);var h=function(){nt(window,\"mouseup\",h),setTimeout(d,20)};tt(window,\"mouseup\",h)}else setTimeout(d,50)}function f(){if(null!=o.selectionStart){var e=n.somethingSelected(),t=\"\u200b\"+(e?o.value:\"\");o.value=\"\u21da\",o.value=t,r.prevInput=e?\"\":\"\u200b\",o.selectionStart=1,o.selectionEnd=t.length,i.selForContextMenu=n.doc.sel}}function d(){if(r.contextMenuPending=!1,r.wrapper.style.cssText=a,o.style.cssText=s,x&&C<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=l),null!=o.selectionStart){(!x||x&&C<9)&&f();var e=0,t=function(){i.selForContextMenu==n.doc.sel&&0==o.selectionStart&&0<o.selectionEnd&&\"\u200b\"==r.prevInput?Yn(n,to)(n):e++<10?i.detectingSelectAll=setTimeout(t,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(t,200)}}},Vl.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=\"nocursor\"==e},Vl.prototype.setUneditable=function(){},Vl.prototype.needsContentAttribute=!1,function(i){var o=i.optionHandlers;function e(e,t,n,r){i.defaults[e]=t,n&&(o[e]=r?function(e,t,r){r!=vl&&n(e,t,r)}:n)}i.defineOption=e,i.Init=vl,e(\"value\",\"\",function(e,t){return e.setValue(t)},!0),e(\"mode\",null,function(e,t){e.doc.modeOption=t,Li(e)},!0),e(\"indentUnit\",2,Li,!0),e(\"indentWithTabs\",!1),e(\"smartIndent\",!0),e(\"tabSize\",4,function(e){ki(e),zr(e),qn(e)},!0),e(\"lineSeparator\",null,function(e,n){if(e.doc.lineSep=n){var i=[],o=e.doc.first;e.doc.iter(function(e){for(var t=0;;){var r=e.text.indexOf(n,t);if(-1==r)break;t=r+n.length,i.push(ve(o,r))}o++});for(var t=i.length-1;0<=t;t--)ao(e.doc,n,i[t],ve(i[t].line,i[t].ch+n.length))}}),e(\"specialChars\",/[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test(\"\\t\")?\"\":\"|\\t\"),\"g\"),r!=vl&&e.refresh()}),e(\"specialCharPlaceholder\",Qt,function(e){return e.refresh()},!0),e(\"electricChars\",!0),e(\"inputStyle\",f?\"contenteditable\":\"textarea\",function(){throw new Error(\"inputStyle can not (yet) be changed in a running editor\")},!0),e(\"spellcheck\",!1,function(e,t){return e.getInputField().spellcheck=t},!0),e(\"rtlMoveVisually\",!p),e(\"wholeLineUpdateBefore\",!0),e(\"theme\",\"default\",function(e){gl(e),bl(e)},!0),e(\"keyMap\",\"default\",function(e,t,r){var n=Ko(t),i=r!=vl&&Ko(r);i&&i.detach&&i.detach(e,n),n.attach&&n.attach(e,i||null)}),e(\"extraKeys\",null),e(\"configureMouse\",null),e(\"lineWrapping\",!1,xl,!0),e(\"gutters\",[],function(e){ci(e.options),bl(e)},!0),e(\"fixedGutter\",!0,function(e,t){e.display.gutters.style.left=t?rn(e.display)+\"px\":\"0\",e.refresh()},!0),e(\"coverGutterNextToScrollbar\",!1,function(e){return Pn(e)},!0),e(\"scrollbarStyle\",\"native\",function(e){zn(e),Pn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),e(\"lineNumbers\",!1,function(e){ci(e.options),bl(e)},!0),e(\"firstLineNumber\",1,bl,!0),e(\"lineNumberFormatter\",function(e){return e},bl,!0),e(\"showCursorWhenSelecting\",!1,an,!0),e(\"resetSelectionOnContextMenu\",!0),e(\"lineWiseCopyCut\",!0),e(\"pasteLinesPerSelection\",!0),e(\"readOnly\",!1,function(e,t){\"nocursor\"==t&&(mn(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),e(\"disableInput\",!1,function(e,t){t||e.display.input.reset()},!0),e(\"dragDrop\",!0,wl),e(\"allowDropFileTypes\",null),e(\"cursorBlinkRate\",530),e(\"cursorScrollMargin\",0),e(\"cursorHeight\",1,an,!0),e(\"singleCursorHeightPerLine\",!0,an,!0),e(\"workTime\",100),e(\"workDelay\",100),e(\"flattenSpans\",!0,ki,!0),e(\"addModeClass\",!1,ki,!0),e(\"pollInterval\",100),e(\"undoDepth\",200,function(e,t){return e.doc.history.undoDepth=t}),e(\"historyEventDelay\",1250),e(\"viewportMargin\",10,function(e){return e.refresh()},!0),e(\"maxHighlightLength\",1e4,ki,!0),e(\"moveInputWithCursor\",!0,function(e,t){t||e.display.input.resetPosition()}),e(\"tabindex\",null,function(e,t){return e.display.input.getField().tabIndex=t||\"\"}),e(\"autofocus\",null),e(\"direction\",\"ltr\",function(e,t){return e.doc.setDirection(t)},!0)}(Cl),Gl=(Bl=Cl).optionHandlers,Ul=Bl.helpers={},Bl.prototype={constructor:Bl,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var r=this.options,n=r[e];r[e]==t&&\"mode\"!=e||(r[e]=t,Gl.hasOwnProperty(e)&&Yn(this,Gl[e])(this,t,n),it(this,\"optionChange\",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?\"push\":\"unshift\"](Ko(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:_n(function(e,t){var r=e.token?e:Bl.getMode(this.options,e);if(r.startState)throw new Error(\"Overlays may not be stateful.\");!function(e,t,r){for(var n=0,i=r(t);n<e.length&&r(e[n])<=i;)n++;e.splice(n,0,t)}(this.state.overlays,{mode:r,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority}),this.state.modeGen++,qn(this)}),removeOverlay:_n(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||\"string\"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void qn(this)}}),indentLine:_n(function(e,t,r){\"string\"!=typeof t&&\"number\"!=typeof t&&(t=null==t?this.options.smartIndent?\"smart\":\"prev\":t?\"add\":\"subtract\"),pe(this.doc,e)&&Ll(this,e,t,r)}),indentSelection:_n(function(e){for(var t=this,r=this.doc.sel.ranges,n=-1,i=0;i<r.length;i++){var o=r[i];if(o.empty())o.head.line>n&&(Ll(t,o.head.line,e,!0),n=o.head.line,i==t.doc.sel.primIndex&&kn(t));else{var l=o.from(),s=o.to(),a=Math.max(n,l.line);n=Math.min(t.lastLine(),s.line-(s.ch?0:1))+1;for(var u=a;u<n;++u)Ll(t,u,e);var c=t.doc.sel.ranges;0==l.ch&&r.length==c.length&&0<c[i].from().ch&&Ki(t.doc,i,new mi(l,c[i].to()),V)}}}),getTokenAt:function(e,t){return Kt(this,e,t)},getLineTokens:function(e,t){return Kt(this,ve(e),t,!0)},getTokenTypeAt:function(e){e=Se(this.doc,e);var t,r=zt(this,ae(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var l=n+i>>1;if((l?r[2*l-1]:0)>=o)i=l;else{if(!(r[2*l+1]<o)){t=r[2*l+2];break}n=l+1}}var s=t?t.indexOf(\"overlay \"):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?Bl.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!Ul.hasOwnProperty(t))return r;var n=Ul[t],i=this.getModeAt(e);if(\"string\"==typeof i[t])n[i[t]]&&r.push(n[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var l=n[i[t][o]];l&&r.push(l)}else i.helperType&&n[i.helperType]?r.push(n[i.helperType]):n[i.name]&&r.push(n[i.name]);for(var s=0;s<n._global.length;s++){var a=n._global[s];a.pred(i,this)&&-1==B(r,a.val)&&r.push(a.val)}return r},getStateAfter:function(e,t){var r=this.doc;return Rt(this,(e=Ce(r,null==e?r.first+r.size-1:e))+1,t).state},cursorCoords:function(e,t){var r=this.doc.sel.primary();return jr(this,null==e?r.head:\"object\"==typeof e?Se(this.doc,e):e?r.from():r.to(),t||\"page\")},charCoords:function(e,t){return Kr(this,Se(this.doc,e),t||\"page\")},coordsChar:function(e,t){return _r(this,(e=Vr(this,e,t||\"page\")).left,e.top)},lineAtHeight:function(e,t){return e=Vr(this,{top:e,left:0},t||\"page\").top,de(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,r){var n,i=!1;if(\"number\"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:o<e&&(e=o,i=!0),n=ae(this.doc,e)}else n=e;return Ur(this,n,{top:0,left:0},t||\"page\",r||i).top+(i?this.doc.height-Ye(n):0)},defaultTextHeight:function(){return Jr(this.display)},defaultCharWidth:function(){return en(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o,l,s,a=this.display,u=(e=jr(this,Se(this.doc,e))).bottom,c=e.left;if(t.style.position=\"absolute\",t.setAttribute(\"cm-ignore-events\",\"true\"),this.display.input.setUneditable(t),a.sizer.appendChild(t),\"over\"==n)u=e.top;else if(\"above\"==n||\"near\"==n){var h=Math.max(a.wrapper.clientHeight,this.doc.height),f=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);(\"above\"==n||e.bottom+t.offsetHeight>h)&&e.top>t.offsetHeight?u=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=h&&(u=e.bottom),c+t.offsetWidth>f&&(c=f-t.offsetWidth)}t.style.top=u+\"px\",t.style.left=t.style.right=\"\",\"right\"==i?(c=a.sizer.clientWidth-t.offsetWidth,t.style.right=\"0px\"):(\"left\"==i?c=0:\"middle\"==i&&(c=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=c+\"px\"),r&&(o=this,l={left:c,top:u,right:c+t.offsetWidth,bottom:u+t.offsetHeight},null!=(s=Sn(o,l)).scrollTop&&On(o,s.scrollTop),null!=s.scrollLeft&&Dn(o,s.scrollLeft))},triggerOnKeyDown:_n(il),triggerOnKeyPress:_n(ll),triggerOnKeyUp:ol,triggerOnMouseDown:_n(cl),execCommand:function(e){if($o.hasOwnProperty(e))return $o[e].call(null,this)},triggerElectric:_n(function(e){Ol(this,e)}),findPosH:function(e,t,r,n){var i=1;t<0&&(i=-1,t=-t);for(var o=Se(this.doc,e),l=0;l<t&&!(o=Hl(this.doc,o,i,r,n)).hitSide;++l);return o},moveH:_n(function(t,r){var n=this;this.extendSelectionsBy(function(e){return n.display.shift||n.doc.extend||e.empty()?Hl(n.doc,e.head,t,r,n.options.rtlMoveVisually):t<0?e.from():e.to()},j)}),deleteH:_n(function(r,n){var e=this.doc.sel,i=this.doc;e.somethingSelected()?i.replaceSelection(\"\",null,\"+delete\"):jo(this,function(e){var t=Hl(i,e.head,r,n,!1);return r<0?{from:t,to:e.head}:{from:e.head,to:t}})}),findPosV:function(e,t,r,n){var i=1,o=n;t<0&&(i=-1,t=-t);for(var l=Se(this.doc,e),s=0;s<t;++s){var a=jr(this,l,\"div\");if(null==o?o=a.left:a.left=o,(l=Fl(this,a,i,r)).hitSide)break}return l},moveV:_n(function(n,i){var o=this,l=this.doc,s=[],a=!this.display.shift&&!l.extend&&l.sel.somethingSelected();if(l.extendSelectionsBy(function(e){if(a)return n<0?e.from():e.to();var t=jr(o,e.head,\"div\");null!=e.goalColumn&&(t.left=e.goalColumn),s.push(t.left);var r=Fl(o,t,n,i);return\"page\"==i&&e==l.sel.primary()&&Ln(o,Kr(o,r,\"div\").top-t.top),r},j),s.length)for(var e=0;e<l.sel.ranges.length;e++)l.sel.ranges[e].goalColumn=s[e]}),findWordAt:function(e){var t=ae(this.doc,e.line).text,r=e.ch,n=e.ch;if(t){var i=this.getHelper(e,\"wordChars\");\"before\"!=e.sticky&&n!=t.length||!r?++n:--r;for(var o=t.charAt(r),l=te(o,i)?function(e){return te(e,i)}:/\\s/.test(o)?function(e){return/\\s/.test(e)}:function(e){return!/\\s/.test(e)&&!te(e)};0<r&&l(t.charAt(r-1));)--r;for(;n<t.length&&l(t.charAt(n));)++n}return new mi(ve(e.line,r),ve(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?H(this.display.cursorDiv,\"RevMirror-overwrite\"):T(this.display.cursorDiv,\"RevMirror-overwrite\"),it(this,\"overwriteToggle\",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==W()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:_n(function(e,t){Tn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Lr(this)-this.display.barHeight,width:e.scrollWidth-Lr(this)-this.display.barWidth,clientHeight:Tr(this),clientWidth:kr(this)}},scrollIntoView:_n(function(e,t){var r,n;null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):\"number\"==typeof e?e={from:ve(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(n=e,Mn(r=this),r.curOp.scrollToPos=n):Nn(this,e.from,e.to,e.margin)}),setSize:_n(function(e,t){var r=this,n=function(e){return\"number\"==typeof e||/^\\d+$/.test(String(e))?e+\"px\":e};null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&Ir(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Zn(r,i,\"widget\");break}++i}),this.curOp.forceUpdate=!0,it(this,\"refresh\",this)}),operation:function(e){return Xn(this,e)},startOperation:function(){return Bn(this)},endOperation:function(){return Gn(this)},refresh:_n(function(){var e=this.display.cachedTextHeight;qn(this),this.curOp.forceUpdate=!0,zr(this),Tn(this,this.doc.scrollLeft,this.doc.scrollTop),si(this),(null==e||.5<Math.abs(e-Jr(this.display)))&&on(this),it(this,\"refresh\",this)}),swapDoc:_n(function(e){var t=this.doc;return t.cm=null,Oi(this,e),zr(this),this.display.input.reset(),Tn(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,sr(this,\"swapDoc\",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},at(Bl),Bl.registerHelper=function(e,t,r){Ul.hasOwnProperty(e)||(Ul[e]=Bl[e]={_global:[]}),Ul[e][t]=r},Bl.registerGlobalHelper=function(e,t,r,n){Bl.registerHelper(e,t,n),Ul[e]._global.push({pred:r,val:n})};var Kl,jl=\"iter insert remove copy getEditor constructor\".split(\" \");for(var Xl in ko.prototype)ko.prototype.hasOwnProperty(Xl)&&B(jl,Xl)<0&&(Cl.prototype[Xl]=function(e){return function(){return e.apply(this.doc,arguments)}}(ko.prototype[Xl]));return at(ko),Cl.inputStyles={textarea:Vl,contenteditable:Pl},Cl.defineMode=function(e){Cl.defaults.mode||\"null\"==e||(Cl.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),kt[e]=t}.apply(this,arguments)},Cl.defineMIME=function(e,t){Tt[e]=t},Cl.defineMode(\"null\",function(){return{token:function(e){return e.skipToEnd()}}}),Cl.defineMIME(\"text/plain\",\"null\"),Cl.defineExtension=function(e,t){Cl.prototype[e]=t},Cl.defineDocExtension=function(e,t){ko.prototype[e]=t},Cl.fromTextArea=function(t,e){if((e=e?I(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var r=W();e.autofocus=r==t||null!=t.getAttribute(\"autofocus\")&&r==document.body}function n(){t.value=s.getValue()}var i;if(t.form&&(tt(t.form,\"submit\",n),!e.leaveSubmitMethodAlone)){var o=t.form;i=o.submit;try{var l=o.submit=function(){n(),o.submit=i,o.submit(),o.submit=l}}catch(e){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display=\"\",t.form&&(nt(t.form,\"submit\",n),\"function\"==typeof t.form.submit&&(t.form.submit=i))}},t.style.display=\"none\";var s=Cl(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return s},(Kl=Cl).off=nt,Kl.on=tt,Kl.wheelEventPixels=pi,Kl.Doc=ko,Kl.splitLines=xt,Kl.countColumn=z,Kl.findColumn=X,Kl.isWordChar=ee,Kl.Pass=U,Kl.signal=it,Kl.Line=Yt,Kl.changeEnd=wi,Kl.scrollbarModel=In,Kl.Pos=ve,Kl.cmpPos=me,Kl.modes=kt,Kl.mimeModes=Tt,Kl.resolveMode=Mt,Kl.getMode=Nt,Kl.modeExtensions=Ot,Kl.extendMode=At,Kl.copyState=Dt,Kl.startState=Ht,Kl.innerMode=Wt,Kl.commands=$o,Kl.keyMap=Io,Kl.keyName=Vo,Kl.isModifierKey=Go,Kl.lookupKey=Bo,Kl.normalizeKeyMap=Ro,Kl.StringStream=Ft,Kl.SharedTextMarker=xo,Kl.TextMarker=bo,Kl.LineWidget=vo,Kl.e_preventDefault=ut,Kl.e_stopPropagation=ct,Kl.e_stop=ft,Kl.addClass=H,Kl.contains=D,Kl.rmClass=T,Kl.keyNames=Ho,Cl.version=\"5.39.0\",Cl});\r\n!function(e){\"object\"==typeof exports&&\"object\"==typeof module?e(require(\"../../lib/RevMirror\")):\"NOfunction\"==typeof define&&define.amd?define([\"../../lib/RevMirror\"],e):e(RevMirror)}(function(Ke){\"use strict\";Ke.defineMode(\"javascript\",function(e,l){var n,a,d=e.indentUnit,p=l.statementIndent,o=l.jsonld,c=l.json||o,u=l.typescript,f=l.wordCharacters||/[\\w$\\xa1-\\uffff]/,s=function(){function e(e){return{type:e,style:\"keyword\"}}var t=e(\"keyword a\"),r=e(\"keyword b\"),n=e(\"keyword c\"),a=e(\"keyword d\"),i=e(\"operator\"),o={type:\"atom\",style:\"atom\"};return{if:e(\"if\"),while:t,with:t,else:r,do:r,try:r,finally:r,return:a,break:a,continue:a,new:e(\"new\"),delete:n,void:n,throw:n,debugger:e(\"debugger\"),var:e(\"var\"),const:e(\"var\"),let:e(\"var\"),function:e(\"function\"),catch:e(\"catch\"),for:e(\"for\"),switch:e(\"switch\"),case:e(\"case\"),default:e(\"default\"),in:i,typeof:i,instanceof:i,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e(\"this\"),class:e(\"class\"),super:e(\"atom\"),yield:n,export:e(\"export\"),import:e(\"import\"),extends:n,await:n}}(),m=/[+\\-*&%=<>!?|~^@]/,v=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;function k(e,t,r){return n=e,a=r,t}function y(e,t){var a,r=e.next();if('\"'==r||\"'\"==r)return t.tokenize=(a=r,function(e,t){var r,n=!1;if(o&&\"@\"==e.peek()&&e.match(v))return t.tokenize=y,k(\"jsonld-keyword\",\"meta\");for(;null!=(r=e.next())&&(r!=a||n);)n=!n&&\"\\\\\"==r;return n||(t.tokenize=y),k(\"string\",\"string\")}),t.tokenize(e,t);if(\".\"==r&&e.match(/^\\d+(?:[eE][+\\-]?\\d+)?/))return k(\"number\",\"number\");if(\".\"==r&&e.match(\"..\"))return k(\"spread\",\"meta\");if(/[\\[\\]{}\\(\\),;\\:\\.]/.test(r))return k(r);if(\"=\"==r&&e.eat(\">\"))return k(\"=>\",\"operator\");if(\"0\"==r&&e.match(/^(?:x[\\da-f]+|o[0-7]+|b[01]+)n?/i))return k(\"number\",\"number\");if(/\\d/.test(r))return e.match(/^\\d*(?:n|(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)?/),k(\"number\",\"number\");if(\"/\"==r)return e.eat(\"*\")?(t.tokenize=w)(e,t):e.eat(\"/\")?(e.skipToEnd(),k(\"comment\",\"comment\")):Je(e,t,1)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if(\"/\"==t&&!n)return;\"[\"==t?n=!0:n&&\"]\"==t&&(n=!1)}r=!r&&\"\\\\\"==t}}(e),e.match(/^\\b(([gimyus])(?![gimyus]*\\2))+\\b/),k(\"regexp\",\"string-2\")):(e.eat(\"=\"),k(\"operator\",\"operator\",e.current()));if(\"`\"==r)return(t.tokenize=b)(e,t);if(\"#\"==r)return e.skipToEnd(),k(\"error\",\"error\");if(m.test(r))return\">\"==r&&t.lexical&&\">\"==t.lexical.type||(e.eat(\"=\")?\"!\"!=r&&\"=\"!=r||e.eat(\"=\"):/[<>*+\\-]/.test(r)&&(e.eat(r),\">\"==r&&e.eat(r))),k(\"operator\",\"operator\",e.current());if(f.test(r)){e.eatWhile(f);var n=e.current();if(\".\"!=t.lastType){if(s.propertyIsEnumerable(n)){var i=s[n];return k(i.type,i.style,n)}if(\"async\"==n&&e.match(/^(\\s|\\/\\*.*?\\*\\/)*[\\[\\(\\w]/,!1))return k(\"async\",\"keyword\",n)}return k(\"variable\",\"variable\",n)}}function w(e,t){for(var r,n=!1;r=e.next();){if(\"/\"==r&&n){t.tokenize=y;break}n=\"*\"==r}return k(\"comment\",\"comment\")}function b(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&(\"`\"==r||\"$\"==r&&e.eat(\"{\"))){t.tokenize=y;break}n=!n&&\"\\\\\"==r}return k(\"quasi\",\"string-2\",e.current())}var x=\"([{}])\";function i(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf(\"=>\",e.start);if(!(r<0)){if(u){var n=/:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(e.string.slice(e.start,r));n&&(r=n.index)}for(var a=0,i=!1,o=r-1;0<=o;--o){var c=e.string.charAt(o),s=x.indexOf(c);if(0<=s&&s<3){if(!a){++o;break}if(0==--a){\"(\"==c&&(i=!0);break}}else if(3<=s&&s<6)++a;else if(f.test(c))i=!0;else{if(/[\"'\\/]/.test(c))return;if(i&&!a){++o;break}}}i&&!a&&(t.fatArrowAt=o)}}var h={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,\"jsonld-keyword\":!0};function g(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function j(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return!0}var M={state:null,column:null,marked:null,cc:null};function V(){for(var e=arguments.length-1;0<=e;e--)M.cc.push(arguments[e])}function A(){return V.apply(null,arguments),!0}function E(e,t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}function r(e){var t=M.state;if(M.marked=\"def\",t.context)if(\"var\"==t.lexical.info&&t.context&&t.context.block){var r=function e(t,r){{if(r){if(r.block){var n=e(t,r.prev);return n?n==r.prev?r:new I(n,r.vars,!0):null}return E(t,r.vars)?r:new I(r.prev,new T(t,r.vars),!1)}return null}}(e,t.context);if(null!=r)return void(t.context=r)}else if(!E(e,t.localVars))return void(t.localVars=new T(e,t.localVars));l.globalVars&&!E(e,t.globalVars)&&(t.globalVars=new T(e,t.globalVars))}function z(e){return\"public\"==e||\"private\"==e||\"protected\"==e||\"abstract\"==e||\"readonly\"==e}function I(e,t,r){this.prev=e,this.vars=t,this.block=r}function T(e,t){this.name=e,this.next=t}var t=new T(\"this\",new T(\"arguments\",null));function $(){M.state.context=new I(M.state.context,M.state.localVars,!1),M.state.localVars=t}function C(){M.state.context=new I(M.state.context,M.state.localVars,!0),M.state.localVars=null}function q(){M.state.localVars=M.state.context.vars,M.state.context=M.state.context.prev}function O(n,a){var e=function(){var e=M.state,t=e.indented;if(\"stat\"==e.lexical.type)t=e.lexical.indented;else for(var r=e.lexical;r&&\")\"==r.type&&r.align;r=r.prev)t=r.indented;e.lexical=new g(t,M.stream.column(),n,null,e.lexical,a)};return e.lex=!0,e}function P(){var e=M.state;e.lexical.prev&&(\")\"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function S(r){return function e(t){return t==r?A():\";\"==r||\"}\"==t||\")\"==t||\"]\"==t?V():A(e)}}function N(e,t){return\"var\"==e?A(O(\"vardef\",t),ye,S(\";\"),P):\"keyword a\"==e?A(O(\"form\"),W,N,P):\"keyword b\"==e?A(O(\"form\"),N,P):\"keyword d\"==e?M.stream.match(/^\\s*$/,!1)?A():A(O(\"stat\"),F,S(\";\"),P):\"debugger\"==e?A(S(\";\")):\"{\"==e?A(O(\"}\"),C,ie,P,q):\";\"==e?A():\"if\"==e?(\"else\"==M.state.lexical.info&&M.state.cc[M.state.cc.length-1]==P&&M.state.cc.pop()(),A(O(\"form\"),W,N,P,ge)):\"function\"==e?A(ze):\"for\"==e?A(O(\"form\"),je,N,P):\"class\"==e||u&&\"interface\"==t?(M.marked=\"keyword\",A(O(\"form\"),$e,P)):\"variable\"==e?u&&\"declare\"==t?(M.marked=\"keyword\",A(N)):u&&(\"module\"==t||\"enum\"==t||\"type\"==t)&&M.stream.match(/^\\s*\\w/,!1)?(M.marked=\"keyword\",\"enum\"==t?A(Fe):\"type\"==t?A(ue,S(\"operator\"),ue,S(\";\")):A(O(\"form\"),we,S(\"{\"),O(\"}\"),ie,P,P)):u&&\"namespace\"==t?(M.marked=\"keyword\",A(O(\"form\"),B,ie,P)):u&&\"abstract\"==t?(M.marked=\"keyword\",A(N)):A(O(\"stat\"),Z):\"switch\"==e?A(O(\"form\"),W,S(\"{\"),O(\"}\",\"switch\"),C,ie,P,P,q):\"case\"==e?A(B,S(\":\")):\"default\"==e?A(S(\":\")):\"catch\"==e?A(O(\"form\"),$,U,N,P,q):\"export\"==e?A(O(\"stat\"),Pe,P):\"import\"==e?A(O(\"stat\"),Ne,P):\"async\"==e?A(N):\"@\"==t?A(B,N):V(O(\"stat\"),B,S(\";\"),P)}function U(e){if(\"(\"==e)return A(Ie,S(\")\"))}function B(e,t){return D(e,t,!1)}function H(e,t){return D(e,t,!0)}function W(e){return\"(\"!=e?V():A(O(\")\"),B,S(\")\"),P)}function D(e,t,r){if(M.state.fatArrowAt==M.stream.start){var n=r?R:Q;if(\"(\"==e)return A($,O(\")\"),ne(Ie,\")\"),P,S(\"=>\"),n,q);if(\"variable\"==e)return V($,we,S(\"=>\"),n,q)}var a,i=r?J:G;return h.hasOwnProperty(e)?A(i):\"function\"==e?A(ze,i):\"class\"==e||u&&\"interface\"==t?(M.marked=\"keyword\",A(O(\"form\"),Te,P)):\"keyword c\"==e||\"async\"==e?A(r?H:B):\"(\"==e?A(O(\")\"),F,S(\")\"),P,i):\"operator\"==e||\"spread\"==e?A(r?H:B):\"[\"==e?A(O(\"]\"),De,P,i):\"{\"==e?ae(ee,\"}\",null,i):\"quasi\"==e?V(K,i):\"new\"==e?A((a=r,function(e){return\".\"==e?A(a?Y:X):\"variable\"==e&&u?A(me,a?J:G):V(a?H:B)})):\"import\"==e?A(B):A()}function F(e){return e.match(/[;\\}\\)\\],]/)?V():V(B)}function G(e,t){return\",\"==e?A(B):J(e,t,!1)}function J(e,t,r){var n=0==r?G:J,a=0==r?B:H;return\"=>\"==e?A($,r?R:Q,q):\"operator\"==e?/\\+\\+|--/.test(t)||u&&\"!\"==t?A(n):u&&\"<\"==t&&M.stream.match(/^([^>]|<.*?>)*>\\s*\\(/,!1)?A(O(\">\"),ne(ue,\">\"),P,n):\"?\"==t?A(B,S(\":\"),a):A(a):\"quasi\"==e?V(K,n):\";\"!=e?\"(\"==e?ae(H,\")\",\"call\",n):\".\"==e?A(_,n):\"[\"==e?A(O(\"]\"),F,S(\"]\"),P,n):u&&\"as\"==t?(M.marked=\"keyword\",A(ue,n)):\"regexp\"==e?(M.state.lastType=M.marked=\"operator\",M.stream.backUp(M.stream.pos-M.stream.start-1),A(a)):void 0:void 0}function K(e,t){return\"quasi\"!=e?V():\"${\"!=t.slice(t.length-2)?A(K):A(B,L)}function L(e){if(\"}\"==e)return M.marked=\"string-2\",M.state.tokenize=b,A(K)}function Q(e){return i(M.stream,M.state),V(\"{\"==e?N:B)}function R(e){return i(M.stream,M.state),V(\"{\"==e?N:H)}function X(e,t){if(\"target\"==t)return M.marked=\"keyword\",A(G)}function Y(e,t){if(\"target\"==t)return M.marked=\"keyword\",A(J)}function Z(e){return\":\"==e?A(P,N):V(G,S(\";\"),P)}function _(e){if(\"variable\"==e)return M.marked=\"property\",A()}function ee(e,t){if(\"async\"==e)return M.marked=\"property\",A(ee);if(\"variable\"==e||\"keyword\"==M.style){return M.marked=\"property\",\"get\"==t||\"set\"==t?A(te):(u&&M.state.fatArrowAt==M.stream.start&&(r=M.stream.match(/^\\s*:\\s*/,!1))&&(M.state.fatArrowAt=M.stream.pos+r[0].length),A(re));var r}else{if(\"number\"==e||\"string\"==e)return M.marked=o?\"property\":M.style+\" property\",A(re);if(\"jsonld-keyword\"==e)return A(re);if(u&&z(t))return M.marked=\"keyword\",A(ee);if(\"[\"==e)return A(B,oe,S(\"]\"),re);if(\"spread\"==e)return A(H,re);if(\"*\"==t)return M.marked=\"keyword\",A(ee);if(\":\"==e)return V(re)}}function te(e){return\"variable\"!=e?V(re):(M.marked=\"property\",A(ze))}function re(e){return\":\"==e?A(H):\"(\"==e?V(ze):void 0}function ne(n,a,i){function o(e,t){if(i?-1<i.indexOf(e):\",\"==e){var r=M.state.lexical;return\"call\"==r.info&&(r.pos=(r.pos||0)+1),A(function(e,t){return e==a||t==a?V():V(n)},o)}return e==a||t==a?A():A(S(a))}return function(e,t){return e==a||t==a?A():V(n,o)}}function ae(e,t,r){for(var n=3;n<arguments.length;n++)M.cc.push(arguments[n]);return A(O(t,r),ne(e,t),P)}function ie(e){return\"}\"==e?A():V(N,ie)}function oe(e,t){if(u){if(\":\"==e)return A(ue);if(\"?\"==t)return A(oe)}}function ce(e){if(u&&\":\"==e)return M.stream.match(/^\\s*\\w+\\s+is\\b/,!1)?A(B,se,ue):A(ue)}function se(e,t){if(\"is\"==t)return M.marked=\"keyword\",A()}function ue(e,t){return\"keyof\"==t||\"typeof\"==t?(M.marked=\"keyword\",A(\"keyof\"==t?ue:H)):\"variable\"==e||\"void\"==t?(M.marked=\"type\",A(pe)):\"string\"==e||\"number\"==e||\"atom\"==e?A(pe):\"[\"==e?A(O(\"]\"),ne(ue,\"]\",\",\"),P,pe):\"{\"==e?A(O(\"}\"),ne(le,\"}\",\",;\"),P,pe):\"(\"==e?A(ne(de,\")\"),fe):\"<\"==e?A(ne(ue,\">\"),ue):void 0}function fe(e){if(\"=>\"==e)return A(ue)}function le(e,t){return\"variable\"==e||\"keyword\"==M.style?(M.marked=\"property\",A(le)):\"?\"==t?A(le):\":\"==e?A(ue):\"[\"==e?A(B,oe,S(\"]\"),le):void 0}function de(e,t){return\"variable\"==e&&M.stream.match(/^\\s*[?:]/,!1)||\"?\"==t?A(de):\":\"==e?A(ue):V(ue)}function pe(e,t){return\"<\"==t?A(O(\">\"),ne(ue,\">\"),P,pe):\"|\"==t||\".\"==e||\"&\"==t?A(ue):\"[\"==e?A(S(\"]\"),pe):\"extends\"==t||\"implements\"==t?(M.marked=\"keyword\",A(ue)):void 0}function me(e,t){if(\"<\"==t)return A(O(\">\"),ne(ue,\">\"),P,pe)}function ve(){return V(ue,ke)}function ke(e,t){if(\"=\"==t)return A(ue)}function ye(e,t){return\"enum\"==t?(M.marked=\"keyword\",A(Fe)):V(we,oe,xe,he)}function we(e,t){return u&&z(t)?(M.marked=\"keyword\",A(we)):\"variable\"==e?(r(t),A()):\"spread\"==e?A(we):\"[\"==e?ae(we,\"]\"):\"{\"==e?ae(be,\"}\"):void 0}function be(e,t){return\"variable\"!=e||M.stream.match(/^\\s*:/,!1)?(\"variable\"==e&&(M.marked=\"property\"),\"spread\"==e?A(we):\"}\"==e?V():A(S(\":\"),we,xe)):(r(t),A(xe))}function xe(e,t){if(\"=\"==t)return A(H)}function he(e){if(\",\"==e)return A(ye)}function ge(e,t){if(\"keyword b\"==e&&\"else\"==t)return A(O(\"form\",\"else\"),N,P)}function je(e,t){return\"await\"==t?A(je):\"(\"==e?A(O(\")\"),Me,S(\")\"),P):void 0}function Me(e){return\"var\"==e?A(ye,S(\";\"),Ae):\";\"==e?A(Ae):\"variable\"==e?A(Ve):V(B,S(\";\"),Ae)}function Ve(e,t){return\"in\"==t||\"of\"==t?(M.marked=\"keyword\",A(B)):A(G,Ae)}function Ae(e,t){return\";\"==e?A(Ee):\"in\"==t||\"of\"==t?(M.marked=\"keyword\",A(B)):V(B,S(\";\"),Ee)}function Ee(e){\")\"!=e&&A(B)}function ze(e,t){return\"*\"==t?(M.marked=\"keyword\",A(ze)):\"variable\"==e?(r(t),A(ze)):\"(\"==e?A($,O(\")\"),ne(Ie,\")\"),P,ce,N,q):u&&\"<\"==t?A(O(\">\"),ne(ve,\">\"),P,ze):void 0}function Ie(e,t){return\"@\"==t&&A(B,Ie),\"spread\"==e?A(Ie):u&&z(t)?(M.marked=\"keyword\",A(Ie)):V(we,oe,xe)}function Te(e,t){return\"variable\"==e?$e(e,t):Ce(e,t)}function $e(e,t){if(\"variable\"==e)return r(t),A(Ce)}function Ce(e,t){return\"<\"==t?A(O(\">\"),ne(ve,\">\"),P,Ce):\"extends\"==t||\"implements\"==t||u&&\",\"==e?(\"implements\"==t&&(M.marked=\"keyword\"),A(u?ue:B,Ce)):\"{\"==e?A(O(\"}\"),qe,P):void 0}function qe(e,t){return\"async\"==e||\"variable\"==e&&(\"static\"==t||\"get\"==t||\"set\"==t||u&&z(t))&&M.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/,!1)?(M.marked=\"keyword\",A(qe)):\"variable\"==e||\"keyword\"==M.style?(M.marked=\"property\",A(u?Oe:ze,qe)):\"[\"==e?A(B,oe,S(\"]\"),u?Oe:ze,qe):\"*\"==t?(M.marked=\"keyword\",A(qe)):\";\"==e?A(qe):\"}\"==e?A():\"@\"==t?A(B,qe):void 0}function Oe(e,t){return\"?\"==t?A(Oe):\":\"==e?A(ue,xe):\"=\"==t?A(H):V(ze)}function Pe(e,t){return\"*\"==t?(M.marked=\"keyword\",A(We,S(\";\"))):\"default\"==t?(M.marked=\"keyword\",A(B,S(\";\"))):\"{\"==e?A(ne(Se,\"}\"),We,S(\";\")):V(N)}function Se(e,t){return\"as\"==t?(M.marked=\"keyword\",A(S(\"variable\"))):\"variable\"==e?V(H,Se):void 0}function Ne(e){return\"string\"==e?A():\"(\"==e?V(B):V(Ue,Be,We)}function Ue(e,t){return\"{\"==e?ae(Ue,\"}\"):(\"variable\"==e&&r(t),\"*\"==t&&(M.marked=\"keyword\"),A(He))}function Be(e){if(\",\"==e)return A(Ue,Be)}function He(e,t){if(\"as\"==t)return M.marked=\"keyword\",A(Ue)}function We(e,t){if(\"from\"==t)return M.marked=\"keyword\",A(B)}function De(e){return\"]\"==e?A():V(ne(H,\"]\"))}function Fe(){return V(O(\"form\"),we,S(\"{\"),O(\"}\"),ne(Ge,\"}\"),P,P)}function Ge(){return V(we,xe)}function Je(e,t,r){return t.tokenize==y&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(t.lastType)||\"quasi\"==t.lastType&&/\\{\\s*$/.test(e.string.slice(0,e.pos-(r||0)))}return P.lex=q.lex=!0,{startState:function(e){var t={tokenize:y,lastType:\"sof\",cc:[],lexical:new g((e||0)-d,0,\"block\",!1),localVars:l.localVars,context:l.localVars&&new I(null,null,!1),indented:e||0};return l.globalVars&&\"object\"==typeof l.globalVars&&(t.globalVars=l.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty(\"align\")||(t.lexical.align=!1),t.indented=e.indentation(),i(e,t)),t.tokenize!=w&&e.eatSpace())return null;var r=t.tokenize(e,t);return\"comment\"==n?r:(t.lastType=\"operator\"!=n||\"++\"!=a&&\"--\"!=a?n:\"incdec\",function(e,t,r,n,a){var i=e.cc;for(M.state=e,M.stream=a,M.marked=null,M.cc=i,M.style=t,e.lexical.hasOwnProperty(\"align\")||(e.lexical.align=!0);;)if((i.length?i.pop():c?B:N)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return M.marked?M.marked:\"variable\"==r&&j(e,n)?\"variable-2\":t}}(t,r,n,a,e))},indent:function(e,t){if(e.tokenize==w)return Ke.Pass;if(e.tokenize!=y)return 0;var r,n=t&&t.charAt(0),a=e.lexical;if(!/^\\s*else\\b/.test(t))for(var i=e.cc.length-1;0<=i;--i){var o=e.cc[i];if(o==P)a=a.prev;else if(o!=ge)break}for(;(\"stat\"==a.type||\"form\"==a.type)&&(\"}\"==n||(r=e.cc[e.cc.length-1])&&(r==G||r==J)&&!/^[,\\.=+\\-*:?[\\(]/.test(t));)a=a.prev;p&&\")\"==a.type&&\"stat\"==a.prev.type&&(a=a.prev);var c,s,u=a.type,f=n==u;return\"vardef\"==u?a.indented+(\"operator\"==e.lastType||\",\"==e.lastType?a.info.length+1:0):\"form\"==u&&\"{\"==n?a.indented:\"form\"==u?a.indented+d:\"stat\"==u?a.indented+(s=t,\"operator\"==(c=e).lastType||\",\"==c.lastType||m.test(s.charAt(0))||/[,.]/.test(s.charAt(0))?p||d:0):\"switch\"!=a.info||f||0==l.doubleIndentSwitch?a.align?a.column+(f?0:1):a.indented+(f?0:d):a.indented+(/^(?:case|default)\\b/.test(t)?d:2*d)},electricInput:/^\\s*(?:case .*?:|default:|\\{|\\})$/,blockCommentStart:c?null:\"/*\",blockCommentEnd:c?null:\"*/\",blockCommentContinue:c?null:\" * \",lineComment:c?null:\"//\",fold:\"brace\",closeBrackets:\"()[]{}''\\\"\\\"``\",helperType:c?\"json\":\"javascript\",jsonldMode:o,jsonMode:c,expressionAllowed:Je,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=B&&t!=H||e.cc.pop()}}}),Ke.registerHelper(\"wordChars\",\"javascript\",/[\\w$]/),Ke.defineMIME(\"text/javascript\",\"javascript\"),Ke.defineMIME(\"text/ecmascript\",\"javascript\"),Ke.defineMIME(\"application/javascript\",\"javascript\"),Ke.defineMIME(\"application/x-javascript\",\"javascript\"),Ke.defineMIME(\"application/ecmascript\",\"javascript\"),Ke.defineMIME(\"application/json\",{name:\"javascript\",json:!0}),Ke.defineMIME(\"application/x-json\",{name:\"javascript\",json:!0}),Ke.defineMIME(\"application/ld+json\",{name:\"javascript\",jsonld:!0}),Ke.defineMIME(\"text/typescript\",{name:\"javascript\",typescript:!0}),Ke.defineMIME(\"application/typescript\",{name:\"javascript\",typescript:!0})});\r\n!function(e){\"object\"==typeof exports&&\"object\"==typeof module?e(require(\"../../lib/RevMirror\")):\"NOfunction\"==typeof define&&define.amd?define([\"../../lib/RevMirror\"],e):e(RevMirror)}(function(T){\"use strict\";function e(e){for(var t={},r=0;r<e.length;++r)t[e[r].toLowerCase()]=!0;return t}T.defineMode(\"css\",function(e,t){var r=t.inline;t.propertyKeywords||(t=T.resolveMode(\"text/css\"));var o,i,a=e.indentUnit,n=t.tokenHooks,l=t.documentTypes||{},s=t.mediaTypes||{},c=t.mediaFeatures||{},d=t.mediaValueKeywords||{},p=t.propertyKeywords||{},u=t.nonStandardPropertyKeywords||{},m=t.fontProperties||{},h=t.counterDescriptors||{},g=t.colorKeywords||{},b=t.valueKeywords||{},f=t.allowNested,y=t.lineComment,w=!0===t.supportsAtComponent;function k(e,t){return o=t,e}function v(i){return function(e,t){for(var r,o=!1;null!=(r=e.next());){if(r==i&&!o){\")\"==i&&e.backUp(1);break}o=!o&&\"\\\\\"==r}return(r==i||!o&&\")\"!=i)&&(t.tokenize=null),k(\"string\",\"string\")}}function x(e,t){return e.next(),e.match(/\\s*[\\\"\\')]/,!1)?t.tokenize=null:t.tokenize=v(\")\"),k(null,\"(\")}function z(e,t,r){this.type=e,this.indent=t,this.prev=r}function j(e,t,r,o){return e.context=new z(r,t.indentation()+(!1===o?0:a),e.context),r}function q(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function P(e,t,r){return B[r.context.type](e,t,r)}function K(e,t,r,o){for(var i=o||1;0<i;i--)r.context=r.context.prev;return P(e,t,r)}function C(e){var t=e.current().toLowerCase();i=b.hasOwnProperty(t)?\"atom\":g.hasOwnProperty(t)?\"keyword\":\"variable\"}var B={top:function(e,t,r){if(\"{\"==e)return j(r,t,\"block\");if(\"}\"==e&&r.context.prev)return q(r);if(w&&/@component/i.test(e))return j(r,t,\"atComponentBlock\");if(/^@(-moz-)?document$/i.test(e))return j(r,t,\"documentTypes\");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return j(r,t,\"atBlock\");if(/^@(font-face|counter-style)/i.test(e))return r.stateArg=e,\"restricted_atBlock_before\";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return\"keyframes\";if(e&&\"@\"==e.charAt(0))return j(r,t,\"at\");if(\"hash\"==e)i=\"builtin\";else if(\"word\"==e)i=\"tag\";else{if(\"variable-definition\"==e)return\"maybeprop\";if(\"interpolation\"==e)return j(r,t,\"interpolation\");if(\":\"==e)return\"pseudo\";if(f&&\"(\"==e)return j(r,t,\"parens\")}return r.context.type},block:function(e,t,r){if(\"word\"==e){var o=t.current().toLowerCase();return p.hasOwnProperty(o)?(i=\"property\",\"maybeprop\"):u.hasOwnProperty(o)?(i=\"string-2\",\"maybeprop\"):f?(i=t.match(/^\\s*:(?:\\s|$)/,!1)?\"property\":\"tag\",\"block\"):(i+=\" error\",\"maybeprop\")}return\"meta\"==e?\"block\":f||\"hash\"!=e&&\"qualifier\"!=e?B.top(e,t,r):(i=\"error\",\"block\")},maybeprop:function(e,t,r){return\":\"==e?j(r,t,\"prop\"):P(e,t,r)},prop:function(e,t,r){if(\";\"==e)return q(r);if(\"{\"==e&&f)return j(r,t,\"propBlock\");if(\"}\"==e||\"{\"==e)return K(e,t,r);if(\"(\"==e)return j(r,t,\"parens\");if(\"hash\"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if(\"word\"==e)C(t);else if(\"interpolation\"==e)return j(r,t,\"interpolation\")}else i+=\" error\";return\"prop\"},propBlock:function(e,t,r){return\"}\"==e?q(r):\"word\"==e?(i=\"property\",\"maybeprop\"):r.context.type},parens:function(e,t,r){return\"{\"==e||\"}\"==e?K(e,t,r):\")\"==e?q(r):\"(\"==e?j(r,t,\"parens\"):\"interpolation\"==e?j(r,t,\"interpolation\"):(\"word\"==e&&C(t),\"parens\")},pseudo:function(e,t,r){return\"meta\"==e?\"pseudo\":\"word\"==e?(i=\"variable-3\",r.context.type):P(e,t,r)},documentTypes:function(e,t,r){return\"word\"==e&&l.hasOwnProperty(t.current())?(i=\"tag\",r.context.type):B.atBlock(e,t,r)},atBlock:function(e,t,r){if(\"(\"==e)return j(r,t,\"atBlock_parens\");if(\"}\"==e||\";\"==e)return K(e,t,r);if(\"{\"==e)return q(r)&&j(r,t,f?\"block\":\"top\");if(\"interpolation\"==e)return j(r,t,\"interpolation\");if(\"word\"==e){var o=t.current().toLowerCase();i=\"only\"==o||\"not\"==o||\"and\"==o||\"or\"==o?\"keyword\":s.hasOwnProperty(o)?\"attribute\":c.hasOwnProperty(o)?\"property\":d.hasOwnProperty(o)?\"keyword\":p.hasOwnProperty(o)?\"property\":u.hasOwnProperty(o)?\"string-2\":b.hasOwnProperty(o)?\"atom\":g.hasOwnProperty(o)?\"keyword\":\"error\"}return r.context.type},atComponentBlock:function(e,t,r){return\"}\"==e?K(e,t,r):\"{\"==e?q(r)&&j(r,t,f?\"block\":\"top\",!1):(\"word\"==e&&(i=\"error\"),r.context.type)},atBlock_parens:function(e,t,r){return\")\"==e?q(r):\"{\"==e||\"}\"==e?K(e,t,r,2):B.atBlock(e,t,r)},restricted_atBlock_before:function(e,t,r){return\"{\"==e?j(r,t,\"restricted_atBlock\"):\"word\"==e&&\"@counter-style\"==r.stateArg?(i=\"variable\",\"restricted_atBlock_before\"):P(e,t,r)},restricted_atBlock:function(e,t,r){return\"}\"==e?(r.stateArg=null,q(r)):\"word\"==e?(i=\"@font-face\"==r.stateArg&&!m.hasOwnProperty(t.current().toLowerCase())||\"@counter-style\"==r.stateArg&&!h.hasOwnProperty(t.current().toLowerCase())?\"error\":\"property\",\"maybeprop\"):\"restricted_atBlock\"},keyframes:function(e,t,r){return\"word\"==e?(i=\"variable\",\"keyframes\"):\"{\"==e?j(r,t,\"top\"):P(e,t,r)},at:function(e,t,r){return\";\"==e?q(r):\"{\"==e||\"}\"==e?K(e,t,r):(\"word\"==e?i=\"tag\":\"hash\"==e&&(i=\"builtin\"),\"at\")},interpolation:function(e,t,r){return\"}\"==e?q(r):\"{\"==e||\";\"==e?K(e,t,r):(\"word\"==e?i=\"variable\":\"variable\"!=e&&\"(\"!=e&&\")\"!=e&&(i=\"error\"),\"interpolation\")}};return{startState:function(e){return{tokenize:null,state:r?\"block\":\"top\",stateArg:null,context:new z(r?\"block\":\"top\",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var r=(t.tokenize||function(e,t){var r=e.next();if(n[r]){var o=n[r](e,t);if(!1!==o)return o}return\"@\"==r?(e.eatWhile(/[\\w\\\\\\-]/),k(\"def\",e.current())):\"=\"==r||(\"~\"==r||\"|\"==r)&&e.eat(\"=\")?k(null,\"compare\"):'\"'==r||\"'\"==r?(t.tokenize=v(r),t.tokenize(e,t)):\"#\"==r?(e.eatWhile(/[\\w\\\\\\-]/),k(\"atom\",\"hash\")):\"!\"==r?(e.match(/^\\s*\\w*/),k(\"keyword\",\"important\")):/\\d/.test(r)||\".\"==r&&e.eat(/\\d/)?(e.eatWhile(/[\\w.%]/),k(\"number\",\"unit\")):\"-\"!==r?/[,+>*\\/]/.test(r)?k(null,\"select-op\"):\".\"==r&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?k(\"qualifier\",\"qualifier\"):/[:;{}\\[\\]\\(\\)]/.test(r)?k(null,r):(\"u\"==r||\"U\"==r)&&e.match(/rl(-prefix)?\\(/i)||(\"d\"==r||\"D\"==r)&&e.match(\"omain(\",!0,!0)||(\"r\"==r||\"R\"==r)&&e.match(\"egexp(\",!0,!0)?(e.backUp(1),t.tokenize=x,k(\"property\",\"word\")):/[\\w\\\\\\-]/.test(r)?(e.eatWhile(/[\\w\\\\\\-]/),k(\"property\",\"word\")):k(null,null):/[\\d.]/.test(e.peek())?(e.eatWhile(/[\\w.%]/),k(\"number\",\"unit\")):e.match(/^-[\\w\\\\\\-]+/)?(e.eatWhile(/[\\w\\\\\\-]/),e.match(/^\\s*:/,!1)?k(\"variable-2\",\"variable-definition\"):k(\"variable-2\",\"variable\")):e.match(/^\\w+-/)?k(\"meta\",\"meta\"):void 0})(e,t);return r&&\"object\"==typeof r&&(o=r[1],r=r[0]),i=r,\"comment\"!=o&&(t.state=B[t.state](o,e,t)),i},indent:function(e,t){var r=e.context,o=t&&t.charAt(0),i=r.indent;return\"prop\"!=r.type||\"}\"!=o&&\")\"!=o||(r=r.prev),r.prev&&(\"}\"!=o||\"block\"!=r.type&&\"top\"!=r.type&&\"interpolation\"!=r.type&&\"restricted_atBlock\"!=r.type?(\")\"!=o||\"parens\"!=r.type&&\"atBlock_parens\"!=r.type)&&(\"{\"!=o||\"at\"!=r.type&&\"atBlock\"!=r.type)||(i=Math.max(0,r.indent-a)):i=(r=r.prev).indent),i},electricChars:\"}\",blockCommentStart:\"/*\",blockCommentEnd:\"*/\",blockCommentContinue:\" * \",lineComment:y,fold:\"brace\"}});var t=[\"domain\",\"regexp\",\"url\",\"url-prefix\"],r=e(t),o=[\"all\",\"aural\",\"braille\",\"handheld\",\"print\",\"projection\",\"screen\",\"tty\",\"tv\",\"embossed\"],i=e(o),a=[\"width\",\"min-width\",\"max-width\",\"height\",\"min-height\",\"max-height\",\"device-width\",\"min-device-width\",\"max-device-width\",\"device-height\",\"min-device-height\",\"max-device-height\",\"aspect-ratio\",\"min-aspect-ratio\",\"max-aspect-ratio\",\"device-aspect-ratio\",\"min-device-aspect-ratio\",\"max-device-aspect-ratio\",\"color\",\"min-color\",\"max-color\",\"color-index\",\"min-color-index\",\"max-color-index\",\"monochrome\",\"min-monochrome\",\"max-monochrome\",\"resolution\",\"min-resolution\",\"max-resolution\",\"scan\",\"grid\",\"orientation\",\"device-pixel-ratio\",\"min-device-pixel-ratio\",\"max-device-pixel-ratio\",\"pointer\",\"any-pointer\",\"hover\",\"any-hover\"],n=e(a),l=[\"landscape\",\"portrait\",\"none\",\"coarse\",\"fine\",\"on-demand\",\"hover\",\"interlace\",\"progressive\"],s=e(l),c=[\"align-content\",\"align-items\",\"align-self\",\"alignment-adjust\",\"alignment-baseline\",\"anchor-point\",\"animation\",\"animation-delay\",\"animation-direction\",\"animation-duration\",\"animation-fill-mode\",\"animation-iteration-count\",\"animation-name\",\"animation-play-state\",\"animation-timing-function\",\"appearance\",\"azimuth\",\"backface-visibility\",\"background\",\"background-attachment\",\"background-blend-mode\",\"background-clip\",\"background-color\",\"background-image\",\"background-origin\",\"background-position\",\"background-repeat\",\"background-size\",\"baseline-shift\",\"binding\",\"bleed\",\"bookmark-label\",\"bookmark-level\",\"bookmark-state\",\"bookmark-target\",\"border\",\"border-bottom\",\"border-bottom-color\",\"border-bottom-left-radius\",\"border-bottom-right-radius\",\"border-bottom-style\",\"border-bottom-width\",\"border-collapse\",\"border-color\",\"border-image\",\"border-image-outset\",\"border-image-repeat\",\"border-image-slice\",\"border-image-source\",\"border-image-width\",\"border-left\",\"border-left-color\",\"border-left-style\",\"border-left-width\",\"border-radius\",\"border-right\",\"border-right-color\",\"border-right-style\",\"border-right-width\",\"border-spacing\",\"border-style\",\"border-top\",\"border-top-color\",\"border-top-left-radius\",\"border-top-right-radius\",\"border-top-style\",\"border-top-width\",\"border-width\",\"bottom\",\"box-decoration-break\",\"box-shadow\",\"box-sizing\",\"break-after\",\"break-before\",\"break-inside\",\"caption-side\",\"caret-color\",\"clear\",\"clip\",\"color\",\"color-profile\",\"column-count\",\"column-fill\",\"column-gap\",\"column-rule\",\"column-rule-color\",\"column-rule-style\",\"column-rule-width\",\"column-span\",\"column-width\",\"columns\",\"content\",\"counter-increment\",\"counter-reset\",\"crop\",\"cue\",\"cue-after\",\"cue-before\",\"cursor\",\"direction\",\"display\",\"dominant-baseline\",\"drop-initial-after-adjust\",\"drop-initial-after-align\",\"drop-initial-before-adjust\",\"drop-initial-before-align\",\"drop-initial-size\",\"drop-initial-value\",\"elevation\",\"empty-cells\",\"fit\",\"fit-position\",\"flex\",\"flex-basis\",\"flex-direction\",\"flex-flow\",\"flex-grow\",\"flex-shrink\",\"flex-wrap\",\"float\",\"float-offset\",\"flow-from\",\"flow-into\",\"font\",\"font-feature-settings\",\"font-family\",\"font-kerning\",\"font-language-override\",\"font-size\",\"font-size-adjust\",\"font-stretch\",\"font-style\",\"font-synthesis\",\"font-variant\",\"font-variant-alternates\",\"font-variant-caps\",\"font-variant-east-asian\",\"font-variant-ligatures\",\"font-variant-numeric\",\"font-variant-position\",\"font-weight\",\"grid\",\"grid-area\",\"grid-auto-columns\",\"grid-auto-flow\",\"grid-auto-rows\",\"grid-column\",\"grid-column-end\",\"grid-column-gap\",\"grid-column-start\",\"grid-gap\",\"grid-row\",\"grid-row-end\",\"grid-row-gap\",\"grid-row-start\",\"grid-template\",\"grid-template-areas\",\"grid-template-columns\",\"grid-template-rows\",\"hanging-punctuation\",\"height\",\"hyphens\",\"icon\",\"image-orientation\",\"image-rendering\",\"image-resolution\",\"inline-box-align\",\"justify-content\",\"justify-items\",\"justify-self\",\"left\",\"letter-spacing\",\"line-break\",\"line-height\",\"line-stacking\",\"line-stacking-ruby\",\"line-stacking-shift\",\"line-stacking-strategy\",\"list-style\",\"list-style-image\",\"list-style-position\",\"list-style-type\",\"margin\",\"margin-bottom\",\"margin-left\",\"margin-right\",\"margin-top\",\"marks\",\"marquee-direction\",\"marquee-loop\",\"marquee-play-count\",\"marquee-speed\",\"marquee-style\",\"max-height\",\"max-width\",\"min-height\",\"min-width\",\"move-to\",\"nav-down\",\"nav-index\",\"nav-left\",\"nav-right\",\"nav-up\",\"object-fit\",\"object-position\",\"opacity\",\"order\",\"orphans\",\"outline\",\"outline-color\",\"outline-offset\",\"outline-style\",\"outline-width\",\"overflow\",\"overflow-style\",\"overflow-wrap\",\"overflow-x\",\"overflow-y\",\"padding\",\"padding-bottom\",\"padding-left\",\"padding-right\",\"padding-top\",\"page\",\"page-break-after\",\"page-break-before\",\"page-break-inside\",\"page-policy\",\"pause\",\"pause-after\",\"pause-before\",\"perspective\",\"perspective-origin\",\"pitch\",\"pitch-range\",\"place-content\",\"place-items\",\"place-self\",\"play-during\",\"position\",\"presentation-level\",\"punctuation-trim\",\"quotes\",\"region-break-after\",\"region-break-before\",\"region-break-inside\",\"region-fragment\",\"rendering-intent\",\"resize\",\"rest\",\"rest-after\",\"rest-before\",\"richness\",\"right\",\"rotation\",\"rotation-point\",\"ruby-align\",\"ruby-overhang\",\"ruby-position\",\"ruby-span\",\"shape-image-threshold\",\"shape-inside\",\"shape-margin\",\"shape-outside\",\"size\",\"speak\",\"speak-as\",\"speak-header\",\"speak-numeral\",\"speak-punctuation\",\"speech-rate\",\"stress\",\"string-set\",\"tab-size\",\"table-layout\",\"target\",\"target-name\",\"target-new\",\"target-position\",\"text-align\",\"text-align-last\",\"text-decoration\",\"text-decoration-color\",\"text-decoration-line\",\"text-decoration-skip\",\"text-decoration-style\",\"text-emphasis\",\"text-emphasis-color\",\"text-emphasis-position\",\"text-emphasis-style\",\"text-height\",\"text-indent\",\"text-justify\",\"text-outline\",\"text-overflow\",\"text-shadow\",\"text-size-adjust\",\"text-space-collapse\",\"text-transform\",\"text-underline-position\",\"text-wrap\",\"top\",\"transform\",\"transform-origin\",\"transform-style\",\"transition\",\"transition-delay\",\"transition-duration\",\"transition-property\",\"transition-timing-function\",\"unicode-bidi\",\"user-select\",\"vertical-align\",\"visibility\",\"voice-balance\",\"voice-duration\",\"voice-family\",\"voice-pitch\",\"voice-range\",\"voice-rate\",\"voice-stress\",\"voice-volume\",\"volume\",\"white-space\",\"widows\",\"width\",\"will-change\",\"word-break\",\"word-spacing\",\"word-wrap\",\"z-index\",\"clip-path\",\"clip-rule\",\"mask\",\"enable-background\",\"filter\",\"flood-color\",\"flood-opacity\",\"lighting-color\",\"stop-color\",\"stop-opacity\",\"pointer-events\",\"color-interpolation\",\"color-interpolation-filters\",\"color-rendering\",\"fill\",\"fill-opacity\",\"fill-rule\",\"image-rendering\",\"marker\",\"marker-end\",\"marker-mid\",\"marker-start\",\"shape-rendering\",\"stroke\",\"stroke-dasharray\",\"stroke-dashoffset\",\"stroke-linecap\",\"stroke-linejoin\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke-width\",\"text-rendering\",\"baseline-shift\",\"dominant-baseline\",\"glyph-orientation-horizontal\",\"glyph-orientation-vertical\",\"text-anchor\",\"writing-mode\"],d=e(c),p=[\"scrollbar-arrow-color\",\"scrollbar-base-color\",\"scrollbar-dark-shadow-color\",\"scrollbar-face-color\",\"scrollbar-highlight-color\",\"scrollbar-shadow-color\",\"scrollbar-3d-light-color\",\"scrollbar-track-color\",\"shape-inside\",\"searchfield-cancel-button\",\"searchfield-decoration\",\"searchfield-results-button\",\"searchfield-results-decoration\",\"zoom\"],u=e(p),m=e([\"font-family\",\"src\",\"unicode-range\",\"font-variant\",\"font-feature-settings\",\"font-stretch\",\"font-weight\",\"font-style\"]),h=e([\"additive-symbols\",\"fallback\",\"negative\",\"pad\",\"prefix\",\"range\",\"speak-as\",\"suffix\",\"symbols\",\"system\"]),g=[\"aliceblue\",\"antiquewhite\",\"aqua\",\"aquamarine\",\"azure\",\"beige\",\"bisque\",\"black\",\"blanchedalmond\",\"blue\",\"blueviolet\",\"brown\",\"burlywood\",\"cadetblue\",\"chartreuse\",\"chocolate\",\"coral\",\"cornflowerblue\",\"cornsilk\",\"crimson\",\"cyan\",\"darkblue\",\"darkcyan\",\"darkgoldenrod\",\"darkgray\",\"darkgreen\",\"darkkhaki\",\"darkmagenta\",\"darkolivegreen\",\"darkorange\",\"darkorchid\",\"darkred\",\"darksalmon\",\"darkseagreen\",\"darkslateblue\",\"darkslategray\",\"darkturquoise\",\"darkviolet\",\"deeppink\",\"deepskyblue\",\"dimgray\",\"dodgerblue\",\"firebrick\",\"floralwhite\",\"forestgreen\",\"fuchsia\",\"gainsboro\",\"ghostwhite\",\"gold\",\"goldenrod\",\"gray\",\"grey\",\"green\",\"greenyellow\",\"honeydew\",\"hotpink\",\"indianred\",\"indigo\",\"ivory\",\"khaki\",\"lavender\",\"lavenderblush\",\"lawngreen\",\"lemonchiffon\",\"lightblue\",\"lightcoral\",\"lightcyan\",\"lightgoldenrodyellow\",\"lightgray\",\"lightgreen\",\"lightpink\",\"lightsalmon\",\"lightseagreen\",\"lightskyblue\",\"lightslategray\",\"lightsteelblue\",\"lightyellow\",\"lime\",\"limegreen\",\"linen\",\"magenta\",\"maroon\",\"mediumaquamarine\",\"mediumblue\",\"mediumorchid\",\"mediumpurple\",\"mediumseagreen\",\"mediumslateblue\",\"mediumspringgreen\",\"mediumturquoise\",\"mediumvioletred\",\"midnightblue\",\"mintcream\",\"mistyrose\",\"moccasin\",\"navajowhite\",\"navy\",\"oldlace\",\"olive\",\"olivedrab\",\"orange\",\"orangered\",\"orchid\",\"palegoldenrod\",\"palegreen\",\"paleturquoise\",\"palevioletred\",\"papayawhip\",\"peachpuff\",\"peru\",\"pink\",\"plum\",\"powderblue\",\"purple\",\"rebeccapurple\",\"red\",\"rosybrown\",\"royalblue\",\"saddlebrown\",\"salmon\",\"sandybrown\",\"seagreen\",\"seashell\",\"sienna\",\"silver\",\"skyblue\",\"slateblue\",\"slategray\",\"snow\",\"springgreen\",\"steelblue\",\"tan\",\"teal\",\"thistle\",\"tomato\",\"turquoise\",\"violet\",\"wheat\",\"white\",\"whitesmoke\",\"yellow\",\"yellowgreen\"],b=e(g),f=[\"above\",\"absolute\",\"activeborder\",\"additive\",\"activecaption\",\"afar\",\"after-white-space\",\"ahead\",\"alias\",\"all\",\"all-scroll\",\"alphabetic\",\"alternate\",\"always\",\"amharic\",\"amharic-abegede\",\"antialiased\",\"appworkspace\",\"arabic-indic\",\"armenian\",\"asterisks\",\"attr\",\"auto\",\"auto-flow\",\"avoid\",\"avoid-column\",\"avoid-page\",\"avoid-region\",\"background\",\"backwards\",\"baseline\",\"below\",\"bidi-override\",\"binary\",\"bengali\",\"blink\",\"block\",\"block-axis\",\"bold\",\"bolder\",\"border\",\"border-box\",\"both\",\"bottom\",\"break\",\"break-all\",\"break-word\",\"bullets\",\"button\",\"button-bevel\",\"buttonface\",\"buttonhighlight\",\"buttonshadow\",\"buttontext\",\"calc\",\"cambodian\",\"capitalize\",\"caps-lock-indicator\",\"caption\",\"captiontext\",\"caret\",\"cell\",\"center\",\"checkbox\",\"circle\",\"cjk-decimal\",\"cjk-earthly-branch\",\"cjk-heavenly-stem\",\"cjk-ideographic\",\"clear\",\"clip\",\"close-quote\",\"col-resize\",\"collapse\",\"color\",\"color-burn\",\"color-dodge\",\"column\",\"column-reverse\",\"compact\",\"condensed\",\"contain\",\"content\",\"contents\",\"content-box\",\"context-menu\",\"continuous\",\"copy\",\"counter\",\"counters\",\"cover\",\"crop\",\"cross\",\"crosshair\",\"currentcolor\",\"cursive\",\"cyclic\",\"darken\",\"dashed\",\"decimal\",\"decimal-leading-zero\",\"default\",\"default-button\",\"dense\",\"destination-atop\",\"destination-in\",\"destination-out\",\"destination-over\",\"devanagari\",\"difference\",\"disc\",\"discard\",\"disclosure-closed\",\"disclosure-open\",\"document\",\"dot-dash\",\"dot-dot-dash\",\"dotted\",\"double\",\"down\",\"e-resize\",\"ease\",\"ease-in\",\"ease-in-out\",\"ease-out\",\"element\",\"ellipse\",\"ellipsis\",\"embed\",\"end\",\"ethiopic\",\"ethiopic-abegede\",\"ethiopic-abegede-am-et\",\"ethiopic-abegede-gez\",\"ethiopic-abegede-ti-er\",\"ethiopic-abegede-ti-et\",\"ethiopic-halehame-aa-er\",\"ethiopic-halehame-aa-et\",\"ethiopic-halehame-am-et\",\"ethiopic-halehame-gez\",\"ethiopic-halehame-om-et\",\"ethiopic-halehame-sid-et\",\"ethiopic-halehame-so-et\",\"ethiopic-halehame-ti-er\",\"ethiopic-halehame-ti-et\",\"ethiopic-halehame-tig\",\"ethiopic-numeric\",\"ew-resize\",\"exclusion\",\"expanded\",\"extends\",\"extra-condensed\",\"extra-expanded\",\"fantasy\",\"fast\",\"fill\",\"fixed\",\"flat\",\"flex\",\"flex-end\",\"flex-start\",\"footnotes\",\"forwards\",\"from\",\"geometricPrecision\",\"georgian\",\"graytext\",\"grid\",\"groove\",\"gujarati\",\"gurmukhi\",\"hand\",\"hangul\",\"hangul-consonant\",\"hard-light\",\"hebrew\",\"help\",\"hidden\",\"hide\",\"higher\",\"highlight\",\"highlighttext\",\"hiragana\",\"hiragana-iroha\",\"horizontal\",\"hsl\",\"hsla\",\"hue\",\"icon\",\"ignore\",\"inactiveborder\",\"inactivecaption\",\"inactivecaptiontext\",\"infinite\",\"infobackground\",\"infotext\",\"inherit\",\"initial\",\"inline\",\"inline-axis\",\"inline-block\",\"inline-flex\",\"inline-grid\",\"inline-table\",\"inset\",\"inside\",\"intrinsic\",\"invert\",\"italic\",\"japanese-formal\",\"japanese-informal\",\"justify\",\"kannada\",\"katakana\",\"katakana-iroha\",\"keep-all\",\"khmer\",\"korean-hangul-formal\",\"korean-hanja-formal\",\"korean-hanja-informal\",\"landscape\",\"lao\",\"large\",\"larger\",\"left\",\"level\",\"lighter\",\"lighten\",\"line-through\",\"linear\",\"linear-gradient\",\"lines\",\"list-item\",\"listbox\",\"listitem\",\"local\",\"logical\",\"loud\",\"lower\",\"lower-alpha\",\"lower-armenian\",\"lower-greek\",\"lower-hexadecimal\",\"lower-latin\",\"lower-norwegian\",\"lower-roman\",\"lowercase\",\"ltr\",\"luminosity\",\"malayalam\",\"match\",\"matrix\",\"matrix3d\",\"media-controls-background\",\"media-current-time-display\",\"media-fullscreen-button\",\"media-mute-button\",\"media-play-button\",\"media-return-to-realtime-button\",\"media-rewind-button\",\"media-seek-back-button\",\"media-seek-forward-button\",\"media-slider\",\"media-sliderthumb\",\"media-time-remaining-display\",\"media-volume-slider\",\"media-volume-slider-container\",\"media-volume-sliderthumb\",\"medium\",\"menu\",\"menulist\",\"menulist-button\",\"menulist-text\",\"menulist-textfield\",\"menutext\",\"message-box\",\"middle\",\"min-intrinsic\",\"mix\",\"mongolian\",\"monospace\",\"move\",\"multiple\",\"multiply\",\"myanmar\",\"n-resize\",\"narrower\",\"ne-resize\",\"nesw-resize\",\"no-close-quote\",\"no-drop\",\"no-open-quote\",\"no-repeat\",\"none\",\"normal\",\"not-allowed\",\"nowrap\",\"ns-resize\",\"numbers\",\"numeric\",\"nw-resize\",\"nwse-resize\",\"oblique\",\"octal\",\"opacity\",\"open-quote\",\"optimizeLegibility\",\"optimizeSpeed\",\"oriya\",\"oromo\",\"outset\",\"outside\",\"outside-shape\",\"overlay\",\"overline\",\"padding\",\"padding-box\",\"painted\",\"page\",\"paused\",\"persian\",\"perspective\",\"plus-darker\",\"plus-lighter\",\"pointer\",\"polygon\",\"portrait\",\"pre\",\"pre-line\",\"pre-wrap\",\"preserve-3d\",\"progress\",\"push-button\",\"radial-gradient\",\"radio\",\"read-only\",\"read-write\",\"read-write-plaintext-only\",\"rectangle\",\"region\",\"relative\",\"repeat\",\"repeating-linear-gradient\",\"repeating-radial-gradient\",\"repeat-x\",\"repeat-y\",\"reset\",\"reverse\",\"rgb\",\"rgba\",\"ridge\",\"right\",\"rotate\",\"rotate3d\",\"rotateX\",\"rotateY\",\"rotateZ\",\"round\",\"row\",\"row-resize\",\"row-reverse\",\"rtl\",\"run-in\",\"running\",\"s-resize\",\"sans-serif\",\"saturation\",\"scale\",\"scale3d\",\"scaleX\",\"scaleY\",\"scaleZ\",\"screen\",\"scroll\",\"scrollbar\",\"scroll-position\",\"se-resize\",\"searchfield\",\"searchfield-cancel-button\",\"searchfield-decoration\",\"searchfield-results-button\",\"searchfield-results-decoration\",\"self-start\",\"self-end\",\"semi-condensed\",\"semi-expanded\",\"separate\",\"serif\",\"show\",\"sidama\",\"simp-chinese-formal\",\"simp-chinese-informal\",\"single\",\"skew\",\"skewX\",\"skewY\",\"skip-white-space\",\"slide\",\"slider-horizontal\",\"slider-vertical\",\"sliderthumb-horizontal\",\"sliderthumb-vertical\",\"slow\",\"small\",\"small-caps\",\"small-caption\",\"smaller\",\"soft-light\",\"solid\",\"somali\",\"source-atop\",\"source-in\",\"source-out\",\"source-over\",\"space\",\"space-around\",\"space-between\",\"space-evenly\",\"spell-out\",\"square\",\"square-button\",\"start\",\"static\",\"status-bar\",\"stretch\",\"stroke\",\"sub\",\"subpixel-antialiased\",\"super\",\"sw-resize\",\"symbolic\",\"symbols\",\"system-ui\",\"table\",\"table-caption\",\"table-cell\",\"table-column\",\"table-column-group\",\"table-footer-group\",\"table-header-group\",\"table-row\",\"table-row-group\",\"tamil\",\"telugu\",\"text\",\"text-bottom\",\"text-top\",\"textarea\",\"textfield\",\"thai\",\"thick\",\"thin\",\"threeddarkshadow\",\"threedface\",\"threedhighlight\",\"threedlightshadow\",\"threedshadow\",\"tibetan\",\"tigre\",\"tigrinya-er\",\"tigrinya-er-abegede\",\"tigrinya-et\",\"tigrinya-et-abegede\",\"to\",\"top\",\"trad-chinese-formal\",\"trad-chinese-informal\",\"transform\",\"translate\",\"translate3d\",\"translateX\",\"translateY\",\"translateZ\",\"transparent\",\"ultra-condensed\",\"ultra-expanded\",\"underline\",\"unset\",\"up\",\"upper-alpha\",\"upper-armenian\",\"upper-greek\",\"upper-hexadecimal\",\"upper-latin\",\"upper-norwegian\",\"upper-roman\",\"uppercase\",\"urdu\",\"url\",\"var\",\"vertical\",\"vertical-text\",\"visible\",\"visibleFill\",\"visiblePainted\",\"visibleStroke\",\"visual\",\"w-resize\",\"wait\",\"wave\",\"wider\",\"window\",\"windowframe\",\"windowtext\",\"words\",\"wrap\",\"wrap-reverse\",\"x-large\",\"x-small\",\"xor\",\"xx-large\",\"xx-small\"],y=e(f),w=t.concat(o).concat(a).concat(l).concat(c).concat(p).concat(g).concat(f);function k(e,t){for(var r,o=!1;null!=(r=e.next());){if(o&&\"/\"==r){t.tokenize=null;break}o=\"*\"==r}return[\"comment\",\"comment\"]}T.registerHelper(\"hintWords\",\"css\",w),T.defineMIME(\"text/css\",{documentTypes:r,mediaTypes:i,mediaFeatures:n,mediaValueKeywords:s,propertyKeywords:d,nonStandardPropertyKeywords:u,fontProperties:m,counterDescriptors:h,colorKeywords:b,valueKeywords:y,tokenHooks:{\"/\":function(e,t){return!!e.eat(\"*\")&&(t.tokenize=k)(e,t)}},name:\"css\"}),T.defineMIME(\"text/x-scss\",{mediaTypes:i,mediaFeatures:n,mediaValueKeywords:s,propertyKeywords:d,nonStandardPropertyKeywords:u,colorKeywords:b,valueKeywords:y,fontProperties:m,allowNested:!0,lineComment:\"//\",tokenHooks:{\"/\":function(e,t){return e.eat(\"/\")?(e.skipToEnd(),[\"comment\",\"comment\"]):e.eat(\"*\")?(t.tokenize=k)(e,t):[\"operator\",\"operator\"]},\":\":function(e){return!!e.match(/\\s*\\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\\w-]+/),e.match(/^\\s*:/,!1)?[\"variable-2\",\"variable-definition\"]:[\"variable-2\",\"variable\"]},\"#\":function(e){return!!e.eat(\"{\")&&[null,\"interpolation\"]}},name:\"css\",helperType:\"scss\"}),T.defineMIME(\"text/x-less\",{mediaTypes:i,mediaFeatures:n,mediaValueKeywords:s,propertyKeywords:d,nonStandardPropertyKeywords:u,colorKeywords:b,valueKeywords:y,fontProperties:m,allowNested:!0,lineComment:\"//\",tokenHooks:{\"/\":function(e,t){return e.eat(\"/\")?(e.skipToEnd(),[\"comment\",\"comment\"]):e.eat(\"*\")?(t.tokenize=k)(e,t):[\"operator\",\"operator\"]},\"@\":function(e){return e.eat(\"{\")?[null,\"interpolation\"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/i,!1)&&(e.eatWhile(/[\\w\\\\\\-]/),e.match(/^\\s*:/,!1)?[\"variable-2\",\"variable-definition\"]:[\"variable-2\",\"variable\"])},\"&\":function(){return[\"atom\",\"atom\"]}},name:\"css\",helperType:\"less\"}),T.defineMIME(\"text/x-gss\",{documentTypes:r,mediaTypes:i,mediaFeatures:n,propertyKeywords:d,nonStandardPropertyKeywords:u,fontProperties:m,counterDescriptors:h,colorKeywords:b,valueKeywords:y,supportsAtComponent:!0,tokenHooks:{\"/\":function(e,t){return!!e.eat(\"*\")&&(t.tokenize=k)(e,t)}},name:\"css\",helperType:\"gss\"})});","Nwdthemes_Revslider/admin/assets/js/plugins/penner-easing.js":"var PennerEasing = {\r\n\t\t\r\n\tlinear: {\r\n\t\t\r\n\t\teasenone: function(t, b, c, d) {\r\n\t\r\n\t\t\treturn c * t / d + b;\r\n\t\t\t\r\n\t\t},\r\n\r\n\t\teasein: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn c * t / d + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn c * t / d + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseinout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn c * t / d + b;\r\n\t\t\t\r\n\t\t}\r\n\t\r\n\t},\r\n\t\r\n\tquint: {\r\n\t\t\r\n\t\teaseout: function (t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn c * ((t = t / d - 1) * t * t * t * t + 1) + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teasein: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn c * (t /= d) * t * t * t * t + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseinout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn ((t /= d / 2) < 1) ? c / 2 * t * t * t * t * t + b : c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t\t\r\n\tquad: {\r\n\t\t\r\n\t\teasein: function (t, b, c, d) {\r\n\t\t\r\n\t\t\treturn c * (t /= d) * t + b;\r\n\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseout: function (t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn -c * (t /= d) * (t - 2) + b;\r\n\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseinout: function (t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn ((t /= d / 2) < 1) ? c / 2 * t * t + b : -c / 2 * ((--t) * (t - 2) - 1) + b;\r\n\t\t\r\n\t\t}\t\r\n\t\t\r\n\t},\r\n\t\r\n\tquart: {\r\n\t\r\n\t\teasein: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn c * (t /= d) * t * t * t + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn -c * ((t = t / d - 1) * t * t * t - 1) + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseinout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn ((t /= d / 2) < 1) ? c / 2 * t * t * t * t + b : -c / 2 * ((t -= 2) * t * t * t - 2) + b;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t\r\n\tcubic: {\r\n\t\r\n\t\teasein: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn c * (t /= d) * t * t + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn c * ((t = t / d - 1) * t * t + 1) + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseinout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn ((t /= d / 2) < 1) ? c / 2 * t * t * t + b : c / 2 * ((t -= 2) * t * t + 2) + b;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t\r\n\tcirc: {\r\n\t\r\n\t\teasein: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseinout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn ((t /= d / 2) < 1) ? -c / 2 * (Math.sqrt(1 - t * t) - 1) + b : c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t\r\n\tsine: {\r\n\t\r\n\t\teasein: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn c * Math.sin(t / d * (Math.PI / 2)) + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseinout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t\r\n\texpo: {\r\n\t\r\n\t\teasein: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn (t === 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\r\n\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\treturn (t === d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\teaseinout: function(t, b, c, d) {\r\n\t\t\t\r\n\t\t\tif(t === 0) return b;\r\n\t\t\tif(t === d) return b + c;\r\n\t\t\tif((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\r\n\t\t\t\r\n\t\t\treturn c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n};","Nwdthemes_Revslider/admin/assets/js/plugins/clipboard.min.js":"/*!\r\n * clipboard.js v1.7.1\r\n * https://zenorocha.github.io/clipboard.js\r\n *\r\n * Licensed MIT \u00a9 Zeno Rocha\r\n */\r\n!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var e;e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,e.RSClipboard=t()}}(function(){var t,e,n;return function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var l=\"function\"==typeof require&&require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);var s=new Error(\"Cannot find module '\"+a+\"'\");throw s.code=\"MODULE_NOT_FOUND\",s}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r=\"function\"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){function o(t,e){for(;t&&t.nodeType!==i;){if(\"function\"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var i=9;if(\"undefined\"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=o},{}],2:[function(t,e,n){function o(t,e,n,o,r){var a=i.apply(this,arguments);return t.addEventListener(n,a,r),{destroy:function(){t.removeEventListener(n,a,r)}}}function i(t,e,n,o){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&o.call(t,n)}}var r=t(\"./closest\");e.exports=o},{\"./closest\":1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&(\"[object NodeList]\"===e||\"[object HTMLCollection]\"===e)&&\"length\"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return\"string\"==typeof t||t instanceof String},n.fn=function(t){return\"[object Function]\"===Object.prototype.toString.call(t)}},{}],4:[function(t,e,n){function o(t,e,n){if(!t&&!e&&!n)throw new Error(\"Missing required arguments\");if(!c.string(e))throw new TypeError(\"Second argument must be a String\");if(!c.fn(n))throw new TypeError(\"Third argument must be a Function\");if(c.node(t))return i(t,e,n);if(c.nodeList(t))return r(t,e,n);if(c.string(t))return a(t,e,n);throw new TypeError(\"First argument must be a String, HTMLElement, HTMLCollection, or NodeList\")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function r(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return l(document.body,t,e,n)}var c=t(\"./is\"),l=t(\"delegate\");e.exports=o},{\"./is\":3,delegate:2}],5:[function(t,e,n){function o(t){var e;if(\"SELECT\"===t.nodeName)t.focus(),e=t.value;else if(\"INPUT\"===t.nodeName||\"TEXTAREA\"===t.nodeName){var n=t.hasAttribute(\"readonly\");n||t.setAttribute(\"readonly\",\"\"),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute(\"readonly\"),e=t.value}else{t.hasAttribute(\"contenteditable\")&&t.focus();var o=window.getSelection(),i=document.createRange();i.selectNodeContents(t),o.removeAllRanges(),o.addRange(i),e=o.toString()}return e}e.exports=o},{}],6:[function(t,e,n){function o(){}o.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){i.off(t,o),e.apply(n,arguments)}var i=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;for(o;o<i;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,a=o.length;r<a;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}},e.exports=o},{}],7:[function(e,n,o){!function(i,r){if(\"function\"==typeof t&&t.amd)t([\"module\",\"select\"],r);else if(void 0!==o)r(n,e(\"select\"));else{var a={exports:{}};r(a,i.select),i.clipboardAction=a.exports}}(this,function(t,e){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var i=n(e),r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(){function t(e){o(this,t),this.resolveOptions(e),this.initSelection()}return a(t,[{key:\"resolveOptions\",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=\"\"}},{key:\"initSelection\",value:function t(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:\"selectFake\",value:function t(){var e=this,n=\"rtl\"==document.documentElement.getAttribute(\"dir\");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener(\"click\",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement(\"textarea\"),this.fakeElem.style.fontSize=\"12pt\",this.fakeElem.style.border=\"0\",this.fakeElem.style.padding=\"0\",this.fakeElem.style.margin=\"0\",this.fakeElem.style.position=\"absolute\",this.fakeElem.style[n?\"right\":\"left\"]=\"-9999px\";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=o+\"px\",this.fakeElem.setAttribute(\"readonly\",\"\"),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:\"removeFake\",value:function t(){this.fakeHandler&&(this.container.removeEventListener(\"click\",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:\"selectTarget\",value:function t(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:\"copyText\",value:function t(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:\"handleResult\",value:function t(e){this.emitter.emit(e?\"success\":\"error\",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:\"clearSelection\",value:function t(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:\"destroy\",value:function t(){this.removeFake()}},{key:\"action\",set:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"copy\";if(this._action=e,\"copy\"!==this._action&&\"cut\"!==this._action)throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"')},get:function t(){return this._action}},{key:\"target\",set:function t(e){if(void 0!==e){if(!e||\"object\"!==(void 0===e?\"undefined\":r(e))||1!==e.nodeType)throw new Error('Invalid \"target\" value, use a valid Element');if(\"copy\"===this.action&&e.hasAttribute(\"disabled\"))throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');if(\"cut\"===this.action&&(e.hasAttribute(\"readonly\")||e.hasAttribute(\"disabled\")))throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');this._target=e}},get:function t(){return this._target}}]),t}();t.exports=c})},{select:5}],8:[function(e,n,o){!function(i,r){if(\"function\"==typeof t&&t.amd)t([\"module\",\"./clipboard-action\",\"tiny-emitter\",\"good-listener\"],r);else if(void 0!==o)r(n,e(\"./clipboard-action\"),e(\"tiny-emitter\"),e(\"good-listener\"));else{var a={exports:{}};r(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,function(t,e,n,o){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function a(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function c(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n=\"data-clipboard-\"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var s=i(e),u=i(n),f=i(o),d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t){function e(t,n){r(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.resolveOptions(n),o.listenClick(t),o}return c(e,t),h(e,[{key:\"resolveOptions\",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=\"function\"==typeof e.action?e.action:this.defaultAction,this.target=\"function\"==typeof e.target?e.target:this.defaultTarget,this.text=\"function\"==typeof e.text?e.text:this.defaultText,this.container=\"object\"===d(e.container)?e.container:document.body}},{key:\"listenClick\",value:function t(e){var n=this;this.listener=(0,f.default)(e,\"click\",function(t){return n.onClick(t)})}},{key:\"onClick\",value:function t(e){var n=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s.default({action:this.action(n),target:this.target(n),text:this.text(n),container:this.container,trigger:n,emitter:this})}},{key:\"defaultAction\",value:function t(e){return l(\"action\",e)}},{key:\"defaultTarget\",value:function t(e){var n=l(\"target\",e);if(n)return document.querySelector(n)}},{key:\"defaultText\",value:function t(e){return l(\"text\",e)}},{key:\"destroy\",value:function t(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:\"isSupported\",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[\"copy\",\"cut\"],n=\"string\"==typeof e?[e]:e,o=!!document.queryCommandSupported;return n.forEach(function(t){o=o&&!!document.queryCommandSupported(t)}),o}}]),e}(u.default);t.exports=p})},{\"./clipboard-action\":7,\"good-listener\":4,\"tiny-emitter\":6}]},{},[8])(8)});","Nwdthemes_Revslider/admin/assets/js/plugins/wavesurfer.js":"\r\n/*!\r\n * wavesurfer.js 2.0.6 (Fri Jun 15 2018 10:57:58 GMT+0200 (CEST))\r\n * https://github.com/katspaugh/wavesurfer.js\r\n * @license BSD-3-Clause\r\n */\r\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"WaveSurfer\",[],t):\"object\"==typeof exports?exports.WaveSurfer=t():e.WaveSurfer=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=17)}([function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(16);Object.defineProperty(t,\"ajax\",{enumerable:!0,get:function(){return p(n).default}});var i=r(15);Object.defineProperty(t,\"getId\",{enumerable:!0,get:function(){return p(i).default}});var a=r(14);Object.defineProperty(t,\"max\",{enumerable:!0,get:function(){return p(a).default}});var s=r(13);Object.defineProperty(t,\"min\",{enumerable:!0,get:function(){return p(s).default}});var o=r(3);Object.defineProperty(t,\"Observer\",{enumerable:!0,get:function(){return p(o).default}});var u=r(12);Object.defineProperty(t,\"extend\",{enumerable:!0,get:function(){return p(u).default}});var l=r(11);Object.defineProperty(t,\"style\",{enumerable:!0,get:function(){return p(l).default}});var c=r(2);Object.defineProperty(t,\"requestAnimationFrame\",{enumerable:!0,get:function(){return p(c).default}});var h=r(10);Object.defineProperty(t,\"frame\",{enumerable:!0,get:function(){return p(h).default}});var f=r(9);Object.defineProperty(t,\"debounce\",{enumerable:!0,get:function(){return p(f).default}});var d=r(8);function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"preventClick\",{enumerable:!0,get:function(){return p(d).default}})},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=\"playing\",o=\"paused\",u=\"finished\",l=function(e){function t(e){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.audioContext=null,i.offlineAudioContext=null,i.stateBehaviors=(a(r={},s,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),a(r,o,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),a(r,u,{init:function(){this.removeOnAudioProcess(),this.fireEvent(\"finish\")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),r),i.params=e,i.ac=e.audioContext||i.getAudioContext(),i.lastPlay=i.ac.currentTime,i.startPosition=0,i.scheduledPause=null,i.states=(a(n={},s,Object.create(i.stateBehaviors[s])),a(n,o,Object.create(i.stateBehaviors[o])),a(n,u,Object.create(i.stateBehaviors[u])),n),i.analyser=null,i.buffer=null,i.filters=[],i.gainNode=null,i.mergedPeaks=null,i.offlineAc=null,i.peaks=null,i.playbackRate=1,i.analyser=null,i.scriptNode=null,i.source=null,i.splitPeaks=[],i.state=null,i.explicitDuration=null,i}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Observer),n(t,[{key:\"supportsWebAudio\",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:\"getAudioContext\",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:\"getOfflineAudioContext\",value:function(e){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),window.WaveSurferOfflineAudioContext}}]),n(t,[{key:\"init\",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(o),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:\"disconnectFilters\",value:function(){this.filters&&(this.filters.forEach(function(e){e&&e.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:\"setState\",value:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))}},{key:\"setFilter\",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.setFilters(t)}},{key:\"setFilters\",value:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce(function(e,t){return e.connect(t),t},this.analyser).connect(this.gainNode))}},{key:\"createScriptNode\",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(t.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(t.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:\"addOnAudioProcess\",value:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState(u),e.fireEvent(\"pause\")):t>=e.scheduledPause?e.pause():e.state===e.states[s]&&e.fireEvent(\"audioprocess\",t)}}},{key:\"removeOnAudioProcess\",value:function(){this.scriptNode.onaudioprocess=null}},{key:\"createAnalyserNode\",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:\"createVolumeNode\",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:\"setSinkId\",value:function(e){if(e){var t=new window.Audio;if(!t.setSinkId)return Promise.reject(new Error(\"setSinkId is not supported in your browser\"));t.autoplay=!0;var r=this.ac.createMediaStreamDestination();return this.gainNode.disconnect(),this.gainNode.connect(r),t.src=URL.createObjectURL(r.stream),t.setSinkId(e)}return Promise.reject(new Error(\"Invalid deviceId: \"+e))}},{key:\"setVolume\",value:function(e){this.gainNode.gain.setValueAtTime(e,this.ac.currentTime)}},{key:\"getVolume\",value:function(){return this.gainNode.gain.value}},{key:\"decodeArrayBuffer\",value:function(e,t,r){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac?this.ac.sampleRate:44100)),this.offlineAc.decodeAudioData(e,function(e){return t(e)},r)}},{key:\"setPeaks\",value:function(e,t){this.explicitDuration=t,this.peaks=e}},{key:\"setLength\",value:function(e){if(!this.mergedPeaks||e!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var t=this.buffer?this.buffer.numberOfChannels:1,r=void 0;for(r=0;r<t;r++)this.splitPeaks[r]=[],this.splitPeaks[r][2*(e-1)]=0,this.splitPeaks[r][2*(e-1)+1]=0;this.mergedPeaks[2*(e-1)]=0,this.mergedPeaks[2*(e-1)+1]=0}}},{key:\"getPeaks\",value:function(e,t,r){if(this.peaks)return this.peaks;if(t=t||0,r=r||e-1,this.setLength(e),!this.buffer.length){var n=this.createBuffer(1,4096,this.sampleRate);this.buffer=n.buffer}var i=this.buffer.length/e,a=~~(i/10)||1,s=this.buffer.numberOfChannels,o=void 0;for(o=0;o<s;o++){var u=this.splitPeaks[o],l=this.buffer.getChannelData(o),c=void 0;for(c=t;c<=r;c++){var h=~~(c*i),f=~~(h+i),d=0,p=0,v=void 0;for(v=h;v<f;v+=a){var y=l[v];y>p&&(p=y),y<d&&(d=y)}u[2*c]=p,u[2*c+1]=d,(0==o||p>this.mergedPeaks[2*c])&&(this.mergedPeaks[2*c]=p),(0==o||d<this.mergedPeaks[2*c+1])&&(this.mergedPeaks[2*c+1]=d)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:\"getPlayedPercents\",value:function(){return this.state.getPlayedPercents.call(this)}},{key:\"disconnectSource\",value:function(){this.source&&this.source.disconnect()}},{key:\"destroy\",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(\"function\"==typeof this.ac.close&&\"closed\"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:\"load\",value:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()}},{key:\"createSource\",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:\"isPaused\",value:function(){return this.state!==this.states[s]}},{key:\"getDuration\",value:function(){return this.buffer?this.buffer.duration:this.explicitDuration?this.explicitDuration:0}},{key:\"seekTo\",value:function(e,t){if(this.buffer)return this.scheduledPause=null,null==e&&(e=this.getCurrentTime())>=this.getDuration()&&(e=0),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states[u]&&this.setState(o),{start:e,end:t}}},{key:\"getPlayedTime\",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:\"play\",value:function(e,t){if(this.buffer){this.createSource();var r=this.seekTo(e,t);e=r.start,t=r.end,this.scheduledPause=t,this.source.start(0,e,t-e),\"suspended\"==this.ac.state&&this.ac.resume&&this.ac.resume(),this.setState(s),this.fireEvent(\"play\")}}},{key:\"pause\",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(o),this.fireEvent(\"pause\")}},{key:\"getCurrentTime\",value:function(){return this.state.getCurrentTime.call(this)}},{key:\"getPlaybackRate\",value:function(){return this.playbackRate}},{key:\"setPlaybackRate\",value:function(e){e=e||1,this.isPaused()?this.playbackRate=e:(this.pause(),this.playbackRate=e,this.play())}}]),t}();l.scriptBufferSize=256,t.default=l,e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)}).bind(window),e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.handlers=null}return n(e,[{key:\"on\",value:function(e,t){var r=this;this.handlers||(this.handlers={});var n=this.handlers[e];return n||(n=this.handlers[e]=[]),n.push(t),{name:e,callback:t,un:function(e,t){return r.un(e,t)}}}},{key:\"un\",value:function(e,t){if(this.handlers){var r=this.handlers[e],n=void 0;if(r)if(t)for(n=r.length-1;n>=0;n--)r[n]==t&&r.splice(n,1);else r.length=0}}},{key:\"unAll\",value:function(){this.handlers=null}},{key:\"once\",value:function(e,t){var r=this;return this.on(e,function n(){for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];t.apply(r,a),setTimeout(function(){r.un(e,n)},0)})}},{key:\"fireEvent\",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(this.handlers){var i=this.handlers[e];i&&i.forEach(function(e){e.apply(void 0,r)})}}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.clearPeakCache()}return n(e,[{key:\"clearPeakCache\",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:\"addRangeToPeakCache\",value:function(e,t,r){e!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=e);for(var n=[],i=0;i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<t;)i++;for(i%2==0&&n.push(t);i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<=r;)n.push(this.peakCacheRanges[i]),i++;i%2==0&&n.push(r),n=n.filter(function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(n),this.peakCacheRanges=this.peakCacheRanges.sort(function(e,t){return e-t}).filter(function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]});var a=[];for(i=0;i<n.length;i+=2)a.push([n[i],n[i+1]]);return a}},{key:\"getCacheRanges\",value:function(){var e=[],t=void 0;for(t=0;t<this.peakCacheRanges.length;t+=2)e.push([this.peakCacheRanges[t],this.peakCacheRanges[t+1]]);return e}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(1),s=(n=a)&&n.__esModule?n:{default:n};!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(r(0));var o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.params=e,r.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},r.mediaType=e.mediaType.toLowerCase(),r.elementPosition=e.elementPosition,r.peaks=null,r.playbackRate=1,r.volume=1,r.buffer=null,r.onPlayEnd=null,r}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:\"init\",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:\"createTimer\",value:function(){var e=this;this.on(\"play\",function t(){e.isPaused()||(e.fireEvent(\"audioprocess\",e.getCurrentTime()),(window.requestAnimationFrame||window.webkitRequestAnimationFrame)(t))}),this.on(\"pause\",function(){e.fireEvent(\"audioprocess\",e.getCurrentTime())})}},{key:\"load\",value:function(e,t,r,n){var i=document.createElement(this.mediaType);i.controls=this.params.mediaControls,i.autoplay=this.params.autoplay||!1,i.preload=null==n?\"auto\":n,i.src=e,i.style.width=\"100%\";var a=t.querySelector(this.mediaType);a&&t.removeChild(a),t.appendChild(i),this._load(i,r)}},{key:\"loadElt\",value:function(e,t){e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,this._load(e,t)}},{key:\"_load\",value:function(e,t){var r=this;\"function\"==typeof e.load&&e.load(),e.addEventListener(\"error\",function(){r.fireEvent(\"error\",\"Error loading media element\")}),e.addEventListener(\"canplay\",function(){r.fireEvent(\"canplay\")}),e.addEventListener(\"ended\",function(){r.fireEvent(\"finish\")}),e.addEventListener(\"play\",function(){r.fireEvent(\"play\")}),e.addEventListener(\"pause\",function(){r.fireEvent(\"pause\")}),this.media=e,this.peaks=t,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:\"isPaused\",value:function(){return!this.media||this.media.paused}},{key:\"getDuration\",value:function(){if(this.explicitDuration)return this.explicitDuration;var e=(this.buffer||this.media).duration;return e>=1/0&&(e=this.media.seekable.end(0)),e}},{key:\"getCurrentTime\",value:function(){return this.media&&this.media.currentTime}},{key:\"getPlayedPercents\",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:\"getPlaybackRate\",value:function(){return this.playbackRate||this.media.playbackRate}},{key:\"setPlaybackRate\",value:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate}},{key:\"seekTo\",value:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()}},{key:\"play\",value:function(e,t){this.seekTo(e);var r=this.media.play();return t&&this.setPlayEnd(t),r}},{key:\"pause\",value:function(){var e=void 0;return this.media&&(e=this.media.pause()),this.clearPlayEnd(),e}},{key:\"setPlayEnd\",value:function(e){var t=this;this._onPlayEnd=function(r){r>=e&&(t.pause(),t.seekTo(e))},this.on(\"audioprocess\",this._onPlayEnd)}},{key:\"clearPlayEnd\",value:function(){this._onPlayEnd&&(this.un(\"audioprocess\",this._onPlayEnd),this._onPlayEnd=null)}},{key:\"getPeaks\",value:function(e,r,n){return this.buffer?function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if(\"value\"in i)return i.value;var s=i.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"getPeaks\",this).call(this,e,r,n):this.peaks||[]}},{key:\"setSinkId\",value:function(e){return e?this.media.setSinkId?this.media.setSinkId(e):Promise.reject(new Error(\"setSinkId is not supported in your browser\")):Promise.reject(new Error(\"Invalid deviceId: \"+e))}},{key:\"getVolume\",value:function(){return this.volume||this.media.volume}},{key:\"setVolume\",value:function(e){this.volume=e,this.media.volume=this.volume}},{key:\"destroy\",value:function(){this.pause(),this.unAll(),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),t}();t.default=o,e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));var a=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.container=e,n.params=r,n.width=0,n.height=r.height*n.params.pixelRatio,n.lastPos=0,n.wrapper=null,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Observer),n(t,[{key:\"style\",value:function(e,t){return i.style(e,t)}},{key:\"createWrapper\",value:function(){this.wrapper=this.container.appendChild(document.createElement(\"wave\")),this.style(this.wrapper,{display:\"block\",position:\"relative\",userSelect:\"none\",webkitUserSelect:\"none\",height:this.params.height+\"px\"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:\"100%\",overflowX:this.params.hideScrollbar?\"hidden\":\"auto\",overflowY:\"hidden\"}),this.setupWrapperEvents()}},{key:\"handleEvent\",value:function(e,t){!t&&e.preventDefault();var r=e.targetTouches?e.targetTouches[0].clientX:e.clientX,n=this.wrapper.getBoundingClientRect(),i=this.width,a=this.getWidth(),s=void 0;return!this.params.fillParent&&i<a?(s=(r-n.left)*(this.params.pixelRatio/i)||0)>1&&(s=1):s=(r-n.left+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,s}},{key:\"setupWrapperEvents\",value:function(){var e=this;this.wrapper.addEventListener(\"click\",function(t){var r=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!=r){var n=e.wrapper.getBoundingClientRect();if(t.clientY>=n.bottom-r)return}e.params.interact&&e.fireEvent(\"click\",t,e.handleEvent(t))}),this.wrapper.addEventListener(\"scroll\",function(t){return e.fireEvent(\"scroll\",t)})}},{key:\"drawPeaks\",value:function(e,t,r,n){this.setWidth(t)||this.clearWave(),this.params.barWidth?this.drawBars(e,0,r,n):this.drawWave(e,0,r,n)}},{key:\"resetScroll\",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:\"recenter\",value:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)}},{key:\"recenterOnPosition\",value:function(e,t){var r=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),i=this.wrapper.scrollWidth-this.wrapper.clientWidth,a=e-n,s=a-r;if(0!=i){if(!t&&-n<=s&&s<n){a=r+(s=Math.max(-5,Math.min(5,s)))}(a=Math.max(0,Math.min(i,a)))!=r&&(this.wrapper.scrollLeft=a)}}},{key:\"getScrollX\",value:function(){var e=this.params.pixelRatio,t=Math.round(this.wrapper.scrollLeft*e);if(this.params.scrollParent){var r=~~(this.wrapper.scrollWidth*e-this.getWidth());t=Math.min(r,Math.max(0,t))}return t}},{key:\"getWidth\",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:\"setWidth\",value:function(e){return this.width!=e&&(this.width=e,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:\"\"}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+\"px\"}),this.updateSize(),!0)}},{key:\"setHeight\",value:function(e){return e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+\"px\"}),this.updateSize(),!0)}},{key:\"progress\",value:function(e){var t=1/this.params.pixelRatio,r=Math.round(e*this.width)*t;if(r<this.lastPos||r-this.lastPos>=t){if(this.lastPos=r,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(n)}this.updateProgress(r)}}},{key:\"destroy\",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container&&this.container.removeChild(this.wrapper),this.wrapper=null)}},{key:\"updateCursor\",value:function(){}},{key:\"updateSize\",value:function(){}},{key:\"drawBars\",value:function(e,t,r,n){}},{key:\"drawWave\",value:function(e,t,r,n){}},{key:\"clearWave\",value:function(){}},{key:\"updateProgress\",value:function(e){}}]),t}();t.default=a,e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(6),s=(n=a)&&n.__esModule?n:{default:n},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));var u=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.maxCanvasWidth=r.maxCanvasWidth,n.maxCanvasElementWidth=Math.round(r.maxCanvasWidth/r.pixelRatio),n.hasProgressCanvas=r.waveColor!=r.progressColor,n.halfPixel=.5/r.pixelRatio,n.canvases=[],n.progressWave=null,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:\"init\",value:function(){this.createWrapper(),this.createElements()}},{key:\"createElements\",value:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement(\"wave\"),{position:\"absolute\",zIndex:3,left:0,top:0,bottom:0,overflow:\"hidden\",width:\"0\",display:\"none\",boxSizing:\"border-box\",borderRightStyle:\"solid\",pointerEvents:\"none\"})),this.addCanvas(),this.updateCursor()}},{key:\"updateCursor\",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+\"px\",borderRightColor:this.params.cursorColor})}},{key:\"updateSize\",value:function(){for(var e=this,t=Math.round(this.width/this.params.pixelRatio),r=Math.ceil(t/this.maxCanvasElementWidth);this.canvases.length<r;)this.addCanvas();for(;this.canvases.length>r;)this.removeCanvas();this.canvases.forEach(function(t,r){var n=e.maxCanvasWidth+2*Math.ceil(e.params.pixelRatio/2);r==e.canvases.length-1&&(n=e.width-e.maxCanvasWidth*(e.canvases.length-1)),e.updateDimensions(t,n,e.height),e.clearWaveForEntry(t)})}},{key:\"addCanvas\",value:function(){var e={},t=this.maxCanvasElementWidth*this.canvases.length;e.wave=this.wrapper.appendChild(this.style(document.createElement(\"canvas\"),{position:\"absolute\",zIndex:2,left:t+\"px\",top:0,bottom:0,height:\"100%\",pointerEvents:\"none\"})),e.waveCtx=e.wave.getContext(\"2d\"),this.hasProgressCanvas&&(e.progress=this.progressWave.appendChild(this.style(document.createElement(\"canvas\"),{position:\"absolute\",left:t+\"px\",top:0,bottom:0,height:\"100%\"})),e.progressCtx=e.progress.getContext(\"2d\")),this.canvases.push(e)}},{key:\"removeCanvas\",value:function(){var e=this.canvases.pop();e.wave.parentElement.removeChild(e.wave),this.hasProgressCanvas&&e.progress.parentElement.removeChild(e.progress)}},{key:\"updateDimensions\",value:function(e,t,r){var n=Math.round(t/this.params.pixelRatio),i=Math.round(this.width/this.params.pixelRatio);e.start=e.waveCtx.canvas.offsetLeft/i||0,e.end=e.start+n/i,e.waveCtx.canvas.width=t,e.waveCtx.canvas.height=r,this.style(e.waveCtx.canvas,{width:n+\"px\"}),this.style(this.progressWave,{display:\"block\"}),this.hasProgressCanvas&&(e.progressCtx.canvas.width=t,e.progressCtx.canvas.height=r,this.style(e.progressCtx.canvas,{width:n+\"px\"}))}},{key:\"clearWave\",value:function(){var e=this;this.canvases.forEach(function(t){return e.clearWaveForEntry(t)})}},{key:\"clearWaveForEntry\",value:function(e){e.waveCtx.clearRect(0,0,e.waveCtx.canvas.width,e.waveCtx.canvas.height),this.hasProgressCanvas&&e.progressCtx.clearRect(0,0,e.progressCtx.canvas.width,e.progressCtx.canvas.height)}},{key:\"drawBars\",value:function(e,t,r,n){var i=this;return this.prepareDraw(e,t,r,n,function(e){var t=e.absmax,a=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,u=e.peaks;if(void 0!==r){var l=a?2:1,c=u.length/l,h=i.params.barWidth*i.params.pixelRatio,f=h+(null===i.params.barGap?Math.max(i.params.pixelRatio,~~(h/2)):Math.max(i.params.pixelRatio,i.params.barGap*i.params.pixelRatio)),d=c/i.width,p=n,v=void 0;for(v=r;v<p;v+=f){var y=u[Math.floor(v*d*l)]||0,m=Math.round(y/t*o);i.fillRect(v+i.halfPixel,o-m+s,h+i.halfPixel,2*m)}}})}},{key:\"drawWave\",value:function(e,t,r,n){var i=this;return this.prepareDraw(e,t,r,n,function(e){var t=e.absmax,a=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,u=e.peaks;if(!a){var l=[],c=u.length,h=void 0;for(h=0;h<c;h++)l[2*h]=u[h],l[2*h+1]=-u[h];u=l}void 0!==r&&i.drawLine(u,t,o,s,r,n),i.fillRect(0,o+s-i.halfPixel,i.width,i.halfPixel)})}},{key:\"drawLine\",value:function(e,t,r,n,i,a){var s=this;this.canvases.forEach(function(o){s.setFillStyles(o),s.drawLineToContext(o,o.waveCtx,e,t,r,n,i,a),s.drawLineToContext(o,o.progressCtx,e,t,r,n,i,a)})}},{key:\"drawLineToContext\",value:function(e,t,r,n,i,a,s,o){if(t){var u=r.length/2,l=this.params.fillParent&&this.width!=u?this.width/u:1,c=Math.round(u*e.start),h=Math.round(u*e.end)+1;if(!(c>o||h<s)){var f=Math.min(c,s),d=Math.max(h,o),p=void 0,v=void 0;for(t.beginPath(),t.moveTo((f-c)*l+this.halfPixel,i+a),p=f;p<d;p++){var y=r[2*p]||0,m=Math.round(y/n*i);t.lineTo((p-c)*l+this.halfPixel,i-m+a)}for(v=d-1;v>=f;v--){var k=r[2*v+1]||0,g=Math.round(k/n*i);t.lineTo((v-c)*l+this.halfPixel,i-g+a)}t.closePath(),t.fill()}}}},{key:\"fillRect\",value:function(e,t,r,n){var i=Math.floor(e/this.maxCanvasWidth),a=Math.min(Math.ceil((e+r)/this.maxCanvasWidth)+1,this.canvases.length),s=void 0;for(s=i;s<a;s++){var o=this.canvases[s],u=s*this.maxCanvasWidth,l={x1:Math.max(e,s*this.maxCanvasWidth),y1:t,x2:Math.min(e+r,s*this.maxCanvasWidth+o.waveCtx.canvas.width),y2:t+n};l.x1<l.x2&&(this.setFillStyles(o),this.fillRectToContext(o.waveCtx,l.x1-u,l.y1,l.x2-l.x1,l.y2-l.y1),this.fillRectToContext(o.progressCtx,l.x1-u,l.y1,l.x2-l.x1,l.y2-l.y1))}}},{key:\"prepareDraw\",value:function(e,t,r,n,i){var a=this;return o.frame(function(){if(e[0]instanceof Array){var s=e;if(a.params.splitChannels)return a.setHeight(s.length*a.params.height*a.params.pixelRatio),s.forEach(function(e,t){return a.prepareDraw(e,t,r,n,i)});e=s[0]}var u=1/a.params.barHeight;if(a.params.normalize){var l=o.max(e),c=o.min(e);u=-c>l?-c:l}var h=[].some.call(e,function(e){return e<0}),f=a.params.height*a.params.pixelRatio;return i({absmax:u,hasMinVals:h,height:f,offsetY:f*t||0,halfH:f/2,peaks:e})})()}},{key:\"fillRectToContext\",value:function(e,t,r,n,i){e&&e.fillRect(t,r,n,i)}},{key:\"setFillStyles\",value:function(e){e.waveCtx.fillStyle=this.params.waveColor,this.hasProgressCanvas&&(e.progressCtx.fillStyle=this.params.progressColor)}},{key:\"getImage\",value:function(e,t){var r=this.canvases.map(function(r){return r.wave.toDataURL(e,t)});return r.length>1?r:r[0]}},{key:\"updateProgress\",value:function(e){this.style(this.progressWave,{width:e+\"px\"})}}]),t}();t.default=u,e.exports=t.default},function(e,t,r){\"use strict\";function n(e){e.stopPropagation(),document.body.removeEventListener(\"click\",n,!0)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){document.body.addEventListener(\"click\",n,!0)},e.exports=t.default},function(e,t){e.exports=function(e,t,r){var n,i,a,s,o;function u(){var l=Date.now()-s;l<t&&l>=0?n=setTimeout(u,t-l):(n=null,r||(o=e.apply(a,i),a=i=null))}null==t&&(t=100);var l=function(){a=this,i=arguments,s=Date.now();var l=r&&!n;return n||(n=setTimeout(u,t)),l&&(o=e.apply(a,i),a=i=null),o};return l.clear=function(){n&&(clearTimeout(n),n=null)},l.flush=function(){n&&(o=e.apply(a,i),a=i=null,clearTimeout(n),n=null)},l}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,a.default)(function(){return e.apply(void 0,r)})}};var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n};e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e,t){return Object.keys(t).forEach(function(r){e.style[r]!==t[r]&&(e.style[r]=t[r])}),e},e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach(function(t){Object.keys(t).forEach(function(r){e[r]=t[r]})}),e},e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=Number(1/0);return Object.keys(e).forEach(function(r){e[r]<t&&(t=e[r])}),t},e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=-1/0;return Object.keys(e).forEach(function(r){e[r]>t&&(t=e[r])}),t},e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(){return\"wavesurfer_\"+Math.random().toString(32).substring(2)},e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=new a.default,r=new XMLHttpRequest,n=!1;r.open(e.method||\"GET\",e.url,!0),r.responseType=e.responseType||\"json\",e.xhr&&(e.xhr.requestHeaders&&e.xhr.requestHeaders.forEach(function(e){r.setRequestHeader(e.key,e.value)}),e.xhr.withCredentials&&(r.withCredentials=!0));return r.addEventListener(\"progress\",function(e){t.fireEvent(\"progress\",e),e.lengthComputable&&e.loaded==e.total&&(n=!0)}),r.addEventListener(\"load\",function(e){n||t.fireEvent(\"progress\",e),t.fireEvent(\"load\",e),200==r.status||206==r.status?t.fireEvent(\"success\",r.response,e):t.fireEvent(\"error\",e)}),r.addEventListener(\"error\",function(e){return t.fireEvent(\"error\",e)}),r.send(),t.xhr=r,t};var n,i=r(3),a=(n=i)&&n.__esModule?n:{default:n};e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0)),a=l(r(7)),s=l(r(1)),o=l(r(5)),u=l(r(4));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function h(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}!function(){function e(t,r){h(this,e)}n(e,[{key:\"create\",value:function(e){}}]),n(e,[{key:\"init\",value:function(){}},{key:\"destroy\",value:function(){}}])}();var f=function(e){function t(e){h(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.defaultParams={audioContext:null,audioRate:1,autoCenter:!0,backend:\"WebAudio\",barHeight:1,barGap:null,container:null,cursorColor:\"#333\",cursorWidth:1,dragSelection:!0,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:\"audio\",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:\"#555\",removeMediaElementOnDestroy:!0,renderer:a.default,responsive:!1,scrollParent:!1,skipLength:2,splitChannels:!1,waveColor:\"#999\",xhr:{}},r.backends={MediaElement:o.default,WebAudio:s.default},r.util=i,r.params=i.extend({},r.defaultParams,e),r.container=\"string\"==typeof e.container?document.querySelector(r.params.container):r.params.container,!r.container)throw new Error(\"Container element not found\");if(null==r.params.mediaContainer?r.mediaContainer=r.container:\"string\"==typeof r.params.mediaContainer?r.mediaContainer=document.querySelector(r.params.mediaContainer):r.mediaContainer=r.params.mediaContainer,!r.mediaContainer)throw new Error(\"Media Container element not found\");if(r.params.maxCanvasWidth<=1)throw new Error(\"maxCanvasWidth must be greater than 1\");if(r.params.maxCanvasWidth%2==1)throw new Error(\"maxCanvasWidth must be an even number\");if(r.savedVolume=0,r.isMuted=!1,r.tmpEvents=[],r.currentAjax=null,r.arraybuffer=null,r.drawer=null,r.backend=null,r.peakCache=null,\"function\"!=typeof r.params.renderer)throw new Error(\"Renderer parameter is invalid\");r.Drawer=r.params.renderer,r.Backend=r.backends[r.params.backend],r.initialisedPluginList={},r.isDestroyed=!1,r.isReady=!1;var n=0;return r._onResize=i.debounce(function(){n==r.drawer.wrapper.clientWidth||r.params.scrollParent||(n=r.drawer.wrapper.clientWidth,r.drawer.fireEvent(\"redraw\"))},\"number\"==typeof r.params.responsive?r.params.responsive:100),c(r,r)}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Observer),n(t,null,[{key:\"create\",value:function(e){return new t(e).init()}}]),n(t,[{key:\"init\",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:\"registerPlugins\",value:function(e){var t=this;return e.forEach(function(e){return t.addPlugin(e)}),e.forEach(function(e){e.deferInit||t.initPlugin(e.name)}),this.fireEvent(\"plugins-registered\",e),this}},{key:\"addPlugin\",value:function(e){var t=this;if(!e.name)throw new Error(\"Plugin does not have a name!\");if(!e.instance)throw new Error(\"Plugin \"+e.name+\" does not have an instance property!\");e.staticProps&&Object.keys(e.staticProps).forEach(function(r){t[r]=e.staticProps[r]});var r=e.instance;return Object.getOwnPropertyNames(i.Observer.prototype).forEach(function(e){r.prototype[e]=i.Observer.prototype[e]}),this[e.name]=new r(e.params||{},this),this.fireEvent(\"plugin-added\",e.name),this}},{key:\"initPlugin\",value:function(e){if(!this[e])throw new Error(\"Plugin \"+e+\" has not been added yet!\");return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent(\"plugin-initialised\",e),this}},{key:\"destroyPlugin\",value:function(e){if(!this[e])throw new Error(\"Plugin \"+e+\" has not been added yet and cannot be destroyed!\");if(!this.initialisedPluginList[e])throw new Error(\"Plugin \"+e+\" is not active and cannot be destroyed!\");if(\"function\"!=typeof this[e].destroy)throw new Error(\"Plugin \"+e+\" does not have a destroy function!\");return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent(\"plugin-destroyed\",e),this}},{key:\"destroyAllPlugins\",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach(function(t){return e.destroyPlugin(t)})}},{key:\"createDrawer\",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent(\"drawer-created\",this.drawer),!1!==this.params.responsive&&(window.addEventListener(\"resize\",this._onResize,!0),window.addEventListener(\"orientationchange\",this._onResize,!0)),this.drawer.on(\"redraw\",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on(\"click\",function(t,r){setTimeout(function(){return e.seekTo(r)},0)}),this.drawer.on(\"scroll\",function(t){e.params.partialRender&&e.drawBuffer(),e.fireEvent(\"scroll\",t)})}},{key:\"createBackend\",value:function(){var e=this;this.backend&&this.backend.destroy(),\"AudioElement\"==this.params.backend&&(this.params.backend=\"MediaElement\"),\"WebAudio\"!=this.params.backend||this.Backend.prototype.supportsWebAudio.call(null)||(this.params.backend=\"MediaElement\"),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent(\"backend-created\",this.backend),this.backend.on(\"finish\",function(){return e.fireEvent(\"finish\")}),this.backend.on(\"play\",function(){return e.fireEvent(\"play\")}),this.backend.on(\"pause\",function(){return e.fireEvent(\"pause\")}),this.backend.on(\"audioprocess\",function(t){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent(\"audioprocess\",t)})}},{key:\"createPeakCache\",value:function(){this.params.partialRender&&(this.peakCache=new u.default)}},{key:\"getDuration\",value:function(){return this.backend.getDuration()}},{key:\"getCurrentTime\",value:function(){return this.backend.getCurrentTime()}},{key:\"setCurrentTime\",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:\"play\",value:function(e,t){var r=this;return this.fireEvent(\"interaction\",function(){return r.play(e,t)}),this.backend.play(e,t)}},{key:\"pause\",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:\"playPause\",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:\"isPlaying\",value:function(){return!this.backend.isPaused()}},{key:\"skipBackward\",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:\"skipForward\",value:function(e){this.skip(e||this.params.skipLength)}},{key:\"skip\",value:function(e){var t=this.getDuration()||1,r=this.getCurrentTime()||0;r=Math.max(0,Math.min(t,r+(e||0))),this.seekAndCenter(r/t)}},{key:\"seekAndCenter\",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:\"seekTo\",value:function(e){var t=this;if(\"number\"!=typeof e||!isFinite(e)||e<0||e>1)return console.error(\"Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!\");this.fireEvent(\"interaction\",function(){return t.seekTo(e)});var r=this.backend.isPaused();r||this.backend.pause();var n=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),r||this.backend.play(),this.params.scrollParent=n,this.fireEvent(\"seek\",e)}},{key:\"stop\",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:\"setSinkId\",value:function(e){return this.backend.setSinkId(e)}},{key:\"setVolume\",value:function(e){this.backend.setVolume(e),this.fireEvent(\"volume\",e)}},{key:\"getVolume\",value:function(){return this.backend.getVolume()}},{key:\"setPlaybackRate\",value:function(e){this.backend.setPlaybackRate(e)}},{key:\"getPlaybackRate\",value:function(){return this.backend.getPlaybackRate()}},{key:\"toggleMute\",value:function(){this.setMute(!this.isMuted)}},{key:\"setMute\",value:function(e){e!==this.isMuted?(e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent(\"volume\",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent(\"volume\",this.savedVolume)),this.fireEvent(\"mute\",this.isMuted)):this.fireEvent(\"mute\",this.isMuted)}},{key:\"getMute\",value:function(){return this.isMuted}},{key:\"isReady\",value:function(){return this.isReady}},{key:\"getFilters\",value:function(){return this.backend.filters||[]}},{key:\"toggleScroll\",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:\"toggleInteraction\",value:function(){this.params.interact=!this.params.interact}},{key:\"getWaveColor\",value:function(){return this.params.waveColor}},{key:\"setWaveColor\",value:function(e){this.params.waveColor=e,this.drawBuffer()}},{key:\"getProgressColor\",value:function(){return this.params.progressColor}},{key:\"setProgressColor\",value:function(e){this.params.progressColor=e,this.drawBuffer()}},{key:\"getCursorColor\",value:function(){return this.params.cursorColor}},{key:\"setCursorColor\",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:\"getHeight\",value:function(){return this.params.height}},{key:\"setHeight\",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:\"drawBuffer\",value:function(){var e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),t=this.drawer.getWidth(),r=e,n=this.drawer.getScrollX(),i=Math.max(n+t,r);this.params.fillParent&&(!this.params.scrollParent||e<t)&&(n=0,i=r=t);var a=void 0;if(this.params.partialRender){var s=this.peakCache.addRangeToPeakCache(r,n,i),o=void 0;for(o=0;o<s.length;o++)a=this.backend.getPeaks(r,s[o][0],s[o][1]),this.drawer.drawPeaks(a,r,s[o][0],s[o][1])}else a=this.backend.getPeaks(r,n,i),this.drawer.drawPeaks(a,r,n,i);this.fireEvent(\"redraw\",a,r)}},{key:\"zoom\",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent(\"zoom\",e)}},{key:\"loadArrayBuffer\",value:function(e){var t=this;this.decodeArrayBuffer(e,function(e){t.isDestroyed||t.loadDecodedBuffer(e)})}},{key:\"loadDecodedBuffer\",value:function(e){this.backend.load(e),this.drawBuffer(),this.fireEvent(\"ready\"),this.isReady=!0}},{key:\"loadBlob\",value:function(e){var t=this,r=new FileReader;r.addEventListener(\"progress\",function(e){return t.onProgress(e)}),r.addEventListener(\"load\",function(e){return t.loadArrayBuffer(e.target.result)}),r.addEventListener(\"error\",function(){return t.fireEvent(\"error\",\"Error reading file\")}),r.readAsArrayBuffer(e),this.empty()}},{key:\"load\",value:function(e,t,r,n){if(this.empty(),r){var i={\"Preload is not 'auto', 'none' or 'metadata'\":-1===[\"auto\",\"metadata\",\"none\"].indexOf(r),\"Peaks are not provided\":!t,\"Backend is not of type MediaElement\":\"MediaElement\"!==this.params.backend,\"Url is not of type string\":\"string\"!=typeof e},a=Object.keys(i).filter(function(e){return i[e]});a.length&&(console.warn(\"Preload parameter of wavesurfer.load will be ignored because:\\n\\t- \"+a.join(\"\\n\\t- \")),r=null)}switch(this.params.backend){case\"WebAudio\":return this.loadBuffer(e,t,n);case\"MediaElement\":return this.loadMediaElement(e,t,r,n)}}},{key:\"loadBuffer\",value:function(e,t,r){var n=this,i=function(t){return t&&n.tmpEvents.push(n.once(\"ready\",t)),n.getArrayBuffer(e,function(e){return n.loadArrayBuffer(e)})};if(!t)return i();this.backend.setPeaks(t,r),this.drawBuffer(),this.tmpEvents.push(this.once(\"interaction\",i))}},{key:\"loadMediaElement\",value:function(e,t,r,n){var i=this,a=e;if(\"string\"==typeof e)this.backend.load(a,this.mediaContainer,t,r);else{var s=e;this.backend.loadElt(s,t),a=s.src}this.tmpEvents.push(this.backend.once(\"canplay\",function(){i.drawBuffer(),i.fireEvent(\"ready\"),i.isReady=!0}),this.backend.once(\"error\",function(e){return i.fireEvent(\"error\",e)})),t&&this.backend.setPeaks(t,n),t&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(a,function(e){i.decodeArrayBuffer(e,function(e){i.backend.buffer=e,i.backend.setPeaks(null),i.drawBuffer(),i.fireEvent(\"waveform-ready\")})})}},{key:\"decodeArrayBuffer\",value:function(e,t){var r=this;this.arraybuffer=e,this.backend.decodeArrayBuffer(e,function(n){r.isDestroyed||r.arraybuffer!=e||(t(n),r.arraybuffer=null)},function(){return r.fireEvent(\"error\",\"Error decoding audiobuffer\")})}},{key:\"getArrayBuffer\",value:function(e,t){var r=this,n=i.ajax({url:e,responseType:\"arraybuffer\",xhr:this.params.xhr});return this.currentAjax=n,this.tmpEvents.push(n.on(\"progress\",function(e){r.onProgress(e)}),n.on(\"success\",function(e,n){t(e),r.currentAjax=null}),n.on(\"error\",function(e){r.fireEvent(\"error\",\"XHR error: \"+e.target.statusText),r.currentAjax=null})),n}},{key:\"onProgress\",value:function(e){var t=void 0;t=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent(\"loading\",Math.round(100*t),e.target)}},{key:\"exportPCM\",value:function(e,t,r,n){e=e||1024,n=n||0,t=t||1e4,r=r||!1;var i=this.backend.getPeaks(e,n),a=[].map.call(i,function(e){return Math.round(e*t)/t}),s=JSON.stringify(a);return r||window.open(\"data:application/json;charset=utf-8,\"+encodeURIComponent(s)),s}},{key:\"exportImage\",value:function(e,t){return e||(e=\"image/png\"),t||(t=1),this.drawer.getImage(e,t)}},{key:\"cancelAjax\",value:function(){this.currentAjax&&(this.currentAjax.xhr.abort(),this.currentAjax=null)}},{key:\"clearTmpEvents\",value:function(){this.tmpEvents.forEach(function(e){return e.un()})}},{key:\"empty\",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:\"destroy\",value:function(){this.destroyAllPlugins(),this.fireEvent(\"destroy\"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener(\"resize\",this._onResize,!0),window.removeEventListener(\"orientationchange\",this._onResize,!0)),this.backend.destroy(),this.drawer.destroy(),this.isDestroyed=!0,this.arraybuffer=null}}]),t}();f.util=i,t.default=f,e.exports=t.default}])});\r\n\r\n\r\n/*!\r\n * wavesurfer.js 2.0.6 (Fri Jun 15 2018 10:58:05 GMT+0200 (CEST))\r\n * https://github.com/katspaugh/wavesurfer.js\r\n * @license BSD-3-Clause\r\n */\r\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"regions\",[],t):\"object\"==typeof exports?exports.regions=t():(e.WaveSurfer=e.WaveSurfer||{},e.WaveSurfer.regions=t())}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"localhost:8080/dist/plugin/\",r(r.s=5)}({5:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var s=function(){function e(t,r){var n=this;i(this,e),this.wavesurfer=r,this.wrapper=r.drawer.wrapper,this.util=r.util,this.style=this.util.style,this.id=null==t.id?r.util.getId():t.id,this.start=Number(t.start)||0,this.end=null==t.end?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(t.end),this.resize=void 0===t.resize||Boolean(t.resize),this.drag=void 0===t.drag||Boolean(t.drag),this.loop=Boolean(t.loop),this.color=t.color||\"rgba(0, 0, 0, 0.1)\",this.data=t.data||{},this.attributes=t.attributes||{},this.maxLength=t.maxLength,this.minLength=t.minLength,this._onRedraw=function(){return n.updateRender()},this.scroll=!1!==t.scroll&&r.params.scrollParent,this.scrollSpeed=t.scrollSpeed||1,this.scrollThreshold=t.scrollThreshold||10,this.bindInOut(),this.render(),this.wavesurfer.on(\"zoom\",this._onRedraw),this.wavesurfer.on(\"redraw\",this._onRedraw),this.wavesurfer.fireEvent(\"region-created\",this)}return n(e,[{key:\"update\",value:function(e){null!=e.start&&(this.start=Number(e.start)),null!=e.end&&(this.end=Number(e.end)),null!=e.loop&&(this.loop=Boolean(e.loop)),null!=e.color&&(this.color=e.color),null!=e.data&&(this.data=e.data),null!=e.resize&&(this.resize=Boolean(e.resize)),null!=e.drag&&(this.drag=Boolean(e.drag)),null!=e.maxLength&&(this.maxLength=Number(e.maxLength)),null!=e.minLength&&(this.minLength=Number(e.minLength)),null!=e.attributes&&(this.attributes=e.attributes),this.updateRender(),this.fireEvent(\"update\"),this.wavesurfer.fireEvent(\"region-updated\",this)}},{key:\"remove\",value:function(){this.element&&(this.wrapper.removeChild(this.element),this.element=null,this.fireEvent(\"remove\"),this.wavesurfer.un(\"zoom\",this._onRedraw),this.wavesurfer.un(\"redraw\",this._onRedraw),this.wavesurfer.fireEvent(\"region-removed\",this))}},{key:\"play\",value:function(){this.wavesurfer.play(this.start,this.end),this.fireEvent(\"play\"),this.wavesurfer.fireEvent(\"region-play\",this)}},{key:\"playLoop\",value:function(){var e=this;this.play(),this.once(\"out\",function(){return e.playLoop()})}},{key:\"render\",value:function(){var e=document.createElement(\"region\");for(var t in e.className=\"wavesurfer-region\",e.title=this.formatTime(this.start,this.end),e.setAttribute(\"data-id\",this.id),this.attributes)e.setAttribute(\"data-region-\"+t,this.attributes[t]);this.wrapper.scrollWidth;if(this.style(e,{position:\"absolute\",zIndex:2,height:\"100%\",top:\"0px\"}),this.resize){var r=e.appendChild(document.createElement(\"handle\")),n=e.appendChild(document.createElement(\"handle\"));r.className=\"wavesurfer-handle wavesurfer-handle-start\",n.className=\"wavesurfer-handle wavesurfer-handle-end\";var i={cursor:\"col-resize\",position:\"absolute\",left:\"0px\",top:\"0px\",width:\"1%\",maxWidth:\"4px\",height:\"100%\"};this.style(r,i),this.style(n,i),this.style(n,{left:\"100%\"})}this.element=this.wrapper.appendChild(e),this.updateRender(),this.bindEvents(e)}},{key:\"formatTime\",value:function(e,t){return(e==t?[e]:[e,t]).map(function(e){return[Math.floor(e%3600/60),(\"00\"+Math.floor(e%60)).slice(-2)].join(\":\")}).join(\"-\")}},{key:\"getWidth\",value:function(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}},{key:\"updateRender\",value:function(){var e=this.wavesurfer.getDuration(),t=this.getWidth();if(this.start<0&&(this.start=0,this.end=this.end-this.start),this.end>e&&(this.end=e,this.start=e-(this.end-this.start)),null!=this.minLength&&(this.end=Math.max(this.start+this.minLength,this.end)),null!=this.maxLength&&(this.end=Math.min(this.start+this.maxLength,this.end)),null!=this.element){var r=Math.round(this.start/e*t),n=Math.round(this.end/e*t)-r;for(var i in this.style(this.element,{left:r+\"px\",width:n+\"px\",backgroundColor:this.color,cursor:this.drag?\"move\":\"default\"}),this.attributes)this.element.setAttribute(\"data-region-\"+i,this.attributes[i]);this.element.title=this.formatTime(this.start,this.end)}}},{key:\"bindInOut\",value:function(){var e=this;this.firedIn=!1,this.firedOut=!1;var t=function(t){!e.firedOut&&e.firedIn&&(e.start>=Math.round(100*t)/100||e.end<=Math.round(100*t)/100)&&(e.firedOut=!0,e.firedIn=!1,e.fireEvent(\"out\"),e.wavesurfer.fireEvent(\"region-out\",e)),!e.firedIn&&e.start<=t&&e.end>t&&(e.firedIn=!0,e.firedOut=!1,e.fireEvent(\"in\"),e.wavesurfer.fireEvent(\"region-in\",e))};this.wavesurfer.backend.on(\"audioprocess\",t),this.on(\"remove\",function(){e.wavesurfer.backend.un(\"audioprocess\",t)}),this.on(\"out\",function(){e.loop&&e.wavesurfer.play(e.start)})}},{key:\"bindEvents\",value:function(){var e,t,r,n,i,s,a,o,u,l,d,h,c,v,f,p=this;this.element.addEventListener(\"mouseenter\",function(e){p.fireEvent(\"mouseenter\",e),p.wavesurfer.fireEvent(\"region-mouseenter\",p,e)}),this.element.addEventListener(\"mouseleave\",function(e){p.fireEvent(\"mouseleave\",e),p.wavesurfer.fireEvent(\"region-mouseleave\",p,e)}),this.element.addEventListener(\"click\",function(e){e.preventDefault(),p.fireEvent(\"click\",e),p.wavesurfer.fireEvent(\"region-click\",p,e)}),this.element.addEventListener(\"dblclick\",function(e){e.stopPropagation(),e.preventDefault(),p.fireEvent(\"dblclick\",e),p.wavesurfer.fireEvent(\"region-dblclick\",p,e)}),(this.drag||this.resize)&&(e=p.wavesurfer.drawer.container,t=p.wavesurfer.getDuration(),r=p.scrollSpeed,n=p.scrollThreshold,i=void 0,s=void 0,a=void 0,o=void 0,u=void 0,l=!1,d=void 0,h=void 0,c=function(e){e.touches&&e.touches.length>1||(s=e.targetTouches?e.targetTouches[0].identifier:null,e.stopPropagation(),i=p.wavesurfer.drawer.handleEvent(e,!0)*t,o=p.wrapper.scrollWidth-p.wrapper.clientWidth,h=p.wrapper.getBoundingClientRect(),\"handle\"==e.target.tagName.toLowerCase()?u=e.target.classList.contains(\"wavesurfer-handle-start\")?\"start\":\"end\":(a=!0,u=!1))},v=function(e){e.touches&&e.touches.length>1||((a||u)&&(a=!1,d=null,u=!1),l&&(l=!1,p.util.preventClick(),p.fireEvent(\"update-end\",e),p.wavesurfer.fireEvent(\"region-update-end\",p,e)))},f=function(c){if(!(c.touches&&c.touches.length>1)&&(!c.targetTouches||c.targetTouches[0].identifier==s)&&(a||u)){var v=i,f=p.wavesurfer.drawer.handleEvent(c)*t,m=f-i;if(i=f,p.drag&&a&&(l=l||!!m,p.onDrag(m)),p.resize&&u&&(l=l||!!m,p.onResize(m,u)),p.scroll&&e.clientWidth<p.wrapper.scrollWidth){if(a){var g=p.element.getBoundingClientRect(),w=g.left-h.left;f<v&&w>=0?d=-1:f>v&&w+g.width<=h.right&&(d=1),(-1===d&&w>n||1===d&&w+g.width<h.right-n)&&(d=null)}else{var y=c.clientX-h.left;d=y<=n?-1:y>=h.right-n?1:null}d&&function e(n){if(d&&(a||u)){var s=p.wrapper.scrollLeft+r*d;p.wrapper.scrollLeft=s=Math.min(o,Math.max(0,s));var l=p.wavesurfer.drawer.handleEvent(n)*t,h=l-i;i=l,a?p.onDrag(h):p.onResize(h,u),window.requestAnimationFrame(function(){e(n)})}}(c)}}},p.element.addEventListener(\"mousedown\",c),p.element.addEventListener(\"touchstart\",c),p.wrapper.addEventListener(\"mousemove\",f),p.wrapper.addEventListener(\"touchmove\",f),document.body.addEventListener(\"mouseup\",v),document.body.addEventListener(\"touchend\",v),p.on(\"remove\",function(){document.body.removeEventListener(\"mouseup\",v),document.body.removeEventListener(\"touchend\",v),p.wrapper.removeEventListener(\"mousemove\",f),p.wrapper.removeEventListener(\"touchmove\",f)}),p.wavesurfer.on(\"destroy\",function(){document.body.removeEventListener(\"mouseup\",v),document.body.removeEventListener(\"touchend\",v)}))}},{key:\"onDrag\",value:function(e){var t=this.wavesurfer.getDuration();this.end+e>t||this.start+e<0||this.update({start:this.start+e,end:this.end+e})}},{key:\"onResize\",value:function(e,t){\"start\"==t?this.update({start:Math.min(this.start+e,this.end),end:Math.max(this.start+e,this.end)}):this.update({start:Math.min(this.end+e,this.start),end:Math.max(this.end+e,this.start)})}}]),e}(),a=function(){function e(t,r){var n=this;i(this,e),this.params=t,this.wavesurfer=r,this.util=r.util,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach(function(e){s.prototype[e]=n.util.Observer.prototype[e]}),this.wavesurfer.Region=s,this.list={},this._onReady=function(){n.wrapper=n.wavesurfer.drawer.wrapper,n.params.regions&&n.params.regions.forEach(function(e){n.add(e)}),n.params.dragSelection&&n.enableDragSelection(n.params)}}return n(e,null,[{key:\"create\",value:function(t){return{name:\"regions\",deferInit:!(!t||!t.deferInit)&&t.deferInit,params:t,staticProps:{initRegions:function(){console.warn('Deprecated initRegions! Use wavesurfer.initPlugins(\"regions\") instead!'),this.initPlugin(\"regions\")},addRegion:function(e){return this.initialisedPluginList.regions||this.initPlugin(\"regions\"),this.regions.add(e)},clearRegions:function(){this.regions&&this.regions.clear()},enableDragSelection:function(e){this.initialisedPluginList.regions||this.initPlugin(\"regions\"),this.regions.enableDragSelection(e)},disableDragSelection:function(){this.regions.disableDragSelection()}},instance:e}}}]),n(e,[{key:\"init\",value:function(){this.wavesurfer.isReady&&this._onReady(),this.wavesurfer.on(\"ready\",this._onReady)}},{key:\"destroy\",value:function(){this.wavesurfer.un(\"ready\",this._onReady),this.disableDragSelection(),this.clear()}},{key:\"add\",value:function(e){var t=this,r=new this.wavesurfer.Region(e,this.wavesurfer);return this.list[r.id]=r,r.on(\"remove\",function(){delete t.list[r.id]}),r}},{key:\"clear\",value:function(){var e=this;Object.keys(this.list).forEach(function(t){e.list[t].remove()})}},{key:\"enableDragSelection\",value:function(e){var t=this,r=e.slop||2,n=this.wavesurfer.drawer.container,i=!1!==e.scroll&&this.wavesurfer.params.scrollParent,s=e.scrollSpeed||1,a=e.scrollThreshold||10,o=void 0,u=this.wavesurfer.getDuration(),l=void 0,d=void 0,h=void 0,c=void 0,v=0,f=void 0,p=void 0,m=function(e){e.touches&&e.touches.length>1||(u=t.wavesurfer.getDuration(),c=e.targetTouches?e.targetTouches[0].identifier:null,l=t.wrapper.scrollWidth-t.wrapper.clientWidth,p=t.wrapper.getBoundingClientRect(),o=!0,d=t.wavesurfer.drawer.handleEvent(e,!0),h=null,f=null)};this.wrapper.addEventListener(\"mousedown\",m),this.wrapper.addEventListener(\"touchstart\",m),this.on(\"disable-drag-selection\",function(){t.wrapper.removeEventListener(\"touchstart\",m),t.wrapper.removeEventListener(\"mousedown\",m)});var g=function(e){e.touches&&e.touches.length>1||(o=!1,v=0,f=null,h&&(t.util.preventClick(),h.fireEvent(\"update-end\",e),t.wavesurfer.fireEvent(\"region-update-end\",h,e)),h=null)};this.wrapper.addEventListener(\"mouseup\",g),this.wrapper.addEventListener(\"touchend\",g),document.body.addEventListener(\"mouseup\",g),document.body.addEventListener(\"touchend\",g),this.on(\"disable-drag-selection\",function(){document.body.removeEventListener(\"mouseup\",g),document.body.removeEventListener(\"touchend\",g),t.wrapper.removeEventListener(\"touchend\",g),t.wrapper.removeEventListener(\"mouseup\",g)});var w=function(m){if(o&&!(++v<=r||m.touches&&m.touches.length>1||m.targetTouches&&m.targetTouches[0].identifier!=c)){h||(h=t.add(e||{}));var g=t.wavesurfer.drawer.handleEvent(m);if(h.update({start:Math.min(g*u,d*u),end:Math.max(g*u,d*u)}),i&&n.clientWidth<t.wrapper.scrollWidth){var w=m.clientX-p.left;(f=w<=a?-1:w>=p.right-a?1:null)&&function e(r){if(h&&f){var n=t.wrapper.scrollLeft+s*f;t.wrapper.scrollLeft=n=Math.min(l,Math.max(0,n));var i=t.wavesurfer.drawer.handleEvent(r);h.update({start:Math.min(i*u,d*u),end:Math.max(i*u,d*u)}),n<l&&n>0&&window.requestAnimationFrame(function(){e(r)})}}(m)}}};this.wrapper.addEventListener(\"mousemove\",w),this.wrapper.addEventListener(\"touchmove\",w),this.on(\"disable-drag-selection\",function(){t.wrapper.removeEventListener(\"touchmove\",w),t.wrapper.removeEventListener(\"mousemove\",w)})}},{key:\"disableDragSelection\",value:function(){this.fireEvent(\"disable-drag-selection\")}},{key:\"getCurrentRegion\",value:function(){var e=this,t=this.wavesurfer.getCurrentTime(),r=null;return Object.keys(this.list).forEach(function(n){var i=e.list[n];i.start<=t&&i.end>=t&&(!r||i.end-i.start<r.end-r.start)&&(r=i)}),r}}]),e}();t.default=a,e.exports=t.default}})});\r\n\r\n","Nwdthemes_Revslider/admin/assets/js/plugins/ddTP.js":"/*!\r\n * ThemePunchs Own Select2RS Library\r\n * @version: 2.0 (25.03.2021)\r\n * @author ThemePunch\r\n*/\r\n\r\n\r\n(function(jQuery,undefined){\r\n\"use strict\";\r\n\r\n    var listeners,\r\n        globRS,\r\n        KEYS = {\r\n        BACKSPACE: 8,\r\n        TAB: 9,\r\n        ENTER: 13,\r\n        SHIFT: 16,\r\n        CTRL: 17,\r\n        ALT: 18,\r\n        ESC: 27,\r\n        CMD:227,\r\n        CMDR:91,\r\n        CMDL:93,\r\n        SPACE: 32,\r\n        PAGE_UP: 33,\r\n        PAGE_DOWN: 34,\r\n        END: 35,\r\n        HOME: 36,\r\n        LEFT: 37,\r\n        UP: 38,\r\n        RIGHT: 39,\r\n        DOWN: 40,\r\n        DELETE: 46\r\n      },\r\n    DOC = jQuery(document);\r\n    window.ddTPCalls = [\"destroy\",\"update\",\"rebuild\",\"change\",\"main\"];\r\n    window.ddTP_R_cache = {};\r\n    window.ddTPcache = {};\r\n\r\n/*\r\n DropDown - ThemePunch Core\r\n */\r\n    jQuery.fn.extend({\r\n        //FALL BACK TO OLD CALLS\r\n        select2RS : function(_,params) {\r\n            return jQuery(this).ddTP(_,params);\r\n        },\r\n\r\n        /* DROP DOWN INIT, UPDATE, DESTROY */\r\n        ddTP : function(_,params) {\r\n            if (_==\"destroy\" || _==\"update\" || _==\"rebuild\" || _==\"change\") {\r\n                window.ddTP_R_cache[_] = window.ddTP_R_cache[_]===undefined ? {list:[],params:[]} : window.ddTP_R_cache[_];\r\n                window.ddTP_R_cache[_].list.push(this);\r\n                window.ddTP_R_cache[_].params.push(params);\r\n            } else {\r\n                 window.ddTP_R_cache.main = window.ddTP_R_cache.main===undefined ? {list:[],params:[]} : window.ddTP_R_cache.main;\r\n                window.ddTP_R_cache.main.list.push(this);\r\n                window.ddTP_R_cache.main.params.push(_);\r\n            }\r\n           if ( window.ddTP_R_RFACalled===undefined) {\r\n                window.ddTP_R_RFACalled=true;\r\n                requestAnimationFrame(function() {\r\n                    var call,i,j;\r\n                    for (j=0;j<window.ddTPCalls.length;j++) {\r\n                        call = window.ddTPCalls[j];\r\n                        if (window.ddTP_R_cache[call]!==undefined)\r\n                            for (i in window.ddTP_R_cache[call].list)\r\n                                ddTPRFA(window.ddTP_R_cache[call].list[i],call,window.ddTP_R_cache[call].params[i]);\r\n                    }\r\n                    window.ddTP_R_cache = {};\r\n                    delete window.ddTP_R_RFACalled;\r\n                });\r\n\r\n            }\r\n            if (listeners===undefined) buildListeners();\r\n            return this;\r\n        }\r\n    });\r\n\r\n     var ddTPRFA = function(list,_,params) {\r\n\r\n            var  i;\r\n            if (_==\"destroy\") {\r\n                for (i in list) {\r\n                    if (!list.hasOwnProperty(i) || list[i]===undefined || list[i].tagName!==\"SELECT\" || list[i].id===undefined || list[i].id===\"\" || ddTPcache[list[i].id]===undefined) continue;\r\n                    destroy(list[i]);\r\n                }\r\n            } else\r\n            if (_==\"update\") {  // UPDATE CURRENT FOCUSED LIST\r\n                for (i in list) {\r\n                    if (!list.hasOwnProperty(i) || list[i]===undefined || list[i].tagName!==\"SELECT\" || list[i].id===undefined || list[i].id===\"\" ||  ddTPcache[list[i].id]===undefined || globRS.INFOCUS!==list[i].id) continue;\r\n                    openSelectModal(list[i].id,true);\r\n                }\r\n            } else\r\n            if (_==\"rebuild\") {\r\n                for (var i in list) {\r\n                    if (!list.hasOwnProperty(i) || list[i]===undefined || list[i].tagName!==\"SELECT\" || (list[i].id===undefined && list[i].id===\"\")) continue;\r\n                        destroy(list[i]);\r\n                        buildSelect(list[i],params);\r\n                }\r\n            } else\r\n            if (_==\"change\") {\r\n                for (var i in list) {\r\n                    if (!list.hasOwnProperty(i) || list[i].id===undefined || list[i].id===\"\" || ddTPcache[list[i].id]===undefined) continue;\r\n                    setFakeValues(ddTPcache[list[i].id].rendered,getValueTexts(list[i],ddTPcache[list[i].id].params));\r\n                }\r\n            } else\r\n\r\n            for (var i in list) {\r\n                if (!list.hasOwnProperty(i) || list[i]===undefined || list[i].tagName!==\"SELECT\" || (list[i].id!==undefined && list[i].id!==\"\" && ddTPcache[list[i].id]!==undefined)) continue;\r\n                buildSelect(list[i],params);\r\n            }\r\n\r\n\r\n\r\n\r\n        }\r\n\r\n    /*\r\n    BUILD DROP DOWN SELECT BOX\r\n    */\r\n    var buildSelect = function(sel,params) {\r\n\r\n            if (sel.id===undefined || sel.id===\"\") sel.id = 'ddTP_'+Math.round(Math.random()*10000000000);\r\n            sel.classList.add('ddTP_hidden');\r\n            sel.classList.add('ddTP_based');\r\n\r\n            /* CREATE CONTAIERS */\r\n\r\n            var cw = ddTPcache[sel.id]===undefined ? document.createElement('span') : ddTPcache[sel.id].container,\r\n                c = document.createElement('span'),\r\n                s = document.createElement('span'),\r\n                r = document.createElement(sel.multiple ? 'ul' : 'span');\r\n\r\n            cw.className = \"ddTP ddTP_C ddTP-fake\"+(sel.dataset.theme!==undefined ? \" ddTP_C--\"+sel.dataset.theme : \"\");\r\n            c.className = \"selection\";\r\n            s.className = \"ddTP_S ddTP_S--\"+(sel.multiple ? 'multiple' : 'single');\r\n            r.className = \"ddTP_S__rendered\";\r\n\r\n            cw.dataset.refid = sel.id;\r\n            c.dir = 'ltr';\r\n            c.appendChild(s);\r\n            s.appendChild(r);\r\n\r\n            /* CREATE AND ADD DROP DOWN ICON */\r\n            if (!sel.multiple) {\r\n                var bw = document.createElement('span'),\r\n                b = document.createElement('b');\r\n                bw.className = \"ddTP_S__arrow\";\r\n                s.appendChild(bw);\r\n                bw.appendChild(b);\r\n            }\r\n\r\n            setFakeValues(r,getValueTexts(sel,params));\r\n            cw.appendChild(c);\r\n            insertAfter(cw,sel);\r\n            ddTPcache[sel.id] = {\r\n                sel : sel,\r\n                container: cw,\r\n                innerwrapper : c,\r\n                selection: s,\r\n                rendered: r,\r\n                params: (params===undefined ? {} : params),\r\n            }\r\n        },\r\n\r\n    /*\r\n    DESTROY DROP DOWN SELECT BOX\r\n    */\r\n    destroy = function(sel) {\r\n        if(ddTPcache==undefined || ddTPcache[sel.id]==undefined ||  ddTPcache[sel.id].container==undefined || ddTPcache[sel.id].container.parentNode==null) return;\r\n        ddTPcache[sel.id].container.parentNode.removeChild(ddTPcache[sel.id].container);\r\n        ddTPcache[sel.id].container.innerHTML = \"\";\r\n        delete ddTPcache[sel.id];\r\n    },\r\n\r\n    /*\r\n    CHANGE TAGS, MULTIPLE SELECTED VALUES, VALUE IN THE FAKE BOX\r\n    */\r\n    setFakeValues = function(r,v) {\r\n        requestAnimationFrame(function() {\r\n            if (r.tagName===\"UL\") {\r\n                r.innerHTML = \"\";\r\n                r.appendChild(v.values);\r\n            }\r\n            else if (v.html) r.innerHTML = v.values;\r\n            else r.innerText = v.values;\r\n\r\n        });\r\n    },\r\n\r\n    getPreData = function(p,ds,v) {\r\n        return (ds===undefined || p===undefined ? undefined :\r\n                p.preData!==undefined ? ds[p.preData] :\r\n                p.preDataFunction!==undefined ? p.preDataFunction(v) :\r\n                undefined);\r\n    },\r\n\r\n    /*\r\n    COLLECT VALUE, MULTI VALUES, TAGS AND ADD SEARCH BOX IF NEEDED INTO MULTI BOX\r\n    */\r\n    getValueTexts = function(sel,params) {\r\n        if (sel.multiple) {\r\n            var values = document.createDocumentFragment(),\r\n                added=false;\r\n\r\n            for (var i in sel.options)\r\n                if (sel.options[i]!==undefined && sel.options[i].selected) {\r\n                    added = true;\r\n                    values.appendChild(createResultLi(sel.options[i].value,sel.options[i].text===undefined ? sel.options[i].value : sel.options[i].text, undefined,sel.id, params,getPreData(params,sel.options[i].dataset,sel.options[i].value)));\r\n                }\r\n\r\n            if (params.tags || params.search) {\r\n                    globRS.liSearch = document.createElement('li');\r\n                    globRS.liSearch.className = \"ddTP_SCH ddTP_SCH--inline\";\r\n                    globRS.liSearch.appendChild(createSearch(params.searchValue,sel.id));\r\n                    values.appendChild(globRS.liSearch);\r\n                    added = true;\r\n            }\r\n\r\n            if (!added) values.appendChild(createResultLi(undefined,params===undefined || params.placeholder===undefined ? \"\" : params.placeholder,true,sel.id,params,getPreData(params,sel.options[i].dataset,sel.options[i].value)));\r\n\r\n            return {values:values};\r\n        } else {\r\n            var values = \"\",iTB,pre,ishtml = false;\r\n\r\n            for (var i in sel.options)\r\n                if (i!==sel.options[i].id && sel.options[i].selected) {\r\n                    pre = getPreData(params,sel.options[i].dataset,sel.options[i].value);\r\n                    iTB = pre!==undefined ? getiTB(params,  pre) : undefined;\r\n                    if (iTB!==undefined) ishtml =true;\r\n                    values+= (iTB===undefined ? \"\" : iTB) + (sel.options[i].text===undefined ? sel.options[i].value : sel.options[i].text);\r\n                }\r\n            return { html:ishtml, values:(values===\"\" ? params===undefined || params.placeholder===undefined ? \"\" : params.placeholder : values)};\r\n        }\r\n    },\r\n\r\n\r\n\r\n    /*\r\n    CREATE SEARCH INPUT\r\n    */\r\n    createSearch = function(val,id) {\r\n        var s = document.createElement('input');\r\n\r\n        s.className = \"ddTP_SCH__field\";\r\n        s.dataset.refid = id;\r\n        s.tabindex=\"0\";\r\n        s.autocomplete=\"off\";\r\n        s.autocorrect=\"off\";\r\n        s.autocapitalize=\"none\";\r\n        s.spellcheck=\"false\";\r\n        s.role=\"searchbox\";\r\n        s.ariaAutocomplete=\"list\";\r\n        s.placeholder=\"\";\r\n        s.type = \"search\";\r\n\r\n        if (val!==undefined && val.length>0) {\r\n            s.value = val;\r\n            s.style.width = ((s.value.length+1) * 0.75) + 'em';\r\n        } else\r\n        s.style.width = \"0.75em\";\r\n        return s;\r\n    },\r\n\r\n\r\n\r\n    /*\r\n    CREATE THE GLOBAL DROPDOWN CONTAINER\r\n    */\r\n    createGlobalElement = function() {\r\n        var frag = document.createDocumentFragment();\r\n        globRS = {\r\n            wrap : document.createElement('span'),\r\n            drop : document.createElement('span'),\r\n            searchw : document.createElement('span'),\r\n            searchi : document.createElement('input'),\r\n            result : document.createElement('span'),\r\n            ul : document.createElement('ul')\r\n\r\n        };\r\n\r\n\r\n        globRS.wrap.className = \"ddTP_C ddTP_C--default\";\r\n        globRS.drop.className = \"ddTP-dropdown ddTP-dropdown--below\";\r\n        globRS.searchw.className = \"ddTP_SCH ddTP_SCH--dropdown\";\r\n        globRS.searchi.className = \"ddTP_SCH__field\";\r\n\r\n        globRS.result.className = \"ddTP_R\";\r\n        globRS.ul.className = \"ddTP_ROs\";\r\n        globRS.drop.dir = \"ltr\";\r\n        globRS.searchi.type =\"search\";\r\n\r\n        globRS.searchw.appendChild(globRS.searchi);\r\n        globRS.wrap.appendChild(globRS.drop);\r\n        globRS.drop.appendChild(globRS.searchw);\r\n        globRS.drop.appendChild(globRS.result);\r\n        globRS.result.appendChild(globRS.ul);\r\n        frag.appendChild(globRS.wrap);\r\n\r\n\r\n\r\n        globRS.wrap.style.display = \"none\";\r\n        document.body.appendChild(frag);\r\n    },\r\n\r\n\r\n\r\n    getiTB = function(params,data) {\r\n        return params!==undefined &&  params.pre!==undefined ? params.pre.replace('#data#',data) : undefined;\r\n    },\r\n    /*\r\n    CREATE A SINGLE LI CONTAINER WITH CONTENT, REMOVE BUTTON\r\n    */\r\n    createResultLi = function(val,txt,isplaceholder,selid,params,ds) {\r\n        var li = addLi({\r\n                c:\"ddTP_S__choice\"+(isplaceholder ? \" isplaceholder\" : \"\"),\r\n                v:val,\r\n                id:selid,\r\n                iH:txt || val,\r\n                iTB: getiTB(params,ds)\r\n            });\r\n        if (!isplaceholder) {\r\n            var re = document.createElement('span');\r\n            re.className = \"ddTP_S__choice__remove\";\r\n            re.innerText = \"x\";\r\n            re.dataset.refid = selid;\r\n            li.appendChild(re);\r\n        }\r\n        return li;\r\n    },\r\n\r\n    /*\r\n    CLOSE THE OPENED GLOBAL CONTAINER\r\n    */\r\n    closeSelectModal = function() {\r\n        if (globRS.INFOCUS==undefined) return;\r\n\r\n        // CLOSE OPENED MODAL\r\n        var _ = window.ddTPcache[globRS.INFOCUS];\r\n        globRS.wrap.classList.remove('ddTP_C--open');\r\n        _.container.classList.remove('ddTP_C--open');\r\n        _.container.classList.remove('ddTP_C--focus');\r\n        if (globRS.liSearch!==null && globRS.liSearch!==undefined) globRS.liSearch.style.display=\"none\";\r\n        tpGS.gsap.set(globRS.wrap, {display: 'none'});\r\n\r\n        delete globRS.timeStamp;\r\n        delete globRS.INFOCUS;\r\n        delete globRS.highlighted;\r\n        removeGlobalListener();\r\n\r\n\r\n    },\r\n\r\n    // UPDATE POSITION OF DROPDOWN\r\n    updatePositionOfModal = function() {\r\n        if (globRS.timeStamp===undefined || globRS.INFOCUS===undefined || window.ddTPcache[globRS.INFOCUS]===undefined || window.ddTPcache[globRS.INFOCUS].container===undefined) return;\r\n\r\n        var rect = window.ddTPcache[globRS.INFOCUS].container.getBoundingClientRect();\r\n            tpGS.gsap.set(globRS.wrap,{\r\n                    x:(rect.left + globRS.drop.offsetWidth > window.innerWidth ? rect.left + ((window.innerWidth-25)-(rect.left + globRS.drop.offsetWidth)) : rect.left),\r\n                    y:(window.pageYOffset + rect.bottom + globRS.drop.offsetHeight > (window.pageYOffset + window.innerHeight - 50) ? window.pageYOffset + rect.top - globRS.drop.offsetHeight : rect.bottom+window.pageYOffset)});\r\n\r\n        requestAnimationFrame(function() {\r\n            updatePositionOfModal();\r\n        });\r\n\r\n    },\r\n\r\n    scrollIntoHighlitedPosition = function() {\r\n        if (globRS.highlighted!==undefined && globRS.highlighted!==null) {\r\n            if ((globRS.ul.scrollTop+50)>globRS.highlighted.offsetTop) globRS.ul.scrollTop = Math.max(0,globRS.highlighted.offsetTop-100);\r\n            else if ((globRS.ul.scrollTop-300)<globRS.highlighted.offsetTop) globRS.ul.scrollTop = globRS.highlighted.offsetTop-200;\r\n        }\r\n    },\r\n\r\n    addLi = function(_) {\r\n        var li = document.createElement('li');\r\n        if (_.group!==undefined) {\r\n            li.innerHTML = '<strong class=\"ddTP_R__group\">'+_.group+'</strong>';\r\n            return li;\r\n        }\r\n        if (_.c) li.className = _.c;\r\n        if (_.v) li.dataset.val = _.v;\r\n        if (_.iTB || _.iTA) li.innerHTML = (_.iTB===undefined ? \"\" : _.iTB) + (_.iT===undefined ? _.iH : _.iT) + (_.iTA===undefined ? \"\" : _.iTA);\r\n        else if (_.iT) li.innerText = _.iT;\r\n        else if (_.iH) li.innerHTML = _.iH;\r\n        if (_.id) li.dataset.refid = _.id;\r\n        if (_.optid!==undefined) li.dataset.optid = _.optid;\r\n        if (_.aS) li.ariaSelected = _.aS;\r\n        return li;\r\n    },\r\n\r\n    addLiHelper = function(s,i,p,id) {\r\n        return addLi({c:\"ddTP_RO\"+(globRS.highlighted===undefined && s.selected ? \" ddTP_RO--highlighted\" : \"\"),\r\n                        v:s.value, id:id, aS:s.selected,\r\n                        iT:s.text===undefined || s.text===\"\" ? s.value : s.text,\r\n                        iTB: getiTB(p, getPreData(p,s.dataset,s.value)),\r\n                        optid:i,\r\n                        group:s.tagName===\"OPTGROUP\" ? s.label : undefined\r\n                });\r\n    },\r\n\r\n    /*\r\n    OPEN GLOBAL SELECT BOX CONTAINER , DRAW AVAILABLE LIST ELEMENTS\r\n    */\r\n    openSelectModal = function(id,updateFakeValues) {\r\n        // OPEN MODAL\r\n        var _ = window.ddTPcache[id],\r\n            rect = _.container.getBoundingClientRect(),\r\n            frag = document.createDocumentFragment(),\r\n            sresult = \"\",\r\n            li;\r\n\r\n        _.params = _.params===undefined ? {} : _.params;\r\n        _.params.tags = _.sel.dataset.tags==\"true\" ? true : _.params.tags;\r\n        _.params.search =  _.params.search===undefined ? ((' '+_.sel.className).indexOf(' searchbox')>=0) : _.params.search;\r\n\r\n        globRS.highlighted = undefined;\r\n\r\n        if (!globRS.timeStamp) {\r\n            globRS.searchi.value=\"\";\r\n\r\n            requestAnimationFrame(function() {\r\n                globRS.searchi.focus();\r\n            });\r\n        }\r\n        //START GLOBAL LISTENER\r\n        addGlobalClickListner();\r\n\r\n        // UPDATE CLASSES\r\n        globRS.wrap.className = \"ddTP_C ddTP_C--default ddTP_C--open\" +(_.sel.dataset.theme!==undefined ? \" ddTP_C--\"+_.sel.dataset.theme : \"\");\r\n        _.container.classList.add('ddTP_C--open');\r\n        _.container.classList.add('ddTP_C--focus');\r\n\r\n        globRS.ul.ariaMultiselectable= _.sel.multiple;\r\n        globRS.searchw.style.display = _.sel.multiple || !_.params.search   ? \"none\" : \"block\";\r\n        globRS.INFOCUS = id;\r\n        globRS.ul.innerHTML = \"\";\r\n        globRS.searchi.dataset.refid = id;\r\n\r\n        // First Li should show the Search Result\r\n        if (_.params.search && _.params.searchValue!==undefined && _.params.searchValue!==\"\") sresult = (_.params.searchValue).toLowerCase();\r\n\r\n        if (_.sel.multiple && (_.params.search || _.params.tags) && globRS.liSearch!==null && globRS.liSearch!==undefined) globRS.liSearch.style.display=\"block\";\r\n\r\n\r\n        // ADD TO LIST THE SINGLE AVAILABLE VALUES\r\n        var optid=-1;\r\n        for (var i in _.sel.children) {\r\n            optid++;\r\n            if (!_.sel.children.hasOwnProperty(i) || (_.sel.children[i].tagName!==\"OPTION\" && _.sel.children[i].tagName!==\"OPTGROUP\") || _.sel.children[i].disabled || (_.sel.children[i].tagName===\"OPTION\" && sresult!==\"\" && ((_.sel.children[i].value).toLowerCase().indexOf(sresult)==-1 && (_.sel.children[i].textContent).toLowerCase().indexOf(sresult)==-1))) continue;\r\n            li =  addLiHelper(_.sel.children[i],optid,_.params,id);\r\n            // CREATE OPTGROUP, AND COLLECT CHILDREN\r\n            if (_.sel.children[i].tagName===\"OPTGROUP\") {\r\n                frag.appendChild(li);\r\n                optid--;\r\n                for (var j in _.sel.children[i].children) {\r\n                    optid++;\r\n                    if (!_.sel.children[i].children.hasOwnProperty(j) || _.sel.children[i].children[j].tagName!==\"OPTION\" || _.sel.children[i].children[j].disabled || (sresult!==\"\" && ((_.sel.children[i].children[j].value).toLowerCase().indexOf(sresult)==-1) && _.sel.children[i].children[j].textContent.toLowerCase().indexOf(sresult)==-1)) continue;\r\n                    li =  addLiHelper(_.sel.children[i].children[j],optid,_.params,id);\r\n                    if (globRS.highlighted===undefined && _.sel.children[i].selected) globRS.highlighted= li;\r\n                    frag.appendChild(li);\r\n                }\r\n            } else {\r\n                if (globRS.highlighted===undefined && _.sel.children[i].selected) globRS.highlighted= li;\r\n                frag.appendChild(li);\r\n            }\r\n        }\r\n\r\n        //IF NOTHING HIGLIGHTED, TAKE THE 1st ONE\r\n        if (globRS.highlighted===undefined && frag.childElementCount>0) {\r\n            globRS.highlighted = frag.firstElementChild;\r\n            scrollIntoHighlitedPosition();\r\n            globRS.highlighted.classList.add('ddTP_RO--highlighted');\r\n        }\r\n\r\n        globRS.ul.appendChild(frag);\r\n\r\n        tpGS.gsap.set(globRS.wrap, {display: 'block',left: 0,top: 0,position:\"absolute\",width:\"185px\"});\r\n\r\n        if (globRS.timeStamp===undefined) {\r\n            globRS.timeStamp = 2;\r\n            scrollIntoHighlitedPosition();\r\n            requestAnimationFrame(function() {\r\n                updatePositionOfModal();\r\n            });\r\n        }\r\n\r\n\r\n        //Update Fake Values in Rendered Container\r\n        if(updateFakeValues) {\r\n            setFakeValues(_.rendered,getValueTexts(_.sel,_.params));\r\n        }\r\n\r\n        //Set Search in Focus Again\r\n        if ((_.params.tags || _.params.search) && _.params.searchFocus) {\r\n            var s = _.sel.multiple ? _.rendered.getElementsByClassName('ddTP_SCH__field') : globRS.searchi;\r\n            if (s!==undefined && s!==null && s.length>0) requestAnimationFrame(function() {\r\n                s[0].focus();\r\n                if (_.params.cursorPosition!==0 && _.params.cursorPosition!==undefined) s[0].selectionStart = s[0].selectionEnd = _.params.cursorPosition;\r\n                _.params.cursorPosition = 0;\r\n            });\r\n\r\n        }\r\n    },\r\n\r\n    /*\r\n    REMOVE AN OPTION BY VALUE\r\n    */\r\n    removeOptionByValue = function(_) {\r\n        if (_.sel==undefined || _.sel.options==undefined) return;\r\n        var rem;\r\n        for (var i in _.sel.options) if (!_.sel.options.hasOwnProperty(i) || rem) continue; else rem = _.sel.options[i].value == _.value ? _.sel.options[i] : rem;\r\n        if (rem!==undefined) _.sel.removeChild(rem);\r\n    },\r\n\r\n    /*\r\n    REMOVE AN OPTION BY VALUE\r\n    */\r\n    unselectOptionByValue = function(_) {\r\n        if (_.sel==undefined || _.sel.options==undefined) return;\r\n        var rem;\r\n        for (var i in _.sel.options) if (!_.sel.options.hasOwnProperty(i) || rem) continue; else rem = _.sel.options[i].value == _.value ? _.sel.options[i] : rem;\r\n        if (rem!==undefined) rem.selected=false;\r\n    },\r\n\r\n    updateModal = function(id) {\r\n        requestAnimationFrame(function() {\r\n            openSelectModal(id,true);\r\n        });\r\n    },\r\n\r\n    globalClickFunction = function(evt) {\r\n        if (globRS.INFOCUS===undefined) return;\r\n        if (evt.target.className.indexOf('ddTP')===-1) closeSelectModal();\r\n    },\r\n\r\n    getGlobRSHighlighted = function() {\r\n        globRS.highlighted = document.getElementsByClassName('ddTP_RO--highlighted');\r\n        globRS.highlighted = globRS.highlighted===null || globRS.highlighted===undefined || globRS.highlighted.length===0 ? undefined : globRS.highlighted[0];\r\n    },\r\n\r\n    setPrevNextHighlight = function(direction) {\r\n        getGlobRSHighlighted();\r\n        if (globRS.highlighted!==undefined && globRS.highlighted[direction]!==null && globRS.highlighted[direction]!==undefined) {\r\n            globRS.highlighted.classList.remove('ddTP_RO--highlighted');\r\n            globRS.highlighted = globRS.highlighted[direction];\r\n            globRS.highlighted.classList.add('ddTP_RO--highlighted');\r\n            scrollIntoHighlitedPosition();\r\n        }\r\n    },\r\n\r\n    globalUpDownMover = function(evt) {\r\n        if (globRS.INFOCUS===undefined || globRS.highlighted===undefined) return;\r\n        var key = (evt.which || evt.keyCode);\r\n        if (key===KEYS.UP || key===KEYS.DOWN) {\r\n            if (ddTPcache[globRS.INFOCUS].sel.multiple) {\r\n                if (globRS.liSearch!==null && globRS.liSearch!==undefined) globRS.liSearch.blur();\r\n            } else {\r\n                globRS.searchi.blur();\r\n            }\r\n            setPrevNextHighlight(key===KEYS.UP ? 'previousElementSibling' : 'nextElementSibling');\r\n            evt.preventDefault();\r\n            return false;\r\n        } else if (key===KEYS.ENTER  && !ddTPcache[globRS.INFOCUS].params.tags) {\r\n            getGlobRSHighlighted();\r\n            if (globRS.highlighted!==undefined) selectOption(globRS.highlighted);\r\n            evt.preventDefault();\r\n            return false;\r\n        }\r\n    },\r\n\r\n    removeGlobalListener = function() {\r\n        document.body.removeEventListener('click',globalClickFunction);\r\n        document.body.removeEventListener('keydown',globalUpDownMover);\r\n        globRS.GLOBALLISTENER = undefined;\r\n    },\r\n\r\n    addGlobalClickListner = function() {\r\n        // GLOBAL LISTENER, CLICK ON SOMETHING\r\n        if (globRS.GLOBALLISTENER) return;\r\n        document.body.addEventListener('click',globalClickFunction);\r\n        document.body.addEventListener('keydown',globalUpDownMover);\r\n\r\n        globRS.GLOBALLISTENER = true;\r\n    },\r\n\r\n    /*\r\n    CREATE LISTENERS ON GLOBAL LEVEL\r\n    */\r\n    buildListeners = function() {\r\n        listeners = true;\r\n        createGlobalElement();\r\n\r\n        DOC.on('click','.ddTP_C.ddTP-fake',function() {\r\n            if (globRS.INFOCUS===this.dataset.refid && !ddTPcache[this.dataset.refid].params.tags && !ddTPcache[this.dataset.refid].multiple) {\r\n                closeSelectModal();\r\n            } else {\r\n                ddTPcache[this.dataset.refid].params.searchFocus = true;\r\n                openSelectModal(this.dataset.refid);\r\n            }\r\n        });\r\n\r\n        DOC.on('mouseenter','.ddTP_RO',function() {\r\n            this.classList.add('ddTP_RO--highlighted');\r\n        });\r\n\r\n        DOC.on('mouseleave','.ddTP_RO',function() {\r\n            this.classList.remove('ddTP_RO--highlighted');\r\n        });\r\n\r\n        DOC.on('click','.ddTP_S__choice__remove',function() {\r\n            var _ = ddTPcache[this.dataset.refid];\r\n            if (_.params.tags) {\r\n                removeOptionByValue({sel:_.sel,value:this.parentNode.dataset.val});\r\n                this.parentNode.parentNode.removeChild(this.parentNode);\r\n                _.params.searchValue = \"\";\r\n                _.params.searchFocus = false;\r\n            } else {\r\n                unselectOptionByValue({sel:_.sel,value:this.parentNode.dataset.val});\r\n                _.params.searchValue = \"\";\r\n                _.params.searchFocus = false;\r\n            }\r\n            _.sel.dispatchEvent(new Event('change', { 'bubbles': true }));\r\n            jQuery(_.sel).trigger('ddTP:unselect');\r\n            updateModal(this.dataset.refid);\r\n            return false;\r\n        });\r\n\r\n\r\n\r\n        DOC.on('keydown','.ddTP_SCH__field',function(evt) {\r\n\r\n            var key = evt.which || evt.keyCode,\r\n                REFID = this.dataset.refid,\r\n                _ = ddTPcache[REFID];\r\n\r\n           if (key===KEYS.UP || key===KEYS.DOWN) {\r\n                setPrevNextHighlight(key===KEYS.UP ? 'previousElementSibling' : 'nextElementSibling');\r\n                evt.preventDefault();\r\n                return false;\r\n            }\r\n\r\n            if (key===KEYS.TAB) {\r\n                closeSelectModal();\r\n                return;\r\n            }\r\n\r\n\r\n            // On Tags create tag on demand\r\n            if (_.params.tags) {\r\n                // Get Last Option in the list\r\n                if (_.params.tags && key === KEYS.BACKSPACE && this.value===\"\") {\r\n                    var prev = this.parentNode.previousElementSibling;\r\n                    if (prev!==null && prev!==undefined && prev.tagName===\"LI\" && prev.dataset.val!==undefined) {\r\n                        _.params.searchValue = prev.dataset.val;\r\n                        _.params.searchFocus = true;\r\n                        removeOptionByValue({sel:_.sel,value:_.params.searchValue});\r\n                        jQuery(_.sel).trigger('ddTP:unselect');\r\n                    }\r\n                } else\r\n                if (this.value.length>1 && (jQuery.inArray(String.fromCharCode(key),_.params.tokenSeparators)>=0 || jQuery.inArray(evt.key,_.params.tokenSeparators)>=0) || key===KEYS.ENTER) {\r\n                    var option = document.createElement('option');\r\n                    option.value = this.value;\r\n                    option.innerHTML = this.value;\r\n                    option.dataset.refid = REFID;\r\n                    option.selected = true;\r\n                    _.sel.appendChild(option);\r\n                    if (_.sel.multiple) this.parentNode.parentNode.insertBefore(createResultLi(this.value,undefined,_.sel.id,undefined),this.parentNode);\r\n                    this.value=\"\";\r\n                    _.params.searchValue = \"\";\r\n                    _.params.searchFocus = true;\r\n                    _.params.cursorPosition = 0;\r\n                    if (!_.sel.multpile) option.ariaSelected = true;\r\n                    jQuery(_.sel).trigger('ddTP:select');\r\n                    if (!_.sel.multpile) {\r\n\r\n                        setFakeValues(_.rendered,getValueTexts(_.sel,_.params));\r\n                         _.sel.dispatchEvent(new Event('change', { 'bubbles': true }));\r\n                         closeSelectModal();\r\n                    }\r\n\r\n                }\r\n\r\n            } else {\r\n                if (_.sel.multiple && _.params.search) updateSW(this);\r\n            }\r\n        });\r\n\r\n        DOC.on('keyup','.ddTP_SCH__field',function(evt) {\r\n            var key = evt.which || evt.keyCode;\r\n\r\n            if (key===KEYS.LEFT || key===KEYS.RIGHT || key===KEYS.SHIFT || key==KEYS.ALT || key==KEYS.CTRL || key==KEYS.CMD || key==KEYS.CMDL || key==KEYS.CMDR) return;\r\n\r\n            var _ = ddTPcache[this.dataset.refid];\r\n            _.params.searchValue = this.value;\r\n            _.params.searchFocus = true;\r\n            _.params.cursorPosition = this.selectionStart;\r\n            openSelectModal(this.dataset.refid,true);\r\n            //updateModal();\r\n        });\r\n\r\n\r\n        DOC.on('click','.ddTP_RO',function() {\r\n           selectOption(this);\r\n        });\r\n\r\n\r\n    },\r\n\r\n    selectOption  = function(option) {\r\n         var _ = ddTPcache[option.dataset.refid];\r\n        if (!_.sel.multiple) {\r\n            _.sel.value = option.dataset.val;\r\n            closeSelectModal();\r\n        } else {\r\n            option.ariaSelected= option.ariaSelected==true || option.ariaSelected==\"true\" ? false : true;\r\n            _.sel.options[option.dataset.optid].selected = option.ariaSelected==true || option.ariaSelected==\"true\" ? true : false;\r\n            _.params.searchValue = \"\";\r\n            _.params.searchFocus = false;\r\n             jQuery(_.sel).trigger('ddTP:select');\r\n        }\r\n\r\n        setFakeValues(_.rendered,getValueTexts(_.sel,_.params));\r\n        _.sel.dispatchEvent(new Event('change', { 'bubbles': true }));\r\n        if (_.sel.multiple) updateModal(option.dataset.refid);\r\n    },\r\n\r\n    /* USEFULL THINGS */\r\n    insertAfter = function(newNode, referenceNode) {\r\n        if (referenceNode!==null && newNode!==undefined && referenceNode.parentNode!==null) referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\r\n    },\r\n\r\n    updateSW = function(search) {\r\n        tpGS.gsap.set(search,{width:((search.value.length+1) * 0.75) + 'em'});\r\n\r\n    }\r\n\r\n\r\n})(jQuery);","Nwdthemes_Revslider/admin/assets/js/modules/layeractions.js":"/*!\r\n * REVOLUTION 6.0.0 EDITOR LAYERACTION JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\n;RVS.LIB.ACTION_WITH_TRGT = [];\r\nRVS.LIB.ACTIONTYPES = {};\r\n\r\n(function() {\r\n\tvar xmn = [\"X\",\"M\",\"N\"];\r\n\r\n\r\n\t/*\r\n\tINITIALISE THE BASIC LISTENERS, INPUT MANAGEMENTS ETC\r\n\t*/\r\n\tRVS.F.initLayerActions = function() {\r\n\t\tinitActions();\r\n\t\tinitLocalInputBoxes();\r\n\t\tinitLocalListeners();\r\n\t};\r\n\r\n\r\n\t/*\r\n\tLAYER ACTIONS\r\n\t*/\r\n\tRVS.F.openLayerActions = function() {\r\n\t\tif (RVS.selLayers.length>0) {\r\n\t\t\tRVS.S.actionIdx=undefined;\r\n\t\t\tjQuery('#no_action_selected').show();\r\n\t\t\tjQuery('#action_inputs, .la_settings').hide();\r\n\r\n\t\t\tRVS.F.initActionsOfLayers();\r\n\t\t\tRVS.F.RSDialog.create({modalid:'rbm_layer_action', bgopacity:0.5});\r\n\r\n\r\n\t\t} else {\r\n\t\t\tRVS.F.showInfo({content:RVS_LANG.noLayersSelected, type:\"warning\", showdelay:0, hidedelay:3, hideon:\"\", event:\"\" });\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tSELECT LAYER ACTION\r\n\t*/\r\n\tRVS.F.selectLayerAction = function() {\r\n\t\tjQuery('.actionselected').removeClass(\"actionselected\");\r\n\t\tif (RVS.S.actionIdx===undefined || RVS.S.actionIdx<0 || RVS.L[RVS.selLayers[0]].actions.action.length==0) {\r\n\t\t\tjQuery('#action_inputs, .la_settings').hide();\r\n\t\t\tjQuery('#no_action_selected').show();\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\r\n\t\t\tjQuery('#action_inputs').show();\r\n\t\t\tjQuery('.la_settings, #no_action_selected').hide();\r\n\r\n\t\t\tif (RVS.LIB.ACTIONTYPES[RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action]!==undefined)\r\n\t\t\t\tjQuery(RVS.LIB.ACTIONTYPES[RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action].inputs).show();\r\n\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].layer_target!==undefined)\r\n\t\t\t\tRVS.S.actionTrgtLayerId = RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].layer_target || \"none\";\r\n\r\n\t\t\tif (jQuery.inArray(RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action,[\"scroll_under\",\"scrollto\"])>=0) {\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action_easing===undefined) RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action_easing=\"power1.inOut\";\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action_speed===undefined) RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action_speed=\"1000ms\";\r\n\t\t\t}\r\n\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action===\"link\") {\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].type===\"column\" || RVS.L[RVS.selLayers[0]].type===\"row\" || RVS.L[RVS.selLayers[0]].type===\"group\") RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].link_type=\"jquery\";\r\n\t\t\t\telse\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].link_type===undefined) RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].link_type=\"a\";\r\n\t\t\t}\r\n\t\t\tif (jQuery.inArray(RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action,[\"start_in\",\"start_out\",\"start_frame\",\"next_frame\",\"prev_frame\",\"toggle_layer\",\"toggle_frames\"])>=0)\r\n\t\t\t\tif (RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].updateChildren===undefined) RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].updateChildren=true;\r\n\r\n\t\t\tif (RVS.S.actionTrgtLayerId!==undefined) {\r\n\t\t\t\tvar LREF;\r\n\t\t\t\t//FIND THE CORRECT TARGET IN STATIC OR NORMAL LAYERS\r\n\t\t\t\tif ((\"\"+RVS.S.actionTrgtLayerId).indexOf(\"static-\")>=0 && RVS.SLIDER.staticSlideId!==undefined && RVS.SLIDER[RVS.SLIDER.staticSlideId]!==undefined && RVS.SLIDER[RVS.SLIDER.staticSlideId].layers!==undefined)\r\n\t\t\t\t\t LREF = RVS.SLIDER[RVS.SLIDER.staticSlideId].layers[(\"\"+RVS.S.actionTrgtLayerId).replace(\"static-\",\"\")];\r\n\t\t\t\telse if (RVS.L[RVS.S.actionTrgtLayerId]!==undefined) {\r\n\t\t\t\t\tLREF = RVS.L[RVS.S.actionTrgtLayerId];\r\n\t\t\t\t\tRVS.H[RVS.S.actionTrgtLayerId].w.addClass(\"actionselected\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (LREF !==undefined) {\r\n\t\t\t\t\tRVS.F.checkToggleLayerType(RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx], LREF,2);\r\n\t\t\t\t\tjQuery('#overtake_frame_1_control')[0].checked = LREF.timeline.frames.frame_1.timeline.actionTriggered;\r\n\t\t\t\t\tjQuery('#overtake_frame_999_control')[0].checked = LREF.timeline.frames.frame_999.timeline.actionTriggered;\r\n\t\t\t\t\tRVS.F.turnOnOffVisUpdate({input:document.getElementById('overtake_frame_1_control')});\r\n\t\t\t\t\tRVS.F.turnOnOffVisUpdate({input:document.getElementById('overtake_frame_999_control')});\r\n\t\t\t\t\tjQuery('#la_triggerMemory').val(LREF.actions.triggerMemory).ddTP('change');\r\n\t\t\t\t\tRVS.F.updatePlayFrameXOnlyOnAction(null,\"X\");\r\n\t\t\t\t\tRVS.F.updatePlayFrameXOnlyOnAction(null,\"N\");\r\n\t\t\t\t\tRVS.F.updatePlayFrameXOnlyOnAction(null,\"M\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('#rbm_layer_action'), path:RVS.S.slideId+\".layers.\"+RVS.selLayers[0]+\".\", trigger:\"init\"});\r\n\t\t\tRVS.F.upadteLayerTargetDropDowns({action:RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action, targetid:RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].layer_target});\r\n\t\t\tRVS.F.updateSlideList({action:RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action, targetid:RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].jump_to_slide});\r\n\t\t\tRVS.F.updateLinkTypes({action:RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action, linktype:RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].link_type});\r\n\r\n\t\t\tjQuery('#layer_action_fake').html(RVS.LIB.ACTIONTYPES[RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action].name);\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.updateReferencigToggleLayerType = function() {\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif (RVS.L[i].actions && RVS.L[i].actions.action.length>0)\r\n\t\t\t\tfor (var j in RVS.L[i].actions.action) {\r\n\t\t\t\t\tif (!RVS.L[i].actions.action.hasOwnProperty(j)) continue;\r\n\t\t\t\t\tvar action = RVS.L[i].actions.action[j];\r\n\t\t\t\t\tif (action.action===\"toggle_layer\")\t{\r\n\t\t\t\t\t\t//FIND THE CORRECT TARGET IN STATIC OR NORMAL LAYERS\r\n\t\t\t\t\t\tif ((\"\"+action.layer_target).indexOf(\"static-\")>=0 && RVS.SLIDER.staticSlideId!==undefined && RVS.SLIDER[RVS.SLIDER.staticSlideId]!==undefined && RVS.SLIDER[RVS.SLIDER.staticSlideId].layers!==undefined)\r\n\t\t\t\t\t\t\tRVS.F.checkToggleLayerType(action, (RVS.SLIDER[RVS.SLIDER.staticSlideId].layers[(\"\"+action.layer_target).replace(\"static-\",\"\")]), 1);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\tif (RVS.L[action.layer_target]!==undefined) RVS.F.checkToggleLayerType(action, RVS.L[action.layer_target], 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.checkToggleLayerType = function(action, LREF, how) {\r\n\t\tif (LREF!==undefined && action.action===\"toggle_layer\") {\r\n\t\t\t//On Select read the current actionTriggered Type. If Exists use it, if not. set it.\r\n\t\t\tif (LREF.timeline.frames.frame_1.timeline.actionTriggered!==undefined && how==1) {\r\n\t\t\t\taction.toggle_layer_type = LREF.timeline.frames.frame_1.timeline.actionTriggered ? \"hidden\" : \"visible\";\r\n\t\t\t} else if (action.toggle_layer_type===\"visible\")\r\n\t\t\t\tLREF.timeline.frames.frame_1.timeline.actionTriggered = false;\r\n\t\t\telse\r\n\t\t\t\tLREF.timeline.frames.frame_1.timeline.actionTriggered = true;\r\n\t\t\tLREF.timeline.frames.frame_999.timeline.actionTriggered = true;\r\n\t\t}\r\n\t\treturn action;\r\n\t}\r\n\r\n\r\n\r\n\t/*\r\n\tCHECK IF A LAYER FRAME IS TRIGGERED BY ANY OTHER LAYER\r\n\t*/\r\n\tRVS.F.layerFrameTriggered = function(_) {\r\n\t\tvar uid = parseInt(_.layerid,0);\r\n\t\treturn RVS.L[uid].timeline.frames[_.frame].timeline.actionTriggered;\r\n\t};\r\n\r\n\tfunction layerFrameTriggeredBy_subrutine_a(isstatic,trgt,uid,DS_RND) {\r\n\t\treturn (isstatic && trgt===\"static-\"+uid) || (isstatic && RVS.SLIDER.slideIDs[DS_RND]===RVS.S.slideId && parseInt(trgt,0) === parseInt(uid,0)) || (!isstatic && parseInt(trgt,0) === parseInt(uid,0));\r\n\t}\r\n\tfunction layerFrameTriggeredBy_subrutine_b(a,frame) {\r\n\r\n\t\treturn ((a.action===\"start_in\" && (frame===\"any\" || frame===\"frame_1\")) ||\r\n\t\t\t\t(a.action===\"start_out\" && (frame===\"any\" || frame===\"frame_999\"))  ||\r\n\t\t\t\t(a.action===\"toggle_layer\" && (frame===\"any\" || frame===\"frame_1\" || frame===\"frame_999\")) ||\r\n\t\t\t\t(a.action===\"toggle_frames\" && (frame===\"any\" || a.gotoframeM===frame || a.gotoframeN===frame)) ||\r\n\t\t\t\t(a.action===\"start_frame\" && (frame===\"any\" || a.gotoframe===frame)))\r\n\t}\r\n\r\n\tRVS.F.layerFrameTriggeredBy = function(o) {\r\n\t\tvar uid = parseInt(o.layerid,0),\r\n\t\t\ttriggeredby = [],\r\n\t\t\tisstatic = (\"\"+RVS.S.slideId).indexOf(\"static\")>=0,\r\n\t\t\tDS_RND = o.src==undefined &&  isstatic ? RVS.SLIDER.slideIDs.length-1 : -1,\r\n\t\t\tDS_DONE = false;\r\n\r\n\t\twhile (!DS_DONE) {\r\n\t\t\tvar layers = o.src===undefined ? DS_RND===-1 ? RVS.L : RVS.SLIDER[RVS.SLIDER.slideIDs[DS_RND]].layers : o.src;\r\n\t\t\tfor (var i in layers) {\r\n\t\t\t\tif ((o.all===undefined && triggeredby.length>0) || !layers.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (layers[i].actions !==undefined) {\r\n\t\t\t\t\t//ACTIVE CHECKS\r\n\t\t\t\t\tfor (var j in layers[i].actions.action)\t{\r\n\t\t\t\t\t\tif((o.all===undefined && triggeredby.length>0) || !layers[i].actions.action.hasOwnProperty(j) || layers[i].actions.action[j].layer_target===undefined || layers[i].actions.action[j].ajaxSettings!==undefined || layers[i].actions.action[j].fn!==undefined || layers[i].actions.action[j].guid!==undefined || layers[i].actions.action[j].lastModified!==undefined) continue;\r\n\t\t\t\t\t\tif (layerFrameTriggeredBy_subrutine_a(isstatic,layers[i].actions.action[j].layer_target,uid,DS_RND) && layerFrameTriggeredBy_subrutine_b(layers[i].actions.action[j],o.frame)) triggeredby.push({icon:RVS.F.getLayerIcon(layers[i].linebreak ? 'linebreak' : layers[i].type,layers[i].subtype), action:layers[i].actions.action[j].action,  uid : parseInt(layers[i].uid,0), alias:layers[i].alias, slide:o.src===undefined &&  DS_RND!==-1 ? RVS.SLIDER.slideIDs[DS_RND] : RVS.S.slideId});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// INACTIVE CHECKS\r\n\t\t\t\t\tif (layers[i].actions.inactive_actions!==undefined)\r\n\t\t\t\t\tfor (var j in layers[i].actions.inactive_actions)\t{\r\n\t\t\t\t\t\tif((o.all===undefined && triggeredby.length>0) || !layers[i].actions.inactive_actions.hasOwnProperty(j) || layers[i].actions.inactive_actions[j].layer_target===undefined || layers[i].actions.inactive_actions[j].ajaxSettings!==undefined || layers[i].actions.inactive_actions[j].fn!==undefined || layers[i].actions.inactive_actions[j].guid!==undefined || layers[i].actions.inactive_actions[j].lastModified!==undefined) continue;\r\n\t\t\t\t\t\tif (layerFrameTriggeredBy_subrutine_a(isstatic,layers[i].actions.inactive_actions[j].layer_target,uid,DS_RND) && layerFrameTriggeredBy_subrutine_b(layers[i].actions.inactive_actions[j],o.frame)) triggeredby.push({icon:RVS.F.getLayerIcon(layers[i].linebreak ? 'linebreak' : layers[i].type,layers[i].subtype), action:layers[i].actions.inactive_actions[j].action,  uid : parseInt(layers[i].uid,0), alias:layers[i].alias, slide:o.src===undefined &&  DS_RND!==-1 ? RVS.SLIDER.slideIDs[DS_RND] : RVS.S.slideId});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tDS_RND--;\r\n\t\t\tDS_DONE = DS_RND<0;\r\n\t\t}\r\n\r\n\t\tif (triggeredby.length===0) triggeredby.push({uid:\"\", alias:\"\"})\r\n\r\n\t\tif (o.all)\r\n\t\t\treturn triggeredby;\r\n\t\telse\r\n\t\t\treturn triggeredby[0];\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.updateLayerToggleActionWaits = function() {\r\n\t\tvar _GL = RVS.SLIDER.staticSlideId!==undefined && RVS.SLIDER[RVS.SLIDER.staticSlideId]!==undefined ? RVS.SLIDER[RVS.SLIDER.staticSlideId].layers : undefined;\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.L[i].actions !==undefined) {\r\n\t\t\t\tfor (var j in RVS.L[i].actions.action)\t{\r\n\t\t\t\t\tif(!RVS.L[i].actions.action.hasOwnProperty(j)) continue;\r\n\t\t\t\t\tif (RVS.L[i].actions.action[j].layer_target!==undefined && RVS.L[i].actions.action[j].action===\"toggle_layer\") {\r\n\t\t\t\t\t\tvar tgt = RVS.L[i].actions.action[j].layer_target,\r\n\t\t\t\t\t\t\tstatic = _GL!==undefined && (\"\"+tgt).indexOf(\"static-\")>=0;\r\n\t\t\t\t\t\ttgt = static ? tgt.replace(\"static-\",\"\") : tgt;\r\n\t\t\t\t\t\tif ((static && _GL[tgt]!== undefined) || (!static &&RVS.L[tgt]!==undefined)) {\r\n\t\t\t\t\t\t\tvar res = !(RVS.L[i].actions.action[j].toggle_layer_type===\"visible\");\r\n\t\t\t\t\t\t\tif (static) {\r\n\t\t\t\t\t\t\t\t_GL[tgt].timeline.frames.frame_1.timeline.actionTriggered = res;\r\n\t\t\t\t\t\t\t\t_GL[tgt].timeline.frames.frame_999.timeline.actionTriggered = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tRVS.L[tgt].timeline.frames.frame_1.timeline.actionTriggered = res;\r\n\t\t\t\t\t\t\t\tRVS.L[tgt].timeline.frames.frame_999.timeline.actionTriggered = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.F.updateAllLayerFrames();\r\n\t}\r\n\r\n\r\n\t/*\r\n\tBUILD LAYER ACTION LIST AND DEPENDENCIES\r\n\t*/\r\n\tRVS.F.initActionsOfLayers = function() {\r\n\t\tvar l = RVS.L[RVS.selLayers[0]],\r\n\t\t\tldw = jQuery('#layer_depending_wrap'),\r\n\t\t\tdepends = RVS.F.layerFrameTriggeredBy({all:true,layerid:RVS.selLayers[0],frame:\"any\"}),\r\n\t\t\theader = '<i class=\"lwa_icon material-icons\">'+RVS.F.getLayerIcon(l.linebreak ? 'linebreak' : l.type,l.subtype)+'</i><span class=\"lwa_layername\">'+l.alias+'</span>';\r\n\r\n\t\tldw[0].innerHTML = \"\";\r\n\r\n\t\tjQuery('#layer_with_action_wrap').removeClass(\"opendeps\");\r\n\r\n\t\tif (depends.length>0) header += '<span class=\"drop_dependencies\">'+RVS_LANG.triggeredby+'<i class=\"material-icons\">arrow_drop_up</i></span>';\r\n\r\n\t\tfor (var i in depends) {\r\n\t\t\tif(!depends.hasOwnProperty(i)) continue;\r\n\t\t\tif (depends[i].uid!==undefined && depends[i].action!==undefined)\r\n\t\t\t\tldw.append('<li data-id=\"'+depends[i].uid+'\" class=\"layer_depending_on\"><i class=\"material-icons ldo_icon\">'+depends[i].icon+'</i><span class=\"ldo_layername\">'+depends[i].alias+(depends[i].slide!==RVS.S.slideId ? \" (\"+depends[i].slide+\")\" : \"\")+'</span><span class=\"ldo_actionname\">'+RVS_LANG[\"layeraction_\"+depends[i].action]+'</span></li>');\r\n\t\t}\r\n\t\tdocument.getElementById('add_action_to_layername').innerHTML = l.alias;\r\n\t\tdocument.getElementById('layer_with_action').innerHTML = header;\r\n\t\tRVS.F.updateEasyInputs({container:jQuery('#layer_width_action_inner_wrap'), path:RVS.S.slideId+\".layers.\"+RVS.selLayers[0]+\".\", trigger:\"init\"});\r\n\t\tjQuery('#rbm_layer_action .tos2, #rbm_layer_action .slideinput, #rbm_layer_action .sliderinput').trigger('init');\r\n\t\tRVS.F.buildActionList();\r\n\t};\r\n\r\n\r\n\r\n\t// Update The Action Relations on all Triggering Layers based on the current Layer Id\r\n\tRVS.F.updateTriggeringActionRelations = function(lid) {\r\n\t\tvar dependson = RVS.F.layerFrameTriggeredBy({all:true,layerid:lid,frame:\"any\"});\r\n\t\tfor (var i in dependson) {\r\n\t\t\tif (!dependson.hasOwnProperty(i)) continue;\r\n\t\t\tif (dependson[i].uid!==undefined && dependson[i].action!==undefined)\r\n\t\t\t \tRVS.F.checkActionRelations(dependson[i].uid);\r\n\t\t}\r\n\t}\r\n\r\n\t//Update the Action Lists in the Layer (with LID Layer ID) to set unneeded actions Inactive\r\n\tRVS.F.checkActionRelations = function(lid) {\r\n\t\tvar l = RVS.L[lid];\r\n\t\tif(l === undefined) return;\r\n\t\tl.actions.inactive_actions = l.actions.inactive_actions || [];\r\n\t\tvar\tmerge = [...l.actions.action,...l.actions.inactive_actions],\r\n\t\t\tactive=[],inactive=[];\r\n\t\tfor (var i in merge) {\r\n\t\t\tif(!merge.hasOwnProperty(i)) continue;\r\n\t\t\tif (merge[i].layer_target===\"backgroundvideo\" || merge[i].layer_target===\"firstvideo\") if (merge[i].action===\"toggle_layer\") merge[i].action=\"toggle_video\";\r\n\t\t\tvar targetlayer = getActionTarget(merge[i]),\r\n\t\t\t\tignore = false;\r\n\t\t\tif (targetlayer.targetid!=-1) {\r\n\t\t\t\tif ((RVS.SLIDER[targetlayer.slideid].layers[targetlayer.targetid]!==undefined) || (merge[i].layer_target===\"backgroundvideo\" || merge[i].layer_target===\"firstvideo\")) {\r\n\t\t\t\t\t// KEEP IT\r\n\t\t\t\t} else ignore = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (!ignore) active.push(merge[i]); else inactive.push(merge[i]);\r\n\t\t}\r\n\t\tl.actions.action = active.slice(0);\r\n\t\tl.actions.inactive_actions = inactive.slice(0);\r\n\r\n\t}\r\n\r\n\tRVS.F.buildActionList = function() {\r\n\t\tvar sla = jQuery('#selected_layer_actions'),\r\n\t\t\tl = RVS.L[RVS.selLayers[0]],\r\n\t\t\tnewlist=[];\r\n\r\n\t\tRVS.F.checkActionRelations(RVS.selLayers[0]);\r\n\t\tjQuery('.actionDependent').removeClass(\"actionDependent\");\r\n\t\tjQuery('.actionselected').removeClass(\"actionselected\");\r\n\t\t// BUILD ACTION LIST\r\n\t\tsla[0].innerHTML = \"\";\r\n\t\tfor (var i in l.actions.action) {\r\n\t\t\tif(!l.actions.action.hasOwnProperty(i)) continue;\r\n\t\t\tvar li =  '<li class=\"single_layer_action '+(i==RVS.S.actionIdx ? \"selected\" : \"\")+'\">',\r\n\t\t\t\ttargetlayer = getActionTarget(l.actions.action[i]);\r\n\r\n\t\t\tif (targetlayer.targetid!=-1) {\r\n\t\t\t\tif (RVS.SLIDER[targetlayer.slideid].layers[targetlayer.targetid]!==undefined) {\r\n\t\t\t\t\tvar static = targetlayer.slideid.indexOf('static') >= 0;\r\n\t\t\t\t\tli += '<i class=\"sla_icon material-icons\">'+RVS.F.getLayerIcon(RVS.SLIDER[targetlayer.slideid].layers[targetlayer.targetid].linebreak ? 'linebreak' : RVS.SLIDER[targetlayer.slideid].layers[targetlayer.targetid].type,RVS.SLIDER[targetlayer.slideid].layers[targetlayer.targetid].subtype)+'</i><span class=\"sla_layername\">'+RVS.SLIDER[targetlayer.slideid].layers[targetlayer.targetid].alias+(static ? '(S)':'') + '</span>';\r\n\t\t\t\t\tif (!static) RVS.H[targetlayer.targetid].w.addClass(\"actionDependent\");\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\tif (l.actions.action[i].layer_target===\"backgroundvideo\" || l.actions.action[i].layer_target===\"firstvideo\")\r\n\t\t\t\t\tli += '<i class=\"sla_icon material-icons\">videocam</i><span class=\"sla_layername\">'+RVS_LANG[l.actions.action[i].layer_target]+'</span>';\r\n\t\t\t\telse\r\n\t\t\t\t\tli += '<i class=\"sla_icon material-icons\">error_outline</i><span class=\"sla_layername\">'+RVS_LANG.noLayersSelected+'</span>';\r\n\t\t\t} else\r\n\t\t\tif (RVS.LIB.ACTIONTYPES[l.actions.action[i].action]!==undefined)\r\n\t\t\t\tli += '<i class=\"sla_icon material-icons\">'+RVS.LIB.ACTIONTYPES[l.actions.action[i].action].icon+'</i><span class=\"sla_layername\"></span>';\r\n\t\t\telse\r\n\t\t\t\tli += '<i class=\"sla_icon material-icons\">extension</i><span class=\"sla_layername\"></span>';\r\n\r\n\t\t\tif (RVS.LIB.ACTIONTYPES[l.actions.action[i].action]!==undefined && RVS_LANG[\"layeraction_\"+l.actions.action[i].action]!==undefined)\r\n\t\t\t\tli += '<span class=\"sla_actionname\">'+RVS_LANG[\"layeraction_\"+l.actions.action[i].action]+'</span>';\r\n\t\t\telse\r\n\t\t\t\tli += '<span class=\"sla_actionname\">'+l.actions.action[i].action+'</span>';\r\n\r\n\t\t\tli += '<div class=\"single_layer_toolbar\"><i class=\"material-icons duplicate_single_layer_action\">content_copy</i><i class=\"material-icons delete_single_layer_action\">delete_forever</i></div>';\r\n\t\t\tli += '</li>';\r\n\t\t\tsla.append(li);\r\n\r\n \t\t}\r\n \t\t//LAYER HAS NO ACTION YET\r\n \t\tif (l.actions.action.length===0) {\r\n \t\t\tjQuery('#layeraction_list').show();\r\n \t\t\tjQuery('#selected_layer_actions').hide();\r\n \t\t\tjQuery('#addactiontolayer').hide();\r\n \t\t} else {\r\n \t\t\tjQuery('#layeraction_list').hide();\r\n \t\t\tjQuery('#selected_layer_actions').show();\r\n \t\t\tjQuery('#addactiontolayer').show();\r\n \t\t}\r\n \t\tupdateActionScrollbars();\r\n\t};\r\n\r\n\tfunction getSliderIdFromAlias(alias) {\r\n\t\tvar found = false;\r\n\t\tfor (var i in RVS.LIB.SLIDERS) if (RVS.LIB.SLIDERS.hasOwnProperty(i)) {\r\n\t\t\tif (found!==false) continue;\r\n\t\t\tif (RVS.LIB.SLIDERS[i].alias===alias) found = RVS.LIB.SLIDERS[i].id;\r\n\t\t}\r\n\t\treturn found;\r\n\t}\r\n\r\n\t/*\r\n\tUPDATE THE LIST OF SLIDES AFTER SELECTING MODAL MODULE\r\n\t */\r\n\tRVS.F.refreshModalSlides = function() {\r\n\r\n\t\tif(RVS.L[RVS.selLayers[0]].actions.action.length) {\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action==\"open_modal\" && RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].openmodal!==undefined) {\r\n\t\t\t\tvar sid = getSliderIdFromAlias(RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].openmodal);\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].openmodalId = sid;\r\n\t\t\t\tif (sid===false) return;\r\n\t\t\t\tvar op = '';\r\n\t\t\t\tRVS.F.ajaxRequest('get_slides_by_slider_id',{id:sid},function(response){\r\n                    if (response.success) {\r\n                        var slideCount=0;\r\n                        for (var sid in response.slides) if (response.slides.hasOwnProperty(sid)) {\r\n                            slideCount++;\r\n                            op += '<option value=\"rs-'+response.slides[sid].id+'\">#'+slideCount+\" \"+response.slides[sid].title+'</option>';\r\n                        }\r\n                    var gf = jQuery('#la_open_modalslide');\r\n\t\t\t\t\t\tgf[0].innerHTML = op;\r\n\r\n\t\t\t\t\t\tif (RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].modalslide!==undefined) gf[0].value = RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].modalslide;\r\n\t\t\t\t\t\t//UPDATE SELECT LIST\r\n                        gf.ddTP({placeholder:\"Select From List\"});\r\n\t\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('#rbm_layer_action'), path:RVS.S.slideId+\".layers.\"+RVS.selLayers[0]+\".\", trigger:\"init\"});\r\n                    }\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tUPDATE THE FRAMES LIST AFTER SELECTING LAYER\r\n\t*/\r\n\tRVS.F.refreshFrameLists = function() {\r\n\t\tfor (var i in xmn) if (xmn.hasOwnProperty(i)) {\r\n\r\n            if (RVS.S.actionTrgtLayerId===undefined) return;\r\n\t\t\tvar static = typeof RVS.S.actionTrgtLayerId === 'string' && RVS.S.actionTrgtLayerId.indexOf('static-')>=0,\r\n\t\t\t\tlayerid = typeof RVS.S.actionTrgtLayerId === 'string' ? RVS.S.actionTrgtLayerId.replace('static-','') : RVS.S.actionTrgtLayerId,\r\n                layer = static ? RVS.SLIDER[RVS.SLIDER.staticSlideId].layers[layerid] : RVS.L[RVS.S.actionTrgtLayerId],\r\n                op =\"\",\r\n                gf=jQuery('#la_gotoframe'+xmn[i]);\r\n\r\n            if (layer===undefined || layer===NaN) return;\r\n            var frameorder = layer.timeline.frameOrder,\r\n                frames = layer.timeline.frames;\r\n            op += '<option value=\"frame_1\">'+frames.frame_1.alias+' ( '+RVS_LANG.frstframe+')'+'</option>';\r\n\t\t\tfor (var frameid in frameorder) {\r\n\t\t\t\tif(!frameorder.hasOwnProperty(frameid)) continue;\r\n\t\t\t\tvar frame = frameorder[frameid].id;\r\n\t\t\t\tif (frame!==\"frame_0\" && frame!==\"frame_1\" && frame!==\"frame_999\")\r\n\t\t\t\t\top += '<option value=\"'+frame+'\">'+frames[frame].alias+' ('+frameid+'.Frame )'+'</option>';\r\n\t\t\t}\r\n\t\t\top += '<option value=\"frame_999\">'+frames.frame_999.alias+' ( '+RVS_LANG.lastframe+')'+'</option>';\r\n\t\t\tgf[0].innerHTML = op;\r\n\r\n\t\t\t//CHECK IF FRAME EXISTS, AND SELECT\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx][\"gotoframe\"+(xmn[i]===\"X\" ? \"\" : xmn[i])] && frames[RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx][\"gotoframe\"+(xmn[i]===\"X\" ? \"\" : xmn[i])]]!==undefined)\r\n\t\t\t\tgf[0].value = RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx][\"gotoframe\"+(xmn[i]===\"X\" ? \"\" : xmn[i])];\r\n\t\t\telse {\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx][\"gotoframe\"+(xmn[i]===\"X\" ? \"\" : xmn[i])] = \"frame_1\";\r\n\t\t\t\tgf[0].value = RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx][\"gotoframe\"+(xmn[i]===\"X\" ? \"\" : xmn[i])];\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//UPDATE SELECT LIST\r\n\t\t\tgf.ddTP({placeholder:\"Select From List\"});\r\n\r\n\t\t\t//UPDATE PLAY FRAME ONLY INPUT\r\n\t\t\tRVS.F.updatePlayFrameXOnlyOnAction(null,xmn[i]);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tRVS.F.updatePlayFrameXOnlyOnAction = function(a,b) {\r\n\r\n\t\tb = b===undefined ? \"X\" : typeof b ===\"object\" ? b.eventparam : b;\r\n\r\n\t\tif (RVS.S.actionTrgtLayerId===undefined) return;\r\n\r\n\t\tvar static = typeof RVS.S.actionTrgtLayerId === 'string' && RVS.S.actionTrgtLayerId.indexOf('static-') >= 0,\r\n\t\t\tlayerid = typeof RVS.S.actionTrgtLayerId === 'string' ? RVS.S.actionTrgtLayerId.replace('static-', '') : RVS.S.actionTrgtLayerId,\r\n\t\t\tlayer = static ? RVS.SLIDER[RVS.SLIDER.staticSlideId].layers[layerid] : RVS.L[RVS.S.actionTrgtLayerId];\r\n\r\n\t\tvar inp = document.getElementById('overtake_frame'+b+'_control'),\r\n\t\t\tframes = layer.timeline.frames,\r\n\t\t\tgf = RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx][\"gotoframe\"+(b===\"N\" || b===\"M\" ? b : \"\")];\r\n\t\tif (gf && frames[gf]!==undefined) {\r\n\t\t\tinp.dataset.r = \"timeline.frames.\"+gf+\".timeline.actionTriggered\";\r\n\t\t\tinp.checked = layer.timeline.frames[gf].timeline.actionTriggered;\r\n\t\t\tRVS.F.turnOnOffVisUpdate({input:inp});\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.upadteLayerTargetDropDowns = function(_) {\r\n\t\t// SET UP DROPDOWN BOXES\r\n\t\tvar lalt = jQuery('#la_layer_target'),\r\n\t\t\tshowmedia = RVS.LIB.ACTIONTYPES[_.action]!==undefined ? RVS.LIB.ACTIONTYPES[_.action].media : false;\r\n\r\n\t\tlalt[0].innerHTML=\"\";\r\n\r\n\t\tif (showmedia) {\r\n\t\t\tlalt[0].innerHTML += '<option data-icon=\"videocam\" value=\"backgroundvideo\">'+RVS_LANG.backgroundvideo+'</option>';\r\n\t\t\tlalt[0].innerHTML += '<option data-icon=\"videocam\" value=\"firstvideo\">'+RVS_LANG.videoactiveslide+'</option>';\r\n\t\t}\r\n\t\tfor (var l in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(l)) continue;\r\n\t\t\tif (RVS.L[l].type!==undefined &&RVS.L[l].type!==\"zone\" && (!showmedia || (RVS.L[l].type===\"video\" || RVS.L[l].type===\"audio\")))\r\n\t\t\t\tlalt[0].innerHTML += '<option data-icon=\"'+RVS.F.getLayerIcon(RVS.L[l].linebreak ? 'linebreak' : RVS.L[l].type)+'\" value=\"'+RVS.L[l].uid+'\">'+RVS.L[l].alias+'</option>';\r\n\t\t}\r\n\t\tif ((\"\"+RVS.S.slideId).indexOf(\"static_\")===-1 && RVS.SLIDER.staticSlideId!==undefined && RVS.SLIDER[RVS.SLIDER.staticSlideId]!==undefined) {\r\n\t\t\tlalt[0].innerHTML += '<optgroup label=\"'+RVS_LANG.globalLayers+'\">';\r\n\t\t\tvar _GL = RVS.SLIDER[RVS.SLIDER.staticSlideId].layers;\r\n\t\t\tfor (var l in _GL) {\r\n\t\t\t\tif(!_GL.hasOwnProperty(l)) continue;\r\n\t\t\t\tif (_GL[l].type!==undefined && _GL[l].type!==\"zone\" && (!showmedia || (_GL[l].type===\"video\" || _GL[l].type===\"audio\")))\r\n\t\t\t\t\tlalt[0].innerHTML += '<option data-icon=\"'+RVS.F.getLayerIcon(_GL[l].linebreak ? 'linebreak' : _GL[l].type)+'\" value=\"static-'+_GL[l].uid+'\">'+_GL[l].alias+'</option>';\r\n\t\t\t}\r\n\t\t\tlalt[0].innerHTML +=  '</optgroup>';\r\n\t\t}\r\n\r\n\t\tlalt.val(_.targetid).ddTP('rebuild',{\r\n\r\n\t\t\tpre: '<span><i class=\"icon_in_dropdown material-icons\">#data#</i></span>',\r\n\t\t\tpreData : 'icon'\r\n\t\t});\r\n\r\n\t\tif (_.targetid===undefined || RVS.L[_.targetid]===undefined) return;\r\n\t\tif (jQuery.inArray(RVS.L[_.targetid].type,[\"group\",\"row\",\"column\"])>=0 && jQuery.inArray(_.action,[\"start_in\",\"start_out\",\"start_frame\",\"next_frame\",\"prev_frame\",\"toggle_layer\",\"toggle_frames\"])>=0) {\r\n\r\n\t\t\tjQuery('#la_settings_childrentimelines').show();\r\n\t\t}\r\n\t\telse\r\n\t\t\tjQuery('#la_settings_childrentimelines').hide();\r\n\t};\r\n\r\n\tRVS.F.updateLinkTypes = function(_) {\r\n\t\t//disable_action_ongroups\r\n\t\tvar lalt = jQuery('#la_link_type');\r\n\t\tlalt[0].innerHTML = \"\";\r\n\t\tlalt.append('<option value=\"jquery\">'+RVS_LANG.jquerytriggered+'</option>');\r\n\t\tif (jQuery.inArray(RVS.L[RVS.selLayers[0]].type,[\"group\",\"column\",\"row\"])==-1) lalt.append('<option value=\"a\">'+RVS_LANG.atriggered+'</option>');\r\n\t\tlalt.val(_.linktype).ddTP('change').ddTP({});\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tCREATE SINGLE ACTION GROUPS IN ACCORDION FORM\r\n\t*/\r\n\tRVS.F.createActionGroup = function(obj) {\r\n\t\tlet GA = document.getElementById(obj.id),\r\n\t\t\texist = GA!==null;\r\n\r\n\t\tobj.title = RVS_LANG[obj.id]===undefined ? obj.title ? obj.title : obj.id : RVS_LANG[obj.id];\r\n\r\n\t\tif (!exist) {\r\n\t\t\tGA = RVS.F.cE({cN:'lal_group', id:obj.id});\r\n\t\t\tlet header = RVS.F.cE({cN:'lal_group_header'});\r\n\t\t\theader.textContent = obj.title;\r\n\t\t\tlet fi = RVS.F.cI({c:obj.icon});\r\n\t\t\theader.prepend(fi);\r\n\t\t\theader.appendChild(RVS.F.cI({cN:'accordiondrop',c:'arrow_drop_down'}));\r\n\t\t\tGA.appendChild(header);\r\n\t\t}\r\n\r\n\r\n\t\t//ADD ACTIONS TO THE GROUP\r\n\t\tfor (var i in obj.actions) {\r\n\r\n\t\t\tif(!obj.actions.hasOwnProperty(i)) continue;\r\n\t\t\tlet a = obj.actions[i];\r\n\r\n\t\t\tif (a.alias!==undefined) RVS_LANG[\"layeraction_\"+a.val] = a.alias;\r\n\r\n\t\t\tlet\ttitle = a.title!==undefined ? a.title : RVS_LANG['layeraction_'+a.val]===undefined ? a.val : RVS_LANG['layeraction_'+a.val];\r\n\t\t\ta.inputs = a.inputs===undefined ? \"\" : a.inputs;\r\n\t\t\ta.inputs = \t(a.layerTarget===true ? \"#la_settings_layertarget\"+ (a.inputs.length>0 ? \", \"+a.inputs:\"\") : a.inputs);\r\n\t\t\tlet lap = RVS.F.cE({cN:'lal_group_member',id:'layeraction_picker_'+a.val,ds:{val:a.val, inputs:a.inputs}});\r\n\t\t\tlet lapi = RVS.F.cI({c:obj.icon});\r\n\t\t\tlap.prepend(RVS.F.cI({c:obj.icon}));\r\n\t\t\tlap.textContent = title;\r\n\t\t\tGA.appendChild(lap);\r\n\t\t\tif (a.layerTarget) RVS.LIB.ACTION_WITH_TRGT.push(a.val);\r\n\t\t\tRVS.LIB.ACTIONTYPES[a.val] = {inputs:a.inputs, name:title, icon:obj.icon, layerTarget:a.layerTarget, media:a.media};\r\n\t\t}\r\n\r\n\t\t//ADD GROUP TO THE ACTION CONTAINER IF NOT YET ADDED\r\n\t\tif (!exist) document.getElementById('layeraction_list').appendChild(GA);\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE SLIDE LIST\r\n\t*/\r\n\tRVS.F.updateSlideList = function(_) {\r\n\t\tvar sel = jQuery('#la_jump_to_slide');\r\n\t\tvar opts = '<option value=\"first\">'+RVS_LANG.firstslide+'</option>';\r\n\t\topts += '<option value=\"last\">'+RVS_LANG.lastslide+'</option>';\r\n\t\topts += '<option value=\"random\">'+RVS_LANG.randomslide+'</option>';\r\n\t\tif (_.targetid === \"next\") opts += '<option value=\"next\">'+RVS_LANG.nextslide+'</option>';\r\n\t\tif (_.targetid === \"previous\") opts += '<option value=\"previous\">'+RVS_LANG.previousslide+'</option>';\r\n\r\n\r\n\t\tvar slideCount = 0;\r\n\t\tfor (var i in RVS.SLIDER.slideIDs) {\r\n\t\t\tif(!RVS.SLIDER.slideIDs.hasOwnProperty(i)) continue;\r\n\t\t\tvar id = RVS.SLIDER.slideIDs[i]+\"\";\r\n\t\t\tif (id.indexOf(\"static_\")===-1)  {\r\n\t\t\t\tslideCount++;\r\n\t\t\t\topts += '<option value='+id+'>#'+slideCount+' '+RVS.SLIDER[id].slide.title+'</option>';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsel[0].innerHTML = opts;\r\n\t\tsel.val(_.targetid).ddTP('change').ddTP({});\r\n\r\n\t};\r\n\r\n\r\n\r\n\t/********************************\r\n\t\t\tINIT ACTIONS\r\n\t*********************************/\r\n\tfunction initActions() {\r\n\t\t// LINK ACTIONS\r\n\t\tRVS.F.createActionGroup({icon:\"link\", id:\"layeraction_group_link\", actions:[\r\n\t\t\t{val:\"menu\", inputs:\"#la_settings_link_menu, #la_settings_link,#la_settings_scroll_under\"},\r\n\t\t\t{val:\"link\", inputs:\"#la_settings_link_url,#la_settings_link,#la_settings_link_type\"},\r\n\t\t\t{val:\"callback\", inputs:\"#la_settings_callback\"},\r\n\t\t\t{val:\"getAccelerationPermission\", inputs:\"#la_settings_getAccelerationPermissionk\"},\r\n\t\t\t{val:\"scrollto\", inputs:\"#la_settings_scroll_to,#la_settings_scroll_under\"},\r\n\t\t\t{val:\"scroll_under\", inputs:\"#la_settings_scroll_under\"}]});\r\n\r\n\t\t// SLIDE ACTIONS\r\n\t\tRVS.F.createActionGroup({icon:\"code\", id:\"layeraction_group_slide\", actions:[{val:\"jumpto\", inputs:\"#la_settings_jumpto\"},  {val:\"next\"}, {val:\"prev\"},{val:\"pause\"},{val:\"resume\"},{val:\"toggle_slider\"},{val:\"close_modal\"},{val:\"open_modal\", inputs:\"#la_settings_modal\"}]});\r\n\r\n\r\n\t\t// LAYER ACTIONS\r\n\t\tRVS.F.createActionGroup({icon:\"layers\", id:\"layeraction_group_layer\", actions:[\r\n\t\t\t{val:\"start_in\", inputs:\"#la_settings_layer_actions, #la_settings_layer_actions_in, #la_settings_childrentimelines\", layerTarget:true},\r\n\t\t\t{val:\"start_out\", inputs:\"#la_settings_layer_actions, #la_settings_layer_actions_out, #la_settings_childrentimelines\", layerTarget:true},\r\n\t\t\t{val:\"start_frame\", inputs:\"#la_settings_layer_actions, #la_settings_layer_actions_frame, #la_settings_childrentimelines\", layerTarget:true},\r\n\t\t\t{val:\"next_frame\", inputs:\"#la_settings_layer_actions, #la_settings_childrentimelines\", layerTarget:true},\r\n\t\t\t{val:\"prev_frame\", inputs:\"#la_settings_layer_actions, #la_settings_childrentimelines\", layerTarget:true},\r\n\t\t\t{val:\"toggle_layer\", inputs:\"#la_settings_layer_actions, #la_settings_layer_toggle_actions, #la_settings_childrentimelines\", layerTarget:true},\r\n\t\t\t{val:\"toggle_frames\", inputs:\"#la_settings_layer_actions, #la_settings_layer_actions_frameXY,  #la_settings_childrentimelines\", layerTarget:true}\r\n\t\t]});\r\n\r\n\t\t// MEDIA ACTIONS\r\n\t\tRVS.F.createActionGroup({icon:\"videocam\", id:\"layeraction_group_media\", actions:[\r\n\t\t\t{val:\"start_video\", layerTarget:true,media:true},\r\n\t\t\t{val:\"stop_video\", layerTarget:true,media:true},\r\n\t\t\t{val:\"toggle_video\", layerTarget:true,media:true},\r\n\t\t\t{val:\"mute_video\", layerTarget:true,media:true},\r\n\t\t\t{val:\"unmute_video\", layerTarget:true,media:true},\r\n\t\t\t{val:\"toggle_mute_video\", layerTarget:true,media:true},\r\n\t\t\t{val:\"toggle_global_mute_video\"}\r\n\t\t]});\r\n\r\n\t\t// FULLSCREEN ACTIONS\r\n\t\tRVS.F.createActionGroup({icon:\"fullscreen\", id:\"layeraction_group_fullscreen\", actions:[{val:\"togglefullscreen\"}, {val:\"gofullscreen\"}, {val:\"exitfullscreen\"}]});\r\n\r\n\t\t// ADVANCED ACTIONS\r\n\t\tRVS.F.createActionGroup({icon:\"layers\", id:\"layeraction_group_layer\", actions:[{val:\"simulate_click\", layerTarget:true}, {val:\"toggle_class\", inputs:\"#la_settings_class\", layerTarget:true}]});\r\n\r\n\t\tRVS.DOC.trigger(\"extendLayerActionGroups\");\r\n\t}\r\n\r\n\t/********************************\r\n\tINIT LOCAL INPUT BOX FUNCTIONS\r\n\t*********************************/\r\n\tfunction initLocalInputBoxes() {\r\n\r\n\t}\r\n\r\n\t/********************************\r\n\t \tSOME INTERNAL FUNCTIONS\r\n\t*********************************/\r\n\tfunction getActionTarget(action) {\r\n\t\tvar result = -1;\r\n\t\tif (jQuery.inArray(action.action, RVS.LIB.ACTION_WITH_TRGT) != -1 && action.layer_target !== undefined) result = parseInt(action.layer_target.toString().replace('static-',''), 0);\r\n\t\treturn { slideid: action !== undefined && action.layer_target !== undefined && action.layer_target.toString().indexOf('static') >= 0 ? RVS.SLIDER.staticSlideId : RVS.S.slideId, targetid: result==-1 || isNaN(result) ? -1 : result};\r\n\t}\r\n\r\n\tfunction updateActionScrollbars() {\r\n\t\tjQuery('#layeraction_list').RSScroll({\r\n\t\t\twheelPropagation:false,\r\n\t\t\tsuppressScrollX:true,\r\n\t\t\tminScrollbarLength:100\r\n\t\t});\r\n\t\tjQuery('#layeractions_overview_innerwrap').RSScroll({\r\n\t\t\twheelPropagation:false,\r\n\t\t\tsuppressScrollX:true,\r\n\t\t\tminScrollbarLength:100\r\n\t\t});\r\n\t}\r\n\r\n\tfunction addNewAction(action) {\r\n\t\tvar lastaction = RVS.L[RVS.selLayers[0]].actions.action.length,\r\n\t\t\tnewactions = RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].actions);\r\n\t\tnewactions.action.push({action:action,tooltip_event:\"click\", link_help_in:\"keep\", link_open_in:\"_self\", link_follow:\"nofollow\"});\r\n\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.selLayers[0]+'.actions',val:newactions});\r\n\r\n\t\tRVS.S.actionIdx = lastaction;\r\n\t\tRVS.F.buildActionList();\r\n\t\tRVS.F.selectLayerAction();\r\n\t\tRVS.F.refreshFrameLists();\r\n\t\tRVS.F.refreshModalSlides();\r\n\t\tRVS.DOC.trigger('layer_action_selected');\r\n\t}\r\n\r\n\t/*\r\n\tINIT CUSTOM EVENT LISTENERS FOR TRIGGERING FUNCTIONS\r\n\t*/\r\n\tfunction initLocalListeners() {\r\n\r\n\t\t// OPEN LAYER ACTIONS\r\n\t\tvar doc = RVS.DOC.on('openLayerActions',RVS.F.openLayerActions);\r\n\r\n\t\tRVS.DOC.on('updatePlayFrameXOnlyOnAction',RVS.F.updatePlayFrameXOnlyOnAction);\r\n\r\n\t\t// SHOW HIDE DEPENDENCIES ON LAYER ACTION\r\n\t\tRVS.DOC.on('click','.drop_dependencies',function() {\r\n\t\t\tjQuery('#layer_with_action_wrap').toggleClass(\"opendeps\");\r\n\t\t});\r\n\r\n\t\t//CLICK ON CLOSE IN DIFFERENT STATES\r\n\t\tRVS.DOC.on('click','#rbm_layer_action .rbm_close',function() {\r\n\t\t\tif (jQuery('#rbm_layer_action').hasClass(\"inpickermode\")) {\r\n\t\t\t\tjQuery('#rbm_layer_action').removeClass(\"inpickermode\");\r\n\t\t\t\tjQuery('#layeraction_list').hide();\r\n\t\t\t\tjQuery('#layer_action_type').show();\r\n\t\t\t} else {\r\n\t\t\t\tjQuery('.actionDependent').removeClass(\"actionDependent\");\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t}\r\n\t\t\tfor (var i in RVS.L) if (RVS.L.hasOwnProperty(i)) {\r\n\t\t\t\tif (RVS.L[i].actions && RVS.L[i].actions.action.length>0)\r\n\t\t\t\t\tjQuery('#tllayerlist_element_'+RVS.S.slideId+'_'+RVS.L[i].uid).addClass(\"actionmarked\");\r\n\t\t\t\telse\r\n\t\t\t\t\tjQuery('#tllayerlist_element_'+RVS.S.slideId+'_'+RVS.L[i].uid).removeClass(\"actionmarked\");\r\n\t\t\t}\r\n\t\t\tRVS.F.updateAllLayerFrames();\r\n\t\t});\r\n\r\n\t\t// CREATE NEW LAYER ACTION\r\n\t\tRVS.DOC.on('click','#addactiontolayer',function() {\r\n\t\t\taddNewAction(\"link\");\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t//Clean up the broken Actions\r\n\t\tRVS.F.cleanUpAllActions = function() {\r\n\t\t\tfor (var i in RVS.L) if (RVS.L.hasOwnProperty(i)) cleanUpActions(i);\r\n\t\t}\r\n\r\n\t\tRVS.F.cleanUpActions = function(i) {\r\n\t\t\tvar cleanActions = [];\r\n\t\t\tif (RVS.L[i].actions!==undefined) {\r\n\t\t\t\tfor (var j in RVS.L[i].actions.action) {\r\n\t\t\t\t\tif (RVS.L[i].actions.action[j].migrateMute==undefined && RVS.L[i].actions.action[j].rsColorPicker==undefined && RVS.L[i].actions.action[j].get==undefined)\r\n\t\t\t\t\tcleanActions.push(RVS.L[i].actions.action[j]);\r\n\t\t\t\t}\r\n\t\t\t\tRVS.L[i].actions = cleanActions;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tRVS.F.updateDuplicatedLayerActionDependencies = function(newid, oldid) {\r\n\t\t\tvar olddeps = RVS.F.layerFrameTriggeredBy({all:true,layerid:oldid,frame:\"any\"}),\r\n\t\t\t\taction, exttmp, extend=[],i,j,olddepsuids=[];\r\n\r\n\t\t\tfor (i in olddeps) {\r\n\t\t\t\tif (!olddeps.hasOwnProperty(i) || RVS.L[olddeps[i].uid]===undefined) continue;\r\n\t\t\t\tif (jQuery.inArray(\"\"+olddeps[i].uid,olddepsuids)===-1) olddepsuids.push(\"\"+olddeps[i].uid);\r\n\t\t\t}\r\n\t\t\tfor (i in olddepsuids) {\r\n\t\t\t\textend=[];\r\n\t\t\t\tfor (j in RVS.L[olddepsuids[i]].actions.action) {\r\n\r\n\t\t\t\t\tif (!RVS.L[olddepsuids[i]].actions.action.hasOwnProperty(j) ||\r\n\t\t\t\t\t\tjQuery.inArray(RVS.L[olddepsuids[i]].actions.action[j].action, RVS.LIB.ACTION_WITH_TRGT) == -1 ||\r\n\t\t\t\t\t\t(\"\"+RVS.L[olddepsuids[i]].actions.action[j].layer_target) !== (\"\"+oldid)) continue;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\texttmp = RVS.F.safeExtend(true,{},RVS.L[olddepsuids[i]].actions.action[j]);\r\n\t\t\t\t\t\texttmp.layer_target = \"\"+newid;\r\n\t\t\t\t\t\textend.push(exttmp);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (extend.length>0)  for ( j in extend) if(extend.hasOwnProperty(i)) {\r\n\t\t\t\t\tRVS.L[olddeps[i].uid].actions.action.push(RVS.F.safeExtend(true,{},extend[j]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// DUPLICATE NEW LAYER ACTION\r\n\t\tRVS.DOC.on('click','.duplicate_single_layer_action',function() {\r\n\t\t\tvar li = jQuery(this).closest('.single_layer_action'),\r\n\t\t\t\tlastaction = RVS.L[RVS.selLayers[0]].actions.action.length,\r\n\t\t\t\tnewactions = RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].actions);\r\n\t\t\tnewactions.action.push(RVS.L[RVS.selLayers[0]].actions.action[li.index()]);\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.selLayers[0]+'.actions',val:newactions});\r\n\t\t\tRVS.S.actionIdx = lastaction;\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tRVS.F.buildActionList();\r\n\t\t\t\tRVS.F.selectLayerAction();\r\n\t\t\t\tRVS.F.refreshFrameLists();\r\n\t\t\t\tRVS.F.refreshModalSlides();\r\n\t\t\t},50);\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// DELETE LAYER ACTION\r\n\t\tRVS.DOC.on('click','.delete_single_layer_action',function() {\r\n\t\t\tvar li = jQuery(this).closest('.single_layer_action'),\r\n\t\t\t\t/* lastaction = RVS.L[RVS.selLayers[0]].actions.action.length-1, */\r\n\t\t\t\tnewactions = RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].actions);\r\n\r\n\r\n\t\t\tnewactions.action.splice(li.index(),1);\r\n\t\t\tRVS.S.actionIdx = 0;\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.selLayers[0]+'.actions',val:newactions});\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tRVS.F.buildActionList();\r\n\t\t\t\tRVS.F.selectLayerAction();\r\n\t\t\t\tRVS.F.refreshFrameLists();\r\n\t\t\t\tRVS.F.refreshModalSlides();\r\n\t\t\t\tRVS.DOC.trigger('layer_action_selected');\r\n\t\t\t},50);\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// PICK LAYER ACTION\r\n\t\tRVS.DOC.on('click','#layer_action_type',function() {\r\n\t\t\tjQuery('#rbm_layer_action').addClass(\"inpickermode\");\r\n\t\t\tjQuery('#layeraction_list').show();\r\n\t\t\tjQuery(this).hide();\r\n\t\t\tjQuery('#layeraction_list .lal_group_member').removeClass(\"selected\");\r\n\t\t\tjQuery('#layeraction_picker_'+RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx].action).addClass(\"selected\");\r\n\t\t});\r\n\r\n\t\t// PICK A NEW LAYER ACTION\r\n\t\tRVS.DOC.on('click','.lal_group_member',function() {\r\n\t\t\tjQuery('#rbm_layer_action').removeClass(\"inpickermode\");\r\n\t\t\tjQuery('#layer_action_type').show();\r\n\t\t\tif (RVS.S.actionIdx===undefined || RVS.L[RVS.selLayers[0]].actions.action[RVS.S.actionIdx]===undefined) {\r\n\t\t\t\taddNewAction(this.dataset.val);\r\n\t\t\t\tjQuery('#action_inputs .la_settings').hide();\r\n\t\t\t\tjQuery(RVS.LIB.ACTIONTYPES[this.dataset.val].inputs).show();\r\n\t\t\t\tjQuery('#layeraction_list').hide();\r\n\t\t\t} else {\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.selLayers[0]+'.actions.action.'+RVS.S.actionIdx+'.action',val:this.dataset.val});\r\n\t\t\t\tjQuery('#action_inputs .la_settings').hide();\r\n\t\t\t\tjQuery(RVS.LIB.ACTIONTYPES[this.dataset.val].inputs).show();\r\n\t\t\t\tjQuery('#layeraction_list').hide();\r\n\t\t\t\tRVS.F.buildActionList();\r\n\t\t\t\tRVS.F.selectLayerAction();\r\n\t\t\t\tRVS.F.refreshFrameLists();\r\n\t\t\t\tRVS.F.refreshModalSlides();\r\n\t\t\t}\r\n\t\t\tRVS.DOC.trigger('layer_action_selected');\r\n\r\n\t\t});\r\n\r\n\t\t// CLICK ON A SINGLE LAYER ACTION\r\n\t\tRVS.DOC.on('click','.single_layer_action', function(e) {\r\n\t\t\tRVS.S.actionIdx = jQuery(this).index();\r\n\t\t\tjQuery('.single_layer_action').removeClass(\"selected\");\r\n\t\t\tjQuery(this).addClass(\"selected\");\r\n\t\t\tRVS.F.selectLayerAction();\r\n\t\t\tRVS.F.refreshFrameLists();\r\n\t\t\tRVS.F.refreshModalSlides();\r\n\t\t\tRVS.DOC.trigger('layer_action_selected');\r\n\t\t});\r\n\r\n\t\t// CLICK ON ACCORDION, SHOUD OPEN/CLOSE THE ACTION ACCORDIONS\r\n\t\tRVS.DOC.on('click','.lal_group_header',function() {\r\n\t\t\tvar group = jQuery(this).closest('.lal_group');\r\n\t\t\tgroup.toggleClass(\"closed\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('refreshActionView',function() {\r\n\t\t\tRVS.F.buildActionList();\r\n\t\t\tRVS.F.selectLayerAction();\r\n\t\t\tRVS.F.refreshFrameLists();\r\n\t\t\tRVS.F.refreshModalSlides();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('refreshSlideLists',function() {\r\n\t\t\tRVS.F.refreshModalSlides();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('refreshLayerToggleState',function() {\r\n\r\n\t\t\tvar static = typeof RVS.S.actionTrgtLayerId === 'string' && RVS.S.actionTrgtLayerId.indexOf('static-') >= 0,\r\n\t\t\t\tlayerid = typeof RVS.S.actionTrgtLayerId === 'string' ? RVS.S.actionTrgtLayerId.replace('static-', '') : RVS.S.actionTrgtLayerId,\r\n\t\t\t\tlayer = static ? RVS.SLIDER[RVS.SLIDER.staticSlideId].layers[layerid] : RVS.L[RVS.S.actionTrgtLayerId];\r\n\r\n\t\t\tif (jQuery('#toggle_layer_type').val()==\"visible\")\r\n                layer.timeline.frames.frame_1.timeline.actionTriggered = false;\r\n            else\r\n                layer.timeline.frames.frame_1.timeline.actionTriggered = true;\r\n\r\n\t\t\tRVS.F.buildActionList();\r\n\t\t\tRVS.F.selectLayerAction();\r\n\t\t\tRVS.F.refreshFrameLists();\r\n\t\t\tRVS.F.refreshModalSlides();\r\n\t\t});\r\n\r\n\r\n\t}\r\n\r\n})();\r\n","Nwdthemes_Revslider/admin/assets/js/modules/helpinit.js":"/*!\r\n * REVOLUTION 6.0.0 EDITOR HELPINIT JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\n// addons extension\r\n;window.HelpGuide = {\r\n\r\n\taddOnsHelp: [],\r\n\r\n\t/* verify directory entry is an object */\r\n\tverifyObject: function(obj) {\r\n\r\n\t\treturn obj && typeof obj === 'object' && !Array.isArray(obj);\r\n\r\n\t},\r\n\t/* called from an AddOn, adds the help data */\r\n\tadd: function(obj) {\r\n\r\n\t\tif(HelpGuide.verifyObject(obj)) {\r\n\r\n\t\t\t/* if help not activated yet, store the data */\r\n\t\t\tif(!HelpGuide.allHelpPaths) {\r\n\r\n\t\t\t\tHelpGuide.addOnsHelp[HelpGuide.addOnsHelp.length] = obj;\r\n\r\n\t\t\t}\r\n\t\t\t/* if help activated, add the data */\r\n\t\t\telse {\r\n\r\n\t\t\t\tHelpGuide.extendHelpAddOns([obj], true);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\t/* called from an AddOn, show help info if help is activated and AddOn is active */\r\n\tactivate: function(slug) {\r\n\r\n\t\tif(HelpGuide.allHelpPaths) HelpGuide.toggleHelpAddOn(slug, true);\r\n\r\n\r\n\t},\r\n\t/* called from an AddOn, hide help info if help is activated and AddOn is not active */\r\n\tdeactivate: function(slug) {\r\n\r\n\t\tif(HelpGuide.allHelpPaths) HelpGuide.toggleHelpAddOn(slug);\r\n\r\n\t}\r\n\r\n};\r\n\r\n// load main script when help guide is first clicked\r\njQuery(function() {\r\n\r\n\t/*\r\n\t\tHELP DIRECTORY\r\n\t*/\r\n\tjQuery('.help_wrap').one('click', function(e) {\r\n\t\trequire(['help']);\r\n\t});\r\n\r\n\t/*\r\n\t\tTOOLTIPS\r\n\t*/\r\n\tvar tooltipLoaded;\r\n\tjQuery('.tooltip_wrap').on('click', function() {\r\n\r\n\t\tvar $this = jQuery(this),\r\n\t\t\tscriptReady = $this.data('scriptready');\r\n\r\n\t\tif(tooltipLoaded && !scriptReady) return;\r\n\t\tif(!tooltipLoaded) require(['tooltip']);\r\n\t\telse jQuery(document).trigger('start-tooltips');\r\n\r\n\t\ttooltipLoaded = true;\r\n\r\n\t});\r\n\r\n\twindow.RsTooltips = function(activate, list, definitions) {\r\n\r\n\t\twindow.RsTooltipList = list;\r\n\t\tif(revSliderToolTips && activate) {\r\n\r\n\t\t\tjQuery('.tooltip_wrap').data('tooltip-definitions', definitions).trigger('click');\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n});\r\n","Nwdthemes_Revslider/admin/assets/js/modules/admin.js":"/*!\r\n * REVOLUTION 6.0.0 BUILDER JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\n\r\n// Media Gallery workaround\r\nif (typeof galleryBrowser == 'undefined' && typeof MediabrowserUtility != 'undefined') {\r\n    galleryBrowser = MediabrowserUtility;\r\n}\r\n\r\n\r\n/**********************************\r\n\t-\tGLOBAL VARIABLES\t-\r\n**********************************/\r\n;window.RVS = window.RVS === undefined ? {} : window.RVS;\r\nRVS.F = RVS.F === undefined ? {} : RVS.F;\r\nRVS.ENV = RVS.ENV === undefined ? {} : RVS.ENV;\r\nRVS.LIB = RVS.LIB === undefined ? {} : RVS.LIB;\r\nRVS.V = RVS.V === undefined ? {} : RVS.V;\r\nRVS.S = RVS.S === undefined ? {} : RVS.S;\r\nRVS.C = RVS.C === undefined ? {} : RVS.C;\r\nRVS.WIN = RVS.WIN === undefined ? jQuery(window) : RVS.WIN;\r\n\r\nRVS.DOC = RVS.DOC === undefined ? jQuery(document) : RVS.DOC;\r\n\r\nwindow._R_is_Editor = window._R_is_Editor===\"true\" ? true : undefined;\r\nwindow.RS_EASES = {\"default\":\"Default\",\"none\":\"none\",\"power0.in\":\"power0.in\",\"power0.inOut\":\"power0.inOut\",\"power0.out\":\"power0.out\",\"power1.in\":\"power1.in\",\"power1.inOut\":\"power1.inOut\",\"power1.out\":\"power1.out\",\"power2.in\":\"power2.in\",\"power2.inOut\":\"power2.inOut\",\"power2.out\":\"power2.out\",\"power3.in\":\"power3.in\",\"power3.inOut\":\"power3.inOut\",\"power3.out\":\"power3.out\",\"power4.in\":\"power4.in\",\"power4.inOut\":\"power4.inOut\",\"power4.out\":\"power4.out\",\"back.in\":\"back.in\",\"back.inOut\":\"back.inOut\",\"back.out\":\"back.out\",\"bounce.in\":\"bounce.in\",\"bounce.inOut\":\"bounce.inOut\",\"bounce.out\":\"bounce.out\",\"BounceLite\":\"Bounce Lite\",\"BounceSolid\":\"Bounce Solid\",\"BounceStrong\":\"Bounce Strong\",\"BounceExtrem\":\"Bounce Extrem\",\"circ.in\":\"circ.in\",\"circ.inOut\":\"circ.inOut\",\"circ.out\":\"circ.out\",\"elastic.in\":\"elastic.in\",\"elastic.inOut\":\"elastic.inOut\",\"elastic.out\":\"elastic.out\",\"expo.in\":\"expo.in\",\"expo.inOut\":\"expo.inOut\",\"expo.out\":\"expo.out\",\"sine.in\":\"sine.in\",\"sine.inOut\":\"sine.inOut\",\"sine.out\":\"sine.out\",\"slow\":\"slow\",\"SFXBounceLite\":\"SFX - Bounce Lite\",\"SFXBounceSolid\":\"SFX - Bounce Solid\",\"SFXBounceStrong\":\"SFX - Bounce Strong\",\"SFXBounceExtrem\":\"SFX - Bounce Extrem\"};\r\nwindow.RS_PRESETS = {\"R\" : \"shuffle\",\"C\" : \"create\",\"I\" : \"system_update_alt\",\"SC\" : \"border_inner\",\"SR\" : \"border_left\",\"SB\" : \"border_top\",\"ST\" : \"border_bottom\",\"SL\" : \"border_right\",\"BH\" : \"border_horizontal\",\"BV\" : \"border_vertical\",\"CL\" : \"remove_circle_outline\",\"LI\" : \"link\",\"LO\" : \"local_offer\",\"CA\" : \"compare_arrows\",\"CY\" : \"import_export\"};\r\n/**********************************\r\n\t-\tREVBUILDER ADMIN\t-\r\n********************************/\r\n(function() {\r\n\r\n\tvar errorMessageID = null,\r\n\t\tsuccessMessageID = null,\r\n\t\tajaxLoaderID = null,\r\n\t\tajaxHideButtonID = null,\r\n\t\tslideanimlist,dottedlist,sliderlist,_ease,undoRetSteps=0,ignoreEvents,resizeTimeout,mouseInfoBoxOn,draggingelements,listOfContents,socList,clipboardselectors,globalpresetsinit,vimeoPlayer,videoPlayerTimer,downloadExportLayerCombo;\r\n\r\n\r\n\tRVS.F.initAdmin = function() {\r\n\r\n\t\tRVS.S.isChrome8889 = navigator.userAgent.includes(\"Chrome/88\") || navigator.userAgent.includes(\"Chrome/89\");\r\n\r\n\t\t// ADDONS SELECT 2 REFERENCES AFTER CHNAGE FROM SELECT2 TO SELECT2RS\r\n\t\ttry{ jQuery.fn.select2 = jQuery.fn.select2===undefined ? jQuery.fn.ddTP : jQuery.fn.select2; } catch(e) {}\r\n\t\ttry{ $.fn.select2 = $.fn.select2===undefined ?  $.fn.ddTP : $.fn.select2;} catch(e) {}\r\n\r\n\t\tRVS.screen = \"d\";\r\n\t\tRVS.S.bckpGrp = false;\r\n\t\tRVS.S.winh = RVS.WIN.height();\r\n\t\tRVS.S.winw = RVS.WIN.width();\r\n\t\tRVS.ENV.youtubeargs =\"hd=1&wmode=opaque&showinfo=0&rel=0;\";\r\n\t\tRVS.ENV.vimeoargs = \"title=0&byline=0&portrait=0&api=1\";\r\n\t\tRVS.V.sizes = [\"d\",\"n\",\"t\",\"m\"];\r\n\t\tRVS.V.dirs = [\"top\",\"bottom\",\"left\",\"right\"];\r\n\t\tRVS.V.sizesold = [\"desktop\",\"notebook\",\"tablet\",\"mobile\"];\r\n\t\tRVS.ENV.grid_sizes = {d:1240, n:1024, t:778, m:480, none:\"none\"};\r\n\t\tRVS.ENV.globVerOffset = 275;\r\n\t\tRVS.S.shrink = {d:1, m:0.625, n:0.82580645, t:0.75};\r\n\t\tRVS.S.mP = {top:0, left:0};\r\n\t\tRVS.S.redoList = [],\r\n\t\tRVS.S.undoList = [],\r\n\t\tRVS.S.layer_wrap_offset = { x:0,y:0}; // Current Delta Horizontal and Vertical between Layer Content and Wrapping UL Container\r\n\t\tRVS.S.navOffset = {thumbs:{top:0, bottom:0,left:0,right:0}, tabs:{top:0,bottom:0,left:0,right:0}};\r\n\t\tRVS.S.rb_ScrollX = 0;\r\n\t\tRVS.S.rb_ScrollY = 0;\r\n\t\tRVS.eMode = RVS.eMode===undefined ? {top:\"\", menu:\"\", mode:\"\"} : RVS.eMode;\r\n\t\tRVS.S.respInfoBar = {}; // Responsive Infos in ToolBar over Fields\r\n\t\tRVS.V.timeline_height = \"auto\";\r\n\t\tRVS.V.timeline_minHeight = 275;\r\n\t\tRVS.V.timeline_minOpenHeight = 275;\r\n\t\tRVS.S.editorSize = {w:RVS.WIN.width()-335, h:RVS.WIN.height()-RVS.V.timeline_minHeight-65};\r\n\t\tRVS.S.editorSize.width = RVS.S.editorSize.w;\r\n\t\tRVS.S.editorSize.height = RVS.S.editorSize.h;\r\n\t\tRVS.S.click = {x:0,y:0};\r\n\r\n\r\n\r\n\t\t//JS HOOKS\r\n\t\tRVS.JHOOKS = {\r\n\t\t\tcreateLayerListElement : [],\r\n\t\t\tredrawSlideBG : [],\r\n\t\t\tprepareOneSlide : [],\r\n\t\t\tlayerListElementClicked : [],\r\n\t\t\tupdateFrameOptionsVisual : [],\r\n\t\t\tchangeLayerAnimation : [],\r\n\t\t\tdefaultFrame : [],\r\n\t\t\textendSlideAnimationList : []\r\n\t\t};\r\n\r\n\r\n\t\tRVS.S.DaD = {};\r\n\t\tRVS.S.DaD.dragdelta = {x:0,y:0};\t// Latest Dragging Delta from Start till Current Time\r\n\r\n        if (! window._R_is_Editor) {\r\n            return;\r\n        }\r\n\r\n\t\t/************************************************\r\n\t\t\t-\tGLOBAL RESIZING / MOUSE MANAGEMENT\t-\r\n\t\t*************************************************/\r\n\t\tRVS.WIN.on(\"resize\",function() {\r\n\t\t\tvar _w = RVS.WIN.width(),\r\n\t\t\t\t_h = RVS.WIN.height();\r\n\t\t\tif (RVS.S.winw==_w && RVS.S.winh==_h) return;\r\n\t\t\tRVS.S.winh = _h;\r\n\t\t\tRVS.S.winw = _w;\r\n\t\t\tRVS.S.editorSize.w = RVS.S.editorSize.width = RVS.S.winw-335;\r\n\t\t\tRVS.S.editorSize.h = RVS.S.editorSize.height = RVS.S.winh-RVS.V.timeline_minHeight-65;\r\n\r\n\t\t\tclearTimeout(resizeTimeout);\r\n\t\t\tresizeTimeout = setTimeout(function() {\r\n\t\t\t\tRVS.DOC.trigger(\"windowresized\");\r\n\t\t\t\tif (RVS.S.ovMode!==true) RVS.F.updateAllHTMLLayerPositions(true);\r\n\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\tif (typeof RVS.F.CSTRETCH === \"function\" && RVS.F.CSTRETCH())  RVS.DOC.trigger('device_area_dimension_update');\r\n\t\t\t\t});\r\n\r\n\t\t\t},25);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mousemove','#builderView', function(event){\r\n\t\t\tRVS.S.mP.top=event.pageY;\r\n\t\t\tRVS.S.mP.left=event.pageX;\r\n\t\t\tif (mouseInfoBoxOn)\r\n\t\t\t\ttpGS.gsap.set(RVS.C.mouseInfo,{top:(RVS.S.mP.top-40),left:(RVS.S.mP.left+40),display:\"block\"});\r\n\r\n\t\t\tif (RVS.S.builderHover!==undefined && RVS.S.builderHover!==false)\r\n\t\t\t\tRVS.F.setRulerMarkers({x:RVS.S.mP.left,y:RVS.S.mP.top});\r\n\r\n\t\t});\r\n\r\n\t\t// Navigation Mouse Functions\r\n\t\tRVS.DOC.on('touchstart mouseenter', '.tparrows, .tp-bullets, .tp-bullet, .tp-tab, .tp-thumb, .tp-thumbs, .tp-tabs, .tp-rightarrow, .tp-leftarrow', function () {\r\n\t\t\tif (this.className.indexOf('rs-touchhover') === -1) this.className += ' rs-touchhover';\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('touchend mouseleave', '.tparrows, .tp-bullets, .tp-bullet, .tp-tab, .tp-thumb, .tp-tabs,  .tp-rightarrow, .tp-leftarrow', function(){\r\n\t\t\tthis.className = this.className.replace('rs-touchhover', '');\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\tRVS.F.get_browser = function(){\r\n\t    var ua = navigator.userAgent, tem, M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\r\n\t    if(/trident/i.test(M[1])){\r\n\t        tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\r\n\t        return 'IE';\r\n\t    }\r\n\t    if(M[1]=== 'Chrome'){\r\n\t        tem = ua.match(/\\b(OPR|Edge)\\/(\\d+)/);\r\n\t        if(tem != null) return tem[1].replace('OPR', 'Opera');\r\n\t    }\r\n\t    M = M[2]? [M[1], M[2]]: [navigator.appName, navigator.appVersion, '-?'];\r\n\t    if((tem = ua.match(/version\\/(\\d+)/i))!= null)\r\n\t        M.splice(1, 1, tem[1]);\r\n\t    return M[0];\r\n    },\r\n\r\n\tRVS.F.isFirefox = function(id) {\r\n\t\tRVS.ENV.isFirefox = RVS.ENV.isFirefox===undefined ? RVS.F.get_browser()===\"Firefox\" : RVS.ENV.isFirefox;\r\n\t\treturn RVS.ENV.isFirefox;\r\n\t},\r\n\r\n\tRVS.F.HighContrast = function(a) {\r\n\t\tif (a===\"toggle\") {\r\n\t\t\tif (jQuery(document.body).hasClass('rs-high-contrast')) jQuery(document.body).removeClass('rs-high-contrast'); else jQuery(document.body).addClass('rs-high-contrast');\r\n\t\t} else\r\n\t\tif (a) jQuery(document.body).addClass('rs-high-contrast'); else jQuery(document.body).removeClass('rs-high-contrast');\r\n\t}\r\n\r\n\r\n\tRVS.F.getStartSec = function(st) {\r\n\t\treturn st == undefined || st===\"\" || st===\" \" ? 0 :RVS.F.isNumeric(st) ? st : st.split(\":\").length>1 ? parseInt(st.split(\":\")[0],0)*60 + parseInt(st.split(\":\")[1],0) : st;\r\n\t};\r\n\r\n\tRVS.F.videoExtract = {\r\n\t\tinit : function() {\r\n\t\t\tvar _ = RVS.F.videoExtract;\r\n\t\t\t_.canvas = document.createElement(\"canvas\");\r\n\t\t\t_.ctx = _.canvas.getContext(\"2d\");\r\n\t\t\t_.video = document.createElement('video');\r\n\t\t\t_.inited = true;\r\n\t\t},\r\n\t\tget : function(src,callback,at,param) {\r\n\t\t\tif (src===undefined) return;\r\n\t\t\tif (RVS.F.videoExtract.inited===undefined) RVS.F.videoExtract.init();\r\n\t\t\tRVS.F.videoExtract.at = RVS.F.getStartSec(at);\r\n\t\t\tRVS.F.videoExtract.callBack = callback;\r\n\t\t    RVS.F.videoExtract.video.addEventListener('loadeddata', RVS.F.videoExtract.draw);\r\n\t\t    if (RVS.F.videoExtract.lastloaded == src) RVS.F.videoExtract.draw();\r\n\t\t    RVS.F.videoExtract.video.src = src;\r\n\t\t    RVS.F.videoExtract.param = param;\r\n\t\t},\r\n\r\n\t\tdraw : async function() {\r\n\t\t\treturn new Promise(async (resolve) => {\r\n\t\t\t\tvar _ = RVS.F.videoExtract, seekResolve;\r\n\t\t\t\t_.video.addEventListener('seeked', async function() { if(seekResolve) seekResolve();});\r\n\t\t\t    while((_.video.duration === Infinity || isNaN(_.video.duration)) && _.video.readyState < 2) {\r\n\t\t\t      _.video.currentTime = 10000000*Math.random();\r\n\t\t\t    }\r\n\t\t\t    _.lastloaded = _.video.src;\r\n\t\t\t    _.canvas.width = _.video.videoWidth;\r\n\t\t\t    _.canvas.height = _.video.videoHeight;\r\n\t\t\t    _.video.currentTime = _.at===undefined ? 0 : _.at;\r\n\t\t\t    await new Promise(r => seekResolve=r);\r\n\t\t        _.ctx.drawImage(_.video, 0, 0, _.video.videoWidth, _.video.videoHeight);\r\n\t\t        _.data = _.canvas.toDataURL(\"image/jpeg\", 0.75);\r\n\t\t        _.save();\r\n\t\t\t    resolve();\r\n\t\t\t});\r\n\t\t},\r\n\t\tsave : function() {\r\n\t\t\tvar _ = RVS.F.videoExtract;\r\n\t\t\tRVS.F.ajaxRequest('create_image_from_raw', {bitmap:RVS.F.videoExtract.data, mpeg:RVS.F.videoExtract.video.src , slideid:((\"\"+RVS.S.slideId).replace(\"static_\",\"\"))+(RVS.F.videoExtract.param===\"layer\" ? \"_layer\" : \"\")}, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tRVS.F.videoExtract.callBack(response,RVS.F.videoExtract.param);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.setBGPosterImage = function(src,id,param) {\r\n\t\tif (param===\"slide\") {\r\n\t\t\tRVS.F.updateImageSrcFromMedia({\r\n\t\t\t\tevt : \"updateslidebasic\",\r\n\t\t\t\tevtparam : \"double\",\r\n\t\t\t\tr : \"#slide#.slide.bg.image\",\r\n\t\t\t\trid:\"#slide#.slide.bg.imageId\",\r\n\t\t\t\tlib:\"#slide#.slide.bg.imageLib\",\r\n\t\t\t\tsty:\"#slide#.slide.bg.imageSourceType\",\r\n\t\t\t\ttargetType : \"slide\"\r\n\t\t\t},src,id);\r\n\t\t} else if (param===\"layer\") {\r\n\t\t\tRVS.F.updateImageSrcFromMedia({\r\n\t\t\t\tevt : \"updatelayerimagesrc\",\r\n\t\t\t\tr : \"media.posterUrl\",\r\n\t\t\t\trid:\"media.posterId\",\r\n\t\t\t\tlib:\"media.imageLib\",\r\n\t\t\t\tsty:\"behavior.imageSourceType\",\r\n\t\t\t\ttargetType : \"layer\"\r\n\t\t\t},src,id);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//***************************************************\r\n\t// CORE UPDATE FUNCTION FOR THE OBJECT STRUCTURES //\r\n\t//***************************************************\r\n\r\n\r\n\tRVS.F.updateSliderObj = function(_) {\r\n\t\tif (_.path.indexOf('#targetlayer#')>=0 && (RVS.S.actionTrgtLayerId===undefined || RVS.S.actionTrgtLayerId===\"none\")) return;\r\n\t\t//Find ScreenSize based Values\r\n\t\t_.path = RVS.F.getConcVals(_.path, RVS.screen);\r\n\t\tvar keys = _.path.split(\".\"),\r\n\t\tbug = false;\r\n\r\n\t\t// UPDATE OBJECT PATH\r\n\t\ttry {\r\n\t\t\t// these replace eval calls below\r\n\t\t\t_.old = RVS.F.getDeepValue(RVS.SLIDER, _.path);\r\n\t\t\tRVS.F.writeDeepPath(RVS.SLIDER, _.path, _.val);\r\n\t\t\t_.lastkey = keys[keys.length-1];\r\n\t\t}\r\n\t\tcatch(e) { bug = true; console.log(\"Object Path Does Not Exists:\"+_.path);  }\r\n\r\n\t\t// UPDATE RESPOSNIVE VALUES ON LAYERS\r\n\t\tif ( bug!==true && _.ignoreResponsive!==true && (keys[keys.length-1]===\"v\" || keys[keys.length-2]===\"v\")) {\r\n\t\t\t_.uid = _.uid===undefined ? keys[jQuery.inArray(\"layers\",keys)+1] : _.uid;\r\n\t\t\tif (_.editedPath===undefined) {\r\n\t\t\t\t_.editedPath = \"\";\r\n\t\t\t\tvar i =0;\r\n\t\t\t\twhile (keys[i]!==\"v\" && i<keys.length) { _.editedPath += keys[i]+\".\"; i++;}\r\n\t\t\t\t_.editedPath += 'e';\r\n\t\t\t}\r\n\r\n\t\t\tvar evalEpath = '[\"'+(_.editedPath.split('.')).join('\"][\"')+'\"]',\r\n\t\t\tbug = false;\r\n\t\t\ttry{\r\n\t\t\t\tif (_.wasEdited!==undefined && _.undoRedo===\"undo\")\r\n\t\t\t\t\tRVS.F.writeDeepPath(RVS.SLIDER, _.editedPath, _.wasEdited);\r\n\t\t\t\telse {\r\n\t\t\t\t\t_.wasEdited = RVS.F.getDeepValue(RVS.SLIDER, _.editedPath);\r\n\t\t\t\t\tRVS.F.writeDeepPath(RVS.SLIDER, _.editedPath, true);\r\n\r\n\t\t\t\t}\r\n\t\t\t} catch(e) { bug=true; console.log(e);}\r\n\t\t\tif (bug!==true) RVS.F.intelligentUpdate({calcShrink:true, iii:RVS.F.isIntelligentInherited(_.uid), key:(keys[keys.length-1]===\"v\" ? keys[keys.length-3] : keys[keys.length-4]), index:keys[keys.length-1], uid:_.uid, slide:_.slide});\r\n\t\t}\r\n\r\n\t\t// CALL EVENT\r\n\t\tif (_.evt!==undefined && _.evt!=='' && ignoreEvents!==true) RVS.DOC.trigger(_.evt,_.evtparam);\r\n\t\t// BACKUP THE CHANGES\r\n\t\tif (_.ignoreBackup!==true) \tRVS.F.backup(_);\r\n\r\n\t};\r\n\r\n\tRVS.F.updateLayerObj = function(_) {\r\n\t\tvar newBGroup=\"none\";\r\n\t\tif (RVS.S.bckpGrp===false && RVS.selLayers.length>1) {\r\n\t\t\tnewBGroup = _.path;\r\n\t\t\tvar obj = {path:_.path,icon:\"layers\",lastkey:\"layer\", type:\"layer\"};\r\n\t\t\tobj.id = \"MultipleLayers\";\r\n\r\n\t\t\tRVS.F.openBackupGroup(undoRedoTranslate(obj));\r\n\t\t}\r\n\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\tif (_.evt!==undefined) {\r\n\t\t\t\t_.evtparam = _.evtparam===undefined ? {} : _.evtparam;\r\n\t\t\t\t_.evtparam.layerid = RVS.selLayers[lid];\r\n\t\t\t}\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".layers.\"+RVS.selLayers[lid]+\".\"+_.path,val:_.val,evt:_.evt, evtparam:_.evtparam,  uid:RVS.selLayers[lid], ignoreBackup:_.ignoreBackup});\r\n\t\t\tif (_.ignoreRedraw!==true) RVS.F.drawHTMLLayer({uid:RVS.selLayers[lid]});\r\n\t\t}\r\n\t\tif (newBGroup!==\"none\")\r\n\t\t\tRVS.F.closeBackupGroup({id:\"MultipleLayers\"});\r\n\t};\r\n/************************************\r\n - BACKUP / RESTORE / UNDO / REDO -\r\n*************************************/\r\n\r\n\r\n\t/**\r\n\tREDO AND UNDO GROUPS WITH MORE THAN 1 STEP IN THE SAME TIME\r\n\t**/\r\n\tRVS.F.openBackupGroup = function(obj) {\r\n\t\tobj.steps = [];\r\n\t\tRVS.S.bckpGrp = obj;\r\n\t\tRVS.S.bckpGrp.chngamount = 0;\r\n\t};\r\n\r\n\tRVS.F.closeBackupGroup = function(obj) {\r\n\t\tif (!obj.ignore) {\r\n\t\t\tRVS.S.bckpGrp.close=true;\r\n\t\t\tRVS.F.backup(RVS.S.bckpGrp);\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.ignoreEventsOpen = function() {\r\n\t\tignoreEvents = true;\r\n\t};\r\n\r\n\tRVS.F.ignoreEventsClose = function() {\r\n\t\tignoreEvents = false;\r\n\t};\r\n\r\n\t/**\r\n\tRECORD BACKUP STEP\r\n\t**/\r\n\tRVS.F.backup = function(obj) {\r\n\r\n\t\tif (RVS.S.ovMode===true || (obj.force!==true && RVS.S.bckpGrp.close!==true && obj.val === obj.old)) return;\r\n\t\tif (RVS.S.bckpGrp != false && RVS.S.bckpGrp.close!==true) {\r\n\t\t\tRVS.S.bckpGrp.steps.push(obj);\r\n\t\t\tRVS.S.bckpGrp.chngamount++;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tRVS.F.clearRedoList();\r\n\r\n\t\t\tvar res = RVS.S.bckpGrp!=false ? {icon:RVS.S.bckpGrp.icon, txt:RVS.S.bckpGrp.txt, lastkey:RVS.S.bckpGrp.chngamount} : obj.icon!==undefined && obj.txt!==undefined ? {icon:obj.icon, txt:obj.txt, lastkey:obj.lastkey} : undoRedoTranslate(obj),\r\n\t\t\t\tstepspan = document.createElement('span');\r\n\t\t\tobj.stepElement = RVS.F.cE({t:'li',cN:\"undoredostep toolbar_listelement\"});\r\n\t\t\tstepspan.style.display =\"inline-block\";\r\n\t\t\tstepspan.style.minWidth =\"150px\";\r\n\t\t\tstepspan.textContent = res.txt;\r\n\t\t\tobj.stepElement.appendChild(RVS.F.cI({c:res.icon}));\r\n\t\t\tobj.stepElement.appendChild(stepspan);\r\n\r\n\t\t\tRVS.S.undoList.push(obj);\r\n\t\t\tif (RVS.S.undoList.length>30) {\r\n\t\t\t\tRVS.S.undoList.splice(0,1);\r\n\t\t\t\tRVS.C.undo.removeChild(RVS.C.undo.querySelector('li'));\r\n\t\t\t}\r\n\t\t\tRVS.C.undo.appendChild(obj.stepElement);\r\n\t\t\tRVS.S.bckpGrp = false;\r\n\t\t}\r\n\t\tundoRetSteps = undoRetSteps + 1;\r\n\t\tRVS.S.need_to_save = true;\r\n\t};\r\n\r\n\tRVS.F.clearRedoList = function() {\r\n\t\tRVS.S.redoList = [];\r\n\t\tRVS.C.redo.innerHTML = \"\";\r\n\t};\r\n\t/**\r\n\tUNDO THE LAST STEP(S)\r\n\t**/\r\n\tRVS.F.undo = function(obj) {\r\n\t\tvar todo;\r\n\r\n\t\tif (obj===undefined || obj.step>=1) {\r\n\t\t\tobj.step = obj.step===undefined ? 1 : obj.step;\r\n\t\t\tif (RVS.S.undoList.length>obj.step-1) {\r\n\t\t\t\tfor (var i=0;i<obj.step;i++) {\r\n\t\t\t\t\tvar step = RVS.S.undoList.pop();\r\n\t\t\t\t\tRVS.S.redoList.push(step);\r\n\t\t\t\t\ttodo = makeUndoRedoStep({todo:todo, step:step, valkey:\"old\"});\r\n\t\t\t\t}\r\n\t\t\t\tupdateScenesBackup({todo:todo,dir:\"undo\"});\r\n\t\t\t\tRVS.F.showInfo({content:\"Succesfully Undone \"+obj.step+\" Steps.\", type:\"success\", showdelay:0, hidedelay:1, hideon:\"\", event:\"\" });\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.F.updateBackupList();\r\n\t};\r\n\t/**\r\n\tREDO THE LAST STEP(S)\r\n\t**/\r\n\tRVS.F.redo = function(obj) {\r\n\t\tvar todo;\r\n\t\tif (obj===undefined || obj.step>=1) {\r\n\t\t\tobj.step = obj.step===undefined ? 1 : obj.step;\r\n\t\t\tif (RVS.S.redoList.length>obj.step-1) {\r\n\t\t\t\tfor (var i=0;i<obj.step;i++) {\r\n\t\t\t\t\tvar step = RVS.S.redoList.pop();\r\n\t\t\t\t\tRVS.S.undoList.push(step);\r\n\t\t\t\t\ttodo = makeUndoRedoStep({todo:todo, step:step, valkey:\"val\"});\r\n\t\t\t\t}\r\n\t\t\t\tupdateScenesBackup({todo:todo,dir:\"redo\"});\r\n\t\t\t\tRVS.F.showInfo({content:\"Succesfully Redone \"+obj.step+\" Steps.\", type:\"success\", showdelay:0, hidedelay:1, hideon:\"\", event:\"\" });\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tRVS.F.updateBackupList();\r\n\t};\r\n\t/**\r\n\tREWRITE UNDO/REDO LIST\r\n\t**/\r\n\tRVS.F.updateBackupList = function() {\r\n\r\n        RVS.C.undo.innerHTML  = \"\";\r\n        RVS.C.redo.innerHTML  = \"\";\r\n        for (var ui in RVS.S.undoList) if (RVS.S.undoList.hasOwnProperty(ui)) {\r\n\t\t\tif (RVS.S.undoList.length>0 && RVS.S.undoList[ui]!==undefined)\r\n                RVS.C.undo.appendChild(RVS.S.undoList[ui].stepElement);\r\n        }\r\n\t\tfor (var ri in RVS.S.redoList) if (RVS.S.redoList.hasOwnProperty(ri)) {\r\n\t\t\tif (RVS.S.redoList.length>0 && RVS.S.redoList[ri]!==undefined)\r\n                RVS.C.redo.prepend(RVS.S.redoList[ri].stepElement);\r\n        }\r\n\t\tjQuery('#undoredowrap').RSScroll(\"update\");\r\n\t};\r\n\r\n\r\n\t// REDRAW SCENES AS GOOD AS POSSIBLE AFTER REDO / UNDO PROCESS\r\n\tfunction updateScenesBackup(obj) {\r\n\r\n\t\tif (obj.todo.SliderSettings===true) {\r\n\t\t\tRVS.F.sliderUpdateAllFields(true);\r\n\t\t\tjQuery('.sliderinput').trigger('init');\r\n\t\t}\r\n\t\tobj.todo.slide = obj.todo.forceSelectSlide!==undefined ? obj.todo.forceSelectSlide : obj.todo.slide;\r\n\t\tobj.todo.slide = obj.todo.slide===undefined ? RVS.S.slideId : obj.todo.slide;\r\n\t\tobj.todo.slide = RVS.F._inArray(obj.todo.slide,RVS.SLIDER.slideIDs)>=0 ? obj.todo.slide : RVS.SLIDER.slideIDs[0];\r\n        obj.todo.redrawLayers = true;\r\n\r\n        if (obj.todo.SlideSettings===true)\r\n            if (jQuery('.slide_list_element.sortable_slide_list_element').length===0) obj.todo.mode = \"sliderlayout\"; else RVS.F.setSlideFocus({slideid:obj.todo.slide});\r\n\r\n\r\n\t\tif (obj.todo.SlideList===true) RVS.F.reSortSlides();\r\n\r\n        var ignoreRebuildLayerList = false;\r\n        if((obj.todo.mode==\"slidelayout\" && (obj.SlideSettings || \"\"+obj.todo.slide!==\"\"+RVS.S.slideId)) || (obj.todo.mode!==\"slidelayout\" && obj.todo.mode!==undefined)) {\r\n            RVS.F.mainMode({mode:obj.todo.mode,set:true, slide:obj.todo.slide});\r\n            ignoreRebuildLayerList = true;\r\n            obj.todo.redrawLayers = false;\r\n        }\r\n\r\n\r\n\r\n        if (obj.todo.mode===\"slidelayout\" && !obj.todo.layerAndSlideMode) {\r\n            if (obj.todo.layer!==undefined)\r\n\t\t\t\tRVS.DOC.trigger('changeToLayerMode');\r\n\t\t\telse\r\n\t\t\t\tRVS.DOC.trigger('changeToSlideMode');\r\n        }\r\n\r\n\t\t//REBUILD LAYER LIST\r\n        if (!ignoreRebuildLayerList && (obj.todo.rebuildLayerList || obj.todo.LayerSorting===true)) {\r\n            if (obj.todo.mode!==\"slidelayout\" || obj.todo.forceRebuildLayerList) {\r\n\t\t\t\tRVS.H = {};\r\n                RVS.F.buildLayerLists({force:true,ignoreSelectLayers:obj.todo.lastSelectedLayers!==undefined});\r\n                RVS.F.updateLayerToggleActionWaits();\r\n                RVS.DOC.trigger(\"allLayersRebuilt\");\r\n                obj.todo.redrawLayers = false;\r\n\t\t\t}\r\n\t\t\tRVS.F.reOrderHTMLLayers();\r\n\t\t}\r\n\r\n\t\t//UPDATE FRAMES ON LAYERS IF NEEDED\r\n\t\tif (obj.todo.framesToAdd!==undefined) {\r\n\t\t\tfor (var i in obj.todo.framesToAdd) {\r\n\t\t\t\tif(!obj.todo.framesToAdd.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.F.addLayerFrameOnDemand(RVS.L[obj.todo.framesToAdd[i].layerid], obj.todo.framesToAdd[i].el, obj.todo.framesToAdd[i].newframe);\r\n\t\t\t\tRVS.F.getFrameOrder({layerid:obj.todo.framesToAdd[i].layerid});\r\n\t\t\t\tRVS.F.updateFramesZIndexes({layerid:obj.todo.framesToAdd[i].layerid});\r\n\t\t\t}\r\n\t\t\tRVS.DOC.trigger('updateKeyFramesList');\r\n\t\t}\r\n\r\n\t\t//UPDATE FRAME SIZES & RENDER ANIMS\r\n\t\tif (obj.todo.framesToRedraw!==undefined) {\r\n\t\t\tfor (var i in obj.todo.framesToRedraw) {\r\n\t\t\t\tif(!obj.todo.framesToRedraw.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.F.updateLayerFrames({layerid:obj.todo.framesToRedraw[i]});\r\n\t\t\t\tRVS.F.renderLayerAnimation({layerid:obj.todo.framesToRedraw[i]});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (obj.todo.framesToReorder!==undefined) {\r\n\t\t\tfor (var i in obj.todo.framesToReorder) {\r\n\t\t\t\tif(!obj.todo.framesToReorder.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.F.getFrameOrder({layerid:obj.todo.framesToReorder[i].layerid});\r\n\t\t\t\tRVS.F.updateFramesZIndexes({layerid:obj.todo.framesToReorder[i].layerid});\r\n\t\t\t}\r\n\t\t\tRVS.DOC.trigger('updateKeyFramesList');\r\n\t\t}\r\n\r\n\r\n\t\tif (obj.todo.lastSelectedLayers!==undefined)\r\n\t\t\tfor (var i in obj.todo.lastSelectedLayers) {\r\n\t\t\t\tif(!obj.todo.lastSelectedLayers.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (RVS.L[obj.todo.lastSelectedLayers[i]]!==undefined) {\r\n\t\t\t\t\tRVS.F.selectLayers({id:obj.todo.lastSelectedLayers[i],action:\"add\"});\r\n\t\t\t\t\tobj.todo.redrawLayers = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t//RELOAD IMAGE SOURCES IF NEEDED\r\n\t\tfor (var i in obj.todo.updateLayerImageSrcList) {\r\n\t\t\tif(!obj.todo.updateLayerImageSrcList.hasOwnProperty(i)) continue;\r\n\t\t\tRVS.F.updateLayerImageSrc({},{layerid:obj.todo.updateLayerImageSrcList[i]});\r\n\t\t}\r\n\r\n\t\t// REDRAW LAYERS IF NECESSARY\r\n\t\tif (obj.todo.redrawLayers && obj.todo.layers !==undefined && obj.todo.layers.length>0) for (var i in obj.todo.layers) if (obj.todo.layers.hasOwnProperty(i)) RVS.F.drawHTMLLayer({uid:obj.todo.layers[i]});\r\n\t\tif (obj.todo.callBack!==undefined) obj.todo.callBack();\r\n\t\tif (obj.dir==\"undo\" && obj.todo.rebuildLayerList) {\r\n\t\t\tfor (var i in obj.todo.step.steps) {\r\n\t\t\t\tif (!obj.todo.step.steps.hasOwnProperty(i) || obj.todo.step.id!==\"removeLayer\") continue;\r\n\t\t\t\tRVS.F.updateTriggeringActionRelations(obj.todo.step.steps[i].path);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tRVS.DOC.trigger(\"SceneUpdatedAfterRestore\",obj);\r\n\r\n\t}\r\n\r\n\t// CHECK ALL THE PROCESSES WE NEED TO REDO AFTER REDO/UNDO STEP\r\n\tfunction checkUndoRedoTodos(obj) {\r\n\r\n\r\n\r\n\t\tvar  n = RVS.F.isNumeric(obj.path);\r\n\t\tif (obj.backupType!==undefined) {\r\n\t\t\tobj.todo.SlideList=true;\r\n\t\t\tobj.todo.SliderSettings=true;\r\n\t\t\tobj.todo.SlideSettings=true;\r\n\t\t\tobj.todo.LayerSettings=true;\r\n\t\t\tobj.todo.LayerSorting=true;\r\n\t\t\tobj.todo.layerAndSlideMode=false;\r\n\r\n\t\t}\r\n\r\n\t\t//SLIDER SETTINGS HAS BEEN CHANGED\r\n\t\tif (!n && obj.path.indexOf('settings')===0) {\r\n\t\t\tobj.todo.SliderSettings = true;\r\n\t\t\tobj.todo.mode=\"sliderlayout\";\r\n\t\t}\r\n\r\n\t\t//LAYER SETTINGS HAS BEEN CHANGED\r\n\t\tif (!n && obj.path.indexOf('.layers.')>=0 && obj.path.indexOf('.layers.')<=6) {\r\n\t\t\tobj.todo.lastSelectedLayers = RVS.selLayers;\r\n\t\t\tobj.todo.LayerSettings = true;\r\n\t\t\tvar _split = obj.path.split(\".\"),\r\n\t\t\t\t_index = jQuery.inArray('layers',_split);\r\n\t\t\tobj.todo.slide = _split[(_index-1)];\r\n\t\t\tobj.todo.layer = _split[(_index+1)];\r\n\t\t\tobj.todo.layers = obj.todo.layers===undefined ? [] : obj.todo.layers;\r\n\t\t\tif (jQuery.inArray(_split[(_index+1)],obj.todo.layers)===-1) obj.todo.layers.push(_split[(_index+1)]);\r\n\t\t\tobj.todo.mode = \"slidelayout\";\r\n\r\n\t\t}\r\n\t\t// IF SLIDE OR LAYERS ARE IN GAME, WE NEED TO RESET CACHE FOR THOSE ELEMENTS\r\n\t\tif (!n && obj.path.indexOf('.slide.')>=0 && obj.path.indexOf('.slide.')<=6){\r\n\t\t\tobj.todo.SlideSettings = true;\r\n\t\t\tvar _split = obj.path.split(\".\"),\r\n\t\t\t\t_index = jQuery.inArray('slide',_split);\r\n\t\t\tobj.todo.slide = _split[(_index-1)];\r\n\t\t\tobj.todo.mode = \"slidelayout\";\r\n\t\t}\r\n\r\n\t\tif (!n &&\r\n\t\t\t\t(obj.path.indexOf('.slide.timeline.delay')>=0 ||\r\n\t\t\t\t obj.path.indexOf('.slide.slideChange.speed')>=0)\r\n\t\t\t)\r\n\t\t\tobj.todo.layerAndSlideMode = true;\r\n\r\n\t\tif (obj.path==='slideIDs') obj.todo.SlideList = true;\r\n\r\n\t\tif (obj.groupid===\"layersorting\" || obj.groupid===\"layersorting_layermovement\") {\r\n\t\t\tobj.todo.LayerSorting = true;\r\n\t\t\tobj.todo.slide = obj.path.split(\".\")[0];\r\n\t\t}\r\n\t\treturn obj.todo;\r\n\t}\r\n\r\n\r\n\t/*\r\n\tREDO/UNDO LAST STEP(S)\r\n\t*/\r\n\tfunction makeUndoRedoStep(obj) {\r\n\t\tvar step = obj.step,\r\n\t\t\ttodo = obj.todo === undefined ? {SlideList:false,SliderSettings:false,SlideSettings:false,LayerSettings:false,LayerSorting:false} : obj.todo,\r\n\t\t\tevts = [];\r\n\t\ttodo.updateLayerImageSrcList = todo.updateLayerImageSrcList===undefined ? [] : todo.updateLayerImageSrcList;\r\n\t\ttodo.slides = todo.slides===undefined ? [] : todo.slides;\r\n\t\t//UNDO/REDO GROUP OF CHANGES\r\n\t\tif ( step.chngamount!==undefined) {\r\n\t\t\t// 1 OR MORE STEPS UNDO/REDO\r\n\t\t\tfor (var stepindex in step.steps) {\r\n\t\t\t\tif(!step.steps.hasOwnProperty(stepindex)) continue;\r\n\t\t\t\tvar substep = step.steps[stepindex];\r\n\t\t\t\tif (obj.valkey===\"old\")\r\n\t\t\t\t\tvar substep = step.steps[step.chngamount-(stepindex)-1];\r\n\r\n\t\t\t\tif (substep.backupType!==undefined){\r\n\r\n\t\t\t\t\tif (substep.bckpGrType===\"addlayer\" || substep.bckpGrType===\"removelayer\" || substep.bckpGrType===\"layerTemplateAnimation\") todo.forceRebuildLayerList=true;\r\n\r\n\t\t\t\t\tswitch (substep.backupType) {\r\n\t\t\t\t\t\tcase \"layerFrames\":\r\n\t\t\t\t\t\t\tif (jQuery.isEmptyObject(substep[obj.valkey])) {\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tRVS.SLIDER[substep.slide].layers[substep.layer].timeline.frames = RVS.F.safeExtend(true,{},substep[obj.valkey]); //UNDO/REDO FULL BACKUP\r\n\t\t\t\t\t\t\t\ttodo.framesToRedraw = todo.framesToRedraw===undefined ? [] : todo.framesToRedraw;\r\n\t\t\t\t\t\t\t\ttodo.framesToRedraw.push(substep.layer);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"clipPath\":\r\n\t\t\t\t\t\t\tif (jQuery.isEmptyObject(substep[obj.valkey])) {\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tRVS.SLIDER[substep.slide].layers[substep.layer].timeline.clipPath = RVS.F.safeExtend(true,{},substep[obj.valkey]); //UNDO/REDO FULL BACKUP\r\n\t\t\t\t\t\t\t\ttodo.framesToRedraw = todo.framesToRedraw===undefined ? [] : todo.framesToRedraw;\r\n\t\t\t\t\t\t\t\ttodo.framesToRedraw.push(substep.layer);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"singleFrame\":\r\n\t\t\t\t\t\t\tif (jQuery.isEmptyObject(substep[obj.valkey])) {\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tRVS.SLIDER[substep.slide].layers[substep.layer].timeline.frames[substep.frame] = RVS.F.safeExtend(true,{},substep[obj.valkey]); //UNDO/REDO FULL BACKUP\r\n\t\t\t\t\t\t\t\ttodo.framesToRedraw = todo.framesToRedraw===undefined ? [] : todo.framesToRedraw;\r\n\t\t\t\t\t\t\t\ttodo.framesToRedraw.push(substep.layer);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"layerLoop\":\r\n\t\t\t\t\t\t\tif (jQuery.isEmptyObject(substep[obj.valkey])) {\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tRVS.SLIDER[substep.slide].layers[substep.layer].timeline.loop = RVS.F.safeExtend(true,{},substep[obj.valkey]); //UNDO/REDO FULL BACKUP\r\n\t\t\t\t\t\t\t\ttodo.framesToRedraw = todo.framesToRedraw===undefined ? [] : todo.framesToRedraw;\r\n\t\t\t\t\t\t\t\ttodo.framesToRedraw.push(substep.layer);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"frame\":\r\n\r\n\t\t\t\t\t\t\tif (jQuery.isEmptyObject(substep[obj.valkey])) {\r\n\t\t\t\t\t\t\t\tdelete RVS.SLIDER[substep.slide].layers[substep.layer].timeline.frames[substep.frame];\r\n\t\t\t\t\t\t\t\tjQuery('#'+substep.slide+\"_\"+substep.layer+\"_\"+substep.frame).remove();\r\n\t\t\t\t\t\t\t\ttodo.framesToReorder = todo.framesToReorder===undefined ? [] : todo.framesToReorder;\r\n\t\t\t\t\t\t\t\ttodo.framesToReorder.push({layerid:substep.layer});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tRVS.SLIDER[substep.slide].layers[substep.layer].timeline.frames[substep.frame] = RVS.F.safeExtend(true,{},substep[obj.valkey]); //UNDO/REDO FULL BACKUP\r\n\t\t\t\t\t\t\t\ttodo.framesToAdd = todo.framesToAdd===undefined ? [] : todo.framesToAdd;\r\n                                todo.framesToAdd.push({layerid:substep.layer, el: document.getElementById('tllayerlist_element_'+substep.slide+'_'+substep.layer), newframe:substep.frame});\r\n                            }\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\tif (jQuery.isEmptyObject(substep[obj.valkey])) {\r\n\t\t\t\t\t\t\t\tdelete RVS.SLIDER[substep.path];\r\n\t\t\t\t\t\t\t\tsubstep.cache = jQuery('#slide_list_element_'+substep.path).removeClass(\"selected\").detach();\r\n\t\t\t\t\t\t\t\ttodo.forceSelectSlide = substep.beforeSelected;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tRVS.SLIDER[substep.path] = RVS.F.safeExtend(true,{},substep[obj.valkey]); //UNDO/REDO FULL BACKUP\r\n                                if (substep.cache!==undefined) RVS.C.slideList.append(substep.cache);\r\n                                if (jQuery.inArray(substep.bckpGrType,[\"addnewslide\",\"duplicateslide\"])>=0)\r\n\t\t\t\t\t\t\t\t\ttodo.forceSelectSlide = substep.path;\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\ttodo.forceSelectSlide = substep.beforeSelected;\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttodo.mode = \"slidelayout\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\t\tif (jQuery.isEmptyObject(substep[obj.valkey])) {\r\n\t\t\t\t\t\t\t\tdelete RVS.SLIDER[substep.path];\t//Maybe Wrong !?!?\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tRVS.F.writeDeepPath(RVS.SLIDER,substep.path,RVS.F.safeExtend(true,{},substep[obj.valkey]));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ttodo.callBack = substep.callBack;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"array\":\r\n\t\t\t\t\t\t\tif (substep[obj.valkey]!==undefined) {\r\n\t\t\t\t\t\t\t\tRVS.F.writeDeepPath(RVS.SLIDER,substep.path,substep[obj.valkey]);\r\n\t\t\t\t\t\t\t\ttodo.callBack = substep.callBack;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"layer\":\r\n\t\t\t\t\t\t\tif (jQuery.isEmptyObject(substep[obj.valkey])) {\r\n\r\n\t\t\t\t\t\t\t\tdelete RVS.SLIDER[(substep.slideid!==undefined ? substep.slideid : RVS.S.slideId)].layers[substep.path];\r\n\t\t\t\t\t\t\t\tjQuery('#_lc_'+(substep.slideid!==undefined ? substep.slideid : RVS.S.slideId)+'_'+substep.path+'_').remove();\r\n\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\t\tRVS.SLIDER[(substep.slideid!==undefined ? substep.slideid : RVS.S.slideId)].layers[substep.path] = RVS.F.safeExtend(true,{},substep[obj.valkey]); //UNDO/REDO FULL BACKUP\r\n\r\n\t\t\t\t\t\t\ttodo.rebuildLayerList = true;\r\n\t\t\t\t\t\t\ttodo.layer = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"full\":\r\n\t\t\t\t\t\t\tRVS.SLIDER = RVS.F.safeExtend(true,{},substep[obj.valkey]); //UNDO/REDO FULL BACKUP\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:substep.path,val:substep[obj.valkey], ignoreBackup:true,  ignoreResponsive: substep.ignoreResponsive, wasEdited:substep.wasEdited, editedPath:substep.editedPath, undoRedo:(obj.valkey===\"old\" ? \"undo\" : \"redo\") });// UNDO / REDO SINGLE STEP\r\n\t\t\t\t}\r\n\t\t\t\tif (substep.evt===\"updatelayerimagesrc\" && jQuery.inArray(todo.updateLayerImageSrcList.indexOf,substep.uid)===-1) todo.updateLayerImageSrcList.push(substep.uid);\r\n\t\t\t\ttodo = checkUndoRedoTodos({todo:todo, path:substep.path, groupid:step.id});\r\n\t\t\t}\r\n\t\t\tif (jQuery.inArray(todo.slide,todo.slides)===-1) todo.slides.push(todo.slide);\r\n\t\t\tif (step.id==\"layersorting_layermovement\") todo.forceRebuildLayerList=true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// VERY 1 STEP UNDO\t/ REDO\r\n\t\t\t\tif (step.backupType!==undefined){\r\n\t\t\t\t\tswitch (step.backupType) {\r\n\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\tif (jQuery.isEmptyObject(step[obj.valkey]))\r\n\t\t\t\t\t\t\t\tdelete RVS.SLIDER[step.path];\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tRVS.SLIDER[step.path] = RVS.F.safeExtend(true,{},step[obj.valkey]); //UNDO/REDO FULL BACKUP\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"full\":\r\n\t\t\t\t\t\t\tRVS.SLIDER = RVS.F.safeExtend(true,{},step[obj.valkey]); //UNDO/REDO FULL BACKUP\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:step.path,val:step[obj.valkey],ignoreBackup:true, evt:step.evt, evtparam:step.evtparam,  undoRedo:(obj.valkey===\"old\" ? \"undo\" : \"redo\"),  ignoreResponsive: step.ignoreResponsive, wasEdited:step.wasEdited, editedPath:step.editedPath}); // UNDO / REDO SINGLE STEP\r\n\t\t\t\t}\r\n\t\t\t\ttodo = checkUndoRedoTodos({todo:todo, path:step.path});\r\n\t\t\t\tif (jQuery.inArray(todo.slide,todo.slides)===-1) todo.slides.push(todo.slide);\r\n\t\t}\r\n\t\ttodo.step = obj.step;\r\n\t\treturn todo;\r\n\t}\r\n\r\n\t/*\r\n\tVISIBLE TEXT AND ICON IN REDO/UNDO LIST\r\n\t*/\r\n\tfunction undoRedoTranslate(obj) {\r\n\r\n\t\tif (obj!==undefined && obj.type===undefined) obj.type = obj.path.indexOf(RVS.S.slideId+\".layers.\")>=0 ? \"layer\" : obj.type;\r\n\r\n\t\tvar _ = obj.path,\r\n\t\t\t_addon = _.indexOf('addOns') >= 0 ? _.split('addOns.')[1] : \"none\",\r\n\t\t\tr,\r\n\t\t\ti = obj.type===\"layer\" ? \"layers\" : \"undo\",\r\n\t\t\tlastkey = obj.path.split(\".\");\r\n\r\n\t\tlastkey = lastkey[lastkey.length-1];\r\n\r\n\t\tr = _addon!==\"none\" ? _addon.replace(\"revslider-\",\"\").replace(\"-addon.\",\" \"+(obj.type===\"layer\" ? \"layer\" : \"Slide\")+\" \") :\r\n\t\t\t_.indexOf('settings.size.width')>=0 ? 'Layer Container Width' :\r\n\t\t\t_.indexOf('settings.size.height')>=0 ? 'Layer Container Height' :\r\n\t\t\t_.indexOf('settings.size.minHeight')>=0 ? 'Slider Min Height' :\r\n\t\t\t_.indexOf('settings.size.maxWidth')>=0 ? 'Slider Max Width' :\r\n\t\t\t_.indexOf('settings.size')>=0 ? 'Slider Size Settings' :\r\n\t\t\t_.indexOf('settings.carousel')>=0 ? 'Carousel Settings' :\r\n\t\t\t_.indexOf('slide.bg')>=0 ? 'Slide Background' :\r\n\t\t\t_.indexOf('.fontWeight')>=0 ? 'Font Weight' :\r\n\t\t\t_.indexOf('.fontSize')>=0 ? 'Font Size' :\r\n\t\t\t_.indexOf('.fontFamily')>=0 ? 'Font Family' :\r\n\t\t\t_.indexOf('.fontStyle')>=0 ? 'Font Style' :\r\n\t\t\t_.indexOf('.textTransform')>=0 ? 'Text Transform' :\r\n\t\t\t_.indexOf('.idle.selectable')>=0 ? 'Layer Markable' :\r\n\t\t\t_.indexOf('.textDecoration')>=0 ? 'Text Decoration' :\r\n\t\t\t_.indexOf('slide.attributes')>=0 ? 'Slide Attributes' :\r\n\t\t\t_.indexOf('.media')>=0 && obj.type===\"layer\" ? 'Media ('+lastkey+')' :\r\n\t\t\t_.indexOf('alias')>=0 && (_.indexOf('.layers')>=0  || obj.type===\"layer\") ? 'Layer Alias' :\r\n\t\t\t_.indexOf('slide.slideChange.speed')>=0 ? 'Slide Transition Speed':\r\n\t\t\t_.indexOf('timeline.frames') >= 0 ? 'Layer Animation ('+lastkey+')' :\r\n\t\t\t_ === \"slideIDs\" ? 'Slide Order Change' :\r\n\t\t\t\t_;\r\n\r\n\t\ti = _addon!==\"none\" ? 'extension' :\r\n\t\t\t_.indexOf('settings.size.width')>=0 ? 'open_with' :\r\n\t\t\t_.indexOf('settings.size.height')>=0 ? 'open_with' :\r\n\t\t\t_.indexOf('settings.size.minHeight')>=0 ? 'vertical_align_bottom' :\r\n\t\t\t_.indexOf('settings.size.maxWidth')>=0 ? 'trending_flat' :\r\n\t\t\t_.indexOf('settings.size')>=0 ? 'exposure' :\r\n\t\t\t_.indexOf('settings.carousel')>=0 ? 'view_carousel' :\r\n\t\t\t_.indexOf('slide.bg')>=0 ? 'image' :\r\n\t\t\t_.indexOf('.fontWeight')>=0 ? 'font_download' :\r\n\t\t\t_.indexOf('.fontSize')>=0 ? 'text_format' :\r\n\t\t\t_.indexOf('.fontFamily')>=0 ? 'translate' :\r\n\t\t\t_.indexOf('.fontStyle')>=0 ? 'format_italic' :\r\n\t\t\t_.indexOf('.textTransform')>=0 ? 'text_fields' :\r\n\t\t\t_.indexOf('.idle.selectable')>=0 ? 'select_all' :\r\n\t\t\t_.indexOf('.textDecoration')>=0 ? 'text_format' :\r\n\t\t\t_.indexOf('slide.attributes')>=0 ? 'speaker_notes' :\r\n\t\t\t_.indexOf('.media')>=0 && obj.type===\"layer\" ? 'videocam' :\r\n\t\t\t_.indexOf('alias')>=0 && (_.indexOf('.layers')>=0  || obj.type===\"layer\") ? 'title' :\r\n\t\t\t_.indexOf('slide.slideChange.speed')>=0 ? 'timelapse' :\r\n\t\t\t_.indexOf('timeline.frames') >= 0 ? 'theaters' :\r\n\t\t\t_ === \"slideIDs\" ? 'sort' :\r\n\t\t\t\ti;\r\n\r\n\t\treturn {txt:r,icon:i, lastkey:obj.lastkey};\r\n\t}\r\n\r\n\r\n\r\n\r\n/****************************************************************************+\r\n\t-\tICON LIBRARY BUILDER FOR QUICK PICK OF ICONS \t-\r\n*****************************************************************************/\r\n\tRVS.F.showIconPicker = function(_) {\r\n\t\t// CREATE CONTAINER IF NEEDED\r\n\t\tRVS.F.container = RVS.F.container===undefined ? jQuery('<div id=\"rs_iconselector\"><div class=\"rs_iconselector_header\"><input type=\"text\" placeholder=\"'+RVS_LANG.searcforicon+'\" id=\"rs_iconselector_search\"><i class=\"material-icons closers_iconselector\">close</i></i></div>') : RVS.F.container;\r\n\t\tif (RVS.F.list===undefined) {\r\n\t\t\tRVS.F.list = jQuery('<div id=\"rs_iconselector_inner\"></div>');\r\n\t\t\tRVS.F.container.append(RVS.F.list);\r\n\t\t}\r\n\t\t// APPEND TO THE RIGHT CONTAINER\r\n\t\tif (_.parent!==undefined) jQuery(_.parent).append(RVS.F.container);\r\n\r\n\t\t// ADD CLASS IF NEEDED\r\n\t\tif (_.classlist!==undefined) RVS.F.container[0].className= _.classlist;\r\n\r\n\t\tRVS.F.insertinto = jQuery(_.insertinto);\r\n\t\tRVS.S.icon_closeafterpick = _.closeafterpick;\r\n\t\tRVS.S.icon_shortreturn = _.shortreturn;\r\n\r\n\t\tif (_.insertinto===\"#ta_layertext\" && RVS.F.insertinto[0].style.display===\"none\")\r\n\t\t\tRVS.F.insertinto = jQuery('#ta_toggletext');\r\n\r\n\t\t// LOAD LIBRARY IF NOT YET DONE AND SHOW CONTAINER\r\n\t\tif (RVS.LIB.OBJ==undefined || RVS.LIB.OBJ.items===undefined || RVS.LIB.OBJ.items.fonticons===undefined)\r\n\t\t\tRVS.F.openObjectLibrary({types:[\"fonticons\"],filter:\"all\", selected:[\"fonticons\"], event:\"showIconToTextLayerForm\", silent:true});\r\n\t\telse\r\n\t\t\tRVS.DOC.trigger('showIconToTextLayerForm');\r\n\t};\r\n\tRVS.F.initIconPicker = function() {\r\n\t\t// CREATE LISTENERS (RUN ONLY 1x)\r\n\t\tif (!RVS.F.initialized) {\r\n\t\t\tRVS.F.initialized = true;\r\n\r\n\t\t\t// SHOW ICON TO TEXT LAYER FORM LISTENER\r\n\t\t\tRVS.DOC.on('showIconToTextLayerForm',function(){\r\n\t\t\t\tRVS.F.open = true;\r\n\t\t\t\t// BUILD LIST IF NOT READY YET\r\n\t\t\t\tif (!RVS.V.buildIconPicker) {\r\n\t\t\t\t\tRVS.V.buildIconPicker=true;\r\n\t\t\t\t\tfor (var i in RVS.LIB.OBJ.items.fonticons) {\r\n\t\t\t\t\t\tif(!RVS.LIB.OBJ.items.fonticons.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tvar icon = RVS.LIB.OBJ.items.fonticons[i];\r\n\t\t\t\t\t\tif (icon.tags===undefined) continue;\r\n\t\t\t\t\t\tif (RVS.C[icon.tags[0]]===undefined) {\r\n\t\t\t\t\t\t\tRVS.C[icon.tags[0]] = jQuery('<div id=\"font_icon_subcontainer_'+icon.tags[0]+'\" class=\"font_icon_subcontainer\"><div class=\"font_icon_subcontainer_title\">'+icon.tags[0]+'</div></div>');\r\n\t\t\t\t\t\t\tRVS.F.list.append(RVS.C[icon.tags[0]]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (icon.tags[0]===\"MaterialIcons\")\r\n\t\t\t\t\t\t\tRVS.C[icon.tags[0]].append('<i data-title=\"'+icon.title+'\" data-fonticon=\"true\" class=\"material-icons\">'+icon.handle.replace(\".\",\"\")+'</i>');\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tRVS.C[icon.tags[0]].append('<i data-title=\"'+icon.title+'\" data-fonticon=\"true\" class=\"'+icon.handle.replace(\".\",\"\")+'\"></i>');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.container.show();\r\n\t\t\t\tRVS.F.list.RSScroll({wheelPropagation:false, suppressScrollX:true});\r\n\t\t\t});\r\n\r\n\t\t\t// LISTEN TO CLOSE CLICK\r\n\t\t\tRVS.DOC.on('click','.closers_iconselector', function() {\r\n\t\t\t\tRVS.F.open = false;\r\n\t\t\t\tRVS.F.container.hide();\r\n\t\t\t});\r\n\r\n\t\t\t// LISTEN TO INPUT FIELD\r\n\t\t\tRVS.DOC.on('keyup','#rs_iconselector_search',function() {\r\n\t\t\t\tif (this.value.length>1) {\r\n\t\t\t\t\tRVS.F.list.scrollTop(0);\r\n\t\t\t\t\tvar inpval = (this.value).toLowerCase();\r\n\t\t\t\t\tRVS.F.list.find('i').each(function() {\r\n\t\t\t\t\t\tif ((this.dataset.title.toLowerCase()).indexOf(inpval)>=0)\r\n\t\t\t\t\t\t\tthis.style.display=\"inline-block\";\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthis.style.display=\"none\";\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.F.list.find('i').each(function() {\r\n\t\t\t\t\t\tthis.style.display=\"inline-block\";\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t//BODY LISTENER; CLOSE IF IT IS OPENEND AND CLICKED OUTSIDE\r\n\t\t\tjQuery(document.body).on('click',function(e) {\r\n\t\t\t\tif (RVS.F.open) {\r\n\t\t\t\t\tif (e.target.id===\"rs_iconselector_search\") {\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (e.target.dataset.fonticon) {\r\n\t\t\t\t\t\t\tif (RVS.S.icon_shortreturn)\r\n\t\t\t\t\t\t\t\tRVS.F.insertinto.val(e.target.className);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tRVS.F.insertinto.val(RVS.F.insertinto.val()+'<i class=\"'+e.target.className+'\">'+(e.target.className===\"material-icons\" ? e.target.innerHTML : \"\")+'</i>');\r\n\t\t\t\t\t\t\tRVS.F.insertinto.trigger(\"change\");\r\n\t\t\t\t\t\t\tif (RVS.S.icon_closeafterpick) {\r\n\t\t\t\t\t\t\t\tRVS.F.open = false;\r\n\t\t\t\t\t\t\t\tRVS.F.container.hide();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tif (jQuery(e.target).closest('#rs_iconselector_inner').length>0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//CLICK WITHIN THE CONTAINER, IGNORE\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tRVS.F.open = false;\r\n\t\t\t\t\t\t\tRVS.F.container.hide();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} // END OF INITIALISED CHECK\r\n\t};\r\n\r\n\t// ADD ICON TO LAYER CONTENT\r\n\tRVS.DOC.on('addIcontoTextLayer',function(e,origEvent) {\r\n\t\t//Initialise the Mini Icon Selector\r\n\t\tRVS.F.initIconPicker();\r\n\t\tvar d = origEvent.event.currentTarget.dataset;\r\n\t\tRVS.F.showIconPicker({parent:d.iconparent, classlist:d.classlist, insertinto:d.insertinto, closeafterpick:d.closeafterpick, shortreturn:d.shortreturn});\r\n\t});\r\n\r\n\tRVS.F.addBodyClickListener = function(_) {\r\n\r\n\t\t// IF WE WANT TO LIMIT THE ONLY CLICkABLE ELEMENTS....\r\n\t\tjQuery(document.body).on('click.revbuilderbodyclick',function(e) {\r\n\t\t\tif (RVS.S.waitOnFeedback!==undefined && RVS.S.waitOnFeedback.allowed!==undefined) {\r\n\t\t\t\tvar clickonallow = false;\r\n\t\t\t\tfor (var i in RVS.S.waitOnFeedback.allowed) {\r\n\t\t\t\t\tif(!RVS.S.waitOnFeedback.allowed.hasOwnProperty(i)) continue;\r\n\t\t\t\t\tclickonallow = (clickonallow === true || jQuery.inArray(RVS.S.waitOnFeedback.allowed[i],e.target.classList)>=0) ? true : false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (clickonallow) {\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (RVS.S.waitOnFeedback.closeEvent!==undefined)\r\n\t\t\t\t\t\tRVS.DOC.trigger(RVS.S.waitOnFeedback.closeEvent);\r\n\t\t\t\t\tRVS.S.waitOnFeedback = undefined;\r\n\t\t\t\t\tjQuery(document.body).off('click.revbuilderbodyclick');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\r\n\t/****************************************************************************+\r\n\t\t-\tFIND UNDEFINED ATTRIBUTES IN OBJECTS \t-\r\n\t*****************************************************************************/\r\n\tRVS.F.findUndefineds = function(obj,par) {\r\n\t\tvar _par =\"\";\r\n\t\tpar = par===undefined ? \"ROOT\" : par;\r\n\t\t for(var key in obj)\r\n\t\t    {\r\n\t\t        if(!obj.hasOwnProperty(key)) continue;\r\n\t\t\t\tif(typeof(obj[key]) == \"object\"){\r\n\t\t        \t_par = par + \".\"+key;\r\n\t\t            RVS.F.findUndefineds(obj[key],_par);\r\n\t\t        }\r\n\t\t        else{\r\n\t\t        \tif (obj[key]===undefined)\r\n\t\t        \t\tconsole.log(par+'.'+key+'='+par+'.'+key+'===undefined ? \"\" : '+par+'.'+key+\";\");\r\n\t\t        }\r\n\t\t    }\r\n\t};\r\n\r\n\t/************************************************************************\r\n\t\t-\tDRAG ME FUNCTION \t-\r\n\t\tPOSITION IS NOT CHANGED BY DRAGGABLE BUT BY ELEMENT DRAW FUNCTIONS\r\n\t************************************************************************/\r\n\t/**  WHERE  **/\r\n\tRVS.F.dragMe = function(obj) {\r\n\t\tobj.element.data('dragstart',{top:\"auto\",left:\"auto\",right:\"auto\",bottom:\"auto\"});\r\n\t\tobj.element.draggable({\r\n\r\n\t\t\tstart:function(event,ui) {\r\n\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"elementmovement\",txt:\"Move \"+obj.element.attr('id'),icon:\"open_with\"});\r\n\t\t\t\tRVS.F.updateContentDeltas();\r\n\t\t\t\tRVS.S.click.y = event.clientY;\r\n\t\t\t\tRVS.S.click.x = event.clientX;\r\n\t\t\t\tdraggingelements = [];\r\n\t\t\t\t// RECORD THE CURRENT AND SELECTED ELEMENT POSITION AND RELATIV DEPNDENCIES\r\n\t\t\t\tobj.mem = {x:0,y:0};\r\n\t\t\t\tobj.revert = { \tx: this.style.left===\"auto\" ? -1 : 1,\r\n\t\t\t\t\t\t\t\ty: this.style.top===\"auto\" ? -1 : 1};\r\n\t\t\t\tif (obj.input!==undefined && obj.input.x!==undefined) obj.mem.x = parseInt(obj.input.x.val(),0);\r\n\t\t\t\tif (obj.input!==undefined && obj.input.y!==undefined) obj.mem.y = parseInt(obj.input.y.val(),0);\r\n\t\t\t\tobj.attribute = obj.attribute===undefined ? {x:\"\",y:\"\"} : obj.attribute;\r\n\t\t\t\tobj.attribute.x = obj.attribute.x===\"\" || obj.attribute.x===undefined ? obj.input.x.data('r') : obj.attribute.x;\r\n\t\t\t\tobj.attribute.y = obj.attribute.y===\"\" || obj.attribute.y===undefined ? obj.input.y.data('r') : obj.attribute.y;\r\n\t\t\t\tobj.pos = {x:0,y:0};\r\n\t\t\t\t// FILL THE DRAGGINGELEMENT ARRAY WITH ALL SELECTED ELEMENT ATTRIBUTES\r\n\t\t\t\tdraggingelements.push(obj);\r\n\t\t\t\tRVS.C.vW.classList.remove(\"mode__slidelayout\");\r\n\t\t\t\tRVS.C.vW.classList.add(\"mode__navlayout\");\r\n\t\t\t\tRVS.F.openSettings({forms:obj.forms,uncollapse:true});\r\n\t\t\t},\r\n\t\t\tdrag:function(event,ui) {\r\n\t\t\t\tRVS.S.DaD.dragdelta.x =(event.clientX - RVS.S.click.x);\r\n\t\t\t\tRVS.S.DaD.dragdelta.y =(event.clientY - RVS.S.click.y);\r\n\t\t\t\tfor (var elementindex in draggingelements) {\r\n\t\t\t\t\tif(!draggingelements.hasOwnProperty(elementindex)) continue;\r\n\t\t\t\t\tpositionFieldUpdate(draggingelements[elementindex]);\r\n\t\t\t\t}\r\n\t\t\t\tui.position={};\r\n\t\t\t},\r\n\t\t\tstop: function(event,ui) {\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"elementmovement\",txt:\"Move \"+obj.element.attr('id'),icon:\"open_with\"});\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t};\r\n\r\n\tfunction positionFieldUpdate(obj) {\r\n\t\tobj.pos.x = obj.mem.x+ obj.revert.x*(RVS.S.DaD.dragdelta.x);\r\n\t\tobj.pos.y = obj.mem.y+ obj.revert.y*(RVS.S.DaD.dragdelta.y);\r\n\t\tif (obj.updateInput) {\r\n\t\t\tif (obj.input!==undefined && obj.input.x!==undefined) obj.input.x.val(obj.pos.x);\r\n\t\t\tif (obj.input!==undefined && obj.input.y!==undefined) obj.input.y.val(obj.pos.y);\r\n\t\t}\r\n\t\tRVS.F.updateSliderObj({path:obj.attributeRoot+obj.attribute.x,val:obj.pos.x});\r\n\t\tRVS.F.updateSliderObj({path:obj.attributeRoot+obj.attribute.y,val:obj.pos.y});\r\n\t\tif (obj.callEvent!==undefined) {\r\n\t\t\tjQuery(document.body).trigger(obj.callEvent,obj.callEventParam);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n/**************************************************\r\n\t-\tFORMULAR SHOW/HIDE FUNCTIONS IN POSITION -\r\n***************************************************/\r\n\r\n\t// PUT THE FORMULAR IN POSIION BASED ON ITS PREDEFINED ATTRIBUTES AND CURRENT STATUS\r\n\tRVS.F.updateFormPositions = function(obj) {\r\n\t\tif (obj.jf===null || obj.jf===undefined) return;\r\n\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\tif (obj.uncollapse===true || obj.uncollapse===\"true\") {\r\n\t\t\t\tvar jc = RVS.F.closestClass(obj.jf,'form_collector');\r\n\t\t\t\tvar alltoclose = RVS.C.theRightToolbar[0].querySelectorAll('.form_collector .formcontainer');\r\n\t\t\t\tif (jc.id!==\"form_collector_layerlist\")\r\n\t\t\t\t\tfor (var ci in alltoclose) if (!alltoclose.hasOwnProperty(ci) || alltoclose[ci].id===\"form_layerlist\" ||  alltoclose[ci].offsetParent==null) continue; else alltoclose[ci].classList.add('collapsed');\r\n\t\t\t\tobj.jf.classList.remove(\"collapsed\");\r\n\t\t\t}\r\n\r\n\t\t\tif (obj.jf.dataset.unselect!==undefined) {\r\n\t\t\t\tvar uns = document.querySelectorAll(obj.jf.dataset.unselect);\r\n\t\t\t\tfor (var i in uns) if (uns.hasOwnProperty(i)) uns[i].classList.remove(\"selected\");\r\n\t\t\t}\r\n\t\t\tif (obj.jf.dataset.select!==undefined) {\r\n\t\t\t\tvar uns = document.querySelectorAll(obj.jf.dataset.select);\r\n\t\t\t\tfor (var i in uns) if (uns.hasOwnProperty(i)) uns[i].classList.add(\"selected\");\r\n\t\t\t}\r\n\t\t\tRVS.DOC.trigger('scrollUpdates');\r\n\t\t});\r\n\r\n\r\n\t};\r\n\r\n\t/*\r\n\tSHOW FORM AND SELECT SUBMENU IF NECCESSARY\r\n\t*/\r\n\tRVS.F.showForms = function(forms,uncollapse) {\r\n\r\n\t\tvar submenus = forms.split(\":\");\r\n\r\n\t\tRVS.eMode.lo_container = RVS.eMode.lo_container===undefined ? document.getElementById('mmbw_loptions') : RVS.eMode.lo_container;\r\n\t\tRVS.eMode.sticky_container = RVS.eMode.sticky_container===undefined ? document.getElementById('settings_sticky_info') : RVS.eMode.sticky_container;\r\n\t\tRVS.eMode.stickyLeft = RVS.eMode.stickyLeft===undefined ? document.getElementById('settings_sticky_left') : RVS.eMode.stickyLeft;\r\n\t\tRVS.eMode.stickyRight = RVS.eMode.stickyRight===undefined ? document.getElementById('settings_sticky_right') : RVS.eMode.stickyRight;\r\n\t\t// If Preselector Exists, only run the Show Info if Preselector covers the LayoutMode\r\n\r\n\t\tif (submenus[0].indexOf('*sliderlayout*')>=0 && RVS.S.vWmode!==\"sliderlayout\") {\r\n\t\t\tvar tmode = RVS.S.vWmode;\r\n\t\t\tRVS.F.mainMode({mode:\"sliderlayout\"});\r\n\t\t\tRVS.eMode.top = \"slider\";\r\n\t\t\tif (tmode===\"navlayout\") requestAnimationFrame(function() {\r\n\t\t\t\tRVS.F.showWaitAMinute({fadeIn:0});\r\n\t\t\t\tRVS.F.drawHTMLLayers();\r\n\t\t\t\tRVS.F.showWaitAMinute({fadeOut:100});\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t\tif (submenus[0].indexOf('*navlayout*')>=0 && RVS.S.vWmode!==\"navlayout\") {\r\n\t\t\tRVS.F.mainMode({mode:\"navlayout\"});\r\n\t\t\tRVS.eMode.top = \"navigation\";\r\n\t\t}\r\n\r\n\t\tif (submenus[0].indexOf('*slidelayout*')>=0 && RVS.S.vWmode!==\"slidelayout\") {\r\n\t\t\tRVS.F.mainMode({mode:\"slidelayout\"});\r\n\t\t\tRVS.eMode.top = \"slide\";\r\n\t\t}\r\n\r\n\r\n\t\tif (submenus[0].indexOf('*mode__slidestyle*')>=0) {\r\n\t\t\tRVS.DOC.trigger('changeToSlideMode');\r\n\t\t\tRVS.eMode.top = \"slide\";\r\n\t\t}\r\n\r\n\r\n\t\tif (submenus[0].indexOf('*mode__slidecontent*')>=0) {\r\n\t\t\tRVS.DOC.trigger('changeToLayerMode');\r\n\t\t\tRVS.eMode.top = \"layer\";\r\n\t\t}\r\n\r\n\t\tfor (var i in submenus) {\r\n\t\t\tif(!submenus.hasOwnProperty(i)) continue;\r\n\t\t\tsubmenus[i] = submenus[i].replace(\"*sliderlayout*\",\"\");\r\n\t\t\tsubmenus[i] = submenus[i].replace(\"*navlayout*\",\"\");\r\n\t\t\tsubmenus[i] = submenus[i].replace(\"*slidelayout*\",\"\");\r\n\t\t\tsubmenus[i] = submenus[i].replace(\"*mode__slidestyle*\",\"\");\r\n\t\t\tsubmenus[i] = submenus[i].replace(\"*mode__slidecontent*\",\"\");\r\n\t\t}\r\n\r\n\r\n\t\tif (submenus[0]!==\"\") RVS.eMode.menu = submenus[0];\r\n\r\n\t\t// CHECK IF INPUT FIELDS HAVE BEEN INITIALISED ALREADY\r\n\t\tif (RVS.S.sliderInputFieldsInitialised===undefined && (window.lastSlideSettingForm===\"static\" || (((RVS.eMode.top===\"slider\" || RVS.eMode.top===\"\") && RVS.eMode.menu!=\"#form_module_title\") || RVS.eMode.top===\"navigation\")) && RVS.eMode.menu!==\"\") RVS.F.updateSliderInputFields(true);\r\n\t\tif (RVS.S.layerInputFieldsInitialised===undefined && RVS.eMode.top===\"layer\") RVS.F.updateLayerInputFields(true);\r\n\t\tif (RVS.S.slideInputFieldsInitialised===undefined && RVS.eMode.top===\"slide\") RVS.F.updateSlideInputFields(true);\r\n\t\tif (submenus[0]!==undefined && submenus[0].length>0)\r\n\t\t\tRVS.F.updateFormPositions({jf:document.querySelector(submenus[0]),focus:true,uncollapse:uncollapse});\r\n\r\n\t\tRVS.eMode.preMode = RVS.eMode.mode;\r\n\r\n\t\t// IF ANIMATION MODE IN LAYERS SELECTED, NEED TO RESET AMOUNT OF SELECTED LAYERS\r\n\t\tif (RVS.eMode.top===\"layer\" && RVS.eMode.menu===\"#form_layer_content\" && RVS.selLayers.length===1 && RVS.L[RVS.selLayers[0]]!==undefined && RVS.L[RVS.selLayers[0]].type===\"audio\") RVS.F.checkForAudioLayer();\r\n\r\n\t\tif (RVS.eMode.top===\"layer\" && (RVS.eMode.menu===\"#form_layer_animation\" || RVS.eMode.menu===\"#form_layer_loop\")) {\r\n\t\t\tif (RVS.selLayers.length>=1 && RVS.L[RVS.selLayers[0]]!==undefined) RVS.F.selectLayers({id:RVS.L[RVS.selLayers[0]].uid,overwrite:true, action:\"add\"});\r\n\t\t\tRVS.eMode.mode = \"animation\";\r\n\t\t\tRVS.eMode.lo_container.className = \"mmbw_animation\";\r\n\t\t\tRVS.eMode.sticky_container.className = \"sticky_in_animation\";\r\n\t\t\tRVS.F.animationMode(true);\r\n\t\t\tRVS.TL.TL.addClass(\"inAnimationMode\");\r\n\t\t\tRVS.C.rb.addClass(\"inAnimationMode\");\r\n\t\t} else\r\n\r\n\t\tif (RVS.eMode.top===\"layer\" && RVS.eMode.menu===\"#form_layer_hover\" && RVS.eMode.mode!==\"hover\") {\r\n\t\t\tRVS.eMode.mode = \"hover\";\r\n\t\t\tRVS.eMode.lo_container.className = \"mmbw_hover\";\r\n\t\t\tRVS.eMode.sticky_container.className = \"sticky_in_animation\";\r\n\t\t\tRVS.F.animationMode(false);\r\n\t\t\tif (RVS.S.shwLayerAnim) {\r\n\t\t\t\tRVS.S.shwLayerAnim = false;\r\n\t\t\t\tRVS.F.changeSwitchState({el:document.getElementById(\"layer_simulator\"),state:\"play\"});\r\n\t\t\t\tRVS.F.changeSwitchState({el:document.getElementById(\"layer_simulator_loop\"),state:\"play\"});\r\n\t\t\t}\r\n\t\t\tRVS.F.updateSelectedLayersIdleHover();\r\n\t\t\tRVS.TL.TL.removeClass(\"inAnimationMode\");\r\n\t\t\tRVS.C.rb.removeClass(\"inAnimationMode\");\r\n\t\t} else\r\n\r\n\t\tif (RVS.eMode.mode!==\"idle\") {\r\n\t\t\tRVS.eMode.mode=\"idle\";\r\n\t\t\tRVS.eMode.lo_container.className = \"mmbw_idle\";\r\n\t\t\tRVS.eMode.sticky_container.className = \"\";\r\n\t\t\tRVS.F.animationMode(false);\r\n\t\t\tif (RVS.S.shwLayerAnim) {\r\n\t\t\t\tRVS.S.shwLayerAnim = false;\r\n\t\t\t\tRVS.F.changeSwitchState({el:document.getElementById(\"layer_simulator\"),state:\"play\"});\r\n\t\t\t\tRVS.F.changeSwitchState({el:document.getElementById(\"layer_simulator_loop\"),state:\"play\"});\r\n\t\t\t}\r\n\t\t\tRVS.F.updateSelectedLayersIdleHover();\r\n\t\t\tRVS.TL.TL.removeClass(\"inAnimationMode\");\r\n\t\t\tRVS.C.rb.removeClass(\"inAnimationMode\");\r\n\t\t}\r\n\r\n\t\tif (RVS.eMode.mode===\"idle\" && RVS.S.keyFrame!=='idle') {\r\n\t\t\tRVS.S.keyFrame=\"idle\";\r\n\t\t\tRVS.F.animationMode(false);\r\n\t\t}\r\n\r\n\t\t// REDRAW ELEMENTS IN IDLE MODE IF NOT ANY MORE IN HOVER AND ELEMENT IS SELECTED\r\n\t\tif (RVS.eMode.preMode===\"hover\" && RVS.eMode.mode!==\"hover\")\r\n\t\t\t\tfor (var l in RVS.selLayers) {\r\n\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(l)) continue;\r\n\t\t\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[l]});\r\n\t\t\t\t}\r\n\r\n\t\tif (RVS.eMode.top===\"slide\" && RVS.eMode.menu==\"#form_slide_loops\")\t{\r\n\t\t\tRVS.TL.TL.addClass('slideloopedit');\r\n\t\t\tRVS.TL.slideLoopEdit = true;\r\n\t\t} else\r\n\t\tif (RVS.TL.slideLoopEdit) {\r\n\t\t\tRVS.TL.TL.removeClass('slideloopedit');\r\n\t\t\tRVS.TL.slideLoopEdit = false;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tRVS.F.checkForFixedScroll();\r\n\r\n\t\tRVS.DOC.trigger('editorViewModeChange');\r\n\r\n\t\tclearTimeout(RVS.eMode.stickytimer);\r\n\t\tRVS.eMode.stickytimer = setTimeout(function() {\r\n\t\t\tvar gso =  \tRVS.eMode.top===\"slider\" ? document.querySelector('.general_submodule_trigger.selected .gso_title') :\r\n\t\t\t\t\t\tRVS.eMode.top===\"navigation\" ? document.querySelector('.nav_submodule_trigger.selected .gso_title') :\r\n\t\t\t\t\t\tRVS.eMode.top===\"slide\" ? document.querySelector('.slide_submodule_trigger.selected .gso_title') :\r\n\t\t\t\t\t\tdocument.querySelector('.layer_submodule_trigger.selected .gso_title');\r\n\r\n\t\t\tif (gso!==null) {\r\n\t\t\t\tRVS.eMode.stickyLeft.textContent = gso.textContent;\r\n\t\t\t\tRVS.eMode.stickyLeft.classList.remove(\"purple\");\r\n\t\t\t\tif (gso.dataset.stickycolor!==undefined && gso.dataset.stickycolor===\"purple\") RVS.eMode.stickyLeft.classList.add(\"purple\");\r\n\t\t\t}\r\n\r\n\t\t\tRVS.eMode.stickyRight.innerHTML = RVS_LANG[\"sticky_\"+RVS.eMode.top];\r\n\t\t},50);\r\n\r\n\r\n\t};\r\n\r\n\t/*\r\n\tOPEN SETTINGS BASED ON TRIGGER BUTTON, ID, JQUERY ELEMENT OR ELEMENT\r\n\t*/\r\n\tRVS.F.openSettings = function(obj) {\r\n\r\n\t\t// CALLING BUTTON GIVEN\r\n\t\tif (obj.btn!==undefined && obj.forms===undefined) {\r\n\t\t\tobj.forms = obj.btn.data('forms');\r\n\t\t\tobj.forms = obj.forms===undefined ?\r\n\t\t\t\tobj.btn.closest('.markable').length>0 ?\r\n\t\t\t\t\tobj.btn.closest('.markable').data('forms') : [] : obj.forms;\r\n\t\t}\r\n\t\t// ARRAY OF FORMS GIVEN\r\n\t\tif (obj.forms!==undefined) {\r\n\t\t\tif (typeof obj.forms===\"string\")\r\n\t\t\t\tRVS.F.showForms(obj.forms,obj.uncollapse);\r\n\t\t\telse\r\n\t\t\tfor (var f in obj.forms) {\r\n\t\t\t\tif(!obj.forms.hasOwnProperty(f)) continue;\r\n\t\t\t\tRVS.F.showForms(obj.forms[f],obj.uncollapse);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// Change The Main Layout (Show, hide Windows we dont need)\r\n\tRVS.F.mainMode = function(obj) {\r\n\r\n\t\tRVS.C.vW.classList.remove(\"mode__sliderlayout\");\r\n\t\tRVS.C.vW.classList.remove(\"mode__slidelayout\");\r\n\t\tRVS.C.vW.classList.remove(\"mode__navlayout\");\r\n\t\tRVS.S.vWmode = obj.mode;\r\n\t\tif (obj.ignoreReDraw!==true) RVS.DOC.trigger(\"beforeLayoutModeChange\");\r\n\r\n\t\tswitch (obj.mode) {\r\n\t\t\tcase \"navlayout\":\r\n\t\t\t\tRVS.C.vW.classList.add(\"mode__navlayout\");\r\n\t\t\t\tRVS.F.redrawAllNavigationContainer();\r\n\t\t\tbreak;\r\n\t\t\tcase \"sliderlayout\":\r\n\t\t\t\t//jQuery('#theslidermodule').addClass(\"selected\");\r\n\t\t\t\tRVS.C.vW.classList.add(\"mode__sliderlayout\");\r\n\t\t\t\tRVS.F.redrawAllNavigationContainer();\r\n\t\t\tbreak;\r\n\t\t\tcase \"slidelayout\":\r\n\t\t\t\tRVS.C.vW.classList.add(\"mode__slidelayout\");\r\n\t\t\t\tif (obj.slide!==undefined)\r\n\t\t\t\t\tRVS.F.setSlideFocus({slideid:obj.slide,ignoreUpdateFields:obj.ignoreUpdateFields});\r\n\t\t\t\telse {\r\n\t\t\t\t\tRVS.F.updateAllHTMLLayerPositions();\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// OPEN THE FORMS WE NEED FOR THIS MODE\r\n\t\tif (obj.set && obj.forms!==undefined) RVS.F.openSettings({forms:obj.forms, uncollapse:obj.uncollapse});\r\n\t};\r\n\r\n\r\n\r\n\t// Shorthand set Input to a predefined Value (Input Field and after Object Path)\r\n\tRVS.F.setInputTo = function(obj) {\r\n\t\tvar e = document.getElementById(obj.field.replace(\"#\",\"\"));\r\n\t\tRVS.F.updateEasyInput({el:e,nval:obj.val, path:obj.path});\r\n\t\tif (e.type===\"checkbox\") RVS.F.turnOnOffVisUpdate({input:e});\r\n\t\te.dispatchEvent(new Event('change', { 'bubbles': true }));\r\n\t};\r\n\r\n\r\n/******************************************************************+*\r\n\t-\tINITIALISE, UPDATE, REINIT THE INPUT AND SELECT BOXES \t-\r\n********************************************************************/\r\n\tRVS.F.updateInputBoxes = function() {\r\n\t\t// 1ST Initialisation of The Select Boxes\r\n\r\n\t\tjQuery('.tos2, .slideinput, .sliderinput').trigger('init');\r\n\t};\r\n\r\n\r\n\r\n\r\n\tRVS.F.removeAllOptionsS2 = function(obj) {\r\n\t\tif (obj===undefined || obj.select===undefined) return;\r\n\t\tobj.select.find('option').remove();\r\n\t\tif (obj.select.hasClass(\"nosearchbox\")) obj.select.ddTP('change').ddTP({placeholder:\"Enter or Select\"});\r\n\r\n\t};\r\n\r\n\tRVS.F.addOptionS2 = function(obj) {\r\n\t\tif (obj.val===undefined || obj.select===undefined) return false;\r\n\t\tif (obj.select.find('option[value=\"'+obj.val+'\"]').length>0) return false;\r\n\r\n\t\tobj.select.append('<option value=\"'+obj.val+'\">'+obj.txt+'</option>');\r\n\t\tif (obj.select.hasClass(\"nosearchbox\")) obj.select.ddTP('change').ddTP({placeholder:\"Enter or Select\"});\r\n\r\n\t};\r\n\r\n\tRVS.F.addOrSelectOption = function(obj) {\r\n\t\tif (obj.val===undefined || obj.select===undefined) return false;\r\n\t\tif (obj.select.find('option[value=\"'+obj.val+'\"]').length>0 && obj.selected!==false) {\r\n\t\t\tobj.select.val(obj.val).trigger('change');\r\n\t\t} else {\r\n\t\t\tif (obj.selected!==false)\r\n\t\t\t\tobj.select.append('<option selected value=\"'+obj.val+'\">'+obj.val+'</option>');\r\n\t\t\telse\r\n\t\t\t\tobj.select.append('<option value=\"'+obj.val+'\">'+obj.val+'</option>');\r\n\t\t\tobj.select.ddTP({placeholder:\"Select From List\"});\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\r\n\t/* enable / disable an Option in a Select 2 Box **/\r\n\tRVS.F.setS2Option = function(obj) {\r\n\r\n\t\tif (obj===undefined) return;\r\n\r\n\r\n\t\tif (obj.enableValue!==undefined ) obj.select.find('option[value=\"'+obj.enableValue+'\"]').prop('disabled', false);\r\n\t\tif (obj.disableValue!==undefined) obj.select.find('option[value=\"'+obj.disableValue+'\"]').prop('disabled','disabled');\r\n\t\tif (obj.selectValue!==undefined) obj.select[0].value = obj.selectValue;\r\n\t\tif (obj.select.hasClass(\"nosearchbox\")) obj.select.ddTP('change').ddTP({placeholder:\"Enter or Select\"});\r\n\r\n\t\t// UPDATE THE SELETED ELEMENTS BASED ON THE OBJECT VALUES\r\n\t\tif (obj.update===true) RVS.F.updateEasyInput({el:obj.select[0],path:obj.path});\r\n\r\n\t};\r\n\r\n\r\n\t/* enable / disable an Option in a Select 2 Box **/\r\n\tRVS.F.setRadio = function(obj) {\r\n\r\n\t\tif (obj===undefined || obj.radio===undefined || obj.radioValue===undefined) return;\r\n\t\tvar radio = jQuery('input:radio[name=\"'+obj.radio+'\"]').filter('[value=\"'+obj.radioValue+'\"]');\r\n\t\tradio.prop('checked', true);\r\n\t\tif (obj.change===true) radio.trigger('change');\r\n\r\n\t\t// UPDATE THE SELETED ELEMENTS BASED ON THE OBJECT VALUES\r\n\t\tif (obj.update===true) RVS.F.updateEasyInput({el:obj.select[0],path:obj.path});\r\n\r\n\t};\r\n\r\n\t// create function, it expects 2 values.\r\n\tRVS.F.insertAfter = function(newElement,targetElement) {\r\n\t    // target is what you want it to go after. Look for this elements parent.\r\n\t    var parent = targetElement.parentNode;\r\n\r\n\t    // if the parents lastchild is the targetElement...\r\n\t    if (parent.lastChild == targetElement) {\r\n\t        // add the newElement after the target element.\r\n\t        parent.appendChild(newElement);\r\n\t    } else {\r\n\t        // else the target has siblings, insert the new element between the target and it's next sibling.\r\n\t        parent.insertBefore(newElement, targetElement.nextSibling);\r\n\t    }\r\n\t};\r\n\r\n\tRVS.F.prepareOneInputWithPresets = function(t) {\r\n\r\n\t\tif (t.parentNode.className.indexOf(\"input_presets_wrap\")==-1) {\r\n\t\t\tvar wrap = RVS.F.cE({cN:\"input_presets_wrap\"}),\r\n\t\t\t\tic = RVS.F.cI({cN:\"input_presets_dropdown\",c:\"more_vert\"}),\r\n\t\t\t\tlist = RVS.F.cE({cN:\"input_presets\"}),\r\n\t\t\t\tvals = t.dataset.presets_val.split(\"!\"),\r\n\t\t\t\ttxts = t.dataset.presets_text.split(\"!\"),\r\n\t\t\t\textcl = \"\",\r\n\t\t\t\ti,id,ii,tmp,hasd;\r\n\r\n\t\t\tfor ( i in txts) {\r\n\t\t\t\tif(!txts.hasOwnProperty(i)) continue;\r\n\t\t\t\textcl = (txts[i].indexOf(\"$$\"))>=0 ? \"ipwborder\" : \"\";\r\n\t\t\t\ttmp = txts[i].split(\"$\");\r\n\t\t\t\thasd = (tmp.length>2 && tmp[2].length>0);\r\n\t\t\t\tid = RVS.F.cE({cN:\"input_preset \"+extcl, ds:{iid:t.id,r:t.dataset.r,val:vals[i]}});\r\n\t\t\t\tif (hasd) {\r\n\r\n\t\t\t\t \tii =  RVS.F.cI({c:window.RS_PRESETS[tmp[1]]});\r\n\t\t\t\t \tid.innerText = tmp[2];\r\n\t\t\t\t \tid.prepend(ii);\r\n\t\t\t\t} else  id.innerText = txts[i];\r\n\t\t\t\tlist.appendChild(id);\r\n\t\t\t}\r\n\t\t\twrap.appendChild(ic);\r\n\t\t\twrap.appendChild(list);\r\n\t\t\twrap = t.parentNode.insertBefore(wrap,t);\r\n\t\t\twrap.appendChild(t);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tRVS.F.initInputsWithPresets = function(selector) {\r\n\t\tif (selector===undefined)\r\n\t\t\tjQuery('.input_with_presets').each(function() {\r\n\t\t\t\tRVS.F.prepareOneInputWithPresets(this);\r\n\t\t\t});\r\n\t};\r\n\r\n\r\n\r\n/*******************************************************\r\n-\tUPDATE SELECT OPTIONS WITH SLIDERS, PAGES\t-\r\n********************************************************/\r\n\t// CREATE CUSTOM SELECT INNER OPTIONS\r\n\tfunction createOptionsOfArray(_) {\r\n\t\tvar ret = '<option value=\"none\">'+RVS_LANG.none+'</option>';\r\n\r\n\t\tfor (var i in _.array) {\r\n\t\t\tif(!_.array.hasOwnProperty(i)) continue;\r\n\t\t\tif ((_.filter===undefined || _.filter===\"all\" || _.filter === _.array[i].type)\t&& (_.subfilter===undefined || _.subfilter===\"all\" || _.subfilter===_.array[i].subtype))\r\n\t\t\t\tret += '<option '+(_.preselected===_.array[i][_.type] ? \"selected\" : \"\")+' value=\"'+_.array[i][_.type]+'\">'+_.array[i].title+'</option>';\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\t//BUILD THE SELECT LISTS WITH THE PAGES, SLIDER AS REQUESTED\r\n\tRVS.F.createSelectOptions = function(_) {\r\n\t\tlistOfContents = listOfContents===undefined ? {} : listOfContents;\r\n\r\n\t\tif (listOfContents[_.ctype]===undefined) {\r\n\t\t\tlistOfContents[_.ctype]=[];\r\n\t\t\t//ctype  => sliders, pages, posttypes\r\n\t\t\tRVS.F.ajaxRequest(\"get_list_of\", {type:_.ctype}, function(response){\r\n\t\t\t\tif (response.pages) {\r\n\t\t\t\t\tfor (var i in response.pages) {\r\n\t\t\t\t\t\tif(!response.pages.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tlistOfContents[_.ctype].push({id:i, slug:response.pages[i].slug, title:response.pages[i].title});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (response.sliders) {\r\n\t\t\t\t\tfor (var i in response.sliders) {\r\n\t\t\t\t\t\tif(!response.sliders.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tlistOfContents[_.ctype].push({id:i, slug:response.sliders[i].slug, title:response.sliders[i].title, type:response.sliders[i].type, subtype:response.sliders[i].subtype});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (response.posttypes) {\r\n\t\t\t\t\tfor (var i in response.posttypes) {\r\n\t\t\t\t\t\tif(!response.posttypes.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tlistOfContents[_.ctype].push({slug:response.posttypes[i].slug, title:response.posttypes[i].title});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t_.select.innerHTML = createOptionsOfArray({array:listOfContents[_.ctype], type:_.select.dataset.valuetype, preselected:_.select.value, filter:_.select.dataset.filter, subfilter:_.select.dataset.subfilter});\r\n\t\t\t\tjQuery(_.select).ddTP({placeholder:\"Select From List\"});\r\n\t\t\t\tRVS.F.updateSelectsWithSpecialOptions();\r\n\t\t\t},undefined,undefined,RVS_LANG.updateselects+'<br><span style=\"font-size:17px; line-height:25px;\">\"'+RVS_LANG.buildingSelects+'\"</span>');\r\n\r\n\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_.select.innerHTML = createOptionsOfArray({array:listOfContents[_.ctype], type:_.select.dataset.valuetype, preselected:_.select.value,filter:_.select.dataset.filter, subfilter:_.select.dataset.subfilter});\r\n\t\t\tjQuery(_.select).ddTP({placeholder:\"Select From List\"});\r\n\t\t\tRVS.F.updateSelectsWithSpecialOptions();\r\n\t\t}\r\n\t};\r\n\t// GET CUSTOM POST TYPES\r\n\tRVS.F.getCustomPostTypes = function(callback) {\r\n\t\tif (RVS.LIB.POST_TYPES===undefined) {\r\n\t\t\tRVS.LIB.POST_TYPES=[];\r\n\t\t\t//ctype  => sliders, pages, posttypes\r\n\t\t\tRVS.F.ajaxRequest(\"get_list_of\", {type:\"posttypes\"}, function(response){\r\n\t\t\t\tif (response.posttypes) {\r\n\t\t\t\t\tfor (var i in response.posttypes) {\r\n\t\t\t\t\t\tif(!response.posttypes.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tRVS.LIB.POST_TYPES.push({slug:response.posttypes[i].slug, title:response.posttypes[i].title, tax:response.posttypes[i].tax});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (callback) callback();\r\n\t\t\t\treturn RVS.LIB.POST_TYPES;\r\n\t\t\t});\r\n\t\t} else\t{\r\n\t\t\tif (callback) callback();\r\n\t\t\treturn RVS.LIB.POST_TYPES;\r\n\t\t}\r\n\t};\r\n\r\n\t// GO SEQUENTIEL THROUGH THE ELEMENTS TO SURELY ADD ALL OPTIONS TO THE LISTS ON SIMILAR REQUESTS\r\n\tRVS.F.updateSelectsWithSpecialOptions = function() {\r\n\t\tif (socList===undefined)\r\n\t\t\tsocList = { listofselects : document.getElementsByClassName('select_of_customlist'), curindex : 0};\r\n\t\telse\r\n\t\t\tsocList.curindex++;\r\n\r\n\t\tif (socList.curindex>=socList.listofselects.length) {\r\n\t\t\tdelete socList;\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tRVS.F.createSelectOptions({ctype:socList.listofselects[socList.curindex].dataset.ctype, select:socList.listofselects[socList.curindex]});\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n/*******************************************************\r\n\r\n-\tBIG SHOWDOWN ! INITIALISE ALL INPUT EVENTS\t-\r\n\r\n********************************************************/\r\n\r\n\t//HANDLIGN OF GLOBAL COLORS\r\n\tRVS.F.noGradient = function(r) {\r\n\t\treturn (r.indexOf('slide.bg.color')==-1 && r.indexOf('slider.bg.color')==-1 && r.indexOf('.progressbar.color')==-1) && (r.indexOf('.color')>=0 || r.indexOf('.borderColor')>=0 || r.indexOf('.strokeColor')>=0);\r\n\t}\r\n\r\n\tRVS.DOC.on('RSCOLOR.OPEN',function(e,_) {\r\n\t\tjQuery.rsColorPickerApi.hideGlobal();\r\n\t\tif (_==undefined || _.currentInput===undefined || _.currentInput[0]===undefined) return;\r\n\t\tvar type = _.currentInput[0].className.indexOf('layerinput')>=0 ? \"layer\" : _.currentInput[0].className.indexOf('sliderinput')>=0 ? \"slider\" : _.currentInput[0].className.indexOf('navstyleinput')>=0 ? \"navstyle\" : _.currentInput[0].className.indexOf('slideinput')>=0 ? \"slide\" : \"na\";\r\n\t\tif (type===\"na\") return;\r\n\t\tif (_.currentInput[0].dataset.r!==undefined) {\r\n\t\t\tvar r = RVS.F.getConcVals(_.currentInput[0].dataset.r, RVS.screen),\r\n\t\t\t\tlist = [];\r\n\t\t\t r = r.replace(\"slider.\",\"\");\r\n\t\t\tswitch(type) {\r\n\t\t\t\tcase \"layer\": for (var i in RVS.selLayers) if (RVS.selLayers.hasOwnProperty(i)) list.push({inpname:_.currentInput[0].name, r:RVS.S.slideId+\".layers.\"+RVS.selLayers[i]+\".\"+r, layer:RVS.selLayers[i], slide:RVS.S.slideId, type:'layer'});break;\r\n\t\t\t\tcase \"slide\": list.push({inpname:_.currentInput[0].name, r:RVS.S.slideId+\".slide.\"+r, slide:RVS.S.slideId, type:\"slide\"});break;\r\n\t\t\t\tcase \"slider\": list.push({inpname:_.currentInput[0].name, r:\"settings.\"+r, type:\"slider\"});break;\r\n\t\t\t\tcase \"navstyle\" : list.push({inpname:_.currentInput[0].name, r:r, type:\"navstyle\", evtparam:_.currentInput[0].dataset.evtparam});break;\r\n\t\t\t};\r\n\t\t\tRVS.F.checkGlobalSkinAvail();\r\n\t\t\tjQuery.rsColorPickerApi.showGlobal(_,RVS.SLIDER.settings.skins.colors,list);\r\n\t\t}\r\n\t});\r\n\r\n\tRVS.DOC.on('click','#edit_skin_colors',function() {\r\n\t\tjQuery.rsColorPickerApi.closeColorPicker();\r\n\t\tRVS.F.openColorSkinApi();\r\n\t});\r\n\r\n\tRVS.F.checkGlobalSkinAvail = function() {\r\n\t\tfor (var i in RVS.SLIDER.settings.skins.colors) {\r\n\t\t\tif (!RVS.SLIDER.settings.skins.colors.hasOwnProperty(i)) continue;\r\n\t\t\tif (!RVS.SLIDER.settings.skins.colors.v) continue;\r\n\t\t\tvar ar = [];\r\n\t\t\tfor (var j in RVS.SLIDER.settings.skins.colors[i].ref) {\r\n\t\t\t\tif (!RVS.SLIDER.settings.skins.colors[i].ref.hasOwnProperty(j)) continue;\r\n\t\t\t\tvar e = RVS.SLIDER.settings.skins.colors[i].ref[j];\r\n\t\t\t\tif (e.slide!==undefined && RVS.SLIDER[e.slide]===undefined) continue;\r\n\t\t\t\telse if (e.layer!==undefined && (RVS.SLIDER[e.slide]===undefined || RVS.SLIDER[e.slide].layers===undefined || RVS.SLIDER[e.slide].layers[e.layer]===undefined)) continue;\r\n\t\t\t\telse ar.push(e);\r\n\t\t\t}\r\n\t\t\tRVS.SLIDER.settings.skins.colors[i].ref = ar;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction inputAliasinBR(a) {\r\n\t\treturn (a===\"layerTextColorHover\" ? \"Layer  Hover Color\":\r\n\t\t\t\ta===\"layerTextColor\" ? \"Layer Color\" :\r\n\t\t\t\ta===\"layerTextColorInFrame\" ? \"Layer  Color in Frame\" :\r\n\t\t\t\ta===\"frameColorAnimation\" ? \"Layer Color Animation\" :\r\n\t\t\t\ta===\"frameBGColorAnimation\" ? \"Frame BG Color Animation\" :\r\n\t\t\t\ta===\"frameBGColorAnimationDouble\" ? \"Frame BG Color Animation\" :\r\n\t\t\t\ta===\"layerBGColor\" ? \"Layer Background Color\" :\r\n\t\t\t\ta===\"layerBorderColor\" ? \"Layer Border Color\" :\r\n\t\t\t\ta===\"layerSVGColor\" ? \"SVG Color\" :\r\n\t\t\t\ta===\"layerStrokeColor\" ? \"Stroke Color\" :\r\n\t\t\t\ta===\"slide_bg_color\" ? \"Slide Background Color\" :\r\n\t\t\t\ta===\"sliderprogresscolor\" ? \"Progress Bar Color\" :\r\n\t\t\t\ta===\"sliderTabBgColor\" ? \"Tab Wrap Color\" :\r\n\t\t\t\ta===\"sliderThumbBgColor\" ? \"Thumbnails BG Color\" :\r\n\t\t\t\ta===\"sliderbgcolor\" ? \"Slider Bakground Color\" : \"Color Change\"\r\n\t\t\t\t)\r\n\t}\r\n\r\n\tRVS.F.initTpColorBoxes = function(_) {\r\n\r\n\t\t// Create ColorPicker Inputs\r\n\t\tjQuery(_).rsColorPicker({\r\n\r\n\t\t\tinit: function(inputWrap, inputElement, cssColor, widgetSettings) {\r\n\t\t\t\tvar ghost = document.createElement('input')\r\n\t\t\t\t//ghost.style.display = \"none\";\r\n\t\t\t\tghost.type = \"text\";\r\n\t\t\t\tghost.className=\"layerinput\";\r\n\t\t\t\tinputWrap[0].appendChild(ghost);\r\n\t\t\t\tinputElement.data('ghost', ghost);//.hide();\r\n\t\t\t},\r\n\r\n\t\t\tonRefresh: function(inputElement, cssColor, globalColors, globalColorActive) {\r\n\r\n\t\t\t\tinputElement.data('ghost').value=cssColor;\r\n\t\t\t},\r\n\r\n\t\t\tonEdit:function(currentInput, cssColor, globalColors, globalColorActive) {\r\n\t\t\t\tcurrentInput.data('ghost').value = cssColor;\r\n\t\t\t\tvar GC = (globalColors!==undefined && globalColorActive!==undefined && globalColorActive!==-1 && globalColors[globalColorActive]!==undefined) ? globalColors[globalColorActive] : undefined;\r\n\t\t\t\tif (GC!==undefined) GC.v = cssColor;\r\n\t\t\t\tRVS.DOC.trigger('coloredit', [currentInput, cssColor,undefined,undefined,(GC!==undefined ? GC : currentInput[0].className.indexOf('skininput')>0 ? RVS.SLIDER.settings.skins.colors[currentInput[0].dataset.evtparam] : undefined)]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tchange:function(currentInput, cssColor, gradient, globalColors, globalColorActive) {\r\n                currentInput.data('ghost').value = cssColor;\r\n                var GC = globalColors!==undefined ? globalColors :  currentInput[0].className.indexOf('skininput')>0 ? RVS.F.safeExtend(true,{},RVS.SLIDER.settings.skins.colors) : undefined,\r\n                    backupgroup_opened = false;\r\n\r\n                if (GC!==undefined) {\r\n\r\n\t\t\t\t\tvar gindex = (globalColorActive==-1 || globalColorActive===undefined ? currentInput[0].dataset.evtparam : globalColorActive);\r\n\t\t\t\t\tif (GC[gindex]!==undefined) GC[gindex].v = cssColor;\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"colorchange\",txt:(GC[gindex]!==undefined ? GC[gindex].alias+\" Skin Change\" : inputAliasinBR(currentInput[0].name)+\" \"),icon:\"style\"});\r\n                    backupgroup_opened = true;\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:\"settings.skins.colors\",val:RVS.F.safeExtend(true,{},globalColors===undefined ? GC : globalColors)});\r\n\t\t\t\t\tGC=GC[gindex];\r\n\t\t\t\t}\r\n\t\t\t\tRVS.DOC.trigger('coloredit', [currentInput, cssColor, gradient, true, GC]);\r\n\t\t\t\t// MAYBE CHANGE ON EVENT CALLBACK!??\r\n\r\n                if (GC!==undefined || backupgroup_opened) setTimeout(function() {\r\n                    RVS.F.closeBackupGroup({id:\"colorchange\"});\r\n\t\t\t\t},500);\r\n\t\t\t},\r\n\r\n\t\t\tcancel:function(currentInput, cssColor, storedValue, globalColors, globalColorActive) {\r\n\t\t\t\t// update the ghost input field\r\n                currentInput.data('ghost').value = cssColor;\r\n                var GC = (globalColors!==undefined && globalColorActive!==undefined && globalColorActive!==-1 && globalColors[globalColorActive]!==undefined) ? globalColors[globalColorActive] : undefined;\r\n\t\t\t\tif (GC!==undefined) GC.v = cssColor;\r\n\t\t\t\tRVS.DOC.trigger('colorcancel', [currentInput, cssColor,undefined,undefined,(GC!==undefined ? GC : currentInput[0].className.indexOf('skininput')>0 ? RVS.SLIDER.settings.skins.colors[currentInput[0].dataset.evtparam] : undefined)]);\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t};\r\n\r\n\tRVS.F.createWPMLOptions = function(_) {\r\n\t\tvar _h=document.createDocumentFragment(),o;\r\n\t\tif (typeof RS_WPML_LANGS!==\"undefined\" && RS_WPML_LANGS!==undefined) {\r\n\t\t\tfor (var i in RS_WPML_LANGS) {\r\n\t\t\t\tif(!RS_WPML_LANGS.hasOwnProperty(i)) continue;\r\n\t\t\t\to = RVS.F.CO(i,RS_WPML_LANGS[i].title)\r\n\t\t\t\to.dataset.src = RS_WPML_LANGS[i].image;\r\n\t\t\t\t_h.appendChild(o);\r\n\t\t\t\t//_h += '<option value=\"'+i+'\" data-src=\"'+RS_WPML_LANGS[i].image+'\" data-ddTP-id=\"'+i+'\">'+RS_WPML_LANGS[i].title+'</option>';\r\n\t\t\t}\r\n\t\t\t_.appendChild(_h); //innerHTML = _h;\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.convertEase = function(e) {\r\n\t\t// Convert Old Easing Table to new Easing\r\n\t\te = e===undefined ? \"power2.inOut\" : e;\r\n\t\te = e===\"none\" ? \"none\" : e===\"slow\" ? \"slow\" : e.replace('easeIn','in').replace('easeOut','out').replace('easeInOut','inOut');\r\n\t\te = e.indexOf(\".\")>=0 ? e.charAt(0).toLowerCase() + e.slice(1) : e;\r\n\t\treturn e;\r\n\t}\r\n\r\n\t// BUILD EASE OPTIONS FOR SELECTBOXES\r\n\tRVS.F.createEaseOptions = function(_) {\r\n\t\t_ = _.innerHTML===undefined ? _[0] : _;\r\n\t\tif (_ease===undefined || _ease===\"\") {\r\n\t\t\t_ease = document.createDocumentFragment();\r\n\t\t\tfor (var i in window.RS_EASES) if (window.RS_EASES.hasOwnProperty(i)) _ease.appendChild(RVS.F.CO(i,window.RS_EASES[i]));\r\n\t\t}\r\n\t\tif (_.dataset!==undefined && _.dataset.inherit=='true') _ease.appendChild(RVS.F.CO('inherit','Inherit'));\r\n\r\n\t\t_.appendChild(_ease.cloneNode(true));\r\n\t};\r\n\r\n\tfunction simplifySlideAnimTitle(_) {\r\n\t\tvar r = (_.replace('*north*','Up')\r\n\t\t\t\t.replace('*south*','Down')\r\n\t\t\t\t.replace('*swap_vert*','Vertical')\r\n\t\t\t\t.replace('*swap_horiz*','Horizontal')\r\n\t\t\t\t.replace('*east*','Right')\r\n\t\t\t\t.replace('*east*','Right')\r\n\t\t\t\t.replace('*add*','Zoom In')\r\n\t\t\t\t.replace('*remove*','Zoom Out')\r\n\t\t\t\t.replace('*west*','Left')).split('*');\r\n\t\treturn r[r.length-1];\r\n\t}\r\n\r\n\t// CREATE SLIDE ANIM OPTIONS  SELECTBOXES\r\n\tRVS.F.createSlideAnimOptions = function(_) {\r\n\t\t_ = _.innerHTML===undefined ? _[0] : _;\r\n\t\tif (slideanimlist===undefined || slideanimlist===\"\") {\r\n\t\t\tslideanimlist = document.createDocumentFragment();\r\n\t\t\tslideanimlist.appendChild(document.createElement('option'));\r\n\t\t\tvar o,OG;\r\n\t\t\tfor (var m in RVS.LIB.SLTR) {\r\n\t\t\t\tif (!RVS.LIB.SLTR.hasOwnProperty(m) || m===\"random\" || m===\"custom\") continue;\r\n\t\t\t\tfor (var g in RVS.LIB.SLTR[m]) {\r\n\t\t\t\t\tif (!RVS.LIB.SLTR[m].hasOwnProperty(g) || g==\"icon\" || g==\"eclass\") continue;\r\n\t\t\t\t\tOG = document.createElement('optgroup');\r\n\t\t\t\t\tOG.label = (RVS_LANG[\"sltr_\"+m]===undefined ? m : RVS_LANG[\"sltr_\"+m]) +\" \"+ (RVS_LANG[\"sltr_\"+g]===undefined ? g : RVS_LANG[\"sltr_\"+g]);\r\n\t\t\t\t\tfor (var e in RVS.LIB.SLTR[m][g]) OG.appendChild(RVS.F.CO(e,(RVS_LANG[\"sltr_\"+m]===undefined ? \"\" : RVS_LANG[\"sltr_\"+m]+\" \")+simplifySlideAnimTitle(RVS.LIB.SLTR[m][g][e].title)));\r\n\t\t\t\t\tslideanimlist.appendChild(OG);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_.appendChild(slideanimlist.cloneNode(true));\r\n\t};\r\n\r\n\t// CREATE SLIDE ANIM OPTIONS  SELECTBOXES\r\n\tRVS.F.createDottedOptions = function(_) {\r\n\t\t_ = _.innerHTML===undefined ? _[0] : _;\r\n\t\tif (dottedlist===undefined || dottedlist===\"\") {\r\n\t\t\tdottedlist = document.createDocumentFragment();\r\n\t\t\tdottedlist.appendChild(RVS.F.CO('none', \"No Overlay\"));\r\n\t\t\tfor (var i=1;i<17;i++) dottedlist.appendChild(RVS.F.CO(i, (RVS_LANG['dov_'+i])));\r\n\t\t}\r\n\t\t_.appendChild(dottedlist.cloneNode(true));\r\n\t};\r\n\r\n\t// CREATE SLIDE ANIM OPTIONS  SELECTBOXES\r\n\tRVS.F.createSliderListOptions = function(_) {\r\n\t\t_ = _.innerHTML===undefined ? _[0] : _;\r\n\t\tif (sliderlist===undefined || sliderlist===\"\") {\r\n\t\t\tsliderlist=document.createDocumentFragment();\r\n\t\t\tfor (var i in RVS.LIB.SLIDERS) if(RVS.LIB.SLIDERS.hasOwnProperty(i)) sliderlist.appendChild(RVS.F.CO(RVS.LIB.SLIDERS[i].alias,RVS.LIB.SLIDERS[i].title));\r\n\t\t}\r\n\t\t_.appendChild(sliderlist.cloneNode(true));\r\n\r\n\t};\r\n\r\n\r\n\tRVS.F.initialiseGlobalBoxes = function(mode) {\r\n\r\n\t\t// BUIL Slide Anim Selects\r\n\t\tjQuery('.tos2.slideAnimSelect').each(function() {\r\n\t\t\tRVS.F.createSlideAnimOptions(this);\r\n\t\t});\r\n\r\n\t\t// BUIL Dotted Overlay List\r\n\t\tjQuery('.tos2.dottedoverlay').each(function() {\r\n\t\t\tRVS.F.createDottedOptions(this);\r\n\t\t});\r\n\r\n\t\t// BUILD SLIDER LISTS\r\n\t\tjQuery('.tos2.selectsliderlist').each(function() {\r\n\t\t\tRVS.F.createSliderListOptions(this);\r\n\t\t});\r\n\r\n\t\t// BUILD EASING LISTS\r\n\t\tjQuery('.tos2.easingSelect').each(function() {\r\n\t\t\tRVS.F.createEaseOptions(this);\r\n\t\t});\r\n\r\n\t\t// CREATE WPML LISTS\r\n\t\tjQuery('.tos2.wpml_lang_selector').each(function() {\r\n\t\t\tRVS.F.createWPMLOptions(this);\r\n\t\t});\r\n\r\n\t\tif (mode===\"overview\") {\r\n\t\t\t// WPML LANG SELECTORS\r\n\t\t\tjQuery('.tos2.wpml_lang_selector').ddTP({\r\n\t\t\t\tplaceholder:\"Select From List\",\r\n\t\t\t\tpre: '<span><img src=\"#data#\" class=\"wpml-img-flag\" />',\r\n\t\t\t\tpreData : 'src'\r\n\t\t\t});\r\n\r\n\t\t\t// Create SelectBoxes without SearchBox\r\n\t\t\tjQuery('.tos2.nosearchbox').ddTP({placeholder:\"Select From List\"});\r\n\t\t\tjQuery('.tos2.searchbox').ddTP({placeholder:\"Enter or Select\"});\r\n\r\n\t\t}\r\n\r\n\t\tjQuery('#tl_gridmanagement_wrap .tos2.nosearchbox').ddTP({placeholder:\"Select From List\"});\r\n\r\n\t\tRVS.DOC.on('click','#add_on_management',function() {\r\n\t\t\tif (RVS.ENV.newAddonsCounter!==undefined) {\r\n\t\t\t\tRVS.ENV.newAddonsCounter.style.display=\"none\";\r\n\t\t\t}\r\n\t\t\tRVS.F.openAddonModal();\r\n\t\t});\r\n\t\t// INIT ADDON MODAL LISTENER\r\n\t\tRVS.DOC.on('openAddonModal',RVS.F.openAddonModal);\r\n\r\n\t}\r\n\r\n\tRVS.F.updateZoom = function(zoom) {\r\n\t\tif (zoom<100)\r\n\t\t\tRVS.zoom = Math.round((0.5 + (0.5 * zoom/100))*100) / 100;\r\n\t\telse\r\n\t\t\tRVS.zoom = Math.round((1 + (1 * (zoom-100)/100))*100) / 100;\r\n\t\ttpGS.gsap.set(RVS.C.UL,{scaleX:RVS.zoom,scaleY:RVS.zoom,transformOrigin:\"0px 0px\"});\r\n\t\t//RVS.C.zoomFactor.textContent = (\"\"+RVS.zoom).length===1 ? RVS.zoom+\".0\" : (\"\"+RVS.zoom).length===3 ? RVS.zoom+\"0\" : RVS.zoom;\r\n\t\tRVS.C.zoomFactor.textContent = Math.round(RVS.zoom*100)+\"%\";\r\n\t\tRVS.F.updateContentDeltas();\r\n\t\tRVS.F.buildRuler(true);\r\n\t\tRVS.F.setRulers();\r\n\t}\r\n\r\n\r\n\tRVS.F.initialiseInputBoxes = function(mode) {\r\n\r\n\t\tRVS.DOC.on('gethtml5posterimage',function(a,param) {\r\n\t\t\tRVS.F.videoExtract.get(param===\"slide\" ? RVS.SLIDER[RVS.S.slideId].slide.bg.mpeg : document.getElementById(\"layer_mpeg_src\").value,function(data,param) {\r\n\t\t\t\tRVS.F.setBGPosterImage(data.path,data.id,param);\r\n\t\t\t},param===\"slide\" ? RVS.SLIDER[RVS.S.slideId].slide.bg.video.startAt : document.getElementById(\"layer_video_start\").value ,param);\r\n\t\t});\r\n\r\n\t\tif (mode!=='overview') {\r\n\t\t\tRVS.C.zoomTopWrap = document.getElementById('zoomer_wrap_toolbar');\r\n\t\t\tRVS.C.zoomFactor = document.getElementById('zoomer_factor');\r\n\t\t\tRVS.C.zoomPin = document.getElementById('ezoomer_pin')\r\n\t\t\t//Start Zoomable\r\n\t\t\tjQuery(RVS.C.zoomPin).resizable({\r\n\t\t\t\thandles:'e',\r\n\t\t\t\tminWidth:\"none\",\r\n\t\t\t\tgrid: [ 10,1 ],\r\n\t\t\t\tcontainment:\"parent\",\r\n\t\t\t\tstart:function() {\r\n\t\t\t\t\tRVS.C.zoomTopWrap.classList.add(\"inzoommove\");\r\n\t\t\t\t},\r\n\t\t\t\tstop:function() {\r\n\t\t\t\t\tRVS.C.zoomTopWrap.classList.remove(\"inzoommove\");\r\n\t\t\t\t},\r\n\t\t\t\tresize:function(e,a) {\r\n\t\t\t\t\tif (a.size.width<0) a.size.width=0;\r\n\t\t\t\t\tRVS.F.updateZoom(a.size.width);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('click','#zoomer_wrap_toolbar .selected_placeholder',function() {\r\n\t\t\t\tRVS.F.updateZoom(100);\r\n\t\t\t\tRVS.C.zoomPin.style.width = \"100px\";\r\n\t\t\t});\r\n\t\t}\r\n\t\tRVS.F.initialiseGlobalBoxes(mode);\r\n\r\n\t\t//Initialise Color Boxes\r\n\t\tRVS.F.initTpColorBoxes('.my-color-field');\r\n\r\n\t\t//Initialise the Predefined DropDowns for Special Fields\r\n\t\tRVS.F.initPreDrops();\r\n\r\n\t\tRVS.F.initInputsWithPresets();\r\n\t\tRVS.DOC.on('keyup focus change', '.livechange', function(e) {\r\n\t\t\tvar ds = this.dataset;\r\n\t\t\tRVS.S.inputField = this.id;\r\n\t\t\tRVS.S.inputFieldCursorAt = this.selectionStart;\r\n\t\t\tif (ds!==undefined && ds.evt!==undefined) jQuery(document.body).trigger(ds.evt,{event:e,val:this.value,eventparam:ds.evtparam});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('active focus',' .rsdyn_inp',function(e) {\r\n\t\t\tvar drow = RVS.F.closestNode(this,'ROW'),\r\n\t\t\t\tlongshort = RVS.F.closestClass(this,'dyn_inp_wrap');\r\n\t\t\tif (drow!==null && drow!==undefined) drow.classList.add('active_'+longshort.tagName.toLowerCase());\r\n\r\n\t\t});\r\n\t\tRVS.DOC.on('blur',' .rsdyn_inp',function(e) {\r\n\t\t\tvar drow = RVS.F.closestNode(this,'ROW');\r\n\t\t\tif (drow!==null && drow!==undefined) {\r\n\t\t\t\tdrow.classList.remove('active_onelong');\r\n\t\t\t\tdrow.classList.remove('active_oneshort');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// RECORD CURRENT FOCUSED FIELD\r\n\t\tRVS.DOC.on('focus','textarea, input', function(e) {\r\n\t\t\tRVS.S.inFocus = e.currentTarget;\r\n\t\t\tRVS.S.inFocusValue = e.currentTarget.value;\r\n\t\t});\r\n\r\n\t\t// RECORD LAST BLURRED FIELD\r\n\t\tRVS.DOC.on('blur','textarea, input', function(e) {\r\n\t\t\tif (e.target.id===\"ta_layertext\") RVS.F.redrawEditedTextLayerwhenPlaceholder();\r\n\t\t\tRVS.S.inFocus = \"none\";\r\n\t\t});\r\n\r\n\t\t// CLOSE DROPPABLE WINDOW IF NEEDED\r\n\t\tRVS.DOC.on('click','#filedrop_close',RVS.F.browserDroppable.close);\r\n\r\n\t\t// CLOSE DROPPABLE WINDOW IF NEEDED\r\n\t\tRVS.DOC.on('click','#fullpage_close',RVS.F.fullPageInfo.close);\r\n\r\n\r\n\t\t// BLUR AND CLICK ON PRESETS FOR INPUT FIELDS\r\n\t\tRVS.DOC.on('mouseleave','.input_presets_wrap',function() {\tjQuery(this).removeClass(\"infocus\");});\r\n\r\n\t\t// INPUT PRESET HANDLER (SET PRESETS LISTED ON INPUT FIELD)\r\n\t\tRVS.DOC.on('click','.input_preset',function() {\r\n\t\t\tif (this.dataset.val===\"###metapicker###\") {\r\n\t\t\t\tRVS.DOC.trigger('addMetaToLayer',{eventparam:\"#\"+this.dataset.iid});\r\n\t\t\t} else {\r\n\t\t\t\tvar inp = jQuery('#'+this.dataset.iid);\r\n\t\t\t\tinp.val(this.dataset.val);\r\n\t\t\t\tinp.trigger(\"change\");\r\n\t\t\t\tinp.trigger('focus');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.show_more_toggle',function() {\r\n\t\t\tjQuery(this).toggleClass(\"showlesson\");\r\n\t\t\tjQuery(this.dataset.toggle).toggle();\r\n\t\t});\r\n\r\n\r\n\r\n\t\t// ICON SWITCHER TRIGGERING INPUT FIELD\r\n\t\tRVS.DOC.on('click','.icon_switcher',function() {\r\n\t\t\tif (this.className.indexOf('icsw_on')>=0)\r\n\t\t\t\tRVS.F.setInputTo({field:this.dataset.ref, val:false});\r\n\t\t\telse\r\n\t\t\t\tRVS.F.setInputTo({field:this.dataset.ref, val:true});\r\n\t\t});\r\n\r\n\t\t// TRIGGER EVENT ON CLICK\r\n\t\tRVS.DOC.on('click','.triggerEvent',function(e) {\r\n\t\t\tvar ds = this.dataset;\r\n\t\t\tjQuery(document.body).trigger(ds.evt,{event:e,eventparam:ds.evtparam});\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('click','.vs-item',function() {\r\n\t\t\tjQuery(this.parentNode).find('.vs-item').removeClass(\"selected\");\r\n\t\t\tthis.className += \" selected\";\r\n\t\t\tRVS.F.showHideGroups({hide:this.dataset.hide, show:this.dataset.show, showprio:this.dataset.showprio});\r\n\t\t\tif (this.dataset.evt==\"redrawSelectedLayersInnerHTML\") RVS.F.redrawTextLayerInnerHTML(RVS.selLayers[0],true);\r\n\t\t});\r\n\r\n\t\t// CLICK ON BUTTONS\r\n\t\tRVS.DOC.on('click','.screen_selector, .toolkit_selector, .eventcaller, .form_opener_btn, .collectortab, .opensettingstrigger, .extendval, .openmodaltrigger',function(e) {\r\n\t\t\tif (e.target.className.indexOf(\"tponoff\")>=0 || this.className.indexOf(\"ssnotavailable\")>=0) {\r\n\t\t\t} else {\r\n\t\t\t\tif (this.dataset.triggerinp!==undefined) jQuery(this.dataset.triggerinp).val(this.dataset.triggerinpval).trigger(\"change\");\r\n\t\t\t\tif (this.dataset.forms!==undefined) RVS.F.openSettings({forms:jQuery(this).data('forms'), uncollapse:this.dataset.collapse});\r\n\t\t\t\tif (this.dataset.unselect!==undefined) jQuery(this.dataset.unselect).removeClass(\"selected\");\r\n\t\t\t\tif (this.dataset.select!==undefined) jQuery(this.dataset.select).addClass(\"selected\");\r\n\r\n\t\t\t\tif(this.dataset.extendval!==undefined) {\r\n\t\t\t\t\tvar inp = jQuery(this.dataset.inp);\r\n\t\t\t\t\tinp.val(inp.val()+\" \"+this.dataset.extendval).trigger(\"change\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.dataset.screenicon!==undefined) {\r\n\t\t\t\t\tjQuery('#screen_selector_ph_icon').html(this.dataset.screenicon);\r\n\t\t\t\t\tjQuery('#screen_selector_ph_icon_sr').html(this.dataset.screenicon);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.dataset.evt!==undefined && (this.className.indexOf('callEvent')>=0 || this.className.indexOf('eventcaller')>=0))\r\n\t\t\t\t\tjQuery(document.body).trigger(this.dataset.evt,this.dataset.evtparam);\r\n\r\n\t\t\t\tif (this.dataset.modal!==undefined) RVS.F.RSDialog.create({modalid:this.dataset.modal});\r\n\t\t\t}\r\n\r\n\t\t\t//Stop All Animation\r\n\t\t\tRVS.DOC.trigger('previewStopLayerAnimation');\r\n\r\n\t\t});\r\n\r\n\r\n\r\n\t\t//CLIPBOARD FUNCTIONS\r\n\t\t//jQuery('.copyclipboard').each(function() {\r\n\t\tif (jQuery('.copyclipboard').length>0 && typeof RSClipboard!==\"undefined\") {\r\n\t\t\tvar clipboard = new RSClipboard('.copyclipboard');\r\n\t\t    clipboard.on('success', function(e) {\r\n\t\t    \ttpGS.gsap.fromTo(jQuery(e.trigger),0.4,{autoAlpha:0},{autoAlpha:1,ease:\"power3.inOut\"});\r\n\t\t    });\r\n\t\t    clipboard.on('error', function(e) {\r\n\t\t    \te = jQuery(e.trigger);\r\n\t\t    \te.addClass(\"errorcopy\");\r\n\t\t    \tsetTimeout(function() {\r\n\t\t    \t\te.removeClass(\"errorcopy\");\r\n\t\t    \t},400);\r\n\t\t    });\r\n\t\t  }\r\n\t\t//})\r\n\r\n\t\t// DATEPICKER INITIALISATION\r\n\t\tif (jQuery('.inputDatePicker').length>0)\r\n\t\t\tjQuery('.inputDatePicker').datepicker({\r\n\t\t\t\tdateFormat : 'dd-mm-yy 00:00'\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t//Value Changes throug Keyboard\r\n\t\tRVS.DOC.on('keydown',\".valueduekeyboard\",function(e,d) {\r\n\t\t\tvar code = (e.keyCode ? e.keyCode : e.which),\r\n\t\t\t\tdist = e.currentTarget.dataset.steps!=undefined ? parseFloat(e.currentTarget.dataset.steps):1,\r\n\t\t\t\tmin = e.currentTarget.dataset.min!=undefined ? e.currentTarget.dataset.min : -99999,\r\n\t\t\t\tmax = e.currentTarget.dataset.max!=undefined ? e.currentTarget.dataset.max : 99999,\r\n\t\t\t\tcv = parseFloat(e.currentTarget.value) || 0;\r\n\t\t\tif (e.shiftKey) dist = dist*10;\r\n\r\n\t\t\tswitch(code) {\r\n\t\t\t\tcase 38:\r\n\t\t\t\t\te.currentTarget.value = Math.min(cv+dist,max);\r\n\t\t\t\t\tif (e.currentTarget.value !== Math.round((e.currentTarget.value))) e.currentTarget.value = (Math.round(e.currentTarget.value*100))/100;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 40:\r\n\t\t\t\t\te.currentTarget.value = Math.max(cv-dist,min);\r\n\t\t\t\t\tif (e.currentTarget.value !== Math.round((e.currentTarget.value))) e.currentTarget.value = (Math.round(e.currentTarget.value*100))/100;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (code===38 || code===40) jQuery(e.currentTarget).trigger(\"change\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('keyup','.losefocusonenter',function(e,d){\r\n\t\t\tif (e.keyCode=== 13) {\r\n\t\t\t\tjQuery(document.activeElement).blur();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// HANDLE ENTER AND ESC BUTTONS ON INPUT FIELDS IN FOCUS TO BE ABLE TO REVERT TO OLD VALUES\r\n\t\tRVS.DOC.on('keyup','input, textarea',function(e,d) {\r\n\t\t\tif (e.keyCode===13)\r\n\t\t\t\tRVS.S.inFocusValue = this.value;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('keyup keydown',function(e,d){\r\n\t\t\tif (e.keyCode=='9') jQuery('#builderView').scrollTop(0);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#timline_process',function() {RVS.F.toggleTimeLine()});\r\n\r\n\t\tRVS.DOC.on('keydown',function(e,d){\r\n\t\t\tif (e.keyCode=='27') {\r\n\t\t\t\tif (RVS.S.inFocus!==undefined && RVS.S.inFocus!==\"none\"  &&  RVS.S.inFocus.value!==RVS.S.inFocusValue) {\r\n\t\t\t\t\tRVS.S.inFocus.value = RVS.S.inFocusValue;\r\n\t\t\t\t\tif (RVS.S.inFocus.dataset.evt!==undefined) {\r\n\t\t\t\t\t\tRVS.DOC.trigger(RVS.S.inFocus.dataset.evt,{val:RVS.S.inFocusValue,eventparam:RVS.S.inFocus.dataset.evtparam});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (RVS.S.inFocus!==undefined && RVS.S.inFocus!==\"none\") jQuery(RVS.S.inFocus).trigger(\"blur\");\r\n\t\t\t}\r\n\t\t\tif (RVS.S.ovMode!==true && e.keyCode=='32' && (RVS.S.inFocus===\"none\" || RVS.S.inFocus===undefined)) {\r\n\t\t\t\tRVS.F.toggleTimeLine();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t//if (e.ctrlKey && e.keyCode==\"72\") RVS.F.HighContrast(\"toggle\");\r\n\r\n\t\t});\r\n\r\n\t\t// RESET VALUE TO DEFAULT\r\n\t\tRVS.DOC.on('click','.resettodefault',function() {\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\tds = btn.data(),\r\n\t\t\t\ttarget = jQuery(ds.target);\r\n\t\t\t\t//update Object\r\n\t\t\t\tif (ds.r!==undefined)\r\n\t\t\t\t\tif (btn.hasClass(\"layerinput\")) {\r\n\t\t\t\t\t\tRVS.F.updateLayerObj({path:ds.r,val:ds.default,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\t\tif (ds.lib!==undefined) RVS.F.updateLayerObj({path:ds.lib,val:\"\"});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:ds.r,val:ds.default,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\t\tif (ds.lib!==undefined) RVS.F.updateSliderObj({path:ds.lib,val:\"\"});\r\n\t\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//update input:\r\n\t\t\t\t\tif (target!==undefined) {\r\n\t\t\t\t\t\ttarget.val(ds.default);\r\n\t\t\t\t\t\ttarget.trigger(\"change\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (ds.evt!==undefined && ds.evt !== '') RVS.DOC.trigger(ds.evt,ds.evtparam);\r\n\t\t\t\t}\r\n\r\n\t\t});\r\n\r\n/********************************************\r\n\tGET NEW IMAGE SIZE\r\n*********************************************/\r\n\r\n\t\tRVS.DOC.on('getNewImageSize',function(e,param){\r\n\t\t\tif (param!==undefined) {\r\n\t\t\t\tvar a = param.split(\".\");\r\n\t\t\t\tif (a[0]!=='slidebg' && a[0]!=='slider' && RVS.selLayers.length<=0) return;\r\n\t\t\t\tvar o = a[0]===\"slidebg\" ? {r:\"#slide#.slide.bg.image\", rid:\"#slide#.slide.bg.imageId\", lib:\"#slide#.slide.bg.imageLib\",  targetType:\"slide\", evt:\"updateslidebasic\", size: RVS.SLIDER[RVS.S.slideId].slide.bg.imageSourceType, url: RVS.SLIDER[RVS.S.slideId].slide.bg.image, id:RVS.SLIDER[RVS.S.slideId].slide.bg.imageId} :\r\n\t\t\t\t\t\ta[0]===\"slider\" ? {r:\"settings.layout.bg.image\", rid:\"settings.layout.bg.imageId\", lib:\"settings.layout.bg.imageLib\",  targetType:\"slide\", evt:\"sliderBGUpdate\", size: RVS.SLIDER.settings.layout.bg.imageSourceType, url: RVS.SLIDER.settings.layout.bg.image, id:RVS.SLIDER.settings.layout.bg.imageId} :\r\n\t\t\t\t\t\t{lib:\"media.imageLib\",  targetType:\"layer\", evt:\"updatelayerimagesrc\",size: RVS.L[RVS.selLayers[0]].behavior.imageSourceType};\r\n\t\t\t\tswitch (a[0]) {\r\n\t\t\t\t\tcase \"slider\":\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"slidebg\":\r\n\t\t\t\t\t\to.evtparam = a[1]===\"object\" ? \"double\" : \"kenburnupdate\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"image\":\r\n\t\t\t\t\tcase \"poster\":\r\n\t\t\t\t\t\to.rid = \"media.\"+a[0]+\"Id\"; o.r = \"media.\"+a[0]+\"Url\";\r\n\t\t\t\t\t\to.url = RVS.L[RVS.selLayers[0]].media[a[0]+\"Url\"];\r\n\t\t\t\t\t\to.id = RVS.L[RVS.selLayers[0]].media[a[0]+\"Id\"];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"bg\":\r\n\t\t\t\t\t\to.rid=\"idle.backgroundImageId\"; o.r=\"idle.backgroundImage\"; o.lib=\"idle.bgimagelib\"; o.evt=\"updatelayerbgimage\";\r\n\t\t\t\t\t\to.url = RVS.L[RVS.selLayers[0]].idle.backgroundImage;\r\n\t\t\t\t\t\to.id = RVS.L[RVS.selLayers[0]].idle.backgroundImageId;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (a[1]) {\r\n\t\t\t\t\tcase \"media\":RVS.F.getMediaWithNewSize(o);break;\r\n\t\t\t\t\tcase \"object\":RVS.F.getObjectWithNewSize(o);break;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\r\n/********************************************\r\n\tRESET POSTER IMAGE\r\n*********************************************/\r\n\r\n\t\tRVS.DOC.on('click','.removePosterImage',function() {\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\tds = btn.data(),\r\n\t\t\t\ttarget = jQuery(ds.target),\r\n\t\t\t\tmultiple = this.dataset.multiple===\"true\" || this.dataset.multiple==true;\r\n\r\n\t\t\t//update Object\r\n\t\t\tif (ds.r!==undefined)\r\n\t\t\t\tif (btn.hasClass(\"layerinput\")) {\r\n\t\t\t\t\t//LAYER INPUT UPDATE\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"UpdateLayerImage\",txt:\"Update Layer Image\",icon:\"photo\"});\r\n\t\t\t\t\tif (ds.rid!==undefined) RVS.F.updateLayerObj({path:ds.rid,val:\"\"});\r\n\t\t\t\t\tif (ds.lib!==undefined) RVS.F.updateLayerObj({path:ds.lib,val:\"nothing\"});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:ds.r,val:\"\",evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"UpdateLayerImage\"});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// SLIDE INPUT UPDATE\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"UpdateSlideImage\",txt:\"Update Slide Image\",icon:\"photo\"});\r\n\t\t\t\t\tif (ds.rid!==undefined) RVS.F.updateSliderObj({path:ds.rid,val:\"\"});\r\n\t\t\t\t\tif (ds.lib!==undefined) RVS.F.updateSliderObj({path:ds.lib,val:\"nothing\"});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:ds.r,val:\"\",evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"UpdateSlideImage\"});\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('#form_slidebg_source'), path:RVS.S.slideId+\".slide.\", trigger:\"init\"});\r\n\t\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//update input:\r\n\t\t\t\tif (target!==undefined) {\r\n\t\t\t\t\ttarget.val(\"\");\r\n\t\t\t\t\ttarget.trigger(\"change\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tds.evtparam = ds.evtparam===undefined ? {} : ds.evtparam;\r\n\t\t\t\tds.evtparam.urlImage = \"\";\r\n\t\t\t\tif (ds.evt!==undefined && ds.evt !== '') RVS.DOC.trigger(ds.evt,ds.evtparam);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n/********************************************\r\n\tMEDIA LIBRARY VIDEO LOADING PROCESSES\r\n*********************************************/\r\n\r\n\t\tRVS.DOC.on('click','.getVideoFromMediaLibrary',function() {\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\tds = btn.data(),\r\n\t\t\t\ttarget = jQuery(ds.target),\r\n\t\t\t\tislayer = this.className.indexOf(\"layerinput\")>=0;\r\n\t\t\t\tRVS.F.openAddVideoDialog(RVS_LANG.choose_video,function(urlVideo, videoID){\r\n\r\n\t\t\t\t\t//update Object\r\n\t\t\t\t\tif (ds.r!==undefined) {\r\n\r\n\t\t\t\t\t\tRVS.F.openBackupGroup({id:\"updateVideo\",txt:\"Update Video from Media Library\",icon:\"videocam\"});\r\n\t\t\t\t\t\tif (ds.rid!==undefined) RVS.F.updateSliderObj({path:ds.rid,val:videoID});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:ds.r,val:urlVideo,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\t\tRVS.F.closeBackupGroup({id:\"updateVideo\"});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//update input:\r\n\t\t\t\t\t\tif (target!==undefined) {\r\n\t\t\t\t\t\t\ttarget.val(urlVideo);\r\n\t\t\t\t\t\t\tRVS.F.openBackupGroup({id:\"updateVideo\",txt:\"Update Video from Media Library\",icon:\"videocam\"});\r\n\t\t\t\t\t\t\ttarget.trigger(\"change\");\r\n\t\t\t\t\t\t\tif (ds.rid!==undefined && !islayer) RVS.F.updateSliderObj({path:ds.rid,val:videoID});\r\n\t\t\t\t\t\t\tif (RVS.selLayers.length>0 && islayer) {\r\n\t\t\t\t\t\t\t\tRVS.F.updateLayerObj({path:\"media.mediaType\",val:(ds.mediatype!==undefined ? ds.mediatype : \"html5\")});\r\n\t\t\t\t\t\t\t\tif (ds.rid!==undefined && islayer) RVS.F.updateLayerObj({path:ds.rid,val:videoID});\r\n\t\t\t\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('.layer_settings_collector'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tRVS.F.closeBackupGroup({id:\"updateVideo\"});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (ds.evt!==undefined && ds.evt !== '') RVS.DOC.trigger(ds.evt,ds.evtparam);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t});\r\n\r\n\r\n/********************************************\r\n\tOBJECT LIBRARY VIDEO LOADING PROCESSES\r\n*********************************************/\r\n\r\n\t\t// Get Image from Media Library\r\n\t\tRVS.DOC.on('click','.getVideoFromObjectLibrary',function() {\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\tds = btn.data();\r\n\t\t\tds.targetType = btn.hasClass(\"layerinput\") ? \"layer\" : btn.hasClass(\"sliderinput\") ? \"slider\" : \"slide\";\r\n\t\t\tRVS.F.openObjectLibrary({types:[\"videos\"],filter:\"all\", selected:[\"videos\"], data:ds, success:{video:\"updateVideoSrcFromLibrary\"}});\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('updateVideoSrcFromLibrary',function(e,ds){\r\n\t\t\tif (ds.r!==undefined)\r\n\t\t\t\tif (ds.targetType===\"layer\") {\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"videofromobjlibrary\",txt:\"Video from OBJ Library\",icon:\"videocam\",lastkey:\"mp4Url\"});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"media.imageLib\",val:\"objectlibrary\"});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"media.mediaType\",val:\"html5\"});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"media.posterUrl\",val:ds.img});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"media.mp4Url\",val:ds.video,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"videofromobjlibrary\"});\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('.layer_settings_collector'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\t\t\t} else\r\n\t\t\t\tif (ds.targetType===\"slide\") {\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"videofromobjlibrary\",txt:\"Video from OBJ Library\",icon:\"videocam\",lastkey:\"mp4Url\"});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".slide.bg.image\",val:ds.img});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".slide.bg.imageId\",val:undefined});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".slide.bg.imageLib\",val:\"objectlibrary\"});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+\".slide.bg.mpeg\",val:ds.video,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"videofromobjlibrary\"});\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('.slide_settings_collector'), path:RVS.S.slideId+\".slide.\", trigger:\"init\"});\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"videofromobjlibrary\",txt:\"Video from OBJ Library\",icon:\"videocam\",lastkey:\"mp4Url\"});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:\"settings.\"+ds.r+\".image\",val:ds.img});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:\"settings.\"+ds.r+\".imageId\",val:undefined});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:\"settings.\"+ds.r+\".imageLib\",val:\"objectlibrary\"});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:\"settings.\"+ds.r+\".mpeg\",val:ds.video,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"videofromobjlibrary\"});\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('.slide_settings_collector'), trigger:\"init\"});\r\n\t\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//update input:\r\n\t\t\t\tif (ds.target!==undefined) {\r\n\t\t\t\t\tds.target.val(ds.img);\r\n\t\t\t\t\tds.target.trigger(\"change\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ds.evt!==undefined && ds.evt !== '') RVS.DOC.trigger(ds.evt,ds.evtparam);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n/********************************************\r\n\tMEDIA LIBRARY IMAGE LOADING PROCESSES\r\n*********************************************/\r\n\r\n\t\t// Get Image from Media Library\r\n\t\tRVS.DOC.on('click','.getImageFromMediaLibrary',function() {\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\tds = btn.data(),\r\n\t\t\t\tmultiple = this.dataset.multiple===\"true\" || this.dataset.multiple==true;\r\n\t\t\tds.targetType = btn.hasClass(\"layerinput\") ? 'layer' : 'slide';\r\n\t\t\tRVS.F.openAddImageDialog(RVS_LANG.choose_image,function(urlImage, imageID){RVS.F.updateImageSrcFromMedia(ds,urlImage,imageID);},multiple);\r\n\t\t});\r\n\r\n\t\t// GET AN IMAGE FROM MEDIA LIBRARY WITH DIFFERENT SIZE\r\n\t\tRVS.F.getMediaWithNewSize = function(ds) {\r\n\t\t\t// Get Image from Media Library\r\n\t\t\tvar target = jQuery(ds.target);\r\n\t\t\tRVS.F.ajaxRequest('load_wordpress_image', {type:ds.size,id:ds.id}, function(response){RVS.F.updateImageSrcFromMedia(ds,response.url,ds.id);},false);\r\n\t\t};\r\n\r\n\t\tRVS.F.updateImageSrcFromMedia = function(ds,urlImage,imageID) {\r\n\t\t\t//update Object\r\n\t\t\tif (ds.r!==undefined) {\r\n\t\t\t\turlImage=urlImage.split(\" \").join('%20');\r\n\t\t\t\tif (ds.targetType===\"layer\") {\r\n\t\t\t\t\t//LAYER INPUT UPDATE\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"UpdateLayerImage\",txt:\"Update Layer Image\",icon:\"photo\"});\r\n\t\t\t\t\tif (ds.lib!==undefined) RVS.F.updateLayerObj({path:ds.lib,val:\"medialibrary\"});\r\n\t\t\t\t\tif (ds.rid!==undefined) RVS.F.updateLayerObj({path:ds.rid,val:imageID});\r\n\t\t\t\t\t//if (ds.rty!==undefined) RVS.F.updateLayerObj({path:ds.rty,val:\"medialibrary\"});\r\n\t\t\t\t\tif (ds.sty!==undefined) RVS.F.updateLayerObj({path:ds.sty,val:\"full\"});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:ds.r,val:urlImage,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"UpdateLayerImage\"});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// SLIDE INPUT UPDATE\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"UpdateSlideImage\",txt:\"Update Slide Image\",icon:\"photo\"});\r\n\t\t\t\t\tif (ds.lib!==undefined) RVS.F.updateSliderObj({path:ds.lib,val:\"medialibrary\"});\r\n\t\t\t\t\tif (ds.rid!==undefined) RVS.F.updateSliderObj({path:ds.rid,val:imageID});\r\n\t\t\t\t\t//if (ds.rty!==undefined) RVS.F.updateSliderObj({path:ds.rty,val:\"medialibrary\"});\r\n\t\t\t\t\tif (ds.sty!==undefined) RVS.F.updateSliderObj({path:ds.sty,val:\"full\"});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:ds.r,val:urlImage,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"UpdateSlideImage\"});\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('#form_slidebg_source'), path:RVS.S.slideId+\".slide.\", trigger:\"init\"});\r\n\t\t\t\t}\r\n            } else {\r\n                //update input:\r\n\t\t\t\tif (ds.target!==undefined && ds.target!==\"\") {\r\n\t\t\t\t\tvar target = jQuery(ds.target)\r\n\t\t\t\t\ttarget.val(urlImage);\r\n\t\t\t\t\ttarget.trigger(\"change\");\r\n\t\t\t\t}\r\n\t\t\t\tds.evtparam = ds.evtparam===undefined ? {} : ds.evtparam;\r\n\t\t\t\tds.evtparam.urlImage = urlImage;\r\n\t\t\t\tif (ds.evt!==undefined && ds.evt !== '') RVS.DOC.trigger(ds.evt,ds.evtparam);\r\n\t\t\t}\r\n\t\t}\r\n\r\n/********************************************\r\n\tOBJECT LIBRARY IMAGE LOADING PROCESSES\r\n*********************************************/\r\n\r\n\t\t// Get a new Dimenstion of same Image from Object Library\r\n\t\tRVS.F.getObjectWithNewSize = function(_) {\r\n\t\t\tRVS.F.ajaxRequest('load_library_object', {type:_.size,id:_.url}, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\t_.img = response.url;\r\n\t\t\t\t\tRVS.DOC.trigger('updateImageSrcFromLibrary',_);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Get Image from Object Library by Pick\r\n\t\tRVS.DOC.on('click','.getImageFromObjectLibrary',function() {\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\tds = btn.data();\r\n\t\t\tds.targetType = btn.hasClass(\"layerinput\") ? \"layer\" : \"slide\";\r\n\t\t\tRVS.F.openObjectLibrary({types:[\"images\",\"objects\"],filter:\"all\", selected:[\"images\"], data:ds, success:{image:\"updateImageSrcFromLibrary\"}});\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('updateImageSrcFromLibrary',function(e,ds){\r\n\t\t\tif (ds.r!==undefined)\r\n\t\t\t\tif (ds.targetType===\"layer\") {\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"UpdateLayerImage\",txt:\"Update Layer Image\",icon:\"photo\"});\r\n\t\t\t\t\t//if (ds.rty!==undefined) RVS.F.updateLayerObj({path:ds.rty,val:\"objectlibrary\"});\r\n\t\t\t\t\tif (ds.sty!==undefined) RVS.F.updateLayerObj({path:ds.sty,val:ds.size});\r\n\t\t\t\t\tif (ds.rid!==undefined) RVS.F.updateLayerObj({path:ds.rid,val:\"objectlibrary\"});\r\n\t\t\t\t\tif (ds.lib!==undefined) RVS.F.updateLayerObj({path:ds.lib,val:\"objectlibrary\"});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:ds.r,val:ds.img,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"UpdateLayerImage\"});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"UpdateSlideImage\",txt:\"Update Slide(r) Image\",icon:\"photo\"});\r\n\t\t\t\t\t//if (ds.rty!==undefined) RVS.F.updateSliderObj({path:ds.rty,val:\"objectlibrary\"});\r\n\t\t\t\t\tif (ds.rid!==undefined) RVS.F.updateSliderObj({path:ds.rid,val:\"objectlibrary\"});\r\n\t\t\t\t\tif (ds.sty!==undefined) RVS.F.updateSliderObj({path:ds.sty,val:ds.size});\r\n\t\t\t\t\tif (ds.lib!==undefined) RVS.F.updateSliderObj({path:ds.lib,val:\"objectlibrary\"});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:ds.r,val:ds.img,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"UpdateSlideImage\"});\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('#form_slidebg_source'), path:RVS.S.slideId+\".slide.\", trigger:\"init\"});\r\n\t\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//update input:\r\n\t\t\t\tif (ds.target!==undefined) {\r\n\t\t\t\t\tds.target.val(ds.img);\r\n\t\t\t\t\tds.target.trigger(\"change\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ds.evt!==undefined && ds.evt !== '') RVS.DOC.trigger(ds.evt,ds.evtparam);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n/********************************************\r\n\tSTREAM IMAGE LOADING PROCESSES\r\n*********************************************/\r\n\r\n\t\tRVS.DOC.on('click','.getImageFromStream',function() {\r\n\t\t\tvar ds = this.dataset;\r\n\t\t\tds.targetType = this.className.indexOf(\"layerinput\") >=0 ? \"layer\" : \"slide\";\r\n\t\t\tif (ds.r!==undefined)\r\n\t\t\t\tif (ds.targetType===\"layer\") {\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"UpdateLayerImage\",txt:\"Update Layer Image\",icon:\"photo\"});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:\"media.imageLib\",val:\"stream\"});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:ds.rid,val:\"stream\"});\r\n\t\t\t\t\tRVS.F.updateLayerObj({path:ds.r,val:RVS.ENV.img_ph_url,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"UpdateLayerImage\"});\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tRVS.F.openBackupGroup({id:\"UpdateSlideImage\",txt:\"Update Slide Image\",icon:\"photo\"});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:ds.rid,val:\"stream\"});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:ds.r,val:RVS.ENV.img_ph_url,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\tRVS.F.closeBackupGroup({id:\"UpdateSlideImage\"});\r\n\t\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//update input:\r\n\t\t\t\tif (ds.target!==undefined) {\r\n\t\t\t\t\tds.target.val(\"stream\");\r\n\t\t\t\t\tds.target.trigger(\"change\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ds.evt!==undefined && ds.evt !== '') RVS.DOC.trigger(ds.evt,ds.evtparam);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.getImageFromVimeo',function() {\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\tds = btn.data(),\r\n\t\t\t\ttarget = jQuery(ds.target),\r\n\t\t\t\tvimeoid = RVS.F.getDeepVal({path:ds.f}),\r\n\t\t\t\turlImage = location.protocol+\"//vimeo.com/api/v2/video/\" +vimeoid+ \".json\";\r\n\r\n\t\t\tjQuery.ajax({\r\n\t\t        type:'GET',\r\n\t\t        url: urlImage,\r\n\t\t        success: function(data){\r\n\t\t        \tif (ds.r!==undefined) {\r\n\t\t\t\t\t\tRVS.F.openBackupGroup({id:\"UpdateLayerImage\",txt:\"Update Layer Image\",icon:\"photo\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:ds.r,val:data[0].thumbnail_large,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\t\t\tif (ds.rid!==undefined) RVS.F.updateSliderObj({path:ds.rid,val:\"objectlibrary\"});\r\n\t\t\t\t\t\tRVS.F.closeBackupGroup({id:\"UpdateLayerImage\"});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//update input:\r\n\t\t\t\t\t\tif (target!==undefined) {\r\n\t\t\t\t\t\t\ttarget.val(data[0].thumbnail_large);\r\n\t\t\t\t\t\t\ttarget.trigger(\"change\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ds.evt!==undefined) RVS.DOC.trigger(ds.evt,ds.evtparam);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t    });\r\n\t\t});\r\n\r\n\t\t// Get YouTube Thumb\r\n\t\tRVS.DOC.on('click','.getImageFromYouTube',function() {\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\tds = btn.data(),\r\n\t\t\t\ttarget = jQuery(ds.target),\r\n\t\t\t\tyoutubeid = RVS.F.getDeepVal({path:ds.f}),\r\n\t\t\t\turlImage = location.protocol+\"//img.youtube.com/vi/\"+youtubeid+\"/sddefault.jpg\";\r\n\r\n\t\t\tif (ds.r!==undefined) {\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"UpdateLayerImage\",txt:\"Update Layer Image\",icon:\"photo\"});\r\n\t\t\t\tRVS.F.updateSliderObj({path:ds.r,val:urlImage,evt:ds.evt, evtparam:ds.evtparam});\r\n\t\t\t\tif (ds.rid!==undefined) RVS.F.updateSliderObj({path:ds.rid,val:\"objectlibrary\"});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"UpdateLayerImage\"});\r\n\t\t\t} else {\r\n\t\t\t\t//update input:\r\n\t\t\t\tif (target!==undefined) {\r\n\t\t\t\t\ttarget.val(urlImage);\r\n\t\t\t\t\ttarget.trigger(\"change\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ds.evt!==undefined && ds.evt !== '') RVS.DOC.trigger(ds.evt,ds.evtparam);\r\n\t\t\t}\r\n\t\t});\r\n\r\n/********************************************\r\n\tEND OF IMAGE LOADING PROCESSES\r\n*********************************************/\r\n\r\n\t\t// INITIALISE THE FORM 1 AND FORM 2 MENUS\r\n\t\tvar bodies = jQuery(document.body).on('click','.form_menu_level_1_li, .form_menu_level_2_li',function() {\r\n\r\n\t\t\tvar _ = jQuery(this),\r\n\t\t\t\tfmi = _.closest('.form_menu_inside');\r\n\t\t\t_.siblings('li').removeClass(\"selected\");\r\n\t\t\t_.addClass(\"selected\");\r\n\t\t\tif (_.hasClass(\"form_menu_level_1_li\")) {\r\n\t\t\t\t//fmi.find('.form_inner').hide().removeClass(\"open\");\r\n\t\t\t} else\r\n\t\t\t\tfmi.find('.form_level_2_inner').hide().removeClass(\"open\");\r\n\r\n\t\t\tvar openform = jQuery(_.data('target'));\r\n\t\t\topenform.show().addClass(\"open\");\r\n\t\t\tRVS.F.updateFormPositions({jf:RVS.F.closestClass(_[0],'formcontainer'), uncollapse:true});\r\n\r\n\t\t\tif (openform.data('evt')!==undefined)\r\n\t\t\t\tRVS.DOC.trigger(openform.data('evt'),openform.data('evtparam'));\r\n\t\t});\r\n\r\n\t\tfunction uncollapseParent(_) {\r\n\t\t\tif (_.data('trigger')!==undefined) jQuery(_.data('trigger')).trigger('click');\r\n\t\t\t_.closest('.formcontainer').removeClass(\"collapsed\");\r\n\t\t\tRVS.DOC.trigger('scrollUpdates');\r\n\t\t\tRVS.DOC.trigger('accordionaction');\r\n\t\t}\r\n\r\n\t\tfunction collapseParent(_) {\r\n\t\t\tif (_.closest('.form_inner').length>0)\r\n\t\t\t\t_.closest('.form_inner').removeClass(\"open\");\r\n\t\t\telse\r\n\t\t\t\t_.closest('.formcontainer').addClass(\"collapsed\");\r\n\r\n\r\n\t\t\tRVS.DOC.trigger('scrollUpdates');\r\n\t\t\tRVS.DOC.trigger('accordionaction');\r\n\t\t}\r\n\r\n\t\t// LISTEN TO ACCORDION FUNCTIONS\r\n\t\tbodies.on('click','.form_intoaccordion',function() {\r\n\t\t\tvar _ = jQuery(this),\r\n\t\t\t\tfi = _.closest('.form_inner'),\r\n\t\t\t\tfc = _.closest('.formcontainer');\r\n\t\t\tif ((fi.length>0 && fi.hasClass(\"open\")) || (fi.length===0 && !fc.hasClass(\"collapsed\"))) {\r\n\t\t\t\tcollapseParent(_);return false;\r\n\t\t\t} else {\r\n\t\t\t\tuncollapseParent(_);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tbodies.on('mouseenter','.form_intoaccordion',function() {\r\n\t\t\tthis.parentNode.dataset.hovered = \"on\";\r\n\t\t});\r\n\t\tbodies.on('mouseleave','.form_intoaccordion',function() {\r\n\t\t\tthis.parentNode.dataset.hovered = \"off\";\r\n\t\t});\r\n\r\n\t\t// SELECT BOX TRIGGERED BY EXTERNAL ELEMENTS\r\n\t\tbodies.on('click','.triggerselect', function() {\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\td = btn.data(),\r\n\t\t\t\tsel = jQuery(d.select);\r\n\r\n\t\t\tif (sel!==undefined && sel.length>0) sel.val(d.val);\r\n\t\t\tsel.trigger(\"change\");\r\n\t\t\tsel.ddTP('change');\r\n\t\t});\r\n\r\n\t\t// SELECT BOX TRIGGERED BY EXTERNAL ELEMENTS\r\n\t\tbodies.on('click','.navaligntrigger', function() {\r\n\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\td = btn.data(),\r\n\t\t\t\tselects = d.select.split(\",\"),\r\n\t\t\t\tvals = d.val.split(\",\");\r\n\r\n\t\t\tRVS.F.openBackupGroup({id:\"NavigationAlign\",txt: d.type+\" Align\",icon:\"navigation\",lastkey:\"navigation\"});\r\n\t\t\tRVS.F.ignoreEventsOpen();\r\n\t\t\tfor (var i in selects) {\r\n\t\t\t\tif(!selects.hasOwnProperty(i)) continue;\r\n\t\t\t\tvar sel = jQuery(selects[i]);\r\n\t\t\t\tif (sel!==undefined && sel.length>0) {\r\n\t\t\t\t\tif (vals.length>0)\r\n\t\t\t\t\t\tsel.val(vals[i]);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tsel.val(vals[0]);\r\n\t\t\t\t\tsel.trigger(\"change\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRVS.F.ignoreEventsClose();\r\n\t\t\tRVS.F.closeBackupGroup({id:\"NavigationAlign\"});\r\n\t\t\tRVS.DOC.trigger('sliderNavPositionUpdate',d.type);\r\n\t\t});\r\n\r\n\t\t// SELECT BOX TRIGGERED BY EXTERNAL ELEMENTS\r\n\t\tbodies.on('click','.progressbar_selector', function() {\r\n\t\t\tvar btn = jQuery(this),\r\n\t\t\t\td = btn.data(),\r\n\t\t\t\tselects = d.select.split(\",\"),\r\n\t\t\t\tvals = d.val.split(\",\");\r\n\r\n\t\t\tRVS.F.openBackupGroup({id:\"progressbar_selector\",txt: d.type+\" Align\",icon:\"navigation\",lastkey:\"navigation\"});\r\n\t\t\tRVS.F.ignoreEventsOpen();\r\n\t\t\tfor (var i in selects) {\r\n\t\t\t\tif(!selects.hasOwnProperty(i)) continue;\r\n\t\t\t\tvar sel = jQuery(selects[i]);\r\n\t\t\t\tif (sel!==undefined && sel.length>0) {\r\n\t\t\t\t\tif (vals.length>0)\r\n\t\t\t\t\t\tsel.val(vals[i]);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tsel.val(vals[0]);\r\n\t\t\t\t\tsel.trigger(\"change\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRVS.F.ignoreEventsClose();\r\n\t\t\tRVS.F.closeBackupGroup({id:\"progressbar_selector\"});\r\n\t\t\tRVS.DOC.trigger('sliderProgressUpdate',d.type);\r\n\t\t});\r\n\r\n\r\n\r\n\t\t//LISTEN ON CLICK OF META SUBMENU\r\n\t\tRVS.DOC.on('click','.mdl_group_wrap_menuitem',function() {\r\n\t\t\tjQuery('.mdl_group_wrap_menuitem.selected, .mdl_group_wrap.selected').removeClass(\"selected\");\r\n\t\t\tjQuery(this).addClass(\"selected\");\r\n\t\t\tjQuery(\"#\"+this.dataset.show).addClass(\"selected\");\r\n\t\t\tjQuery('#meta_rbm_content').scrollTop(0).RSScroll(\"update\");\r\n\t\t});\r\n\r\n\t\tRVS.C.toggledTextButton = document.getElementById('toggledtextbutton');\r\n\r\n\t\tRVS.F.updateMetaTranslate();\r\n\r\n\t\tRVS.DOC.trigger('extendmetas');\r\n\r\n\t\t// LISTEN TO SMART SUB NAviGATION ELEMENTS\r\n\t\tRVS.DOC.on('click','.ssmbtn',function() {\r\n\t\t\tvar inside = jQuery(this.dataset.inside);\r\n\t\t\tinside.find('.ssmbtn.selected, .ssm_content.selected').removeClass(\"selected\");\r\n\t\t\tthis.className +=\" selected\";\r\n\t\t\tif (this.dataset.hidessm!==undefined) jQuery(this.dataset.hidessm+\".selected\").removeClass(\"selected\");\r\n\t\t\tjQuery(this.dataset.showssm).addClass(\"selected\");\r\n\t\t\tif (this.dataset.evt!==undefined) RVS.DOC.trigger(this.dataset.evt, this.dataset.evtparam);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.input_presets_dropdown',function() {\r\n\t\t\tjQuery('.input_presets_wrap.infocus').removeClass(\"infocus\");\r\n\t\t\tthis.parentElement.className +=\" infocus\";\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('blur','input',function() {\r\n\t\t\tif (RVS.S.respInfoBar.toolbar) {\r\n\t\t\t\tRVS.S.respInfoBar.visible = false;\r\n\t\t\t\tRVS.S.respInfoBar.toolbar[0].style.display = \"none\";\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\r\n\t};\r\n\r\n/*******************************************************************************\r\n\t-\tUPDATE META TRANSLATE TABLE TO REPLACE META WITH FAKE CONTENT \t-\r\n********************************************************************************/\r\n\t// UPDATE POST CATEGORIE LISTS BASED ON THE CURRENT SELECTED POST TYPES\r\n\tRVS.F.updateMetaTranslate = function(obj) {\r\n\t\tRVS.LIB.META = {};\r\n\t\tjQuery('.mdl_group_member').each(function() {\r\n\t\t\tvar v = this.dataset.val.split(\":\");\r\n\t\t\tv = v.length>1 ? v[0] + \".*?}}\" : v[0];\r\n\t\t\tRVS.LIB.META[v] = jQuery(this).find('.mdl_placeholder_content').text();\r\n\t\t});\r\n\t};\r\n\r\n/*****************************************************\r\n\t-\tPOST CATEGORIES UPDATE BASED ON POST TYPE \t-\r\n*****************************************************/\r\n\t// UPDATE POST CATEGORIE LISTS BASED ON THE CURRENT SELECTED POST TYPES\r\n\tRVS.F.updatePostCategories = function(obj) {\r\n\r\n\t\tif (!Array.isArray(obj.postTypes))\r\n\t\t\tobj.postTypes = obj.postTypes.split(\",\");\r\n\t\tif (!Array.isArray(obj.postTypes)) {\r\n\t\t\tvar nA = [];\r\n\t\t\tnA.push(obj.postTypes);\r\n\t\t\tobj.postTypes = nA;\r\n\r\n\t\t}\r\n\t\tvar opt = \"\";\r\n\t\tfor (var i in obj.postTypes) {\r\n\t\t\tif (!obj.postTypes.hasOwnProperty(i)) continue;\r\n\t\t\tvar pt = RVS.LIB.POST_TYPES_CAT[obj.postTypes[i]];\r\n\t\t\tfor (var ci in pt) {\r\n\t\t\t\tif (! pt.hasOwnProperty(ci)) continue;\r\n\t\t\t\topt += '<option '+(ci.indexOf('option_disabled')>=0 ? 'disabled' : '')+' value=\"'+ci+'\">'+pt[ci]+'</option>';\r\n\t\t\t}\r\n\t\t}\r\n\t\tobj.categories[0].innerHTML = opt;\r\n\t\tRVS.F.setS2Option({select:obj.categories,update:true});\r\n\t};\r\n\r\n\r\n/********************************************************************************\r\n\t-\tSHOW / HIDE CONTAINERS DEPENDING ON INPUT / RADIO / SELECT CHANGES \t-\r\n*********************************************************************************/\r\n\r\n\t// Show Field Responsive Values\r\n\tRVS.F.showFieldResponsiveValues = function(_) {\r\n\t\tRVS.S.respInfoBar.field = _ !==undefined ? jQuery(_) : RVS.S.respInfoBar.field;\r\n\r\n\t\tif (RVS.eMode.top!==\"slider\")\r\n\t\t\tif (RVS.selLayers.length!==1 || RVS.S.respInfoBar.field===undefined || !RVS.S.respInfoBar.visible) return;\r\n\r\n\t\tif (!RVS.S.respInfoBar.toolbar) {\r\n\t\t\tRVS.S.respInfoBar.toolbar = jQuery('<div id=\"responsive_infos_toolbar\"></div>');\r\n\t\t\tjQuery('#the_right_toolbar').append(RVS.S.respInfoBar.toolbar);\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar _sizes = 0, _h=\"\";\r\n\t\t_h += '<span class=\"int_inher_title\">'+RVS_LANG.intinheriting+'</span>';\r\n\t\tfor (var i in RVS.V.sizes) {\r\n\t\t\tif(!RVS.V.sizes.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.V.sizes[i]!==RVS.screen && RVS.SLIDER.settings.size.custom[RVS.V.sizes[i]]) {\r\n\t\t\t\t_h += '<div style=\"white-space:nowrap\">';\r\n\r\n\t\t\t\t_h += '<i class=\"material-icons\">';\r\n\t\t\t\t_h += RVS.V.sizes[i] == \"d\" ? 'desktop_mac' : RVS.V.sizes[i] == \"n\" ? 'laptop' : RVS.V.sizes[i] == \"t\" ? 'tablet_android' : 'phone_iphone';\r\n\t\t\t\t_h += '</i>';\r\n\t\t\t\t_h += '<span class=\"responsive_info_value\">'+RVS.F.getDeepVal({path:RVS.eMode.top===\"slider\" ? \"settings.\"+RVS.S.respInfoBar.field[0].dataset.r : RVS.S.slideId+\".layers.\"+RVS.selLayers[0]+\".\"+RVS.S.respInfoBar.field[0].dataset.r,screen:RVS.V.sizes[i]})+'</span>';\r\n\t\t\t\t_h += '</div>';\r\n\t\t\t\t_sizes++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (_sizes>0) {\r\n\t\t\tRVS.S.respInfoBar.toolbar[0].style.display = \"block\";\r\n\t\t\tRVS.S.respInfoBar.toolbar[0].innerHTML = _h;\r\n\t\t\tvar o = RVS.S.respInfoBar.field.offset(),\r\n\t\t\t\tw = RVS.S.respInfoBar.toolbar.width(),\r\n\t\t\t\tl = -85;\r\n\t\t\ttpGS.gsap.set(RVS.S.respInfoBar.toolbar,{top:(o.top ), left:l});\r\n\t\t} else {\r\n\t\t\tRVS.S.respInfoBar.visible = false;\r\n\t\t\tRVS.S.respInfoBar.toolbar[0].style.display = \"none\";\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.initCopyClipboard = function(selector) {\r\n\t\tif (jQuery(selector).length>0 && jQuery.inArray(selector,clipboardselectors)==-1) {\r\n\t\t\tclipboardselectors = clipboardselectors===undefined ? [] : clipboardselectors;\r\n\t\t\tclipboardselectors.push(selector);\r\n\t\t\tvar clipboard = new RSClipboard(selector);\r\n\t\t    clipboard.on('success', function(e) {\r\n\t\t    \tjQuery(':focus').blur();\r\n\t\t    \tRVS.F.showInfo({content:\"Copied To Clipboard\", type:\"success\", showdelay:0, hidedelay:1, hideon:\"\", event:\"\" });\r\n\t\t    \ttpGS.gsap.fromTo(jQuery(e.trigger),0.4,{autoAlpha:0},{autoAlpha:1,ease:\"power3.inOut\"});\r\n\r\n\t\t    });\r\n\t\t    clipboard.on('error', function(e) {\r\n\t\t    \te = jQuery(e.trigger);\r\n\t\t    \te.addClass(\"errorcopy\");\r\n\t\t    \tsetTimeout(function() {\r\n\t\t    \t\te.removeClass(\"errorcopy\");\r\n\t\t    \t},400);\r\n\t\t    });\r\n\t\t  }\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.switchButtonInit = function(obj) {\r\n\t\tobj = obj===undefined ? {} : obj;\r\n\t\tobj.container = obj.container===undefined ? '#builderView' : obj.container;\r\n\t\tobj.init = obj.init===undefined ? true : obj.init;\r\n\r\n\t\tif (obj.init) {\r\n\t\t\t//SWITCH BUTTONS AND EVENT CALLING FROM THEM\r\n\t\t\tjQuery(obj.container).find('.switch_button').each(function() {\r\n\t\t\t\tvar btn = jQuery(this),\r\n\t\t\t\t\tds = this.dataset;\r\n\t\t\t\tif (!btn.hasClass(\"activeswitch\")) {\r\n\t\t\t\t\tbtn.addClass(\"activeswitch\");\r\n\t\t\t\t\tRVS.F.changeSwitchState({el:this,state:ds.start_state});\r\n\r\n\t\t\t\t\tbtn.on('click',function() {\r\n\t\t\t\t\t\tRVS.F.changeSwitchState({el:this,callEvent:true});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.changeSwitchState = function(obj) {\r\n\t\tif (obj.el===null) return;\r\n\t\tvar ds=obj.el.dataset,\r\n\t\t\tbtn = jQuery(obj.el),\r\n\t\t\tstates = ds.states.split(\",\");\r\n\r\n\t\tds.state = obj.state!==undefined ? obj.state : ds.state===states[0] ? states[1] : states[0];\r\n\t\tbtn.find('.switch_button_state').html(ds[ds.state+'_state']);\r\n\t\tbtn.find('.switch_button_icon').html(ds[ds.state+'_icon']);\r\n\r\n\t\tif (obj.callEvent!==undefined) {\r\n\t\t\tRVS.DOC.trigger(ds[ds.state]);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\r\n\r\n\tRVS.F.getPresetIcon = function(t) {\r\n\t\tvar s = '<i class=\"material-icons preset_help_icon\">';\r\n\t\treturn \tt.replace(\"*\",s).replace(\"*\",\"</i>\").replace(\"*\",s).replace(\"*\",\"</i>\").replace(\"*\",s).replace(\"*\",\"</i>\");\r\n\t}\r\n\r\n\tfunction isOneFourth(t) {\r\n\t\treturn t===\"Up\" || t===\"Down\" || t===\"Left\" || t===\"Right\";\r\n\t}\r\n\r\n\tRVS.F.isOnList = function(list,item) {\r\n\t\tif (list===undefined) return false;\r\n\t\tif (Array.isArray(list)) return jQuery.inArray(item,list)>=0;\r\n\t\tif (list[item]!==undefined) return true;\r\n\t\tvar r = false;\r\n\t\tfor (var i in list) if (list.hasOwnProperty(i) && r===false) r=list[i]===item ? true : r;\r\n\t\treturn r;\r\n\t}\r\n\r\n\tRVS.F.showHidePresetFavorits = function(list,c) {\r\n\t\tvar _ = RVS.S.allPresets[c],\r\n\t\t\ttemp;\r\n\t\tif (_===undefined || list==undefined || (!Array.isArray(list) && typeof list!==\"object\") || list.length===0) return;\r\n\r\n\t\tvar mains = {}, grps = {}, onlist;\r\n\t\tfor (var main in _) {\r\n\t\t\tif (!_.hasOwnProperty(main) || typeof _[main]!==\"object\") continue;\r\n\t\t\tif (mains[main]===undefined) mains[main] = {show:false, id:_[main].id};\r\n\t\t\tfor (var grp in _[main]) {\r\n\t\t\t\tif (!_[main].hasOwnProperty(grp) || typeof _[main][grp]!==\"object\") continue;\r\n\t\t\t\tif (grps[main+\"_\"+grp]===undefined) grps[main+\"_\"+grp] = {show:false, id:_[main][grp].id};\r\n\t\t\t\tfor (var el in _[main][grp].groups) {\r\n\t\t\t\t\tif (!_[main][grp].groups.hasOwnProperty(el)) continue;\r\n\t\t\t\t\ttemp = document.getElementById(_[main][grp].groups[el].id);\r\n\t\t\t\t\tif (temp!==undefined && temp!==null) {\r\n\t\t\t\t\t\tif (RVS.F.isOnList(list,el)) {\r\n\t\t\t\t\t\t\tmains[main].show = true;\r\n\t\t\t\t\t\t\tgrps[main+\"_\"+grp].show = true;\r\n\t\t\t\t\t\t\ttemp.classList.add('prs_is_favorit');\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\ttemp.classList.remove('prs_is_favorit');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//ADD REMOVE FAV LISTS ON MAIN AND GRPS\r\n\t\tfor (var i in mains) {\r\n\t\t\ttemp = document.getElementById(mains[i].id);\r\n\t\t\tif (temp!==undefined && temp!==null)\r\n\t\t\t\tif (mains[i].show) temp.classList.add('prs_is_favorit'); else temp.classList.remove('prs_is_favorit');\r\n\t\t}\r\n\r\n\r\n\t\tfor (var i in grps) {\r\n\t\t\ttemp = document.getElementById(grps[i].id);\r\n\t\t\tif (temp!==undefined && temp!==null)\r\n\t\t\t\tif (grps[i].show) temp.classList.add('prs_is_favorit'); else temp.classList.remove('prs_is_favorit');\r\n\t\t}\r\n\r\n\r\n\r\n\t}\r\n\t/***************************************************************************************\r\n\t\tCREATE A PRESET LIST CONTAINER, AND RETURN THE HTML MARKUP, CREATE LISTENERS ETC.\r\n\t****************************************************************************************/\r\n\r\n\tRVS.F.createPresets = function(_) {\r\n\t\t_.groupid = _.groupid===undefined ? \"preset_list_\"+Math.round(Math.random()*100000) : _.groupid;\r\n\t\t_.groupclass = _.groupclass===undefined ? \"pres_list_group_\"+Math.round(Math.random()*100000) : _.groupclass;\r\n\t\t_.maingrpclass = _.maingrpclass===undefined ? \"preslisinner_\"+Math.round(Math.random()*100000) : _.maingrpclass;\r\n\t\t_.ref = _.ref===undefined ? Math.round(Math.random()*100000) : _.ref;\r\n\r\n\t\t//CACHE ALL THE PRESET REFERENCES\r\n\t\tRVS.S.allPresets = RVS.S.allPresets===undefined ? {} : RVS.S.allPresets;\r\n\t\tRVS.S.allPresets[_.maingrpclass] = RVS.S.allPresets[_.maingrpclass]===undefined ? {} : RVS.S.allPresets[_.maingrpclass];\r\n\t\tRVS.S.allPresets[_.maingrpclass][_.ref] = \tRVS.S.allPresets[_.maingrpclass][_.ref]===undefined ? {} : RVS.S.allPresets[_.maingrpclass][_.ref];\r\n\r\n\t\tvar main = '<div id=\"'+(_.groupid===undefined ? \"\" : _.groupid)+'\" class=\"'+(_.eclass!==undefined ? ' '+_.eclass : '')+(_.modern ? \" modern_presets \":\" \")+'presets_liste '+(_.groupclass===undefined ? \"\" :_.groupclass) +'\">',\r\n\t\t    inner = '',\r\n\t\t\tprefix = _.prefix===undefined ? \"\" : _.prefix+\"_\";\r\n\r\n\r\n\t\tRVS.S.allPresets[_.maingrpclass][_.ref].id = _.groupid;\r\n\r\n\t\tmain += '\t<div class=\"presets_liste_head\" data-samemaingroups=\"'+(_.maingrpclass !==undefined ? _.maingrpclass : \"\")+'\" data-igroup=\"inner_'+(_.groupid===undefined ? \"\" : _.groupid)+'\" data-samegroups=\"'+(_.groupclass===undefined ? \"\" :_.groupclass)+'\"><i class=\"selected_preset material-icons\">check</i>'+(_.modern ? '<i class=\"presets_liste_icon material-icons\"'+'>'+_.icon+'</i>' : '')+'<span class=\"presets_liste_title\">'+_.title+'</span><i class=\"right-divided-icon material-icons\">arrow_drop_down</i></div>';\r\n\t\tinner += '\t<div class=\"presets_liste_inner'+(_.eclass!==undefined ? ' '+_.eclass : '')+(_.modern ? \" modern_preset_list\" : \"\")+(_.maingrpclass !==undefined ? \" \"+_.maingrpclass : \"\")+'\" id=\"inner_'+(_.groupid===undefined ? \"\" : _.groupid)+'\">';\r\n\r\n\t\tfor (var i in _.groups) {\r\n\t\t\tif(!_.groups.hasOwnProperty(i) || i==\"grp_title\" || i==\"icon\" || i===\"noSubLevel\" || i===\"eclass\") continue;\r\n\t\t\tRVS.S.allPresets[_.maingrpclass][_.ref][i] = { id:_.groupid+\"_\"+i, class:(_.groups[i].custom || i===\"custom\" ? \"custompresetgroup \" : \"\")};\r\n\t\t\tinner += '<div id=\"'+(_.groupid+\"_\"+i)+'\" class=\"presetssgroup '+(_.groups[i].custom || i===\"custom\" ? \"custompresetgroup \" : \"\")+' '+(\"\"+_.groups.noSubLevel==\"true\" ? \"nosubpresetlevel \" : \"\")+'\">';\r\n\t\t\tinner += '\t<div class=\"presetssgroup_head\"><span class=\"presetssgroup_name\">'+_.groups[i].title+'</span><div class=\"animation_drop_arrow\"><i class=\"material-icons\">arrow_drop_down</i></div></div>';\r\n\t\t\tinner += '\t<div class=\"presets_listelements\">';\r\n\r\n\t\t\tif (i===\"custom\") inner += '<div data-evt=\"'+_.customevt+'\" data-key=\"custom\" data-grpid=\"'+_.groupid+'\" data-grp=\"'+i+'\" class=\"'+prefix+'presetelement presets_listelement dark_btn\"><span class=\"cla_custom_name\">'+RVS_LANG.savecurrenttemplate+'</span><input type=\"text\" value=\"custom\" class=\"cla_entername\"><div class=\"custom_layer_animation_toolbar\"><i data-evt=\"'+_.customevt+'\" class=\"cla_answer_yes material-icons\">done</i><i data-evt=\"'+_.customevt+'\" class=\"cla_answer_no material-icons\">close</i><i class=\"add_custom_layeranimation material-icons\">add</i></div></div>';\r\n\r\n\t\t\tfor (var j in _.groups[i].elements) {\r\n\t\t\t\tif(!_.groups[i].elements.hasOwnProperty(j)) continue;\r\n\t\t\t\tRVS.S.allPresets[_.maingrpclass][_.ref][i].groups = RVS.S.allPresets[_.maingrpclass][_.ref][i].groups===undefined ? {} : RVS.S.allPresets[_.maingrpclass][_.ref][i].groups;\r\n\t\t\t\tRVS.S.allPresets[_.maingrpclass][_.ref][i].groups[j] = { id:(_.groupid+\"_\"+i+\"_\"+j)};\r\n\t\t\t\tinner += i===\"custom\" ?\r\n\t\t\t\t\t'<div id=\"'+(_.groupid+\"_\"+i+\"_\"+j)+'\" data-key=\"custom_'+prefix+j+'\" data-grpid=\"'+_.groupid+'\" data-main=\"'+_.groups[i].elements[j].main+'\" data-grp=\"'+i+'\" data-custom=\"true\" data-evt=\"'+_.customevt+'\" class=\"presets_listelement dark_btn\"><span class=\"cla_custom_name\">'+_.groups[i].elements[j].title+'</span><div class=\"cla_message\">'+RVS_LANG.overwritetemplate+'</div><input data-evt=\"'+_.customevt+'\" type=\"text\" value=\"'+_.groups[i].elements[j].title+'\" class=\"cla_entername\"><div class=\"custom_layer_animation_toolbar\"><i data-evt=\"'+_.customevt+'\" class=\"cla_answer_yes material-icons\">done</i><i data-evt=\"'+_.customevt+'\" class=\"cla_answer_no material-icons\">close</i><i data-evt=\"'+_.customevt+'\" class=\"edit_custom_layeranimation material-icons\">edit</i><i data-evt=\"'+_.customevt+'\" class=\"save_custom_layeranimation material-icons\">save</i><i data-evt=\"'+_.customevt+'\" class=\"delete_custom_layeranimation material-icons\">delete</i></div></div>' :\r\n\t\t\t\t\t'<div id=\"'+(_.groupid+\"_\"+i+\"_\"+j)+'\" data-key=\"'+prefix+j+'\" data-grpid=\"'+_.groupid+'\" data-main=\"'+_.groups[i].elements[j].main+'\" data-grp=\"'+i+(_.groups[i].elements[j].rndgrp!==\"undefined\" ? '\" data-rndgrp=\"'+_.groups[i].elements[j].rndgrp+'\"' : '')+(_.groups[i].elements[j].rndmain!==\"undefined\" ? '\" data-rndmain=\"'+_.groups[i].elements[j].rndmain+'\"' : '')+' class=\"'+prefix+'presetelement presets_listelement dark_btn\">'+(RVS.F.getPresetIcon(_.groups[i].elements[j].title))+(_.favoriteAjax!==undefined ? '<i data-key=\"'+prefix+j+'\" class=\"material-icons preset_favorite\">'+(RVS.F.isOnList(_.favoriteList,prefix+j) ? \"star\" : \"star_outline\")+'</i>' : '')+'</div>';\r\n\t\t\t}\r\n\r\n\t\t\tinner += '\t</div>';\r\n\t\t\tinner += '</div>';\r\n\r\n\t\t }\r\n\r\n\r\n\t\t //'+(isOneFourth(_.groups[i].elements[j].title)? 'onefourth' : '')+'\r\n\t\t //\r\n\r\n\t\t inner += '\t</div>';\r\n\r\n\t\t if (RVS.S.allPresets[_.maingrpclass].clickListener ===undefined) {\r\n\t\t \t RVS.S.allPresets[_.maingrpclass].clickListener = true;\r\n\t\t\t // CLICK ON AN ELEMENT, CUSTOM SAVE OR TRIGGER CALLBACK\r\n\t\t\t RVS.DOC.on('click', '.'+_.maingrpclass+' .presets_listelement', function() {\r\n\t\t\t\tif (this.dataset.key===\"custom\") {\r\n\t\t\t\t\tvar clse = jQuery(this);\r\n\t\t\t\t\tthis.dataset.mode=\"create\";\r\n\t\t\t\t\tclse.addClass(\"cla_showentername\");\r\n\t\t\t\t\tclse.find('input').trigger('focus').trigger('select');\r\n\t\t\t\t\tRVS.S.waitOnFeedback = { allowed:[\"cla_entername\", \"cla_answer_yes\",\"cla_answer_no\"], closeEvent:\"hideCustomLayerNameEntering\"};\r\n\t\t\t\t\tRVS.F.addBodyClickListener();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else\r\n\t\t\t\tif (this.className.indexOf('cla_showentername')>=0) {\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t_.onclick(this.dataset.key,this.dataset.custom,this.dataset.main, this.dataset.sub,this.dataset.rndgrp,this.dataset.rndmain);\r\n\t\t\t });\r\n\t\t}\r\n\r\n\r\n\t\t// ADD / REMOVE FROM FAVORIT LIST\r\n\t\tif (_.favoriteAjax && RVS.S.allPresets[_.maingrpclass].favListener===undefined) {\r\n\t\t\tRVS.S.allPresets[_.maingrpclass].favListener=true;\r\n\t\t\tRVS.DOC.on('mouseenter','.'+_.maingrpclass+' .presets_listelement',function() {\r\n\t\t \t\tif (this.offsetLeft<140) {\r\n\t\t \t\t\tthis.classList.add(\"favleft\");\r\n\t\t \t\t\tthis.classList.remove(\"favright\");\r\n\t\t \t\t} else {\r\n\t\t \t\t\tthis.classList.add(\"favright\");\r\n\t\t \t\t\tthis.classList.remove(\"favleft\");\r\n\t\t \t\t}\r\n\t\t \t});\r\n\r\n\t\t\tRVS.DOC.on('click','.'+_.maingrpclass+' .preset_favorite',function() {\r\n\r\n\t\t\t\tvar onlist = RVS.F.isOnList(_.favoriteList,this.dataset.key);\r\n\t\t\t\tthis.innerHTML =  onlist ? \"star_outline\" : \"star\";\r\n\t\t\t\tif (!onlist) {\r\n\t\t\t\t\tif (Array.isArray(_.favoriteList)) _.favoriteList.push(this.dataset.key); else _.favoriteList[this.dataset.key] = this.dataset.key;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (Array.isArray(_.favoriteList)) {\r\n\t\t\t\t\t\tvar ind = jQuery.inArray(this.dataset.key,_.favoriteList);\r\n\t\t\t\t\t\t_.favoriteList.splice(ind,1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar ind;\r\n\r\n\t\t\t\t\t\tfor (var i in _.favoriteList) if (_.favoriteList[i]==this.dataset.key) ind = i;\r\n\t\t\t\t\t\tif (ind!==undefined) delete _.favoriteList[ind];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tRVS.F.showHidePresetFavorits(_.favoriteList,_.maingrpclass);\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.ajaxRequest('set_favorite', { do: onlist ? \"remove\" : \"add\", type:_.favoriteAjax, id:this.dataset.key}, function(response){\r\n\t\t\t\t\tif (response.success) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t // LISTEON ON OPEN/ CLOSE MENUS\r\n\t\t if (!globalpresetsinit) {\r\n\t\t\tRVS.DOC.on('click','.presets_liste_head',function() {\r\n\t\t\t\tvar wasOpen = this.parentElement.className.indexOf(\"open\")>=0,\r\n\t\t\t\t\tigr = document.getElementById(this.dataset.igroup);\r\n\r\n\t\t\t\tif (this.dataset.samegroups!==undefined && this.dataset.samegroups!==\"\") jQuery('.'+this.dataset.samegroups).removeClass(\"open\");\r\n\t\t\t\tif (this.dataset.samemaingroups!==undefined && this.dataset.samemaingroups!==\"\") jQuery('.'+this.dataset.samemaingroups).removeClass(\"open\");\r\n\t\t\t\tif (wasOpen) {\r\n\t\t\t\t\tthis.parentElement.classList.remove('open');\r\n\t\t\t\t\tigr.classList.remove(\"open\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.parentElement.classList.add('open');\r\n\t\t\t\t\tigr.classList.add(\"open\");\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('click','.presetssgroup_head',function() {\r\n\t\t\t\tvar isopen = this.parentElement.className.indexOf('open')>=0;\r\n\t\t\t\tjQuery(this).closest('.presets_liste').find('.presetssgroup.open').removeClass(\"open\");\r\n\t\t\t\tif (!isopen) this.parentElement.className +=' open'; else this.parentElement.classList.remove(\"open\");\r\n\t\t\t});\r\n\r\n\t\t\tglobalpresetsinit = true;\r\n\t\t }\r\n\r\n\t\t if (_.modern) return {inner:inner, main:main+\"</div>\"}; else return  main+inner+'</div>';\r\n\r\n\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t/*************************************************\r\n\t\tCREATE META DATA LIST\r\n\t**************************************************/\r\n\tRVS.F.createMetaGroups = function(obj) {\r\n\r\n\t\tvar groupadded = jQuery('#'+obj.id).length!==0,\r\n\t\t\tgroup = !groupadded ? jQuery('<div id=\"'+obj.id+'\" class=\"mdl_group\"></div>') : jQuery('#'+obj.id);\r\n\r\n\t\tobj.title = RVS_LANG[obj.id]===undefined ? obj.id : RVS_LANG[obj.id];\r\n\r\n\t\t//ADD GROUP HEADER, IF NO GROUP ADDED YET\r\n\t\tif (!groupadded) group.append('<div class=\"mdl_group_header\"><i class=\"material-icons\">'+obj.icon+'</i>'+obj.title+'<i class=\"material-icons accordiondrop\">arrow_drop_down</i></div>');\r\n\r\n\t\t//ADD ACTIONS TO THE GROUP\r\n\t\tfor (var i in obj.actions) {\r\n\t\t\tif(!obj.actions.hasOwnProperty(i)) continue;\r\n\t\t\tvar a = obj.actions[i],\r\n\t\t\t\ttitle = a.title!==undefined ? a.title : RVS_LANG['metadata_'+a.val]===undefined ? a.val : RVS_LANG['metadata_'+a.val];\r\n\t\t\ta.inputs = a.inputs===undefined ? \"\" : a.inputs;\r\n\t\t\ta.inputs = \t(a.layerTarget===true ? \"#la_settings_layertarget\"+ (a.inputs.length>0 ? \", \"+a.inputs:\"\") : a.inputs);\r\n\t\t\tgroup.append('<div data-val=\"'+a.val+'\" id=\"metadata_picker_'+a.val+'\" data-inputs=\"'+a.inputs+'\" class=\"mdl_group_member\" data-val=\"'+a.val+'\"><i class=\"material-icons\">'+obj.icon+'</i>'+title+'</div>');\r\n\t\t\tif (a.layerTarget) RVS.LIB.ACTION_WITH_TRGT.push(a.val);\r\n\t\t\tRVS.LIB.ACTIONTYPES[a.val] = {inputs:a.inputs, name:title, icon:obj.icon, layerTarget:a.layerTarget, media:a.media};\r\n\t\t}\r\n\r\n\t\t//ADD GROUP TO THE ACTION CONTAINER IF NOT YET ADDED\r\n\t\tif (!groupadded) jQuery('#layeraction_list').append(group);\r\n\t};\r\n\r\n/**********************************************\r\n\tBUILD VALUE SLIDERS\r\n**********************************************/\r\nRVS.F.buildValueSliders = function() {\r\n\tvar fields = document.getElementsByClassName('withvalslider');\r\n\tfor (var i in fields) {\r\n\t\tif (!fields.hasOwnProperty(i)) continue;\r\n\t\tRVS.F.buildValueSlider(fields[i]);\r\n\t}\r\n}\r\n\r\nRVS.DOC.on('mouseenter','.withvalslider',function() {\r\n\tif (this.dataset.valslideradded==undefined) {\r\n\t\tRVS.F.buildValueSlider(this);\r\n\t\tthis.dataset.valslideradded = true;\r\n\t}\r\n\tvar _ = RVS.S.valSliders[this.dataset.inpid];\r\n\t_.done.style.width = (((parseFloat(_.inp.value) - _.min) / _.range) * _.width) + \"px\";\r\n\t_.pin.style.left = _.done.style.width;\r\n\r\n});\r\n\r\nRVS.F.buildValueSlider = function(field) {\r\n\tvar inp=field.getElementsByTagName('INPUT')[0];\r\n\tif (inp.id===undefined) inp.id = \"rs_valslider_\"+Math.round(Math.random()*100000);\r\n\r\n\tRVS.S.valSliders = RVS.S.valSliders===undefined ? {} : RVS.S.valSliders;\r\n\tRVS.S.valSliders[inp.id] = {\r\n\t\tinp : inp,\r\n\t\tcon : RVS.F.cF(),\r\n\t\twrap : RVS.F.cE({cN:\"rs_vswrap\"}),\r\n\t\tdone : RVS.F.cE({cN:\"rs_vsdone\"}),\r\n\t\trail : RVS.F.cE({cN:\"rs_vsrail\"}),\r\n\t\tpin : RVS.F.cE({cN:\"rs_vspin\"}),\r\n\t\tfield : field\r\n\t}\r\n\r\n\tvar _ = RVS.S.valSliders[inp.id];\r\n\r\n\t_.jpin = jQuery(_.pin);\r\n\t_.jinp = jQuery(inp);\r\n\r\n\tfield.dataset.inpid= inp.id;\r\n\r\n\t_.con.appendChild(_.wrap);\r\n\t_.wrap.appendChild(_.rail);\r\n\t_.wrap.appendChild(_.done);\r\n\t_.wrap.appendChild(_.pin);\r\n\tfield.appendChild(_.con);\r\n\r\n\r\n\r\n\t_.max = inp.dataset.max || 100;\r\n\t_.min = inp.dataset.min || 0;\r\n\t_.range = _.max - _.min;\r\n\t_.dez = inp.dataset.dez || 0;\r\n\t_.width = _.wrap.offsetWidth - 9;\r\n\r\n\t_.jpin.draggable({\r\n\t\t\taxis:\"x\",\r\n\t\t\tcontainment: \"parent\",\r\n\t\t\tstart:function(event,ui) {\r\n\t\t\t\t_.width = _.wrap.offsetWidth - 9;\r\n\t\t\t\t_.lastprefix = (_.inp.value+\"\").indexOf('px')>=0 ? \"px\" : (_.inp.value+\"\").indexOf('%')>=0 ? \"%\" : (_.inp.value+\"\").indexOf('deg')>=0 ? \"deg\" : \"\";\r\n\t\t\t\t_.wrap.classList.add(\"indrag\");\r\n\t\t\t},\r\n\t\t\tstop:function(event,ui) {\r\n\t\t\t\t_.wrap.classList.remove(\"indrag\");\r\n\t\t\t},\r\n\t\t\tdrag:function(event,ui) {\r\n\t\t\t\t_.done.style.width = ui.position.left+\"px\";\r\n\t\t\t\tvar v = parseFloat(_.min) + (_.range * ((ui.position.left/_.width)));\r\n\t\t\t\tv = _.dez == 0 ? Math.round(v) : dez==1 ? Math.round(v/10) * 10 : dez==2 ? Math.round(v/100) * 100 : dez==3 ? Math.round(v/1000) * 1000 : dez==4 ? Math.round(v/10000) * 10000 : Math.round(v/10000) * 10000;\r\n\t\t\t\t_.inp.value = v+_.lastprefix;\r\n\t\t\t\t_.jinp.trigger('change');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t//<div id=\"kenburn_timeline\"><div class=\"pz_timedone\"></div><div class=\"pz_pin\"></div></div>\r\n}\r\n\r\n/*************************************************\r\n\tSELECT / UNSELECT REFERENCED CONTAINERS\r\n**************************************************/\r\n\tRVS.F.setUnsetSelected = function(obj) {\r\n\r\n\t\tif (obj.unselect!==undefined) RVS.F.setUnsetHelp(obj.unselect.split(','),'remove','selected');\r\n\t\tif (obj.select!==undefined) {\r\n\t\t\t//If Parent Content based Selection should happen !\r\n\t\t\tif (obj.prval!=undefined && RVS.selLayers.length>0 && RVS.L[RVS.selLayers[0]]!==undefined &&  (obj.prvalif===undefined || RVS.L[RVS.selLayers[0]].type===obj.prvalif))\r\n\t\t\t\tobj.val = RVS.F.getDeepVal({path:obj.prval.split('#parentlayer#').join(RVS.L[RVS.selLayers[0]].group.puid)}) || \"\";\r\n\t\t\telse\r\n\t\t\t\tobj.val = obj.val!==undefined ? obj.val.split('\\\\').join(\"-\").split(\" \").join(\"-\")  : \"\";\r\n\t\t\t\tRVS.F.setUnsetHelp((obj.select.split(\"*val*\").join(obj.val).split('*RVAL*').join(obj.rval!==undefined ? RVS.F.getDeepVal({path:obj.rval}) : \"\")).split(','),'add','selected');\r\n\t\t}\r\n\t};\r\n\r\n/*************************************************\r\n\tSELECT / UNSELECT REFERENCED CONTAINERS\r\n\tRVS.F.setUnsetClass({container:ds.setclasson, class:ds.class, val:v, rval:ds.rval});\r\n**************************************************/\r\n\r\n\tRVS.F.setUnsetClass = function(obj) {\r\n\t\tif (obj.class!==undefined && obj.container!==undefined && obj.container!==null) {\r\n\t\t\tif ((obj.rval!==undefined && obj.rval===obj.val) || obj.val) {\r\n\t\t\t\tobj.container.classList.add(obj.class);\r\n\t\t\t\tif (obj.inversclass) obj.container.classList.remove(obj.inversclass);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tobj.container.classList.remove(obj.class);\r\n\t\t\t\tif (obj.inversclass) obj.container.classList.add(obj.inversclass);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n/*************************************************\r\n\tDISABLE / ENABLE REFERENCED CONTAINERS\r\n**************************************************/\r\n\r\n\tRVS.F.setEnableDisable = function(obj) {\r\n\t\tif (obj.switch!==undefined) {\r\n\t\t\tvar ec = \"remove\",\r\n\t\t\t\tdc = \"add\";\r\n\t\t\tif (obj.enable!==undefined && obj.val===false) ec = \"add\";\r\n\t\t\tif (obj.disable!==undefined && obj.val===false) dc = \"remove\";\r\n\t\t\tif (obj.enable!==undefined) RVS.F.setUnsetHelp((obj.enable.split('*val*').join(obj.val)).split(','),ec,'disablecontainer');\r\n\t\t\tif (obj.disable!==undefined) RVS.F.setUnsetHelp((obj.disable.split('*val*').join(obj.val)).split(','),dc,'disablecontainer');\r\n\t\t} else {\r\n\t\t\tif (obj.enable!==undefined) RVS.F.setUnsetHelp((obj.enable.split('*val*').join(obj.val)).split(','),'remove','disablecontainer');\r\n\t\t\tif (obj.disable!==undefined) RVS.F.setUnsetHelp((obj.disable.split('*val*').join(obj.val)).split(','),'add','disablecontainer');\r\n\t\t}\r\n\t};\r\n\r\n/********************************************************\r\n\tMAKE AVAILABLE / UNAVAILABLE REFERENCED CONTAINERS\r\n*********************************************************/\r\n\tRVS.F.setUnAvailable = function(obj) {\r\n\t\tif (obj.available!==undefined) RVS.F.setUnsetHelp((obj.available.split('*val*').join(obj.val)).split(','),'remove','unavailablecontainer');\r\n\t\tif (obj.unavailable!==undefined) RVS.F.setUnsetHelp((obj.unavailable.split('*val*').join(obj.val)).split(','),'add','unavailablecontainer');\r\n\t};\r\n\r\n\r\n\t/***********************************************************\r\n\t\t-\tPREDEFINED DROP DOWNS FOR SPECIAL FIELDS\t-\r\n\t***********************************************************/\r\n\t RVS.F.initPreDrops = function(el) {\r\n\t\tif (el===undefined) {\r\n\t\t\tjQuery('.predrop_wrap').each(function() {\r\n\t\t\t\tvar pd = jQuery(this);\r\n\t\t\t\tif (!pd.hasClass(\"inited\")) {\r\n\r\n\t\t\t\t\tpd.append('<div class=\"predrop\"><ul class=\"predrop_ul\"></ul></div>');\r\n\r\n\t\t\t\t\tvar _d = pd.data(),\r\n\t\t\t\t\t\tpul = pd.find('.predrop_ul');\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tif (_d.unitselector_r!==undefined) {\r\n\t\t\t\t\t\tvar li = jQuery('<li class=\"predrop_li predrop_unitselector\"></li>')\r\n\t\t\t\t\t\t\t_units = _d.units.split(\",\");\r\n\t\t\t\t\t\tfor (var ui in _units) {\r\n\t\t\t\t\t\t\tli.append('<div class=\"radiooption '+pd.attr('id')+'_rops\" id=\"'+pd.attr('id')+'_'+ui+'\"><input data-select=\"#'+pd.attr('id')+'_'+ui+'\" data-unselect=\".'+pd.attr('id')+'_rops\" data-r=\"'+_d.unitselector_r+'\" type=\"radio\" class=\"'+_d.class+'\" value=\"'+_units[ui]+'\" data-show=\"\" data-hide=\"\">'+_units[ui]+'</div>')\r\n\t\t\t\t\t\t\tpul.append(li);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t };\r\n\t/***/\r\n\r\n\r\n\r\n\r\n\t/**********************************\r\n\t\t- \tFULLPAGE INFO \t-\r\n\t***********************************/\r\n\tRVS.F.fullPageInfo = {\r\n\t\tinit:function(_) {\r\n\t\t\t\tvar fullpage = jQuery('<div id=\"fullpageinfo\"><div id=\"fullpageinfo_zone\">'+_.content+'<div id=\"fullpage_close\"><i class=\"material-icons\">close</i></div></div></div>');\r\n\t\t\t\tjQuery('.menu-wrapper,.page-wrapper').addClass(\"blurred\");\r\n\t\t\t\tjQuery(document.body).append(fullpage);\r\n\t\t\t\ttpGS.gsap.fromTo(fullpage,0.4,{autoAlpha:0,scale:0.9},{autoAlpha:1,scale:1,ease:\"power3.inOut\"});\r\n\t\t\t},\r\n\t\tclose:function() {\r\n\t\t\t\tjQuery('#fullpageinfo').remove();\r\n\t\t\t\tjQuery('.menu-wrapper,.page-wrapper').removeClass(\"blurred\");\r\n\t\t}\r\n\t};\r\n\t/**********************************\r\n\t\t- \tBROWSER DROPPABLE \t-\r\n\t***********************************/\r\n\tRVS.F.browserDroppable = {\r\n\t\tinit :function(_) {\r\n\t\t\t_.textblock = '<div id=\"filedrop\" class=\"'+(_.onlydrop==true ? \"editordrop _TPRB_\" : \"_TPRB_\") +'\">';\r\n\t\t\t_.textblock += '\t<form id=\"filedrop_zone\">';\r\n\t\t\t_.textblock += '\t\t<div class=\"filedrop_state_idle\">';\r\n\t\t\t_.textblock += '\t\t\t<input class=\"uploadfileinput\" type=\"file\" name=\"files[]\" id=\"file\" data-multiple-caption=\"{count} files selected\" multiple />';\r\n\t\t\t_.textblock += '\t\t\t<i class=\"big_filedrop_icon material-icons\">file_download</i>';\r\n\t\t\t_.textblock += '\t\t\t<div class=\"filedrop_line_1\">'+RVS_LANG.dragAndDropFile+'</div>';\r\n\t\t\tif (_.onlydrop!==true) _.textblock += '\t\t\t<div class=\"filedrop_line_2\">'+RVS_LANG.or+'</div>';\r\n\t\t\tif (_.onlydrop!==true) _.textblock += '\t\t\t<label for=\"file\"  class=\"filedrop_clickbtn\">'+RVS_LANG.clickToChoose+'</label>';\r\n\t\t\t_.textblock += '\t\t</div>';\r\n\t\t\t_.textblock += '\t\t<div class=\"filedrop_state_drop\">';\r\n\t\t\t_.textblock += '\t\t\t<i class=\"big_filedrop_icon material-icons\">file_download</i>';\r\n\t\t\tif (_.onlydrop!==true) _.textblock += '\t\t\t<div class=\"filedrop_line_1\">'+RVS_LANG.releaseToUpload+'</div>';\r\n\t\t\telse _.textblock += '\t\t\t<div class=\"filedrop_line_1\">'+RVS_LANG.releaseToAddLayer+'</div>';\r\n\t\t\tif (_.onlydrop!==true)  _.textblock += '\t\t\t<div class=\"filedrop_line_2\">'+RVS_LANG.moduleZipFile+'</div>';\r\n\t\t\t_.textblock += '\t\t</div>';\r\n\t\t\t_.textblock += '\t\t<div class=\"filedrop_state_process\">';\r\n\t\t\t_.textblock += '\t\t\t<i id=\"file_upload_processicon\" class=\"rotating big_filedrop_icon material-icons\">autorenew</i>';\r\n\t\t\t_.textblock += '\t\t\t<div id=\"file_upload_mininfo\" class=\"filedrop_line_1\">'+RVS_LANG.importing+'</div>';\r\n\t\t\t_.textblock += ' \t\t\t<div id=\"importing_processing_files\">';\r\n\t\t\t_.textblock += '\t\t\t</div>';\r\n\t\t\t_.textblock += '\t\t</div>';\r\n\t\t\t_.textblock += '\t\t<div id=\"filedrop_close\"><i class=\"material-icons\">close</i></div>';\r\n\t\t\t_.textblock += '\t</form>';\r\n\t\t\t_.textblock += '</div>';\r\n\r\n\t\t\tRVS.fileDrop = jQuery(_.textblock);\r\n\t\t\tRVS.fileDropForm = RVS.fileDrop.find('#filedrop_zone');\r\n\t\t\ttpGS.gsap.fromTo(RVS.fileDrop,0.3,{autoAlpha:0,scale:0.9},{zIndex:5000000, autoAlpha:1,scale:1,ease:\"power3.inOut\"});\r\n\r\n\t\t\tjQuery(document.body).append(RVS.fileDrop);\r\n\t\t\tif (RVS.fileDropListener===undefined) {\r\n\t\t\t\tjQuery('html').on('dragover drop dragleave dragend',function(e) {\r\n\t\t\t\t\tclearTimeout(window.htmldragout);\r\n\t\t\t\t\tif (e.type===\"drop\") {\r\n\t\t\t\t\t\tjQuery('#filedrop').remove();\r\n\t\t\t\t\t\tjQuery('.page-wrapper').removeClass(\"blurred\");\r\n\t\t\t\t\t} else\r\n\t\t\t\t\tif (e.type===\"dragleave\") {\r\n\t\t\t\t\t\twindow.htmldragout = setTimeout(function() {\r\n\t\t\t\t\t\t\tif (RVS.S.overFileDropZone==false) {\r\n\t\t\t\t\t\t\t\ttpGS.gsap.to(RVS.fileDrop,0.3,{autoAlpha:0,scale:0.9,ease:\"power3.inOut\"});\r\n\t\t\t\t\t\t\t\tjQuery('.page-wrapper').removeClass(\"blurred\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},50);\r\n\t\t\t\t\t};\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}).on('dragenter',function() {\r\n\t\t\t\t\tRVS.S.overFileDropZone = false;\r\n\t\t\t\t\tif (_.onlydrop!==true) jQuery('.page-wrapper').addClass(\"blurred\");\r\n\t\t\t\t\tif (_.onlydrop===true) {\r\n\t\t\t\t\t\ttpGS.gsap.set(RVS.fileDropForm,{width:RVS.S.editorSize.w-50, height:RVS.S.editorSize.h-50, top:90, left:41, xPercent:0,yPercent:0});\r\n\t\t\t\t\t\ttpGS.gsap.set(RVS.fileDrop,{background:'transparent'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttpGS.gsap.to(RVS.fileDrop,0.3,{autoAlpha:1,scale:1,ease:\"power3.inOut\"});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tRVS.fileDropForm.on('drag dragstart dragend dragover dragenter dragleave drop', function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t })\r\n\t\t\t\t .on('dragover dragenter', function(e) {\r\n\t\t\t\t \tRVS.S.overFileDropZone = true;\r\n\t\t\t\t\tRVS.fileDropForm[0].className=\"is-dragover\";\r\n\t\t\t\t })\r\n\t\t\t\t .on('dragleave dragend', function() {\r\n\t\t\t\t \tRVS.S.overFileDropZone=false;\r\n\t\t\t\t\tRVS.fileDropForm[0].className=\"\";\r\n\t\t\t\t })\r\n\t\t\t\t .on('drop', function(e) {\r\n\t\t\t\t\tRVS.fileDropForm[0].className=\"is-processing\";\r\n\t\t\t\t\tjQuery('#importing_processing_files').html('');\r\n\t\t\t\t\tfor (var i in e.originalEvent.dataTransfer.files) {\r\n\t\t\t\t\t\tif(!e.originalEvent.dataTransfer.files.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tif (typeof e.originalEvent.dataTransfer.files[i] == \"object\") {\r\n\t\t\t\t\t\t\tvar txt = e.originalEvent.dataTransfer.files[i].name+\" (\"+Math.round(e.originalEvent.dataTransfer.files[i].size/1024)+\"kb)\";\r\n\t\t\t\t\t\t\tjQuery('#importing_processing_files').append('<div id=\"fileprocessing_'+i+'\" class=\"filedrop_line_2\">'+txt+'<i class=\"material-icons fileupload_status\"></i><span class=\"fileupload_message\"></span></div>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_.type===\"custom\")\r\n\t\t\t\t\t\t_.callBack({files:e.originalEvent.dataTransfer.files,fileindex:0,report:'#fileprocessing_',success:_.success});\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tRVS.F.uploadFiles({form:RVS.fileDropForm,files:e.originalEvent.dataTransfer.files,fileindex:0,report:'#fileprocessing_',success:_.success,action:_.action});\r\n\t\t\t\t });\r\n\r\n\t\t\t\t jQuery('#file').on('change', function(e) {\r\n\t\t\t\t\tRVS.fileDropForm[0].className=\"is-processing\";\r\n\t\t\t\t\tfor (var i in e.target.files) {\r\n\t\t\t\t\t\tif(!e.target.files.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t\tif (typeof e.target.files[i] == \"object\") {\r\n\t\t\t\t\t\t\tvar txt = e.target.files[i].name+\" (\"+Math.round(e.target.files[i].size/1024)+\"kb)\";\r\n\t\t\t\t\t\t\tjQuery('#importing_processing_files').append('<div id=\"fileprocessing_'+i+'\" class=\"filedrop_line_2\">'+txt+'<i class=\"material-icons fileupload_status\"></i><span class=\"fileupload_message\"></span></div>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_.type===\"custom\")\r\n\t\t\t\t\t\t_.callBack({files:e.target.files,fileindex:0,report:'#fileprocessing_',success:_.success});\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tRVS.F.uploadFiles({form:RVS.fileDropForm,files:e.target.files,fileindex:0,report:'#fileprocessing_',success:_.success,action:_.action});\r\n\t\t\t\t });\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t}\r\n\t\t},\r\n\t\tclose:function() {\r\n\t\t\t\tjQuery('#filedrop').remove();\r\n\t\t\t\tjQuery('.page-wrapper').removeClass(\"blurred\");\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tRVS.F.uploadFiles = function(_) {\r\n\r\n\t\t_.fileindex = _.fileindex === undefined ? 0 : _.fileindex;\r\n\t\t jQuery(_.report+_.fileindex).find('.fileupload_status').html('autorenew').addClass(\"rotating\");\r\n\t\t var form_data = new FormData();\r\n\t\tform_data.append('import_file', _.files[_.fileindex]);\r\n\t\tform_data.append('action', RVS.ENV.plugin_dir+'_ajax_action');\r\n\t\tform_data.append('client_action', _.action===undefined ? 'import_slider' : _.action);\r\n\t\tform_data.append('nonce', RVS.ENV.nonce);\r\n\t\tform_data.append('form_key', window.FORM_KEY);\r\n        if (_.customs!==undefined) form_data.append('customs',JSON.stringify(_.customs));\r\n\t\tjQuery.ajax({\r\n\t\t\turl: ajaxurl,\r\n\t\t\ttype: 'post',\r\n\t\t\tcontentType: false,\r\n\t\t\tprocessData: false,\r\n\t\t\tdata: form_data,\r\n\t\t\tsuccess: function (response) {\r\n\r\n\t\t\t\tresponse = JSON.parse(response);\r\n\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tjQuery(_.report+_.fileindex).find('.fileupload_status').html('done').removeClass(\"rotating\").addClass(\"doneupload\");\r\n\t\t\t\t\tif (_.success!==undefined) RVS.DOC.trigger(_.success,response);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_.anyError = true;\r\n\t\t\t\t\tjQuery(_.report+_.fileindex).find('.fileupload_status').html('priority_high').removeClass(\"rotating\").addClass(\"errorupload\");\r\n\t\t\t\t\tjQuery(_.report+_.fileindex).find('.fileupload_message').html(response.message);\r\n\t\t\t\t}\r\n\t\t\t\t_.fileindex++;\r\n\t\t\t\tif (_.files.length>_.fileindex) {\r\n\t\t\t\t\tRVS.F.uploadFiles(_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (_.anyError!==true) {\r\n\t\t\t\t\t\tjQuery('#file_upload_mininfo').html(RVS_LANG.successImportFile);\r\n\t\t\t\t\t\tjQuery('#file_upload_processicon').removeClass(\"rotating\").addClass(\"done\").html('done');\r\n\r\n                        if (_.successFinal!==undefined) RVS.DOC.trigger(_.successFinal,response);\r\n\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tRVS.F.browserDroppable.close();\r\n\t\t\t\t\t\t},500);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery('#file_upload_mininfo').html(RVS_LANG.importReport);\r\n\t\t\t\t\t\tjQuery('#file_upload_processicon').removeClass(\"rotating\").addClass(\"error\").html('error');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\terror: function (response) {\r\n\t\t\t\t_.anyError = true;\r\n\t\t\t\tjQuery(_.report+_.fileindex).find('.fileupload_status').html('priority_high').removeClass(\"rotating\").addClass(\"errorupload\");\r\n\t\t\t\tjQuery(_.report+_.fileindex).find('.fileupload_message').html(response.message);\r\n\t\t\t\t_.fileindex++;\r\n\t\t\t\tif (_.files.length>_.fileindex) {\r\n\t\t\t\t\tRVS.F.uploadFiles(_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (_.anyError!==true) {\r\n\t\t\t\t\t\tjQuery('#file_upload_mininfo').html(RVS_LANG.successImportFile);\r\n\t\t\t\t\t\tjQuery('#file_upload_processicon').removeClass(\"rotating\").addClass(\"done\").html('done');\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tRVS.F.browserDroppable.close();\r\n\t\t\t\t\t\t},500);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery('#file_upload_mininfo').html(RVS_LANG.importReport);\r\n\t\t\t\t\t\tjQuery('#file_upload_processicon').removeClass(\"rotating\").addClass(\"error\").html('error');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t};\r\n\r\n\r\n\t/*********************************************\r\n\t\t- \tSAVE SLIDE,SLIDER,STATIC SLIDE \t-\r\n\t*********************************************/\r\n\r\n\tRVS.F.slideinWork = function(id) {\r\n\t\tRVS.SLIDER.inWork = RVS.SLIDER.inWork===undefined ? [] : RVS.SLIDER.inWork;\r\n\t\tif (jQuery.inArray(id,RVS.SLIDER.inWork)===-1 && jQuery.inArray(\"\"+id,RVS.SLIDER.inWork)===-1) RVS.SLIDER.inWork.push(\"\"+id);\r\n\t};\r\n\r\n\tRVS.F.convertIDStoTxt = function() {\r\n\t\tfor (var i in RVS.SLIDER.slideIDs) if(RVS.SLIDER.slideIDs.hasOwnProperty(i)) RVS.SLIDER.slideIDs[i] = \"\"+RVS.SLIDER.slideIDs[i];\r\n\t\tfor (var i in RVS.SLIDER.inWork) if(RVS.SLIDER.inWork.hasOwnProperty(i)) RVS.SLIDER.inWork[i] = \"\"+RVS.SLIDER.inWork[i];\r\n\t}\r\n\r\n\tRVS.F.saveSlides = function(_) {\r\n\t\tif (_.index < _.slides.length) {\r\n\t\t\t_.order = _.order===undefined ? 0 : _.order;\r\n\t\t\t_.order++;\r\n\t\t\tvar slideindex = _.slides[_.index],\r\n\t\t\t\tworkindex = jQuery.inArray(slideindex+\"\",RVS.SLIDER.inWork);\r\n\t\t\tworkindex = workindex===-1 ? \tjQuery.inArray(slideindex,RVS.SLIDER.inWork) : workindex;\r\n\t\t\tif (workindex>=0) {\r\n\t\t\t\ttry{\r\n\t\t\t\t\tRVS.F.compareLayerAnimPresets(RVS.SLIDER[_.slides[_.index]].layers);\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e) {console.log(e)}\r\n\t\t\t\tvar params = JSON.stringify(RVS.F.simplifySlide(RVS.SLIDER[_.slides[_.index]].slide)),\r\n\t\t\t\t\tlayers = JSON.stringify(RVS.F.simplifyAllLayer(RVS.SLIDER[_.slides[_.index]].layers));\r\n\t\t\t\tRVS.F.compareLayerAnimPresets\r\n\t\t\t\tif (_.force===true || RVS.S.lastSaved===undefined || RVS.S.lastSaved[slideindex]===undefined || params!==RVS.S.lastSaved[slideindex].params || layers!==RVS.S.lastSaved[slideindex].layers) {\r\n\t\t\t\t\tvar options = {slider_id:RVS.ENV.sliderID, slide_id:_.slides[_.index], params:params, layers:layers, slide_order:_.order};\r\n\t\t\t\t\tRVS.DOC.trigger('rs_save_slide_params', [options]);\r\n\r\n\t\t\t\t\tRVS.F.ajaxRequest('save_slide', options, function(response){\r\n\t\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\t\tRVS.S.lastSaved = RVS.S.lastSaved===undefined ? {} : RVS.S.lastSaved;\r\n\t\t\t\t\t\t\tRVS.S.lastSaved[slideindex] = {params : params, layers : layers};\r\n\t\t\t\t\t\t\t_.index++;\r\n\t\t\t\t\t\t\tRVS.F.saveSlides(_);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},undefined,undefined,RVS_LANG.saveslide+'<br><span style=\"font-size:17px; line-height:25px;\">\"'+RVS.SLIDER[_.slides[_.index]].slide.title+'\"</span>');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_.index++;\r\n\t\t\t\t\tRVS.F.saveSlides(_);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_.index++;\r\n\t\t\t\tRVS.F.saveSlides(_);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tRVS.SLIDER.inWork = [];\r\n\t\t\tRVS.F.slideinWork(RVS.S.slideId);\r\n\t\t\tRVS.S.need_to_save = false;\r\n\t\t\tif (_.trigger!==undefined) _.trigger();\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.convertArrayToObjects = function() {\r\n\t\tRVS.SLIDER.settings.nav.arrows.presets = Object.assign({},RVS.SLIDER.settings.nav.arrows.presets);\r\n\t\tRVS.SLIDER.settings.nav.bullets.presets = Object.assign({},RVS.SLIDER.settings.nav.bullets.presets);\r\n\t\tRVS.SLIDER.settings.nav.thumbs.presets = Object.assign({},RVS.SLIDER.settings.nav.thumbs.presets);\r\n\t\tRVS.SLIDER.settings.nav.tabs.presets = Object.assign({},RVS.SLIDER.settings.nav.tabs.presets);\r\n\t\tif (RVS.SLIDER.settings.skins!==undefined && RVS.SLIDER.settings.skins.colors!==undefined) RVS.SLIDER.settings.skins.colors = Object.assign({},RVS.SLIDER.settings.skins.colors);\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.saveSliderSettings = function() {\r\n\t\tvar params = JSON.stringify(RVS.SLIDER.settings),\r\n\t\t\tslideids = RVS.SLIDER.slideIDs.slice(),\r\n\t\t\tstaticindex = -1;\r\n\t\t\tfor (var si in slideids) {\r\n\t\t\t\tif(!slideids.hasOwnProperty(si)) continue;\r\n\t\t\t\tif ((\"\"+slideids[si]).indexOf(\"static\")>=0) staticindex = si;\r\n\t\t\t}\r\n\t\t\tslideids.splice(staticindex,1);\r\n\r\n\t\tRVS.F.ajaxRequest('save_slider', {slider_id:RVS.ENV.sliderID, params:params, slide_ids:/*RVS.SLIDER.slideIDs*/slideids}, function(response){\r\n\t\t\tif (response.success && response.missing!==undefined && response.missing.length>0)\r\n\t\t\t\tRVS.F.saveSlides({index:0,slides:RVS.SLIDER.slideIDs,works:response.missing});\r\n\t\t\tif (response.success) RVS.DOC.trigger('slidersaved');\r\n\t\t},undefined,undefined,RVS_LANG.saveslide+'<br><span style=\"font-size:17px; line-height:25px;\">'+RVS_LANG.slidersettings+'</span>');\r\n\t};\r\n\r\n\r\n\tRVS.F.getAllSliderDatas = function() {\r\n\t\tRVS.F.convertIDStoTxt();\r\n\t\tvar r = { slider : JSON.stringify(RVS.SLIDER.settings), slide_order : JSON.stringify(RVS.SLIDER.slideIDs)},\r\n\t\t\tslideids = RVS.SLIDER.slideIDs.slice();\r\n\t\tfor (var si in slideids) {\r\n\t\t\tif(!slideids.hasOwnProperty(si)) continue;\r\n            var ignore = false,\r\n                sli = slideids[si];\r\n            // Filter the Not used WPML Slides\r\n            if (RVS.SLIDER.settings.general.useWPML && RVS.SLIDER[sli]!==undefined && RVS.SLIDER[sli].slide!==undefined && RVS.SLIDER[sli].slide.child!==undefined && RVS.SLIDER[sli].slide.child.parentId!==\"\" && RVS.SLIDER[sli].slide.child.parentId!==undefined && jQuery.inArray(\"\"+RVS.SLIDER[sli].slide.child.parentId,RVS.SLIDER.slideIDs)===-1) ignore = true;\r\n            if (ignore!==true)\r\n    \t\t\tr[slideids[si]] = {\r\n\t\t\t\t\tparams : JSON.stringify(RVS.F.simplifySlide(RVS.SLIDER[slideids[si]].slide)),\r\n\t\t\t\t\tlayers : JSON.stringify(RVS.F.simplifyAllLayer(RVS.SLIDER[slideids[si]].layers))\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\t/**********************************\r\n\t\t- \tADDONS MODAL FUNCTIONS \t-\r\n\t***********************************/\r\n\r\n\tfunction fcMarkup(_) {\r\n\t\tvar h = '<div class=\"form_collector '+_.a+'\" data-type=\"'+_.b+'\" data-pcontainer=\"#'+_.c+'\" data-offset=\"#rev_builder_wrapper\">';\r\n\t\t\th +='<div id=\"'+_.d+'\"  data-select=\"'+_.f+_.slug+'\" class=\"formcontainer form_menu_inside collapsed\">';\r\n\t\t\th +='<div class=\"collectortabwrap\"><div id=\"\" class=\"collectortab form_menu_inside\" data-forms=\\'[\"#'+_.d+'\"]\\'>'+_.title+'</div></div>';\r\n\t\t\th +='<div id=\"'+_.e+'\" class=\"form_inner open\"></div>';\r\n\t\t\th +='</div>';\r\n\t\t\th +='</div>';\r\n\t\treturn h;\r\n\t}\r\n\t// EXTEND ADDON CONTAINERS\r\n\tRVS.F.addOnContainer =  {\r\n\t\tcreate : function(_) {\r\n\r\n\t\t\tif (!_.slug || !_.icon || !_.alias) return;\r\n\r\n\t\t\tvar h=\"\";\r\n\t\t\tif (_.slider===true) {\r\n\r\n\t\t\t\tjQuery('#gst_sl_collector').append('<div id=\"gst_sl_'+_.slug+'\" data-select=\"#gst_sl_'+_.slug+'\" data-unselect=\".general_submodule_trigger\" class=\"general_submodule_trigger opensettingstrigger\" style=\"display:none\" data-collapse=\"true\" data-forms=\\'[\"#form_module_'+_.slug+'\"]\\'><i class=\"material-icons\">'+_.icon+'</i><span class=\"gso_title\">'+_.alias+'</span></div>');\r\n\t\t\t\th += fcMarkup({a:\"slider_general_collector\", f:\"#gst_sl_\",  b:\"sliderconfig\", c:\"slider_settings\", d:\"form_module_\"+_.slug, title:_.title, e:\"form_slidergeneral_\"+_.slug, slug:_.slug});\r\n\t\t\t}\r\n\t\t\tif (_.layer===true) {\r\n\t\t\t\tjQuery('#gst_layer_collector').append('<div id=\"gst_layer_'+_.slug+'\" data-select=\"#gst_layer_'+_.slug+'\" data-unselect=\".layer_submodule_trigger\" class=\"layer_submodule_trigger opensettingstrigger\" style=\"display:none\" data-collapse=\"true\" data-forms=\\'[\"#form_layer_'+_.slug+'\"]\\'><i class=\"material-icons\">'+_.icon+'</i><span class=\"gso_title\">'+_.alias+'</span></div>');\r\n\t\t\t\th += fcMarkup({a:\"layer_settings_collector\", f:\"#gst_layer_\", b:\"layersconfig\", c:\"layer_settings\", d:\"form_layer_\"+_.slug, title:_.title, e:\"form_layerinner_\"+_.slug, slug:_.slug});\r\n\t\t\t}\r\n\t\t\tif (_.slide===true) {\r\n\t\t\t\tjQuery('#slide_menu_gso_wrap').append('<div id=\"gst_slide_'+_.slug+'\" data-select=\"#gst_slide_'+_.slug+'\" data-unselect=\".slide_submodule_trigger\" class=\"slide_submodule_trigger opensettingstrigger\" style=\"display:none\" data-collapse=\"true\" data-forms=\\'[\"#form_slide_'+_.slug+'\"]\\'><i class=\"material-icons\">'+_.icon+'</i><span class=\"gso_title\">'+_.alias+'</span></div>');\r\n\t\t\t\th += fcMarkup({a:\"slide_settings_collector\", f:\"#gst_slide_\", b:\"slideconfig\", c:\"slide_settings\", d:\"form_slide_\"+_.slug, title:_.title, e:\"form_slidegeneral_\"+_.slug, slug:_.slug});\r\n\t\t\t}\r\n\r\n\t\t\tif (RVS.C.theRightToolbar!==undefined) RVS.C.theRightToolbar.append(h);\r\n\t\t}\r\n\t};\r\n\r\n\t// CREATE ADDONS ELEMENT\r\n\tRVS.F.buildSingleAddonElement = function(addon,slug) {\r\n\t\tif (addon===undefined || addon===\"\" || addon===0) return \"\";\r\n\r\n\t\tvar markup = '<div id=\"ale_'+slug+'\" data-ref=\"'+slug+'\" class=\"rs_ale\">';\r\n\t\tmarkup += '<div class=\"rs_alethumb\"><div class=\"rs_alecbg\" style=\"'+(addon.logo.color!==undefined && addon.logo.color!==\"\" && addon.installed!==false ? 'background-color:'+addon.logo.color : '')+'\">';\r\n\t\tif (addon.logo.img===\"\")\r\n\t\t\tmarkup += '<div class=\"rs_alethumb_title\">'+addon.logo.text+'</div>';\r\n\t\tmarkup += '</div>';\r\n\t\tif (addon.logo.img!==\"\")\r\n\t\t\tmarkup += '<div class=\"rs_alethumb_img\" style=\"background-image:url('+addon.logo.img+')\"></div>';\r\n\t\tif (!addon.installed || !addon.active) {\r\n\t\t\tif (!addon.installed)\r\n\t\t\t\tmarkup += '<div class=\"rs_ale_notinstalled\">'+RVS_LANG.notinstalled+'</div>';\r\n\t\t\telse\r\n\t\t\t\tmarkup += '';\r\n\t\t\tmarkup += '<div class=\"rs_alethumb_notinstalledimg\" style=\"background-image:url('+addon.logo.img+')\"></div>';\r\n\t\t}\r\n\r\n\t\tvar showenabled = addon.active && RVS.LIB.ADDONS[slug].enable ? \"block\" : \"none\",\r\n\t\t\tenabledtxt = RVS_LANG.enabled;\r\n\t\tmarkup += (RVS.ENV.addOns_to_update[slug]!==undefined && RVS.ENV.addOns_to_update[slug].updated!==true ) || addon.installed<addon.available ? '<div class=\"rs_ale_actionneeded\" style=\"display:block\">'+RVS_LANG.actionneeded+'</div>' : '<div class=\"rs_ale_enabled\" style=\"display:'+showenabled+'\">'+enabledtxt+'</div>';\r\n\t\tmarkup += '</div>';\r\n\t\tmarkup += '<div class=\"rs_ale_title\">'+addon.title+'</div>';\r\n\t\tmarkup += '</div>';\r\n\r\n\t\treturn markup;\r\n\t};\r\n\r\n\t// CREATE ADDONS LIST BASED ON OBJECT\r\n\tRVS.F.buildAddonList = function(_,mode) {\r\n\t\t//Adding newmetas Check to hide button if not needed\r\n\t\tvar markup = \"\",i=0,newmetas=true;\r\n\t\tRVS.LIB.ADDONS = RVS.LIB.ADDONS===undefined ? {} : RVS.LIB.ADDONS;\r\n\t\tfor (var slug in _) {\r\n\t\t\tif(!_.hasOwnProperty(slug)) continue;\r\n\t\t\tRVS.LIB.ADDONS[slug] = RVS.LIB.ADDONS[slug]===undefined ? {} : RVS.LIB.ADDONS[slug];\r\n\t\t\t//if (jQuery.inArray(_[slug].slug,[\"revslider-gallery-addon\", \"revslider-rel-posts-addon\", \"revslider-sharing-addon\", \"revslider-maintenance-addon\", \"revslider-404-addon\",\"revslider-login-addon\",\"revslider-prevnext-posts-addon\",\"revslider-featured-addon\",\"revslider-backup-addon\"])>=0) _[slug].global = true;\r\n\t\t\tRVS.LIB.ADDONS[slug].enable = RVS.S.ovMode ? _[slug].global ? RVS.LIB.ADDONS[slug].enable : undefined : _[slug].global ? RVS.LIB.ADDONS[slug].enable : RVS.SLIDER.settings.addOns[slug]!==undefined ? RVS.SLIDER.settings.addOns[slug].enable : false;\r\n\t\t\tRVS.LIB.ADDONS[slug].enable = RVS.LIB.ADDONS[slug].enable===0 || RVS.LIB.ADDONS[slug].enable===\"0\" ? false : RVS.LIB.ADDONS[slug].enable===1 || RVS.LIB.ADDONS[slug].enable===\"1\" ? true : RVS.LIB.ADDONS[slug].enable===0 || RVS.LIB.ADDONS[slug].enable;\r\n\t\t\tif (mode!==\"update\") {\r\n\t\t\t\tif (RVS.LIB.ADDONS[slug].sort===undefined || RVS.LIB.ADDONS[slug].releaseid==undefined) newmetas = false;\r\n\t\t\t\tmarkup += RVS.F.buildSingleAddonElement(_[slug],slug);\r\n\t\t\t\tdelete RVS.LIB.ADDONS[slug].el;\r\n\t\t\t\tRVS.LIB.ADDONS[slug].el = undefined;\r\n\t\t\t}\r\n\t\t\tRVS.LIB.ADDONS_LIST[slug] = RVS.F.safeExtend(true,{},_[slug]);\r\n\t\t\tRVS.LIB.ADDONS[slug].order = i;\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tif (mode!==\"update\") {\r\n\t\t\tjQuery('#rbm_addonlist').append(markup);\r\n\t\t\tRVS.F.RSDialog.center();\r\n\t\t\tif (!newmetas) {\r\n\t\t\t\tjQuery('.ddTP.ddTP_C.ddTP-fake.ddTP_C--autowidthinmodal[data-refid=\"sel_addon_sorting\"]').hide();\r\n\t\t\t} else {\r\n\t\t\t\tjQuery('#sel_addon_sorting').val(\"pop\").ddTP('change');\r\n\t\t\t}\r\n\t\t\tjQuery('#sel_addon_filtering').val(\"all\").ddTP('change');\r\n\t\t\tdocument.getElementById('searchaddons').value=\"\";\r\n\t\t}\r\n\t\trequestAnimationFrame(RVS.F.redrawAddonList);\r\n\t};\r\n\r\n\r\n\tRVS.F.redrawAddonList = function() {\r\n\t\tif (RVS.S.addonPrefilter!=undefined) {\r\n\t\t\t\tjQuery('#sel_addon_filtering').val(RVS.S.addonPrefilter).ddTP('change');\r\n\t\t\t\trequestAnimationFrame(RVS.F.redrawAddonList);\r\n\t\t\t\tdelete RVS.S.addonPrefilter;\r\n\t\t}\r\n\t\tvar sort = document.getElementById('sel_addon_sorting').value,\r\n\t\t\tfilter = document.getElementById('sel_addon_filtering').value,\r\n\t\t\torder = [],i;\r\n\r\n\t\tfor ( i in RVS.LIB.ADDONS) if (RVS.LIB.ADDONS.hasOwnProperty(i)) {\r\n\t\t\torder.push(RVS.LIB.ADDONS[i]);\r\n\t\t\torder[order.length-1].title = order[order.length-1].title.replace(\"(\",\"\").replace(\")\",\"\");\r\n\t\t}\r\n\r\n\r\n\t\t//Sort the Sliders First\r\n\t\tswitch(sort) {\r\n\t\t\tcase \"popdesc\":\r\n\t\t\t\torder.sort(function(a,b) { return parseInt(b.sort,0) - parseInt(a.sort,0);});\r\n\t\t\tbreak;\r\n\t\t\tcase \"pop\":\r\n\t\t\t\torder.sort(function(a,b) { return parseInt(a.sort,0) - parseInt(b.sort,0);});\r\n\t\t\tbreak;\r\n\t\t\tcase \"datedesc\":\r\n\t\t\t\torder.sort(function(a,b) { return b.releaseid - a.releaseid;});\r\n\t\t\tbreak;\r\n\t\t\tcase \"date\":\r\n\t\t\t\torder.sort(function(a,b) { return a.releaseid - b.releaseid;});\r\n\t\t\tbreak;\r\n\t\t\tcase \"title\":\r\n\t\t\t\torder.sort(function(a,b) { return a.title.toUpperCase().localeCompare(b.title.toUpperCase()); });\r\n\t\t\tbreak;\r\n\t\t\tcase \"titledesc\":\r\n\t\t\t\torder.sort(function(a,b) { return b.title.toUpperCase().localeCompare(a.title.toUpperCase()); });\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\torder.sort(function(a,b) { return a.order - b.order;});\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\t\tvar s = jQuery('#searchaddons').val().toLowerCase();\r\n\r\n\t\t// ADD SLIDERS\r\n\t\tfor ( i in order) {\r\n\t\t\tif(!order.hasOwnProperty(i)) continue;\r\n\t\t\tvar addon = order[i];\r\n\r\n\t\t\tvar cond_a = s.length<3 || (s.length>2 && (addon.title.toLowerCase().indexOf(s)>=0 || addon.line_1.toString().toLowerCase().indexOf(s)>=0 || addon.line_1.toString().toLowerCase().indexOf(s)>=0)),\r\n\t\t\t\tcond_b = filter==\"all\" ||\r\n\t\t\t\t\t\t(filter==\"action\" && (RVS.ENV.addOns_to_update[addon.slug]!==undefined && RVS.ENV.addOns_to_update[addon.slug].updated!==true ) || addon.installed<addon.available) ||\r\n\t\t\t\t\t\t(filter==\"installed\" && addon.installed) ||\r\n\t\t\t\t\t\t(filter==\"notinstalled\" && !addon.installed) ||\r\n\t\t\t\t\t\t(filter==\"activated\" && addon.active);\r\n\r\n\t\t\t// SEARCHED && SLIDE IS CHILDREN FROM SELECTED FOLDER && SEARCHED TEXT IN TITLE OR TAGLIST\r\n\t\t\taddon.showinlist = ( cond_a&&cond_b);\r\n\t\t}\r\n\r\n\t\tfor (var i in order) {\r\n\t\t\tif (!order.hasOwnProperty(i)) continue;\r\n\t\t\tvar slug = order[i].slug;\r\n\t\t\tRVS.LIB.ADDONS[slug].el = RVS.LIB.ADDONS[slug].el==undefined ?  document.getElementById('ale_'+slug): RVS.LIB.ADDONS[slug].el;\r\n\t\t\tRVS.LIB.ADDONS[slug].el.style.display=order[i].showinlist ? \"inline-block\" : \"none\";\r\n\t\t\tdocument.getElementById('rbm_addonlist').appendChild(RVS.LIB.ADDONS[slug].el);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tRVS.F.loadAddonList = function(slug,mode,callme) {\r\n\t\tRVS.LIB.ADDONS_LIST = {};\r\n\t\t// GET THE LATEST AVAILABLE LIST\r\n\t\tRVS.F.ajaxRequest('get_addon_list', {}, function(response){\r\n\t\t\tif (response.success) {\r\n\r\n\t\t\t\t// sometimes response.addons can equal \"[false]\"\r\n\t\t\t\tif(response.addons && Array.isArray(response.addons) && response.addons.length === 1 && response.addons[0] === false) return;\r\n\r\n\t\t\t\tRVS.F.buildAddonList(response.addons,mode);\r\n\t\t\t\tif (slug && mode!==\"update\") RVS.F.showAddonInfos(slug);\r\n\t\t\t\tif (mode===\"update\") callme();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tRVS.F.loadCSS = function(url) {\r\n\t\tvar element = document.createElement(\"link\");\r\n\t\telement.setAttribute(\"rel\", \"stylesheet\");\r\n\t\telement.setAttribute(\"type\", \"text/css\");\r\n\t\telement.setAttribute(\"href\", url);\r\n\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(element);\r\n\t};\r\n\r\n\t// OPEN ADDONS MODAL WINDOW\r\n\tRVS.F.openAddonModal = function() {\r\n\r\n\t\t// 1ST TIME RUNNING\r\n\t\tif (!RVS.LIB.ADDONS_LIST) {\r\n\t\t\t// \tRESET THE MMODAL LIST\r\n\t\t\tRVS.F.loadAddonList();\r\n\r\n\t\t\t// ADD LISTENERS\r\n\t\t\tRVS.DOC.on('click','#rbm_addons .rbm_close',function() {\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('click','.rs_ale',function() {\r\n\t\t\t\tif (RVS.ENV.activated==\"false\" || RVS.ENV.activated==false) {\r\n\t\t\t\t\tRVS.F.showRegisterSliderInfo();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tjQuery('.rs_ale.selected').removeClass(\"selected\");\r\n\t\t\t\tthis.className +=\" selected\";\r\n\t\t\t\tRVS.F.showAddonInfos(this.dataset.ref);\r\n\t\t\t});\r\n\t\t\t//UPDATE ADDON OVERVIEW LIST\r\n\t\t\tRVS.DOC.on('updateAddonsOverview',function(e,p) {\r\n\t\t\t\tRVS.F.redrawAddonList();\r\n\t\t\t});\r\n\r\n\t\t\t// SEARCH ADON LIST TRIGGERING\r\n\t\t\tRVS.DOC.on('keyup','#searchaddons',function() {\r\n\t\t\t\tclearTimeout(window.searchKeyUp);\r\n\t\t\t\twindow.searchKeyUp = setTimeout(function() {\r\n\t\t\t\t\tRVS.F.redrawAddonList();\r\n\t\t\t\t},200);\r\n\t\t\t});\r\n\r\n\t\t\t//INSTALL ADDON\r\n\t\t\tRVS.DOC.on('click','.ale_i_installaddon',function() {\r\n\t\t\t\tvar slug = this.dataset.slug;\r\n\t\t\t\tRVS.F.ajaxRequest('activate_addon', {addon:slug}, function(response){\r\n\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\tRVS.LIB.ADDONS_LIST[slug].installed=response.version!==undefined && response.version!==false && response.version!=='false' ? response.version : RVS.LIB.ADDONS_LIST[slug].available;\r\n\t\t\t\t\t\tjQuery('#ale_'+slug+' .rs_ale_notinstalled').remove();\r\n\r\n\t\t\t\t\t\tRVS.F.showAddonInfos(slug);\r\n\t\t\t\t\t}\r\n\t\t\t\t},undefined,undefined,RVS_LANG.addon+'<br><span style=\"font-size:17px; line-height:25px;\">\"'+RVS_LANG.installingaddon+'\"</span>');\r\n\t\t\t});\r\n\r\n\t\t\t//ACTIVATE ADDON\r\n\t\t\tRVS.DOC.on('click','.ale_i_activateaddon',function() {\r\n\t\t\t\tif (RVS.ENV.activated!==\"true\" && RVS.ENV.activated!==true) {\r\n\t\t\t\t\t//MESSAGE ABOUT REGISTERING\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar slug = this.dataset.slug,\r\n\t\t\t\t\tvarslug = slug.replace(/-/g, '_'),\r\n\t\t\t\t\tcoloraddonthmb = jQuery('#ale_'+slug+' .rs_alethumb_img');\r\n\r\n\t\t\t\t// IF NOT IN OVERVIEW AND NOT GLOBAL, WE CAN ENABLE IT AFTER INSTALL/ACTIVATE\r\n\t\t\t\tif (!RVS.LIB.ADDONS_LIST[slug].global && !RVS.S.ovMode) {\r\n\t\t\t\t\tRVS.SLIDER.settings.addOns[slug] = RVS.SLIDER.settings.addOns[slug]===undefined ? {} : RVS.SLIDER.settings.addOns[slug];\r\n\t\t\t\t\tRVS.SLIDER.settings.addOns[slug].enable = true;\r\n\t\t\t\t\tRVS.LIB.ADDONS[slug].enable = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tRVS.F.ajaxRequest('activate_addon', {addon:slug}, function(response){\r\n\t\t\t\t\tif(response.success) {\r\n\r\n\t\t\t\t\t\tRVS.LIB.ADDONS_LIST[slug].active=true;\r\n\t\t\t\t\t\t// GET BRICKS AND OTHER VALUES LOADED VIA AJAX FROM ADDON\r\n\t\t\t\t\t\twindow[varslug] = response[slug];\r\n\r\n\t\t\t\t\t\t// handle global AddOns\r\n\t\t\t\t\t\tif(typeof revbuilder !== 'undefined' && (RVS.SLIDER.settings===undefined || !RVS.SLIDER.settings.addOns.hasOwnProperty(slug))) window[varslug].enabled = true;\r\n\t\t\t\t\t\telse window[varslug].enabled = RVS.F._d(RVS.F._truefalse(window[varslug].enabled), (!RVS.S.ovMode ? RVS.SLIDER.settings.addOns[slug]!==undefined ? RVS.SLIDER.settings.addOns[slug].enable : false : false));\r\n\r\n\t\t\t\t\t\t// SHOW THE ICON COLORED\r\n\t\t\t\t\t\ttpGS.gsap.fromTo(coloraddonthmb, 2, {zIndex:\"13\", clip:\"rect(95px 95px 95px 95px)\"},{clip:\"rect(0px 190px 190px 0px)\"});\r\n\r\n\t\t\t\t\t\t// SHOW THE ENABLED BUTTON\r\n\t\t\t\t\t\tjQuery('#ale_'+slug+' .rs_ale_enabled').show();\r\n\r\n\t\t\t\t\t\t// SHOW NEW VALUES OF ADDON IN THE PANEL\r\n\t\t\t\t\t\tRVS.F.showAddonInfos(slug);\r\n\r\n\t\t\t\t\t\t// UPDATE ALREADY CREATED OBJECT LIBRARY ELEMENTS\r\n\t\t\t\t\t\tRVS.F.addonInstalledOnDemand(slug);\r\n\r\n\t\t\t\t\t\t//  LOAD JS AND CSS FILES OR SHOW RESTART MESSAGES\r\n\t\t\t\t\t\tRVS.F.loadCSS(RVS.ENV.wp_plugin_url+slug+'/admin/assets/css/'+slug+'-admin.css');\r\n\t\t\t\t\t\trequire(RVS.ENV.wp_plugin_url+slug+'/admin/assets/js/'+slug+'-admin.js',function() {\r\n\t\t\t\t\t\t\tRVS.F.showAddonInfos(slug);\r\n\r\n\t\t\t\t\t\t\t// IF LOCAL ADDON WITHIN A SLIDER, WE NEED TO INITIALISE IT\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\tsocial and backups AddOns need an init triggered here\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t// changed this:\r\n\t\t\t\t\t\t\t//if (!RVS.S.ovMode && !RVS.LIB.ADDONS_LIST[slug].global && RVS.LIB.ADDONS[slug].enable) RVS.DOC.trigger(slug+\"_init\");\r\n\t\t\t\t\t\t\t// to this:\r\n\t\t\t\t\t\t\tif (!RVS.S.ovMode && RVS.LIB.ADDONS[slug].enable) RVS.DOC.trigger(slug+\"_init\");\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},undefined,undefined,RVS_LANG.addon+'<br><span style=\"font-size:17px; line-height:25px;\">\"'+RVS_LANG.activatingaddon+'\"</span>');\r\n\t\t\t\t//return false;\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('click','#process_all_addon_updates',function() {\r\n\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('click','#check_addon_updates',function() {\r\n\t\t\t\tRVS.F.ajaxRequest('check_for_updates',{},function(response) {\r\n\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\tRVS.ENV.latest_version = response.version;\r\n\t\t\t\t\t\tdelete RVS.LIB.ADDONS_LIST;\r\n\t\t\t\t\t\tdocument.getElementById('rbm_addonlist').innerHTML = \"\";\r\n\t\t\t\t\t\tRVS.F.loadAddonList();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t// ENABLE ADDON\r\n\t\t\tRVS.DOC.on('click','.ale_i_enableaddon',function() {\r\n\t\t\t\tvar slug = this.dataset.slug;\r\n\t\t\t\t// SLIDER BASED ADD ONS ENABLE\r\n\t\t\t\tif (RVS.LIB.ADDONS_LIST[slug].global!==true) {\r\n\t\t\t\t\tRVS.SLIDER.settings.addOns[slug] = RVS.SLIDER.settings.addOns[slug]===undefined ? {} : RVS.SLIDER.settings.addOns[slug];\r\n\t\t\t\t\tRVS.SLIDER.settings.addOns[slug].enable = true;\r\n\t\t\t\t\tRVS.LIB.ADDONS[slug].enable=true;\r\n\t\t\t\t\tRVS.DOC.trigger(slug+\"_init\");\r\n\t\t\t\t\tRVS.F.showAddonInfos(slug);\r\n\t\t\t\t\tjQuery('#ale_'+this.dataset.slug+' .rs_ale_enabled').show();\r\n\t\t\t\t} else {\r\n\t\t\t\t// GLOBAL ADD ON ENABLE\r\n\t\t\t\t\tRVS.F.ajaxRequest('wp_ajax_enable_'+slug, {}, function(response){\r\n\t\t\t\t\t\tRVS.LIB.ADDONS[slug].enable=true;\r\n\t\t\t\t\t\tRVS.DOC.trigger(slug+\"_init\");\r\n\t\t\t\t\t\tRVS.F.showAddonInfos(slug);\r\n\t\t\t\t\t\tjQuery('#ale_'+slug+' .rs_ale_enabled').show();\r\n\t\t\t\t\t},undefined,undefined,RVS_LANG.addon+'<br><span style=\"font-size:17px; line-height:25px;\">\"'+RVS_LANG.enablingaddon+'\"</span>');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// DISABLE ADDON\r\n\t\t\tRVS.DOC.on('click','.ale_i_disableaddon',function() {\r\n\t\t\t\tvar slug = this.dataset.slug;\r\n\t\t\t\t// SLIDER BASED ADD ONS DISABLE\r\n\t\t\t\tif (!RVS.LIB.ADDONS_LIST[slug].global) {\r\n\t\t\t\t\tRVS.SLIDER.settings.addOns[slug].enable = false;\r\n\t\t\t\t\tRVS.DOC.trigger(slug+\"_init\");\r\n\t\t\t\t\tRVS.LIB.ADDONS[slug].enable=false;\r\n\t\t\t\t\tRVS.F.showAddonInfos(slug);\r\n\t\t\t\t\tjQuery('#ale_'+this.dataset.slug+' .rs_ale_enabled').hide();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.F.ajaxRequest('wp_ajax_disable_'+slug, {}, function(response){\r\n\t\t\t\t\t\tRVS.LIB.ADDONS[slug].active=false;\r\n\t\t\t\t\t\tRVS.LIB.ADDONS[slug].enable=false;\r\n\t\t\t\t\t\tRVS.DOC.trigger(slug+\"_init\");\r\n\t\t\t\t\t\tRVS.F.showAddonInfos(slug);\r\n\t\t\t\t\t\tjQuery('#ale_'+slug+' .rs_ale_enabled').hide();\r\n\t\t\t\t\t},undefined,undefined,RVS_LANG.addon+'<br><span style=\"font-size:17px; line-height:25px;\">\"'+RVS_LANG.disablingaddon+'\"</span>');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// UPDATE ADDON\r\n\t\t\tRVS.DOC.on('click','.ale_i_updateaddon',function() {\r\n\t\t\t\tvar slug = this.dataset.slug;\r\n\t\t\t\tRVS.F.ajaxRequest('activate_addon', {addon:slug, update:true}, function(response){\r\n\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\tif (RVS.ENV.addOns_to_update[slug]!==undefined && RVS.ENV.addOns_to_update[slug].updated!==true) RVS.ENV.addOns_to_update[slug].updated = true;\r\n\t\t\t\t\t\tdelete RVS.LIB.ADDONS_LIST;\r\n\t\t\t\t\t\tdocument.getElementById('rbm_addonlist').innerHTML = \"\";\r\n\t\t\t\t\t\tRVS.F.loadAddonList(slug);\r\n\t\t\t\t\t\t/*RVS.LIB.ADDONS_LIST[slug].installed=true;\r\n\t\t\t\t\t\tjQuery('#ale_'+slug+' .rs_ale_notinstalled').remove();\r\n\t\t\t\t\t\tRVS.F.showAddonInfos(slug);*/\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},undefined,undefined,RVS_LANG.addon+'<br><span style=\"font-size:17px; line-height:25px;\">\"'+RVS_LANG.updatingaddon+' '+slug+'\"</span>');\r\n\t\t\t});\r\n\r\n\t\t\t// UPDATE ADDON\r\n\t\t\tRVS.DOC.on('click','.ale_i_allupdateaddon',function() {\r\n\t\t\t\tRVS.F.checkForAddonsActionNeeded();\r\n\t\t\t\tRVS.F.updateAddonsInRow();\r\n\t\t\t});\r\n\r\n\t\t\t//LISTEN ON SAVE BUTTON\r\n\t\t\tRVS.DOC.on('click','#rbm_configpanel_savebtn',function() {\r\n\t\t\t\tRVS.DOC.trigger('save_'+this.dataset.slug);\r\n\t\t\t});\r\n\t\t}\r\n\t\tRVS.F.RSDialog.create({modalid:'rbm_addons', bgopacity:0.85});\r\n\t\tjQuery('#rbm_addonlist, #rbm_addon_details').RSScroll({ suppressScrollX:true});\r\n\t\tRVS.F.checkForAddonsActionNeeded();\r\n\t};\r\n\r\n\tRVS.F.checkForAddonsActionNeeded = function() {\r\n\t\tRVS.S.slugsToUpdate=[];\r\n\t\tRVS.C.PRALADUP = RVS.C.PRALADUP==undefined || RVS.C.PRALADUP==null || RVS.C.PRALADUP.length==0 ? document.getElementById('process_all_addon_updates') : RVS.C.PRALADUP;\r\n\t\tfor (var i in RVS.LIB.ADDONS) if (RVS.LIB.ADDONS[i].available>RVS.LIB.ADDONS[i].installed) RVS.S.slugsToUpdate.push(RVS.LIB.ADDONS[i].slug);\r\n\t\tif (RVS.S.slugsToUpdate.length>0) {\r\n\t\t\tRVS.C.PRALADUP.style.display=\"inline-block\";\r\n\t\t} else {\r\n\t\t\tRVS.C.PRALADUP.style.display=\"none\";\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.updateAddonsInRow = function() {\r\n\t\tif (RVS.S.slugsToUpdate.length>0) {\r\n\t\t\tvar slug = RVS.S.slugsToUpdate[0];\r\n\t\t\tRVS.F.ajaxRequest('activate_addon', {addon:slug, update:true}, function(response){\r\n\t\t\t\tif(response.success) {\r\n\t\t\t\t\tif (RVS.LIB.ADDONS!==undefined && RVS.LIB.ADDONS[slug]!==undefined) RVS.LIB.ADDONS[slug].installed = RVS.LIB.ADDONS[slug].available;\r\n\t\t\t\t\tif (RVS.LIB.ADDONS_LIST!==undefined && RVS.LIB.ADDONS_LIST[slug]!==undefined) RVS.LIB.ADDONS_LIST[slug].installed = RVS.LIB.ADDONS_LIST[slug].available;\r\n\t\t\t\t}\r\n\t\t\t\tRVS.S.slugsToUpdate.splice(0,1);\r\n\t\t\t\tRVS.F.updateAddonsInRow();\r\n\t\t\t},undefined,undefined,RVS_LANG.addon+'<br><span style=\"font-size:17px; line-height:25px;\">\"'+RVS_LANG.updatingaddon+' '+slug+'\"</span>');\r\n\t\t} else {\r\n\t\t\t\tdelete RVS.LIB.ADDONS_LIST;\r\n\t\t\t\tdocument.getElementById('rbm_addonlist').innerHTML = \"\";\r\n\t\t\t\tRVS.F.loadAddonList(slug);\r\n\t\t\t\tRVS.C.PRALADUP.style.display=\"none\";\r\n\t\t\t\tif (RVS.F.notifications) RVS.F.notifications();\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.showAddonInfos = function(slug) {\r\n\t\tif (RVS.LIB.ADDONS_LIST===undefined || RVS.LIB.ADDONS_LIST[slug]===undefined) return;\r\n\t\t//RVS.ENV.revision = \"4.0.0\";\r\n\r\n\t\t//document.getElementById('rbm_addon_details').innerHTML = \"\";\r\n\t\tvar markup ='<div class=\"rbm_addon_details_inner\">',\r\n\t\t\taddon = RVS.LIB.ADDONS_LIST[slug],\r\n\t\t\tpath,\r\n\t\t\tenabletxt = addon.active ? addon.global ?  RVS_LANG.enableglobaladdon : RVS_LANG.enableaddon : addon.global ? RVS_LANG.activateglobaladdon : RVS_LANG.activateaddon,\r\n\t\t\tdisabletxt = addon.global ? RVS_LANG.disableglobaladdon : RVS_LANG.disableaddon;\r\n\t\tmarkup += '<div class=\"div20\"></div>';\r\n\t\tmarkup += '<div class=\"ale_i_title\">'+addon.title+'</div>';\r\n\t\tmarkup += '<div class=\"ale_i_content\">'+addon.line_1+' '+addon.line_2+'</div>';\r\n\r\n\t\tmarkup += '<div class=\"div20\"></div>';\r\n\r\n\t\tif (RVS.S.ovMode && !addon.global && addon.active && addon.installed)\r\n\t\t\tmarkup += '<div class=\"basic_action_button_inactive autosize basic_action_button\" data-slug=\"'+addon.slug+'\" data-global=\"'+addon.global+'\"><i class=\"material-icons\">error_outline</i>'+RVS_LANG.addonOnlyInSlider+'</div>';\r\n\t\telse\r\n\t\tif (!RVS.F.compareVersions(addon.version_from,RVS.ENV.revision))\r\n\t\t\tmarkup += '<div class=\"ale_i_errorbutton basic_action_button autosize\"><i class=\"material-icons\">error_outline</i>'+RVS_LANG.checkforrequirements+'</div>';\r\n\t\telse\r\n\r\n\t\tif (!addon.installed)\r\n\t\t\tmarkup += '<div class=\"ale_i_installaddon basic_action_coloredbutton autosize basic_action_button\" data-slug=\"'+addon.slug+'\" data-global=\"'+addon.global+'\"><i class=\"material-icons\">get_app</i>'+RVS_LANG.install_and_activate+'</div>';\r\n\t\telse\r\n\t\tif (!addon.active)\r\n\t\t\tmarkup += '<div class=\"ale_i_activateaddon basic_action_coloredbutton autosize basic_action_button\" data-slug=\"'+addon.slug+'\" data-global=\"'+addon.global+'\"><i class=\"material-icons\">power_settings_new</i>'+enabletxt+'</div>';\r\n\t\telse\r\n\t\tif (!RVS.LIB.ADDONS[slug].enable) {\r\n\t\t\tif (RVS.S.ovMode && !addon.global)\r\n\t\t\t\tmarkup += '';\r\n\t\t\telse\r\n\t\t\t\tmarkup += '<div class=\"ale_i_enableaddon basic_action_coloredbutton autosize basic_action_button\" data-global=\"'+addon.global+'\" data-slug=\"'+addon.slug+'\"><i class=\"material-icons\">power_settings_new</i>'+enabletxt+'</div>';\r\n\t\t} else\r\n\t\t\tmarkup += '<div class=\"ale_i_disableaddon basic_action_coloredbutton autosize basic_action_button\" data-global=\"'+addon.global+'\" data-slug=\"'+addon.slug+'\"><i class=\"material-icons\">remove_circle_outline</i>'+disabletxt+'</div>';\r\n\r\n\t\tmarkup += '</div>';\r\n\t\tmarkup += '<div class=\"ale_i_line\"></div>';\r\n\t\tmarkup +='<div class=\"rbm_addon_details_inner\">';\r\n\r\n\t\t// VERSION DETAILS\r\n\t\tmarkup += '<row>';\r\n\t\tmarkup += '<onehalf>';\r\n\t\tmarkup += '<div class=\"ale_i_title\">'+RVS_LANG.installedversion+'</div>';\r\n\t\t// ADDON INSTALLED ??\r\n\t\tif (addon.installed===false)\r\n\t\t\tmarkup += '<div class=\"ale_i_content\">'+RVS_LANG.notinstalled+'</div>';\r\n\t\telse\r\n\t\t\tmarkup += '<div class=\"ale_i_content\">'+(addon.installed===true ? addon.available===undefined ? RVS_LANG.availableversion : addon.available  : addon.installed)+'</div>';\r\n\t\tmarkup += '</onehalf>';\r\n\t\tmarkup += '<onehalf>';\r\n\t\tmarkup += '<div class=\"ale_i_title\">'+RVS_LANG.availableversion+'</div>';\r\n\t\tmarkup += '<div class=\"ale_i_content\">'+addon.available+'</div>';\r\n\t\tmarkup += '</onehalf>';\r\n\t\tmarkup += '</row>';\r\n\t\tmarkup += '<div class=\"div20\"></div>';\r\n\t\tmarkup += '<div class=\"ale_i_title\">'+RVS_LANG.requirements+'</div>';\r\n\r\n\t\t// REQUIREMENT FILLED ?\r\n\t\tif (RVS.F.compareVersions(addon.version_from,RVS.ENV.revision))\r\n\t\t\tmarkup += '<div class=\"ale_i_content\"><i class=\"material-icons\">check</i>'+RVS_LANG.sliderrevversion+' '+addon.version_from+'</div>';\r\n\t\telse\r\n\t\t\tmarkup += '<div class=\"ale_i_content ale_yellow\"><i class=\"material-icons\">error_outline</i>'+RVS_LANG.sliderrevversion+' '+addon.version_from+'</div>';\r\n\r\n\t\t// UPDATE AVAILABLE, UPDATE ADDON\r\n\t\tif (addon.installed!==false && RVS.F.compareVersions(addon.installed,addon.available,\"<\")===true) {\r\n\t\t\tmarkup += '<div class=\"div20\"></div>';\r\n\t\t\tmarkup += '<div class=\"ale_i_updateaddon  basic_action_coloredbutton autosize basic_action_button\" data-global=\"'+addon.global+'\" data-slug=\"'+addon.slug+'\"><i class=\"material-icons\">get_app</i>'+RVS_LANG.updateNow+'</div>';\r\n\t\t}\r\n\r\n\t\tmarkup += '</div>';\r\n\t\tmarkup += '<div class=\"ale_i_line\"></div>';\r\n\t\tmarkup += '<div class=\"form_collector\" id=\"addon_configuration_subpanel\"></div>';\r\n\r\n\t\tdocument.getElementById('rbm_addon_details').innerHTML = markup;\r\n\t\tRVS.F.configPanelSaveButton({show:false, slug:slug});\r\n\t\tif (addon.active) {\r\n\t\t\tRVS.DOC.trigger(addon.slug+'_config',{container:\"addon_configuration_subpanel\"});\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.configPanelSaveButton = function(_) {\r\n\t\tvar btn = document.getElementById('rbm_configpanel_savebtn');\r\n\t\tif (_.show===true) {\r\n\t\t\tbtn.style.display=\"block\";\r\n\t\t\tbtn.dataset.slug=_.slug;\r\n\t\t} else {\r\n\t\t\tbtn.style.display=\"none\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tRVS.F.compareVersions = function(a, b,c) {\r\n\t\tif (a===undefined || b===undefined) return false;\r\n\t\ta +=\"\";\r\n\t\tb +=\"\";\r\n\t    var i, diff , res\r\n\t    \tregExStrip0 = /(\\.0+)+$/,\r\n\t    \tsegmentsA = a.replace(regExStrip0, '').split('.'),\r\n\t    \tsegmentsB = b.replace(regExStrip0, '').split('.'),\r\n\t    \tl = Math.min(segmentsA.length, segmentsB.length);\r\n\r\n\t    for (i = 0; i < l; i++) {\r\n\t        diff = parseInt(segmentsA[i], 10) - parseInt(segmentsB[i], 10);\r\n\t        if (diff) {\r\n\t            return  (c===undefined && diff<=0  || c===\"<\" && diff<0) ? true : false;\r\n\t        }\r\n\t    }\r\n\t    res =  segmentsA.length - segmentsB.length;\r\n\t    return (c===undefined && res<=0  || c===\"<\" && res<0) ? true : false;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t/*******************************************\r\n\t\t- IMAGE AND VIDEO AND AUDIO LOADINGS -\r\n\t*******************************************/\r\n\r\n\tRVS.F.preloadImage = function(_) {\r\n\t\tvar useCallback = true;\r\n\t\tvar img = new Image();\r\n\t\tif (_.silent!==true) RVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.imageisloading});\r\n\t\timg.onload = function() {\r\n\t\t\tif (_.slideId!==undefined && _.uid!==undefined) {\r\n\t\t\t\tRVS.SLIDER[_.slideId].layers[_.uid].size.originalWidth = this.width;\r\n\t\t\t\tRVS.SLIDER[_.slideId].layers[_.uid].size.originalHeight = this.height;\r\n\t\t\t\tvar val = parseInt(this.height,0)===0 ? 0 : parseInt(this.width,0) / parseInt(this.height,0);\r\n\t\t\t\tRVS.SLIDER[_.slideId].layers[_.uid].size.aspectRatio =  RVS.F.cToResp({default:\"1\",val:val});\r\n\t\t\t\tRVS.SLIDER[_.slideId].layers[_.uid].media.loaded = true;\r\n\t\t\t}\r\n\t\t\tif (_.silent!==true) setTimeout(function() {\tRVS.F.showWaitAMinute({fadeOut:500});},100);\r\n\t\t\tif (_.callback && useCallback) _.callback.call();\r\n\t\t};\r\n\t\timg.onerror = function() {\r\n\r\n\t\t\tif (_.slideId!==undefined && _.uid!==undefined) {\r\n\t\t\t\tRVS.SLIDER[_.slideId].layers[_.uid].media.imageUrl = RVS.ENV.img_ph_url;\r\n\t\t\t\tRVS.SLIDER[_.slideId].layers[_.uid].size.originalWidth = 300;\r\n\t\t\t\tRVS.SLIDER[_.slideId].layers[_.uid].size.originalHeight = 200;\r\n\t\t\t\tRVS.SLIDER[_.slideId].layers[_.uid].size.aspectRatio =  RVS.F.cToResp({default:\"1\",val:300/200});\r\n\t\t\t\tRVS.SLIDER[_.slideId].layers[_.uid].media.loaded = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (_.silent!==true) setTimeout(function() {\tRVS.F.showWaitAMinute({fadeOut:500});},100);\r\n\t\t\tif (_.callback && useCallback) _.callback.call();\r\n\t\t};\r\n\t\timg.onabort = function() {\r\n\t\t\tif (_.silent!==true) setTimeout(function() {\tRVS.F.showWaitAMinute({fadeOut:500});},100);\r\n\t\t\tif (_.callback && useCallback) _.callback.call();\r\n\t\t};\r\n\r\n\t\timg.src = _.image;\r\n\t};\r\n\r\n\tRVS.F.createMiniPreloader = function(_) {\r\n\t\tjQuery('#font_minipreloader').remove();\r\n\t\t_.container.append(jQuery('<div id=\"font_minipreloader\" style=\"position:absolute; top:5px;right:5px; width:20px:height:20px\"><svg  height=\"20\" width=\"20\"><circle style=\"visibility:visible; color:#fff;\" class=\"circle-fill\" cx=\"10\" cy=\"10\" r=\"8\" stroke=\"white\" stroke-width=\"3\" fill=\"none\" /></svg>'));\r\n\t\tRVS.S.miniPreloaderTL = tpGS.gsap.timeline({repeat:-1,delay:0.3});\r\n\t\tRVS.S.miniPreloaderTL.add(tpGS.gsap.fromTo('.circle-fill', 0.7,{drawSVG:'0%'},{drawSVG: '80%', ease:\"none\", force3D:true}),0);\r\n\t\tRVS.S.miniPreloaderTL.add(tpGS.gsap.to('.circle-fill', 0.7,{drawSVG:'0%', ease:\"none\"}),1);\r\n\t\tRVS.S.miniPreloaderTL.add(tpGS.gsap.to('.circle-fill',0.7,{rotation:360,ease:\"none\",transformOrigin:\"50% 50%\"}),0);\r\n\t\tRVS.S.miniPreloaderTL.add(tpGS.gsap.to('.circle-fill',0.7,{rotation:0,ease:\"none\",transformOrigin:\"50% 50%\"}),0.7);\r\n\r\n\t};\r\n\tRVS.F.miniPreloaderOut = function(dontkill) {\r\n\t\tRVS.S.miniPreloaderTL.reverse();\r\n\t\ttpGS.gsap.to('#font_minipreloader', 1,{scale:0, transformOrigin:\"50% 50%\",ease:\"power3.inOut\", overwrite:\"all\", force3D:true,delay:0.5,onComplete:dontkill ? function() {\r\n\t\t\tjQuery('#font_minipreloader').remove();\r\n\t\t} : function() {}});\r\n\r\n\t};\r\n\r\n\tRVS.F.miniPreloaderKill = function() {\r\n\t\tsetTimeout(function() {\r\n\t\t\tjQuery('#font_minipreloader').remove();\r\n\t\t},2000);\r\n\t};\r\n\r\n\tRVS.F.checkVimeoID = function(_) {\r\n\t\tRVS.F.createMiniPreloader({container:jQuery('#video_id_wrap')});\r\n\t\tjQuery('#hidden_video_container').remove();\r\n\t\tjQuery(document.body).append('<div id=\"hidden_video_container\"></div>');\r\n\t\tvimeoPlayer = new Vimeo.Player(\"hidden_video_container\",_);\r\n\t\tvideoPlayerTimer = setTimeout(function() {\r\n\t\t\tjQuery('#layer_youtubevimeo_id').addClass(\"badvalue\");\r\n\t\t\tRVS.F.miniPreloaderOut();\r\n\t\t},3000);\r\n\t\tvimeoPlayer.ready().then(function() {\r\n\t\t\tjQuery('#layer_youtubevimeo_id').removeClass(\"badvalue\");\r\n\t\t\tRVS.F.miniPreloaderOut();\r\n\t\t\tclearTimeout(videoPlayerTimer);\r\n\t\t}).catch(function(e) {\r\n\t\t\tjQuery('#layer_youtubevimeo_id').addClass(\"badvalue\");\r\n\t\t\tRVS.F.miniPreloaderOut();\r\n\t\t\tclearTimeout(videoPlayerTimer);\r\n\t\t});\r\n\r\n\r\n\t};\r\n\tRVS.F.checkYouTubeID = function(_) {\r\n\t\tRVS.F.createMiniPreloader({container:jQuery('#video_id_wrap')});\r\n\t\tjQuery('#hidden_video_container').remove();\r\n\t\tjQuery(document.body).append('<div id=\"hidden_video_container\"></div>');\r\n\t\tvideoPlayerTimer = setTimeout(function() {\r\n\t\t\tjQuery('#layer_youtubevimeo_id').addClass(\"badvalue\");\r\n\t\t\tRVS.F.miniPreloaderOut();\r\n\t\t},3000);\r\n\t\twindow._youtubeplayer_ = new YT.Player('hidden_video_container',{\r\n\t\t\tvideoId:_.id,\r\n\t\t\tevents:{\r\n\t\t\t\t'onReady':function() {jQuery('#layer_youtubevimeo_id').removeClass(\"badvalue\");RVS.F.miniPreloaderOut();clearTimeout(videoPlayerTimer);},\r\n\t\t\t\t'onError':function() { console.log(\"ERROR\");jQuery('#layer_youtubevimeo_id').addClass(\"badvalue\");RVS.F.miniPreloaderOut();clearTimeout(videoPlayerTimer);}\r\n\t\t\t}});\r\n\r\n\t};\r\n\r\n\t/**********************************\r\n\t\t-\tMOUSE INFO MANAGEMET\t-\r\n\t********************************/\r\n\r\n\tRVS.F.showMouseInfo = function(obj) {\r\n\t\tif (RVS.C.mouseInfo===undefined) {\r\n\t\t\tRVS.C.mouseInfo = jQuery('#mouseInfoBox');\r\n\t\t\tRVS.C.mouseInfo.appendTo(jQuery(document.body));\r\n\t\t}\r\n\t\tif (obj.html!==undefined) RVS.C.mouseInfo[0].innerHTML = obj.html;\r\n\t\telse\r\n\t\tif (obj.text!==undefined) RVS.C.mouseInfo[0].innerHTML = obj.text;\r\n\t\tmouseInfoBoxOn = true;\r\n\t\tRVS.C.mouseInfo[0].className=obj.classes || '';\r\n\t};\r\n\r\n\tRVS.F.hideMouseInfo = function() {\r\n\t\tmouseInfoBoxOn = false;\r\n\t\tif (RVS.C.mouseInfo !== undefined)\r\n\t\t\ttpGS.gsap.set(RVS.C.mouseInfo,{display:\"none\"});\r\n\t};\r\n\r\n\r\n\r\n\t/****************************\r\n\t\t-\tUSEFULL THINGS  -\r\n\t*****************************/\r\n\r\n\tRVS.F.os = function() {\r\n\t\t    var OSName=\"Unknown OS\";\r\n\t\t\tif (navigator.appVersion.indexOf(\"Win\")!=-1) OSName=\"Windows\";\r\n\t\t\telse if (navigator.appVersion.indexOf(\"Mac\")!=-1) OSName=\"MacOS\";\r\n\t\t\telse if (navigator.appVersion.indexOf(\"X11\")!=-1) OSName=\"UNIX\";\r\n\t\t\telse if (navigator.appVersion.indexOf(\"Linux\")!=-1) OSName=\"Linux\";\r\n\t\t\tRVS.S.OSName = OSName;\r\n\t\t\treturn OSName;\r\n\t};\r\n\r\n\tRVS.F.setEditorUrl = function(id) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\twindow.lastUrlState = window.location.href;\r\n\t\t\twindow.history.pushState({}, null, window.location.origin+window.location.pathname+\"?id=\"+id);\r\n\t\t\tRVS.WIN.on('popstate',function(e) {\r\n\t\t\t\twindow.location.href = window.lastUrlState;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.getEditorUrl = function() {\r\n        var orig = window.location.href,id;\r\n        if (window.location.href.indexOf('alias=')>=0) return RVS.SLIDER.slideIDs[0];\r\n        if (window.location.href.indexOf('&id=')>=0) {\r\n            id = window.location.href.split(\"&id=\");\r\n        }\r\n        else\r\n        if (window.location.href.indexOf('?id=')>=0) {\r\n            id = window.location.href.split(\"?id=\");\r\n        }\r\n        else\r\n            id = window.location.href.split(\"id=\");\r\n        id = Array.isArray(id) ? id[1] : RVS.SLIDER.slideIDs[0];\r\n        id = RVS.F.isNumeric(id) ? id : id.split(\"&\")[0];\r\n        id = RVS.F.isNumeric(id) ? id : id.split(\"#\")[0];\r\n        return id;\r\n\t};\r\n\r\n\tRVS.F.backToOverview = function() {\r\n\t\twindow.location.href = overviewUrl;\r\n\t};\r\n\r\n\tRVS.F.getProportionalSizes = function(_) {\r\n\t\t_.image.width = parseInt((_.image.width==\"100%\"  || _.image.width==\"auto\" ? _.viewPort.width : _.image.width),0);\r\n\t\t_.image.height = parseInt((_.image.height==\"100%\" || _.image.height==\"auto\" ? _.viewPort.height : _.image.height),0);\r\n\t\t_.viewPort.width = parseInt((_.viewPort.width==\"100%\" || _.viewPort.width==\"auto\" ? _.image.width : _.viewPort.width),0);\r\n\t\t_.viewPort.height = parseInt((_.viewPort.height==\"100%\" || _.viewPort.height==\"auto\" ? _.image.height : _.viewPort.height),0);\r\n\r\n\t\tvar iAR = _.image.width / _.image.height,\r\n\t\t\tvAR = _.viewPort.width / _.viewPort.height,\r\n\t\t\tret = {width:_.image.width, height:_.image.height};\r\n\r\n\t\tswitch(_.type) {\r\n\t\t\tcase \"fit\":\r\n\t\t\t\tif (iAR > vAR) {\r\n\t\t\t\t\tret.width = _.viewPort.width;\r\n\t\t\t\t\tret.height = _.viewPort.width / iAR;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tret.width = _.viewPort.height * iAR;\r\n\t\t\t\t\tret.height = _.viewPort.height;\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"cover-proportional\":\r\n\t\t\t\tif (iAR <= vAR) {\r\n\t\t\t\t\tret.width = _.viewPort.width;\r\n\t\t\t\t\tret.height = _.viewPort.width / iAR;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tret.width = _.viewPort.height * iAR;\r\n\t\t\t\t\tret.height = _.viewPort.height;\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"fullwidth\":\r\n\r\n\t\t\t\tret.width = _.viewPort.width;\r\n\t\t\t\tret.height = _.proportional ? ret.width / iAR : _.image.height;\r\n\t\t\tbreak;\r\n\t\t\tcase \"fullheight\":\r\n\t\t\t\tret.height = _.viewPort.height;\r\n\t\t\t\tret.width = _.proportional ? ret.height / iAR : _.image.width;\r\n\t\t\tbreak;\r\n\t\t\tcase \"cover\":\r\n\t\t\t\tret.width = _.viewPort.width;\r\n\t\t\t\tret.height = _.viewPort.height;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n\r\n\tRVS.F.convPercVals = function(x) {\r\n\t\tif (!RVS.F.isNumeric(x) && x!==false && x!==undefined && x!==true && x.match(/%]/g))\r\n\t\t\tx = x.split(\"[\")[1].split(\"]\")[0];\r\n\t\treturn x;\r\n\t};\r\n\r\n\r\n\tRVS.F.convertHexToRGB = function(hex) {\r\n\t\thex = parseInt(((hex.indexOf('#') > -1) ? hex.substring(1) : hex), 16);\r\n\t\treturn [hex >> 16,(hex & 0x00FF00) >> 8,(hex & 0x0000FF)];\r\n\t};\r\n\r\n\tRVS.F.sanitize_input_ws = function(raw){\r\n\t\treturn raw.replace(/[^-0-9a-zA-Z_ -]/g,'');\r\n\t};\r\n\r\n\tRVS.F.sanitize_columns = function(raw) {\r\n\t\treturn raw.replace(/[^-0-9+/]/g,'');\r\n\t};\r\n\r\n\tRVS.F.sanitize_input = function(raw){\r\n\t\tif (raw===null) return;\r\n\t\treturn raw.replace(/ /g, '-').replace(/[^-0-9a-zA-Z_-]/g,'');\r\n\t};\r\n\r\n\tRVS.F.sanitize_alias = function(raw){\r\n\t\tif (raw===null) return;\r\n\t\traw = raw.replace(/ +(?= )/g,'');\r\n\t\treturn raw.replace(/ /g, '-').replace(/[^-0-9a-zA-Z_-]/g,'');\r\n\t};\r\n\r\n\r\n\tRVS.F.fontNameConvert = function(raw) {\r\n\t\treturn raw.replace(/\"/g, '');\r\n\t};\r\n\r\n\r\n\tRVS.F.sanitize_input_lc = function(raw){\r\n\t\treturn raw.replace(/ /g, '-').replace(/[^-0-9a-z_-]/g,'');\r\n\t};\r\n\r\n\tRVS.F.parseIntPlus = function(a) {\r\n\t\tvar b = parseInt(a,0);\r\n\t\treturn RVS.F.isNumeric(b) ? b : a;\r\n\t};\r\n\r\n\tRVS.F.htmlToText = function(raw) {\r\n\t\treturn raw.replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n\t};\r\n\r\n\r\n\t// INSERT INTO RevMirror EDITOR TEXT AT CURSOR POSITION\r\n\tRVS.F.insertTextAtCursor = function(editor, text) {\r\n\t    var doc = editor.getDoc();\r\n\t    var cursor = doc.getCursor();\r\n\t    doc.replaceRange(text, cursor);\r\n\t};\r\n\r\n\t// GET THE DIRECTION OF THE CURRENT RESIZING EVENT\r\n\tRVS.F.getResizeDirection = function(d) {\r\n\t\treturn d.size.height < d.originalSize.height ? \"height\" :\r\n\t\td.size.height > d.originalSize.height ? \"height\" :\r\n\t\td.size.width < d.originalSize.width ? \"width\" :\r\n\t\td.size.width > d.originalSize.width ? \"width\" :\r\n\t\t\"none\";\r\n\t};\r\n\r\n\tRVS.F.whichBGPos = function(obj) {\r\n\t\tif (obj.position===\"custom\")\r\n\t\t\treturn obj.positionX+\"% \"+obj.positionY+\"%\";\r\n\t\telse\r\n\t\t\treturn obj.position;\r\n\t};\r\n\r\n\tRVS.F.matchArray = function(a,b) {\r\n\t\tif (!Array.isArray(a) || !Array.isArray(b)) return false;\r\n\t\tif (a.length!=b.length) return false;\r\n\t\tvar ret = true;\r\n\t\tfor (var i in a) {\r\n\t\t\tif(!a.hasOwnProperty(i)) continue;\r\n\t\t\tif (jQuery.inArray(a[i],b)===-1) {\r\n\t\t\t\tret = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (ret)\r\n\t\t\tfor (var i in b) {\r\n\t\t\t\tif(!b.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (jQuery.inArray(b[i],a)===-1) {\r\n\t\t\t\t\tret = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\treturn ret;\r\n\t};\r\n\r\n\tRVS.F.mergeArrays = function(a,b) {\r\n\t\tfor (var i in b) {\r\n\t\t\tif(!b.hasOwnProperty(i)) continue;\r\n\t\t\tif (jQuery.inArray(b[i],a)===-1) a.push(b[i]);\r\n\t\t}\r\n\t\treturn a;\r\n\t};\r\n\r\n\r\n\t//Make Array of Single Elements\r\n\tRVS.F.makeArray = function(a,len) {\r\n\t\tif (!Array.isArray(a)) {\r\n\t\t\tvar _ = [];\r\n\t\t\tfor (var i=0;i<len;i++) {\r\n\t\t\t\t_.push(a);\r\n\t\t\t}\r\n\t\t\ta = _;\r\n\t\t}\r\n\t\treturn a;\r\n\t};\r\n\r\n\t//Move Array Elements\r\n\tRVS.F.amove = function(arr, old_index, new_index) {\r\n\t\tif (!Array.isArray(arr)) arr = Object.values(arr);\r\n\t\tif (new_index >= arr.length) {\r\n\t        var k = new_index - arr.length + 1;\r\n\t        while (k--) {\r\n\t            arr.push(undefined);\r\n\t        }\r\n\t    }\r\n\t    arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\r\n\t    return arr;\r\n\t};\r\n\r\n\tRVS.F.rArray = function(a,removeItem) {\r\n\t\treturn jQuery.grep(a, function(value) {return value != removeItem;});\r\n\t};\r\n\tRVS.F._inArray = function(a,b){\r\n\t\tvar f = -1,\r\n\t\t\ti = 0;\r\n\t\twhile ( i < b.length && f===-1) {\r\n\t\t\tif (b[i]==a) f = i;\r\n\t\t\ti++;\r\n\t\t}\r\n\t\treturn f;\r\n\t};\r\n\r\n\tRVS.F.addT = function(a) {\r\n\t\tvar r = 0;\r\n\r\n\t\tfor (var i in a) {\r\n\t\t\tif(!a.hasOwnProperty(i)) continue;\r\n\t\t\tr = r + parseInt(a[i],0);\r\n\t\t}\r\n\t\treturn r;\r\n\t};\r\n\r\n\tRVS.F.isVaOrPx = function(a) {\r\n\t\tvar res = false;\r\n\t\tif (!RVS.F.isNumeric(a) && a.indexOf(\"px\")>=0)\r\n\t\t\tres = true;\r\n\t\telse\r\n\t\tif (RVS.F.isNumeric(a))\r\n\t\t\tres = true;\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.retWitSuf = function(a,suf) {\r\n\t\tif (!RVS.F.isNumeric(a) && a.indexOf(\"px\")>=0) return parseInt(a)+\"px\"\r\n\t\telse\r\n\t\tif (!RVS.F.isNumeric(a) && a.indexOf(\"%\")>=0) return parseInt(a)+\"%\"\r\n\t\telse\r\n\t\tif (!RVS.F.isNumeric(a) && RVS.F.isNumeric(parseInt(a,0))) return parseInt(a)+suf\r\n\t\telse\r\n\t\tif (RVS.F.isNumeric(a)) return a+suf;\r\n\t}\r\n\r\n\r\n\r\n\tRVS.F.firstCharUppercase = function(a) {\r\n\t\treturn a.substr(0,1).toUpperCase()+(a.substr(1).toLowerCase());\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tSET VALUE TO A OR B DEPENDING IF VALUE A EXISTS AND NOT UNDEFINED OR NULL\r\n\t*/\r\n\tRVS.F._d = function(a,b) {\r\n\t\tif (a===undefined || a===null)\r\n\t\t\treturn b;\r\n\t\telse\r\n\t\t\treturn a;\r\n\t};\r\n\r\n\tRVS.F._truefalse = function(v) {\r\n\t\tif (v===\"false\" || v===false || v===\"off\" || v===undefined || v===0 || v===-1)\r\n\t\t\tv=false;\r\n\t\telse\r\n\t\tif (v===\"true\" || v===true || v===\"on\")\r\n\t\t\tv=true;\r\n\t\treturn v;\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tCREATE A 4 LEVEL OBJECT STRUCTURE\r\n\t(DESKTOP, NOTEBOOK, TABLET, MOBILE) WITH DEFAULT OR PREDEFINED VALUES\r\n\tVALUE, EDITED (true/false), UNIT (PX, %, EM...)\r\n\t*/\r\n\tRVS.F.cToResp = function(attr) {\r\n\r\n\t\tattr = attr===undefined ? {default:0,unit:\"\"} : attr;\r\n\t\tvar newObj = {},\r\n\t\t\tv = attr.default===undefined ? 0 : attr.default,\r\n\t\t\tunit = attr.unit===undefined ? \"\" : attr.unit,\r\n\t\t\tpind,pxind;\r\n\r\n\t\tfor (var i in RVS.V.sizes) {\r\n\t\t\tif(!RVS.V.sizes.hasOwnProperty(i)) continue;\r\n\t\t\tvar s = RVS.V.sizes[i],\r\n\t\t\t\tsold = RVS.V.sizesold[i],\r\n\t\t\t\tv = Array.isArray(attr.val) ? attr.val : attr.val!==undefined && typeof attr.val!=='object' ? attr.val : (attr.val===undefined || typeof attr.val !=='object' || attr.val[sold]===undefined || attr.val[sold]===null) ? v : attr.val[sold];\r\n\r\n\r\n\t\t\tif (typeof v ===\"object\") {\r\n\r\n\t\t\t\tnewObj[s] =  RVS.F.safeExtend(true,{},{v:v,e:false});\r\n\t\t\t\tif (attr!==undefined && attr.val!==undefined && attr.val[sold]!==undefined) newObj[s].e = true;\r\n\t\t\t\tfor (var vi in v) {\r\n\t\t\t\t\tif(!v.hasOwnProperty(vi)) continue;\r\n\t\t\t\t\tnewObj[s].v[vi] = unit.length>0 ? v[vi]!==\"auto\" && v[vi]!==\"none\" ? parseFloat(v[vi])+unit : v[vi] : v[vi];\r\n                    if (unit==\"\") {\r\n                        pind = (\"\"+newObj[s].v[vi]).indexOf(\"%\"),\r\n                        pxind = (\"\"+newObj[s].v[vi]).indexOf(\"px\");\r\n                        if (pind>=0) newObj[s].v[vi] = parseInt(newObj[s].v[vi],0)+ \"%\";\r\n                        else\r\n                        if (pxind>=0) newObj[s].v[vi] = parseInt(newObj[s].v[vi],0) + \"px\";\r\n                    }\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnewObj[s] = RVS.F.safeExtend(true,{},{\tv:unit.length>0 ? v!==\"auto\" && v!==\"none\"  && v!==\"\" ? parseFloat(v)+unit : v : v, e:false, u:unit});\r\n\t\t\t\tif (attr!==undefined && attr.val!==undefined && attr.val[sold]!==undefined) newObj[s].e = true;\r\n\t\t\t\tif (newObj[s].v===\"\" && attr.default!==\"\") newObj[s].v = attr.default;\r\n                if (unit==\"\" && newObj[s].v!==false && newObj[s].v!==true) {\r\n                    pind = (\"\"+newObj[s].v).indexOf(\"%\");\r\n                    pxind = (\"\"+newObj[s].v).indexOf(\"px\");\r\n                    if (pind>=0) newObj[s].v = parseInt(newObj[s].v,0)+\"%\";\r\n                    else\r\n                    if (pxind>=0) newObj[s].v = parseInt(newObj[s].v,0)+\"px\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newObj;\r\n\t};\r\n\r\n\r\n\tRVS.F.cToVandU = function(_) {\r\n\t\tvar newObj = {v:_.default, u:_.u};\r\n\t\tnewObj.v = _.val===undefined ? newObj.v : _.val;\r\n\r\n\t\tvar i = 0;\r\n\t\tif (typeof newObj.v===\"object\") {\r\n\t\t\t// var i=0;\r\n\t\t\tfor (var vi in newObj.v) {\r\n\t\t\t\tif(!newObj.v.hasOwnProperty(vi)) continue;\r\n\t\t\t\tif (!RVS.F.isNumeric(newObj.v[vi])) {\r\n\t\t\t\t\tnewObj.u = i==0 && newObj.v[vi].indexOf(\"px\")>=0 ? \"px\" : i==0 && newObj.v[vi].indexOf(\"%\")>=0 ? \"%\" : newObj.u;\r\n\t\t\t\t\tnewObj.v[vi] = parseInt(newObj.v[vi],0) + newObj.u;\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!RVS.F.isNumeric(newObj.v)) {\r\n\t\t\t\t\tnewObj.u = i==0 && newObj.v.indexOf(\"px\")>=0 ? \"px\" : i==0 && newObj.v.indexOf(\"%\")>=0 ? \"%\" : newObj.u;\r\n\t\t\t\t\tnewObj.v = parseInt(newObj.v,0) + newObj.u;\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\treturn newObj;\r\n\t};\r\n\r\n\tRVS.F.exportLayerCombo = function(_) {\r\n\t\tif (downloadExportLayerCombo===undefined) {\r\n\t\t\tjQuery(document.body).append('<a style=\"display:none\" id=\"downloadExportLayerCombo\" href=\"\" download></a>');\r\n\t\t\tdownloadExportLayerCombo = jQuery('#downloadExportLayerCombo');\r\n\t\t}\r\n\t\tvar videoID,\r\n\t\t\tthumbID = RVS.SLIDER[RVS.S.slideId].slide.thumb.customAdminThumbSrcId,\r\n\t\t\tlayers = {};\r\n\r\n\t\tfor (var i in RVS.L) {\r\n\r\n\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\r\n\t\t\t//GET VIDEO ID\r\n\t\t\tif (RVS.L[i].type===\"video\" /*&& RVS.L[i].alias.toLowerCase()===\"videothumb\"*/) videoID = RVS.L[i].media.id;\r\n\t\t\tif (RVS.L[i].type!==\"video\" /*RVS.L[i].alias.toLowerCase()!==\"videothumb\"*/) layers[i] = RVS.F.safeExtend(true,{},RVS.L[i]);\r\n\t\t}\r\n\r\n\t\tdelete layers.bottom;\r\n\t\tdelete layers.top;\r\n\t\tdelete layers.middle;\r\n\r\n\t\t//export_layer_group\r\n\t\tlayers = JSON.stringify(RVS.F.simplifyAllLayer(layers));\r\n\t\t//layers = JSON.stringify(layers);\r\n\r\n\r\n\r\n\t\tRVS.F.ajaxRequest('export_layer_group', {videoid:videoID, thumbid:thumbID, layers:layers, title:_.title}, function(response){\r\n\t\t\tdownloadExportLayerCombo[0].href = response.url;\r\n\t\t\tdownloadExportLayerCombo[0].click();\r\n\t\t},true,true);\r\n\t\treturn \"Exporting Layer Combo File\";\r\n\t};\r\n\r\n\r\n\r\n\t//COMPRESSING THE RAW OBJECT STRUCTURE TO REDUCE FILE SIZE\r\n\tRVS.F.simplifyObject = function(emp,o) {\r\n\t \tfor (var key in o) {\r\n\r\n\t\t\tif(!o.hasOwnProperty(key)) continue;\r\n\r\n\t \t\tif (typeof o[key]!==\"object\" || Array.isArray(o[key]))  {\r\n\t \t\t\tif (emp[key] == o[key] && key!==\"text\" && key!==\"endWithSlide\") {\r\n\t \t\t\t\tdelete o[key];\r\n\t \t\t\t}\r\n\t \t\t} else {\r\n\r\n\t\t \t\tif (emp[key]!==undefined && key!==\"margin\" && key!==\"padding\") {\r\n\t\t \t\t\to[key] = RVS.F.safeExtend(true,{}, RVS.F.simplifyObject(emp[key],o[key]));\r\n\t\t \t\t}\r\n\r\n\t\t \t\t// CHECK IF OBJECT IS EMPTY ?\r\n\t \t\t\tif (jQuery.isEmptyObject(o[key])) delete o[key];\r\n\t \t\t}\r\n\t \t}\r\n\t \treturn o;\r\n\t};\r\n\r\n\tRVS.F.removeEmptyChilds = function(o) {\r\n\t\tvar _ = {};\r\n\t\tfor (var key in o) {\r\n\t\t\tif(!o.hasOwnProperty(key)) continue;\r\n\t\t\tif (typeof o[key]!==\"object\")\r\n\t\t\t\t_[key] = o[key];\r\n\t\t\tif (!jQuery.isEmptyObject(o[key])) _[key] = RVS.F.safeExtend(true,{},RVS.F.removeEmptyChilds(o[key]));\r\n\t\t}\r\n\t\treturn _;\r\n\t};\r\n\r\n\tRVS.F.convertFraction = function(st) {\r\n\r\n\t\tvar exp,\r\n\t\t\ttempExp;\r\n\r\n\t\tif(st.search('/') !== -1) {\r\n\t\t\ttempExp = st.split('/');\r\n\t\t\tif(tempExp.length === 2) exp = parseInt(tempExp[0], 10) / parseInt(tempExp[1], 10);\r\n\t\t}\r\n\r\n\t\treturn exp || 1 / 3;\r\n\r\n\t};\r\n\r\n\tRVS.F.openPreivew = function(_) {\r\n\t\tRVS.preview = RVS.preview===undefined ? {selectedSize:\"d\",inited:false, c: jQuery('#rbm_preview')} : RVS.preview;\r\n\t\tjQuery('.page-wrapper').addClass(\"inRS_RSpreview\");\r\n\t\tdocument.getElementById('rbm_preview_moduletitle').innerHTML = _.title;\r\n\t\tdocument.getElementById('copy_shortcode_from_preview').value = '{{block class=\"Nwdthemes\\\\Revslider\\\\Block\\\\Revslider\" alias=\"'+_.alias+'\"}}';\r\n\t\tRVS.preview.open = true;\r\n\t\tif (!RVS.preview.inited) {\r\n\t\t\tRVS.preview.inited = true;\r\n\t\t\tRVS.DOC.on('click','.rbm_prev_size_sel',function() {\r\n\t\t\t\tjQuery('.rbm_prev_size_sel.selected').removeClass(\"selected\");\r\n\t\t\t\tthis.className +=\" selected\";\r\n\t\t\t\tRVS.preview.selectedSize = this.dataset.ref;\r\n\t\t\t\tRVS.F.updatePreviewSize();\r\n\t\t\t});\r\n\t\t\tRVS.DOC.on('click','#rbm_preview .rbm_close',function() {\r\n\t\t\t\tjQuery('.page-wrapper').removeClass(\"inRS_RSpreview\");\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t\tRVS.preview.open = false;\r\n\t\t\t\tdocument.getElementById('rbm_preview_live').innerHTML = \"\";\r\n\t\t\t});\r\n\t\t\tRVS.F.initCopyClipboard('.copypreviewshortcode');\r\n\t\t\tRVS.DOC.on('windowresized',function() {\r\n\t\t\t\tif (RVS.preview.open)  RVS.F.updatePreviewSize();\r\n\t\t\t});\r\n\t\t}\r\n\t\tRVS.preview.iframe = document.createElement('iframe');\r\n\t\tdocument.getElementById('rbm_preview_live').appendChild(RVS.preview.iframe);\r\n\r\n\t\tRVS.F.RSDialog.create({modalid:'rbm_preview', bgopacity:0.85});\r\n\t\tvar pars = {id:_.id}\r\n\t\tif (_.mode===\"editor\") pars.data = RVS.F.getAllSliderDatas();\r\n\r\n\r\n\t\tRVS.F.ajaxRequest('preview_slider',pars,function(response) {\r\n            if (response.success) {\r\n\r\n                let regex = /<script(?:.*)\\/merged\\/(?:.*)<\\/script>/gm;\r\n                let html = RVS.F.b64DecodeUnicode(response.html);\r\n                let merged = new Array();\r\n                let match;\r\n                while ((match = regex.exec(jQuery('head').html())) !== null) {\r\n                    merged.push(match[0]);\r\n                }\r\n                if (merged.length) {\r\n                    regex = /<!-- scripts -->(?:.*)<!-- \\/scripts -->/gms;\r\n                    if ((match = regex.exec(html)) !== null) {\r\n                        html = html.replace(match[0], merged.join(' '));\r\n                    }\r\n                }\r\n\r\n                RVS.preview.layouttype = response.layouttype;\r\n                RVS.preview.sizes = response.size;\r\n                RVS.preview.iframe.contentWindow.document.open();\r\n                RVS.preview.iframe.contentWindow.document.write(html);\r\n\r\n                // Workaround for another config path in ancient version\r\n                if (! requirejs.s.contexts._.config.paths.length) {\r\n                    RVS.preview.iframe.contentWindow.document.write('<script type=\"text/javascript\" src=\"' + response.requireConfigLegacyUrl + '\"></script>');\r\n                }\r\n\r\n                RVS.preview.iframe.contentWindow.document.close();\r\n                RVS.F.updatePreviewSize();\r\n\r\n            } else {\r\n                RVS.F.showErrorMessage(response.message);\r\n                jQuery('#rbm_preview .rbm_close').trigger('click');\r\n            }\r\n        },undefined,true);\r\n\r\n\t}\r\n\r\n\tfunction getLastBiggerSliderDimension(_,_s) {\r\n\t\tvar found = false,\r\n\t\t\tr = {w:parseInt(_.width.d,0), h:_.height.d};\r\n\t\tfor (var s in RVS.V.sizes) {\r\n\t\t\tif(!RVS.V.sizes.hasOwnProperty(s) || found===true) continue;\r\n\t\t\tif (_.custom[RVS.V.sizes[s]]) {\r\n\t\t\t\tr.w = parseInt(_.width[RVS.V.sizes[s]],0);\r\n\t\t\t\tr.h = parseInt(_.height[RVS.V.sizes[s]],0);\r\n\t\t\t}\r\n\t\t\tif (RVS.V.sizes[s] === _s) found = true;\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\tRVS.F.updatePreviewSize = function() {\r\n\t\tif (RVS.preview===undefined || RVS.preview.sizes===undefined || RVS.preview.sizes.width==undefined || RVS.preview.sizes.height==undefined) return;\r\n\t\tvar ld = getLastBiggerSliderDimension(RVS.preview.sizes,RVS.preview.selectedSize),\r\n\t\t\tr = { w: parseInt(RVS.preview.sizes.width[RVS.preview.selectedSize],0), h:parseInt(RVS.preview.sizes.height[RVS.preview.selectedSize],0)};\r\n\t\tif (RVS.preview.sizes.custom[RVS.preview.selectedSize]===false) {\r\n\t\t\t\tr.w = Math.min(ld.w,RVS.ENV.grid_sizes[RVS.preview.selectedSize]);\r\n\t\t\t\tr.h = (r.w / ld.w) * ld.h;\r\n\t\t}\r\n\t\tr.w = r.w-1;\r\n\t\tvar w = Math.min(r.w,RVS.S.winw),\r\n\t\t\th = Math.min((r.h+50),RVS.S.winh),\r\n\t\t\tfullwidth = RVS.preview.layouttype===\"fullscreen\" || RVS.preview.layouttype===\"fullwidth\",\r\n\t\t\tfullheight = RVS.preview.layouttype===\"fullscreen\";\r\n\t\ttpGS.gsap.set(RVS.preview.c,{width:(RVS.preview.selectedSize===\"d\" && fullwidth ? \"100%\" : Math.max(690,w)), height:RVS.preview.selectedSize===\"d\" && fullheight ? \"100%\" : h});\r\n\t\ttpGS.gsap.set(RVS.preview.iframe,{maxHeight:\"100%\",maxWidth:\"100%\",margin:\"auto\",position:\"relative\",left:\"50%\",x:\"-50%\"});\r\n\r\n\t\tRVS.preview.iframe.width =  fullwidth ? RVS.preview.selectedSize===\"m\" ? Math.min(r.w,w) : \"100%\" : Math.min(r.w,w);\r\n\t\tRVS.preview.iframe.height = fullheight && RVS.preview.selectedSize===\"d\" ? RVS.S.winh-50 : r.h;\r\n\t\tRVS.F.RSDialog.center();\r\n\t}\r\n\r\n    RVS.F.safeExtend = function() {\r\n        if (arguments.length == 3 && arguments[0] === true) {\r\n            return RVS.F.cleanProperties(jQuery.extend.apply(this, arguments), 0);\r\n        }\r\n        return jQuery.extend.apply(this, arguments);\r\n    };\r\n\r\n    RVS.F.cleanProperties = function(obj, depth) {\r\n        for (var key in obj) {\r\n            if ( ! obj.hasOwnProperty(key)\r\n                || typeof obj[key] == 'function' && ['all', 'any', 'clear', 'clone', 'collect', 'compact', 'detect', 'each', 'eachSlice', 'findAll', 'first', 'flatten', 'grep', 'inGroupsOf', 'include', 'inject', 'inspect', 'intersect', 'invoke', 'last', 'member', 'partition', 'pluck', 'reject', 'select', 'size', 'sortBy', 'toArray', 'uniq', 'without', 'zip', '_each', '_reverse', 'min', 'max'].indexOf(key) != -1) {\r\n                delete obj[key];\r\n            } else if ((typeof obj[key] == 'object' || typeof obj[key] == 'Array') && ['parent', '_prev', '_next', 'target'].indexOf(key) == -1 && depth < 10) {\r\n                obj[key] = RVS.F.cleanProperties(obj[key], depth + 1);\r\n            }\r\n        }\r\n        return obj;\r\n    };\r\n\r\n\tRVS.F.b64DecodeUnicode = function(str) {\r\n\t\treturn decodeURIComponent(atob(str).split('').map(function(c) {\r\n\t\t\treturn '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n\t\t}).join(''));\r\n\t}\r\n\r\n})();\r\n","Nwdthemes_Revslider/admin/assets/js/modules/layerlist.js":"/*!\r\n * REVOLUTION 6.0.0 EDITOR LAYERLIST JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\n(function() {\r\n\r\n\tvar listElementPosArray = [],\r\n\t\tlastTLColHeight,\r\n\t\tpreLoadFontSlide = {};\r\n\r\n\t/*\r\n\tINITIALISE THE BASIC LISTENERS, INPUT MANAGEMENTS ETC\r\n\t*/\r\n\tRVS.F.initLayerListBuilder = function() {\r\n        RVS.C.rb = RVS.C.rb===undefined ? jQuery('#rev_builder') : RVS.C.rb;\r\n        RVS.C.layerListWrap = RVS.C.layerListWrap===undefined ? jQuery('#tlLayerListWrap') : RVS.C.layerListWrap;\r\n        initLocalInputBoxes();\r\n\t\tinitLocalListeners();\r\n\t\tsetUpBasicScenes();\r\n\t};\r\n\r\n\tRVS.F.updateZoneZIndexes = function() {\r\n\t\ttpGS.gsap.set( RVS.C.rZone.top,{zIndex:RVS.L.top.position.zIndex});\r\n\t\ttpGS.gsap.set( RVS.C.rZone.bottom,{zIndex:RVS.L.bottom.position.zIndex});\r\n\t\ttpGS.gsap.set( RVS.C.rZone.middle,{zIndex:RVS.L.middle.position.zIndex});\r\n\t};\r\n\r\n\tfunction getHighestRowIndexinZone(zone) {\r\n\t\tvar ret = 0;\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif (!RVS.L.hasOwnProperty((i))) continue;\r\n\t\t\tif (RVS.L[i].type===\"row\") ret = ret<RVS.L[i].position.zIndex ? RVS.L[i].position.zIndex : ret;\r\n\t\t}\r\n\t\treturn parseInt(ret);\r\n\t}\r\n\t/*\r\n\tBUILD LAYERS ONE GO IF SLIDE / LAYER LAYOUT SELECTED\r\n\t*/\r\n\tRVS.F.buildLayerLists = function(obj) {\r\n\r\n\t\t//SAVE LAYERS INTO A QUICK REFERENCABLE OBJECT\r\n\t\tRVS.L = RVS.SLIDER[RVS.S.slideId].layers;\r\n\r\n\r\n\t\t// PRELOAD FONT LAYERS FOR THE CURRENT SLIDE\r\n\t\tif (preLoadFontSlide[RVS.S.slideId]!==true)  {\r\n\t\t\tpreLoadFontSlide[RVS.S.slideId] = true;\r\n\t\t\tRVS.F.preloadUsedFonts();\r\n\t\t}\r\n\t\tvar zII = 0;\r\n\t\t//Update Column Breaks in Rows (FallBack)\r\n\t\tRVS.F.updateColumnBreaksChildren();\r\n\t\tif (RVS.L.top===undefined) {\r\n\t\t\tzII = getHighestRowIndexinZone();\r\n\t\t\tRVS.L.top =  {uid:\"top\", group:{puid:-1, groupOrder:zII}, type:\"zone\", alias:\"TOP ROWS\", position:{zIndex:zII}};\r\n\t\t\tRVS.L.middle = {uid:\"middle\", group:{puid:-1, groupOrder:zII}, type:\"zone\", alias:\"MID ROWS\",  position:{zIndex:zII}};\r\n\t\t\tRVS.L.bottom =  {uid:\"bottom\", group:{puid:-1, groupOrder:zII}, type:\"zone\", alias:\"BOTTOM ROWS\",  position:{zIndex:zII}};\r\n\t\t}\r\n\r\n\t\tRVS.F.updateZoneZIndexes();\r\n\r\n\t\tRVS.F.getLlength();\r\n\t\tRVS.selLayers = [];\r\n\r\n\t\tRVS.S.llcache[RVS.S.slideId] = RVS.S.llcache[RVS.S.slideId]===undefined ? {} : RVS.S.llcache[RVS.S.slideId];\r\n\t\tobj = obj===undefined ? {} : obj;\r\n\r\n\r\n\t\tif (obj.force || RVS.S.llcache[RVS.S.slideId].tlLayerList === undefined)\r\n\t\t\tRVS.F.reDrawListElements();\r\n\t\telse\r\n\t\tif (RVS.S.llcache[RVS.S.slideId].tlLayerList!==undefined) {\r\n\t\t\tRVS.C.layerListWrap[0].appendChild(RVS.S.llcache[RVS.S.slideId].tlLayerList);\r\n\t\t}\r\n\r\n\t\tRVS.F.layerListScrollable(\"update\");\r\n\t\tif (!obj.ignoreRebuildHTML) RVS.F.buildHTMLLayers({ignoreDrawLayers:obj.ignoreDrawLayers});\r\n\t\tif (!obj.ignoreSelectLayers) RVS.F.selectLayers();\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tGET THE LENGTH OF THE CURRENT LAYER LIST\r\n\t*/\r\n\tRVS.F.getLlength = function() {\r\n\t\tRVS.V.Llength = 0;\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\tRVS.V.Llength++;\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tCLEAR THE CACHED, DISPATCHED LAYER LISTS CONTAINERS\r\n\t*/\r\n\tRVS.F.clearCache = function(obj) {\r\n\t\tif (obj!=undefined && obj.slides!==undefined)\r\n\t\t\tfor (var i in obj.slides) {\r\n\t\t\t\tif(!obj.slides.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (cache!==undefined && RVS.S.llcache[obj.slides[i]]!==undefined && RVS.S.llcache[obj.slides[i]].tlLayerList!==undefined) {\r\n\t\t\t\t\t//RVS.S.llcache[obj.slides[i]].tlLayerList.detach();\r\n\t\t\t\t\tRVS.S.llcache[obj.slides[i]].tlLayerList.remove();\r\n\t\t\t\t\tRVS.S.llcache[obj.slides[i]] = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t};\r\n\r\n\r\n\t/*\r\n\tGET LAYER KIDS ID'S\r\n\t*/\r\n\tRVS.F.getLayerChildren = function(_) {\r\n\t\tvar kids = _.kids===undefined ? {} : _.kids;\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.L[li].group.puid==_.layerid || ((_.layerid==\"-1\" || _.layerid==-1) && RVS.L[li].type==\"row\")) {\r\n\t\t\t\tkids[RVS.L[li].uid] = {\r\n\t\t\t\t\t\ttype:RVS.L[li].type,\r\n\t\t\t\t\t\tframes:{},\r\n\t\t\t\t};\r\n\t\t\t\tif (!_.ignoreframes)\r\n\t\t\t\t\tfor (var fi in RVS.L[li].timeline.frames) {\r\n\t\t\t\t\t\tif(!RVS.L[li].timeline.frames.hasOwnProperty(fi)) continue;\r\n\t\t\t\t\t\tkids[RVS.L[li].uid].frames[fi] = RVS.L[li].timeline.frames[fi].timeline.start;\r\n\t\t\t\t\t}\r\n\t\t\t\tif (!_.onelevel && jQuery.inArray(RVS.L[li].type,[\"column\",\"row\",\"group\"])>=0) kids = RVS.F.getLayerChildren({layerid:RVS.L[li].uid, kids:kids,ignoreframes:_.ignoreframes,onelevel:_.onelevel});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_.removeZones) {\r\n\t\t\tdelete kids.top;\r\n\t\t\tdelete kids.bottom;\r\n\t\t\tdelete kids.middle;\r\n\t\t}\r\n\t\treturn kids;\r\n\t};\r\n\r\n\r\n\tRVS.F.hasChildren = function(gid) {\r\n\t\tvar hasChild = false;\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li) || hasChild) continue;\r\n\t\t\thasChild = RVS.L[li].group.puid==gid;\r\n\t\t}\r\n\t\treturn hasChild;\r\n\t}\r\n\r\n\r\n\t/*\r\n\tCOUNT THE VISIBLE (UNCOLLAPSED) ELEMENTS\r\n\t*/\r\n\tRVS.F.getVisibleLayersInList = function() {\r\n\t\tvar count = 0;\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.L[li].group.puid===-1) count++;\r\n\t\t\telse\r\n\t\t\tif (RVS.L[RVS.L[li].group.puid].group.puid===-1 && !jQuery('#tllayerlist_element_'+RVS.S.slideId+'_'+RVS.L[li].group.puid).hasClass(\"collapsed\")) count++;\r\n\t\t\telse\r\n\t\t\tif (RVS.L[RVS.L[li].group.puid].group.puid!==-1 && !jQuery('#tllayerlist_element_'+RVS.S.slideId+'_'+RVS.L[RVS.L[li].group.puid].group.puid).hasClass(\"collapsed\")) count++;\r\n\t\t}\r\n\t\treturn count;\r\n\t};\r\n\r\n\t/*\r\n\tEXPAND - COLLAPS TIMELINE (TOGGLE)\r\n\t*/\r\n\tRVS.F.expandCollapseTimeLine = function(updateHeight,direction,noanim,nocallback) {\r\n\r\n\t\tif (window.timeline_in_resize || RVS.S.ReadyToShowAll!==\"done\") return; // WAIT UNTIL EVERYTHING INITIALISED\r\n\r\n\t\tvar h, hpast;\r\n\t\th=hpast=RVS.TL.TL.height();\r\n\r\n\t\tif (updateHeight) {\r\n\t\t\tif (h<=76 && direction!==\"close\" || direction===\"open\")\r\n\t\t\t\th = RVS.V.timeline_height===\"auto\" ? Math.max(RVS.V.timeline_minOpenHeight,(window.innerHeight - RVS.S.ulDIM.height - 65)) :  RVS.V.timeline_height;\r\n\t\t\telse\r\n\t\t\t\th = 76;\r\n\r\n\t\t\tif (h!==hpast)\r\n\t\t\t\tif (noanim) {\r\n\t\t\t\t\tRVS.TL.TL[0].style.height = h+\"px\";\r\n\t\t\t\t\tRVS.ENV.globVerOffset = h;\r\n\t\t\t\t\tif (nocallback!==true) RVS.DOC.trigger('updatesliderlayout',\"layerlist.js-142\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttpGS.gsap.to(RVS.TL.TL,0.3,{height:h,ease:\"power3.out\", onUpdate:function() {\r\n\t\t\t\t\t\tRVS.ENV.globVerOffset = tpGS.gsap.getProperty(RVS.TL.TL[0],'height');\r\n\t\t\t\t\t\tRVS.DOC.trigger('updatesliderlayout',\"layerlist.js-142\");\r\n\t\t\t\t\t}});\r\n\t\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tRVS.ENV.globVerOffset = h;\r\n\r\n\t\t\tif (noanim) RVS.C.layerListWrap[0].style.height = (h-36)+\"px\";\r\n\t\t\telse\r\n\t\t\t\ttpGS.gsap.to(RVS.C.layerListWrap,0.15,{height:(h-36), ease:\"power3.out\",onComplete:function() {\r\n\t\t\t\t\tRVS.DOC.trigger('updateScrollBars');\r\n\t\t\t\t}});\r\n\t\t}\r\n\t\tRVS.C.theEditor[0].style.paddingBottom = h+\"px\";\r\n\t\tif (h>76)\r\n\t\t\tjQuery('#timeline_collapser').show();\r\n\t\telse\r\n\t\t\tjQuery('#timeline_collapser').hide();\r\n\t\tclearTimeout(RVS.S.updateTimeLineHeight);\r\n\r\n\t\tif (lastTLColHeight !== h)\r\n\t\t\tRVS.S.updateTimeLineHeight = setTimeout(function() {\r\n\t\t\t\tRVS.ENV.globVerOffset = h;\r\n\t\t\t\tif (nocallback!==true) RVS.DOC.trigger('updatesliderlayout',\"layerlist.js-157\");\r\n\t\t\t\tlastTLColHeight = h;\r\n\t\t\t},170);\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tGET THE LATEST LAYER ORDER BASED ON Z-INDEX\r\n\t*/\r\n\tRVS.F.getLayerOrder = function() {\r\n\t\treturn innerListOrder([],-1);\r\n\t};\r\n\r\n\tRVS.F.getLayerBeforeZIndex = function(uid) {\r\n\t\tvar list = innerListOrder([],RVS.L[uid].group.puid),\r\n\t\t\tluid,\r\n\t\t\ti;\r\n\r\n\t\tswitch(RVS.L[uid].type) {\r\n\t\t\tcase \"row\":\r\n\t\t\tcase \"column\":\r\n\t\t\t\tfor (i in list) {\r\n\t\t\t\t\tif(!list.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t//If Sort of List Elements is Smaller (Comes before in the List) then that is our element\r\n\t\t\t\t\tif (list[i].sort < RVS.L[uid].group.groupOrder && (luid===undefined || list[i].sort > RVS.L[luid].group.groupOrder))\r\n\t\t\t\t\t\tluid = list[i].id;\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tfor (i in list) {\r\n\t\t\t\t\tif(!list.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t//If zIndex of List Elements is Bigger (Comes before in the List) then that is our element\r\n\t\t\t\t\tif (list[i].zIndex > RVS.L[uid].position.zIndex && (luid===undefined || list[i].zIndex < RVS.L[luid].position.zIndex))\r\n\t\t\t\t\t\tluid = list[i].id;\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn luid;\r\n\t};\r\n\r\n\tRVS.F.getLayerAfterZIndex = function(uid) {\r\n\r\n\t\tvar list = innerListOrder([],RVS.L[uid].group.puid),\r\n\t\t\tluid,\r\n\t\t\ti;\r\n\r\n\t\tswitch(RVS.L[uid].type) {\r\n\t\t\tcase \"row\":\r\n\t\t\tcase \"column\":\r\n\t\t\t\tfor (i in list) {\r\n\t\t\t\t\tif(!list.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t//If Sort of List Elements is Bigger (Comes After in the List) then that is our element\r\n\t\t\t\t\tif (list[i].sort > RVS.L[uid].group.groupOrder && (luid===undefined || list[i].sort < RVS.L[luid].group.groupOrder))\r\n\t\t\t\t\t\tluid = list[i].id;\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tfor (i in list) {\r\n\t\t\t\t\tif(!list.hasOwnProperty(i)) continue;\r\n\t\t\t\t\t//If zIndex of List Elements is Smaller (Comes After in the List) then that is our element\r\n\t\t\t\t\tif (list[i].zIndex < RVS.L[uid].position.zIndex && (luid===undefined || list[i].zIndex > RVS.L[luid].position.zIndex))\r\n\t\t\t\t\t\tluid = list[i].id;\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn luid;\r\n\t};\r\n\r\n\r\n\r\n/***********************************\r\n\tMAIN INTERNAL FUNCTIONS\r\n************************************/\r\n\r\n\t/*\r\n\tINIT LOCAL INPUT BOX FUNCTIONS\r\n\t*/\r\n\tfunction initLocalInputBoxes() {\r\n\r\n\r\n\t\tRVS.DOC.on('click dblclick','.layerselector',function() {\r\n\t\t\tvar _ = jQuery(this);\r\n\r\n\t\t\tif (!_.hasClass(\"checked\")) {\r\n\t\t\t\tRVS.F.selectLayers({id:this.dataset.id,overwrite:false, action:\"add\"});\r\n\t\t\t\t_.addClass(\"checked\");\r\n\t\t\t} else {\r\n\t\t\t\tRVS.F.selectLayers({id:this.dataset.id,overwrite:false, action:\"remove\"});\r\n\t\t\t\t_.removeClass(\"checked\");\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.layerlist_element_innerwrap',function(evt) {\r\n\r\n\r\n\t\t\tif (this.dataset.ignore) return;\r\n\t\t\tif (this.id===\"slide_bg_anim_trigger\") return;\r\n\r\n\t\t\tfor (var i in RVS.JHOOKS.layerListElementClicked) {\r\n\t\t\t\tif(!RVS.JHOOKS.layerListElementClicked.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.JHOOKS.layerListElementClicked[i](this.dataset.id);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar frame = evt.target.nodeName===\"FRAMEWRAP\" || evt.target.nodeName===\"FFBEFORE\" || evt.target.nodeName===\"FFAFTER\" ? evt.target.dataset.frame : evt.target.parentNode.nodeName===\"FRAMEWRAP\" ? evt.target.parentNode.dataset.frame : undefined;\r\n\r\n\r\n\t\t\tif (frame!==undefined) {\r\n\t\t\t\tif (RVS.eMode.mode!==\"animation\" || RVS.eMode.top!==\"layer\")\r\n\t\t\t\t\tRVS.F.mainMode({mode:\"slidelayout\", forms:[\"*slidelayout**mode__slidecontent*#form_layer_animation\"], set:true, uncollapse:true,slide:RVS.S.slideId});\r\n\r\n\t\t\t\tjQuery('framewrap.selected').removeClass(\"selected\");\r\n\t\t\t\tif (evt.target.nodeName===\"FRAMEWRAP\") evt.target.className +=\" selected\";\r\n\t\t\t\tif (evt.target.parentNode.nodeName===\"FRAMEWRAP\") evt.target.parentNode.className +=\" selected\";\r\n\t\t\t\tRVS.F.selectLayers({id:this.dataset.id,overwrite:true, action:\"add\"}); //selectedKeyFrame:frame\r\n\t\t\t\tRVS.F.setKeyframeSelected(frame);\r\n\t\t\t\tif (RVS.eMode.mode===\"animation\") RVS.F.updateKeyframeSelected(frame);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tif (evt.target.className.indexOf('layerselector')==-1 && evt.target.className.indexOf('layerlist_element_level')==-1 && evt.target.className.indexOf('material-icons')==-1)\r\n\t\t\t\tif (RVS.eMode.mode===\"animation\") {\r\n\t\t\t\t\tif (RVS.L[this.dataset.id]!==undefined) {\r\n\t\t\t\t\t\tRVS.F.selectLayers({id:this.dataset.id,overwrite:true, action:\"add\",selectedKeyFrame:RVS.L[this.dataset.id].timeline.frameToIdle});\r\n\t\t\t\t\t\tRVS.F.updateKeyframeSelected(RVS.L[this.dataset.id].timeline.frameToIdle);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (window.cmdctrldown)\r\n\t\t\t\t\t\tRVS.F.selectLayers({id:this.dataset.id,overwrite:false, action:\"add\"});\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tRVS.F.selectLayers({id:this.dataset.id,overwrite:true, action:\"add\"});\r\n\t\t\t\t}\r\n\r\n\t\t\tjQuery('.directedit').removeClass(\"directedit\");\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('click','.layerlist_element_level',function() {\r\n\t\t\tjQuery(document.activeElement).blur();\r\n\r\n\t\t\tif (this.className.indexOf(\"free_positioned_layers_toggle\")>=0)\r\n\t\t\t\tjQuery('#mainLayerListWrap_'+RVS.S.slideId).toggleClass('collapsedfreelayers');\r\n\t\t\telse\r\n\t\t\t\tjQuery(this).closest('li').toggleClass(\"collapsed\");\r\n\t\t\tsetLayerListMaxHeight(true);\r\n\t\t\tRVS.F.saveCollapsedGroups();\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.layer_allcollaps',function() {\r\n\t\t\tif (this.className.indexOf(\"collapsed\")>=0) {\r\n\t\t\t\tthis.className = \"layer_allcollaps\";\r\n\t\t\t\tjQuery('#tl_layerList_'+RVS.S.slideId+\" .tllayerlist_element_group.collapsed\").removeClass(\"collapsed\");\r\n\t\t\t\tjQuery('#tl_layerList_'+RVS.S.slideId+\" .tllayerlist_element_row.collapsed\").removeClass(\"collapsed\");\r\n\t\t\t\tjQuery('#tl_layerList_'+RVS.S.slideId+\" .tllayerlist_element_column.collapsed\").removeClass(\"collapsed\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.className = \"layer_allcollaps collapsed\";\r\n\t\t\t\tjQuery('#tl_layerList_'+RVS.S.slideId+\" .tllayerlist_element_group\").addClass(\"collapsed\");\r\n\t\t\t\tjQuery('#tl_layerList_'+RVS.S.slideId+\" .tllayerlist_element_row\").addClass(\"collapsed\");\r\n\t\t\t\tjQuery('#tl_layerList_'+RVS.S.slideId+\" .tllayerlist_element_column\").addClass(\"collapsed\");\r\n\t\t\t}\r\n\t\t\tsetLayerListMaxHeight(true);\r\n\t\t\tRVS.F.saveCollapsedGroups();\r\n\t\t\tRVS.F.layerListScrollable(\"update\");\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('dblclick','.layerlist_element_innerwrap',function() {\r\n\t\t\tvar lei = jQuery(this);\r\n\t\t\tlei.addClass(\"directedit\");\r\n\t\t\tlei.find('.indeplayerinput').trigger('focus');\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.indeplayerinput',function() {\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('blur','.indeplayerinput',function() {\r\n\t\t\tjQuery(this).closest('.directedit').removeClass(\"directedit\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click dblclick','.fclayer_withslideend',function() {\r\n\r\n\t\t\tvar p = RVS.F.getLayerObjPath({layerid:this.dataset.layerid, frame:\"frame_999\"}),\r\n\t\t\t\tv = RVS.F.getDeepVal({path:p+\"start\"}),\r\n\t\t\t\tna = RVS.F.getLayerAliasAndFrame({layerid:this.dataset.layerid, frame:\"frame_999\"});\r\n\r\n\t\t\tif (jQuery(this).hasClass('endswithslide'))\r\n\t\t\t\tv = parseInt(v,0)-100;\r\n\t\t\telse\r\n\t\t\t\tv = RVS.F.getSlideLength()*10;\r\n\r\n\t\t\tRVS.F.updateSliderObj({path:p+\"start\",val:v, txt:na+\" Start\",icon:\"access_time\"});\r\n\t\t\tRVS.F.updateLayerFrame({layerid:this.dataset.layerid, frame:\"frame_999\"});\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#timeline_collapser',function() {\r\n\t\t\tclearTimeout(window.closeTimeLineTimer);\r\n\t\t\tRVS.F.expandCollapseTimeLine(true,\"close\");\r\n\t\t});\r\n\r\n\t\tRVS.C.layerListWrap.on('mouseenter',function() {\r\n\t\t\twindow.closeTimeLineTimer = setTimeout(function() {RVS.F.expandCollapseTimeLine(true,\"open\");},400);\r\n\t\t});\r\n\r\n\t\tRVS.C.layerListWrap.on('mouseleave',function() {\r\n\t\t\tclearTimeout(window.closeTimeLineTimer);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\r\n\t/*\r\n\tINIT CUSTOM EVENT LISTENERS FOR TRIGGERING FUNCTIONS\r\n\t*/\r\n\tfunction initLocalListeners() {\r\n\r\n\t\tRVS.S.llcache = RVS.S.llcache===undefined ? {} : RVS.S.llcache;\r\n\t\t// LAYER ALIAS UPDATED, VISIBLE NAMES NEED TO BE UPDATED\r\n\t\tRVS.DOC.on('updateLayerAlias',function(e,ep) {\r\n\t\t\tdocument.getElementById('layerlist_element_alias_'+RVS.S.slideId+'_'+ep).innerHTML = RVS.L[ep].alias;\r\n\t\t\tif (RVS.L[ep].type===\"group\") document.getElementById('_group_head_title_'+RVS.S.slideId+'_'+ep).innerHTML = RVS.L[ep].alias;\r\n\t\t\tif (RVS.selLayers[0]==ep) document.getElementById('updateLayerSingleAliasInput').value=RVS.L[ep].alias;\r\n\t\t});\r\n\r\n\t\t// BEFORE WE LEAVE SLIDE, CLEAN UP A BIT\r\n\t\tRVS.DOC.on('beforeSlideChange',function(e,ep) {\r\n\t\t\tRVS.F.stopAndPauseAllLayerAnimation();\r\n\t\t\tif (RVS.S.llcache[RVS.S.slideId]!==undefined && RVS.S.llcache[RVS.S.slideId].tlLayerList!==undefined) {\r\n\t\t\t\tRVS.S.llcache[RVS.S.slideId].tlLayerList.parentElement.removeChild(RVS.S.llcache[RVS.S.slideId].tlLayerList);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateScrollBars',function(e,ep){\r\n\t\t\tRVS.F.layerListScrollable(\"update\");\r\n\t\t\tRVS.C.layerListWrap.trigger('ps-scroll-x');\r\n\t\t\tRVS.C.layerListWrap.trigger('ps-scroll-y');\r\n\t\t});\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n/*************************************\r\n \t- SET UP BASIC SCENES -\r\n**************************************/\r\n\tfunction setUpBasicScenes() {\r\n\r\n\r\n\t\tRVS.TL.TL.resizable({\r\n\t\t\thandles:\"n\",\r\n\t\t\tminHeight:71,\r\n\t\t\tmaxHeight:600,\r\n\t\t\tstart:function(event,ui) {\r\n\t\t\t\tRVS.TL.TL.addClass(\"inResize\");\r\n\t\t\t},\r\n\t\t\tresize:function(event,ui) {\r\n\t\t\t\ttpGS.gsap.set('#tlLayerListWrap',{height:(ui.size.height-36)+\"px\"});\r\n\t\t\t\ttpGS.gsap.set('#timeline',{top:\"0px\"});\r\n\t\t\t\tRVS.ENV.globVerOffset = ui.size.height;\r\n\t\t\t\tRVS.DOC.trigger('updatesliderlayout',\"layerlist.js-355\");\r\n\t\t\t\twindow.timeline_in_resize = true;\r\n\t\t\t},\r\n\t\t\tstop:function(event,ui) {\r\n\t\t\t\tRVS.TL.TL.removeClass(\"inResize\");\r\n\t\t\t\ttpGS.gsap.set('#tlLayerListWrap',{height:(ui.size.height-36)+\"px\"});\r\n\t\t\t\tRVS.V.timeline_height = ui.size.height;\r\n\t\t\t\tRVS.DOC.trigger('updateScrollBars');\r\n\t\t\t\twindow.timeline_in_resize = false;\r\n\t\t\t\tRVS.F.expandCollapseTimeLine(true,\"open\");\r\n\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.F.layerListScrollable('init');\r\n\t}\r\n\r\n\tfunction setLayerListMaxHeight(force) {\r\n\t\t/*var cor = 60,\r\n\t\t\tfh = jQuery('#the_layers_in_slide_'+RVS.S.slideId).height(),\r\n\t\t\tch = RVS.S.llcache[RVS.S.slideId].cLayerList.height();\r\n\t\t\tmin = Math.min(fh,ch+cor);\r\n\r\n\t\tif (force) min = ch<400 ? ch+cor : min;\r\n\r\n\t\tjQuery('#the_layers_in_slide_'+RVS.S.slideId).height(min);\r\n\r\n\t\tjQuery('#mainLayerListWrap_'+RVS.S.slideId+'').height(Math.min(min-cor,ch));\r\n\t\tlayerListScrollable(\"update\");*/\r\n\t}\r\n\r\n\tRVS.F.updateCoveredTimelines = function() {\r\n\t\tvar ol = RVS.TL.TL.offset().left;\r\n\t\tif (RVS.TL.ct.offset().left - ol < 290)\r\n\t\t\tRVS.TL.ct[0].classList.add(\"covered\");\r\n\t\telse\r\n\t\t\tRVS.TL.ct[0].classList.remove(\"covered\");\r\n\r\n\t\tif (RVS.TL.mt.offset().left - ol < 290)\r\n\t\t\tRVS.TL.mt[0].classList.add(\"covered\");\r\n\t\telse\r\n\t\t\tRVS.TL.mt[0].classList.remove(\"covered\");\r\n\t\tif (RVS.SLIDER[RVS.S.slideId].slide.timeline.loop.set) {\r\n\t\t\tif (RVS.TL.slte.offset().left - ol < 290)\r\n\t\t\t\tRVS.TL.slte[0].classList.add(\"covered\");\r\n\t\t\telse\r\n\t\t\t\tRVS.TL.slte[0].classList.remove(\"covered\");\r\n\t\t\tif (RVS.TL.slts.offset().left - ol < 290)\r\n\t\t\t\tRVS.TL.slts[0].classList.add(\"covered\");\r\n\t\t\telse\r\n\t\t\t\tRVS.TL.slts[0].classList.remove(\"covered\");\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tRVS.F.layerListScrollable = function(type) {\r\n\t\tif (type===undefined || type===\"init\") {\r\n\t\t\tRVS.TL._scrollLeft = 0;\r\n\t\t\tRVS.C.layerListWrap.RSScroll({\r\n\t\t\t\twheelPropagation:true,\r\n\t\t\t\tsuppressScrollX:false,\r\n\t\t\t\tminScrollbarLength:30\r\n\t\t\t}).on('ps-scroll-y',function(){\r\n\t\t\t\tupdateListElementPositionsArray({container:'#tl_layerList_'+RVS.S.slideId,cIdName:'tllayerlist_element'});\r\n\t\t\t}).on('ps-scroll-x',function(){\r\n\t\t\t\tRVS.TL._scrollLeft = this.scrollLeft;\r\n\t\t\t\ttpGS.gsap.set([jQuery('#tlLayerListWrap .context_left'),'#the_st_cl', '#hovertime', '.timeline_left_container'], {x:this.scrollLeft});\r\n\t\t\t\ttpGS.gsap.set(['#timeline_top_toolbar'], {x:(0-this.scrollLeft)});\r\n\t\t\t\tRVS.F.updateHoverTime({pos:false, cont:true});\r\n\t\t\t\tRVS.F.updateCoveredTimelines();\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\tif (type===\"scrollToSelected\") {\r\n\t\t\t\tvar st = jQuery('.tllayerlist_element.checked').first().length>0 ? jQuery('.tllayerlist_element.checked').first().offset().top : 0;\r\n\t\t\t\tlastTLColHeight = lastTLColHeight===undefined ? RVS.TL.TL.height() : lastTLColHeight;\r\n\t\t\t\tif (st>(RVS.S.winh-lastTLColHeight) && st+50<RVS.S.winh) {\r\n\t\t\t\t\t// NOTHING\r\n\t\t\t\t} else\r\n\t\t\t\t\tRVS.C.layerListWrap.scrollTop(RVS.C.layerListWrap.scrollTop() - (((RVS.S.winh-lastTLColHeight) + 40) - st)).RSScroll(\"update\");\r\n\t\t\t}\r\n\t\t\tif (type===\"update\") {\r\n\t\t\t\tRVS.C.layerListWrap.RSScroll(\"update\");\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.saveCollapsedGroups = function() {\r\n\t\tRVS.SLIDER[RVS.S.slideId].slide.runtime = RVS.SLIDER[RVS.S.slideId].slide.runtime===undefined ? {} : RVS.SLIDER[RVS.S.slideId].slide.runtime;\r\n\t\tRVS.SLIDER[RVS.S.slideId].slide.runtime.collapsedGroups = [];\r\n\t\tvar temp = document.getElementsByClassName('withchildren collapsed');\r\n\t\tfor (var i in temp) {\r\n\t\t\tif(!temp.hasOwnProperty(i)) continue;\r\n\t\t\tif (temp[i].id!==undefined) RVS.SLIDER[RVS.S.slideId].slide.runtime.collapsedGroups.push(temp[i].id);\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.updateCollapsedGroups = function() {\r\n\t\tfor (var i=0;i<=RVS.SLIDER[RVS.S.slideId].slide.runtime.collapsedGroups.length-1;i++) {\r\n\t\t\tif (RVS.SLIDER[RVS.S.slideId].slide.runtime.collapsedGroups[i]!==undefined) {\r\n\t\t\t\tvar el = document.getElementById(RVS.SLIDER[RVS.S.slideId].slide.runtime.collapsedGroups[i]);\r\n\t\t\t\tif (el!=null) el.className +=\" collapsed\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n/***************************************************\r\n\t- DRAW THE LAYER LIST CONTAINER ON 3 LEVEL -\r\n/***************************************************/\r\n\r\n\tRVS.F.reDrawListElements = function() {\r\n\t\tif (RVS.SLIDER[RVS.S.slideId].slide.runtime!==undefined && RVS.SLIDER[RVS.S.slideId].slide.runtime.collapsedGroups!==undefined)\r\n\t\t\tRVS.F.updateCollapsedGroups();\r\n\r\n\t\tvar layerOrder = updateLayerOrder();\r\n\t\tif (RVS.S.llcache[RVS.S.slideId].tlLayerList===undefined || RVS.C.layerListWrap.find('.layerListContainer').length==0)\r\n\t\t\tRVS.S.llcache[RVS.S.slideId].tlLayerList = RVS.F.cE({t:'ul',id: 'tl_layerList_'+RVS.S.slideId, cN:\"layerListContainer\"});\r\n\t\telse {\r\n\t\t\tif (RVS.S.llcache[RVS.S.slideId].tlLayerList===undefined) RVS.S.llcache[RVS.S.slideId].tlLayerList = document.getElementById('tl_layerList_'+RVS.S.slideId);\r\n\t\t\temptyLayerListContainer(RVS.S.llcache[RVS.S.slideId].tlLayerList);\r\n\t\t\tRVS.S.llcache[RVS.S.slideId].tlLayerList.parentElement.removeChild(RVS.S.llcache[RVS.S.slideId].tlLayerList);\r\n\t\t}\r\n\r\n\r\n\t\tdrawListElements({list:layerOrder, container:RVS.S.llcache[RVS.S.slideId].tlLayerList,showEmpty:true, cIdName:'tllayerlist_element'});\r\n\r\n\t\tRVS.C.layerListWrap[0].appendChild(RVS.S.llcache[RVS.S.slideId].tlLayerList)\r\n\r\n\t\tshowHideNoLayer(layerOrder);\r\n\t\tlistElementSortable({container:'#tl_layerList_'+RVS.S.slideId,cacheSub:\"tlLayerList\",cIdName:'tllayerlist_element'});\r\n\r\n\r\n\t\tsetLayerListMaxHeight(true);\r\n\r\n\t\tRVS.F.updateCollapsedGroups();\r\n\t\tRVS.F.checkLockedLayers();\r\n\t\tRVS.F.checkShowHideLayers();\r\n\r\n\t}\r\n\r\n\r\n\tfunction emptyLayerListContainer() {\r\n\t\tdisableSortableLists({container:RVS.S.llcache[RVS.S.slideId].tlLayerList.id,cIdName:'tllayerlist_element'});\r\n\t\tRVS.S.llcache[RVS.S.slideId].tlLayerList.innerHTML = \"\";\r\n\t}\r\n\t/*\r\n\tREKURSIVE FUNCTION TO DRAW LIST ELEMENTS INHERITED\r\n\t*/\r\n\tfunction drawListElements(obj) {\r\n\t\tvar li;\r\n\t\tfor (var l in obj.list) {\r\n\r\n\t\t\tif(!obj.list.hasOwnProperty(l)) continue;\r\n\r\n\t\t\tvar sortelement = obj.list[l],\r\n\t\t\t\twithchildren = sortelement.type===\"zone\" || sortelement.type===\"group\" || sortelement.type===\"row\" || sortelement.type===\"column\";\r\n\r\n\t\t\tlet _ = RVS.L[sortelement.id],\r\n\t\t\t\tnotzone = _.type===\"zone\" ? \"\" : \" not_zone_layer\";\r\n\r\n\t\t\tli = RVS.F.cE({\tt:'li',\r\n\t\t\t\t\t\t\tcN:(withchildren ? 'withchildren ' : '') + (_.actions!==undefined && _.actions.action.length>0 ? 'actionmarked ' : ' ')+obj.cIdName+' layerlist_element '+obj.cIdName+'_'+_.type+' '+_.type+'_'+_.uid+notzone,\r\n\t\t\t\t\t\t\tid: obj.cIdName+'_'+RVS.S.slideId+'_'+_.uid,\r\n\t\t\t\t\t\t\tds:{puid:_.group.puid,type:_.type,id:_.uid}});\r\n\r\n\t\t\tif (withchildren && sortelement.list.length===0) li.dataset.status=\"empty\";\r\n\r\n\t\t\tli.appendChild(createLayerListElement(RVS.L[sortelement.id],withchildren));  // Returned jQuery Object\r\n\r\n\t\t\tif (withchildren) drawListElements({list:sortelement.list,container:li.querySelector('ul'),showEmpty:false, cIdName:obj.cIdName});\r\n\r\n\t\t\tif(obj.cIdName===\"tllayerlist_element\" && sortelement.id!==\"top\" && sortelement.id!==\"middle\" && sortelement.id!==\"bottom\") RVS.F.addLayerFrames(RVS.L[sortelement.id],li);\r\n\t\t\tobj.container.appendChild(li);\r\n\r\n\t\t}\r\n\t\tif (obj.showEmpty && obj.list.length===0) {\r\n\t\t\tli = RVS.F.cE({t:'li',cN:obj.cIdName+' nolayeravailable'});\r\n\t\t\tli.innerHTML = '<div class=\"context_left\"><div class=\"layerlist_element_type\"><i class=\"material-icons\">not_interested</i></div><div class=\"layerlist_element_alias\">No Layer Available</div></div>';\r\n\t\t\tobj.container.appendChild(li);\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\t/*\r\n\tCREATE LAYER ORDER HELPER BASED ON ZINDEX\r\n\t*/\r\n\tfunction updateLayerOrder() {\r\n\t\treturn innerListOrder([],-1);\r\n\t}\r\n\r\n\r\n\r\n\tfunction innerListOrder(list,puid) {\r\n\t\tlist = getLayersSortedInGroup(puid);\r\n\t\tfor (var l in list) {\r\n\t\t\tif(!list.hasOwnProperty(l)) continue;\r\n\t\t\tif (list[l].type===\"zone\" || list[l].type===\"row\" || list[l].type===\"column\" || list[l].type===\"group\")\r\n\t\t\t\tlist[l].list = innerListOrder(list,list[l].id);\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n\r\n\tfunction getLayersSortedInGroup(puid) {\r\n\t\tvar list = [],withZero,moreZeros=false;\r\n\t\tfor (var l in RVS.L) if(RVS.L.hasOwnProperty(l) && (\"\"+RVS.L[l].group.puid==\"\"+puid)) list.push({id:RVS.L[l].uid,  sort:RVS.L[l].group.groupOrder , zIndex:RVS.L[l].position.zIndex, type:RVS.L[l].type, alias:RVS.L[l].alias});\r\n\r\n\t\tfor (var i in list) {\r\n\t\t\tif (list[i].sort==0 || list[i].sort==\"0\") if (withZero===undefined) withZero = i; else {list[i].sort = list[i].zIndex;moreZeros = true;}\r\n\t\t}\r\n\t\tif (moreZeros) list[withZero].sort = list[withZero].zIndex;\r\n\r\n\r\n\t\tif (puid===\"top\" || puid===\"bottom\" || puid===\"middle\")\r\n\t\t\tlist.sort(function(a,b) { return a.sort - b.sort;});\r\n\t\telse\r\n\t\tif (puid===-1 || RVS.L[puid].type===\"group\")\r\n\t\t\tlist.sort(function(a,b) { return b.sort - a.sort;});\r\n\t\telse\r\n\t\t\tlist.sort(function(a,b) { return a.sort - b.sort;});\r\n\t\treturn list;\r\n\t}\r\n\r\n\tfunction showHideNoLayer(layerOrder) {\r\n\t\tif (layerOrder.length>0)\r\n\t\t\tjQuery('.layerlist_element.nolayeravailable').hide();\r\n\t\telse\r\n\t\t\tjQuery('.layerlist_element.nolayeravailable').show();\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tfunction createLayerListElement(_,withchildren) {\r\n\t\tlet frag = RVS.F.cF();\r\n\r\n\t\tlet ticon = RVS.F.getLayerIcon(_.linebreak?'linebreak':_.type,_.subtype);\r\n\r\n\t\tlet markup = RVS.F.cE({cN:'layerlist_element_innerwrap',ds:{layerid:_.uid, id:_.uid}});\r\n\t\tlet cleft = RVS.F.cE({cN:'context_left'});\r\n\t\tlet alias = RVS.F.cE({cN:'layerlist_element_alias', id:'layerlist_element_alias_'+RVS.S.slideId+'_'+_.uid});\r\n\t\tlet iwrap = RVS.F.cE({cN:'layerlist_toolbar_icon_wrap',id:'llist_too_iw_'+_.uid});\r\n\t\tlet send = RVS.F.cI({cN:'layerlist_toolbar_icon fclayer_withslideend',c:'keyboard_tab', id:'slideendmarker_'+RVS.S.slideId+'_'+_.uid, ds:{layerid:_.uid}});\r\n\t\tlet stime = RVS.F.cE({cN:'stimeline'});\r\n\t\tlet frameswrap = RVS.F.cE({cN:'frameswrap'});\r\n\t\tlet fus = RVS.F.cE({cN:'frame_unvisible_start', id:'frame_unvisible_start_'+RVS.S.slideId+'_'+_.uid});\r\n\t\tlet fbg = RVS.F.cE({t:'framebg',ds:{layerid:_.uid, bg:'true', layertype:_.type}});\r\n\r\n\t\talias.textContent = RVS.F.sanitize_input_ws(_.alias);\r\n\r\n\t\tmarkup.appendChild(cleft);\r\n\t\tcleft.appendChild(RVS.F.cE({cN:'layer_has_action'}));\r\n\t\tcleft.appendChild(RVS.F.cE({cN:'layer_raz_info', id:'layer_raz_info_'+RVS.S.slideId+'_'+_.uid, txt:_.position.position+\" <b>\"+(_.position.zIndex<10 ? \"0\" : \"\")+_.position.zIndex+'</b><label_icon class=\"ui_free_layers\"></label_icon>'}));\r\n\t\tcleft.appendChild(RVS.F.cE({cN:'layerlist_element_level',icon:{c:'arrow_drop_down'}}));\r\n\t\tcleft.appendChild(RVS.F.cE({cN:'layerlist_element_type',icon:{c:ticon}}));\r\n\t\tcleft.appendChild(alias);\r\n\t\tif (_.type!==\"zone\") {\r\n\t\t\tlet inp = RVS.F.cE({t:'input', type:'text', id:'layerlist_element_alias_input_'+RVS.S.slideId+'_'+_.uid, cN:'layerlist_element_alias_input indeplayerinput losefocusonenter',ds:{evt:'updateLayerAlias',sanitize:'true',cursortoclick:'true',evtparam:_.uid,r:_.uid+'.alias'}});\r\n\t\t\tinp.value=RVS.F.sanitize_alias(_.alias);\r\n\t\t\tcleft.appendChild(inp);\r\n\t\t}\r\n\r\n\t\tcleft.appendChild(RVS.F.cE({cN:'layerlist_toolbar'}));\r\n\t\tcleft.appendChild(RVS.F.cI({cN:'layer_current_visibility',c:'visibility_off',ds:{uid:_.uid}}));\r\n\t\tcleft.appendChild(RVS.F.cI({cN:'layer_current_locked material-icons',c:'lock',ds:{uid:_.uid}}));\r\n\r\n\t\tfor (var i in RVS.JHOOKS.createLayerListElement) {\r\n\t\t\tif(!RVS.JHOOKS.createLayerListElement.hasOwnProperty(i)) continue;\r\n\t\t\tlet el = RVS.JHOOKS.createLayerListElement[i]({layer:_});\r\n\t\t\tif (el!==false && el!==null && el!==undefined) cleft.appendChild(el);\r\n\t\t}\r\n\r\n\t\tcleft.appendChild(iwrap);\r\n\t\tiwrap.appendChild(send);\r\n\r\n\t\tmarkup.appendChild(stime);\r\n\t\tstime.appendChild(RVS.F.cE({cN:'slidelooptimemarker'}));\r\n\t\tstime.appendChild(RVS.F.cE({cN:'fixedscrolltimemarker'}));\r\n\t\tstime.appendChild(frameswrap);\r\n\t\tframeswrap.appendChild(fus)\r\n\t\tframeswrap.appendChild(fbg);\r\n\t\tfrag.appendChild(markup);\r\n\t\tif (withchildren) frag.appendChild(RVS.F.cE({t:'ul'}));\r\n\r\n\t\treturn frag;\r\n\t}\r\n\r\n\r\n\r\n/******************************************************\r\n\t- CUSTOM SORTING OF LAYER ELEMENTS IN LIST -\r\n******************************************************/\r\n\r\n\tfunction wasCollapsed() {\r\n\t\tif (jQuery(this).hasClass(\"collapsed\"))\r\n\t\t\tthis.dataset.wascollapsed = 1;\r\n\t\telse\r\n\t\t\tjQuery(this).addClass('collapsed');\r\n\t}\r\n\r\n\tfunction resetWasCollapsed() {\r\n\t\tif (this.dataset.wascollapsed!=1)\r\n\t\t\tjQuery(this).removeClass('collapsed');\r\n\t\tthis.dataset.wascollapsed = 0;\r\n\t}\r\n\tfunction disableSortableLists(obj) {\r\n\t\tjQuery(obj.container+' .'+obj.cIdName).each(function() {\r\n\t\t\tif (jQuery(this).data('uiDraggable'))\r\n\t\t\t\tjQuery(this).draggable(\"destroy\");\r\n\t\t});\r\n\t}\r\n\r\n\tfunction updateListElementPositionsArray(obj) {\r\n\t\tlistElementPosArray = [];\r\n\t\t// CALCULATE THE POSITIONS OF THE LIST ELEMENTS\r\n\t\tjQuery(obj.container+' .'+obj.cIdName).each(function() {\r\n\t\t\tif (this.offsetParent!==null )\r\n\t\t\t\tlistElementPosArray.push({dif:36, y:jQuery(this).offset().top, id:this.dataset.id, type:this.dataset.type, puid:this.dataset.puid});\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tRVS.F.updateRelAbsZinTXT = function(layerid) {\r\n\t\tif (layerid===undefined && RVS.L[layerid!==undefined]) return;\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\tRVS.H[layerid].relabszin = RVS.H[layerid].relabszin===undefined ? document.getElementById('layer_raz_info_'+RVS.S.slideId+'_'+layerid) : RVS.H[layerid].relabszin;\r\n\t\t\tRVS.H[layerid].relabszin.innerHTML = RVS.L[layerid].position.position+\" <b>\"+(RVS.L[layerid].position.zIndex<10 ? \"0\" : \"\")+RVS.L[layerid].position.zIndex+'</b><label_icon class=\"ui_free_layers\"></label_icon>';\r\n\t\t});\r\n\t}\r\n\r\n\tfunction listElementSortable(obj) {\r\n\t\tvar contHeight,\r\n\t\t\tcontY,\r\n\t\t\tps,\r\n\t\t\tscTimer,\r\n\t\t\teY = 0;\r\n\t\tjQuery(obj.container+' .'+obj.cIdName).draggable({\r\n\t\t\thelper:'clone',\r\n\t\t\topacity:0.5,\r\n\t\t\taxis:\"y\",\r\n\r\n\t\t\tstart:function(event,ui) {\r\n\t\t\t\tif (this.dataset.type==\"zone\") {\r\n\t\t\t\t\tjQuery(this).draggable(\"disable\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.dataset.type===\"row\") RVS.TL.TL.addClass(\"layer_in_drag\");\r\n\t\t\t\tvar jsub = jQuery(RVS.S.llcache[RVS.S.slideId][obj.cacheSub]);\r\n\t\t\t\tui.helper.width(jsub.width());\r\n\t\t\t\tRVS.F.updateRelAbsZinTXT(this.dataset.id);\r\n\t\t\t\tps  = jQuery(obj.container).closest('.ps');\r\n\t\t\t\tcontHeight = ps.height();\r\n\t\t\t\tRVS.S.DaD = RVS.S.DaD==undefined ? {} : RVS.S.DaD;\r\n\t\t\t\tRVS.S.DaD.dragInListFrom = RVS.L[this.dataset.id].group.puid;\r\n\t\t\t\tRVS.S.DaD.dragInListFromType = RVS.L[RVS.S.DaD.dragInListFrom]!==undefined ? RVS.L[RVS.S.DaD.dragInListFrom].type : undefined;\r\n\t\t\t\tRVS.S.DaD.dragInListTempPos =  RVS.L[this.dataset.id].position.position;\r\n\r\n\r\n\t\t\t\t// COLLAPSE COLUMNS BEFORE MOVE THEM\r\n\t\t\t\tif (this.dataset.type === 'column') jQuery('#'+obj.cIdName+'_'+RVS.S.slideId+'_'+this.dataset.puid).find('.'+obj.cIdName+'_column').each(wasCollapsed);\r\n\t\t\t\t// COLLAPSE ROWS BEFORE MOVE THEM\r\n\t\t\t\tif (this.dataset.type === 'row') jQuery('.'+obj.cIdName+'_row').each(wasCollapsed);\r\n\r\n\t\t\t\tif (ps.length>0 && ps.hasClass(\"ps--active-y\")) RVS.F.layerListScrollable(\"update\");\r\n\t\t\t\tsetTimeout(function() {updateListElementPositionsArray(obj);},50);\r\n\t\t\t\tscTimer = setInterval(function() {\r\n\t\t\t\t\tif (ps.length>0 && ps.hasClass(\"ps--active-y\")) {\r\n\t\t\t\t\t\tcontY = jsub.offset().top;\r\n\t\t\t\t\t\tif (eY<(contY+ps[0].scrollTop+20) && ps[0].scrollTop>0) {\r\n\t\t\t\t\t\t\tps[0].scrollTop--;\r\n\t\t\t\t\t\t\tupdateListElementPositionsArray(obj);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tif (eY>(parseInt(contY,0)+parseInt(contHeight,0)+ps[0].scrollTop-20) && ps[0].scrollTop<contHeight) {\r\n\t\t\t\t\t\t\tps[0].scrollTop++;\r\n\t\t\t\t\t\t\tupdateListElementPositionsArray(obj);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t},5);\r\n\t\t\t},\r\n\r\n\t\t\tdrag:function(event,ui) {\r\n\t\t\t\tif (this.dataset.type==\"zone\") return;\r\n\t\t\t\tvar res = getItemUnder({y:event.pageY});\r\n\t\t\t\teY = event.pageY;\r\n\t\t\t\tif (res!==false) {\r\n\t\t\t\t\tjQuery('.'+obj.cIdName).removeClass(\"beforeitemdrop\").removeClass(\"afteritemdrop\").removeClass(\"incolumntopdrop\").removeClass(\"incolumndrop\").removeClass(\"afterzonedrop\");\r\n\t\t\t\t\tjQuery('.grouptodropinlist').removeClass('grouptodropinlist');\r\n\t\t\t\t\tRVS.S.llcache[RVS.S.slideId][obj.cacheSub].classList.remove(\"sortToTheEnd\");\r\n\t\t\t\t\tif (event.pageY<listElementPosArray[1].y || res.found===true) {\r\n\t\t\t\t\t\tvar classAddition = \"\",\r\n\t\t\t\t\t\t\ths = 18;\r\n\r\n\t\t\t\t\t\t\tres.cover = res.cover<-18 ? 0 : res.cover;\r\n\t\t\t\t\t\tswitch (this.dataset.type) {\r\n\t\t\t\t\t\t\tcase \"row\":\r\n\t\t\t\t\t\t\t\tif (res.puid===-1) jQuery('#'+obj.cIdName+'_'+RVS.S.slideId+'_'+res.id).addClass(\"incolumndrop\");\r\n\r\n\t\t\t\t\t\t\t\tif (res.puid === \"top\" || res.puid===\"bottom\" || res.puid===\"middle\") classAddition = res.cover<hs ? \"beforeitemdrop\" : \"afteritemdrop\";\r\n\t\t\t\t\t\t\t\tif (res.id === \"top\" || res.id===\"bottom\" || res.id===\"middle\") classAddition = res.cover<hs && res.id!==\"top\" ? \"beforeitemdrop\" : \"afteritemdrop\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t/*case \"group\":\r\n\t\t\t\t\t\t\t\tclassAddition = res.cover<hs ? \t\"beforeitemdrop\" : \t\"afteritemdrop\";\r\n\t\t\t\t\t\t\tbreak;*/\r\n\t\t\t\t\t\t\tcase \"column\":\r\n\t\t\t\t\t\t\t\tjQuery('#'+obj.cIdName+'_'+RVS.S.slideId+'_'+this.dataset.puid).addClass(\"incolumndrop\");\r\n\t\t\t\t\t\t\t\tif (res.puid === this.dataset.puid) classAddition = res.cover<hs ? \t\"beforeitemdrop\" : \t\"afteritemdrop\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tif (res.type!==\"zone\" && res.type!==\"row\") {\r\n\t\t\t\t\t\t\t\t\tif (res.puid!==-1 && (res.type!==\"zone\" && res.type!==\"column\" && res.type!==\"row\" && res.type!==\"group\")) jQuery('#'+obj.cIdName+'_'+RVS.S.slideId+'_'+res.puid).addClass(\"incolumndrop\");\r\n\t\t\t\t\t\t\t\t\tvar isChild = RVS.F.isParent(this.dataset.id,res.id);\r\n\t\t\t\t\t\t\t\t\tclassAddition = this.dataset.type==\"group\" && isChild ? \"\" :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.dataset.type==\"group\" && res.type==\"group\" && res.puid!==\"-1\" ? res.cover<12 ? \"beforeitemdrop\" : \"\" :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.dataset.type==\"group\" && (\"\"+res.puid)!==\"-1\" && RVS.L[res.puid]!==undefined && (\"\"+RVS.L[res.puid].group.puid)!==\"-1\" ? \"\" :\r\n\t\t\t\t\t\t\t\t\t\t\t\tres.type==\"group\" && !RVS.F.hasChildren(res.id) ?\r\n\t\t\t\t\t\t\t\t\t\t\t\tres.cover<12 ? \"beforeitemdrop\" :\r\n\t\t\t\t\t\t\t\t\t\t\t\tres.cover>11 && res.cover<24 ?  \"incolumntopdrop\" :\"afteritemdrop\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t\tres.cover<hs ? res.type!==\"column\" ? \"beforeitemdrop\" : \"afteritemdrop\" :\r\n\t\t\t\t\t\t\t\t\t\t\t\tres.type!==\"row\" && res.type!==\"column\" && res.type!==\"group\" ? \"afteritemdrop\" :\r\n\t\t\t\t\t\t\t\t\t\t\t\tres.type===\"column\"  || res.type===\"group\" ? \"incolumntopdrop\" : classAddition;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (res.cover<hs && res.type===\"zone\" && res.id===\"top\") classAddition = \"beforeitemdrop\";\r\n\t\t\t\t\t\t\t\t\tif (res.type===\"zone\" && res.id===\"bottom\") classAddition = \"afterzonedrop\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar el,resel = document.getElementById(obj.cIdName+'_'+RVS.S.slideId+'_'+res.id);\r\n\r\n\r\n\r\n\t\t\t\t\t\tif ((res.type!==\"group\" && res.type!==\"column\" && res.puid!==\"-1\" && RVS.L[res.puid].type==\"column\") || (res.type==\"column\" && this.dataset.type==\"column\")) {\r\n\t\t\t\t\t\t\tel = document.getElementById(obj.cIdName+'_'+RVS.S.slideId+'_'+res.puid);\r\n\t\t\t\t\t\t\tif (el!==null && el!==undefined) el.classList.add('grouptodropinlist');\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tif (res.type==\"column\" && this.dataset.type!==\"group\") {\r\n\r\n\t\t\t\t\t\t\tel = document.getElementById(obj.cIdName+'_'+RVS.S.slideId+'_'+res.id);\r\n\t\t\t\t\t\t\tif (el!==null && el!==undefined) el.classList.add('grouptodropinlist');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((\"\"+res.puid)!==\"-1\" && this.dataset.type==\"group\" && (RVS.L[res.puid]!==undefined && ((\"\"+RVS.L[res.puid].group.puid)!==\"-1\" ||  (classAddition!==\"beforeitemdrop\" && classAddition!==\"afteritemdrop\")))) {\r\n\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tif ((\"\"+res.puid)!==\"-1\" && RVS.L[res.puid].type==\"group\" && (res.type!==\"group\" || classAddition==\"beforeitemdrop\" || this.dataset.type==\"group\")) {\r\n\t\t\t\t\t\t\t\tel = document.getElementById(obj.cIdName+'_'+RVS.S.slideId+'_'+res.puid);\r\n\t\t\t\t\t\t\t\tif (el!==null && el!==undefined) el.classList.add('grouptodropinlist');\r\n\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tif (classAddition.indexOf('incolumntopdrop')>=0 && res.type==\"group\") resel.classList.add('grouptodropinlist');\r\n\r\n\t\t\t\t\t\tif (classAddition!==\"\" && resel!==undefined) resel.classList.add(classAddition);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//if (this.dataset.type!==\"column\") RVS.S.llcache[RVS.S.slideId][obj.cacheSub].addClass(\"sortToTheEnd\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstop:function(event,ui) {\r\n\t\t\t\tif (this.dataset.type==\"zone\") return;\r\n\t\t\t\tvar tid = this.dataset.id;\r\n\t\t\t\tRVS.TL.TL.removeClass(\"layer_in_drag\");\r\n\t\t\t\tclearInterval(scTimer);\r\n\t\t\t\tjQuery('.'+obj.cIdName).removeClass(\"beforeitemdrop\").removeClass(\"afteritemdrop\").removeClass(\"incolumntopdrop\").removeClass(\"incolumndrop\");\r\n\t\t\t\tRVS.S.llcache[RVS.S.slideId][obj.cacheSub].classList.remove(\"sortToTheEnd\");\r\n\t\t\t\tjQuery('.grouptodropinlist').removeClass('grouptodropinlist');\r\n\r\n\r\n\t\t\t\t// UNCOLLAPSE COLUMNS AFTER DRAG\r\n\t\t\t\tif (this.dataset.type === 'column') jQuery('#'+obj.cIdName+'_'+RVS.S.slideId+'_'+this.dataset.puid).find('.'+obj.cIdName+'_column').each(resetWasCollapsed);\r\n\r\n\t\t\t\t// UNCOLLAPSE ROWS AFTER DRAG\r\n\t\t\t\tif (this.dataset.type === 'row') jQuery('.'+obj.cIdName+'_row').each(resetWasCollapsed);\r\n\r\n\t\t\t\tvar res = getItemUnder({y:event.pageY}),\r\n\t\t\t\t\ttarget;\r\n\r\n\t\t\t\tif (res!==false) {\r\n\t\t\t\t\tif (event.pageY<listElementPosArray[1].y || res.found===true) {\r\n\t\t\t\t\t\ttarget =\"\";\r\n\t\t\t\t\t\tvar hs = 18;\r\n\t\t\t\t\t\tswitch (this.dataset.type) {\r\n\t\t\t\t\t\t\tcase \"row\":\r\n\t\t\t\t\t\t\t\tif (res.puid === \"top\" || res.puid===\"bottom\" || res.puid===\"middle\") target = res.cover<hs ? \"before\" : \"after\";\r\n\t\t\t\t\t\t\t\tif (res.cover>=hs && (res.id===\"top\" || res.id===\"bottom\" || res.id===\"middle\")) target=\"zone\";\r\n\t\t\t\t\t\t\t\tif (res.cover<hs && res.id===\"middle\") { res.id=\"top\"; target=\"zonebottom\";}\r\n\t\t\t\t\t\t\t\tif (res.cover<hs && res.id===\"bottom\") { res.id=\"middle\"; target=\"zonebottom\";}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t/*\tcase \"group\":\r\n\t\t\t\t\t\t\t\ttarget = res.cover<hs ? \"before\" : \"after\";\r\n\t\t\t\t\t\t\tbreak;*/\r\n\t\t\t\t\t\t\tcase \"column\":\r\n\t\t\t\t\t\t\t\tif (res.puid === this.dataset.puid) target = res.cover<hs ? \"before\" : \"after\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tvar isChild = RVS.F.isParent(tid,res.id);\r\n\r\n\t\t\t\t\t\t\t\ttarget =\r\n\t\t\t\t\t\t\t\t\t\tthis.dataset.type==\"group\" && isChild ? target :\r\n\t\t\t\t\t\t\t\t\t\tthis.dataset.type==\"group\" && res.type==\"group\" && res.puid!==\"-1\" ?\r\n\t\t\t\t\t\t\t\t\t\tres.cover<hs-1 ? \"before\" : \"\" :\r\n\t\t\t\t\t\t\t\t\t\tres.type==\"group\" && !RVS.F.hasChildren(res.id) ?\r\n\t\t\t\t\t\t\t\t\t\tres.cover<12 ? \"before\" :\r\n\t\t\t\t\t\t\t\t\t\tres.cover>11 && res.cover<24 ?  \"group\" :\"after\"\r\n\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t (res.cover<hs && res.type!==\"column\" && res.type!==\"row\" && (res.type!==\"zone\" || res.id===\"top\")) ? \"before\" :\r\n\t\t\t\t\t\t\t\t\t\t (res.cover<hs && res.type===\"column\") ? \"column\" :\r\n\t\t\t\t\t\t\t\t\t\t (res.cover>(hs-1) && (res.type!==\"row\" && res.type!==\"column\" && res.type!==\"group\" && res.type!==\"zone\")) ? \"after\" :\r\n\t\t\t\t\t\t\t\t\t\t (res.cover>(hs-1) && res.type===\"column\") ? \"column\" :\r\n\t\t\t\t\t\t\t\t\t\t (res.cover>(hs-1) && res.type===\"group\") ? \"group\" :\r\n\t\t\t\t\t\t\t\t\t\t ((res.puid==-1 || res.puid===\"bottom\") && res.type===\"zone\") ? \"after\" : target;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}  else {\r\n\r\n\t\t\t\t\t\tswitch (this.dataset.type) {\r\n\t\t\t\t\t\t\tcase \"row\":\tbreak;\r\n\t\t\t\t\t\t\tcase \"column\":break;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\ttarget = \"after\";\r\n\t\t\t\t\t\t\t\tres.id = lastElementInList(listElementPosArray).id;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (RVS.S.DaD.dragInListTempPos==\"absolute\" && target===\"column\" && RVS.S.DaD.dragInListFromType!==\"column\") {\r\n\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+tid+'.position.position',val:\"relative\", uid:tid});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (target!==\"\") RVS.F.sortLayer({layer:tid, target:target, dropto:target, env:res.id});\r\n\r\n\r\n\t\t\t\t\tRVS.F.updateLayerPositionClass(tid);\r\n\t\t\t\t\tRVS.F.selectedLayersVisualUpdate();\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trevert:\"true\"\r\n\t\t});\r\n\t}\r\n\t// GET THE LIST ITEM UNDER THE HOVERING MOUSE\r\n\tfunction getItemUnder(obj) {\r\n\t\tvar found = false, i = 0;\r\n\t\tif (listElementPosArray!==undefined && listElementPosArray.length>0) {\r\n\t\t\twhile (!found && i<listElementPosArray.length) {\r\n\t\t\t\tif (obj.y>=listElementPosArray[i].y && obj.y<parseInt(listElementPosArray[i].y,0)+parseInt(listElementPosArray[i].dif,0))\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\telse\r\n\t\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (i>=listElementPosArray.length) i = listElementPosArray.length-1;\r\n\t\t\treturn {found:found, id:listElementPosArray[i].id, puid:listElementPosArray[i].puid, y:listElementPosArray[i].y, cover:obj.y - parseInt(listElementPosArray[i].y,0), type:listElementPosArray[i].type};\r\n\t\t} else\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction lastElementInList(list) {\r\n\t\tvar le, pos=0;\r\n\t\tfor (var el in list) {\r\n\t\t\tif(!list.hasOwnProperty(el)) continue;\r\n\t\t\tif (list[el].y >= pos) {\r\n\t\t\t\tle = list[el];\r\n\t\t\t\tpos =  list[el].y;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn le;\r\n\t}\r\n\r\n\t//SORT LAYER INTO OTHER POSITION AFTER DROP/DRAG\r\n\tRVS.F.sortLayerStepOne = function(obj) {\r\n\r\n\t\tif (obj.env!==obj.layer) {\r\n\t\t\t\tvar pre = '#tllayerlist_element_'+RVS.S.slideId+'_',\r\n\t\t\t\t\tel = jQuery(pre+obj.layer);\r\n\r\n\t\t\tswitch (obj.target) {\r\n\t\t\t\tcase \"after\":\r\n\t\t\t\t\t//Check if Object is a Group, and if depth is not deeper than 1 level\r\n\t\t\t\t\tif (RVS.L[obj.layer].type==\"group\" && RVS.F.getLayerDepth({layer:obj.env}) >1)  obj.env = RVS.L[RVS.L[obj.env].group.puid]==undefined || RVS.L[RVS.L[obj.env].group.puid].type!==\"column\" ? RVS.L[obj.env].group.puid : obj.env;\r\n\t\t\t\t\tif (RVS.L[obj.layer].type!==\"row\" && RVS.L[obj.env].type===\"row\")\r\n\t\t\t\t\t\tel.appendTo('#tl_layerList_'+RVS.S.slideId);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tel.insertAfter(pre+obj.env);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"before\":\r\n\t\t\t\t\tif (RVS.L[obj.layer].type==\"group\" && RVS.F.getLayerDepth({layer:obj.env}) >1) obj.env = RVS.L[RVS.L[obj.env].group.puid]==undefined || RVS.L[RVS.L[obj.env].group.puid].type!==\"column\" ? RVS.L[obj.env].group.puid : obj.env;\r\n\t\t\t\t\tif (RVS.L[obj.layer].type!==\"row\" && RVS.L[obj.env].type===\"row\")\r\n\t\t\t\t\t\tel.appendTo('#tl_layerList_'+RVS.S.slideId);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tel.insertBefore(pre+obj.env);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"zone\":\r\n\t\t\t\t\tif (RVS.L[obj.env].group.puid!==obj.env)\r\n\t\t\t\t\t\tel.prependTo(pre+obj.env+'>ul');\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"zonebottom\":\r\n\t\t\t\t\tif (RVS.L[obj.layer].type==\"row\") {\r\n\t\t\t\t\t\tif (RVS.L[obj.env].group.puid!==obj.env) el.appendTo(pre+obj.env+'>ul');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tel.appendTo('#tl_layerList_'+RVS.S.slideId);\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"firstingroup\":\r\n\t\t\t\t\tel.prependTo(pre+obj.env+'>ul');\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\t\tel.prependTo(pre+obj.env+'>ul');\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"column\":\r\n\t\t\t\t\tel.prependTo(pre+obj.env+'>ul');\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"columnend\":\r\n\t\t\t\t\tel.appendTo(pre+obj.env+'>ul');\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"veryend\":\r\n\t\t\t\t\tif (RVS.L[obj.layer].type==\"row\")\r\n\t\t\t\t\t\tel.appendTo(pre+\"bottom\"+'>ul');\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tel.appendTo('#tl_layerList_'+RVS.S.slideId);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.sortLayerStepTwo = function(obj) {\r\n\t\tif (obj.dropto===\"column\" && obj.pospos!==\"absolute\") {\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+obj.layer+'.position.x.#size#.v',val:0});\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+obj.layer+'.position.y.#size#.v',val:0});\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+obj.layer+'.position.horizontal.#size#.v',val:\"left\"});\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+obj.layer+'.position.vertical.#size#.v',val:\"top\"});\r\n\t\t\t}\r\n\t\tif (obj.resetPosition!==undefined && (obj.dropto===\"group\" || obj.dropto===\"root\" || (obj.dropto===\"column\" && obj.pospos==\"absolute\"))) {\r\n\t\t\tif (obj.dropto===\"root\") {\r\n\t\t\t\tRVS.L[obj.layer].position.ingrouppositoin = RVS.L[obj.layer].position.position;\r\n\t\t\t\tRVS.L[obj.layer].position.position = \"absolute\";\r\n\t\t\t}\r\n\t\t\tvar X = obj.resetPosition.x - RVS.H[obj.layer].w_offsetcache.horizontal,\r\n\t\t\t\tY = obj.resetPosition.y - RVS.H[obj.layer].w_offsetcache.vertical;\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+obj.layer+'.position.x.#size#.v',val:X});\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+obj.layer+'.position.y.#size#.v',val:Y});\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+obj.layer+'.position.horizontal.#size#.v',val:\"left\"});\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+obj.layer+'.position.vertical.#size#.v',val:\"top\"});\r\n\t\t}\r\n\t};\r\n\r\n\t// SORT MORE THEN 1 LAYER INTO OTHER POSITIONS\r\n\tRVS.F.sortAllSelectedLayers = function(_) {\r\n\t\tvar obj = RVS.F.safeExtend({},_),\r\n\t\t\tm = RVS.selLayers.length-1,\r\n\t\t\tsi;\r\n\r\n\t\tfor (si in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(si)) continue;\r\n\t\t\tobj.layer = RVS.selLayers[m-si];\r\n\t\t\tif (RVS.L[obj.layer].type!==\"row\" && RVS.L[obj.layer].type!==\"column\" && RVS.L[obj.layer].type!==\"groupi\")\r\n\t\t\t\tRVS.F.sortLayerStepOne(obj);\r\n\t\t}\r\n\r\n\t\tfor (si in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(si)) continue;\r\n\t\t\tobj.layer = RVS.selLayers[m-si];\r\n\t\t\tobj.positionoffset = si;\r\n\t\t\tif (RVS.L[obj.layer].type!==\"row\" && RVS.L[obj.layer].type!==\"column\" && RVS.L[obj.layer].type!==\"groupi\")\r\n\t\t\t\tRVS.F.sortLayerStepTwo(obj);\r\n\t\t}\r\n\t\tupdatePUIDs();\r\n\t\tRVS.F.updateZIndexTable();\r\n\r\n\t\tRVS.F.reOrderHTMLLayers();\r\n\r\n\t};\r\n\r\n\t// SORT 1 SINGLE LAYER INTO A NEW POSITION\r\n\tRVS.F.sortLayer = function(obj) {\r\n\r\n\t\tRVS.F.sortLayerStepOne(obj);\r\n\t\tsetTimeout(function() {\r\n\t\t\tRVS.F.openBackupGroup({id:\"layersorting\",txt:\"Layer Sorting\",icon:\"sort_by_alpha\"});\r\n\t\t\tRVS.F.sortLayerStepTwo(obj);\r\n\t\t\tupdatePUIDs();\r\n\t\t\tRVS.F.updateZIndexTable();\r\n\t\t\tRVS.F.closeBackupGroup({id:\"layersorting\"});\r\n\t\t\tRVS.F.reOrderHTMLLayers();\r\n\t\t\tif (obj.redraw)\r\n\t\t\t\tRVS.F.updateSelectedHtmlLayers(true);\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('.layer_settings_collector'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\t\tRVS.F.updateLayerPositionClass(obj.uid);\r\n\t\t\tRVS.F.selectedLayersVisualUpdate();\r\n\r\n\t\t},50);\r\n\t};\r\n\r\n\r\n\t// UPDATE zINDEX and GROUP Index Functions\r\n\tfunction updatePUIDs() {\r\n\t\tvar els = jQuery('#tl_layerList_'+RVS.S.slideId+' .layerlist_element');\r\n\r\n\t\tfor (var el in els) {\r\n\t\t\tif(!els.hasOwnProperty(el)) continue;\r\n\t\t\tif (els[el] !== undefined && els[el].dataset!==undefined && els[el].dataset.id!==undefined)\t{\r\n\t\t\t\tvar p = jQuery(els[el]).parent().closest('.withchildren');\r\n\t\t\t\tif (p.length>0) {\r\n\t\t\t\t\tels[el].dataset.puid =  p.data('id');\r\n\r\n\t\t\t\t\tvar oldpuid = RVS.F.getDeepVal({path:RVS.S.slideId+'.layers.'+els[el].dataset.id+'.group.puid'});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+els[el].dataset.id+'.group.puid',val:els[el].dataset.puid});\r\n\r\n\t\t\t\t\t//IF ELEMET ADDED TO A NEW GROUP, COLUMN, ROW !!\r\n\t\t\t\t\tif (oldpuid != els[el].dataset.puid && jQuery.inArray(els[el].dataset.puid,[\"top\",\"bottom\",\"middle\"])==-1) {\r\n\t\t\t\t\t\tvar _children = RVS.F.getLayerChildren({layerid:els[el].dataset.puid});\r\n\t\t\t\t\t\tRVS.F.setChildrenTimelines({childLayers:_children, difference: 0});\r\n\t\t\t\t\t\tRVS.F.backupChildren({childLayers:_children});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tels[el].dataset.puid = -1;\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+els[el].dataset.id+'.group.puid',val:-1});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tRVS.F.getChildrenAmount = function(layerid) {\r\n\t\tvar a = RVS.F.getLayerChildren({layerid: layerid==\"root\" ? \"-1\" : layerid,ignoreframes:true, onelevel:true, removeZones:true});\r\n\t\tvar l=0; for (var i in a) if (a.hasOwnProperty(i)) l++;\r\n\t\treturn l;\r\n\t}\r\n\r\n\tRVS.F.updateZIndexTable = function(ignoreUndo) {\r\n\t\tvar els = jQuery('#tl_layerList_'+RVS.S.slideId+' .layerlist_element'),G = {},puid;\r\n\r\n\r\n\t\tfor (var el in els) {\r\n\t\t\tif(!els.hasOwnProperty(el) || !(els[el] !== undefined && els[el].dataset!==undefined && els[el].dataset.id!==undefined)) continue;\r\n\t\t\tvar puid = RVS.L[els[el].dataset.id].group.puid;\r\n\t\t\tpuid = puid == \"-1\" || puid===-1 ? \"root\" : puid;\r\n\t\t\tG[puid] = G[puid]===undefined ? {min:0, max:RVS.F.getChildrenAmount(puid)+5} : G[puid];\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+els[el].dataset.id+'.position.zIndex',val:G[puid].max});\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+els[el].dataset.id+'.group.groupOrder',val:(puid==\"root\" || (RVS.L[puid]!==undefined && RVS.L[puid].type===\"group\") ? G[puid].max : G[puid].min)});\r\n\t\t\tif (RVS.L[els[el].dataset.id].type!==\"zone\") tpGS.gsap.set(RVS.H[els[el].dataset.id].w,{zIndex:G[puid].max});\r\n\t\t\tG[puid].max--;\r\n\t\t\tG[puid].min++;\r\n\t\t}\r\n\r\n\t\tRVS.F.updateZoneZIndexes();\r\n\r\n\t}\r\n\r\n})();\r\n","Nwdthemes_Revslider/admin/assets/js/modules/quickstyle.js":"/*!\r\n * REVOLUTION 6.0.0 EDITOR QUICK STYLE JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\nRVS.LIB.QS = RVS.F.safeExtend(true,RVS.LIB.QS,{\r\n\theadlines : [\r\n\t\t{fs:32, lh:36, ff:\"Indie Flower\",fw:\"400\",ls:1},\r\n\t\t{fs:35, lh:45, ff:\"Raleway\",fw:\"300\",ls:2},\r\n\t\t{fs:46, lh:60, ff:\"Shadows Into Light\",fw:\"400\",ls:-1},\r\n\t\t{fs:36, lh:40, ff:\"Roboto\",fw:\"500\",ls:1.5},\r\n\t\t{fs:40, fst:\"italic\", lh:44, ff:\"Raleway\",fw:\"800\",ls:2},\r\n\t\t{fs:40, lh:50, ff:\"Arial\",fw:\"400\",ls:0},\r\n\t\t{fs:40, lh:50, ff:\"Roboto\",fw:\"900\",ls:0, tt:\"uppercase\"},\r\n\t\t{fs:60, lh:70, ff:\"Poppins\",fw:\"500\",ls:\"-1\",tt:\"uppercase\"},\r\n\t\t{fs:80, lh:90, ff:\"Poppins\",fw:\"800\",ls:\"-4\"},\r\n\t\t{fs:80, lh:90, ff:\"Montserrat\",fw:\"200\",ls:\"-0.2\"},\r\n\t\t{fs:100, lh:110, ff:\"Montserrat\",fw:\"100\",ls:\"-6\"}\r\n\t\t],\r\n\theadlines_color : '#fff',\r\n\tcontent_color : '#fff',\r\n\tcontent: [\r\n\t\t{fs:14, lh:24, ff:\"Roboto\",fw:\"400\",ls:1},\r\n\t\t{fs:16, lh:24, ff:\"Poppins\",fw:\"400\",ls:2},\r\n\t\t{fs:12, lh:20, ff:\"Arial\",fw:\"400\", content:\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam vestibulum orci at leo consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore...\"},\r\n\t\t{fs:15, lh:25, ff:\"Montserrat\",fw:\"400\", ls:2},\r\n\t\t{fs:13, lh:20, ff:\"Open Sans\",fw:\"400\", ls:2, tt:\"uppercase\"},\r\n\t\t{fs:16, lh:24, ff:\"Roboto\",fw:\"500\",ls:0},\r\n\t\t{fs:24, lh:30, ff:\"Open Sans\",fw:\"300\",ls:1, content:\"Lorem ipsum dolor sit amet, consectetur adipiscing elit\"}\r\n\t\t],\r\n\tbuttons:[\r\n\t\t// NEW BUTTONS\r\n\t\t{showsize:\"half\",fs:15, fw:\"500\", ff:\"Roboto\", lh:32, pd:[\"0px\",\"20px\",\"0px\",\"20px\"],  bg:\"rgba(255,255,255,1)\", color:\"#000000\", content:\"Click Here\", cls:\"rev-btn\", hc:\"rgba(255,255,255,1)\", hbg:\"#000000\", hs:300, ease:\"power3.inOut\"},\r\n\t\t{showsize:\"half\",fs:15, fw:\"500\", ff:\"Roboto\", lh:32, pd:[\"0px\",\"20px\",\"0px\",\"20px\"],  br:[\"16px\", \"16px\", \"16px\", \"16px\"], bg:\"rgba(255,255,255,1)\", color:\"#000000\", content:\"Click Here\", cls:\"rev-btn\", hc:\"rgba(255,255,255,1)\", hbg:\"#000000\", hs:300,ease:\"power3.inOut\"},\r\n\r\n\t\t{showsize:\"half\",fs:20, fw:\"500\", ff:\"Roboto\", lh:50, pd:[\"0px\",\"20px\",\"0px\",\"20px\"],  bg:\"rgba(0,0,0,1)\", color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200,ease:\"power1.inOut\"},\r\n\t\t{showsize:\"half\",fs:20, fw:\"500\", ff:\"Roboto\", lh:50, pd:[\"0px\",\"20px\",\"0px\",\"20px\"],  br:[\"25px\", \"25px\", \"25px\", \"25px\"], bg:\"rgba(0,0,0,1)\", color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200,ease:\"power1.inOut\"},\r\n\r\n\t\t{showsize:\"half\",fs:17, fw:\"500\", ff:\"Roboto\", lh:40, pd:[\"0px\",\"25px\",\"0px\",\"25px\"],  bg:\"rgba(0,0,0,0)\", bw:[\"1px\",\"1px\",\"1px\",\"1px\"], bs:\"solid\", bc:\"rgba(255,255,255,0.35)\", color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hbc:\"rgba(255,255,255,0.75)\", hc:\"rgba(255,255,255,1)\", hs:300,ease:\"power1.inOut\"},\r\n\t\t{showsize:\"half\",fs:17, fw:\"500\", ff:\"Roboto\", lh:40, pd:[\"0px\",\"25px\",\"0px\",\"25px\"],  br:[\"25px\", \"25px\", \"25px\", \"25px\"], bw:[\"1px\",\"1px\",\"1px\",\"1px\"], bs:\"solid\", bc:\"rgba(255,255,255,0.35)\",  bg:\"rgba(0,0,0,0)\", color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hbc:\"rgba(255,255,255,0.75)\",hc:\"rgba(255,255,255,1)\",  hs:300,ease:\"power1.inOut\"},\r\n\r\n\r\n\t\t{showsize:\"half\",fs:17, fw:\"500\", ff:\"Roboto\", lh:40, pd:[\"0px\",\"25px\",\"0px\",\"25px\"],  bg:\"#007aff\",  color:\"#ffffff\", \t\t\t\t\t\t\t\t\t    content:\"Click Here\", cls:\"rev-btn\", hs:300, hc:\"#ffffff\", hbg:\"#007aff\", hfb:\"120%\", hfbl:0, hfg:0,ease:\"power3.inOut\"},\r\n\t\t{showsize:\"half\",fs:17, fw:\"500\", ff:\"Roboto\", lh:40, pd:[\"0px\",\"25px\",\"0px\",\"25px\"],  bg:\"#007aff\",  color:\"#ffffff\", br:[\"25px\", \"25px\", \"25px\", \"25px\"], content:\"Click Here\", cls:\"rev-btn\", hs:300, hc:\"#ffffff\", hbg:\"#007aff\", hfb:\"120%\", hfbl:0, hfg:0,ease:\"power3.inOut\"},\r\n\r\n\t\t{fs:18, fw:\"500\", ff:\"Roboto\", lh:50, pd:[\"0px\",\"40px\",\"0px\",\"40px\"],  bg:\"#007aff\", br:[\"3px\", \"3px\", \"3px\", \"3px\"], color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hs:100, hc:\"#ffffff\", hbg:\"#007aff\", hfb:\"120%\", hfbl:0, hfg:0,ease:\"power1.inOut\"},\r\n\t\t{fs:20, fw:\"500\", ff:\"Roboto\", lh:55, pd:[\"0px\",\"50px\",\"0px\",\"50px\"],  bg:\"#007aff\", br:[\"3px\", \"3px\", \"3px\", \"3px\"], color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hs:100, hc:\"#ffffff\", hbg:\"#007aff\", hfb:\"120%\", hfbl:0, hfg:0,ease:\"power1.inOut\"},\r\n\r\n\t\t{fs:18, fw:\"500\", ff:\"Roboto\", lh:50, pd:[\"0px\",\"40px\",\"0px\",\"40px\"],  bxb:\"20px\", bxc:\"#461d7d\", bxv:\"5px\", bxh:\"0px\", bxs:\"0px\", br:[\"5px\", \"5px\", \"5px\", \"5px\"], color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hs:300, hc:\"#ffffff\", hbg:\"{&type&:&linear&,&angle&:&181&,&colors&:[{&r&:110,&g&:74,&b&:185,&a&:1,&position&:0,&align&:&top&},{&r&:110,&g&:74,&b&:185,&a&:1,&position&:0,&align&:&bottom&},{&r&:94,&g&:53,&b&:177,&a&:1,&position&:100,&align&:&bottom&},{&r&:94,&g&:53,&b&:177,&a&:1,&position&:100,&align&:&top&}],&easing&:&sine.easeinout&,&strength&:100}\", hfb:\"120%\", hfbl:0, hfg:0,ease:\"power1.inOut\", bg:\"{&type&:&linear&,&angle&:&181&,&colors&:[{&r&:110,&g&:74,&b&:185,&a&:1,&position&:0,&align&:&top&},{&r&:110,&g&:74,&b&:185,&a&:1,&position&:0,&align&:&bottom&},{&r&:94,&g&:53,&b&:177,&a&:1,&position&:100,&align&:&bottom&},{&r&:94,&g&:53,&b&:177,&a&:1,&position&:100,&align&:&top&}],&easing&:&sine.easeinout&,&strength&:100}\"},\r\n\t\t{fs:20, fw:\"500\", ff:\"Roboto\", lh:60, pd:[\"0px\",\"60px\",\"0px\",\"60px\"],  bxb:\"20px\", bxc:\"#461d7d\", bxv:\"5px\", bxh:\"0px\", bxs:\"0px\", br:[\"5px\", \"5px\", \"5px\", \"5px\"], color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hs:300, hc:\"#ffffff\", hbg:\"{&type&:&linear&,&angle&:&181&,&colors&:[{&r&:110,&g&:74,&b&:185,&a&:1,&position&:0,&align&:&top&},{&r&:110,&g&:74,&b&:185,&a&:1,&position&:0,&align&:&bottom&},{&r&:94,&g&:53,&b&:177,&a&:1,&position&:100,&align&:&bottom&},{&r&:94,&g&:53,&b&:177,&a&:1,&position&:100,&align&:&top&}],&easing&:&sine.easeinout&,&strength&:100}\", hfb:\"120%\", hfbl:0, hfg:0,ease:\"power1.inOut\", bg:\"{&type&:&linear&,&angle&:&181&,&colors&:[{&r&:110,&g&:74,&b&:185,&a&:1,&position&:0,&align&:&top&},{&r&:110,&g&:74,&b&:185,&a&:1,&position&:0,&align&:&bottom&},{&r&:94,&g&:53,&b&:177,&a&:1,&position&:100,&align&:&bottom&},{&r&:94,&g&:53,&b&:177,&a&:1,&position&:100,&align&:&top&}],&easing&:&sine.easeinout&,&strength&:100}\"},\r\n\r\n\t\t{fs:18, fw:\"500\", ff:\"Roboto\", lh:50, pd:[\"0px\",\"40px\",\"0px\",\"40px\"],  bxb:\"20px\", bxc:\"rgba(0,0,0,0.25)\", bxv:\"10px\", bxh:\"0px\", bxs:\"0px\", br:[\"5px\", \"5px\", \"5px\", \"5px\"], color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hs:300, hc:\"#ffffff\", hbg:\"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:255,&g&:149,&b&:0,&a&:1,&position&:0,&align&:&top&},{&r&:255,&g&:149,&b&:0,&a&:1,&position&:0,&align&:&bottom&},{&r&:255,&g&:94,&b&:58,&a&:1,&position&:100,&align&:&bottom&},{&r&:255,&g&:94,&b&:58,&a&:1,&position&:100,&align&:&top&}],&easing&:&none&,&strength&:100}\", hfb:\"120%\", hfbl:0, hfg:0,ease:\"power1.inOut\", bg:\"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:255,&g&:149,&b&:0,&a&:1,&position&:0,&align&:&top&},{&r&:255,&g&:149,&b&:0,&a&:1,&position&:0,&align&:&bottom&},{&r&:255,&g&:94,&b&:58,&a&:1,&position&:100,&align&:&bottom&},{&r&:255,&g&:94,&b&:58,&a&:1,&position&:100,&align&:&top&}],&easing&:&none&,&strength&:100}\"},\r\n\t\t{fs:20, fw:\"500\", ff:\"Roboto\", lh:60, pd:[\"0px\",\"60px\",\"0px\",\"60px\"],  bxb:\"20px\", bxc:\"rgba(0,0,0,0.25)\", bxv:\"10px\", bxh:\"0px\", bxs:\"0px\", br:[\"5px\", \"5px\", \"5px\", \"5px\"], color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hs:300, hc:\"#ffffff\", hbg:\"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:255,&g&:149,&b&:0,&a&:1,&position&:0,&align&:&top&},{&r&:255,&g&:149,&b&:0,&a&:1,&position&:0,&align&:&bottom&},{&r&:255,&g&:94,&b&:58,&a&:1,&position&:100,&align&:&bottom&},{&r&:255,&g&:94,&b&:58,&a&:1,&position&:100,&align&:&top&}],&easing&:&none&,&strength&:100}\", hfb:\"120%\", hfbl:0, hfg:0,ease:\"power1.inOut\", bg:\"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:255,&g&:149,&b&:0,&a&:1,&position&:0,&align&:&top&},{&r&:255,&g&:149,&b&:0,&a&:1,&position&:0,&align&:&bottom&},{&r&:255,&g&:94,&b&:58,&a&:1,&position&:100,&align&:&bottom&},{&r&:255,&g&:94,&b&:58,&a&:1,&position&:100,&align&:&top&}],&easing&:&none&,&strength&:100}\"},\r\n\r\n\t\t// OLD BUTTONS\r\n\t\t/*{showsize:\"half\",fs:17, ff:\"Roboto\", lh:20, pd:[\"12px\",\"35px\",\"12px\",\"35px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\", hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\t\t{showsize:\"half\",fs:17, ff:\"Roboto\", lh:20, pd:[\"12px\",\"35px\",\"12px\",\"35px\"], br:[\"30px\", \"30px\", \"30px\", \"30px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\t\t{showsize:\"half\",fs:14, ff:\"Roboto\", lh:18, pd:[\"10px\",\"30px\",\"10px\",\"30px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:\"Click Here\",cls:\"rev-btn\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\t\t{showsize:\"half\",fs:14, ff:\"Roboto\", lh:18, pd:[\"10px\",\"30px\",\"10px\",\"30px\"], br:[\"30px\", \"30px\", \"30px\", \"30px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:\"Click Here\",cls:\"rev-btn\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\t\t{showsize:\"half\",fs:12, ff:\"Roboto\", lh:14, pd:[\"8px\",\"20px\",\"8px\",\"20px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\t\t{showsize:\"half\",fs:12, ff:\"Roboto\", lh:14, pd:[\"8px\",\"20px\",\"8px\",\"20px\"], br:[\"30px\", \"30px\", \"30px\", \"30px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:\"Click Here\", cls:\"rev-btn\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},*/\r\n\r\n\t\t{fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"12px\",\"35px\",\"12px\",\"35px\"], br:[\"30px\", \"30px\", \"30px\", \"30px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:'Click Here <i class=\"fa-chevron-right\"></i>', cls:\"rev-btn\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\t\t{fs:14, ff:\"Roboto\", lh:18, ls:1, tt:\"uppercase\", pd:[\"10px\",\"30px\",\"10px\",\"30px\"], br:[\"30px\", \"30px\", \"30px\", \"30px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:'Click Here <i class=\"fa-chevron-right\"></i>',cls:\"rev-btn\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\t\t{fs:12, ff:\"Roboto\", lh:14, ls:1, tt:\"uppercase\", pd:[\"8px\",\"20px\",\"8px\",\"20px\"], br:[\"30px\", \"30px\", \"30px\", \"30px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:'Click Here <i class=\"fa-chevron-right\"></i>', cls:\"rev-btn\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\r\n\t\t{fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"12px\",\"35px\",\"12px\",\"35px\"], br:[\"30px\", \"30px\", \"30px\", \"30px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:'Click Here <i class=\"fa-chevron-right\"></i>', cls:\"rev-btn rev-hiddenicon\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\t\t{fs:14, ff:\"Roboto\", lh:18, ls:1, tt:\"uppercase\", pd:[\"10px\",\"30px\",\"10px\",\"30px\"], br:[\"30px\", \"30px\", \"30px\", \"30px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:'Click Here <i class=\"fa-chevron-right\"></i>',cls:\"rev-btn rev-hiddenicon\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\t\t{fs:12, ff:\"Roboto\", lh:14, ls:1, tt:\"uppercase\", pd:[\"8px\",\"20px\",\"8px\",\"20px\"], br:[\"30px\", \"30px\", \"30px\", \"30px\"],  bg:\"rgba(0,0,0,0.75)\", color:\"#ffffff\", content:'Click Here <i class=\"fa-chevron-right\"></i>', cls:\"rev-btn rev-hiddenicon\",hc:\"rgba(0,0,0,1)\", hbg:\"#ffffff\", hs:200},\r\n\r\n\t\t{showsize:\"third\", fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"22px\",\"14px\",\"22px\",\"14px\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"], color:\"#ffffff\", ignoreIntelligent:true,content:'<span></span><span></span><span></span>', cls:\"rev-burger rev-b-span-light\", action:{action:\"toggle_class\", toggle_class:\"open\", tooltip_event:\"click\"}},\r\n\t\t{showsize:\"third\",fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"22px\",\"14px\",\"22px\",\"14px\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"], bc:\"rgba(255,255,255,0.75)\", bs:\"solid\", bw:[\"2px\",\"2px\",\"2px\",\"2px\"],color:\"#ffffff\", ignoreIntelligent:true,content:'<span></span><span></span><span></span>', cls:\"rev-burger rev-b-span-light\", action:{action:\"toggle_class\", toggle_class:\"open\", tooltip_event:\"click\"}},\r\n\t\t{showsize:\"third\",fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"22px\",\"14px\",\"22px\",\"14px\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"],  bg:\"#ffffff\", color:\"#ffffff\", ignoreIntelligent:true,content:'<span></span><span></span><span></span>', cls:\"rev-burger rev-b-span-dark\", action:{action:\"toggle_class\", toggle_class:\"open\", tooltip_event:\"click\"}},\r\n\r\n\t\t{showsize:\"third\",fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"22px\",\"14px\",\"22px\",\"14px\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"], color:\"#ffffff\", ignoreIntelligent:true,content:'<span></span><span></span><span></span>', cls:\"rev-burger rev-b-span-dark\", action:{action:\"toggle_class\", toggle_class:\"open\", tooltip_event:\"click\"}},\r\n\t\t{showsize:\"third\",fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"22px\",\"14px\",\"22px\",\"14px\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"], bc:\"rgba(51,51,51,0.75)\", bs:\"solid\", bw:[\"2px\",\"2px\",\"2px\",\"2px\"],color:\"#ffffff\", ignoreIntelligent:true,content:'<span></span><span></span><span></span>', cls:\"rev-burger rev-b-span-dark\", action:{action:\"toggle_class\", toggle_class:\"open\", tooltip_event:\"click\"}},\r\n\t\t{showsize:\"third\",fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"22px\",\"14px\",\"22px\",\"14px\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"],   bg:\"#333333\", color:\"#ffffff\", ignoreIntelligent:true,content:'<span></span><span></span><span></span>', cls:\"rev-burger rev-b-span-light\", action:{action:\"toggle_class\", toggle_class:\"open\", tooltip_event:\"click\"}},\r\n\r\n\t\t{showsize:\"fourth\",w:\"35px\", h:\"55px\", fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"22px\",\"14px\",\"22px\",\"14px\"], br:[\"23px\", \"23px\", \"23px\", \"23px\"], bc:\"rgba(255,255,255,0.75)\", bs:\"solid\", bw:[\"3px\",\"3px\",\"3px\",\"3px\"],color:\"#ffffff\", ignoreIntelligent:true, content:'<span></span><span></span><span></span>', cls:\"rev-scroll-btn rev-b-span-light\"},\r\n\t\t{showsize:\"fourth\",w:\"35px\", h:\"55px\", fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"22px\",\"14px\",\"22px\",\"14px\"], br:[\"23px\", \"23px\", \"23px\", \"23px\"], bc:\"rgba(255,255,255,0.75)\", bs:\"solid\", bw:[\"3px\",\"3px\",\"3px\",\"3px\"], bg:\"#fff\", ignoreIntelligent:true, color:\"#ffffff\", content:'<span></span><span></span><span></span>', cls:\"rev-scroll-btn rev-b-span-dark\"},\r\n\t\t{showsize:\"fourth\",w:\"35px\", h:\"55px\", fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"22px\",\"14px\",\"22px\",\"14px\"], br:[\"23px\", \"23px\", \"23px\", \"23px\"], bc:\"rgba(51,51,51,0.75)\", bs:\"solid\", bw:[\"3px\",\"3px\",\"3px\",\"3px\"],color:\"#ffffff\", ignoreIntelligent:true, content:'<span></span><span></span><span></span>', cls:\"rev-scroll-btn rev-b-span-dark\"},\r\n\t\t{showsize:\"fourth\",w:\"35px\", h:\"55px\", fs:17, ff:\"Roboto\", lh:20, ls:1, tt:\"uppercase\", pd:[\"22px\",\"14px\",\"22px\",\"14px\"], br:[\"23px\", \"23px\", \"23px\", \"23px\"], bc:\"rgba(51,51,51,0.75)\", bs:\"solid\", bw:[\"3px\",\"3px\",\"3px\",\"3px\"], bg:\"#333\", ignoreIntelligent:true, color:\"#ffffff\", content:'<span></span><span></span><span></span>', cls:\"rev-scroll-btn rev-b-span-light\"},\r\n\r\n\t\t{showsize:\"fourth\",w:\"37px\", h:\"37px\", fs:20, ff:\"Roboto\", lh:37, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"],   bg:\"#3B5998\", color:\"#ffffff\", content:'<i class=\"fa-facebook-f\"></i>', cls:\"\"},\r\n\t\t{showsize:\"fourth\",w:\"37px\", h:\"37px\", fs:20, ff:\"Roboto\", lh:37, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"],   bg:\"#FD1D1D\", color:\"#ffffff\", content:'<i class=\"fa-instagram\"></i>', cls:\"\"},\r\n\t\t{showsize:\"fourth\",w:\"37px\", h:\"37px\", fs:20, ff:\"Roboto\", lh:37, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"],   bg:\"#00A0D1\", color:\"#ffffff\", content:'<i class=\"fa-twitter\"></i>', cls:\"\"},\r\n\t\t{showsize:\"fourth\",w:\"37px\", h:\"37px\", fs:20, ff:\"Roboto\", lh:37, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"],   bg:\"rgba(0,0,0,0.5)\", color:\"#ffffff\", content:'<i class=\"fa-envelope\"></i>', cls:\"\"},\r\n\r\n\r\n\t\t{showsize:\"fourth\",w:\"60px\", h:\"60px\", fs:20, ff:\"Roboto\", lh:60, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"],   bg:\"rgba(0,0,0,0.5)\", color:\"#ffffff\", content:'<i class=\"fa-play\"></i>', cls:\"\"},\r\n\t\t{showsize:\"fourth\",w:\"60px\", h:\"60px\", fs:20, ff:\"Roboto\", lh:60, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"],   bg:\"#ffffff\", color:\"#333333\", content:'<i class=\"fa-play\"></i>', cls:\"\"},\r\n\t\t{showsize:\"fourth\",w:\"60px\", h:\"60px\", fs:20, ff:\"Roboto\", lh:60, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"5px\", \"5px\", \"5px\", \"5px\"],   bg:\"rgba(0,0,0,0.5)\", color:\"#ffffff\", content:'<i class=\"fa-play\"></i>', cls:\"\"},\r\n\t\t{showsize:\"fourth\",w:\"60px\", h:\"60px\", fs:20, ff:\"Roboto\", lh:60, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"5px\", \"5px\", \"5px\", \"5px\"],   bg:\"#ffffff\", color:\"#333333\", content:'<i class=\"fa-play\"></i>', cls:\"\"},\r\n\r\n\t\t{showsize:\"fourth\",w:\"60px\", h:\"60px\", fs:20, ff:\"Roboto\", lh:60, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"],   bg:\"rgba(0,0,0,0.5)\", color:\"#ffffff\", content:'<i class=\"fa-pause\"></i>', cls:\"\"},\r\n\t\t{showsize:\"fourth\",w:\"60px\", h:\"60px\", fs:20, ff:\"Roboto\", lh:60, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"50%\", \"50%\", \"50%\", \"50%\"],   bg:\"#ffffff\", color:\"#333333\", content:'<i class=\"fa-pause\"></i>', cls:\"\"},\r\n\t\t{showsize:\"fourth\",w:\"60px\", h:\"60px\", fs:20, ff:\"Roboto\", lh:60, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"5px\", \"5px\", \"5px\", \"5px\"],   bg:\"rgba(0,0,0,0.5)\", color:\"#ffffff\", content:'<i class=\"fa-pause\"></i>', cls:\"\"},\r\n\t\t{showsize:\"fourth\",w:\"60px\", h:\"60px\", fs:20, ff:\"Roboto\", lh:60, ta:\"center\", tt:\"uppercase\", pd:[\"0\",\"0\",\"0\",\"0\"], br:[\"5px\", \"5px\", \"5px\", \"5px\"],   bg:\"#ffffff\", color:\"#333333\", content:'<i class=\"fa-pause\"></i>', cls:\"\"}\r\n\t],\r\n\tshadows:[\r\n\t\t{showsize:\"half\", box_hoff:\"0px\", box_voff:\"0px\", box_blur:\"0px\", box_spread:\"0px\", box_color:\"rgba(0,0,0,0.5)\", box_inset:false },\r\n\t\t{ showsize:\"half\",box_hoff:\"5px\", box_voff:\"0px\", box_blur:\"10px\", box_spread:\"0px\", box_color:\"rgba(0,0,0,0.25)\", box_inset:false },\r\n\t\t{showsize:\"half\", box_hoff:\"0px\", box_voff:\"10px\", box_blur:\"10px\", box_spread:\"0px\", box_color:\"rgba(0,0,0,0.25)\", box_inset:false },\r\n\t\t{showsize:\"half\", box_hoff:\"5px\", box_voff:\"5px\", box_blur:\"10px\", box_spread:\"0px\", box_color:\"rgba(0,0,0,0.15)\", box_inset:false },\r\n\r\n\t\t{showsize:\"half\", text_hoff:\"7px\", text_voff:\"7px\", text_blur:\"10px\", text_color:\"rgba(0,0,0,0.75)\" },\r\n\t\t{showsize:\"half\", text_hoff:\"5px\", text_voff:\"0px\", text_blur:\"10px\", text_color:\"rgba(0,0,0,0.75)\" },\r\n\t\t{showsize:\"half\", text_hoff:\"0px\", text_voff:\"10px\", text_blur:\"10px\", text_color:\"rgba(0,0,0,0.75)\" },\r\n\t\t{showsize:\"half\", text_hoff:\"15px\", text_voff:\"15px\", text_blur:\"20px\", text_color:\"rgba(0,0,0,0.45)\" }\r\n\t]\r\n});\r\nRVS.LIB.QS_CONT = {\r\n\theadlines:\"Headline\",\r\n\tcontent:\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam vestibulum orci at leo...\"\r\n};\r\n\r\n/**********************************\r\n\t-\tQUICK STYLE -\r\n********************************/\r\n(function() {\r\n\r\n\t// INIT OVERVIEW\r\n\tRVS.F.initQuickStyle = function() {\r\n\t\tinitLocalListeners();\r\n\t};\r\n\r\n\tRVS.F.openQuickStyle = function(_) {\r\n\t\tjQuery('#quick_style_trigger').addClass(\"selected\");\r\n\t\tRVS.S.qstyleBackupGroup = _==undefined || _.bacupGroupOpen===undefined ? undefined : _.bacupGroupOpen;\r\n\t\tRVS.S.qstyle_library_open = true;\r\n\t\tRVS.S.qstyleParams = _;\r\n\t\tif (!window.quickStyleExists) {\r\n\t\t\tbuildQuickStyle();\r\n\t\t\twindow.quickStyleExists = true;\r\n\t\t} else {\r\n\t\t\tRVS.F.showQuickStyle();\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.showQuickStyle = function() {\r\n\t\tRVS.F.updateAvailableLayerTypes();\r\n\t\ttpGS.gsap.to('#quick_style',0.4,{width:320,display:\"block\", ease:\"power3.inOut\"});\r\n\t\ttpGS.gsap.to('#quick_style_inner',0.4,{left:0, ease:\"power3.inOut\"});\r\n\t\tsetTimeout(setQSMenu,400);\r\n\t};\r\n\r\n\tRVS.F.updateAvailableLayerTypes = function() {\r\n\t\tif (!RVS.S.qstyle_library_open) return;\r\n\t\twindow.quickstylefilter = [];\r\n\t\tvar btns = false, headlines = false, content=false, first = false,ignoreshadows=false;\t\r\n\r\n\t\tRVS.F.qstyleParamsListCase = RVS.F.qstyleParamsListCase===undefined ? {} : RVS.F.qstyleParamsListCase;\t\t\r\n\r\n\t\tif (RVS.S.qstyleParams.list!==undefined && Array.isArray((RVS.S.qstyleParams.list)))\r\n\t\t\tfor (var lid in RVS.S.qstyleParams.list) {\r\n\t\t\t\tif(!RVS.S.qstyleParams.list.hasOwnProperty(lid)) continue;\r\n\t\t\t\tswitch (RVS.S.qstyleParams.list[lid]) {\r\n\t\t\t\t\tcase \"button\":\r\n\t\t\t\t\t\tif (!btns) {\r\n\t\t\t\t\t\t\twindow.quickstylefilter.push(\"buttons\");\r\n\t\t\t\t\t\t\tfirst = first===false ? \"buttons\" : first;\r\n\t\t\t\t\t\t\tbtns = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"content\":\r\n\t\t\t\t\t\tif (!content) {\r\n\t\t\t\t\t\t\twindow.quickstylefilter.push(\"content\");\r\n\t\t\t\t\t\t\tfirst = first===false ? \"content\" : first;\r\n\t\t\t\t\t\t\tcontent = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"headlines\":\r\n\t\t\t\t\tcase \"text\":\r\n\t\t\t\t\t\tif (!headlines) {\r\n\t\t\t\t\t\t\twindow.quickstylefilter.push(\"headlines\");\r\n\t\t\t\t\t\t\tfirst = first===false ? \"headlines\" : first;\r\n\t\t\t\t\t\t\theadlines = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif (RVS.F.qstyleParamsListCase[RVS.S.qstyleParams.list[lid]]!==undefined && window.quickstylefilter.indexOf(RVS.S.qstyleParams.list[lid])===-1)\r\n\t\t\t\t\t\t\tignoreshadows = RVS.F.qstyleParamsListCase[RVS.S.qstyleParams.list[lid]](RVS.S.qstyleParams.list[lid]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\telse\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\tif (RVS.L[RVS.selLayers[lid]].subsubtype!==undefined && RVS.LIB.QS[RVS.L[RVS.selLayers[lid]].subsubtype]!==undefined) {\r\n\t\t\t\tswitch(RVS.L[RVS.selLayers[lid]].subsubtype) {\t\t\t\t\t\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\r\n\t\t\t\t\t if (RVS.F.qstyleParamsListCase[RVS.L[RVS.selLayers[lid]].subsubtype] && window.quickstylefilter.indexOf(RVS.L[RVS.selLayers[lid]].subsubtype)==-1)\r\n\t\t\t\t\t \tignoreshadows = RVS.F.qstyleParamsListCase[RVS.L[RVS.selLayers[lid]].subsubtype](RVS.L[RVS.selLayers[lid]].subsubtype);\t\t\t\t\t\t \r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tswitch (RVS.L[RVS.selLayers[lid]].type) {\r\n\t\t\t\t\tcase \"button\":\r\n\t\t\t\t\t\tif (!btns) {\r\n\t\t\t\t\t\t\twindow.quickstylefilter.push(\"buttons\");\r\n\t\t\t\t\t\t\tbtns = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"text\":\r\n\t\t\t\t\t\tif (!headlines) {\r\n\t\t\t\t\t\t\twindow.quickstylefilter.push(\"headlines\");\r\n\t\t\t\t\t\t\twindow.quickstylefilter.push(\"content\");\r\n\t\t\t\t\t\t\theadlines = true;\r\n\t\t\t\t\t\t\tcontent = true;\r\n\t\t\t\t\t\t\tfirst = \"headlines\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t}\r\n\r\n\t\tif (window.quickstylefilter.length===0) {\r\n\t\t\twindow.quickstylefilter.push(\"headlines\");\r\n\t\t\twindow.quickstylefilter.push(\"content\");\r\n\t\t\twindow.quickstylefilter.push(\"buttons\");\r\n\t\t}\r\n\t\tif (!ignoreshadows && jQuery.inArray(\"shadows\",window.quickstylefilter)===-1) window.quickstylefilter.push(\"shadows\");\r\n\r\n\t\tjQuery('.quick_style_dep_all').hide();\r\n\t\tjQuery('.quick_style_menu_point').hide();\r\n\t\tfor (var i in window.qstyle_scroll_targets) {\r\n\t\t\tif(!window.qstyle_scroll_targets.hasOwnProperty(i)) continue;\r\n\t\t\tif (jQuery.inArray(window.qstyle_scroll_targets[i].library,window.quickstylefilter)>=0)\r\n\t\t\t\twindow.qstyle_scroll_targets[i].enable = true;\r\n\t\t\telse\r\n\t\t\t\twindow.qstyle_scroll_targets[i].enable = false;\r\n\t\t}\r\n\t\tfor (var i in window.quickstylefilter) {\t\t\t\r\n\t\t\tif(!window.quickstylefilter.hasOwnProperty(i)) continue;\r\n\t\t\tjQuery('#quick_style_dep_'+window.quickstylefilter[i]).show();\r\n\t\t\tjQuery('#quick_style_menu_'+window.quickstylefilter[i]).show();\t\t\t\r\n\t\t}\r\n\t\tif (first!==false) setTimeout(function() {\tjQuery('#quick_style_menu_'+first).trigger('click');},400);\r\n\t};\r\n\r\n\tRVS.F.closeQuickStyle = function() {\r\n\t\tif (RVS.S.qstyleBackupGroup!==undefined) RVS.F.closeBackupGroup({id:RVS.S.qstyleBackupGroup});\r\n\t\tRVS.S.qstyleBackupGroup = undefined;\r\n\t\tRVS.S.qstyle_library_open = false;\r\n\t\ttpGS.gsap.to('#quick_style',0.4,{width:0,display:\"none\", ease:\"power3.inOut\"});\r\n\t\ttpGS.gsap.to('#quick_style_inner',0.4,{left:-270, ease:\"power3.inOut\"});\r\n\t\tjQuery('#quick_style_trigger').removeClass(\"selected\");\r\n\t};\r\n\r\n\r\n\t/****************************\r\n\t\tINTERNAL FUNCTIONS\r\n\t****************************/\r\n\tfunction buildQuickStyle() {\r\n\t\tRVS.F.showWaitAMinute({fadeIn:100,text:\"Building Quick Style Library\"});\r\n\r\n\t\tvar requiredGoogleFonts = {},\r\n\t\t\tfamiliesToLoad = [];\r\n\t\t\r\n\t\tRVS.F.buildQuickStyleExtensionMenu = RVS.F.buildQuickStyleExtensionMenu===undefined ? {} : RVS.F.buildQuickStyleExtensionMenu;\r\n\r\n\t\tvar _c = '<div id=\"quick_style\"><div id=\"quick_style_inner\">';\r\n\t\t_c += '<div id=\"quick_style_menu\">';\r\n\t\tfor (var i in RVS.LIB.QS) {\r\n\t\t\tif(!RVS.LIB.QS.hasOwnProperty(i)) continue;\r\n\t\t\t_c += '<div data-ref=\"#quick_style_dep_'+i+'\" data-library=\"'+i+'\" id=\"quick_style_menu_'+i+'\" class=\"quick_style_menu_point\">'+RVS_LANG[\"qs_\"+i]+'</div>';\r\n\t\t\tif (RVS.F.buildQuickStyleExtensionMenu[i]!==undefined) _c += RVS.F.buildQuickStyleExtensionMenu[i](_);\r\n\t\t}\r\n\t\t\r\n\t\t_c += '<div id=\"quick_style_close\"><i class=\"material-icons\">close</i></div>';\r\n\t\t_c += '</div>';\r\n\t\t_c += '<div id=\"quick_style_scrollable_wrap\"><div id=\"quick_style_scrollable\">';\r\n\t\tfor (var i in RVS.LIB.QS) {\r\n\t\t\tif(!RVS.LIB.QS.hasOwnProperty(i)) continue;\r\n\t\t\t_c += '<div id=\"quick_style_dep_'+i+'\" class=\"quick_style_dep_all\"><div class=\"quick_style_dep\">'+RVS_LANG[\"qs_\"+i]+(i==='headlines' || i==='content'  ? '<div data-cont=\"'+i+'\" class=\"quick_colorchange_dark\"></div><div data-cont=\"'+i+'\"  class=\"quick_colorchange_light selected\"></div>' : '')+'</div>';\r\n\t\t\t\r\n\t\t\tfor (var j in RVS.LIB.QS[i]) {\r\n\t\t\t\tif(!RVS.LIB.QS[i].hasOwnProperty(j)) continue;\r\n\t\t\t\tvar _ = RVS.F.safeExtend(true,{},RVS.LIB.QS[i][j]),\r\n\t\t\t\t\tcheckfont = false;\r\n\t\t\t\t_ = setButtonDefault(_);\r\n\t\t\t\tswitch (i) {\r\n\t\t\t\t\tcase \"headlines\":\r\n\t\t\t\t\tcase \"content\":\r\n\t\t\t\t\t\tvar bord = _.bc!==undefined && _.bw!==undefined && _.bs!==undefined ? 'border-style:'+_.bs+';border-width:'+_.bw[0]+' '+_.bw[1]+' '+_.bw[2]+' '+_.bw[3]+';border-color:'+_.bc+';' : '';\r\n\t\t\t\t\t\t_c += '<div class=\"quick_style_example_wrap\"><div class=\"quick_style_example\" data-layertype=\"text\" data-qstyletype=\"'+i+'\" data-qstyleindex=\"'+j+'\"><div class=\"qsec_info\">'+_.ff+','+_.fs+'px,'+_.fw+'</div><div class=\"quick_style_example_content\" style=\"'+(i===\"headlines\" ? \"white-space:nowrap;\":\"\")+bord+(_.tt!==undefined? 'text-transform:'+_.tt+';': '')+'font-style:'+_.fst+'; font-family:'+_.ff+';font-size:'+_.fs+'px; font-weight:'+_.fw+';line-height:'+_.lh+'px;letter-spacing:'+_.ls+'px\">'+(_.content!==undefined ? _.content : RVS.LIB.QS_CONT[i])+'</div></div></div>';\r\n\t\t\t\t\t\tcheckfont = true;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"buttons\":\r\n\t\t\t\t\t\tvar bord = _.bc!==undefined && _.bw!==undefined && _.bs!==undefined ? 'border-style:'+_.bs+';border-width:'+_.bw[0]+' '+_.bw[1]+' '+_.bw[2]+' '+_.bw[3]+';border-color:'+_.bc+';' : '',\r\n\t\t\t\t\t\t\thovon = _.hs!==undefined ? 'data-ease=\"'+_.ease+'\" data-filterbrightness=\"'+_.hfb+'\" data-filtergrayscale=\"'+_.hfg+'\" data-filterblur=\"'+_.hfbl+'\" data-hoverbordercolor=\"'+_.hbc+'\" data-hovercolor=\"'+_.hc+'\" data-hoverspeed=\"'+_.hs+'\" data-hoverbgcolor=\"'+_.hbg+'\" ' : '',\r\n\t\t\t\t\t\t\twh = _.w!==undefined ? 'width:'+_.w+';' : '';\r\n\t\t\t\t\t\twh = _.h!==undefined ? wh+'height:'+_.h+';' : wh;\r\n\t\t\t\t\t\t_c += '<div class=\"quick_style_example_wrap '+(_.showsize!==undefined ? 'qsew_'+_.showsize:'')+'\"><div class=\"quick_style_example\" data-layertype=\"button\" data-qstyletype=\"'+i+'\" data-qstyleindex=\"'+j+'\"><div class=\"quick_style_example_content '+_.cls+'\" '+hovon+' style=\"'+bord+wh+(_.tt!==undefined? 'text-transform:'+_.tt+';': '')+(_.ta!==undefined? 'text-align:'+_.ta+';': '')+(_.bxc!==undefined ? 'box-shadow:'+_.bxh+' '+_.bxv+' '+_.bxb+' '+_.bxs+' '+_.bxc+';' : '')+'border-radius:'+_.br[0]+' '+_.br[1]+' '+_.br[2]+' '+_.br[3]+';padding:'+_.pd[0]+' '+_.pd[1]+' '+_.pd[2]+' '+_.pd[3]+';background:'+window.RSColor.get(_.bg)+';font-style:'+_.fst+'; font-family:'+_.ff+';font-size:'+_.fs+'px; color:'+_.color+';font-weight:'+_.fw+';line-height:'+_.lh+'px;letter-spacing:'+_.ls+'px\">'+_.content+'</div></div></div>';\r\n\t\t\t\t\t\tcheckfont = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"shadows\":\r\n\t\t\t\t\t\tif (_.box_hoff!==undefined)\r\n\t\t\t\t\t\t\t_c += '<div class=\"quick_style_example_wrap '+(_.showsize!==undefined ? 'qsew_'+_.showsize:'')+'\"><div class=\"quick_style_example qse_boxshadow\" data-layertype=\"boxshadow\" data-qstyletype=\"'+i+'\" data-qstyleindex=\"'+j+'\" style=\"box-shadow:'+_.box_hoff+' '+_.box_voff+' '+_.box_blur+' '+_.box_spread+' '+_.box_color+'\"></div></div>';\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t_c += '<div class=\"quick_style_example_wrap '+(_.showsize!==undefined ? 'qsew_'+_.showsize:'')+'\"><div class=\"quick_style_example qse_textshadow\" data-layertype=\"textshadow\" data-qstyletype=\"'+i+'\" data-qstyleindex=\"'+j+'\" style=\"text-shadow:'+_.text_hoff+' '+_.text_voff+' '+_.text_blur+' '+_.text_color+'\">Shadow</div></div>';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tRVS.F.buildQuickStyleExtension = RVS.F.buildQuickStyleExtension===undefined ? {} : RVS.F.buildQuickStyleExtension;\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (RVS.F.buildQuickStyleExtension[i]!==undefined) {\r\n\t\t\t\t\t\t\t_c += RVS.F.buildQuickStyleExtension[i](j,_);\r\n\t\t\t\t\t\t\tcheckfont = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkfont) {\r\n\t\t\t\t\tvar family = _.ff.replace(/\\ /g,'_');\r\n\t\t\t\t\trequiredGoogleFonts[family] = requiredGoogleFonts[family]===undefined ? {family:family, weights:[], italic:false} : requiredGoogleFonts[family];\r\n\t\t\t\t\trequiredGoogleFonts[family].font = _.ff;\r\n\t\t\t\t\trequiredGoogleFonts[family].italic = requiredGoogleFonts[family].italic===true ? true : _.fst;\t\t\t\t\r\n\t\t\t\t\tfor (var s in RVS.V.sizes) {\t\r\n\t\t\t\t\t\tif(!RVS.V.sizes.hasOwnProperty(s)) continue;\r\n\t\t\t\t\t\tif (requiredGoogleFonts[family].weights.toString().indexOf(_.fw)===-1) requiredGoogleFonts[family].weights.push(_.fw);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_c +='</div>';\r\n\t\t}\r\n\t\t_c += '</div></div>';\r\n\t\t_c += '</div></div>';\r\n\t\twindow.qstyle_container = jQuery(_c);\r\n\t\twindow.qstyle_scroll_targets = [];\r\n\t\tfor (var i in requiredGoogleFonts) {\r\n\t\t\tif(!requiredGoogleFonts.hasOwnProperty(i)) continue;\r\n\t\t\tvar familie = RVS.F.loadSingleFont(requiredGoogleFonts[i]);\r\n\t\t\tif (familie!==undefined) familiesToLoad.push(familie);\r\n\t\t}\r\n\r\n\t\tRVS.F.showWaitAMinute({fadeOut:500,text:\"Building Quick Style Library\"});\r\n\r\n\t\t// LOAD NEEDED FONTS\r\n\t\tRVS.F.do_google_font_load(familiesToLoad,undefined,\"showQuickStyle\");\r\n\t\tRVS.C.theEditor.append(window.qstyle_container);\r\n\t\tvar id = 0;\r\n\t\tjQuery('.quick_style_menu_point').each(function() {\r\n\t\t\tif (this.dataset.ref!==undefined) {\r\n\t\t\t\twindow.qstyle_scroll_targets.push({\r\n\t\t\t\t\tenable : true,\r\n\t\t\t\t\tlibrary : this.dataset.library,\r\n\t\t\t\t\tobj : jQuery(this.dataset.ref),\r\n\t\t\t\t\ttop : jQuery(this.dataset.ref).offset().top,\r\n\t\t\t\t\theight : jQuery(this.dataset.ref).height(),\r\n\t\t\t\t\tmenu : jQuery(this),\r\n\t\t\t\t\tmenu_js : this\r\n\t\t\t\t});\r\n\t\t\t\tthis.dataset.ostref = id;\r\n\t\t\t\tid++;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tjQuery('#quick_style_scrollable').RSScroll({\r\n\t\t\twheelPropagation:false\r\n\t\t});\r\n\r\n\t\tjQuery('#quick_style_scrollable').on('scroll',setQSMenu);\r\n\r\n\t}\r\n\r\n\r\n\tfunction setButtonDefault(_) {\r\n\t\t_.ls = _.ls===undefined ? 0 : _.ls;\r\n\t\t_.fw = _.fw===undefined ? 400 : _.fw;\r\n\t\t_.fst = _.fst===undefined ? 'normal' : _.fst;\r\n\t\t_.pd = _.pd===undefined ? [\"0px\",\"0px\",\"0px\",\"0px\"] : _.pd;\r\n\t\t_.br = _.br===undefined ? [\"0px\",\"0px\",\"0px\",\"0px\"] : _.br;\r\n\t\t_.bg = _.bg===undefined ? \"transparent\" : _.bg;\r\n\t\t_.bs = _.bs===undefined ? \"none\" : _.bs;\r\n\t\t_.tt = _.tt===undefined ? \"none\" : _.tt;\r\n\t\treturn _;\r\n\t}\r\n\r\n\tfunction setContentColor(th,c) {\t\t\r\n\t\tvar cont = th.closest('.quick_style_dep_all');\r\n\t\tRVS.LIB.QS[th[0].dataset.cont+'_color'] = c==='dark' ? '#000' : '#fff';\r\n\t\tcont.find('.quick_colorchange_'+(c==='dark' ? 'light' : 'dark')).removeClass(\"selected\");\r\n\t\ttpGS.gsap.to(cont.find('.quick_style_example_content'),0.2,{color:RVS.LIB.QS[th[0].dataset.cont+'_color']});\r\n\t\ttpGS.gsap.to(cont.find('.quick_style_example_wrap'),0.2,{backgroundColor:c==='dark' ? '#fff' : '#202224'});\r\n\t\tcont.removeClass(\"light\").removeClass(\"dark\").addClass(c)\r\n\t\tth.addClass(\"selected\");\r\n\r\n\t}\r\n\r\n\tfunction initLocalListeners() {\r\n\t\tRVS.DOC.on('click','.quick_colorchange_dark',function() {setContentColor(jQuery(this),'dark');});\r\n\t\tRVS.DOC.on('click','.quick_colorchange_light',function() {setContentColor(jQuery(this),'light');});\r\n\r\n\t\tRVS.DOC.on('quickstyletrigger',function() {\r\n\t\t\tRVS.F.openQuickStyle(false);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#quick_style_close', RVS.F.closeQuickStyle);\r\n\t\tRVS.DOC.on('showQuickStyle',RVS.F.showQuickStyle);\r\n\t\tRVS.DOC.on('click','.quick_style_example',function() {\r\n\t\t\tvar qstype = this.dataset.qstyletype,\r\n\t\t\t\t_ = RVS.F.safeExtend(true,{},RVS.LIB.QS[qstype][this.dataset.qstyleindex]),\r\n\t\t\t\tltype = this.dataset.layertype,\r\n\t\t\t\tnewlayer = false;\r\n\t\t\tRVS.F.updateScreenShrinks();\r\n\t\t\t_ = setButtonDefault(_);\r\n\t\t\tif (RVS.selLayers.length===0) {\r\n\t\t\t\tif (ltype===\"textshadow\" || ltype===\"boxshadow\") return;\r\n\t\t\t\tvar newID = RVS.F.addLayer({type:ltype,forceSelect:true});\r\n\t\t\t\t//if (ltype!==\"button\") RVS.F.intelligentUpdateValuesOnLayer(newID);\r\n\r\n\t\t\t\tRVS.F.selectLayers({id:newID,overwrite:true, action:\"add\"});\r\n\t\t\t\t//newlayer = true;\r\n\r\n\t\t\t}\r\n\t\t\tif (RVS.S.qstyleBackupGroup===undefined) RVS.F.openBackupGroup({id:\"quickstyle\",txt:\"Quick Style Change\",icon:\"invert_colors\"});\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\r\n\t\t\t\t/* var l = RVS.L[RVS.selLayers[lid]], */\r\n\t\t\t\tvar pre = RVS.S.slideId+\".layers.\"+RVS.selLayers[lid]+\".\",\r\n\t\t\t\t\tupdateIntelligentInherit = false;\r\n\r\n\t\t\t\tswitch (ltype) {\r\n\t\t\t\t\tcase \"text\":\r\n\t\t\t\t\tcase \"button\":\r\n\t\t\t\t\t\tif ((RVS.L[RVS.selLayers[lid]].type===\"text\" && ltype===\"text\") || (RVS.L[RVS.selLayers[lid]].type===\"button\" && ltype===\"button\")) {\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (_.ignoreIntelligent) {\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'behavior.intelligentInherit',val:false});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'behavior.autoResponsive',val:false});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'behavior.responsiveOffset',val:false});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'behavior.responsiveChilds',val:false});\r\n\t\t\t\t\t\t\t\tupdateIntelligentInherit = false;\r\n\t\t\t\t\t\t\t} else updateIntelligentInherit = true;\r\n\t\t\t\t\t\t\tif (ltype===\"button\") {\r\n\t\t\t\t\t\t\t\t/*RVS.F.updateSliderObj({path:pre+'behavior.autoResponsive',val:false});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'behavior.intelligentInherit',val:false});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'behavior.responsiveChilds',val:false});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'behavior.responsiveOffset',val:false});*/\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\tif (ltype===\"text\" && (qstype===\"headlines\" || qstype===\"content\")) RVS.F.updateSliderObj({path:pre+'idle.color.d.v',val:RVS.LIB.QS[qstype+'_color']});\r\n\t\t\t\t\t\t\tif (_.fs!==undefined) RVS.F.updateSliderObj({path:pre+'idle.fontSize.d.v',val:_.fs});\r\n\t\t\t\t\t\t\tif (_.w!==undefined) RVS.F.updateSliderObj({path:pre+'size.width.d.v',val:_.w}); else RVS.F.updateSliderObj({path:pre+'size.width.d.v',val:\"auto\"});\r\n\t\t\t\t\t\t\tif (_.h!==undefined) RVS.F.updateSliderObj({path:pre+'size.height.d.v',val:_.h}); else RVS.F.updateSliderObj({path:pre+'size.height.d.v',val:\"auto\"});\r\n\t\t\t\t\t\t\tif (_.h!==undefined && _.h!==\"auto\")\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.minHeight.d.v',val:_.h});\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.minHeight.d.v',val:\"0px\"});\r\n\r\n\t\t\t\t\t\t\tif (_.w!==undefined)\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.minWidth.d.v',val:_.w});\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.minWidth.d.v',val:\"none\"});\r\n\t\t\t\t\t\t\tif (_.lh!==undefined) RVS.F.updateSliderObj({path:pre+'idle.lineHeight.d.v',val:_.lh});\r\n\t\t\t\t\t\t\tif (_.ls!==undefined) RVS.F.updateSliderObj({path:pre+'idle.letterSpacing.d.v',val:_.ls});\r\n\r\n\t\t\t\t\t\t\tif (_.fw!==undefined) RVS.F.updateSliderObj({path:pre+'idle.fontWeight.d.v',val:_.fw});\r\n\t\t\t\t\t\t\tif (_.fst!==undefined) RVS.F.updateSliderObj({path:pre+'idle.fontStyle',val:(_.fst===\"italic\")});\r\n\t\t\t\t\t\t\tif (_.ff!==undefined) RVS.F.updateSliderObj({path:pre+'idle.fontFamily',val:_.ff});\r\n\r\n\t\t\t\t\t\t\tif (_.ta!==undefined) RVS.F.updateSliderObj({path:pre+'idle.textAlign.d.v',val:_.ta});\r\n\t\t\t\t\t\t\tif (_.tt!==undefined) RVS.F.updateSliderObj({path:pre+'idle.textTransform',val:_.tt});\r\n\t\t\t\t\t\t\tif (_.pd!==undefined) RVS.F.updateSliderObj({path:pre+'idle.padding.d.v',val:_.pd});\r\n\t\t\t\t\t\t\tif (_.bg!==undefined) RVS.F.updateSliderObj({path:pre+'idle.backgroundColor',val:_.bg});\r\n\r\n\t\t\t\t\t\t\tif (_.br!==undefined) RVS.F.updateSliderObj({path:pre+'idle.borderRadius.v',val:_.br});\r\n\t\t\t\t\t\t\tif (_.bc!==undefined) RVS.F.updateSliderObj({path:pre+'idle.borderColor',val:_.bc});\r\n\t\t\t\t\t\t\tif (_.bw!==undefined) RVS.F.updateSliderObj({path:pre+'idle.borderWidth',val:_.bw});\r\n\t\t\t\t\t\t\tif (_.bs!==undefined) RVS.F.updateSliderObj({path:pre+'idle.borderStyle.d.v',val:_.bs});\r\n\r\n\t\t\t\t\t\t\tif (_.bxc!==undefined) {\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.inuse',val:true});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.hoffset.d.v',val:_.bxh});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.voffset.d.v',val:_.bxv});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.blur.d.v',val:_.bxb});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.spread.d.v',val:_.bxs});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.color',val:_.bxc});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.inuse',val:false});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (_.color!==undefined) RVS.F.updateSliderObj({path:pre+'idle.color.d.v',val:_.color});\r\n\r\n\t\t\t\t\t\t\tif (_.cls!==undefined)\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'runtime.internalClass',val:_.cls});\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'runtime.internalClass',val:\"\"});\r\n\r\n\t\t\t\t\t\t\tif (_.action!==undefined) {\r\n\t\t\t\t\t\t\t\tvar action;\r\n\t\t\t\t\t\t\t\taction = RVS.L[RVS.selLayers[lid]]!==undefined && RVS.L[RVS.selLayers[lid]].actions!==undefined && RVS.L[RVS.selLayers[lid]].actions.action!==undefined ? RVS.L[RVS.selLayers[lid]].actions.action : undefined;\r\n\t\t\t\t\t\t\t\tif (action!==undefined) {\r\n\t\t\t\t\t\t\t\t\tvar toggleexists = false;\r\n\t\t\t\t\t\t\t\t\tfor (var i in action) if (action.hasOwnProperty(i)) {\r\n\t\t\t\t\t\t\t\t\t\tif (toggleexists===true) continue;\r\n\t\t\t\t\t\t\t\t\t\ttoggleexists = action[i].action===\"toggle_class\" && (\"\"+action[i].layer_target)==(\"\"+RVS.selLayers[lid]) && action[i].toggle_class===\"open\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t_.action.layer_target = \"\"+RVS.selLayers[lid];\r\n\t\t\t\t\t\t\t\t\tif (toggleexists===false) action.push(_.action)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//if ( RVS.L[RVS.selLayers[lid]].type===\"button\") {\r\n\t\t\t\t\t\t\t\tif (_.content!=undefined && ltype===\"button\") {\r\n\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'text',val:_.content});\r\n\t\t\t\t\t\t\t\t\tRVS.H[RVS.selLayers[lid]].c.html(_.content);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//}\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\tif (_.hs!==undefined) {\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'hover.usehover',val:true});\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'hover.speed',val:_.hs});\r\n\t\t\t\t\t\t\t\tif (_.hc!==undefined) RVS.F.updateSliderObj({path:pre+'hover.color',val:_.hc});\r\n\t\t\t\t\t\t\t\tif (_.hbg!==undefined) RVS.F.updateSliderObj({path:pre+'hover.backgroundColor',val:_.hbg}); else if (_.bg!==undefined) RVS.F.updateSliderObj({path:pre+'hover.backgroundColor',val:_.bg});\r\n\t\t\t\t\t\t\t\tif (_.br!==undefined) RVS.F.updateSliderObj({path:pre+'hover.borderRadius.v',val:_.br});\r\n\t\t\t\t\t\t\t\tif (_.hbc!==undefined) RVS.F.updateSliderObj({path:pre+'hover.borderColor',val:_.hbc}); else if (_.bc!==undefined) RVS.F.updateSliderObj({path:pre+'hover.borderColor',val:_.bc});\r\n\t\t\t\t\t\t\t\tif (_.ease!==undefined) RVS.F.updateSliderObj({path:pre+'hover.ease',val:_.ease});\r\n\t\t\t\t\t\t\t\tif (_.hfb!==undefined) {\r\n\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'hover.filter.grayscale',val:_.hfg});\r\n\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'hover.filter.brightness',val:_.hfb});\r\n\t\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'hover.filter.blir',val:_.hfbl});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (_.bw!==undefined) RVS.F.updateSliderObj({path:pre+'hover.borderWidth',val:_.bw});\r\n\t\t\t\t\t\t\t\tif (_.bs!==undefined) RVS.F.updateSliderObj({path:pre+'hover.borderStyle',val:_.bs});\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'hover.usehover',val:false});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (_.callback!==undefined && RVS.F.updateQuickStyleObject!==undefined && RVS.F.updateQuickStyleObject[_.callback]!==undefined) RVS.F.updateQuickStyleObject[_.callback](_,pre,lid);\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"boxshadow\":\r\n\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.hoffset.d.v',val:_.box_hoff});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.voffset.d.v',val:_.box_voff});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.blur.d.v',val:_.box_blur});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.spread.d.v',val:_.box_spread});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.color',val:_.box_color});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.boxShadow.inuse',val:true});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"textshadow\":\r\n\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.textShadow.hoffset.d.v',val:_.text_hoff});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.textShadow.voffset.d.v',val:_.text_voff});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.textShadow.blur.d.v',val:_.text_blur});\r\n\t\t\t\t\t\t//RVS.F.updateSliderObj({path:pre+'idle.textShadow.spread.d.v',val:_.text_spread});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.textShadow.color',val:_.text_color});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'idle.textShadow.inuse',val:true});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t//if (ltype!==\"button\")\r\n\r\n\t\t\t\tRVS.F.intelligentUpdateValuesOnLayer(RVS.selLayers[lid]);\r\n\t\t\t\t//SET INTELLIGENT INHERITING ON THE LAYER AFTER UPDATING IT\r\n\t\t\t\t\r\n\r\n\t\t\t\tif (updateIntelligentInherit) RVS.F.setToIntelligentUpdate(true);\r\n\t\t\t\t//if (ltype!==\"button\" && newlayer===true)\r\n\t\t\t\tif (updateIntelligentInherit!==false) RVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+RVS.selLayers[lid]+'.behavior.intelligentInherit',val:true});\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[lid]});\r\n\t\t\t}\r\n\t\t\tif (RVS.S.qstyleBackupGroup===undefined) RVS.F.closeBackupGroup({id:\"quickstyle\"});\r\n\t\t\tRVS.F.updateLayerInputFields();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.quick_style_menu_point',function() {\r\n\t\t\tsetQSMenu();\r\n\t\t\tvar o = { val:jQuery('#quick_style_scrollable').scrollTop()},\r\n\t\t\t\tres = o.val + window.qstyle_scroll_targets[this.dataset.ostref].top;\r\n\r\n            tpGS.gsap.to(o,0.6,{val:res, onUpdate:function() {\r\n\t\t\t\tjQuery('#quick_style_scrollable').scrollTop(o.val);\r\n\t\t\t}, ease:\"power3.out\"});\r\n\t\t\tsetQSMenu();\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('mouseenter','.quick_style_example_content, .forms_quick_style_example_content', function() {\t\t\t\r\n\t\t\tif (this.dataset.hoverspeed!==undefined) {\r\n\t\t\t\tvar j = jQuery(this);\r\n\t\t\t\tif (j.data('hoveranim')===undefined) {\r\n\t\t\t\t\tvar ntl = tpGS.gsap.timeline(),\r\n\t\t\t\t\t\tanimto = {color:this.dataset.hovercolor, backgroundColor:this.dataset.hoverbgcolor};\r\n\r\n\t\t\t\t\tif (this.dataset.hoverbordercolor!==undefined && this.dataset.hoverbordercolor!=='undefined') animto.borderColor = this.dataset.hoverbordercolor;\r\n\t\t\t\t\tif (this.dataset.filterbrightness!==undefined && this.dataset.filterbrightness!=='undefined') {\r\n\t\t\t\t\t\tanimto.filter =  'blur('+this.dataset.filterblur+'px) grayscale('+this.dataset.filtergrayscale+'%) brightness('+this.dataset.filterbrightness+')';\r\n\t\t\t\t\t\tanimto[\"-webkit-filter\"] =  'blur('+this.dataset.filterblur+'px) grayscale('+this.dataset.filtergrayscale+'%) brightness('+this.dataset.filterbrightness+')';\r\n\t\t\t\t\t\ttpGS.gsap.set(this,{filter:'blur(0px) grayscale(0%) brightness(100%)', '-webkit-filter':'blur(0px) grayscale(0%) brightness(100%)'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dataset.ease!==undefined) animto.ease = this.dataset.ease;\r\n\t\t\t\t\tntl.add(tpGS.gsap.to(this,this.dataset.hoverspeed/1000,animto));\r\n\t\t\t\t\tj.data('hoveranim',ntl);\r\n\t\t\t\t}\r\n\t\t\t\tj.data('hoveranim').play();\r\n\t\t\t}\r\n\t\t});\r\n\t\tRVS.DOC.on('mouseleave','.quick_style_example_content, .forms_quick_style_example_content', function() {\r\n\t\t\tif (this.dataset.hoverspeed!==undefined)\r\n\t\t\t\tjQuery(this).data('hoveranim').reverse();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\tfunction setQSMenu() {\r\n\t\t/* var _so = jQuery('#quick_style_scrollable').scrollTop(), */\r\n\t\tvar lastitem = -1;\r\n\t\t/* lasttop = 0; */\r\n\r\n\t\tfor (var i in window.qstyle_scroll_targets) if (window.qstyle_scroll_targets.hasOwnProperty(i)) {\r\n\r\n\t\t\tif (window.qstyle_scroll_targets[i].obj.length>0 && window.qstyle_scroll_targets[i].enable) {\r\n\t\t\t\twindow.qstyle_scroll_targets[i].top = window.qstyle_scroll_targets[i].obj.offset().top-100;\r\n\t\t\t\twindow.qstyle_scroll_targets[i].height = window.qstyle_scroll_targets[i].obj.height();\r\n\r\n\t\t\t\tif (30>=window.qstyle_scroll_targets[i].top && 0<=window.qstyle_scroll_targets[i].top + window.qstyle_scroll_targets[i].height) lastitem = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlastitem = lastitem===-1 ? window.qstyle_scroll_targets.length-1 : lastitem;\r\n\t\tjQuery('.quick_style_menu_point').removeClass(\"active\");\r\n\t\twindow.qstyle_scroll_targets[lastitem].menu.addClass(\"active\");\r\n\t}\r\n\r\n})();\r\n","Nwdthemes_Revslider/admin/assets/js/modules/navigation.js":"/*!\r\n * REVOLUTION 6.3.2 EDITOR NAVIGATION JS\r\n * @version: 2.0 (01.12.2020)\r\n * @author ThemePunch\r\n */\r\n\r\n(function() {\r\n\tvar navtypes = [\"arrows\",\"thumbs\",\"bullets\",\"tabs\"],\r\n\t\t_leftarrow,_rightarrow,_bullets,_thumbstabs,\r\n\t\ticonlist = '<div class=\"font_icon_subcontainer\"><i class=\"nav_preseticon_pick rs_ne_icon_e817 revicon-left-dir\" data-content=\"\\\\e817\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e818 revicon-right-dir\" data-content=\"\\\\e818\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e819 revicon-left-open\" data-content=\"\\\\e819\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e81a revicon-right-open\" data-content=\"\\\\e81a\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e820 revicon-angle-left\" data-content=\"\\\\e820\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e81d revicon-angle-right\" data-content=\"\\\\e81d\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e81f revicon-left-big\" data-content=\"\\\\e81f\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e81e revicon-right-big\" data-content=\"\\\\e81e\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e82a revicon-left-open-1\" data-content=\"\\\\e82a\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e82b revicon-right-open-1\" data-content=\"\\\\e82b\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e822 revicon-left-open-mini\" data-content=\"\\\\e822\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e823 revicon-right-open-mini\" data-content=\"\\\\e823\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e824 revicon-left-open-big\" data-content=\"\\\\e824\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e825 revicon-right-open-big\" data-content=\"\\\\e825\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e836 revicon-left\" data-content=\"\\\\e836\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e826 revicon-right\" data-content=\"\\\\e826\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e82e revicon-left-open-outline\" data-content=\"\\\\e82e\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e82f revicon-right-open-outline\" data-content=\"\\\\e82f\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e82c revicon-left-open-2\" data-content=\"\\\\e82c\"></i>'+\r\n\t\t\t\t\t  '<i class=\"nav_preseticon_pick rs_ne_icon_e82d revicon-right-open-2\" data-content=\"\\\\e82d\"></i>'+\r\n\t\t\t\t\t  '</div>';\r\n\r\n\r\n\t/*\r\n\tINIT NAVIGATION LIST AND FUNCTIONS\r\n\t*/\r\n\tRVS.F.initNavigation = function() {\r\n\t\t_leftarrow = jQuery('#tp-leftarrow');\r\n\t\t_rightarrow = jQuery('#tp-rightarrow');\r\n\t\t_bullets = jQuery('#tp-bullets');\r\n\t\t_thumbstabs = {\r\n\t\t\t\t\ttabs:{self:jQuery('#tp-tabs'), mask:jQuery('#tp-tabs-mask'), inner:jQuery('#tp-tabs-inner-wrapper'), single:\"tp-tab\"},\r\n\t\t\t\t\tthumbs:{self:jQuery('#tp-thumbs'), mask:jQuery('#tp-thumbs-mask'), inner:jQuery('#tp-thumbs-inner-wrapper'), single:\"tp-thumb\"}\r\n\t\t\t\t};\r\n\t\tRVS.F.buildNavigationLists();\r\n\t\tinitLocalListeners();\r\n\t};\r\n\r\n\t/*\r\n\tBUILD THE DROP DOWN LISTS FOR NAVIGATION STYLES\r\n\t*/\r\n\tRVS.F.buildNavigationLists = function(force) {\r\n\t\tfor (var j in navtypes) {\r\n\t\t\tif(!navtypes.hasOwnProperty(j)) continue;\r\n\t\t\tvar _h=\"\";\r\n\t\t\tfor (var i in RVS.nav[navtypes[j]]) {\r\n\t\t\t\tif(!RVS.nav[navtypes[j]].hasOwnProperty(i)) continue;\r\n\t\t\t\t_h += '<option value=\"'+i+'\">'+RVS.nav[navtypes[j]][i].name+'</option>';\r\n\t\t\t}\r\n\t\t\tjQuery('#sr_'+navtypes[j]+'_style')[0].innerHTML = _h; //.ddTP({ placeholder:\"Enter or Select\"});\r\n\t\t\tif (force) jQuery('#sr_'+navtypes[j]+'_style').ddTP({placeholder:\"Enter or Select\"});\r\n\t\t}\r\n\t\tif (force) RVS.F.updateEasyInputs({container:jQuery('#nav_form_collector'),path:\"settings.\"});\r\n\t};\r\n\r\n\t/*\r\n\tBUILD LIST FOR FACTORY AND CUSTOM SKINS\r\n\t*/\r\n\tfunction buildEditorList(type,force) {\r\n\t\tvar f =\"\", c = \"\";\r\n\t\tRVS.nav.currentSkinType = type;\r\n\t\tRVS.nav.currentEditorMode = \"markup\";\r\n\r\n\t\tfor (var i in RVS.nav[type]) {\r\n\t\t\tif(!RVS.nav[type].hasOwnProperty(i)) continue;\r\n\t\t\tlet skin = RVS.nav[type][i];\r\n\t\t\tif (skin.factory)\r\n\t\t\t\tf += '<div data-type=\"'+type+'\" data-handle=\"'+i+'\" class=\"rs_ne_nav_skin rs_ne_listelement\"><span class=\"rs_ne_nskin_title\">'+skin.name+'</span><div class=\"rs_ne_nskin_tbar_basic\"><i class=\"rs_ne_nskin_copy material-icons\">content_copy</i></div></div>';\r\n\t\t\telse {\r\n\t\t\t\tc += '<div id=\"rs_ne_nav_skin_'+i+'\" data-type=\"'+type+'\" data-handle=\"'+i+'\" class=\"rs_ne_nav_skin rs_ne_listelement\"><span class=\"rs_ne_nskin_title\">'+skin.name+'</span><span class=\"rs_ne_nskin_message\"></span><input class=\"rs_ne_nskin_title_input\" value=\"'+skin.name+'\" type=\"text\"/><div class=\"rs_ne_nskin_tbar_basic\"><i class=\"rs_ne_nskin_edit material-icons\">edit</i><i class=\"rs_ne_nskin_copy material-icons\">content_copy</i><i class=\"rs_ne_nskin_delete material-icons\">delete</i></div><div class=\"rs_ne_nskin_tbar_yesno\"><i class=\"rs_ne_nskin_yes material-icons\">done</i><i class=\"rs_ne_nskin_no material-icons\">close</i></div></div>';\r\n\t\t\t\t//RVS.nav.currentMaxid = Math.max(RVS.nav.currentMaxid,parseInt(skin.id,0));\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.getElementById('rs_ne_factory_list').innerHTML = f;\r\n\t\tdocument.getElementById('rs_ne_custom_list').innerHTML = c;\r\n\t\tjQuery('.rs_ne_list_wrapper').scrollTop(0).RSScroll({suppressScrollX:true});\r\n\t}\r\n\r\n\tfunction setToSave() {\r\n\t\tif (RVS.nav.currentSkin!==undefined) RVS.nav.currentSkin.changed = true;\r\n\t\tjQuery('#save_naveditor').show();\r\n\t\tRVS.nav.toSave = true;\r\n\t}\r\n\r\n\t/*\r\n\tLOAD THE EDITOR MODUELE\r\n\t*/\r\n\tRVS.F.openNavigationEditor = function() {\r\n\r\n\t\tRVS.nav= RVS.nav===undefined ? {} : RVS.nav;\r\n\t\tRVS.nav.toSave = false;\r\n\t\tRVS.nav.toDelete = [];\r\n\r\n\r\n\t\tif (RVS.nav.editor===\"FAIL\") return;\r\n\t\tif (typeof RevMirror===\"undefined\" || RevMirror===undefined) {\r\n\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.loadingRevMirror});\r\n\t\t\tRVS.F.loadCSS(RVS.ENV.plugin_url+'/admin/assets/css/RevMirror.min.css');\r\n\t\t\tjQuery.getScript(RVS.ENV.plugin_url+'/admin/assets/js/plugins/RevMirror.min.js',function() {\r\n\t\t\t\tsetTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n\t\t\t\tRVS.F.openNavigationEditor();\r\n\t\t\t}).fail(function(a,b,c) {\r\n                RVS.F.loadCSS(RVS.ENV.plugin_url+'/admin/assets/css/RevMirror.css');\r\n                jQuery.getScript(RVS.ENV.plugin_url+'/admin/assets/js/plugins/RevMirror.js',function() {\r\n                    setTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n                    RVS.F.openNavigationEditor();\r\n                }).fail(function(a,b,c) {\r\n                    setTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n                    window.nav.editor = \"FAIL\";\r\n                });\r\n\t\t\t});\r\n\t\t} else {\r\n\r\n\t\t\tif (RVS.nav.editor===undefined) \t{\r\n\t\t\t\tvar nff = jQuery('#nav_fontfamily'),\r\n\t\t\t\t\topts = \"\";\r\n\t\t\t\tfor (var fontindex in RVS.LIB.FONTS) if(RVS.LIB.FONTS.hasOwnProperty(fontindex) && RVS.LIB.FONTS[fontindex].label!==\"Dont Show Me\") opts +='<option value=\"'+RVS.LIB.FONTS[fontindex].label+'\">'+RVS.LIB.FONTS[fontindex].label+'</option>';\r\n\r\n\t\t\t\tnff.append(opts);\r\n\t\t\t\tnff.ddTP({placeholder:\"Enter or Select\"});\r\n\r\n\t\t\t\tnff.ddTP('change');\r\n\t\t\t\tinitLocalListeners();\r\n\r\n\t\t\t\tRVS.nav.editor = RevMirror(document.getElementById('rs_nav_css_js_area'), {\r\n\t\t\t\t\tvalue:\"\",\r\n\t\t\t\t\tmode:\"css\",\r\n\t\t\t\t\ttheme:\"hopscotch\",\r\n\t\t\t\t\tlineWrapping:true,\r\n\t\t\t\t\tlineNumbers:false,\r\n\t\t\t\t});\r\n\t\t\t\tnavEditorListeners();\r\n\t\t\t\tRVS.nav.editor.on('change',function() {\r\n\t\t\t\t\tif (RVS.nav.currentSkin!== undefined && RVS.nav.currentEditorMode!==undefined && RVS.nav.currentSkin[RVS.nav.currentEditorMode]!==undefined && RVS.nav.currentSkin[RVS.nav.currentEditorMode]!==RVS.nav.editor.getValue()) {\r\n\t\t\t\t\t\tRVS.nav.currentSkin[RVS.nav.currentEditorMode] = RVS.nav.editor.getValue();\r\n\t\t\t\t\t\tRVS.F.drawEditorNavigation();\r\n\t\t\t\t\t\tsetToSave();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tRVS.nav.cache = {};\r\n\t\t\tfor (var i in navtypes) {\r\n\t\t\t\tif(!navtypes.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.nav.cache[navtypes[i]] = RVS.F.safeExtend(true,{},RVS.nav[navtypes[i]]);\r\n\t\t\t}\r\n\t\t\tRVS.nav.currentMaxid = 0;\r\n\t\t\tbuildEditorList(\"arrows\");\r\n\r\n\t\t\tRVS.F.RSDialog.create({modalid:'rbm_navigation_editor', bgopacity:0.5});\r\n\t\t\tjQuery('.emc_toggle_inner').RSScroll({ suppressScrollX:true});\r\n\t\t\tRVS.nav.editor.refresh();\r\n\r\n\t\t\t_leftarrow.detach();\r\n\t\t\t_rightarrow.detach();\r\n\t\t\t_bullets.detach();\r\n\t\t\t_thumbstabs.tabs.self.detach();\r\n\t\t\t_thumbstabs.thumbs.self.detach();\r\n\r\n\t\t\t// PREPEARE SELECTED NAV TYPE AND SELECTED STYLE\r\n\t\t\tvar selectedNavType = \"arrows\";\r\n\t\t\tfor (var i in navtypes) {\r\n\t\t\t\tif(!navtypes.hasOwnProperty(i)) continue;\r\n\t\t\t\tvar navSettings = document.querySelector('[data-pcontainer=\"#nav_settings\"] .selected');\r\n\t\t\t\tif (navSettings && navSettings.dataset && navSettings.dataset.forms && navSettings.dataset.forms.indexOf(navtypes[i])>=0) {\r\n\t\t\t\t\tselectedNavType = navtypes[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar selectedNavStyle = RVS.SLIDER.settings.nav[selectedNavType]!==undefined ? RVS.SLIDER.settings.nav[selectedNavType].style : \"1000\";\r\n\t\t\tRVS.F.pickNavType(document.getElementById('rs_ne_selector_'+selectedNavType));\r\n\t\t\tvar navStyle = jQuery('#rs_ne_navlist .rs_ne_nav_skin[data-handle=\"'+selectedNavStyle+'\"]');\r\n\t\t\tif (navStyle.length>0) pickNavStyle(navStyle[0]);\r\n\t\t\tRVS.F.pickMarkupCssMode(document.getElementById(('rs_ne_mcss_thecsseditor')));\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tBUILD THE LIST OF THE SELECTED NAVIGATION TYPE\r\n\t*/\r\n\tfunction buildNavsMetaList() {\r\n\t\tdocument.getElementById('rs_ne_nav_width').value = RVS.nav.currentSkin.dim.width;\r\n\t\tdocument.getElementById('rs_ne_nav_height').value = RVS.nav.currentSkin.dim.height;\r\n\t\tdocument.getElementById('rs_ne_nav_classname').value = RVS.nav.currentSkin.handle;\r\n\t\tvar _h = '';\r\n\t\tfor (var i in RVS.nav.currentSkin.placeholders) {\r\n\t\t\tif(!RVS.nav.currentSkin.placeholders.hasOwnProperty(i)) continue;\r\n\t\t\tlet p = RVS.nav.currentSkin.placeholders[i];\r\n\t\t\t_h+='<div data-placeholder=\"'+i+'\" class=\"rs_ne_meta_value_btn rs_ne_listelement\" ><span data-insert=\"##'+i+'##\" class=\"rs_ne_nskin_title\">'+p.title+'</span><span class=\"rs_ne_nskin_message\"></span>';\r\n\t\t\t_h+='<div class=\"rs_ne_nskin_tbar_basic\"><i data-insert=\"##'+i+'##\" class=\"rs_ne_nskin_meta_add material-icons\">add</i><i data-placeholder=\"'+i+'\" class=\"rs_ne_nskin_meta_config material-icons\">settings</i><i class=\"rs_ne_nskin_delete material-icons\">delete</i></div><div class=\"rs_ne_nskin_tbar_yesno\"><i class=\"rs_ne_nskin_yes material-icons\">done</i><i class=\"rs_ne_nskin_no material-icons\">close</i></div>';\r\n\t\t\t_h+='</div>';\r\n\t\t}\r\n\t\tdocument.getElementById('rs_ne_meta_values_inner').innerHTML = _h;\r\n\t}\r\n\r\n\t/*\r\n\tCHECK IF ANY OF IMPORTANT META INPUTES ARE MISSING OR DOUBLED\r\n\t*/\r\n\tfunction checkImportandMetaFields() {\r\n\t\tvar placeholder = jQuery('#rs_ne_def_meta_handle')[0].value;\r\n\r\n\t\tif ((placeholder.length===0 || jQuery('#rs_ne_def_meta_title')[0].value.length===0) ||\r\n\t\t\t(RVS.nav.currentPlaceholder!==placeholder && RVS.nav.currentSkin.placeholders[placeholder]!==undefined))\r\n\t\t\tjQuery('#update_nav_meta_value').addClass(\"disabled\");\r\n\t\telse\r\n\t\t\tjQuery('#update_nav_meta_value').removeClass(\"disabled\");\r\n\r\n\t\tif (RVS.nav.currentPlaceholder!==placeholder && RVS.nav.currentSkin.placeholders[placeholder]!==undefined)\r\n\t\t\tjQuery('#rs_ne_def_meta_handle').addClass(\"badvalue\");\r\n\t\telse\r\n\t\t\tjQuery('#rs_ne_def_meta_handle').removeClass(\"badvalue\");\r\n\t}\r\n\r\n\t/*\r\n\tDRAW THE EDITOR NAVIGATIONS\r\n\t*/\r\n\tRVS.F.drawEditorNavigation = function() {\r\n\t\tif (RVS.nav.c===undefined) {\r\n\t\t\tRVS.nav.c = {\r\n\t\t\t\tarrows : jQuery('#rs_ne_arrows'),\r\n\t\t\t\tleft : jQuery('#rs_ne_tp-leftarrow'),\r\n\t\t\t\tright: jQuery('#rs_ne_tp-rightarrow'),\r\n\t\t\t\tbullets : jQuery('#rs_ne_bullets'),\r\n\t\t\t\ttabs : {\r\n\t\t\t\t\t\tself:jQuery('#rs_ne_tabs'),\r\n\t\t\t\t\t\tinner:jQuery('#rs_ne_tabs-inner-wrapper'),\r\n\t\t\t\t\t\tmask:jQuery('#rs_ne_tabs-mask'),\r\n\t\t\t\t\t\tsingle:\"tp-tab\"\r\n\t\t\t\t},\r\n\t\t\t\tthumbs : {\r\n\t\t\t\t\t\tself:jQuery('#rs_ne_thumbs'),\r\n\t\t\t\t\t\tinner:jQuery('#rs_ne_thumbs-inner-wrapper'),\r\n\t\t\t\t\t\tmask:jQuery('#rs_ne_thumbs-mask'),\r\n\t\t\t\t\t\tsingle:\"tp-thumb\"\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tRVS.nav.currentTestSpace = RVS.nav.currentTestSpace==undefined ? 5 : RVS.nav.currentTestSpace;\r\n\t\tRVS.nav.currentTestPadding = 10;\r\n\t\tRVS.nav.currentAlignMode = RVS.nav.currentAlignMode==undefined ? \"horizontal\" : RVS.nav.currentAlignMode;\r\n\t\tRVS.nav.currentPosVer = RVS.nav.currentPosVer==undefined ? \"bottom\" : RVS.nav.currentPosVer;\r\n\t\tRVS.nav.currentPosHor = RVS.nav.currentPosHor==undefined ? \"center\" : RVS.nav.currentPosHor;\r\n\r\n\t\tvar cname = RVS.F.sanitize_input(RVS.nav.currentSkin.handle.toLowerCase())+\" \"+RVS.F.sanitize_input(RVS.nav.currentSkin.name.toLowerCase()),\r\n\t\t\tthecss = manipulateNavCSS({type:RVS.nav.currentSkinType, skin:RVS.nav.currentSkin ,default:true});\r\n\r\n\t\tswitch (RVS.nav.currentSkinType) {\r\n\t\t\tcase \"arrows\":\r\n\t\t\t\tvar markup = RVS.nav.currentSkin.markup.replace('##title##',\"Title\");\r\n\t\t\t\tRVS.nav.c.left[0].className =\"tparrows tp-leftarrow \"+cname;\r\n\t\t\t\tRVS.nav.c.right[0].className =\"tparrows tp-rightarrow \"+cname;\r\n\t\t\t\tRVS.nav.c.left[0].innerHTML = thecss+markup;\r\n\t\t\t\tRVS.nav.c.right[0].innerHTML = markup;\r\n\t\t\t\tRVS.nav.c.arrows.show();\r\n\t\t\t\tRVS.nav.c.bullets.hide();\r\n\t\t\t\tRVS.nav.c.tabs.self.hide();\r\n\t\t\t\tRVS.nav.c.thumbs.self.hide();\r\n\t\t\tbreak;\r\n\t\t\tcase \"bullets\":\r\n\t\t\t\tRVS.nav.c.arrows.hide();\r\n\t\t\t\tRVS.nav.c.tabs.self.hide();\r\n\t\t\t\tRVS.nav.c.thumbs.self.hide();\r\n\t\t\t\tRVS.nav.c.bullets.show();\r\n\t\t\t\tRVS.nav.c.bullets[0].className = 'tp-bullets '+cname+' nav-dir-'+RVS.nav.currentAlignMode+' nav-pos-ver-'+RVS.nav.currentPosVer+' nav-pos-hor-'+RVS.nav.currentPosHor;\r\n\r\n\t\t\t\tvar markup = RVS.nav.currentSkin.markup.replace('##title##','Slide Title'),\r\n\t\t\t\t\t_h = \"\";\r\n\t\t\t\tfor (var i=0;i<=4;i++) {\r\n\t\t\t\t\t_h += '<div class=\"tp-bullet '+(i==0 ? \"selected\" : \"\")+'\">'+markup+'</div>';\r\n\t\t\t\t}\r\n\t\t\t\tRVS.nav.c.bullets[0].innerHTML = thecss+_h;\r\n\r\n\t\t\t\tRVS.nav.c.bullets.find('.tp-bullet').each(function(i) {\r\n\t\t\t\t\tvar b = jQuery(this),\r\n\t\t\t\t\t\tam = 5,\r\n\t\t\t\t\t\tw = b.outerWidth()+parseInt((RVS.nav.currentTestSpace===undefined? 0:RVS.nav.currentTestSpace),0),\r\n\t\t\t\t\t\th = b.outerHeight()+parseInt((RVS.nav.currentTestSpace===undefined? 0:RVS.nav.currentTestSpace),0);\r\n\r\n\t\t\t\t\tif (RVS.nav.currentAlignMode===\"vertical\") {\r\n\t\t\t\t\t\tb.css({top:((i)*h)+\"px\", left:\"0px\"});\r\n\t\t\t\t\t\ttpGS.gsap.set(RVS.nav.c.bullets,{height:(((am-1)*h) + b.outerHeight()),width:b.outerWidth()});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tb.css({left:((i)*w)+\"px\", top:\"0px\"});\r\n\t\t\t\t\t\ttpGS.gsap.set(RVS.nav.c.bullets,{width:(((am-1)*w) + b.outerWidth()),height:b.outerHeight()});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\tbreak;\r\n\t\t\tcase \"tabs\":\r\n\t\t\tcase \"thumbs\":\r\n\t\t\t\tvar all = RVS.nav.currentSkinType,\r\n\t\t\t\t\tsingle = all.replace(\"s\",\"\");\r\n\r\n\t\t\t\tRVS.nav.c.arrows.hide();\r\n\t\t\t\tRVS.nav.c.bullets.hide();\r\n\t\t\t\tRVS.nav.c.tabs.self.hide();\r\n\t\t\t\tRVS.nav.c.thumbs.self.hide();\r\n\t\t\t\tRVS.nav.c[all].self.show();\r\n\t\t\t\tRVS.nav.c[all].self[0].className = 'tp-'+all+' '+cname+' nav-dir-'+RVS.nav.currentAlignMode+' nav-pos-ver-'+RVS.nav.currentPosVer+' nav-pos-hor-'+RVS.nav.currentPosHor;\r\n\r\n\t\t\t\tvar markup = RVS.nav.currentSkin.markup.replace('##title##','Slide Title'),\r\n\t\t\t\t\t_h = \"\";\r\n\t\t\t\tfor (var i=0;i<10;i++) markup = markup.replace('##param'+i+'##',\"Parameter \"+i);\r\n\t\t\t\tfor (var i=0;i<=2;i++) {_h += '<div class=\"'+cname+' tp-'+single+' '+(i==0 ? \"selected\" : \"\")+'\">'+markup+'</div>';}\r\n\t\t\t\tRVS.nav.c[all].inner[0].innerHTML = thecss+_h;\r\n\r\n\t\t\t\t//UPDATE CLASSES\r\n\t\t\t\tvar am = 3,\r\n\t\t\t\t\tw = parseInt(RVS.nav.currentSkin.dim.width,0)+parseInt(RVS.nav.currentTestSpace,0),\r\n\t\t\t\t\th = parseInt(RVS.nav.currentSkin.dim.height,0)+parseInt(RVS.nav.currentTestSpace,0);\r\n\r\n\t\t\t\ttpGS.gsap.set(RVS.nav.c[all].self,{padding:RVS.nav.currentTestPadding});\r\n\t\t\t\tRVS.nav.currentTestPadding = parseInt(RVS.nav.currentTestPadding,0);\r\n\r\n\t\t\t\t// SET BULLET SPACES AND POSITION\r\n\t\t\t\tRVS.nav.c[all].inner.find('.'+RVS.nav.c[all].single).each(function(i) {\r\n\t\t\t\t\tif (RVS.nav.currentAlignMode===\"vertical\")\r\n\t\t\t\t\t\ttpGS.gsap.set(this,{top:((i)*h)+\"px\",left:\"0px\",width:RVS.nav.currentSkin.dim.width+\"px\",height:RVS.nav.currentSkin.dim.height+\"px\"});\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\ttpGS.gsap.set(this,{left:((i)*w)+\"px\", top:\"0px\",width:RVS.nav.currentSkin.dim.width+\"px\",height:RVS.nav.currentSkin.dim.height+\"px\"});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar maxw = RVS.nav.currentAlignMode===\"horizontal\" ? (RVS.nav.currentSkin.dim.width * am) + (RVS.nav.currentTestSpace*(am-1)) : RVS.nav.currentSkin.dim.width,\r\n\t\t\t\t\tmaxh = RVS.nav.currentAlignMode===\"horizontal\" ? RVS.nav.currentSkin.dim.height : (RVS.nav.currentSkin.dim.height * am) + (RVS.nav.currentTestSpace*(am-1)),\r\n\t\t\t\t\twrapcssobj = {width:maxw+\"px\", height:maxh+\"px\",overwrite:\"auto\"},\r\n\t\t\t\t\tmaskcssobj = {top:\"auto\", left:\"auto\", bottom:\"auto\", marginTop:\"0px\", marginBottom:\"0px\",right:\"auto\", y:\"0%\", x:\"0px\",width:maxw+\"px\",height:maxh+\"px\",overflow:\"hidden\",position:\"relative\",overwrite:\"auto\",marginLeft:\"auto\",marginRight:\"auto\"};\r\n\t\t\t\t\t/* innecssobj = {y:\"0px\",x:\"0px\",position:\"relative\"}; */\r\n\r\n\t\t\t\ttpGS.gsap.set(RVS.nav.c[all].self,wrapcssobj);\r\n\t\t\t\ttpGS.gsap.set(RVS.nav.c[all].mask,maskcssobj);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tSAVE NAVIGATION\r\n\t*/\r\n\tRVS.F.savechangesonnavigation = function() {\r\n\t\tRVS.nav.changes = {};\r\n\t\t//CACHE LAST SELECTED ITEM\r\n\t\tRVS.nav.currentHandle = RVS.nav.currentSkin!==undefined ? RVS.nav.currentSkin.handle : undefined;\r\n\r\n\r\n\t\tfor (var nt in navtypes) {\r\n\t\t\tif(!navtypes.hasOwnProperty(nt)) continue;\r\n\t\t\tfor (var i in RVS.nav[navtypes[nt]]) {\r\n\t\t\t\tif(!RVS.nav[navtypes[nt]].hasOwnProperty(i)) continue;\r\n\t\t\t\tif (RVS.nav[navtypes[nt]][i].changed) {\r\n\t\t\t\t\tRVS.nav.changes[i] = RVS.F.safeExtend(true,{},RVS.nav[navtypes[nt]][i]);\r\n\t\t\t\t\tdelete RVS.nav.changes[i].changed;\r\n                    try {\r\n                        var sspres = RVS.SLIDER[RVS.S.slideId].slide.nav[navtypes[nt]].presets;\r\n                        for (var j in RVS.nav.changes[i].placeholders) {\r\n                            if (!RVS.nav.changes[i].placeholders.hasOwnProperty(j) || sspres[j]===undefined || sspres[j+\"-def\"]===true) continue;\r\n                            sspres[j] = RVS.nav.changes[i].placeholders[j].data;\r\n                        }\r\n\r\n                    } catch(e) {}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tRVS.F.ajaxRequest(\"save_navigation\", {navs:RVS.nav.changes, delete:RVS.nav.toDelete}, function(response){\r\n\t\t\tfor (var i in navtypes) {\r\n\t\t\t\tif(!navtypes.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.nav[navtypes[i]] = RVS.F.safeExtend(true,{},response.navs[navtypes[i]]);\r\n\t\t\t}\r\n\t\t\tif (RVS.nav.currentHandle!==undefined) {\r\n\t\t\t\t// REFRESH CONTENT\r\n\t\t\t\tbuildEditorList(RVS.nav.currentSkinType);\r\n\r\n\t\t\t\t// ReSelect last Selected Element\r\n\t\t\t\tvar lastselected,id,newselected;\r\n\t\t\t\tfor (var i in RVS.nav[RVS.nav.currentSkinType]) {\r\n\t\t\t\t\tif(!RVS.nav[RVS.nav.currentSkinType].hasOwnProperty(i)) continue;\r\n\t\t\t\t\tlastselected = lastselected===undefined && RVS.nav[RVS.nav.currentSkinType][i].handle == RVS.nav.currentHandle ? i : lastselected;\r\n\t\t\t\t}\r\n\t\t\t\tif (lastselected!==undefined) jQuery('#rs_ne_nav_skin_'+lastselected).trigger('click');\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.nav.toDelete = [];\r\n\t\tRVS.nav.toSave = false;\r\n\t\tjQuery('#save_naveditor').hide();\r\n\r\n\t\tRVS.F.updatePresetInputs({type: RVS.nav.currentSkinType,env:\"slide\"});\r\n\t\tRVS.F.updatePresetInputs({type: RVS.nav.currentSkinType,env:\"global\"});\r\n\t};\r\n\r\n\r\n\t//CHECK HANDLE TO USE AS CLASS NAME\r\n\tRVS.F.checkSkinHandle = function(handle) {\r\n\t\tvar exists = handle.length<4 || jQuery.inArray(handle,[\"cursor\",\"pointer\",\"margin\",\"padding\",\"display\",\"position\",\"width\",\"height\",\"transition\",\"relative\",\"absolute\",\"color\",\"arrows\",\"thumbs\",\"arrow\",\"thumb\",\"tab\",\"tabs\",\"bullet\",\"bullets\",\"hover\",\"z-index\"])>=0;\r\n\t\tfor (var i in RVS.nav[RVS.nav.currentSkinType]) {\r\n\t\t\tif(!RVS.nav[RVS.nav.currentSkinType].hasOwnProperty(i)) continue;\r\n\t\t\texists = exists ===true || RVS.nav[RVS.nav.currentSkinType][i].handle===handle ? true :false;\r\n\t\t}\r\n\t\treturn exists;\r\n\t};\r\n\r\n\tfunction reAddOriginalNav() {\r\n\t\t_leftarrow.appendTo(jQuery('#rev_slider_ul_inner'));\r\n\t\t_rightarrow.appendTo(jQuery('#rev_slider_ul_inner'));\r\n\t\t_bullets.appendTo(jQuery('#rev_slider_ul_inner'));\r\n\t\t_thumbstabs.tabs.self.appendTo(jQuery('#rev_slider_ul_inner'));\r\n\t\t_thumbstabs.thumbs.self.appendTo(jQuery('#rev_slider_ul_inner'));\r\n\t}\r\n\r\n\t/*\r\n\tLISTENERS FOR NAVIGATION EDITOR\r\n\t*/\r\n\tfunction navEditorListeners() {\r\n\r\n\r\n\r\n\t\t//PICK A NAVIGATION ELEMENT TO EDIT / VIEW\r\n\t\tRVS.DOC.on('click','.rs_ne_nav_skin',function() {\r\n\t\t\tpickNavStyle(this);\r\n\t\t});\r\n\r\n\t\t//CLOSE CSS AND JS EDITOR\r\n\t\tRVS.DOC.on('click', '#rbm_navigation_editor .rbm_close', function() {\r\n\r\n\t\t\tif (!RVS.nav.toSave) {\r\n\r\n\t\t\t\treAddOriginalNav();\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t\tRVS.F.buildNavigationLists(true);\r\n\t\t\t} else {\r\n\r\n\t\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\ticon:'warning',\r\n\t\t\t\t\ttitle:RVS_LANG.warning,\r\n\t\t\t\t\tmaintext:RVS_LANG.changesdone_exit,\r\n\t\t\t\t\tsubtext:RVS_LANG.exitwihoutchangesornot,\r\n\t\t\t\t\tdo:{\r\n\t\t\t\t\t\ticon:\"exit_to_app\",\r\n\t\t\t\t\t\ttext:RVS_LANG.leavewithoutsave,\r\n\t\t\t\t\t\tevent: \"leavaeditorwithoutsave\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcancel:{\r\n\t\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\t\ttext:RVS_LANG.stayineditor\r\n\t\t\t\t}});\r\n\r\n\t\t\t\t// ASK IF YOU REALLY WANT TO LEAVE\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// LEAVE WITHOUT SAVING\r\n\t\tRVS.DOC.on('leavaeditorwithoutsave',function() {\r\n\t\t\t// OVERWRITE OLD CACHE VALUES ON LIFE VERSION, SINCE EDITOR CLOSED WITHOUT SAVE !\r\n\t\t\tfor (var i in navtypes) {\r\n\t\t\t\tif(!navtypes.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.nav[navtypes[i]] = RVS.F.safeExtend(true,{},RVS.nav.cache[navtypes[i]]);\r\n\t\t\t}\r\n\t\t\tRVS.nav.toDelete = [];\r\n\t\t\tRVS.nav.toSave = false;\r\n\t\t\tjQuery('#save_naveditor').hide();\r\n\t\t\treAddOriginalNav();\r\n\t\t});\r\n\r\n\r\n\t\t// CLICK ON SAVE NAVIGATION\r\n\t\tRVS.DOC.on('click','#save_naveditor',RVS.F.savechangesonnavigation);\r\n\r\n\r\n\t\t//NAVIGATION TYPE SELECTOR\r\n\t\tRVS.DOC.on('click','.rs_ne_selector',function() {\r\n\t\t\tRVS.F.pickNavType(this);\r\n\t\t});\r\n\r\n\r\n\t\t// CONFIGURATE PLACEHOLDER\r\n\t\tRVS.DOC.on('click','.rs_ne_nskin_meta_config',function() {\r\n\t\t\tjQuery('#rs_ne_cssmeta_config').show();\r\n\t\t\tjQuery('#rs_ne_cssmeta_values').hide();\r\n\t\t\tRVS.nav.currentPlaceholder = this.dataset.placeholder;\r\n\t\t\tjQuery('#rs_ne_meta_type').val(RVS.nav.currentSkin.placeholders[RVS.nav.currentPlaceholder].type).ddTP('change').change();\r\n\t\t\tdocument.getElementById('rs_ne_def_meta_title').value = RVS.nav.currentSkin.placeholders[RVS.nav.currentPlaceholder].title;\r\n\t\t\tdocument.getElementById('rs_ne_def_meta_handle').value = RVS.nav.currentPlaceholder;\r\n\t\t\tswitch (RVS.nav.currentSkin.placeholders[RVS.nav.currentPlaceholder].type) {\r\n\t\t\t\tcase \"color\":\r\n\t\t\t\t//document.getElementById('rs_ne_def_meta_color_val_wrap')\r\n\t\t\t\t\tjQuery('#rs_ne_def_meta_color_val').val(RVS.nav.currentSkin.placeholders[RVS.nav.currentPlaceholder].data).rsColorPicker(\"refresh\");\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"icon\":\r\n\t\t\t\t\tjQuery('#rs_ne_def_meta_icon_val').val(RVS.nav.currentSkin.placeholders[RVS.nav.currentPlaceholder].data);\r\n\t\t\t\t\tvar code = RVS.nav.currentSkin.placeholders[RVS.nav.currentPlaceholder].data;\r\n\t\t\t\t\tcode = code.length>0 ? code.replace('\\\\',\"\") : code;\r\n\t\t\t\t\tjQuery('.rs_ne_pick.selected').removeClass(\"selected\");\r\n\t\t\t\t\tjQuery('.rs_ne_icon_'+code).addClass(\"selected\");\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"custom\":\r\n\t\t\t\t\tjQuery('#rs_ne_def_meta_custom_val').val(RVS.nav.currentSkin.placeholders[RVS.nav.currentPlaceholder].data);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"font-family\":\r\n\t\t\t\t\t// jQuery('#nav_fontfamily').val(RVS.nav.currentSkin.placeholders[placeholder].data);\r\n\t\t\t\t\tvar nff= jQuery('#nav_fontfamily')\r\n\t\t\t\t\tnff.val(RVS.nav.currentSkin.placeholders[RVS.nav.currentPlaceholder].data);\r\n\t\t\t\t\tnff.ddTP('change');\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// ADD NEW PLACEHOLDER\r\n\t\tRVS.DOC.on('click','#add_new_placeholder',function() {\r\n\t\t\tjQuery('#rs_ne_cssmeta_config').show();\r\n\t\t\tjQuery('#rs_ne_cssmeta_values').hide();\r\n\t\t\tRVS.nav.currentPlaceholder = \"in_create_process\";\r\n\t\t\tdocument.getElementById('rs_ne_def_meta_title').value = \"\";\r\n\t\t\tdocument.getElementById('rs_ne_def_meta_handle').value = \"\";\r\n\t\t\tjQuery('#rs_ne_def_meta_color_val').val('#ffffff');\r\n\t\t\tjQuery('#rs_ne_def_meta_icon_val').val();\r\n\t\t\tjQuery('#rs_ne_def_meta_custom_val').val();\r\n\t\t\tjQuery('#nav_fontfamily').val(\"Arial\");\r\n\t\t\tcheckImportandMetaFields();\r\n\t\t});\r\n\r\n\t\t// CHANGING THE HANDLE NAME HAS REAL INFLUENCE ON CONTENT\r\n\t\tRVS.DOC.on('change','#rs_ne_nav_classname',function() {\r\n\t\t\tvar _old = RVS.nav.currentSkin.handle,\r\n\t\t\t\t_new = RVS.F.sanitize_input_lc(this.value.toLowerCase());\r\n\t\t\tthis.value = _new;\r\n\t\t\tif (_old!==_new) {\r\n\t\t\t\tif (RVS.F.checkSkinHandle(this.value)) {\r\n\t\t\t\t\tjQuery('#rs_ne_nav_classname').addClass(\"badvalue\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery('#rs_ne_nav_classname').removeClass(\"badvalue\");\r\n\t\t\t\t\tRVS.nav.currentSkin.handle = _new;\r\n\t\t\t\t\tvar re = new RegExp(\"\\\\.\"+_old,\"g\");\r\n\t\t\t\t\tRVS.nav.currentSkin.css = RVS.nav.currentSkin.css.replace(re,\".\"+_new);\r\n\t\t\t\t\tRVS.nav.editor.setValue(RVS.nav.currentSkin[RVS.nav.currentEditorMode]);\r\n\t\t\t\t}\r\n\t\t\t\tsetToSave();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\r\n\t\t//VERTICAL / HORIZONTAL CHANGER\r\n\t\tRVS.DOC.on('setrsnavtovertical',function() {\r\n\t\t\tjQuery('#rs_ne_horizontaltest').removeClass(\"selected\");\r\n\t\t\tjQuery('#rs_ne_verticaltest').addClass(\"selected\");\r\n\t\t\tRVS.nav.currentAlignMode = \"vertical\";\r\n\t\t\tRVS.F.drawEditorNavigation();\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('setrsnavtohorizontal',function() {\r\n\t\t\tjQuery('#rs_ne_horizontaltest').addClass(\"selected\");\r\n\t\t\tjQuery('#rs_ne_verticaltest').removeClass(\"selected\");\r\n\t\t\tRVS.nav.currentAlignMode = \"horizontal\";\r\n\t\t\tRVS.F.drawEditorNavigation();\r\n\t\t});\r\n\r\n\t\t// BASIC TEST MODE VALUES CHANGED\r\n\t\tRVS.DOC.on('rsdimgapchange',function(a,b) {\r\n\t\t\tif (b!==undefined && b.eventparam!==undefined) {\r\n\t\t\t\tswitch (b.eventparam) {\r\n\t\t\t\t\tcase \"width\":\r\n\t\t\t\t\tcase \"height\":\r\n\t\t\t\t\t\tRVS.nav.currentSkin.dim[b.eventparam] = b.val;\r\n\t\t\t\t\t\tsetToSave();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"space\":\r\n\t\t\t\t\t\tRVS.nav.currentTestSpace = b.val;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.drawEditorNavigation();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t// POSITION FOR PREVIEW CHANGED\r\n\t\tRVS.DOC.on('setrsnavposition',function() {\r\n\t\t\tswitch (jQuery('#rs_nav_test_position').val()) {\r\n\t\t\t\tcase \"left top\": RVS.nav.currentPosVer = \"top\"; RVS.nav.currentPosHor = \"left\";break;\r\n\t\t\t\tcase \"center top\":RVS.nav.currentPosVer = \"top\";RVS.nav.currentPosHor = \"center\";break;\r\n\t\t\t\tcase \"right top\":RVS.nav.currentPosVer = \"top\";RVS.nav.currentPosHor = \"right\";break;\r\n\t\t\t\tcase \"left center\": RVS.nav.currentPosVer = \"center\"; RVS.nav.currentPosHor = \"left\";break;\r\n\t\t\t\tcase \"center center\":RVS.nav.currentPosVer = \"center\";RVS.nav.currentPosHor = \"center\";break;\r\n\t\t\t\tcase \"right center\":RVS.nav.currentPosVer = \"center\";RVS.nav.currentPosHor = \"right\";break;\r\n\t\t\t\tcase \"left bottom\": RVS.nav.currentPosVer = \"bottom\"; RVS.nav.currentPosHor = \"left\";break;\r\n\t\t\t\tcase \"center bottom\":RVS.nav.currentPosVer = \"bottom\";RVS.nav.currentPosHor = \"center\";break;\r\n\t\t\t\tcase \"right bottom\":RVS.nav.currentPosVer = \"bottom\";RVS.nav.currentPosHor = \"right\";break;\r\n\t\t\t}\r\n\t\t\tRVS.F.drawEditorNavigation();\r\n\t\t});\r\n\r\n\r\n\t\t// CHANGING TITLE OR HANDLE OF META\r\n\t\tRVS.DOC.on('change','#rs_ne_def_meta_title',checkImportandMetaFields);\r\n\t\tRVS.DOC.on('change','#rs_ne_def_meta_handle',function() {\r\n\t\t\tthis.value = RVS.F.sanitize_input_lc(this.value);\r\n\t\t\tcheckImportandMetaFields();\r\n\t\t});\r\n\r\n\t\t// CHANGING ICON\r\n\t\tRVS.DOC.on('click','.rs_ne_pick',function() {\r\n\t\t\tjQuery('.rs_ne_pick.selected').removeClass(\"selected\");\r\n\t\t\tthis.className +=\" selected\";\r\n\t\t\tjQuery('#rs_ne_def_meta_icon_val').val(this.dataset.content);\r\n\t\t});\r\n\r\n\r\n\t\t// INSERT META INTO MARKUP\r\n\t\t//Insert into Editor Listener\r\n\t\tRVS.DOC.on('click','.rs_ne_nskin_meta_add, .rs_ne_markup_meta_btn',function() {\r\n\t\t\tif (!RVS.nav.infactorymode)\r\n\t\t\t\tRVS.F.insertTextAtCursor(RVS.nav.editor,this.dataset.insert);\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// CLOSE WITHOUT CHANGES THE META VALUE EDITOR\r\n\t\tRVS.DOC.on('closenavmetavalue',function() {\r\n\t\t\tjQuery('#rs_ne_cssmeta_config').hide();\r\n\t\t\tjQuery('#rs_ne_cssmeta_values').show();\r\n\t\t});\r\n\r\n\t\t// CLOSE WITH CHANGES THE META VALUE EDITOR\r\n\t\tRVS.DOC.on('updatenavmetavalue',function() {\r\n\t\t\tvar placeholder = document.getElementById('rs_ne_def_meta_handle').value;\r\n\t\t\tRVS.nav.currentSkin.placeholders = RVS.nav.currentSkin.placeholders===\"\" || RVS.nav.currentSkin.placeholders===undefined || typeof RVS.nav.currentSkin.placeholders== \"string\" ? {} : RVS.nav.currentSkin.placeholders;\r\n\t\t\tRVS.nav.currentSkin.placeholders[placeholder] = RVS.nav.currentSkin.placeholders[placeholder]===undefined || RVS.nav.currentSkin.placeholders[placeholder]==\"\" ? {} : RVS.nav.currentSkin.placeholders[placeholder];\r\n\r\n\t\t\tRVS.nav.currentSkin.placeholders[placeholder].type = document.getElementById('rs_ne_meta_type').value;\r\n\t\t\tRVS.nav.currentSkin.placeholders[placeholder].title = document.getElementById('rs_ne_def_meta_title').value;\r\n\t\t\tswitch (RVS.nav.currentSkin.placeholders[placeholder].type) {\r\n\t\t\t\tcase \"color\":\r\n\t\t\t\t\tRVS.nav.currentSkin.placeholders[placeholder].data = document.getElementById('rs_ne_def_meta_color_val').value;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"icon\":\r\n\t\t\t\t\tRVS.nav.currentSkin.placeholders[placeholder].data = document.getElementById('rs_ne_def_meta_icon_val').value;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"custom\":\r\n\t\t\t\t\tRVS.nav.currentSkin.placeholders[placeholder].data = document.getElementById('rs_ne_def_meta_custom_val').value;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"font-family\":\r\n\t\t\t\t\tRVS.nav.currentSkin.placeholders[placeholder].data = document.getElementById('nav_fontfamily').value;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (placeholder !== RVS.nav.currentPlaceholder) {\r\n\t\t\t\t//RENAME IN MARKUP ALL THE EXISTING HANDLES !!\r\n\t\t\t\tdelete RVS.nav.currentSkin.placeholders[RVS.nav.currentPlaceholder];\r\n\t\t\t}\r\n\r\n\t\t\tbuildNavsMetaList();\r\n\t\t\tjQuery('#rs_ne_cssmeta_config').hide();\r\n\t\t\tjQuery('#rs_ne_cssmeta_values').show();\r\n\t\t\tRVS.F.drawEditorNavigation();\r\n\t\t\tsetToSave();\r\n\t\t});\r\n\r\n\t\t// CHANGE CUSTOM NAVIGATION NAME\r\n\t\tRVS.DOC.on('click','.rs_ne_nskin_edit',function() {\r\n\t\t\tvar skin = jQuery(this).closest('.rs_ne_nav_skin');\r\n\t\t\tskin[0].dataset.mode=\"rename\";\r\n\t\t\tskin.addClass(\"rs_changename\");\r\n\t\t\tskin.find('input').trigger('focus').trigger('select');\r\n\t\t\tRVS.S.waitOnFeedback = { allowed:[\"rs_ne_nskin_title_input\", \"rs_ne_nskin_yes\",\"rs_ne_nskin_no\", \"rbm_close\"], closeEvent:\"hideCustomNavNameEntering\"};\r\n\t\t\tRVS.F.addBodyClickListener();\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// DELETE CUSTOM NAVIGATION\r\n\t\tRVS.DOC.on('click','.rs_ne_nskin_delete',function() {\r\n\t\t\tvar skin = jQuery(this).closest('.rs_ne_listelement');\r\n\t\t\tskin[0].dataset.mode=\"delete\";\r\n\t\t\tskin.addClass(\"rs_showmessage\");\r\n\t\t\tskin.find('.rs_ne_nskin_message').text(RVS_LANG.deletetemplate);\r\n\t\t\tRVS.S.waitOnFeedback = { allowed:[\"rs_ne_nskin_yes\",\"rs_ne_nskin_no\", \"rbm_close\"], closeEvent:\"hideCustomNavNameEntering\"};\r\n\t\t\tRVS.F.addBodyClickListener();\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// DUPLICATE NAVIGATION\r\n\t\tRVS.DOC.on('click','.rs_ne_nskin_copy',function() {\r\n\t\t\tvar skin = jQuery(this).closest('.rs_ne_nav_skin');\r\n\t\t\tRVS.nav.currentMaxid++;\r\n\t\t\tRVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid] = RVS.F.safeExtend(true,{},RVS.nav[skin[0].dataset.type][skin[0].dataset.handle]);\r\n\r\n\t\t\tvar _old = RVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid].handle,\r\n\t\t\t\t_new = RVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid].handle +\"_copy\"+Math.round(Math.random()*100+10);\r\n\t\t\tif (RVS.F.checkSkinHandle(_new)===true) _new = _new+Math.round(Math.random()*100+10);\r\n\t\t\tif (RVS.F.checkSkinHandle(_new)===true) _new = _new+Math.round(Math.random()*100+10);\r\n\r\n\t\t\tRVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid].factory = false;\r\n\t\t\tRVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid].name += \" Copy\";\r\n\t\t\tRVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid].handle = _new;\r\n\t\t\tRVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid].changed = true;\r\n\t\t\tRVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid].id = \"new_\"+RVS.nav.currentMaxid;\r\n\t\t\tRVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid].presets={};\r\n\r\n\t\t\t// CHANGE THE CLASS NAMES AS WELL\r\n\t\t\tvar re = new RegExp(\"\\\\.\"+_old,\"g\");\r\n\t\t\tRVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid].css = RVS.nav[skin[0].dataset.type][\"new_\"+RVS.nav.currentMaxid].css.replace(re,\".\"+_new);\r\n\r\n\r\n\t\t\tRVS.S.waitOnFeedback = undefined;\r\n\t\t\tjQuery(document.body).off('click.revbuilderbodyclick');\r\n\t\t\tbuildEditorList(skin[0].dataset.type);\r\n\t\t\tsetToSave();\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// CREATE NEW NAVIGATION\r\n\t\tRVS.DOC.on('click','#rs_ne_new_custom_nav',function() {\r\n\t\t\tRVS.nav.currentMaxid++;\r\n\t\t\tRVS.nav[RVS.nav.currentSkinType][\"new_\"+RVS.nav.currentMaxid] = RVS.F.createNewNavigation(RVS.nav.currentSkinType);\r\n\t\t\tbuildEditorList(RVS.nav.currentSkinType);\r\n\t\t\tjQuery(\"#rs_ne_nav_skin_new_\"+RVS.nav.currentMaxid).trigger('click');\r\n\t\t\tjQuery(\"#rs_ne_nav_skin_new_\"+RVS.nav.currentMaxid+' .rs_ne_nskin_edit').trigger('click');\r\n\t\t\tsetToSave();\r\n\t\t});\r\n\r\n\t\t//HIDE CUSTOM LAYER NAME ENTERING PROCESS\r\n\t\tRVS.DOC.on('hideCustomNavNameEntering',function() {\r\n\t\t\tjQuery('.rs_changename').removeClass(\"rs_changename\");\r\n\t\t});\r\n\r\n\t\t// CLICK ON YES - CHANGE NAME/ DELETE TEMPLATE\r\n\t\tRVS.DOC.on('click','.rs_ne_nskin_yes',function() {\r\n\t\t\tvar skin = jQuery(this).closest('.rs_ne_listelement'),\r\n\t\t\t\tinp = skin.find('input');\r\n\t\t\tif (skin[0].dataset.mode===\"rename\") {\r\n\t\t\t\tRVS.nav[skin[0].dataset.type][skin[0].dataset.handle].name = inp.val();\r\n\t\t\t\tRVS.S.waitOnFeedback = undefined;\r\n\t\t\t\tjQuery(document.body).off('click.revbuilderbodyclick');\r\n\t\t\t\tbuildEditorList(skin[0].dataset.type);\r\n\t\t\t\tsetToSave();\r\n\t\t\t\treturn false;\r\n\t\t\t} else\r\n\t\t\tif (skin[0].dataset.mode===\"delete\") {\r\n\t\t\t\tif (skin.hasClass(\"rs_ne_meta_value_btn\")) {\r\n\t\t\t\t\tdelete RVS.nav.currentSkin.placeholders[skin[0].dataset.placeholder];\r\n\t\t\t\t\tRVS.S.waitOnFeedback = undefined;\r\n\t\t\t\t\tjQuery(document.body).off('click.revbuilderbodyclick');\r\n\t\t\t\t\tbuildNavsMetaList();\r\n\t\t\t\t\tRVS.F.drawEditorNavigation();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// IF IT WAS ALREADY EXISTING IN DB, MARK TO DELETE\r\n\t\t\t\t\tif (RVS.nav.cache[skin[0].dataset.type][skin[0].dataset.handle]!==undefined) RVS.nav.toDelete.push(skin[0].dataset.handle);\r\n\t\t\t\t\tdelete RVS.nav[skin[0].dataset.type][skin[0].dataset.handle];\r\n\t\t\t\t\tRVS.S.waitOnFeedback = undefined;\r\n\t\t\t\t\tjQuery(document.body).off('click.revbuilderbodyclick');\r\n\t\t\t\t\tbuildEditorList(skin[0].dataset.type);\r\n\t\t\t\t}\r\n\t\t\t\tsetToSave();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// CLICK ON ON (CHANGE NAME / DELETE TEMPLATE)\r\n\t\tRVS.DOC.on('click','.rs_ne_nskin_no',function() {\r\n\t\t\tvar skin = jQuery(this).closest('.rs_ne_listelement');\r\n\t\t\tRVS.S.waitOnFeedback = undefined;\r\n\t\t\tjQuery(document.body).off('click.revbuilderbodyclick');\r\n\t\t\tif (skin.hasClass(\"rs_ne_meta_value_btn\"))\r\n\t\t\t\tbuildNavsMetaList();\r\n\t\t\telse\r\n\t\t\t\tbuildEditorList(skin[0].dataset.type);\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// MARKUP/CSS SELECTOR\r\n\t\tRVS.DOC.on('click','.rs_ne_markup_css_button',function() {\r\n\t\t\tRVS.F.pickMarkupCssMode(this);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\t/*\r\n\tTRIGGERED COLOR CHANGE ON THUMBS AND TABS\r\n\t*/\r\n\tRVS.F.bgUpdate = function(_, val) {\r\n\t\ttpGS.gsap.set(_thumbstabs[_].self,{background:val});\r\n\t};\r\n\r\n\t/*\r\n\tPICK CSS / MARKUP MODE SELECTOR\r\n\t */\r\n\tRVS.F.pickMarkupCssMode = function(a) {\r\n\t\tjQuery('.rs_ne_markup_css_button.selected').removeClass(\"selected\");\r\n\t\tjQuery(a.dataset.hide).hide();\r\n\t\tjQuery(a.dataset.show).show();\r\n\t\tRVS.nav.currentEditorMode = a.dataset.mode;\r\n\t\ta.className += \" selected\";\r\n\t\tif (RVS.nav.currentSkin!==undefined)\r\n\t\t\tRVS.nav.editor.setValue(RVS.nav.currentSkin[RVS.nav.currentEditorMode]);\r\n\t}\r\n\r\n\t/*\r\n\tPICK A NAVIGATION TYPE\r\n\t*/\r\n\tRVS.F.pickNavType = function(a) {\r\n\t\tjQuery('.rs_ne_selector.selected').removeClass(\"selected\");\r\n\t\ta.className +=\" selected\";\r\n\t\tRVS.nav.currentSkinType = a.dataset.type;\r\n\t\tjQuery('#rs_ne_helper_wrap, #rs_ne_settings, #rs_ne_markup_css_button_wrap').hide();\r\n\t\tjQuery('#rs_ne_cssmeta_config').hide();\r\n\t\tjQuery('#rs_ne_cssmeta_values').show();\r\n\t\tRVS.F.pickMarkupCssMode(document.getElementById(('rs_ne_mcss_thecsseditor')));\r\n\t\tbuildEditorList(a.dataset.type);\r\n\t\tjQuery('#rs_ne_factory_list .rs_ne_nav_skin').first().trigger('click');\r\n\t}\r\n\r\n\t/*\r\n\tPICK A NAVIGTION STYLE\r\n\t*/\r\n\tfunction pickNavStyle(a) {\r\n\t\tjQuery('.rs_ne_nav_skin.selected').removeClass(\"selected\");\r\n\t\ta.className += \" selected\";\r\n\t\tRVS.nav.currentSkinType = a.dataset.type;\r\n\t\tRVS.nav.currentSkinHandle = a.dataset.handle;\r\n\t\tRVS.nav.currentSkin = RVS.nav[a.dataset.type][a.dataset.handle];\r\n\t\tbuildNavsMetaList();\r\n\t\tjQuery('#rs_ne_helper_wrap, #rs_ne_settings, #rs_ne_markup_css_button_wrap').show();\r\n\t\tjQuery('#rs_ne_cssmeta_config').hide();\r\n\t\tjQuery('#rs_ne_cssmeta_values').show();\r\n\t\tjQuery('#rs_ne_nav_classname').removeClass(\"badvalue\");\r\n\r\n\t\t//SET DEFAULT VALUE\r\n\t\tRVS.nav.editor.setValue(RVS.nav.currentSkin[RVS.nav.currentEditorMode]);\r\n\t\tRVS.nav.infactorymode = RVS.nav.currentSkin.factory;\r\n\t\tif (RVS.nav.infactorymode)\r\n\t\t\tjQuery('#rs_ne_settings').addClass(\"infactorymode\");\r\n\t\telse\r\n\t\t\tjQuery('#rs_ne_settings').removeClass(\"infactorymode\");\r\n\r\n\t\tRVS.nav.editor.setOption(\"readOnly\",RVS.nav.currentSkin.factory);\r\n\t\tRVS.F.drawEditorNavigation();\r\n\t\tRVS.F.pickMarkupCssMode(document.getElementById(('rs_ne_mcss_thecsseditor')));\r\n\t}\r\n\r\n\t/*\r\n\tADD A NEW PRESET ELEMENT TO BE ABLE TO RESET TO THE LOADED SESSION SETTINGS\r\n\t*/\r\n\t/*\r\n\tfunction addSessionStartNavigation(_) {\r\n\t\tfor (var nav in RVS.nav) {\r\n\t\t\tif(!RVS.nav.hasOwnProperty(nav)) continue;\r\n\t\t\tif (nav===_.obj.style) {\r\n\t\t\t\tRVS.nav[nav].presets = RVS.nav[nav].presets===undefined ? {} : RVS.nav[nav].presets;\r\n\t\t\t\tRVS.nav[nav].presets.sessionstart = { name:\"Session Start\",values:RVS.F.safeExtend(true,{},_.obj.presets)};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tPRESET SELECTION CHANGED\r\n\t*/\r\n\tRVS.F.setNavPresetValues = function(obj) {\r\n\r\n\t\tvar _ = RVS.SLIDER.settings.nav[obj.type];\r\n\r\n\t\tif (_.preset===\"default\") {\r\n\t\t\tfor (var p in RVS.nav[obj.type][_.style].placeholders) {\r\n\t\t\t\tif(!RVS.nav[obj.type][_.style].placeholders.hasOwnProperty(p)) continue;\r\n\t\t\t\tRVS.F.updateSliderObj({path:'settings.nav.'+obj.type+'.presets',val:{}});\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\tvar preset =  RVS.nav[obj.type][_.style].presets[_.preset].values;\r\n\t\t\tfor (var valueindex in preset) {\r\n\t\t\t\tif(!preset.hasOwnProperty(valueindex)) continue;\r\n\t\t\t\tif (valueindex.indexOf('-def')===-1) {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:'settings.nav.'+obj.type+'.presets.'+valueindex,val:preset[valueindex]});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (preset[valueindex]===\"on\" || preset[valueindex]===true || preset[valueindex]==='true')\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:'settings.nav.'+obj.type+'.presets.'+valueindex,val:true});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.F.updateNavStyleSelection({init:false,type:obj.type});\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE PRESET INPUT FIELDS\r\n\t*/\r\n\tRVS.F.updatePresetInputs = function(obj) {\r\n\t\tvar _ =  obj.env===\"slide\" ? RVS.SLIDER[RVS.S.slideId].slide.nav[obj.type] : RVS.SLIDER.settings.nav[obj.type],\r\n\t\t\tcontainer = obj.env===\"slide\" ? jQuery('#sl_'+obj.type+'_styles_fieldset') : jQuery('#sr_'+obj.type+'_styles_fieldset'),\r\n\t\t\tcgroup = obj.env===\"slide\" ?  document.getElementById('form_slide_nav_'+obj.type) : document.getElementById('form_nav_'+obj.type+'_style');\r\n\r\n\r\n\r\n\t\t// IF NAVIGATION NOT EXISTS ANY MORE !!\r\n\t\tRVS.SLIDER.settings.nav[obj.type].style = RVS.nav[obj.type][RVS.SLIDER.settings.nav[obj.type].style]===undefined ? obj.type===\"arrows\" ? 1000 : obj.type===\"bullets\" ? 3000 :obj.type===\"thumbs\" ? 2000 : 4000 : RVS.SLIDER.settings.nav[obj.type].style;\r\n\r\n\t\tvar placeholders = RVS.nav[obj.type][RVS.SLIDER.settings.nav[obj.type].style].placeholders,\r\n\t\t\tpreset = obj.env===\"slide\" ? undefined : RVS.SLIDER.settings.nav[obj.type].preset,\r\n\t\t\tpresetvalues = preset!==undefined && preset!==\"default\" && RVS.nav[obj.type][RVS.SLIDER.settings.nav[obj.type].style].presets[preset]!==undefined ? RVS.nav[obj.type][RVS.SLIDER.settings.nav[obj.type].style].presets[preset].values : {},\r\n\t\t\tprefix = obj.env===\"slide\" ? \"sl_\"+obj.type+\"_\" : \"sr_\"+obj.type+\"_\",\r\n\t\t\trpre = obj.env===\"slide\" ? RVS.S.slideId+\".slide.\" : \"settings.\",\r\n\t\t\tsinp = obj.env===\"slide\" ? \"slideinput\" : \"sliderinput\",\r\n\t\t\tfrag = RVS.F.cF();\r\n\r\n\t\t_.presets = _.presets===undefined ? {} : _.presets;\r\n\r\n\t\tvar field,v,a,b,ipw,tmpi;\r\n\r\n\t\tfor (var fields in placeholders) {\r\n\t\t\tif(!placeholders.hasOwnProperty(fields)) continue;\r\n\t\t\tfield = placeholders[fields];\r\n\t\t\tv =  presetvalues[field]!==undefined ? presetvalues[field] : field.data;\r\n\t\t\ta = false;\r\n\r\n\t\t\tif (_.preset!==\"default\" && _.presets!==undefined && _.presets[fields]!==undefined) {\r\n\t\t\t\tv = _.presets[fields];\r\n\t\t\t\ta = _.presets[fields+\"-def\"];\r\n\t\t\t} else {\r\n\t\t\t\t_.presets[fields] = v;\r\n\t\t\t\t_.presets[fields+\"-def\"] = a;\r\n\t\t\t}\r\n\r\n\t\t\tb = _truefalse(a);\r\n\t\t\ta = b ? \" checked='checked' \"\t: \"\";\r\n\r\n\t\t\tvar row = RVS.F.cE({t:'row',cN:\"directrow navpresetrow\"}),\r\n\t\t\t\tonelong = RVS.F.cE({t:'onelong'}),\r\n\t\t\t\toneshort = RVS.F.cE({t:'oneshort'}),\r\n\t\t\t\tlabela = RVS.F.cE({t:'label_a'}),\r\n\t\t\t\tlabeli = RVS.F.cE({t:'label_icon'}),\r\n\t\t\t\tinput = RVS.F.cE({t:'input',type:'checkbox', id:prefix+fields+'-def', cN:'presetToCustom nav_'+obj.type+'_custom_defaults '+sinp,ds:{evt:\"redrawNavigation\", evtparam:obj.type, r : 'nav.'+obj.type+'.presets.'+fields+'-def'}});\r\n\r\n\t\t\tlabela.innerText = field.title;\r\n\t\t\tinput.checked = b;\r\n\r\n\r\n\t\t\tonelong.appendChild(labela);\r\n\t\t\toneshort.appendChild(labeli);\r\n\t\t\toneshort.appendChild(input);\r\n\r\n\t\t\trow.appendChild(onelong);\r\n\t\t\trow.appendChild(oneshort);\r\n\r\n\t\t\tswitch (field.type) {\r\n\t\t\t\tcase \"font-family\":\r\n\t\t\t\t\tvar\tselect = RVS.F.cE({t:'select',cN:\"navstyleinput searchbox tos2 presetToCustom \"+classext, id:prefix+fields, ds:{evt:\"redrawNavigation\",evtparam:obj.type,theme:\"minl120\",r:rpre+'nav.'+obj.type+'.presets.'+fields}});\r\n\t\t\t\t\tonelong.appendChild(select);\r\n\t\t\t\t\tfor (var fontindex in RVS.LIB.FONTS) if(RVS.LIB.FONTS.hasOwnProperty(fontindex) && RVS.LIB.FONTS[fontindex].label!==\"Dont Show Me\") select.appendChild(RVS.F.CO( RVS.LIB.FONTS[fontindex].label, RVS.LIB.FONTS[fontindex].label));\r\n\t\t\t\t\tselect.value = v;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"icon\":\r\n\t\t\t\tcase \"custom\":\r\n\t\t\t\t\tvar classext = \"\";\r\n\t\t\t\t\ttry {if (RVS.F.isNumeric(parseInt(v,0))) classext=\" valueduekeyboard\";} catch(e) {}\r\n\t\t\t\t\ttmpi =  RVS.F.cE({t:'input',type:'text', id:prefix+fields, cN:'presetToCustom'+classext+' navstyleinput', ds:{evt:\"redrawNavigation\",evtparam:obj.type,r:rpre+'nav.'+obj.type+'.presets.'+fields}});\r\n\t\t\t\t\ttmpi.value = v;\r\n\t\t\t\t\tif (field.type===\"icon\") {\r\n\t\t\t\t\t\tipw = RVS.F.cE({cN:\"input_presets_wrap\"});\r\n\t\t\t\t\t\tipw.appendChild(RVS.F.cI({cN:'input_presets_dropdown',c:'more_vertical'}));\r\n\t\t\t\t\t\tlet iinto = RVS.F.cE({cN:\"input_presets\",ds:{insertinto:prefix+fields}});\r\n\t\t\t\t\t\tiinto.innerHTML = iconlist;\r\n\t\t\t\t\t\tipw.appendChild(iinto);\r\n\t\t\t\t\t\tipw.prepend(tmpi);\r\n\t\t\t\t\t\tonelong.appendChild(ipw);\r\n\t\t\t\t\t} else onelong.appendChild(tmpi);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"color\":\r\n\t\t\t\tcase \"color-rgba\":\r\n\t\t\t\t\tif (v.indexOf(\",\")>=0 && v.indexOf(\"(\")==-1)\r\n\t\t\t\t\t\tv = v.split(\",\").length>3 ? \"rgba(\"+v+\")\" : \"rgb(\"+v+\")\";\r\n\t\t\t\t\trow.className =\"directrow\";\r\n\t\t\t\t\ttmpi =  RVS.F.cE({t:'input',type:'text',id:prefix+fields, cN:'navstyleinput presetToCustom my-color-field',ds:{evt:\"redrawNavigation\",evtparam:obj.type,r:rpre+'nav.'+obj.type+'.presets.'+fields,visible:'true',editing:RVS.F.capitalise(obj.type)+' '+field.title,navcolor:\"1\",mode:\"single\"}});\r\n\t\t\t\t\ttmpi.name=fields;\r\n\t\t\t\t\ttmpi.value = v;\r\n\t\t\t\t\tonelong.appendChild(tmpi);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tfrag.appendChild(row);\r\n\t\t}\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\t// RESET INPUTS\r\n\t\t\tcontainer[0].innerHTML=\"\";\r\n\t\t\tcontainer[0].appendChild(frag);\r\n\t\t\tcontainer.find('.navstyleinput.searchbox.tos2.presetToCustom ').ddTP(\"destroy\").ddTP({placeholder:\"Enter or Select\"});\r\n\r\n\t\t\tRVS.F.initTpColorBoxes(container.find('.navstyleinput.presetToCustom.my-color-field'));\r\n\t\t\tRVS.F.initOnOff(container);\r\n\t\t\tif (container[0].innerHTML===\"\")\r\n\t\t\t\tcgroup.classList.add(\"hide_while_empty\");\r\n\t\t\telse\r\n\t\t\t\tcgroup.classList.remove(\"hide_while_empty\");\r\n\t\t});\r\n\r\n\t\t//REMOVE NOT NEEDED OBJECT ATTRIBUTES\r\n\t\tfor (var i in _.presets) {\r\n\t\t\tif(!_.presets.hasOwnProperty(i)) continue;\r\n\t\t\tvar key = i.replace(\"-def\",\"\");\r\n\t\t\tif (placeholders[key]===undefined)  delete _.presets[i];\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE THE PRESET LIST FOR THE SELECTED STYLE IN NAVIGATION\r\n\t*/\r\n\tfunction updateNavPresetList(obj) {\r\n\t\tvar _apc = document.getElementById('sr_'+obj.type+'_style_preset');\r\n\t\tif (_apc===null || _apc==undefined) return;\r\n\r\n\t\t_apc.options.length = 0;\r\n\r\n\t\tvar f = document.createDocumentFragment();\r\n\t\tf.appendChild(RVS.F.CO(\"custom\",\"Custom\"));\r\n\t\tf.appendChild(RVS.F.CO(\"default\",\"Default\"));\r\n\r\n\r\n\t\tif (obj.navobj==undefined || obj.navobj.settings===null) {\r\n\t\t\t_apc.appendChild(f);\r\n\t\t\treturn;\r\n\t\t} else\r\n\t\tif (obj.navobj!==undefined) {\r\n\t\t\tvar o;\r\n\t\t\tfor (var preset in obj.navobj.presets) {\r\n\t\t\t\tif(!obj.navobj.presets.hasOwnProperty(preset)) continue;\r\n\t\t\t\to = RVS.F.CO(preset,obj.navobj.presets[preset].name);\r\n\t\t\t\t//o.dataset.values = obj.navobj.presets[preset].values;\r\n\t\t\t\tf.appendChild(o);\r\n\t\t\t}\r\n\t\t}\r\n\t\t_apc.appendChild(f);\r\n\r\n\t\tif (obj.presetChange===true) RVS.SLIDER.settings.nav[obj.type].preset = \"default\";\r\n\t\t_apc.value = RVS.SLIDER.settings.nav[obj.type].preset;\r\n\t\tjQuery(_apc).ddTP({tags:true}).ddTP('change');\r\n\r\n\t\tRVS.F.updatePresetInputs(obj);\r\n\t\tRVS.F.updateSlideBasedNavigationStyle();\r\n\t}\r\n\r\n\r\n\t/*\r\n\tNAVIGATION STYLE CHANGED / INITIALISED\r\n\t*/\r\n\tRVS.F.updateNavStyleSelection = function(obj) {\r\n\r\n\t\t// UPDATE PRESETS FOR SELECTED NAVIGATION STYLES\r\n\t\tupdateNavPresetList({init:obj.init, navobj:RVS.nav[obj.type][RVS.SLIDER.settings.nav[obj.type].style], type:obj.type, presetChange:obj.presetChange});\r\n\r\n\t\t// REDRAW NAVIGATION ELEMENT\r\n\t\tRVS.F.drawNavigation({\ttype:obj.type, init:obj.init, presetChange:obj.presetChange});\r\n\t};\r\n\r\n\r\n\t/*\r\n\tGET DEFAULT, CUSTOM OR PRESET CSS SETTINGS\r\n\t*/\r\n\tfunction manipulateNavCSS(obj) {\r\n\t\tvar _ =  RVS.SLIDER.settings.nav[obj.type].presets,\r\n\t\t\t__ = RVS.SLIDER[RVS.S.slideId].slide.nav[obj.type].presets,\r\n\t\t\tskin = obj.skin===undefined ? RVS.nav[obj.type][obj.handle] : obj.skin,\r\n\t\t\tthecss = skin.css,\r\n\t\t\tparts = thecss.split('##'),\r\n\t\t\tsfor = [],\r\n\t\t\tcounter = 0,\r\n\t\t\tph = \"\";\r\n\r\n\t\tif (thecss==undefined) return \"\";\r\n\t\tfor (var i=0;i<parts.length;i++) {\r\n\t\t\tif (counter==1) {\r\n\t\t\t\tph=parts[i];\r\n\t\t\t\tcounter=0;\r\n\t\t\t\tsfor.push(ph);\r\n\t\t\t} else {\r\n\t\t\t\tcounter++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (RVS.SLIDER[RVS.S.slideId].slide==undefined) return \"\";\r\n\r\n\t\tjQuery.each(sfor,function(i,sf) {\r\n\t\t\tvar v=\"\",\r\n\t\t\t\tw=\"\";\r\n\t\t\tw = (skin.placeholders[sf]!==undefined && skin.placeholders[sf].data!==undefined) ? skin.placeholders[sf].data : \"\";\r\n\t\t\tv = sf===obj.attribute ? obj.color : obj.default===true ? skin.placeholders[sf]!==undefined ? skin.placeholders[sf].data : \"\" : __!==undefined && __[sf+\"-def\"] ? __[sf] : _[sf+\"-def\"] ? _[sf] : w;\r\n\r\n\t\t\tthecss = thecss.replace('##'+sf+'##',v);\r\n\t\t});\r\n\t\t_leftarrow.css({width:\"\",height:\"\"});\r\n\t\t_rightarrow.css({width:\"\",height:\"\"});\r\n\t\treturn \"<style id='\"+obj.type+\"_stylemanipualtion\"+\"'>\"+thecss+\"</style>\";\r\n\t}\r\n\r\n\t/*\r\n\tGET NAV THUMB CSS\r\n\t*/\r\n\tfunction getNavCSS(obj) {\r\n\t\tif (RVS.SLIDER[obj.id]===undefined) return \"\";\r\n\t\tvar navsrc = RVS.SLIDER[obj.id].slide.thumb.customThumbSrc,\r\n\t\t\t_css = {};\r\n\t\tif (navsrc===undefined || navsrc.length<3 || navsrc[navsrc.length-1]===\"/\")\r\n\t\t\t\t_css = RVS.F.getSlideBGDrawObj({id:obj.id});\r\n\t\t\telse\r\n\t\t\t\t_css = {\"background-size\":\"cover\", backgroundPosition:\"center center\", backgroundRepeat:\"no-repeat\",backgroundImage:'url('+navsrc+')'};\r\n\t\treturn _css;\r\n\t}\r\n\r\n\t/*\r\n\tDRAW NAVIGATION\r\n\t*/\r\n\tRVS.F.drawNavigation = function(obj) {\r\n\t\tif (obj===undefined || RVS.SLIDER.slideIDs.length==0) return;\r\n\t\tvar _ = RVS.SLIDER.settings.nav[obj.type],\r\n\t\t\t_STYLE = obj.style!==undefined ? obj.style : _.style,\r\n\t\t\tnavobj = RVS.nav[obj.type][_STYLE],\r\n\t\t\tnextslideid = RVS.SLIDER.slideIDs.length>0 ? RVS.SLIDER.slideIDs[1] : RVS.SLIDER.slideIDs[0],\r\n\t\t\tprevslideid = RVS.SLIDER.slideIDs[RVS.SLIDER.slideIDs.length-1];\r\n\r\n\t\tif (navobj!==undefined && navobj.markup!==undefined) {\r\n\t\t\tvar cname = RVS.F.sanitize_input(navobj.handle.toLowerCase()),\r\n\t\t\t\tthecss = navobj.css!==undefined ? manipulateNavCSS({color:obj.color, attribute:obj.attribute, type:obj.type, handle:_STYLE ,default:obj.default}) : \"\";\r\n\r\n\t\t\t// BUILD BASIC HTML OF ARROWS\r\n\t\t\tif (obj.type===\"arrows\") {\r\n\r\n\t\t\t\t_leftarrow.attr('class','aable markable tparrows tp-leftarrow '+cname);\r\n\t\t\t\t_rightarrow.attr('class','aable markable tparrows tp-rightarrow '+cname);\r\n\r\n\t\t\t\tvar markupright,\r\n\t\t\t\t\tmarkupleft;\r\n\r\n\t\t\t\tmarkupright = markupleft = navobj.markup;\r\n\t\t\t\tvar thumbleft = getNavCSS({id:prevslideid}),\r\n\t\t\t\t\tthumbright = getNavCSS({id:nextslideid});\r\n\r\n\t\t\t\tmarkupright = markupright.replace('##title##',(RVS.SLIDER[nextslideid]===undefined ? \"Title\" : RVS.SLIDER[nextslideid].slide.title));\r\n\t\t\t\tmarkupleft = markupleft.replace('##title##',(RVS.SLIDER[prevslideid]===undefined ? \"Title\" : RVS.SLIDER[prevslideid].slide.title));\r\n\r\n\t\t\t\t_leftarrow.html(thecss+markupleft);\r\n\t\t\t\t_rightarrow.html(markupright);\r\n\t\t\t\t_leftarrow.find('.tp-arr-imgholder').css(thumbleft);\r\n\t\t\t\t_leftarrow.find('.tp-arr-imgholder').attr('id','arrows_'+prevslideid);\r\n\t\t\t\t_rightarrow.find('.tp-arr-imgholder').css(thumbright);\r\n\t\t\t\t_rightarrow.find('.tp-arr-imgholder').attr('id','arrows_'+nextslideid);\r\n\r\n\t\t\t\tRVS.F.dragMe({element:_leftarrow,\r\n\t\t\t\t\t\tinput:{x:jQuery(\"#nav_arrows_left_offsetx\"),y:jQuery(\"#nav_arrows_left_offsety\")},\r\n\t\t\t\t\t\tupdateInput:true,\r\n\t\t\t\t\t\tattributeRoot:\"settings.\",\r\n\t\t\t\t\t\tcallEvent:\"sliderNavPositionUpdate\",\r\n\t\t\t\t\t\tcallEventParam:\"arrows\",\r\n\t\t\t\t\t\tforms:[\"*navlayout*#form_nav_arrows:#sr_na_arr_12\"]\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tRVS.F.dragMe({element:_rightarrow,\r\n\t\t\t\t\t\tinput:{x:jQuery(\"#nav_arrows_right_offsetx\"),y:jQuery(\"#nav_arrows_right_offsety\")},\r\n\t\t\t\t\t\tupdateInput:true,\r\n\t\t\t\t\t\tattributeRoot:\"settings.\",\r\n\t\t\t\t\t\tcallEvent:\"sliderNavPositionUpdate\",\r\n\t\t\t\t\t\tcallEventParam:\"arrows\",\r\n\t\t\t\t\t\tforms:[\"*navlayout*#form_nav_arrows:#sr_na_arr_13\"]\r\n\t\t\t\t\t});\r\n\r\n\t\t\t} else\r\n\t\t\tif (obj.type===\"bullets\") {\r\n\t\t\t\t_bullets.data('cname',cname);\r\n\t\t\t\t_bullets.attr('class','aable markable tp-bullets '+cname+' nav-dir-'+_.direction+' nav-pos-ver-'+_.vertical+' nav-pos-hor-'+_.horizontal);\r\n\t\t\t\t_bullets.html(thecss);\r\n\r\n\t\t\t\tvar markup = navobj.markup;\r\n\t\t\t\tfor (var i=0;i<=RVS.SLIDER.slideIDs.length-1;i++) {\r\n\t\t\t\t\tvar slideid = RVS.SLIDER.slideIDs[i],\r\n\t\t\t\t\t\tnewmarkup = markup.replace('##title##',RVS.SLIDER[slideid].slide.title),\r\n\t\t\t\t\t\tselectedelem = i==0 ? \"selected\" : \"\",\r\n\t\t\t\t\t\tbullet = jQuery('<div class=\"tp-bullet '+selectedelem+'\">'+newmarkup+'</div>');\r\n\t\t\t\t\tbullet.find('.tp-bullet-image').css(getNavCSS({id:slideid})).attr('id','bullets'+slideid);\r\n\r\n\t\t\t\t\t_bullets.append(bullet);\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.dragMe({element:_bullets,\r\n\t\t\t\t\tinput:{x:jQuery(\"#nav_bullets_offsetx\"),y:jQuery(\"#nav_bullets_offsety\")},\r\n\t\t\t\t\tupdateInput:true,\r\n\t\t\t\t\tattributeRoot:\"settings.\",\r\n\t\t\t\t\tcallEvent:\"sliderNavPositionUpdate\",\r\n\t\t\t\t\tcallEventParam:\"bullets\",\r\n\t\t\t\t\tforms:[\"*navlayout*form_nav_bullets:#sr_na_bul_11\"]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tif (obj.type===\"tabs\" || obj.type===\"thumbs\") {\r\n\t\t\t\tif (obj.presetChange) {\r\n\t\t\t\t\t_.width = navobj.dim.width!==undefined ? navobj.dim.width : _.width;\r\n\t\t\t\t\t_.height = navobj.dim.height!==undefined ? navobj.dim.height : _.height;\r\n\t\t\t\t\tjQuery('#nav_'+obj.type+'_width').val(_.width);\r\n\t\t\t\t\tjQuery('#nav_'+obj.type+'_height').val(_.height);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttpGS.gsap.set(_thumbstabs[obj.type].self,{background:window.RSColor.get(_.wrapperColor)});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_thumbstabs[obj.type].self.data('cname',cname);\r\n\t\t\t\t_thumbstabs[obj.type].inner.html(thecss);\r\n\t\t\t\tvar markup = navobj.markup;\r\n\t\t\t\tfor (var i=0;i<=Math.min(_.amount,RVS.SLIDER.slideIDs.length-1);i++) {\r\n\r\n\t\t\t\t\tvar slideid = RVS.SLIDER.slideIDs[i],\r\n\t\t\t\t\t\tnewmarkup = markup.replace('##title##',RVS.SLIDER[slideid].slide.title),\r\n\t\t\t\t\t\tselectedelem = i==0 ? \"selected\" : \"\";\r\n\t\t\t\t\tfor (var pars=0;pars<10;pars++) {\r\n\t\t\t\t\t\tvar parval = (RVS.SLIDER[slideid].slide.info.params[pars]!==undefined) ? RVS.SLIDER[slideid].slide.info.params[pars].val : '';\r\n\t\t\t\t\t\tif (parval!==undefined && parval.length>0)\r\n\t\t\t\t\t\t\tnewmarkup = newmarkup.replace('##param'+pars+'##',parval);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar tab = jQuery('<div class=\"'+_thumbstabs[obj.type].single+' '+selectedelem+'\">'+newmarkup+'</div>');\r\n\t\t\t\t\ttab.find('.'+_thumbstabs[obj.type].single+'-image').css(getNavCSS({id:slideid})).attr('id',obj.type+'_'+slideid);\r\n\r\n\t\t\t\t\t_thumbstabs[obj.type].inner.append(tab);\r\n\t\t\t\t}\r\n\t\t\t\tvar callform = obj.type==\"tabs\" ? \"*navlayout*#form_nav_tabs:#sr_na_tab_11\" : \"*navlayout*#form_nav_thumbs:#sr_na_thumb_11\";\r\n\t\t\t\tRVS.F.dragMe({element:_thumbstabs[obj.type].self,\r\n\t\t\t\t\tinput:{x:jQuery(\"#nav_\"+obj.type+\"_offsetx\"),y:jQuery(\"#nav_\"+obj.type+\"_offsety\")},\r\n\t\t\t\t\tupdateInput:true,\r\n\t\t\t\t\tattributeRoot:\"settings.\",\r\n\t\t\t\t\tcallEvent:\"sliderNavPositionUpdate\",\r\n\t\t\t\t\tcallEventParam:obj.type,\r\n\t\t\t\t\tforms:[callform]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tRVS.F.sliderNavPositionUpdate({type:obj.type});\r\n\t};\r\n\r\n\r\n\r\n\t/*\r\n\tUPDATE THE POSITION AND VISIBILITY OF THE NAVIGATION ELEMENTS\r\n\t*/\r\n\tfunction putNavObjInPos(el,_) {\r\n\t\tif (_===undefined) return;\r\n\t\tvar cOffset = {x:0, y:0},\r\n\t\t\ttemp = _.align===\"slider\" ?\r\n\t\t\t\t{\tx:parseInt(_.offsetX,0) + (_.horizontal===\"left\" ? cOffset.x : 0),\r\n\t\t\t\t\ty:parseInt(_.offsetY,0) + (_.vertical===\"top\" ? cOffset.y : 0)} :\r\n\t\t\t\t{\tx:parseInt(_.offsetX,0) + (_.horizontal===\"right\" ? RVS.S.layer_wrap_offset.xr : RVS.S.layer_wrap_offset.x),\r\n\t\t\t\t\ty:parseInt(_.offsetY,0) + (_.vertical===\"top\" ? RVS.S.layer_wrap_offset.y : RVS.S.layer_wrap_offset.y - cOffset.y)\r\n\t\t\t\t},\r\n\t\t\tanimobj = {marginLeft:\"0px\",x:\"0%\",left:temp.x+\"px\",right:\"auto\", marginTop:\"0px\",y:\"0%\",top:temp.y+\"px\",bottom:\"auto\"};\r\n\r\n\r\n\t\tRVS.S.dim_offsets = RVS.F.sliderDimensionOffsets();\r\n\r\n\t\tswitch (_.horizontal) {\r\n\t\t\tcase \"right\":\r\n\t\t\t\tanimobj.left = \"auto\";\r\n\t\t\t\tanimobj.right = (parseInt(temp.x,0))+\"px\";\r\n\t\t\tbreak;\r\n\t\t\tcase \"center\":\r\n\t\t\t\tanimobj.marginLeft = ((cOffset.x/2) + parseInt(_.offsetX,0))+\"px\";\r\n\t\t\t\tanimobj.x = \"-50%\";\r\n\t\t\t\tanimobj.left = \"50%\";\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tswitch (_.vertical) {\r\n\t\t\tcase \"bottom\":\r\n\t\t\t\tanimobj.top = \"auto\";\r\n\t\t\t\tanimobj.bottom = temp.y+\"px\";\r\n\t\t\tbreak;\r\n\t\t\tcase \"center\":\r\n\t\t\t\tvar extraoffset = (RVS.S.dim_offsets.carouseltop/2 + RVS.S.dim_offsets.navtop/2) - (RVS.S.dim_offsets.carouselbottom/2 + RVS.S.dim_offsets.navbottom/2);\r\n\t\t\t\tanimobj.marginTop = (cOffset.y/2) + (parseInt(_.offsetY,0)+parseInt(extraoffset,0))+\"px\";\r\n\t\t\t\tanimobj.y = \"-50%\";\r\n\t\t\t\tanimobj.top = \"50%\";\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tif (_.spanWrapper===true) {\r\n\t\t\tswitch(_.direction) {\r\n\t\t\t\tcase \"horizontal\":\r\n\t\t\t\t\tanimobj.marginLeft=\"0px\";\r\n\t\t\t\t\tanimobj.x=\"0%\";\r\n\t\t\t\t\tanimobj.left=\"0%\";\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"vertical\":\r\n\t\t\t\t\tanimobj.marginTop=\"0px\";\r\n\t\t\t\t\tanimobj.y=\"0%\";\r\n\t\t\t\t\tanimobj.top=\"0px\";\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttpGS.gsap.set(el,animobj);\r\n\t}\r\n\r\n\r\n\tRVS.F.sliderNavPositionUpdate = function(obj) {\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\tRVS.F.sliderNavPositionUpdateRAF(obj);\r\n\t\t});\r\n\t}\r\n\r\n\tRVS.F.sliderNavPositionUpdateRAF = function(obj) {\r\n\r\n\t\tvar _ = RVS.SLIDER.settings.nav[obj.type];\r\n\t\tswitch (obj.type) {\r\n\t\t\tcase \"arrows\":\r\n\t\t\t\tif (!_.set || RVS.SLIDER.settings.type===\"hero\") {\r\n\t\t\t\t\t_leftarrow.hide();\r\n\t\t\t\t\t_rightarrow.hide();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t_leftarrow.show();\r\n\t\t\t\t\t_rightarrow.show();\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"bullets\":\r\n\t\t\t\tif (!_.set || RVS.SLIDER.settings.type===\"hero\")\r\n\t\t\t\t\t_bullets.hide();\r\n\t\t\t\telse\r\n\t\t\t\t\t_bullets.show();\r\n\t\t\tbreak;\r\n\t\t\tcase \"tabs\":\r\n\t\t\tcase \"thumbs\":\r\n\t\t\t\tif (!_.set || RVS.SLIDER.settings.type===\"hero\")\r\n\t\t\t\t\t_thumbstabs[obj.type].self.hide();\r\n\t\t\t\telse\r\n\t\t\t\t\t_thumbstabs[obj.type].self.show();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tif (_.set===false || RVS.SLIDER.settings.type===\"hero\") {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\r\n\t\tif (obj.type===\"arrows\") {\r\n\t\t\tputNavObjInPos(_leftarrow,_.left);\r\n\t\t\tputNavObjInPos(_rightarrow,_.right);\r\n\t\t} else\r\n\t\tif (obj.type===\"bullets\") {\r\n\t\t\t//UPDATE CLASSES\r\n\t\t\t_bullets.attr('class','aable markable tp-bullets '+_bullets.data('cname')+' nav-dir-'+_.direction+' nav-pos-ver-'+_.vertical+' nav-pos-hor-'+_.horizontal);\r\n\t\t\t// SET BULLET SPACES AND POSITION\r\n\t\t\t_bullets.find('.tp-bullet').each(function(i) {\r\n\t\t\t\tvar b = jQuery(this),\r\n\t\t\t\t\tam = RVS.SLIDER.slideIDs.length,\r\n\t\t\t\t\tw = b.outerWidth()+parseInt((_.space===undefined? 0:_.space),0),\r\n\t\t\t\t\th = b.outerHeight()+parseInt((_.space===undefined? 0:_.space),0);\r\n\r\n\t\t\t\tif (_.direction===\"vertical\") {\r\n\r\n\t\t\t\t\tb.css({top:((i)*h)+\"px\", left:\"0px\"});\r\n\t\t\t\t\t_bullets.css({height:(((am-1)*h) + b.outerHeight()),width:b.outerWidth()});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tb.css({left:((i)*w)+\"px\", top:\"0px\"});\r\n\t\t\t\t\t_bullets.css({width:(((am-1)*w) + b.outerWidth()),height:b.outerHeight()});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tputNavObjInPos(_bullets,_);\r\n\t\t} else\r\n\t\tif (obj.type===\"tabs\" || obj.type===\"thumbs\") {\r\n\r\n\r\n\t\t\t//UPDATE CLASSES\r\n\t\t\tvar am = Math.min(_.amount,RVS.SLIDER.slideIDs.length),\r\n\t\t\t\tw = parseInt(_.width,0)+parseInt(_.space,0),\r\n\t\t\t\th = parseInt(_.height,0)+parseInt(_.space,0);\r\n\t\t\t_.width = parseInt(_.width);\r\n\t\t\t_.height = parseInt(_.height);\r\n\t\t\t_thumbstabs[obj.type].self.attr('class','aable markable '+_thumbstabs[obj.type].single+'s '+_thumbstabs[obj.type].self.data('cname')+' nav-dir-'+_.direction+' nav-pos-ver-'+_.vertical+' nav-pos-hor-'+_.horizontal);\r\n\t\t\ttpGS.gsap.set(_thumbstabs[obj.type].self,{padding:_.padding});\r\n\t\t\t_.padding = parseInt(_.padding,0);\r\n\r\n\r\n\t\t\t// SET BULLET SPACES AND POSITION\r\n\t\t\t_thumbstabs[obj.type].inner.find('.'+_thumbstabs[obj.type].single).each(function(i) {\r\n\t\t\t\tif (_.direction===\"vertical\")\r\n\t\t\t\t\ttpGS.gsap.set(this,{top:((i)*h)+\"px\",left:\"0px\",width:_.width+\"px\",height:_.height+\"px\"});\r\n\t\t\t\telse\r\n\t\t\t\t\ttpGS.gsap.set(this,{left:((i)*w)+\"px\", top:\"0px\",width:_.width+\"px\",height:_.height+\"px\"});\r\n\t\t\t});\r\n\r\n\t\t\tvar maxw = _.direction===\"horizontal\" ? (_.width * am) + (_.space*(am-1)) + parseInt(2*_.mhoffset) : _.width + parseInt(2*_.mhoffset),\r\n\t\t\t\tmaxh = _.direction===\"horizontal\" ? parseInt(_.height) + parseInt(2*_.mvoffset): (_.height * am) + (_.space*(am-1))+parseInt(2*_.mvoffset),\r\n\t\t\t\twrapcssobj = {width:maxw+\"px\", height:maxh+\"px\",overwrite:\"auto\"},\r\n\t\t\t\tmaskcssobj = {padding:_.mvoffset+\"px \"+_.mhoffset+\"px\", top:\"auto\", left:\"auto\", bottom:\"auto\", marginTop:\"0px\", marginBottom:\"0px\",right:\"auto\", y:\"0%\", x:\"0px\",width:maxw+\"px\",height:maxh+\"px\",overflow:\"hidden\",position:\"relative\",overwrite:\"auto\",marginLeft:\"auto\",marginRight:\"auto\"};\r\n\t\t\t\t/* innecssobj = {y:\"0px\",x:\"0px\",position:\"relative\"}; */\r\n\r\n\t\t\tif (_.spanWrapper===true) {\r\n\t\t\t\tswitch (_.direction) {\r\n\t\t\t\t\tcase \"horizontal\":\r\n\t\t\t\t\t\twrapcssobj.width = RVS.S.ulDIM.width-(parseInt(_.padding,0)*2)+\"px\";\r\n\t\t\t\t\t\tmaskcssobj.x = _.offsetX;\r\n\t\t\t\t\t\tmaskcssobj.marginLeft = _.horizontal===\"center\" ? \"auto\" : \"0px\";\r\n\t\t\t\t\t\tmaskcssobj.marginRight = _.horizontal===\"center\" ? \"auto\" : \"0px\";\r\n\t\t\t\t\t\tif (_.horizontal===\"right\") {\r\n\t\t\t\t\t\t\tmaskcssobj.right=_.padding+\"px\";\r\n\t\t\t\t\t\t\tmaskcssobj.position=\"absolute\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (_.innerOuter===\"outer-bottom\")\r\n\t\t\t\t\t\t\tRVS.S.navOffset[obj.type].bottom = parseInt(_.height,0) + (2*_.padding);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\tif (_.innerOuter===\"outer-top\")\r\n\t\t\t\t\t\t\tRVS.S.navOffset[obj.type].top = parseInt(_.height,0) + (2*_.padding);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"vertical\":\r\n\t\t\t\t\t\twrapcssobj.height =(RVS.S.ulDIM.height-(parseInt(_.padding,0)*2))+\"px\";\r\n\t\t\t\t\t\tmaskcssobj.marginTop = _.vertical!==\"bottom\" ? _.offsetY+\"px\" : \"0px\";\r\n\t\t\t\t\t\tmaskcssobj.marginBottom = _.vertical===\"bottom\" ? -1*_.offsetY+\"px\" : \"0px\";\r\n\t\t\t\t\t\tif (_.vertical===\"center\") {\r\n\t\t\t\t\t\t\tmaskcssobj.top = \"50%\";\r\n\t\t\t\t\t\t\tmaskcssobj.y = \"-50%\";\r\n\t\t\t\t\t\t\tmaskcssobj.position = \"absolute\";\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\tif (_.vertical===\"bottom\") {\r\n\t\t\t\t\t\t\tmaskcssobj.top = \"auto\";\r\n\t\t\t\t\t\t\tmaskcssobj.bottom = _.padding+\"px\";\r\n\t\t\t\t\t\t\tmaskcssobj.position = \"absolute\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (_.innerOuter===\"outer-left\")\r\n\t\t\t\t\t\t\tRVS.S.navOffset[obj.type].left = parseInt(_.width,0) + (2*_.padding);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\tif (_.innerOuter===\"outer-right\")\r\n\t\t\t\t\t\t\tRVS.S.navOffset[obj.type].right = parseInt(_.width,0) + (2*_.padding);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttpGS.gsap.set(_thumbstabs[obj.type].inner,{position:'relative'});\r\n\t\t\ttpGS.gsap.set(_thumbstabs[obj.type].self,wrapcssobj);\r\n\t\t\ttpGS.gsap.set(_thumbstabs[obj.type].mask,maskcssobj);\r\n\t\t\tputNavObjInPos(_thumbstabs[obj.type].self,_);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction setNavInnerOuter(obj) {\r\n\t\tvar _=RVS.SLIDER.settings.nav[obj.type],\r\n\t\t\thor = jQuery('#sr_'+obj.type+'hor'),\r\n\t\t\tver = jQuery('#sr_'+obj.type+'ver'),\r\n\t\t\tori = 'sr_'+obj.type+'direction';\r\n\r\n\t\tjQuery('#sr_'+obj.type+'_halignwrap').show();\r\n\t\tjQuery('#sr_'+obj.type+'_valignwrap').show();\r\n\r\n\t\tswitch (_.innerOuter) {\r\n\t\t\tcase \"inner\":\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_center-center').show();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_left-center').show();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_right-center').show();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_center-top').show();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_center-bottom').show();\r\n\t\t\tbreak;\r\n\t\t\tcase \"outer-vertical\":\r\n\t\t\t\tRVS.F.setS2Option({select:hor, selectValue:\"left\"});\r\n\t\t\t\tRVS.F.setS2Option({select:ver, selectValue:\"center\"});\r\n\t\t\t\tRVS.F.setRadio({radio:ori, radioValue:\"vertical\", change:true});\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_center-top').hide();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_center-center').hide();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_center-bottom').hide();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_left-center').show();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_right-center').show();\r\n\t\t\t\tjQuery('#sr_'+obj.type+'_halignwrap').hide();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"outer-horizontal\":\r\n\t\t\t\tRVS.F.setS2Option({select:hor, selectValue:\"center\"});\r\n\t\t\t\tRVS.F.setS2Option({select:ver, selectValue:\"bottom\"});\r\n\t\t\t\tRVS.F.setRadio({radio:ori, radioValue:\"horizontal\", change:true});\r\n\r\n\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_left-center').hide();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_center-center').hide();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_right-center').hide();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_center-top').show();\r\n\t\t\t\tjQuery('#'+obj.type+'pos_selector_center-bottom').show();\r\n\t\t\t\tjQuery('#sr_'+obj.type+'_valignwrap').hide();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\thor.trigger('change');\r\n\t\tver.trigger('change');\r\n\t}\r\n\r\n\r\n\t/*\r\n\tFILE AND AJAX HANDLINGS\r\n\t*/\r\n\r\n\t/*\r\n\tUPDATE NAV OBJECT STRUCTURE\r\n\t*/\r\n\t/*\r\n\tfunction updateNavObject(obj,style,mode) {\r\n\t\tvar found = false,todelete,foundnav;\r\n\r\n\t\tfor (var nav in RVS.navigations) {\r\n\t\t\tif(!RVS.navigations.hasOwnProperty(nav)) continue;\r\n\t\t\tif (RVS.navigations[nav].handle===style) {\r\n\t\t\t\tRVS.navigations[nav].settings.presets = RVS.navigations[nav].settings.presets===undefined ? {} : RVS.navigations[nav].settings.presets;\r\n\t\t\t\tfor (var preset in RVS.navigations[nav].settings.presets) {\r\n\t\t\t\t\tif(!RVS.navigations[nav].settings.presets.hasOwnProperty(preset)) continue;\r\n\t\t\t\t\tif (RVS.navigations[nav].settings.presets[preset].handle === obj.handle) {\r\n\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\tfoundnav = nav;\r\n\t\t\t\t\t\tif (mode===\"save\")\r\n\t\t\t\t\t\t\tRVS.navigations[nav].settings.presets[preset] = RVS.F.safeExtend({},obj,true);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttodelete = preset;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif (found===false && mode===\"save\") {\r\n\t\t\t\t\tfound=true;\r\n\t\t\t\t\tRVS.navigations[nav].settings.presets.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (mode!==\"save\") RVS.navigations[foundnav].settings.presets.splice(todelete,1);\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tSAVE NAVIGATION PRESETS\r\n\t*/\r\n\tRVS.F.saveDeleteNavPreset = function(_) {\r\n\r\n\t\tvar onp = jQuery('#sr_'+_.type+'_style_preset'),\r\n\t\t\tname = onp.val(),\r\n\t\t\tpresethandle = RVS.F.sanitize_input(name),\r\n\t\t\ttosave = {},\r\n\t\t\tsettings = RVS.SLIDER.settings.nav[_.type],\r\n\t\t\tnavobj =  RVS.nav[_.type][settings.style],\r\n\t\t\trequest = _.mode===\"save\" ? \"create_navigation_preset\" : \"delete_navigation_preset\";\r\n\r\n\t\tif (name===\"\" || name===\"null\" || name===null) {\r\n\t\t\tRVS.F.showErrorMessage(RVS_LANG.no_preset_name);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (_.mode===\"save\") {\r\n\t\t\tfor (var attr in settings.presets) {\r\n\t\t\t\tif(!settings.presets.hasOwnProperty(attr)) continue;\r\n\t\t\t\tvar v = settings.presets[attr];\r\n\t\t\t\tif (attr.indexOf(\"-def\")>0 && (v===\"on\" || v===true || v==='true')) {\r\n\t\t\t\t\tvar real = attr.replace(\"-def\",\"\");\r\n\t\t\t\t\ttosave[real] = settings.presets[real];\r\n\t\t\t\t\ttosave[attr] = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(jQuery.isEmptyObject(tosave)){\r\n\t\t\t\tRVS.F.showErrorMessage(RVS_LANG.no_nav_changes_done);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else\r\n\t\tif (_.mode===\"delete\") delete navobj.presets[presethandle];\r\n\r\n\t\tvar data = _.mode===\"save\" ? { navigation: settings.style, name: name,handle: presethandle,type: _.type, do_overwrite: true,values: tosave} : {style_handle: settings.style,handle: presethandle,type: _.type};\r\n\t\tnavobj.presets = navobj.presets===undefined  || navobj.presets===\"\" ? {} : navobj.presets;\r\n\t\tif (_.mode===\"save\") navobj.presets[name] = { name:name, values:tosave};\r\n\t\tRVS.F.ajaxRequest(request, data, function(response){});\r\n\r\n\t\t// UPDATE PRESETS FOR SELECTED NAVIGATION STYLES LIVE\r\n\t\tupdateNavPresetList({init:false,navobj:navobj,type:_.type,presetChange:true});\r\n\t\tsettings.preset = _.mode===\"save\" ? presethandle : \"default\";\r\n\r\n\r\n\r\n\t\tRVS.F.setNavPresetValues({type:_.type});\r\n\t};\r\n\r\n\r\n\t/*\r\n\tLOCAL LISTENERS\r\n\t*/\r\n\tfunction initLocalListeners() {\r\n\t\t// LISTENER ON NAVIGATION STYLE AND PRESET CHANGES\r\n\r\n\t\tRVS.DOC.on('openNavigationEditor',RVS.F.openNavigationEditor);\r\n\t\tRVS.DOC.on('sliderNavUpdate',function(e,ep) {RVS.F.updateNavStyleSelection({init:false,type:ep,presetChange:true});});\r\n\t\tRVS.DOC.on('redrawNavigation',function(e,ep) {RVS.F.drawNavigation({type:ep,init:true}); });\r\n\t\tRVS.DOC.on('sliderNavPreset',function(e,ep) {RVS.F.setNavPresetValues({type:ep});});\r\n\t\tRVS.DOC.on('sliderNavPositionUpdate',function(e,ep) {RVS.F.sliderNavPositionUpdate({type:ep}); /*setSlidesDimension(false);*/});\r\n\t\tRVS.DOC.on('navinnerouter',function(e,ep) {setNavInnerOuter({type:ep});});\r\n\r\n\t\t// SAVE NAVIGATON PRESETS LISTENER\r\n\t\tRVS.DOC.on('saveNavPreset',function(e,ep) {RVS.F.saveDeleteNavPreset({mode:\"save\", type:ep}); });\r\n\r\n\t\t// DELETE NAVIGATON PRESETS LISTENER\r\n\t\tRVS.DOC.on('deleteNavPreset',function(e,ep) {RVS.F.saveDeleteNavPreset({mode:\"delete\", type:ep}); });\r\n\r\n\r\n\t\t// ARROWS QUICK SHOW THE SELECTED ARROW STYLE\r\n\t\tRVS.DOC.on('mouseenter','#ddTP-sr_arrows_style-results li',function() {\r\n\t\t\tvar fourdigit = this.id.split('-result-')[1].split(\"-\")[0],\r\n\t\t\t\tkey = this.id.split(fourdigit+\"-\")[1];\r\n\t\t\tRVS.F.drawNavigation({\ttype:\"arrows\", style:key, init:false, presetChange:true, default:true});\r\n\t\t});\r\n\r\n\t\t// BULLETS QUICK SHOW THE SELECTED ARROW STYLE\r\n\t\tRVS.DOC.on('mouseenter','#ddTP-sr_bullets_style-results li',function() {\r\n\t\t\tvar fourdigit = this.id.split('-result-')[1].split(\"-\")[0],\r\n\t\t\t\tkey = this.id.split(fourdigit+\"-\")[1];\r\n\t\t\tRVS.F.drawNavigation({\ttype:\"bullets\", style:key, init:false, presetChange:true, default:true});\r\n\t\t});\r\n\r\n\t\t// THUMBS QUICK SHOW THE SELECTED ARROW STYLE\r\n\t\tRVS.DOC.on('mouseenter','#ddTP-sr_thumbs_style-results li',function() {\r\n\t\t\tvar fourdigit = this.id.split('-result-')[1].split(\"-\")[0],\r\n\t\t\t\tkey = this.id.split(fourdigit+\"-\")[1];\r\n\t\t\tRVS.F.drawNavigation({\ttype:\"thumbs\", style:key, init:false, presetChange:true, default:true});\r\n\t\t});\r\n\r\n\r\n\r\n\t\t// ARROWS QUICK SHOW THE SELECTED ARROW STYLE\r\n\t\tRVS.DOC.on('mouseenter','#ddTP-sr_tabs_style-results li',function() {\r\n\t\t\tvar fourdigit = this.id.split('-result-')[1].split(\"-\")[0],\r\n\t\t\t\tkey = this.id.split(fourdigit+\"-\")[1];\r\n\t\t\tRVS.F.drawNavigation({\ttype:\"tabs\", style:key, init:false, presetChange:true, default:true});\r\n\t\t});\r\n\r\n        RVS.DOC.on('ddTP:open', '.sr_nav_style_tos',function() {\r\n\t\t\twindow.shortcachenav = RVS.F.safeExtend(true,{},RVS.SLIDER.settings.nav[this.dataset.evtparam]);\r\n\t\t\twindow.shortnavindex = this.selectedIndex;\r\n\t\t});\r\n\r\n        RVS.DOC.on('ddTP:close','.sr_nav_style_tos',function(e) {\r\n\t\t\t if (window.shortnavindex===this.selectedIndex) {\r\n\t\t\t \tRVS.SLIDER.settings.nav[this.dataset.evtparam] = RVS.F.safeExtend(true,{},window.shortcachenav);\r\n\t\t\t \tRVS.F.drawNavigation({\ttype:this.dataset.evtparam, init:false});\r\n\t\t\t } else {\r\n\t\t\t\tRVS.F.drawNavigation({\ttype:this.dataset.evtparam, init:false});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.nav_preseticon_pick', function() {\r\n\t\t\tvar p = this.parentNode.parentNode;\r\n\t\t\tjQuery(\"#\"+p.dataset.insertinto).val(this.dataset.content).trigger(\"change\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tRVS.F.updateSlideBasedNavigationStyle = function() {\r\n\t\t// SHOW NAVIGATION ONLY IF NEEDED\r\n\t\tif (RVS.F.type!==\"hero\") {\r\n\t\t\t// ReDraw the Navigation with Slide related Settings\r\n\t\t\tif (RVS.SLIDER.settings.nav.arrows.set) RVS.F.updatePresetInputs({type:\"arrows\",env:\"slide\"});\r\n\t\t\tif (RVS.SLIDER.settings.nav.bullets.set) RVS.F.updatePresetInputs({type:\"bullets\",env:\"slide\"});\r\n\t\t\tif (RVS.SLIDER.settings.nav.thumbs.set) RVS.F.updatePresetInputs({type:\"thumbs\",env:\"slide\"});\r\n\t\t\tif (RVS.SLIDER.settings.nav.tabs.set) RVS.F.updatePresetInputs({type:\"tabs\",env:\"slide\"});\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/****************************************\r\n\t\t\tMIGRATION RUTINES\r\n\t******************************************/\r\n\tRVS.F.createNewNavigation = function(t) {\r\n\t\tvar n =  {\r\n\t\t\tid : \"new_\"+RVS.nav.currentMaxid,\r\n\t\t\tname : \"New \"+t+\" Navigation\",\r\n\t\t\tcss : \"\",\r\n\t\t\tmarkup : \"\",\r\n\t\t\tdim :   {width:160, height:160},\r\n\t\t\tplaceholders:{},\r\n\t\t\tpresets:{},\r\n\t\t\ttype:t,\r\n\t\t\tfactory:false,\r\n\t\t\thandle:\"newnavclass_\"+RVS.nav.currentMaxid,\r\n\t\t};\r\n\r\n\t\treturn n;\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.migrateNavigation = function(obj) {\r\n\t\tRVS.nav = obj;\r\n\t};\r\n\r\n\t/***********************************\r\n\t\t\tINTERNAL FUNCTIONS\r\n\t************************************/\r\n\t/*\r\n\tSET VALUE TO A OR B DEPENDING IF VALUE A EXISTS AND NOT UNDEFINED OR NULL\r\n\t*/\r\n\tfunction _d(a,b) {\r\n\t\tif (a===undefined || a===null)\r\n\t\t\treturn b;\r\n\t\telse\r\n\t\t\treturn a;\r\n\t}\r\n\r\n\tfunction _truefalse(v) {\r\n\t\tif (v===\"false\" || v===false || v===\"off\" || v===undefined || v===0 || v===-1)\r\n\t\t\tv=false;\r\n\t\telse\r\n\t\tif (v===\"true\" || v===true || v===\"on\")\r\n\t\t\tv=true;\r\n\t\treturn v;\r\n\t}\r\n\r\n})();\r\n","Nwdthemes_Revslider/admin/assets/js/modules/tooltip.js":"/*!\r\n\r\n\t// ****************************\r\n\t// **********  USAGE **********\r\n\t// ****************************\r\n\tRsTooltips(\r\n\r\n\t\ttrue, // initialize the tooltip mode?\r\n\t\t['add_layer', 'change_slides'] // array of tooltips to show and in what order\r\n\r\n\t);\r\n\r\n*/\r\n\r\n(function() {\r\n\r\n\r\n\r\n\tvar data,\r\n\t\tshell,\r\n\t\tbodies,\r\n\t\ttipList,\r\n\t\ttoolTip,\r\n\t\ttipText,\r\n\t\tsection,\r\n\t\tlinkButton,\r\n\t\ttotalSteps,\r\n\t\tcurrentTip,\r\n\t\tcurrentStep,\r\n\t\tcurrentData,\r\n\t\tcurrentTarget,\r\n\t\ttoolTipWidth,\r\n\t\trightToolbar;\r\n\r\n\r\n\tvar defaults = [\r\n\r\n\t\t'back',\r\n\t\t'slides',\r\n\t\t'add_slide',\r\n\t\t'global_layers',\r\n\t\t'slide_order',\r\n\t\t'add_layer',\r\n\t\t'add_layer_text',\r\n\t\t'add_layer_image',\r\n\t\t'add_layer_button',\r\n\t\t'add_layer_shape',\r\n\t\t'add_layer_video',\r\n\t\t'add_layer_audio',\r\n\t\t'add_layer_object',\r\n\t\t'add_layer_row',\r\n\t\t'add_layer_group',\r\n\t\t'add_layer_layerlibrary',\r\n\t\t'add_layer_importlayer',\r\n\t\t'edit_layer_name',\r\n\t\t'duplicate_layer',\r\n\t\t'copy_layer',\r\n\t\t'paste_layer',\r\n\t\t'delete_layer',\r\n\t\t'lock_layers',\r\n\t\t'unlock_layers',\r\n\t\t'hide_highlight_boxes',\r\n\t\t'show_hide_selected',\r\n\t\t'set_all_visible',\r\n\t\t'change_layer_order',\r\n\t\t'layer_selections',\r\n\t\t'undo_redo',\r\n\t\t'device_switcher',\r\n\t\t'help_mode',\r\n\t\t'tooltip_button',\r\n\t\t'quick_style',\r\n\t\t'slider_settings',\r\n\t\t'slider_navigation',\r\n\t\t'slide_settings',\r\n\t\t'layer_settings',\r\n\t\t'shortcode',\r\n\t\t'layout_type',\r\n\t\t'layout_sizing',\r\n\t\t'breakpoints',\r\n\t\t'module_content',\r\n\t\t'auto_rotate',\r\n\t\t'lazy_loading',\r\n\t\t'progress_bar',\r\n\t\t'navigation_arrows',\r\n\t\t'navigation_bullets',\r\n\t\t'navigation_tabs',\r\n\t\t'navigation_thumbs',\r\n\t\t'slide_background',\r\n\t\t'slide_animation',\r\n\t\t'background_filter',\r\n\t\t'slide_duration',\r\n\t\t'slide_link',\r\n\t\t'edit_text',\r\n\t\t'font_size',\r\n\t\t'font_family',\r\n\t\t'font_color',\r\n\t\t'layer_position',\r\n\t\t'layer_animations',\r\n\t\t'layer_hover',\r\n\t\t'responsive_behavior',\r\n\t\t'timeline_preview',\r\n\t\t'save_module',\r\n\t\t'preview_module'\r\n\r\n\t];\r\n\r\n\tfunction getData() {\r\n\r\n\t\tjQuery('<link rel=\"stylesheet\" type=\"text/css\" href=\"' + RVS.ENV.plugin_url + 'admin/assets/css/tooltip.css\" />').appendTo(jQuery('head'));\r\n\t\tRVS.F.ajaxRequest('get_tooltips', {}, function(response) {\r\n\r\n\t\t\tif(response.success) {\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdata = JSON.stringify(response.data);\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e) {\r\n\t\t\t\t\tdata = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(data) init();\r\n\t\t\t\telse console.log('tooltip ajax error');\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.log('tooltip ajax error');\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction clonePreviewSave() {\r\n\r\n\t\tjQuery(this).clone().addClass('tooltip-save-preview').insertAfter(toolTip);\r\n\r\n\t}\r\n\r\n\tfunction openToolTips() {\r\n\r\n\t\tjQuery(shell).appendTo(jQuery('#rb_tlw'));\r\n\t\tjQuery('.rs-tooltip-btn').not('.tooltip-link').on('click.tooltips', btnClick);\r\n\t\tjQuery('.rs-tooltip-check').on('click.tooltips', cancelTips);\r\n\t\tjQuery('#rs-tooltip-close').on('click.tooltips', exitTips);\r\n\r\n\t\ttoolTip = jQuery('#rs-tooltip');\r\n\t\ttipText = jQuery('.tooltip-text');\r\n\t\tsection = jQuery('.tooltip-section');\r\n\r\n\t\ttoolTipWidth = toolTip.outerWidth();\r\n\t\tlinkButton = jQuery('.tooltip-link').on('click.tooltips', openLink);\r\n\r\n\t\trightToolbar = jQuery('#the_right_toolbar_inner');\r\n\t\ttipList = window.RsTooltipList || defaults;\r\n\t\ttotalSteps = tipList.length;\r\n\t\tcurrentStep = 0;\r\n\r\n\t\tbodies = jQuery('body');\r\n\t\tRVS.WIN.on('keydown.tooltips', keyShortcut).on('resize.tooltips', runStep);\r\n\t\tjQuery('.rs-save-preview').each(clonePreviewSave);\r\n\r\n\t\trunStep();\r\n\r\n\t}\r\n\r\n\tfunction openLink() {\r\n\r\n\t\twindow.open(this.dataset.href);\r\n\r\n\t}\r\n\r\n\tfunction closeToolTips() {\r\n\r\n\t\tjQuery('.tooltip-hide-target').removeClass('tooltip-hide-target');\r\n\t\tjQuery('.tip-clone').remove();\r\n\r\n\t\tjQuery('.rs-tooltip-btn').off('.tooltips');\r\n\t\tjQuery('.rs-tooltip-check').off('.tooltips');\r\n\t\tjQuery('#rs-tooltip-close').off('.tooltips');\r\n\r\n\t\tjQuery('#rs-tooltip').remove();\r\n\t\tjQuery('.tooltip-save-preview').remove();\r\n\r\n\t\tjQuery('body').removeClass('rb-tooltips-active');\r\n\t\tRVS.WIN.off('.tooltips');\r\n\r\n\t\tlinkButton.off('.tooltips');\r\n\r\n\t\tbodies = null;\r\n\t\ttoolTip = null;\r\n\t\ttipText = null;\r\n\t\tsection = null;\r\n\t\tcurrentTip = null;\r\n\t\tlinkButton = null;\r\n\t\trightToolbar = null;\r\n\t\tcurrentTarget = null;\r\n\r\n\t}\r\n\r\n\tfunction cleanup() {\r\n\r\n\t\tcancelAnimationFrame(displayStep);\r\n\r\n\t}\r\n\r\n\tfunction exitTips() {\r\n\r\n\t\tcleanup();\r\n\t\tcloseToolTips();\r\n\r\n\t}\r\n\r\n\tfunction cancelTips() {\r\n\r\n\t\tRVS.F.ajaxRequest('set_tooltip_preference', false, false, true, true);\r\n\t\texitTips();\r\n\r\n\t}\r\n\r\n\tfunction btnClick() {\r\n\r\n\t\tif(this.id === 'rs-tooltip-next') {\r\n\t\t\tcurrentStep++;\r\n\t\t\trunStep();\r\n\t\t}\r\n\t\telse {\r\n\t\t\texitTips();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction nextButton() {\r\n\r\n\t\tvar btn = jQuery('#rs-tooltip-next');\r\n\t\tif(!btn.is(':visible')) btn = jQuery('#rs-tooltip-gotit');\r\n\t\tbtn.trigger('click');\r\n\r\n\t}\r\n\r\n\tfunction runStep() {\r\n\r\n\t\tcleanup();\r\n\t\tcurrentTip = currentData.tooltips[tipList[currentStep]];\r\n\t\ttipText.html(currentTip.text);\r\n\r\n\t\t/*\r\n\t\tif(currentTip.section) section.html(currentTip.section).show();\r\n\t\telse section.hide();\r\n\t\t*/\r\n\r\n\t\t/*\r\n\t\tif(currentTip.link) linkButton.attr('data-href', currentTip.link).text(currentTip.linkText).show();\r\n\t\telse linkButton.hide();\r\n\t\t*/\r\n\r\n\t\tif(currentStep < totalSteps - 1) toolTip.removeClass('tooltip-gotit');\r\n\t\telse toolTip.addClass('tooltip-gotit');\r\n\r\n\t\tif(currentTip.trigger) {\r\n\r\n\t\t\tlet triggers = currentTip.trigger,\r\n\t\t\t\tlen = triggers.length;\r\n\r\n\t\t\tfor(let i = 0; i < len; i++) {\r\n\r\n\t\t\t\tlet trigger = jQuery(triggers[i]);\r\n\t\t\t\tif(trigger.length) {\r\n\r\n\t\t\t\t\tjQuery(trigger).first().trigger('click');\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tconsole.log('tooltip trigger does not exist');\r\n\t\t\t\t\tnextButton();\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcurrentTarget = jQuery(currentTip.target).first();\r\n\t\tif(!currentTarget.length) {\r\n\r\n\t\t\tconsole.log('tooltip target does not exist');\r\n\t\t\tnextButton();\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\trightToolbar.scrollTop(0);\r\n\t\tif(currentTip.scrollTo) {\r\n\r\n\t\t\tlet scrollTo = jQuery(currentTip.scrollTo).filter(':visible');\r\n\t\t\trightToolbar.scrollTop(scrollTo.offset().top - 50);\r\n\t\t\trequestAnimationFrame(displayStep);\r\n\r\n\t\t}\r\n\r\n\t\trequestAnimationFrame(displayStep);\r\n\r\n\t}\r\n\r\n\tfunction displayStep() {\r\n\r\n\t\tjQuery('.tooltip-hide-target').removeClass('tooltip-hide-target');\r\n\t\tjQuery('.tip-clone').remove();\r\n\r\n\t\tvar offset = currentTarget.offset(),\r\n\t\t\tposition,\r\n\t\t\tplacer;\r\n\r\n\t\ttoolTip.removeClass(function(i, clas) {return (clas.match (/(^|\\s)tip-\\S+/g) || []).join(' ');});\r\n\t\ttoolTip.addClass('tip-' + currentTip.alignment);\r\n\r\n\t\tif(currentTip.margin) toolTip.css('margin', currentTip.margin);\r\n\t\telse toolTip.css('margin', 0);\r\n\r\n\t\tvar padding = currentTarget.css('padding'),\r\n\t\t\tpaddingLeft = Math.round(parseInt(currentTarget.css('padding-left'), 10) * 0.25);\r\n\t\t\tcloned = currentTarget.clone();\r\n\r\n\t\tcloned.find('input[type=\"radio\"]').each(function() {this.name = this.name + '-tooltip';});\r\n\t\tcloned.addClass('tip-clone').css({top: offset.top, left: offset.left, padding: padding}).insertBefore(toolTip);\r\n\r\n\t\tif(currentTip.cssClass) cloned.addClass(currentTip.cssClass);\r\n\t\tif(currentTip.elementcss) {\r\n\r\n\t\t\tlet css = currentTip.elementcss.split(';'),\r\n\t\t\t\tlen = css.length;\r\n\r\n\t\t\tfor(let i = 0; i < len; i++) {\r\n\r\n\t\t\t\tlet style = css[i].split(':');\r\n\t\t\t\tcloned.css(RVS.F.trim(style[0]), RVS.F.trim(style[1]));\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(currentTip.placer) {\r\n\r\n\t\t\tplacer = jQuery(currentTip.placer).first();\r\n\t\t\tif(placer.length) {\r\n\r\n\t\t\t\toffset = placer.offset();\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\tconsole.log('tooltip placer does not exist');\r\n\t\t\t\tnextButton();\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar noFocus = currentTip.focus === 'none';\r\n\t\tif(!currentTip.focus || noFocus) {\r\n\r\n\t\t\tif(!noFocus) cloned.addClass('tip-focussed');\r\n\t\t\tif(!placer) placer = currentTarget;\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tlet clas = currentTip.focusClass || 'tip-focussed';\r\n\t\t\t\tfocussed = cloned.find(currentTip.focus).first().addClass(clas);\r\n\r\n\t\t\tif(!focussed.length) {\r\n\r\n\t\t\t\tconsole.log('tooltip focus does not exist');\r\n\t\t\t\tnextButton();\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(!placer) {\r\n\t\t\t\tplacer = focussed;\r\n\t\t\t\toffset = placer.offset();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tposition = getPosition(placer, currentTip.alignment);\r\n\t\ttoolTip.css({left: offset.left + position.x - paddingLeft, top: offset.top + position.y});\r\n\r\n\t\tcurrentTarget.addClass('tooltip-hide-target');\r\n\t\tbodies.addClass('rb-tooltips-active');\r\n\r\n\t\tif(!currentTip.hidePrevSave) bodies.removeClass('tooltip-hide-preview-save');\r\n\t\telse bodies.addClass('tooltip-hide-preview-save');\r\n\r\n\t}\r\n\r\n\tfunction getPosition(target, align) {\r\n\r\n\t\tvar xx,\r\n\t\t\tyy;\r\n\r\n\t\tswitch(align) {\r\n\r\n\t\t\tcase 'top':\r\n\t\t\tcase 'bottom':\r\n\t\t\t\txx = (Math.round(target.outerWidth() * 0.5) - Math.round(toolTipWidth * 0.5));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'left':\r\n\t\t\tcase 'right':\r\n\t\t\t\tyy = -(Math.round(toolTip.outerHeight() * 0.5) - Math.round(target.outerHeight() * 0.5));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'bottom-left':\r\n\t\t\tcase 'top-left':\r\n\t\t\tcase 'right-top':\r\n\t\t\t\txx = -toolTip.width();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'bottom-right':\r\n\t\t\tcase 'top-right':\r\n\t\t\t\txx = target.outerWidth();\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tswitch(align) {\r\n\r\n\t\t\tcase 'top':\r\n\t\t\tcase 'right-top':\r\n\t\t\t\tyy = -(target.outerHeight() + toolTip.height());\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'top-left':\r\n\t\t\tcase 'top-right':\r\n\t\t\t\tyy = 0;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'bottom':\r\n\t\t\tcase 'bottom-left':\r\n\t\t\tcase 'bottom-right':\r\n\t\t\t\tyy = target.outerHeight();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'left':\r\n\t\t\t\txx = -toolTipWidth;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'right':\r\n\t\t\t\txx = target.outerWidth();\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\treturn {x: xx, y: yy};\r\n\r\n\t}\r\n\r\n\tfunction keyShortcut(e) {\r\n\r\n\t\tif(e.keyCode === 13) nextButton();\r\n\r\n\t}\r\n\r\n\tfunction init() {\r\n\r\n\t\tcurrentData = RVS.F.safeExtend(true, {}, data);\r\n\t\tshell =\r\n\r\n\t\t'<div id=\"rs-tooltip\">' +\r\n\t\t\t'<div id=\"rs-tooltip-top\">' +\r\n\t\t\t\t'<span class=\"rs-tooltip-text\"><span class=\"tooltip-section\"></span><span class=\"tooltip-text\"></span></span>' +\r\n\t\t\t\t'<span class=\"rs-tooltip-btn tooltip-link\" data-href=\"tooltip-link\"></span><span id=\"rs-tooltip-next\" class=\"rs-tooltip-btn\"><i class=\"material-icons\">redo</i>' + currentData.translations.next_tip + '<span class=\"rs-tooltip-return-icon\"></span></span><span id=\"rs-tooltip-gotit\" class=\"rs-tooltip-btn\"><i class=\"material-icons\">thumb_up</i>' + currentData.translations.got_it +'</span>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'<div id=\"rs-tooltip-bottom\"><div><span class=\"rs-tooltip-check\"></span>' + currentData.translations.hide_tips + '</div></div>' +\r\n\t\t\t'<span id=\"rs-tooltip-close\"><i class=\"material-icons\">close</i></span>' +\r\n\t\t'</div>';\r\n\r\n\t\tvar btn = jQuery('.tooltip_wrap'),\r\n\t\t\tdefs = btn.data('tooltip-definitions');\r\n\r\n\t\tif(defs) {\r\n\r\n\t\t\tRVS.F.safeExtend(true, currentData.tooltips, defs);\r\n\t\t\tbtn.removeData('tooltip-definitions');\r\n\r\n\t\t}\r\n\r\n\t\tjQuery(document).on('start-tooltips', openToolTips);\r\n\t\tbtn.data('scriptready', true);\r\n\t\topenToolTips();\r\n\r\n\t}\r\n\r\n\tgetData();\r\n\r\n})();\r\n","Nwdthemes_Revslider/admin/assets/js/modules/slider.js":"/*!\r\n * REVOLUTION 6.0.0 EDITOR SLIDER JS\r\n * @version: 1.0 (01.07.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\nRVS.S.ulDIM = {width:0,height:0};\r\n\r\n\r\n(function() {\r\n\r\n\r\n\tif (tpGS.SFXBounceLite===undefined) tpGS.SFXBounceLite = tpGS.CustomBounce.create(\"SFXBounceLite\", { strength:0.3 ,squash:1, squashID:\"SFXBounceLite-squash\"});\r\n\tif (tpGS.SFXBounceSolid===undefined) tpGS.SFXBounceSolid = tpGS.CustomBounce.create(\"SFXBounceSolid\", { strength:0.5,squash:2,squashID:\"SFXBounceSolid-squash\"});\r\n\tif (tpGS.SFXBounceStrong===undefined) tpGS.SFXBounceStrong = tpGS.CustomBounce.create(\"SFXBounceStrong\", { strength:0.7,squash:3,squashID:\"SFXBounceStrong-squash\"});\r\n\tif (tpGS.SFXBounceExtrem===undefined) tpGS.SFXBounceExtrem = tpGS.CustomBounce.create(\"SFXBounceExtrem\", { strength:0.9,squash:4,squashID:\"SFXBounceExtrem-squash\"});\r\n\tif (tpGS.BounceLite===undefined) tpGS.BounceLite = tpGS.CustomBounce.create(\"BounceLite\", { strength:0.3 });\r\n\tif (tpGS.BounceSolid===undefined) tpGS.BounceSolid = tpGS.CustomBounce.create(\"BounceSolid\", { strength:0.5});\r\n\tif (tpGS.BounceStrong===undefined) tpGS.BounceStrong = tpGS.CustomBounce.create(\"BounceStrong\", { strength:0.7});\r\n\tif (tpGS.BounceExtrem===undefined) tpGS.BounceExtrem = tpGS.CustomBounce.create(\"BounceExtrem\", { strength:0.9});\r\n\r\n\r\n\t/* SHORTCUTS FOR JQUERY OBJECTS */\r\n\tvar _lg,_ib,_rto,_rlo,_rulerHM,_rulerVM,\r\n\t_rvbin,lgHeight_cache,inf_s_height,inf_s_width,lastLayerGridHeight,minLayerGridHeight,sticky_settings,streamSrcUpdNeed,rTBScroll,\r\n\r\n\t/* DIMENSION SHORTCUTS */\r\n\t_ibDIM = {width:0,height:0},\r\n\t_rvbiDIM = {width:0,height:0},\r\n\t_builderOffset = {left:0,top:0},\r\n\t_builderScroll = {x:0,y:0};\r\n\r\n\tRVS.S.rulerOffset = {x:0,y:0};\r\n\r\n\t/* _builderScrollDIM = {width:0,height:0}; */\r\n\r\n\t/*\r\n\tSET THE SLIDER SETTINGS\r\n\t*/\r\n\tRVS.F.setSlider = function(obj) {\r\n\t\tobj = obj===undefined || obj.length==0 ? {} : obj;\r\n\t\tif (typeof _rmig_ !==\"undefined\") obj = _rmig_.migrateSlider(obj);\r\n\t\treturn(RVS.F.safeExtend(true,getNewSliderObject({}),getNewSliderObject(obj)));\r\n\t};\r\n\r\n\t/*\r\n\tINIT SLIDER AND ITS LISTENERS, SETTINGS\r\n\t*/\r\n\tRVS.F.initSliderBuilder = function() {\r\n\r\n\t\tRVS.C.rb = jQuery('#rev_builder');\r\n\t\tRVS.C.tRC = document.getElementById('the_right_toolbar');\r\n\r\n\t\tRVS.C.UL = _ul = jQuery('#rev_slider_ul');\r\n\t    _lg = jQuery('#layer_grid');\r\n\t    _ib = jQuery('#rev_slider_inbuild');\r\n\t    _rto = jQuery('#ruler_top_offset');\r\n\t    _rlo = jQuery('#ruler_left_offset');\r\n\t    _rulerHM = jQuery('#ruler_hor_marker');\r\n\t    _rulerVM = jQuery('#ruler_ver_marker');\r\n\t    _rvbin = jQuery('#rev_builder_inner');\r\n\r\n\r\n\t    RVS.F.updateEasyInputs({container:jQuery('#rs-layout-type'),  trigger:\"init\"});\r\n\r\n\r\n\t    initGlobalSkins();\r\n\t\tinitLocalInputBoxes();\r\n\t\tinitLocalListeners();\r\n\t\tRVS.F.buildRuler();\r\n\r\n\t\tRVS.F.sliderUpdateAllFields();\r\n\t\tRVS.DOC.trigger('updateShortCode');\r\n\r\n\t\t//initResizeables();\r\n\t\trevsliderScrollable();\r\n\r\n\t\tinf_s_height = document.getElementById('show_c_height');\r\n\t\tinf_s_width = document.getElementById('show_c_width');\r\n\t\tif (inf_s_width!==undefined) inf_s_width.innerHTML = Math.round(RVS.F.GW(RVS.screen))+\"px\";\r\n\r\n\r\n\t\t// PRELOAD STREAM DEPENDENCIES\r\n\t\tloadStreamDependencies();\r\n\t\tRVS.F.checkSliderSource();\r\n\r\n\t\t//Upate Global Sizes\r\n\t\tfor (var i in RVS.V.sizesold) if (RVS.V.sizesold.hasOwnProperty(i)) document.getElementById('global_size_'+RVS.V.sizesold[i]).innerHTML = i==0 ? \"> \"+RVS.ENV.glb_slizes[RVS.V.sizes[1]] :\r\n            i==3 ? \"< \"+RVS.ENV.glb_slizes[RVS.V.sizes[i]] : parseInt(RVS.ENV.glb_slizes[RVS.V.sizes[i]],0)-1+\" - \" + RVS.ENV.glb_slizes[RVS.V.sizes[parseInt(i,0)+1]];\r\n\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.clearSnapVisual = function() {\r\n\t\tRVS.C.gcanvas = RVS.C.gcanvas===undefined ? document.getElementById('gridcanvas') : RVS.C.gcanvas;\r\n\t\tRVS.C.gCTX = RVS.C.gCTX===undefined ? RVS.C.gcanvas.getContext(\"2d\") : RVS.C.gCTX;\r\n\t\tRVS.C.gcanvas.width=RVS.S.ulDIM.width;\r\n\t\tRVS.C.gcanvas.height=RVS.S.ulDIM.height;\r\n\t\tRVS.C.gCTX.clearRect(0,0,RVS.S.ulDIM.width,RVS.S.ulDIM.height);\r\n\r\n\t};\r\n\r\n\tRVS.F.getSnapPoint = function(x,y) {\r\n\t\treturn {x: RVS.SLIDER.settings.snap.gap * Math.round(x / RVS.SLIDER.settings.snap.gap),\r\n\t\t\t\ty: RVS.SLIDER.settings.snap.gap * Math.round(y / RVS.SLIDER.settings.snap.gap)}\r\n\t}\r\n\r\n\r\n\r\n\tRVS.F.snapVisual = function(_) {\r\n\t\t_ = _ ===undefined ? {} : _;\r\n\r\n\t\t_.ah= _.ah===undefined ? RVS.selLayers[0]!==undefined ? RVS.L[RVS.selLayers[0]].position.horizontal[RVS.screen].v : \"left\" : _.ah;\r\n\t\t_.av= _.av===undefined ? RVS.selLayers[0]!==undefined ? RVS.L[RVS.selLayers[0]].position.vertical[RVS.screen].v : \"top\" : _.av;\r\n\r\n\r\n\t\tvar RX = RVS.S.rulerOffset.x,\r\n\t\t\tRY = RVS.S.rulerOffset.y/RVS.zoom;\r\n\r\n\t\tRVS.F.clearSnapVisual();\r\n\r\n\t\tRVS.SLIDER.settings.snap.gap = parseInt(RVS.SLIDER.settings.snap.gap,0);\r\n\t\tRVS.SLIDER.settings.snap.gap= RVS.SLIDER.settings.snap.gap===0 ? 1 : RVS.SLIDER.settings.snap.gap;\r\n\t\t// GRID SNAPPING\r\n\t\tif (RVS.SLIDER.settings.snap.adjust===\"grid\" && RVS.SLIDER.settings.snap.gap>4) {\r\n\t\t\tRVS.GSNAP = {X : _.ah===\"left\" ? RX  : _.ah===\"right\" ? (RX + RVS.S.lgw) : (RX + RVS.S.lgw/2),\r\n\t\t\t\t\t\t Y : _.av===\"top\" ? RY  : _.av===\"bottom\" ? (RY + RVS.S.lgh) : (RY + RVS.S.lgh/2)}\r\n\r\n\t\t\tRVS.GSNAP.XO = RVS.SLIDER.settings.snap.gap*Math.ceil(RVS.GSNAP.X/RVS.SLIDER.settings.snap.gap);\r\n\t\t\tRVS.GSNAP.YO = RVS.SLIDER.settings.snap.gap*Math.ceil(RVS.GSNAP.Y/RVS.SLIDER.settings.snap.gap);\r\n\r\n\t\t\t//DRAW THE GRID ALSO\r\n\t\t\tRVS.C.gCTX.beginPath();\r\n\r\n\t\t\tfor (var x=(RVS.GSNAP.X-RVS.GSNAP.XO);x<RVS.S.ulDIM.width;x+=RVS.SLIDER.settings.snap.gap)\t{\r\n\t\t\t\tRVS.C.gCTX.moveTo(x,0);\r\n\t\t\t\tRVS.C.gCTX.lineTo(x,RVS.S.ulDIM.height);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var y=(RVS.GSNAP.Y-RVS.GSNAP.YO);y<RVS.S.ulDIM.height;y+=RVS.SLIDER.settings.snap.gap) {\r\n\t\t\t\tRVS.C.gCTX.moveTo(0,y);\r\n\t\t\t\tRVS.C.gCTX.lineTo(RVS.S.ulDIM.width,y);\r\n\t\t\t}\r\n\t\t\tRVS.C.gCTX.strokeStyle=\"rgba(250, 63, 142, 0.25)\";\r\n\t\t\tRVS.C.gCTX.stroke();\r\n\r\n\r\n\t\t\tif (_.sp!==undefined) {\r\n\r\n\t\t\t\tRVS.C.gCTX.beginPath();\r\n\r\n\t\t\t\t_.sp.x = RVS.GSNAP.X + (_.ah===\"left\" ? _.sp.x : _.ah===\"right\" ? 0-_.sp.x - RVS.SLIDER.settings.snap.gap : _.sp.x - RVS.SLIDER.settings.snap.gap/2);\r\n\t\t\t\t_.sp.y = RVS.GSNAP.Y + (_.av===\"top\" ? _.sp.y : _.av===\"bottom\" ? 0-_.sp.y - RVS.SLIDER.settings.snap.gap : _.sp.y - RVS.SLIDER.settings.snap.gap/2);\r\n\r\n\t\t\t\tlet spyt = _.sp.y + (_.av!==\"top\" ? RVS.SLIDER.settings.snap.gap / (_.av===\"middle\" ? 2 : 1) : 0),\r\n\t\t\t\t\tspxt = _.sp.x + (_.ah!==\"left\" ? RVS.SLIDER.settings.snap.gap / (_.ah===\"center\" ? 2 : 1) : 0);\r\n\r\n\t\t\t\tRVS.C.gCTX.moveTo(_.sp.x, spyt);\r\n\t\t\t\tRVS.C.gCTX.lineTo(_.sp.x + RVS.SLIDER.settings.snap.gap,spyt);\r\n\r\n\t\t\t\tRVS.C.gCTX.moveTo(spxt,_.sp.y);\r\n\t\t\t\tRVS.C.gCTX.lineTo(spxt,_.sp.y + RVS.SLIDER.settings.snap.gap);\r\n\r\n\t\t\t\tRVS.C.gCTX.lineWidth = 2;\r\n\t\t\t\tRVS.C.gCTX.strokeStyle=\"rgba(250, 63, 142, 1)\";\r\n\t\t\t\tRVS.C.gCTX.stroke();\r\n\t\t\t}\r\n\t\t} else\r\n\r\n\t\tif (RVS.SLIDER.settings.snap.adjust===\"layers\") {\r\n\t\t\tRVS.C.gCTX.beginPath();\r\n\t\t\tvar dx = {};\r\n\t\t\tfor (var i in RVS.S.DaD.snapH) {\r\n\t\t\t\tif (!RVS.S.DaD.snapH.hasOwnProperty(i)) continue;\r\n\t\t\t\tlet c = RVS.S.DaD.snapH[i];\r\n\t\t\t\tif (dx[c.x]===undefined) {\r\n\t\t\t\t\tRVS.C.gCTX.moveTo(c.x + RX, 0);\r\n\t\t\t\t\tRVS.C.gCTX.lineTo(c.x + RX, RVS.S.ulDIM.height);\r\n\t\t\t\t\tdx[c.x] = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (dx[(c.xc)]===undefined) {\r\n\t\t\t\t\tRVS.C.gCTX.moveTo(c.xc + RX, 0);\r\n\t\t\t\t\tRVS.C.gCTX.lineTo(c.xc + RX, RVS.S.ulDIM.height);\r\n\t\t\t\t\tdx[(c.xc)]=true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (dx[(c.xr)]===undefined) {\r\n\t\t\t\t\tRVS.C.gCTX.moveTo(c.xr + RX, 0);\r\n\t\t\t\t\tRVS.C.gCTX.lineTo(c.xr + RX, RVS.S.ulDIM.height);\r\n\t\t\t\t\tdx[(c.xr)]=true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (RVS.SLIDER.settings.snap.gap>5) {\r\n\t\t\t\t\tif (dx[(c.x - RVS.SLIDER.settings.snap.gap)]===undefined) {\r\n\t\t\t\t\t\tRVS.C.gCTX.moveTo(c.x - RVS.SLIDER.settings.snap.gap + RX, 0);\r\n\t\t\t\t\t\tRVS.C.gCTX.lineTo(c.x - RVS.SLIDER.settings.snap.gap + RX, RVS.S.ulDIM.height);\r\n\t\t\t\t\t\tdx[(c.x - RVS.SLIDER.settings.snap.gap)] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dx[(c.xr + RVS.SLIDER.settings.snap.gap)]===undefined) {\r\n\t\t\t\t\t\tRVS.C.gCTX.moveTo(c.xr + RVS.SLIDER.settings.snap.gap + RX, 0);\r\n\t\t\t\t\t\tRVS.C.gCTX.lineTo(c.xr + RVS.SLIDER.settings.snap.gap + RX, RVS.S.ulDIM.height);\r\n\t\t\t\t\t\tdx[(c.xr + RVS.SLIDER.settings.snap.gap)] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tdx= {};\r\n\t\t\tfor (var i in RVS.S.DaD.snapV) {\r\n\t\t\t\tif (!RVS.S.DaD.snapV.hasOwnProperty(i)) continue;\r\n\t\t\t\tlet c = RVS.S.DaD.snapV[i];\r\n\t\t\t\tif (dx[c.y]===undefined) {\r\n\t\t\t\t\tRVS.C.gCTX.moveTo(0,c.y + RY);\r\n\t\t\t\t\tRVS.C.gCTX.lineTo(RVS.S.ulDIM.width, c.y + RY);\r\n\t\t\t\t\tdx[c.y] = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (dx[c.ym]===undefined) {\r\n\t\t\t\t\tRVS.C.gCTX.moveTo(0,c.ym + RY);\r\n\t\t\t\t\tRVS.C.gCTX.lineTo(RVS.S.ulDIM.width,c.ym + RY);\r\n\t\t\t\t\tdx[c.ym] = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (dx[c.yb]===undefined) {\r\n\t\t\t\t\tRVS.C.gCTX.moveTo(0,c.yb + RY);\r\n\t\t\t\t\tRVS.C.gCTX.lineTo(RVS.S.ulDIM.width, c.yb + RY);\r\n\t\t\t\t\tdx[c.yb] = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (RVS.SLIDER.settings.snap.gap>5) {\r\n\t\t\t\t\tif (dx[(c.y-RVS.SLIDER.settings.snap.gap)]===undefined) {\r\n\t\t\t\t\t\tRVS.C.gCTX.moveTo(0,c.y + RY - RVS.SLIDER.settings.snap.gap);\r\n\t\t\t\t\t\tRVS.C.gCTX.lineTo(RVS.S.ulDIM.width, c.y + RY - RVS.SLIDER.settings.snap.gap);\r\n\t\t\t\t\t\tdx[(c.y-RVS.SLIDER.settings.snap.gap)] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dx[(c.yb+RVS.SLIDER.settings.snap.gap)]===undefined) {\r\n\t\t\t\t\t\tRVS.C.gCTX.moveTo(0,c.yb + RY + RVS.SLIDER.settings.snap.gap);\r\n\t\t\t\t\t\tRVS.C.gCTX.lineTo(RVS.S.ulDIM.width, c.yb + RY + RVS.SLIDER.settings.snap.gap);\r\n\t\t\t\t\t\tdx[(c.yb+RVS.SLIDER.settings.snap.gap)] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tRVS.C.gCTX.strokeStyle=\"rgba(250, 63, 142, 0.25)\";\r\n\t\t\tRVS.C.gCTX.stroke();\r\n\t\t\tRVS.C.gCTX.beginPath();\r\n\r\n\t\t\t//DRAW THE NEXT ITEM WHICH IS AVAILABLE\r\n\t\t\tif (RVS.S.DaD.snapHF!==undefined && RVS.S.DaD.snapHF.uid!==-1) {\r\n\t\t\t\tlet c = RVS.S.DaD.snapH[RVS.S.DaD.snapHF.uid];\r\n\t\t\t\tRVS.C.gCTX.moveTo(c.x + RX + RVS.S.DaD.snapHF.offset, 0);\r\n\t\t\t\tRVS.C.gCTX.lineTo(c.x + RX + RVS.S.DaD.snapHF.offset, RVS.S.ulDIM.height);\r\n\t\t\t\tRVS.C.gCTX.lineWidth = 2;\r\n\t\t\t\tRVS.C.gCTX.strokeStyle=\"rgba(250, 63, 142, 1)\";\r\n\t\t\t\tRVS.C.gCTX.stroke();\r\n\t\t\t}\r\n\r\n\t\t\tif (RVS.S.DaD.snapVF!==undefined && RVS.S.DaD.snapVF.uid!==-1) {\r\n\t\t\t\tlet c = RVS.S.DaD.snapV[RVS.S.DaD.snapVF.uid];\r\n\t\t\t\tRVS.C.gCTX.moveTo(0,c.y + RY + RVS.S.DaD.snapVF.offset);\r\n\t\t\t\tRVS.C.gCTX.lineTo(RVS.S.ulDIM.width,c.y + RVS.S.rulerOffset.y + RVS.S.DaD.snapVF.offset);\r\n\t\t\t\tRVS.C.gCTX.lineWidth = 2;\r\n\t\t\t\tRVS.C.gCTX.strokeStyle=\"rgba(250, 63, 142, 1)\";\r\n\t\t\t\tRVS.C.gCTX.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\r\n\tRVS.F.updateAvailableDevices = function() {\r\n\t\tvar //amount = 0,\r\n\t\t\tchgtodesktop = false;\r\n\t\tfor (var i=1;i<4;i++) {\r\n\t\t\tif (!RVS.SLIDER.settings.size.custom[RVS.V.sizes[i]]) {\r\n\t\t\t\tjQuery('#screen_selecotr_ss_'+RVS.V.sizes[i]).addClass(\"ssnotavailable\")\r\n\t\t\t\tif (RVS.screen==RVS.V.sizes[i]) chgtodesktop = true;\r\n\t\t\t} else {\r\n\t\t\t\tjQuery('#screen_selecotr_ss_'+RVS.V.sizes[i]).removeClass(\"ssnotavailable\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*if (amount===3)\r\n\t\t\tjQuery('#main_screenselector').hide();\r\n\t\telse\r\n\t\t\tjQuery('#main_screenselector').show();*/\r\n\r\n\t\tif (chgtodesktop) jQuery('#screen_selecotr_ss_d').trigger(\"click\");\r\n\r\n\t\tRVS.DOC.trigger(\"updateAllInheritedSize\");\r\n\r\n\t};\r\n\r\n\tRVS.F.checkForFixedScroll = function() {\r\n\t\tif (RVS.eMode.top===\"slider\" && RVS.eMode.menu==\"#form_module_scroll\" && jQuery('#timeline_slider_tab').hasClass(\"selected\"))\t{\r\n\t\t\tRVS.TL.TL.addClass('fixedscrolledit');\r\n\t\t\tRVS.TL.FixedScrollEdit = true;\r\n\t\t} else\r\n\t\tif (RVS.TL.FixedScrollEdit) {\r\n\t\t\tRVS.TL.TL.removeClass('fixedscrolledit');\r\n\t\t\tRVS.TL.FixedScrollEdit = false;\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.updateDeviceOnOffBtns = function(ignore) {\r\n\t\tfor (var i in RVS.V.sizes) if (RVS.V.sizes.hasOwnProperty(i)) {\r\n\t\t\tif (RVS.V.sizes[i]!==\"d\") {\r\n                var ja =  document.getElementById('sr_custom_'+RVS.V.sizes[i]),\r\n                    jb = document.getElementById('sr_custom_'+RVS.V.sizes[i]+'_opt');\r\n                ja.checked = RVS.SLIDER.settings.size.custom[RVS.V.sizes[i]];\r\n                jb.checked = RVS.SLIDER.settings.size.custom[RVS.V.sizes[i]];\r\n                if (!ignore) {\r\n\t\t\t\t\tRVS.F.turnOnOffVisUpdate({input:ja});\r\n\t\t\t\t\tRVS.F.turnOnOffVisUpdate({input:jb});\r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n    }\r\n\r\n    RVS.F.updateSliderInputFields = function() {\r\n        if (RVS.S.sliderInputFieldsInitialised!==true && RVS.S.sliderInputFieldsInitialisedWarning!==true) {\r\n            RVS.F.showWaitAMinute({fadeIn:0,text:RVS_LANG.updatingfields});\r\n            RVS.S.sliderInputFieldsInitialisedWarning=true;\r\n            RVS.S.sliderInputFieldsInitialised = true;\r\n\r\n\t\t}\r\n        setTimeout(function() {\r\n            //Initialise and Update Input Fields\r\n            RVS.F.updateEasyInputs({container:jQuery('.sliderconfig_forms'),  trigger:\"init\"});\r\n            RVS.F.updateEasyInputs({container:jQuery('#screen_selector_top_list'),path:\"settings.\"});\r\n            RVS.F.updateEasyInputs({container:jQuery('#rbm_colorskins'),path:\"settings.\"});\r\n            if (RVS.S.sliderInputFieldsInitialisedWarning===true) {\r\n                RVS.F.showWaitAMinute({fadeOut:2,text:RVS_LANG.updatingfields});\r\n                RVS.S.sliderInputFieldsInitialisedWarning=false;\r\n            }\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t//RVS.DOC.trigger('device_area_dimension_update');\r\n\t\t\t\t//setSlidesDimension(true, true);\r\n\t\t\t\tupdateSlideDimensionFields();\r\n\t\t\t});\r\n\r\n        },5);\r\n    }\r\n\r\n    RVS.F.updateTopScreenSelectors = function() {\r\n        RVS.F.updateEasyInputs({container:jQuery('#screen_selector_top_list'),path:\"settings.\"});\r\n        RVS.F.turnOnOffVisUpdate({input:document.getElementById('sr_custom_n_opt')});\r\n        RVS.F.turnOnOffVisUpdate({input:document.getElementById('sr_custom_m_opt')});\r\n        RVS.F.turnOnOffVisUpdate({input:document.getElementById('sr_custom_t_opt')});\r\n\t}\r\n\r\n\tRVS.F.sliderUpdateAllFields = function(recall) {\r\n\t\t// FIRST DRAW AND INPUT SETS SLIDER\r\n\r\n\t\tsetSlidesDimension(true);\r\n\r\n\t\tRVS.F.updateAvailableDevices();\r\n\r\n        RVS.F.updateTopScreenSelectors();\r\n\r\n        if (RVS.S.sliderInputFieldsInitialised) RVS.F.updateSliderInputFields();\r\n\r\n        // INIT EASY INPUT BOXES HERE\r\n        if (recall) jQuery('.slider_general_collector .tponoffwrap').each(function() { RVS.F.turnOnOff(this,false);});\r\n\r\n        //GLOBAL SKIN UPDATES\r\n\r\n        RVS.F.initTpColorBoxes(jQuery('#rbm_colorskins').find('.my-color-field'));\r\n\r\n\t\tRVS.DOC.trigger('updateSourcePostCategories');\r\n\t\tRVS.DOC.trigger('updateSourceWooCategories');\r\n\t\tRVS.DOC.trigger('updatesliderthumb');\r\n\t\tRVS.DOC.trigger('moduleSpinnerChange');\r\n\t\tRVS.DOC.trigger('updateAutoRotate');\r\n\r\n\t\t//TRIGGER THE ADDON GENERAL ON SWITCH EVENTS\r\n\t\tfor (var slug in RVS.SLIDER.settings.addOns) {\r\n\t\t\tif(!RVS.SLIDER.settings.addOns.hasOwnProperty(slug)) continue;\r\n\t\t\tif (RVS.SLIDER.settings.addOns[slug].enable) RVS.DOC.trigger(slug+\"_init\");\r\n\t\t}\r\n\r\n\t\t// UPDATE CONTAINER DELTA\r\n\t\tRVS.F.updateContentDeltas();\r\n\r\n\t\t// UPDATE THE NAVIGATION CONTAINERS\r\n\t\tRVS.F.updateAllNavigationContainer(true);\r\n\t\tsetProgressBar();\r\n\t\tsetSliderBG(false);\r\n\t\tRVS.S.ulDIM = {width:RVS.C.UL.width(), height:RVS.C.UL.height()};\r\n\t\tRVS.F.updateParallaxLevelTexts();\r\n\t\tRVS.F.updateParallaxdddBG();\r\n\r\n\t\tRVS.DOC.trigger('checkOnScrollSettings');\r\n\r\n\t\tif(RVS.SLIDER.settings.pakps) {\r\n\t\t\tRVS.C.RSPREM = document.getElementById('rs_premium');\r\n\t\t\tif (RVS.C.RSPREM===undefined || RVS.C.RSPREM==null) return;\r\n\t\t\tRVS.C.RSPREM.style.display=\"block\";\r\n\t\t\tif (RVS.ENV.activated) {\r\n\t\t\t\tRVS.C.RSPREM.innerHTML = '<div class=\"rs_lib_premium_lila\">'+RVS_LANG.premium_template+'</div><div class=\"rs_premium_content\">'+RVS_LANG.rs_premium_content+'</div>';\r\n\t\t\t} else {\r\n\t\t\t\tRVS.C.RSPREM.innerHTML = '<div class=\"rs_lib_premium_red\"><i class=\"material-icons\">visibility_off</i>'+RVS_LANG.premiumunlock+'</div><div class=\"rs_premium_content\">'+RVS_LANG.rs_premium_content+'</div>';\r\n\t\t\t\tRVS.DOC.on('click','.rs_lib_premium_red',function() {\r\n\t\t\t\t\tRVS.F.showRegisterSliderInfo();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE THE NAVIGATION CONTAINERS\r\n\t*/\r\n\tRVS.F.updateAllNavigationContainer = function(init) {\r\n\t\tif (RVS.SLIDER.settings.nav.arrows.set) RVS.F.updateNavStyleSelection({init:init,type:\"arrows\"});\r\n\t\tif (RVS.SLIDER.settings.nav.bullets.set) RVS.F.updateNavStyleSelection({init:init,type:\"bullets\"});\r\n\t\tif (RVS.SLIDER.settings.nav.tabs.set) RVS.F.updateNavStyleSelection({init:init,type:\"tabs\"});\r\n\t\tif (RVS.SLIDER.settings.nav.thumbs.set) RVS.F.updateNavStyleSelection({init:init,type:\"thumbs\"});\r\n\t};\r\n\r\n\tRVS.F.redrawAllNavigationContainer = function(init) {\r\n\t\tif (RVS.SLIDER.settings.nav.arrows.set) RVS.F.drawNavigation({init:init,type:\"arrows\"});\r\n\t\tif (RVS.SLIDER.settings.nav.bullets.set) RVS.F.drawNavigation({init:init,type:\"bullets\"});\r\n\t\tif (RVS.SLIDER.settings.nav.tabs.set) RVS.F.drawNavigation({init:init,type:\"tabs\"});\r\n\t\tif (RVS.SLIDER.settings.nav.thumbs.set) RVS.F.drawNavigation({init:init,type:\"thumbs\"});\r\n\t};\r\n\r\n\t/*\r\n\tSET UP THE RULERS IN ADMIN AREA\r\n\t*/\r\n \tRVS.F.setRulers = function() {\r\n\t\tRVS.S.rulerOffset.x = Math.max(0,((_ibDIM.width)-RVS.F.GW(RVS.screen))/2);\r\n\t\tRVS.S.rulerOffset.y = Math.max(0,RVS.S.layer_wrap_offset.y);\r\n\t\tsetRuler({offset:{x:RVS.S.rulerOffset.x, y:RVS.S.rulerOffset.y}});\r\n\t};\r\n\t/*\r\n\tSET THE MARKERS ON THE RULER\r\n\t*/\r\n\tRVS.F.setRulerMarkers = function(mouse) {\r\n\t\tmouse = mouse===undefined ? {y:0,x:0} : mouse;\r\n\t\tvar rML = \"15px\",\r\n\t\t\trMD =  RVS.S.builderHover===\"overruler\" || RVS.S.builderHover===\"overbuilder\" ? \"block\" : \"hidden\",\r\n\t\t\trMP = { left: mouse.x,\r\n\t\t\t\t\ttop : Math.max(0,(mouse.y-_builderOffset.top))};\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\ttpGS.gsap.set(_rulerHM,{left:rMP.left+\"px\",height:rML,display:rMD});\r\n\t\t\ttpGS.gsap.set(_rulerVM,{top:rMP.top+\"px\",width:rML, display:rMD});\r\n\t\t});\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE THE OFFSET POSITION OF THE CONTAINER\r\n\t*/\r\n\tRVS.F.updateContentDeltas = function() {\r\n\t\tif (RVS.C.layergrid===undefined && _lg===undefined) return;\r\n\t\tvar _ulo = RVS.C.UL.offset(),\r\n\t\t\t_lgo = RVS.S.vWmode===\"slidelayout\" ? RVS.C.layergrid===undefined ? _lg.offset() : RVS.C.layergrid.offset() : _lg===undefined ? RVS.C.layergrid.offset() : _lg.offset();\r\n\r\n\t\tRVS.S.layer_grid_offset = _lgo;\r\n\t\tRVS.S.layer_wrap_offset.x = _lgo.left - _ulo.left;\r\n\t\tRVS.S.layer_wrap_offset.y = _lgo.top - _ulo.top;\r\n\t\tRVS.S.layer_wrap_offset.xr = RVS.C.UL.width()-_lg.width()-RVS.S.layer_wrap_offset.x;\r\n\t\tRVS.S.lgw = _lg.width();\r\n\t\tRVS.S.lgh = _lg.height();\r\n\t\tRVS.SLIDER.settings.size.editorCache[RVS.screen] = RVS.S.lgh;\r\n\t\tif (inf_s_height!==undefined) inf_s_height.innerHTML = parseInt(RVS.S.lgh,0)+\"px\";\r\n\t\tif (inf_s_width!==undefined) inf_s_width.innerHTML = Math.round(RVS.F.GW(RVS.screen))+\"px\";\r\n\t\twindow.contentDeltaFirstRun = true;\r\n\t};\r\n\r\n\t/*\r\n\tUSE PAN SLIDER (ON/OFF)\r\n\t*/\r\n\tRVS.F.panSlider = function(m) {\r\n\t\t/*var sl = (Math.min(Math.max((m.x-_builderOffset.left),0),_ibDIM.width) / _ibDIM.width) * (_rb[0].scrollWidth - _ibDIM.width);\r\n\t\tif (window.nothingselected)\r\n\t\t\t_rb.scrollLeft(sl).RSScroll(\"update\");*/\r\n\t};\r\n\r\n\t/*\r\n\tUPDATE THE PARALLAX LEVEL TEXT / DESCRIPTIPON\r\n\t*/\r\n\tRVS.F.updateParallaxLevelTexts = function() {\r\n\t\tvar chng=false,a,i;\r\n\t\tjQuery('.prallaxlevelselect').each(function() {\r\n\t\t\tchng = false;\r\n\t\t\tfor (i=1;i<16;i++) {\r\n\t\t\t\ta = i+\". (\"+RVS.SLIDER.settings.parallax.levels[i-1]+\" %)\";\r\n\t\t\t\tif (this.options[i].text!==a) {\r\n\t\t\t\t\tchng=1;\r\n\t\t\t\t\tthis.options[i].text = a;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (chng) jQuery(this).ddTP({});\r\n\t\t});\r\n\t};\r\n\r\n\t// CHECK SOURCES IF THEY HAVE BEEN SET CORRECT\r\n\tRVS.F.checkSliderSource = function() {\r\n\t\tvar allgood = true,\r\n\t\t\ts = RVS.SLIDER.settings.source[RVS.SLIDER.settings.sourcetype],\r\n\t\t\tc = s.count;\r\n\t\tc=c===undefined || c==\"\" ? 0 : c;\r\n\r\n\t\tswitch (RVS.SLIDER.settings.sourcetype) {\r\n\t\t\tcase \"facebook\": allgood = s.apiId!==\"\" && (s.typeSource!==\"album\" || (s.typeSource==\"album\" && s.album!==\"\")) && c!=0; break;\r\n\t\t\tcase \"flickr\": allgood = s.apiKey!==\"\" && s.appSecret!==\"\" && (s.galleryURL!==\"\" || s.groupURL!==\"\" || s.photoSet!==\"\" || s.userURL!==\"\") && c!=0; break;\r\n\t\t\tcase \"instagram\": allgood = s.token!==undefined && s.token!==\"\" ? true : false; break;\r\n\t\t\tcase \"vimeo\": allgood = s.typeSource==\"channel\" && s.channelName==\"\" ? false : s.typeSource==\"user\" && s.userName==\"\" ? false : s.typeSource==\"group\" && s.groupName==\"\" ? false : s.typeSource==\"album\" && s.albumId==\"\" ? false : true;\r\n\t\t\t\t\t\t  allgood = allgood === true && c!=0;\r\n\t\t\tbreak;\r\n\t\t\tcase \"youtube\": allgood = s.api!==\"\" && s.channelId!==\"\" && c!=0; break;\r\n\t\t\tcase \"twitter\": allgood = s.accessSecret!==\"\" && s.accessToken!==\"\" && s.consumerKey!==\"\" && s.consumerSecret!=\"\" && s.userId!==\"\" && c!=0; break;\r\n\t\t}\r\n\r\n\t\tif (!allgood) RVS.F.showInfo({content:RVS_LANG.somesourceisnotcorrect, type:\"goodtoknow\", showdelay:2, hidedelay:5, hideon:\"click\", event:\"\" });\r\n\r\n\t}\r\n\r\n\r\n\tRVS.F.updateParallaxdddBG = function() {\r\n\t\tclearTimeout(window.updateParallaxDDDBGTimer);\r\n\t\twindow.updateParallaxDDDBGTimer = setTimeout(function() {\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('.slider_ddd_subsettings'), init:true});\r\n\t\t},50);\r\n\t};\r\n\r\n\t/*\r\n\tRESoRT THE SLIDE BASED ON THE RVS.SLIDER.slideIDs ARRAY\r\n\t*/\r\n\tRVS.F.reSortSlides = function() {\r\n\t\tfor (var ids in RVS.SLIDER.slideIDs) {\r\n\t\t\tif(!RVS.SLIDER.slideIDs.hasOwnProperty(ids)) continue;\r\n\t\t\tif ((\"\"+RVS.SLIDER.slideIDs[ids]).indexOf(\"static_\")===-1)\r\n\t\t\t\tjQuery('#slidelist').append(jQuery('#slide_list_element_'+RVS.SLIDER.slideIDs[ids]));\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tOPEN NEW GUIDER WINDOW AT 1ST TIME\r\n\t*/\r\n\tRVS.F.openNewGuide = function() {\r\n\r\n\t\tif (!window.initQuickGuide) {\r\n\t\t\tRVS.DOC.on('click','#rbm_quickguide .rbm_close, .mcg_quit_page', function() {\r\n\t\t\t\tRVS.F.RSDialog.close();\r\n\t\t\t\tRVS.F.sliderUpdateAllFields(true);\r\n\t\t\t});\r\n\t\t\tRVS.DOC.on('click','.mcg_next_page', function() { window.initQuickGuide.page++; callNewGuidePage();});\r\n\t\t\tRVS.DOC.on('click','.mcg_prev_page', function() { window.initQuickGuide.page--; callNewGuidePage(-1);});\r\n\t\t\twindow.initQuickGuide = {\r\n\t\t\t\tpage : 0,\r\n\t\t\t\tactive : 0\r\n\t\t\t};\r\n\r\n\r\n\t\t\tRVS.DOC.on('click','.guide_combi_resize',function() {\r\n\t\t\t\tjQuery('.guide_combi_resize').removeClass(\"selected\");\r\n\t\t\t\tthis.className +=\" selected\";\r\n\t\t\t\tswitch (this.id) {\r\n\t\t\t\t\tcase \"guide_classic\":\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.intelligentInherit = false;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.autoResponsive = false;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.responsiveChilds = false;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.responsiveOffset = false;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.size.custom.n = false;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.size.custom.t = false;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.size.custom.m = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"guide_intelligent\":\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.intelligentInherit = true;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.autoResponsive = true;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.responsiveChilds = true;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.responsiveOffset = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"guide_manual\":\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.intelligentInherit = false;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.autoResponsive = false;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.responsiveChilds = false;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.def.responsiveOffset = false;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.size.custom.n = true;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.size.custom.t = true;\r\n\t\t\t\t\t\tRVS.SLIDER.settings.size.custom.m = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.sliderUpdateAllFields(true);\r\n\t\t\t\tsetSlidesDimension(true);\r\n\t\t\t\tRVS.F.updateAvailableDevices();\r\n\t\t\t\tRVS.F.updateDeviceOnOffBtns();\r\n\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('.mcg_option_third_wraps'),trigger:\"init\",path:\"settings.\"});\r\n\t\t\t});\r\n\t\t} else\r\n\t\t\twindow.initQuickGuide.page = 0;\r\n\r\n\r\n\t\tcallNewGuidePage();\r\n\t\tjQuery('#guide_classic').removeClass(\"selected\");\r\n\t\tjQuery('#guide_intelligent').removeClass(\"selected\");\r\n\t\tjQuery('#guide_manual').removeClass(\"selected\");\r\n\r\n\t\tif (RVS.SLIDER.settings.def.intelligentInherit)\r\n\t\t\tjQuery('#guide_intelligent').addClass(\"selected\");\r\n\t\telse\r\n\t\tif (!RVS.SLIDER.settings.size.custom.n && !RVS.SLIDER.settings.size.custom.t && !RVS.SLIDER.settings.size.custom.m)\r\n\t\t\tjQuery('#guide_classic').addClass(\"selected\");\r\n\t\telse\r\n\t\t\tjQuery('#guide_manual').addClass(\"selected\");\r\n\r\n\t\tRVS.F.updateEasyInputs({container:jQuery('#rbm_quickguide'),path:\"settings.\"});\r\n\t\tRVS.F.RSDialog.create({modalid:'rbm_quickguide', bgopacity:0.85});\r\n\t};\r\n\r\n\r\n\r\n\t/**********************************\r\n\t\t-\tINTERNAL FUNCTIONS -\r\n\t***********************************/\r\n\r\n\tRVS.F.duplicateSkinColors = function(_) {\r\n\t\tif (RVS.SLIDER.settings.skins===undefined || RVS.SLIDER.settings.skins.colors===undefined) return;\r\n\t\tfor (var i in RVS.SLIDER.settings.skins.colors) {\r\n\t\t\tif (!RVS.SLIDER.settings.skins.colors.hasOwnProperty(i) || RVS.SLIDER.settings.skins.colors[i].ref===undefined) continue;\r\n\t\t\tvar ref = RVS.SLIDER.settings.skins.colors[i].ref,\r\n\t\t\t\tnra = [];\r\n\t\t\tfor (var j in ref) {\r\n\t\t\t\tif (!ref.hasOwnProperty(j) || ref[j] == null) continue;\r\n\r\n\t\t\t\tif (_.type===\"slide\" && _.slideFrom!==undefined && _.slideTo!==undefined && \"\"+ref[j].slide === \"\"+_.slideFrom) {\r\n\t\t\t\t\tvar nr = RVS.F.safeExtend(true,{},ref[j]);\r\n\t\t\t\t\tnr.slide = \"\"+_.slideTo;\r\n\t\t\t\t\tnr.r = nr.r.replace(_.slideFrom,_.slideTo);\r\n\t\t\t\t\tnra.push(nr);\r\n\t\t\t\t} else\r\n\t\t\t\tif (_.type===\"layer\" && _.layerFrom!==undefined && _.layerTo!==undefined && \"\"+ref[j].slide === \"\"+_.slideFrom && \"\"+ref[j].layer === \"\"+_.layerFrom) {\r\n\t\t\t\t\tvar nr = RVS.F.safeExtend(true,{},ref[j]);\r\n\t\t\t\t\tnr.layer = \"\"+_.layerTo;\r\n\t\t\t\t\tnr.slide = \"\"+_.slideTo;\r\n\t\t\t\t\tnr.r = nr.r.replace(_.slideFrom,_.slideTo);\r\n\t\t\t\t\tnr.r = nr.r.replace('.layers.'+_.layerFrom,'.layers.'+_.layerTo);\r\n\t\t\t\t\tnra.push(nr);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (j=0;j<nra.length;j++) ref.push(nra[j]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction checkonlySimpleMode(c) {\r\n\t\tvar single = false;\r\n\t\tfor (var i in c.ref) if (c.ref.hasOwnProperty(i) && c.ref[i] != null && (typeof(c.ref[i]) == 'string' || typeof(c.ref[i]) == 'object')) single = single===true ? true : RVS.F.noGradient(c.ref[i].r);\r\n\t\treturn single;\r\n\t}\r\n\r\n\tfunction addSkinColorFields(c,i) {\r\n\t\tvar t = '<div id=\"globalskin_colorrule_'+i+'\">';\r\n\t\tif (c===null) return;\r\n\t\tt +='<input type=\"text\" value=\"'+c.alias+'\" class=\"globalskin_alias easyinit sliderinput\" data-r=\"skins.colors.'+i+'.alias\">';\r\n\t\tt +='<input class=\"my-color-field skininput easyinit\" data-evt=\"updateAllSkinColors\" data-evtparam=\"'+i+'\" data-visible=\"true\" data-editing=\"Global Skin Color\" name=\"skin-color-'+i+'\" data-mode=\"'+(checkonlySimpleMode(c) ? 'single' : 'full')+'\" id=\"sr_skin_color_'+i+'\" data-r=\"skins.colors.'+i+'.v\" type=\"text\" value=\"'+c.v+'\">';\r\n\t\tt +='<div style=\"margin-left:5px\" data-evt=\"deleteSkinColor\" data-evtparam=\"'+i+'\" class=\"'+(i<1 ? \"disabled\" : \"\") +' callEventButton basic_action_button onlyicon \"><i class=\"material-icons\">delete</i></div>';\r\n\t\tt +='</div>';\r\n\t\tt = jQuery(t);\r\n\t\tRVS.ENV.skinColors.append(t);\r\n\t\tRVS.F.initTpColorBoxes(t.find('.my-color-field'));\r\n\t}\r\n\r\n\tfunction initGlobalSkins() {\r\n\t\tRVS.ENV.skinColors = RVS.ENV.skinColors===undefined ? jQuery('#module_color_skins') : RVS.ENV.skinColors;\r\n\t\tRVS.ENV.skinFonts = RVS.ENV.skinFonts===undefined ? jQuery('#module_font_skins') : RVS.ENV.skinFonts;\r\n\t\tif (RVS.SLIDER.settings.skins!==undefined) {\r\n\t\t\tif (RVS.SLIDER.settings.skins.colors===undefined) {\r\n\t\t\t\tRVS.SLIDER.settings.skins.cid = 2;\r\n\t\t\t\tRVS.SLIDER.settings.skins.colors = { 0:{alias:'Highlight',v:'#ff0000'}, 1:{alias:'Headline Text',v:'#ffffff'},2:{alias:'Content Text',v:'#00ffff'}}\r\n\t\t\t}\r\n\t\t\tfor (var i in RVS.SLIDER.settings.skins.colors) {\r\n\t\t\t\tif (!RVS.SLIDER.settings.skins.colors.hasOwnProperty(i)) continue;\r\n\t\t\t\tvar c = RVS.SLIDER.settings.skins.colors[i];\r\n\t\t\t\taddSkinColorFields(c,i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n\tfunction callNewGuidePage(dir) {\r\n\t\tif (window.initQuickGuide===undefined || window.initQuickGuide.page == window.initQuickGuide.active) return;\r\n\t\tRVS.F.updateEasyInputs({container:jQuery('.mcg_option_third_wraps'),trigger:\"init\",path:\"settings.\"});\r\n\t\tjQuery('#mcg_page_'+window.initQuickGuide.page).addClass(\"mcg_selected\");\r\n\t\ttpGS.gsap.fromTo('#mcg_page_'+window.initQuickGuide.page,0.5,{x:dir===-1 ? \"-100%\" : \"100%\"},{x:\"0%\",ease:\"power3.inOut\"});\r\n\t\ttpGS.gsap.fromTo('#mcg_page_'+window.initQuickGuide.active,0.5,{x:\"0%\"},{x:dir===-1 ? \"100%\" : \"-100%\",ease:\"power3.inOut\",onComplete:function() {\r\n\t\t\tjQuery('#mcg_page_'+window.initQuickGuide.active).removeClass(\"mcg_selected\");\r\n\t\t\twindow.initQuickGuide.active = window.initQuickGuide.page;\r\n\t\t}});\r\n\r\n\t}\r\n\tfunction revsliderScrollable(type) {\r\n\r\n\t\tif (RVS.S.TRTIS_initied!=true && (type===undefined || type===\"init\")) {\r\n\t\t\tRVS.S.rb_ScrollX = 0;\r\n\t\t\tRVS.S.rb_ScrollY = 0;\r\n\t\t\tsticky_settings = jQuery('#settings_sticky_info');\r\n\t\t\tRVS.C.rb.RSScroll({\r\n\t\t\t\twheelPropagation:true,\r\n\t\t\t\t//suppressScrollY:true,\r\n\t\t\t\tminScrollbarLength:100\r\n\t\t\t});\r\n\r\n\t\t\tjQuery('#the_right_toolbar_inner').RSScroll({\r\n\t\t\t\twheelPropagation:true,\r\n\t\t\t\tsuppressScrollX:true,\r\n\t\t\t\tminScrollbarLength:100\r\n\t\t\t}).on('ps-scroll-y',function() {\r\n\t\t\t\trTBScroll = this.scrollTop;\r\n\t\t\t\tif (rTBScroll>50)\r\n\t\t\t\t\tsticky_settings.show();\r\n\t\t\t\telse\r\n\t\t\t\t\tsticky_settings.hide();\r\n\t\t\t\tif (RVS.S.respInfoBar && RVS.S.respInfoBar.toolbar && RVS.S.respInfoBar.toolbar[0]!==null)\r\n\t\t\t\t\tRVS.S.respInfoBar.toolbar[0].style.display = \"none\";\r\n\t\t\t});\r\n\r\n\t\t\tRVS.C.rb.on('ps-scroll-x',function(){\r\n\t\t\t\tRVS.S.rb_ScrollX = _builderScroll.x = this.scrollLeft;\r\n\t\t\t\tRVS.F.setRulers();\r\n\t\t\t});\r\n\t\t\tRVS.C.rb.on('ps-scroll-y',function(){\r\n\t\t\t\t_builderScroll.x = this.scrollLeft;\r\n\t\t\t\t_builderScroll.y = this.scrollTop;\r\n\t\t\t\tRVS.S.rb_ScrollY = _builderScroll.y = this.scrollTop;\r\n\t\t\t\tRVS.F.setRulers();\r\n\t\t\t});\r\n\r\n\t\t\tRVS.S.TRTIS_initied = true;\r\n\t\t\t/*jQuery('#form_slidergeneral_module .form_inner').RSScroll({\r\n\t\t\t\twheelPropagation:true,\r\n\t\t\t\tsuppressScrollX:true\r\n\t\t\t});*/\r\n\t\t} else {\r\n\t\t\tif (type===\"update\" && RVS.S.TRTIS_initied==true) {\r\n\t\t\t\tclearTimeout(RVS.S.scrollUpdateTimer);\r\n\t\t\t\tRVS.S.scrollUpdateTimer = setTimeout(function() {\r\n\t\t\t\t\tRVS.C.rb.RSScroll(\"update\");\r\n\t\t\t\t\tjQuery('#the_right_toolbar_inner').RSScroll(\"update\");\r\n\t\t\t\t},50);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.buildRuler = function(f) {\r\n\r\n\t\tif (RVS.S.bodyHidden===undefined) {\r\n\t\t\t\tdocument.body.style.overflowY=\"hidden\";\r\n\t\t\t\tRVS.S.bodyHidden=true;\r\n\t\t\t}\r\n\r\n\t\tvar ctxTOP = _rto[0].getContext('2d'),\r\n\t\t\tctxLEFT = _rlo[0].getContext('2d'),\r\n\t\t\ta=0;\r\n\r\n\t\tRVS.S.isRetina = RVS.S.isRetina===undefined ? (window.devicePixelRatio > 1) : RVS.S.isRetina;\r\n\t\tRVS.S.isIOS = RVS.S.isIOS===undefined ? ((ctxTOP.webkitBackingStorePixelRatio < 2) || (ctxTOP.webkitBackingStorePixelRatio == undefined)) : RVS.S.isIOS;\r\n\t\tRVS.S.retinaFactor =  RVS.S.retinaFactor===undefined ? (RVS.S.isRetina && RVS.S.isIOS) ? 2 : 1 : RVS.S.retinaFactor;\r\n\r\n\t\tctxTOP.canvas.width=3600*RVS.S.retinaFactor;\r\n\t\tctxTOP.canvas.height=15*RVS.S.retinaFactor;\r\n\r\n\t\tctxLEFT.canvas.width=15*RVS.S.retinaFactor;\r\n\t\tctxLEFT.canvas.height=3600*RVS.S.retinaFactor;\r\n\r\n\t\tctxTOP.scale(RVS.S.retinaFactor, RVS.S.retinaFactor);\r\n\t\tctxLEFT.scale(RVS.S.retinaFactor, RVS.S.retinaFactor);\r\n\r\n\r\n\t\tctxTOP.strokeStyle=ctxLEFT.strokeStyle=\"#414243\";\r\n\t\tctxTOP.font = \"10px Arial\";\r\n\t\tctxLEFT.font = \"10px Arial\";\r\n\t\tctxTOP.fillStyle = \"rgba(183,187,192,0.5)\";\r\n\t\tctxLEFT.fillStyle = \"rgba(183,187,192,0.5)\";\r\n\t\tctxTOP.beginPath();\r\n\t\tctxLEFT.beginPath();\r\n\r\n\t\tfor(var i=0;i<600;i++) {\r\n\t\t\tif (a%2!==0 && a!==0) {\r\n\t\t\t\tctxTOP.moveTo(((i*10))*RVS.zoom,15);\r\n\t\t\t\tctxTOP.lineTo(((i*10))*RVS.zoom,(15 - (8/RVS.S.retinaFactor)));\r\n\t\t\t\tctxLEFT.moveTo(15,(i*10)*RVS.zoom);\r\n\t\t\t\tctxLEFT.lineTo((15 - (8/RVS.S.retinaFactor)),(i*10)*RVS.zoom);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tif (a===0) {\r\n\t\t\t\tctxTOP.moveTo(((i*10))*RVS.zoom,15);\r\n\t\t\t\tctxTOP.lineTo(((i*10))*RVS.zoom,0);\r\n\t\t\t\tctxLEFT.moveTo(15,(i*10)*RVS.zoom);\r\n\t\t\t\tctxLEFT.lineTo(0,(i*10)*RVS.zoom);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tctxTOP.moveTo(((i*10))*RVS.zoom,15);\r\n\t\t\t\tctxTOP.lineTo(((i*10))*RVS.zoom,(15 - (8/RVS.S.retinaFactor)));\r\n\t\t\t\tctxLEFT.moveTo(15,(i*10)*RVS.zoom);\r\n\t\t\t\tctxLEFT.lineTo((15 - (8/RVS.S.retinaFactor)),(i*10)*RVS.zoom);\r\n\t\t\t}\r\n\t\t\ta++;\r\n\t\t\ta = a==10 ? 0 : a;\r\n\t\t}\r\n\r\n\t\tctxTOP.stroke();\r\n\t\tctxLEFT.stroke();\r\n\r\n\t\tfor(var i=0;i<60;i++) {\r\n\t\t\tvar temp = (i-12)*100,\r\n\t\t\t\tdigits = (\"\"+temp).split(\"\");\r\n\t\t\tctxTOP.fillText(temp,((i*100) + 5)*RVS.zoom,10);\r\n\t\t\tfor (var m in digits) ctxLEFT.fillText(digits[m],3,((i*100)+14)* RVS.zoom+(m*9));\r\n\t\t}\r\n\r\n\t\t//Update Liniear also to right position\r\n\t\ttpGS.gsap.set(_rto,{left:Math.round(-1200*RVS.zoom)+\"px\"});\r\n\t\ttpGS.gsap.set(_rlo,{top:Math.round(-1200*RVS.zoom)+\"px\"});\r\n\r\n\t\tif (f===undefined) {\r\n\t\t\t// INIT DIMENSIONS\r\n\t\t\t_ibDIM.width = _ib.width();\r\n\t\t\tRVS.S.ulDIM = {width:RVS.C.UL.width(), height:RVS.C.UL.height()};\r\n\r\n\t\t\t_builderOffset = RVS.C.rb.offset();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setRuler(obj) {\r\n\r\n\t\trequestAnimationFrame(function() {\r\n\t \t\tif (obj===undefined || obj.offset.x===undefined || obj.offset.y===undefined) return;\r\n\t \t\tvar newPos = { x:(parseInt(obj.offset.x,0) -_builderScroll.x/RVS.zoom + RVS.S.dim_offsets.navleft),\r\n\t \t\t\t\t\t   y:(obj.offset.y) - (_builderScroll.y + RVS.S.dim_offsets.navtop)};\r\n\r\n\t \t\tnewPos.x = newPos.x * RVS.zoom;\r\n\r\n\t\t\ttpGS.gsap.set(_rto,{x:newPos.x+\"px\"});\r\n\t\t\ttpGS.gsap.set(_rlo,{y:newPos.y+\"px\"});\r\n\t\t});\r\n \t}\r\n\r\n \t/* CHECK IF ANY STREAM DEPENDENCIES MUST BE LOADED */\r\n \tfunction loadStreamDependencies(event,param) {\r\n \t\tif (param===\"force\" || streamSrcUpdNeed || streamSrcUpdNeed===undefined) {\r\n\t \t\tif (RVS.SLIDER.settings.sourcetype===\"flickr\") flickrSourceChange();\r\n\t\t\tif (RVS.SLIDER.settings.sourcetype===\"facebook\") facebookSourceChange();\r\n\t\t\tif (RVS.SLIDER.settings.sourcetype===\"youtube\") youtubeSourceChange();\r\n\t\t}\r\n\t\tstreamSrcUpdNeed = false;\r\n\t\tRVS.DOC.trigger('updatesliderthumb');\r\n \t}\r\n\r\n \t/*\r\n\tCSS AND JQUERY EDITOR .js_css_editor_tabs\r\n\t*/\r\n\tRVS.F.openSliderApi = function() {\r\n\t\tif (window.rs_jscss_editor===\"FAIL\") return;\r\n\t\tif (typeof RevMirror===\"undefined\" || RevMirror===undefined) {\r\n\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.loadingRevMirror});\r\n\t\t\tRVS.F.loadCSS(RVS.ENV.plugin_url+'/admin/assets/css/RevMirror.min.css');\r\n\t\t\tjQuery.getScript(RVS.ENV.plugin_url+'/admin/assets/js/plugins/RevMirror.min.js',function() {\r\n\t\t\t\tsetTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n\t\t\t\tRVS.F.openSliderApi();\r\n\t\t\t}).fail(function(a,b,c) {\r\n                RVS.F.loadCSS(RVS.ENV.plugin_url+'/admin/assets/css/RevMirror.css');\r\n                jQuery.getScript(RVS.ENV.plugin_url+'/admin/assets/js/plugins/RevMirror.js',function() {\r\n                    setTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n                    RVS.F.openSliderApi();\r\n                }).fail(function(a,b,c) {\r\n                    setTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n                    window.rs_jscss_editor = \"FAIL\";\r\n                });\r\n            });\r\n\t\t} else\r\n\t\tif (window.rs_jscss_editor===undefined) {\r\n\t\t\twindow.rs_jscss_editor = RevMirror(document.getElementById('rs_css_js_area'), {\r\n\t\t\t\tvalue:RVS.SLIDER.settings.codes.css,\r\n\t\t\t\tmode:\"css\",\r\n\t\t\t\ttheme:\"hopscotch\",\r\n\t\t\t\tlineWrapping:true,\r\n\t\t\t\tlineNumbers:true,\r\n\t\t\t});\r\n\t\t\twindow.rs_jscss_editor.on('focus',function() {\twindow.rs_jscss_editor.refresh();})\r\n\t\t\tsetTimeout(RVS.F.openSliderApi,200);\r\n\t\t} else {\r\n\t\t\tRVS.F.RSDialog.create({modalid:'rbm_slider_api', bgopacity:0.5});\r\n\t\t\tjQuery('.emc_toggle_inner').RSScroll({ suppressScrollX:true});\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\twindow.rs_jscss_editor.refresh();\r\n\t\t\t},600);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/*\r\n\tCSS AND JQUERY EDITOR .js_css_editor_tabs\r\n\t*/\r\n\tRVS.F.openColorSkinApi = function() {\r\n\t\tRVS.F.RSDialog.create({modalid:'rbm_colorskins', bgopacity:0});\r\n\t\tRVS.F.updateEasyInputs({container:jQuery('#rbm_colorskins'),path:\"settings.\"});\r\n\t\tRVS.F.initTpColorBoxes(jQuery('#rbm_colorskins').find('.my-color-field'));\r\n\t};\r\n\r\n\r\n\r\n\r\n\t/*\r\n\tINIT CUSTOM EVENT LISTENERS FOR TRIGGERING FUNCTIONS\r\n\t*/\r\n\tfunction initLocalListeners() {\r\n\r\n\t\tRVS.DOC.on('carouselverticaldouble',function(a,ds) {\r\n\t\t\tif (ds!==undefined) {\r\n\t\t\t\tvar sel = document.getElementById(ds);\r\n\t\t\t\tif (sel==undefined || sel==null) return;\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"carouselverticalalign\",txt:\"Carousel Vertial Align\",icon:\"ui_y\"});\r\n\t\t\t\tRVS.F.updateSliderObj({path:'settings.carousel.vertical',val:sel.value});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"carouselverticalalign\"});\r\n\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('#form_slidergeneral_caroussel'), trigger:\"init\", visualUpdate:true});\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#add_skin_color',function() {\r\n\t\t\tif (RVS.SLIDER.settings.skins===undefined) return;\r\n\t\t\tif (RVS.SLIDER.settings.skins.colors.length>10) return;\r\n\t\t\tRVS.SLIDER.settings.skins.cid++;\r\n\t\t\tRVS.SLIDER.settings.skins.colors[RVS.SLIDER.settings.skins.cid] = { alias:\"Color Alias\", v:\"#ffffff\"};\r\n\t\t\taddSkinColorFields(RVS.SLIDER.settings.skins.colors[RVS.SLIDER.settings.skins.cid],RVS.SLIDER.settings.skins.cid);\r\n\t\t\tRVS.F.updateEasyInputs({container:RVS.ENV.skinColors, trigger:\"init\", visualUpdate:true});\r\n\t\t});\r\n\r\n\t\tvar save_goto_clicked = false;\r\n\t\tRVS.DOC.on('click','.save_and_goto_button',function() {\r\n\t\t\tsave_goto_clicked = this.dataset.goto.replace('[return_url]', Base64.encode(document.location.href));\r\n\t\t\tRVS.DOC.trigger(\"saveslider\");\r\n\t\t});\r\n\t\tRVS.DOC.on('slidersaved',function(){\r\n\t\t\tif (save_goto_clicked !== false) {\r\n\t\t\t\twindow.location.href = save_goto_clicked;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('deleteSkinColor',function(a,b) {\r\n\t\t\tif (b===undefined) return;\r\n\t\t\tRVS.S.skinColorToDelete = b;\r\n\t\t\tif (RVS.SLIDER.settings.skins.colors[b].ref!==undefined && RVS.SLIDER.settings.skins.colors[b].ref.length>0) {\r\n\t\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\t\ticon:'delete',\r\n\t\t\t\t\t\ttitle:RVS_LANG.deleteskin,\r\n\t\t\t\t\t\tmaintext:RVS_LANG.areyousuredeleteskin,\r\n\t\t\t\t\t\tsubtext:RVS_LANG.colrskinhas+' '+RVS.SLIDER.settings.skins.colors[b].ref.length+' '+RVS_LANG.references+'. '+RVS_LANG.colorwillkept,\r\n\t\t\t\t\t\tdo:{\r\n\t\t\t\t\t\t\ticon:\"check_circle\",\r\n\t\t\t\t\t\t\ttext:RVS_LANG.deleteskin,\r\n\t\t\t\t\t\t\tevent: \"forcedeleteskincolor\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcancel:{\r\n\t\t\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\t\t\ttext:RVS_LANG.cancel\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tswapbuttons:true\r\n\t\t\t\t\t});\r\n\t\t\t} else \tRVS.DOC.trigger('forcedeleteskincolor');\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('forcedeleteskincolor',function() {\r\n\t\t\tdelete RVS.SLIDER.settings.skins.colors[RVS.S.skinColorToDelete];\r\n\t\t\tjQuery('#globalskin_colorrule_'+RVS.S.skinColorToDelete).remove();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateSnapVisual',function() {\r\n\t\t\tRVS.F.snapVisual();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('showhidescrollonssm',function(a,b) {\r\n\t\t\tjQuery('.sr_sbased_tab').hide();\r\n\t\t\tjQuery('#sr_sbased_'+b).show();\r\n\t\t\tRVS.F.checkForFixedScroll();\r\n\t\t});\r\n\r\n\t\t// Updat AutoRotateOptions\r\n\t\tRVS.DOC.on('updateAutoRotate',function(a,ds) {\r\n\t\t\tif (ds===undefined || ds.val===undefined) {\r\n\t\t\t\tif (!RVS.SLIDER.settings.general.slideshow.slideShow) jQuery('#generalslideshow').hide();\r\n\t\t\t} else {\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"autorotate\",txt:\"Auto Slideshow\",icon:\"play_circle_outline\"});\r\n\t\t\t\tvar  pre = \"settings.general.slideshow.\";\r\n\t\t\t\tif (!ds.val) {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'stopSlider',val:true});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'stopAfterLoops',val:0});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'stopAtSlide',val:1});\r\n\t\t\t\t} else\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'stopSlider',val:false});\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"autorotate\"});\r\n\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('#form_slidergeneral_slideshow'), trigger:\"init\", visualUpdate:true});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('screenSelectorChanged',function() {\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('#form_slidergeneral_general_viewport'), init:\"true\"});\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('checkOnScrollSettings',function() {\r\n\t\t\tif (RVS.TL===undefined || RVS.TL.TL===undefined) return;\r\n\t\t\tif (RVS.SLIDER.settings.scrolltimeline.set && RVS.SLIDER.settings.scrolltimeline.fixed && RVS.SLIDER.settings.layouttype!==\"auto\")\r\n\t\t\t\tRVS.TL.TL.addClass('fixedscrollon');\r\n\t\t\telse\r\n\t\t\t\tRVS.TL.TL.removeClass('fixedscrollon');\r\n\t\t\tRVS.DOC.trigger('checkLayerLoopswithOnScroll');\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('checkLayerLoopswithOnScroll',function() {\r\n\t\t\tclearTimeout(RVS.S.checkLayerLoopswithOnScroll);\r\n\t\t\tRVS.S.checkLayerLoopswithOnScroll = setTimeout(function() {\r\n\t\t\t\t// CHECK IF WE NEED TO DISABLE LOOP ANIMATION ON ANY LAYERS\r\n\t\t\t\tif (RVS.SLIDER.settings.scrolltimeline.set===true) {\r\n\t\t\t\t\tvar changedsomething = false;\r\n\t\t\t\t\tfor (var i in RVS.L) {\r\n\t\t\t\t\t\tif(!RVS.L.hasOwnProperty(i) || RVS.L[i].timeline===undefined || RVS.L[i].timeline.scrollBased===undefined) continue;\r\n\t\t\t\t\t\tif ((RVS.L[i].timeline.scrollBased=='true' ||  (RVS.L[i].timeline.scrollBased=='default' && RVS.SLIDER.settings.scrolltimeline.layers===true))) {\r\n\t\t\t\t\t\t\tRVS.L[i].timeline.loop.use = false;\r\n\t\t\t\t\t\t\tchangedsomething = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (changedsomething) {\r\n\t\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('#layer_looping_wrap'), trigger:\"init\", visualUpdate:true});\r\n\t\t\t\t\t\tRVS.F.showInfo({content:RVS_LANG.layerloopdisabledduetimeline, type:\"goodtoknow\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},200);\r\n\t\t});\r\n\r\n\t\t//Insert into Editor Listener\r\n\t\tRVS.DOC.on('click','.insertineditor',function() {\r\n\t\t\tRVS.F.insertTextAtCursor(window.rs_jscss_editor,\"\\n\"+jQuery(this.dataset.insertfrom).val().replace(\"revapi.\",\"revapi\"+RVS.ENV.sliderID+\".\")+\"\\n\");\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.js_css_editor_tabs',function() {\r\n\t\t\tjQuery('.js_css_editor_tabs').removeClass(\"selected\");\r\n\t\t\tjQuery(this).addClass(\"selected\");\r\n\t\t\tRVS.SLIDER.settings.codes[window.rs_jscss_editor.getMode().name] = window.rs_jscss_editor.getValue();\r\n\t\t\twindow.rs_jscss_editor.setValue(RVS.SLIDER.settings.codes[this.dataset.mode]);\r\n\t\t\twindow.rs_jscss_editor.setOption(\"mode\", this.dataset.mode);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#emc_toggle, #form_slidergeneral_advanced_api',function() {\r\n\t\t\tjQuery('.emc_toggle_wrap').toggleClass(\"open\");\r\n\t\t});\r\n\r\n\t\t// OPEN COLOR SKIN EDITOR\r\n\t\tRVS.DOC.on('openColorSkinApi',RVS.F.openColorSkinApi);\r\n\t\tRVS.DOC.on('click','#rbm_colorskins .rbm_close',function() {\r\n\t\t\tRVS.F.RSDialog.close();\r\n\t\t});\r\n\r\n\t\t// OPEN CSS AND JS EDITOR\r\n\t\tRVS.DOC.on('openSliderApi',RVS.F.openSliderApi);\r\n\r\n\t\t//CLOSE CSS AND JS EDITOR\r\n\t\tRVS.DOC.on('click','#rbm_slider_api .rbm_close',function() {\r\n\t\t\tRVS.SLIDER.settings.codes[window.rs_jscss_editor.getMode().name] = window.rs_jscss_editor.getValue();\r\n\t\t\tRVS.F.RSDialog.close();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('device_area_dimension_update',function() {\r\n\t\t\tsetSlidesDimension(true, true);\r\n\t\t\tRVS.DOC.trigger(\"updateAllInheritedSize\");\r\n\t\t\tRVS.F.redrawSlideBG();\r\n\t\t\tRVS.F.expandCollapseTimeLine(true,\"open\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updatePerspective',function() {\r\n\t\t\tjQuery('#global_layers_perspectives').val(RVS.SLIDER.settings.general.perspective);\r\n\t\t\tRVS.F.allLayersReDraw();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updatesliderlayout_main',function(e,p) {\r\n\t\t\tRVS.DOC.trigger('checkOnScrollSettings');\r\n\t\t\tRVS.DOC.trigger('updatesliderlayout',[e,p]);\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updatesliderlayout',function(e,p) {\r\n\t\t\tRVS.F.updatesliderlayout(p);\r\n\t\t});\r\n\r\n\t\tRVS.F.updatesliderlayout = function(p) {\r\n\t\t\tif (RVS.S.calledUpdateSliderLayout!==undefined && (RVS.S.drawingHTMLLayers || !RVS.S.drawHTMLLayersCalled)) return;\r\n\t\t\tclearTimeout(window.updateSliderLayoutTimer);\r\n\t\t\tlgHeight_cache =  RVS.S.lgh;\r\n\t\t\tRVS.S.calledUpdateSliderLayout = RVS.S.calledUpdateSliderLayout || 0;\r\n\t\t\tRVS.S.calledUpdateSliderLayout++;\r\n\r\n\t\t\twindow.updateSliderLayoutTimer = setTimeout(function() {\r\n\t\t\t\tsetSlidesDimension(false);\r\n\t\t\t\tRVS.F.redrawSlideBG();\r\n\t\t\t\tif (p===\"slidertype\") setProgressBar();\r\n\t\t\t\tif (lgHeight_cache!==RVS.S.lgh || RVS.ENV.globVerOffset!== RVS.S.cacheglobVerOffset || RVS.ENV.firstLayoutAfterSlideload) {\r\n\t\t\t\t\tRVS.ENV.firstLayoutAfterSlideload=false;\r\n\t\t\t\t\tRVS.F.updateAllHTMLLayerPositions();\r\n\t\t\t\t\tRVS.S.cacheglobVerOffset = RVS.ENV.globVerOffset;\r\n\t\t\t\t}\r\n\t\t\t\t// FIRST OPEN THE TIMELINE WHEN WE DONE WITH ALL DRAWS IN INIT MODE\r\n\t\t\t\tif (RVS.S.ReadyToShowAll==\"wait\"){\r\n\t\t\t\t\tRVS.C.UL[0].style.opacity = 1;\r\n\t\t\t\t\tRVS.S.ReadyToShowAll = \"done\";\r\n\t\t\t\t\tRVS.F.expandCollapseTimeLine(true,\"open\",undefined,true)\r\n\t\t\t\t}\r\n\t\t\t},100);\r\n\t\t}\r\n\r\n\t\tRVS.DOC.on('updatesliderlayoutall',function(e,p){\r\n\t\t\tRVS.F.updatesliderlayout(p);\r\n\t\t\tRVS.DOC.trigger('device_area_dimension_update');\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('device_area_availibity',function() {\r\n\t\t\tsetSlidesDimension(true);\r\n\t\t\tRVS.F.updateAvailableDevices();\r\n\t\t\tRVS.F.updateDeviceOnOffBtns();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('check_custom_size',function(e,ep) {\r\n\t\t\tcheckCustomSliderSize(ep.eventparam);\r\n\t\t});\r\n\r\n\t\tRVS.F.staticsDoubleUpdate = function(callback) {\r\n\t\t\tif(RVS.S.resetLastShownAndStatic!==true && RVS.SLIDER[RVS.S.slideId].slide.static.isstatic && RVS.SLIDER[RVS.S.slideId].slide.static.lastEdited && RVS.S.lastShownSlideId!==undefined) {\r\n\t\t\t\tRVS.S.resetLastShownAndStatic = true;\r\n\t\t\t\tRVS.S.slideIdCache = RVS.S.slideId;\r\n\t\t\t\tRVS.S.slideId = RVS.S.lastShownSlideId;\r\n\t\t\t}\r\n\t\t\tcallback.call();\r\n\r\n\t\t\tif (RVS.S.resetLastShownAndStatic) {\r\n\t\t\t\tclearTimeout(window.resetLastShownTimer);\r\n\t\t\t\twindow.resetLastShownTimer = setTimeout(function() {\r\n\t\t\t\t\tRVS.S.resetLastShownAndStatic = false;\r\n\t\t\t\t\tRVS.S.lastShownSlideId = RVS.S.slideId;\r\n\t\t\t\t\tRVS.S.slideId = RVS.S.slideIdCache;\r\n\t\t\t\t\tcallback.call();\r\n\t\t\t\t},200);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tRVS.DOC.on('windowresized',function() {\r\n\t\t\tRVS.F.staticsDoubleUpdate(RVS.F.sliderUpdateAfterResize);\r\n\t    });\r\n\r\n\t    RVS.F.sliderUpdateAfterResize = function() {\r\n\t\t\t_rvbiDIM.width = _rvbin.width();\r\n\t\t\t_ibDIM.width = _ib.width();\r\n\t\t\tsetSlidesDimension(false);\r\n\t\t\tRVS.F.setRulers();\r\n\t\t\tRVS.F.updateContentDeltas();\r\n\t\t\trevsliderScrollable(\"update\");\r\n\t\t}\r\n\r\n\t\tRVS.DOC.on('updateShortCode',function() {\r\n\t\t\tRVS.SLIDER.settings.alias = RVS.F.sanitize_input(RVS.SLIDER.settings.alias);\r\n\t\t\tRVS.SLIDER.settings.shortcode = '{{block class=\"Nwdthemes\\\\Revslider\\\\Block\\\\Revslider\" alias=\"'+RVS.SLIDER.settings.alias+'\"}}';\r\n\t\t\tRVS.SLIDER.settings.modalshortcode = '{{block class=\"Nwdthemes\\\\Revslider\\\\Block\\\\Revslider\" usage=\"modal\" alias=\"'+RVS.SLIDER.settings.alias+'\"}}';\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('#form_module_title'), init:\"true\"});\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('#form_slider_as_modal'), init:\"true\"});\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('sliderBGUpdate',setSliderBG);\r\n\t\tRVS.DOC.on('drawBGOverlay',drawBGOverlay);\r\n\t\tRVS.DOC.on('sliderProgressUpdate',setProgressBar);\r\n\t\tRVS.DOC.on('coloredit colorcancel',colorEditSlider);\r\n\t\t//RVS.DOC.on('updateSliderToAspectRatio',updateSliderToAspectRatio);\r\n\t\tRVS.DOC.on('updateParallaxLevelTexts',RVS.F.updateParallaxLevelTexts);\r\n\t\tRVS.DOC.on('updateParallaxdddBG',RVS.F.updateParallaxdddBG);\r\n\r\n\t\t// LISTENER ON PRESET CHANGES\r\n\t\tRVS.DOC.on('updateSourcePostCategories',function() {RVS.F.updatePostCategories({postTypes:RVS.SLIDER.settings.source.post.types, categories:jQuery('#post_category')});});\r\n\t\tRVS.DOC.on('flickrsourcechange',flickrSourceChange);\r\n\t\tRVS.DOC.on('facebooksourcechange',facebookSourceChange);\r\n\t\tRVS.DOC.on('youtubesourcechange',youtubeSourceChange);\r\n\t\tRVS.DOC.on('loadStreamDependencies',loadStreamDependencies);\r\n\r\n\t\t// REVERT LISTENER ON SPECIAL FORMS\r\n\t\tRVS.DOC.on('revertEasyInputs.source',function(e,ep) {\r\n\t\t\tRVS.F.updateEasyInputs({container:ep,trigger:\"init\",path:\"settings.\"});\r\n\t\t\t/* DO WE NEED RELOAD STREAM DEPENDENCIES NOW, OR FIRST WHEN WINDOW IS SELECTED !?? */\r\n\t\t\tvar flickchange = RVS.SLIDER.settings.source.flickr.apiKey !== RVS.F.revert.settings.source.flickr.apiKey ||\r\n\t\t\t\t\t\t\t  RVS.SLIDER.settings.source.flickr.userURL !== RVS.F.revert.settings.source.flickr.userURL ||\r\n\t\t\t\t\t\t\t  RVS.SLIDER.settings.source.flickr.apiKey !== RVS.F.revert.settings.source.flickr.apiKey,\r\n\r\n\t\t\t\tfbchange = \tRVS.SLIDER.settings.source.facebook.appId !== RVS.F.revert.settings.source.facebook.appId ||\r\n\t\t\t\t\t\t\tRVS.SLIDER.settings.source.facebook.typeSource !== RVS.F.revert.settings.source.facebook.typeSource ||\r\n\t\t\t\t\t\t\tRVS.SLIDER.settings.source.facebook.album !== RVS.F.revert.settings.source.facebook.album,\r\n\r\n\t\t\t\tytchange = \tRVS.SLIDER.settings.source.youtube.api !== RVS.F.revert.settings.source.youtube.api ||\r\n\t\t\t\t\t\t\tRVS.SLIDER.settings.source.youtube.channelId !== RVS.F.revert.settings.source.youtube.channelId;\r\n\r\n\t\t\tif (flickchange || fbchange || ytchange) streamSrcUpdNeed = true;\r\n\t\t\t/*if (flickchange) flickrSourceChange();\r\n\t\t\tif (fbchange) facebookSourceChange();\r\n\t\t\tif (ytchange) youtubeSourceChange();*/\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('moduleSpinnerChange',function() {\r\n\r\n\t\t\tvar tpe = RVS.SLIDER.settings.layout.spinner.type;\r\n\t\t\tjQuery('rs-loader').attr('class',\"spinner\"+tpe).html(getSpinnerMarkup());\r\n\t\t\tif(isNaN(tpe) || parseInt(tpe, 10) < 6) setSpinnerColors();\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('scrollUpdates',function() {\r\n\t\t\trevsliderScrollable(\"update\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction getSpinnerMarkup(color) {\r\n\r\n\t\tjQuery('rs-loader').css('background', '').find('div').css('background', '');\r\n\t\tvar tpe = parseInt(RVS.SLIDER.settings.layout.spinner.type, 10),\r\n\t\t\thtml;\r\n\r\n\t\t// legacy spinners\r\n\t\tif(tpe === NaN || tpe < 6) {\r\n\t\t\thtml = '<div class=\"dot1\"></div><div class=\"dot2\"></div><div class=\"bounce1\"></div><div class=\"bounce2\"></div><div class=\"bounce3\"></div>';\r\n\t\t}\r\n\t\t// new spinners\r\n\t\telse {\r\n\r\n\t\t\tvar spans = [10, 0, 4, 2, 5, 9, 0, 4, 4, 2],\r\n\t\t\t\tnum = spans[tpe - 6];\r\n\r\n\t\t\thtml = '<div class=\"rs-spinner-inner\"';\r\n\t\t\tif(!color) color = RVS.SLIDER.settings.layout.spinner.color;\r\n\r\n\t\t\tif(tpe === 7) {\r\n\t\t\t\tvar clr;\r\n\t\t\t\tif(color.search('#') !== -1) {\r\n\t\t\t\t\tclr = RSColor.processRgba(color);\r\n\t\t\t\t}\r\n\t\t\t\telse if(color.search('rgb') !== -1) {\r\n\t\t\t\t\tclr = RSColor.rgbValues(color);\r\n\t\t\t\t\tif(clr.length > 2) clr = RSColor.rgbString(clr[0].trim(), clr[1].trim(), clr[2].trim());\r\n\t\t\t\t}\r\n\t\t\t\tif(clr && typeof color === 'string') {\r\n\t\t\t\t\tclr = clr.replace(')', ', ');\r\n\t\t\t\t\tif(clr.search('rgba') === -1) clr = clr.replace('rgb', 'rgba');\r\n\t\t\t\t\thtml += ' style=\"border-top-color: ' + clr + '0.65); border-bottom-color: ' + clr + '0.15); border-left-color: ' + clr + '0.65); border-right-color: ' + clr + '0.15)\"';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(tpe === 12) {\r\n\t\t\t\thtml += ' style=\"background:' + color + '\"';\r\n\t\t\t}\r\n\r\n\t\t\thtml += '>';\r\n\t\t\tfor(var i = 0; i < num; i++) {\r\n\t\t\t\tif(i > 0) html += ' ';\r\n\t\t\t\thtml += '<span style=\"background:' + color + '\"></span>';\r\n\t\t\t}\r\n\t\t\thtml += '</div>';\r\n\r\n\t\t}\r\n\r\n\t\treturn html;\r\n\r\n\t}\r\n\r\n\t/*\r\n\tSET THE COLOR OF THE SPINNER\r\n\t */\r\n\tfunction setSpinnerColors(col) {\r\n\r\n\t\tcol = col===undefined ? RVS.SLIDER.settings.layout.spinner.color : col;\r\n\t\tvar sel = RVS.SLIDER.settings.layout.spinner.type;\r\n\t\tif (sel==0 || sel==5) col =\"#ffffff\";\r\n\r\n\t\tvar spin = jQuery('rs-loader');\r\n\t\tif (sel==0 || sel==1 || sel==2 || sel==5)\r\n\t\t\tspin.css({'backgroundColor':col});\r\n\t\telse if(sel ==3 || sel==4) {\r\n\t\t\tspin.css({'backgroundColor':'transparent'});\r\n\t\t \tspin.find('div').css({'backgroundColor':col});\r\n\t\t}\r\n\t\t// new spinners\r\n\t\telse {\r\n\t\t\tspin.html(getSpinnerMarkup(col));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Show/Hide flickr Photosets\r\n\t */\r\n\tfunction flickrSourceChange() {\r\n\t\tvar _ = RVS.SLIDER.settings.source.flickr;\r\n\t\tif(_.type=='photosets'){\r\n\t\t\tif(_.userURL!=\"\" && _.apiKey!=\"\"){\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t\t\t\turl \t:  _.userURL,\r\n\t\t\t\t\t\t\t\tkey \t:  _.apiKey,\r\n\t\t\t\t\t\t\t\tcount \t:  _.count,\r\n\t\t\t\t\t\t\t\tset \t:  _.photoSet\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\tRVS.F.ajaxRequest(\"get_flickr_photosets\", data, function(response){\r\n\t\t\t\t\tjQuery(\"#sr_src_flickr_photoset\").html(response.data.html);\r\n\t\t\t\t\tRVS.F.setS2Option({select:jQuery(\"#sr_src_flickr_photoset\"), selectValue:_.photoSet});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tjQuery(\"#sr_src_flickr_photoset\").html(\"\");\r\n\t\t\t\tRVS.F.setS2Option({select:jQuery(\"#sr_src_flickr_photoset\"),selectValue:\"\"});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Show/Hide facebook Albums\r\n\t */\r\n\tfunction facebookSourceChange() {\r\n\t\tvar _ = RVS.SLIDER.settings.source.facebook;\r\n\t\tif(_.typeSource=='album'){\r\n\t\t\tif(_.appId!=\"\" && _.page_id!=\"\"){\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t\t\t\tapp_id \t\t:  _.appId,\r\n\t\t\t\t\t\t\t\tpage_id \t:  _.page_id,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\tRVS.F.ajaxRequest(\"get_facebook_photosets\", data, function(response){\r\n\t\t\t\t\tjQuery(\"#sr_src_facebok_album\").html(response.html);\r\n\t\t\t\t\tRVS.F.setS2Option({select:jQuery(\"#sr_src_facebok_album\"), selectValue:_.album});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tjQuery(\"#sr_src_facebok_album\").html(\"\");\r\n\t\t\t\tRVS.F.setS2Option({select:jQuery(\"#sr_src_facebok_album\"),selectValue:\"\"});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Show/Hide YouTube Playlist\r\n\t */\r\n\tfunction youtubeSourceChange() {\r\n\t\tvar _ = RVS.SLIDER.settings.source.youtube;\r\n\t\tif(_.typeSource=='playlist'){\r\n\t\t\tif(_.api!=\"\" && _.channelId!=\"\"){\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t\t\t\tapi \t:  _.api,\r\n\t\t\t\t\t\t\t\tid \t\t:  _.channelId,\r\n\t\t\t\t\t\t\t\tplaylist :  _.playList\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\tRVS.F.ajaxRequest(\"get_youtube_playlists\", data, function(response){\r\n\t\t\t\t\tjQuery(\"#sr_src_youtube_playlist\").html(response.data.html);\r\n\t\t\t\t\tif (_.playList===\"\") {\r\n\t\t\t\t\t\tvar fo = jQuery(\"#sr_src_youtube_playlist option\").first();\r\n\t\t\t\t\t\t_.playList = fo[0].value;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tRVS.F.setS2Option({select:jQuery(\"#sr_src_youtube_playlist\"), selectValue:_.playList});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tjQuery(\"#sr_src_youtube_playlist\").html(\"\");\r\n\t\t\t\tRVS.F.setS2Option({select:jQuery(\"#sr_src_youtube_playlist\"),selectValue:\"\"});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\t/*\r\n\tHIDE/SHOW ADVANCED SETTINGS IN CASE JUSTIFY AND CAROUSEL IS SET\r\n\t */\r\n\tfunction checkJustifyCarousel() {\r\n\t\tif (RVS.SLIDER.settings.carousel.justify && RVS.SLIDER.settings.type===\"carousel\") RVS.C.tRC.classList.add('_just_carousel_'); else RVS.C.tRC.classList.remove('_just_carousel_');\r\n\t}\r\n\r\n\t/*\r\n\tINIT LOCAL INPUT BOX FUNCTIONS\r\n\t*/\r\n\tfunction initLocalInputBoxes() {\r\n\t\t// Handle ScreenSize Options\r\n\t\tjQuery('#screenselector').on('change',function(e) {\r\n\t\t\tRVS.screen = this.value;\r\n\t\t\tRVS.S.nextscreen = RVS.screen===\"d\" ? \"none\" : RVS.screen===\"n\" ? \"d\" : RVS.screen===\"t\" ? \"n\" : RVS.screen==\"m\" ? \"t\" : \"none\";\r\n\t\t\tRVS.S.prevscreen = RVS.screen===\"d\" ? \"n\" : RVS.screen===\"n\" ? \"t\" : RVS.screen===\"t\" ? \"m\" : \"none\";\r\n\t\t\tjQuery('.screen_selector.selected').removeClass(\"selected\");\r\n\t\t\tjQuery('.screen_selector.ss_'+RVS.screen).addClass(\"selected\");\r\n\t\t\tsetSlidesDimension(false);\r\n\t\t\tRVS.DOC.trigger('sliderSizeChanged');\r\n\t\t\tRVS.F.setRulers();\r\n\t\t});\r\n\r\n\r\n\t\t//ADD NEW SLIDE\r\n\t\tRVS.DOC.on('click','#newslide, #add_blank_slide',function() {\r\n\t\t\tRVS.F.addRemoveSlideWithBackupAfterSlideId({\r\n\t\t\t\t\tid : \"addnewslide\",\r\n\t\t\t\t\tstep : \"Add New Slide\",\r\n\t\t\t\t\ticon : \"fiber_new\",\r\n\t\t\t\t\tslideObj : {slide:RVS.F.addSlideObj(), layers:{}},\r\n\t\t\t\t\tslideObjOld : {},\r\n\t\t\t\t\tbeforeSelected:RVS.S.slideId,\r\n\t\t\t\t\tafter:function() {RVS.DOC.trigger('changeToSlideMode');}\r\n\t\t\t});\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t//ADD BULK SLIDE\r\n\t\tRVS.DOC.on('addBulkSlides',function(e,param) {\r\n\t\t\tRVS.F.addRemoveSlideWithBackupAfterSlideId({\r\n\t\t\t\t\tid : \"addnewslide\",\r\n\t\t\t\t\tstep : \"Add New Slide\",\r\n\t\t\t\t\ticon : \"fiber_new\",\r\n\t\t\t\t\tslideObj : {slide:RVS.F.addSlideObj(), layers:{}},\r\n\t\t\t\t\tslideObjOld : {},\r\n\t\t\t\t\tbeforeSelected:RVS.S.slideId,\r\n\t\t\t\t\turls:param.urlImage,\r\n\t\t\t\t\tendOfMain:function() {RVS.DOC.trigger('changeToSlideMode'); setTimeout(function() {RVS.DOC.trigger('saveslider',{force:true});},500); }\r\n\t\t\t});\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// ADD TEMPLATE SLIDE\r\n\t\tRVS.DOC.on('click','#add_template_slide',function() {\r\n\t\t\tRVS.F.openObjectLibrary({types:[\"moduletemplates\",\"modules\"],filter:\"all\", selected:[\"moduletemplates\"], context:\"editor\", success:{slide:\"addSlideFromTemplate\"}});\r\n\t\t});\r\n\r\n\t\t// ADD TEMPLATE SLIDE\r\n\t\tRVS.DOC.on('click','#add_module_slide',function() {\r\n\t\t\tRVS.F.openObjectLibrary({types:[\"modules\",\"moduletemplates\"],filter:\"all\", selected:[\"modules\"], context:\"editor\", success:{slide:\"addSlideFromTemplate\"}});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('addSlideFromTemplate',function(e,param) {\r\n\t\t\tRVS.F.ajaxRequest('install_template_slide', {slider_id:RVS.ENV.sliderID, slide_id:param}, function(response){\r\n\t\t\t\tif (response.success) {\r\n\t\t\t\t\tfor (var sindex in response.slides) {\r\n\t\t\t\t\t\tif(!response.slides.hasOwnProperty(sindex)) continue;\r\n\t\t\t\t\t\t// Create New Slide Object\r\n\t\t\t\t\t\tvar newSlide = {slide:RVS.F.addSlideObj( RVS.F.expandSlide(response.slides[sindex].params)), layers:{}, id:response.slides[sindex].id};\r\n\r\n\r\n\r\n\t\t\t\t\t\t// Add Layers to Slide Object\r\n\t\t\t\t\t\tfor (var layerIndex in response.slides[sindex].layers) {\r\n\t\t\t\t\t\t\tif(!response.slides[sindex].layers.hasOwnProperty(layerIndex)) continue;\r\n\t\t\t\t\t\t\tvar layerObj = response.slides[sindex].layers[layerIndex],\r\n\t\t\t\t\t\t\t\tnewLayer =  RVS.F.addLayerObj(RVS.F.safeExtend(true,RVS.F.addLayerObj(layerObj.type,undefined,true), layerObj));\r\n\r\n\r\n\t\t\t\t\t\t\tif (newLayer) newSlide.layers[newLayer.uid] = newLayer;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Push Slide Object to Slider Array\r\n\t\t\t\t\t\tRVS.SLIDER[response.slides[sindex].id] = newSlide;\r\n\t\t\t\t\t\tRVS.SLIDER.slideIDs.push(response.slides[sindex].id);\r\n\t\t\t\t\t\tRVS.F.addToSlideList({id:response.slides[sindex].id});\r\n\t\t            }\r\n\t\t            RVS.F.mainMode({mode:\"slidelayout\",set:true, slide:response.slides[0].id});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updatepublishicons',function(a,b) {\r\n\t\t\tif (b!==undefined && b.val!==undefined) document.getElementById('publish_toggle_icon_'+RVS.S.slideId).className = b.val+\"slide\";\r\n\t\t});\r\n\r\n\t\t//PUBLISH SLIDE\r\n\t\tRVS.DOC.on('click','.publishedslide, .unpublishedslide',function() {\r\n\t\t\tvar slideid = jQuery(this).closest('li').data('ref');\r\n\t\t\tRVS.SLIDER[slideid].slide.publish.state = RVS.SLIDER[slideid].slide.publish.state===\"published\" ? \"unpublished\" : \"published\";\r\n\t\t\tthis.className= RVS.SLIDER[slideid].slide.publish.state+\"slide\";\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('#form_slidegeneral_progstate'), path:slideid+\".slide.\", trigger:\"init\"});\r\n\t\t\tRVS.F.slideinWork(slideid);\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('deletesingleslide',function() {\r\n\t\t\tRVS.F.addRemoveSlideWithBackup({\tid : \"deleteslide\",\r\n\t\t\t\tstep : \"Remove Slide\",\r\n\t\t\t\ticon : \"remove\",\r\n\t\t\t\tslideObjOld : RVS.F.safeExtend(true,{},RVS.SLIDER[window.delete_slide_id]),\r\n\t\t\t\tslideId : window.delete_slide_id,\r\n\t\t\t\tslideObj : {},\r\n\t\t\t\tbeforeSelected:RVS.S.slideId\r\n\t\t\t});\r\n\t\t})\r\n\r\n\t\t//DELETE SLIDE\r\n\t\tRVS.DOC.on('click','.deleteslide, #do_delete_slide',function() {\r\n\t\t\twindow.delete_slide_id = this.id===\"do_delete_slide\" ? RVS.S.slideId : jQuery(this).closest('li').data('ref');\r\n\t\t\tRVS.F.RSDialog.create({\r\n\t\t\t\t\tbgopacity:0.85,\r\n\t\t\t\t\tmodalid:'rbm_decisionModal',\r\n\t\t\t\t\ticon:'delete',\r\n\t\t\t\t\ttitle:RVS_LANG.deleteslide,\r\n\t\t\t\t\tmaintext:RVS_LANG.deletingslide,\r\n\t\t\t\t\tsubtext:RVS_LANG.deleteselectedslide+\" <strong>\"+RVS.SLIDER[window.delete_slide_id].slide.title+\"</strong> ?\",\r\n\t\t\t\t\tdo:{\r\n\t\t\t\t\t\ticon:\"delete\",\r\n\t\t\t\t\t\ttext:RVS_LANG.yesdeleteslide,\r\n\t\t\t\t\t\tevent: \"deletesingleslide\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcancel:{\r\n\t\t\t\t\t\ticon:\"cancel\",\r\n\t\t\t\t\t\ttext:RVS_LANG.cancel\r\n\t\t\t\t}});\r\n\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// DUPLICATE SLIDE\r\n\t\tRVS.DOC.on('click','.duplicateslide, #do_duplicate_slide',function() {\r\n\t\t\tvar slideid = this.id===\"do_duplicate_slide\" ? RVS.S.slideId : jQuery(this).closest('li').data('ref');\r\n\t\t\tRVS.F.addRemoveSlideWithBackupAfterSlideId({\r\n\t\t\t\tid : \"duplicateslide\",\r\n\t\t\t\tstep : \"Duplicate Existing Slide\",\r\n\t\t\t\ticon : \"content_copy\",\r\n\t\t\t\tslideObj : RVS.F.safeExtend(true,{},RVS.SLIDER[slideid]),\r\n\t\t\t\tfromSlideId:slideid,\r\n\t\t\t\t//slideId : RVS.F.getNewSlideId(),\r\n\t\t\t\tslideObjOld : {},\r\n\r\n\t\t\t\tbeforeSelected:RVS.S.slideId\r\n\t\t\t});\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// DUPLICATE SLIDE TO CHILDSLIDE\r\n\t\tRVS.DOC.on('click','.addchildslide, #do_addchild_slide',function() {\r\n\t\t\tvar slideid = this.id===\"do_addchild_slide\" ? RVS.S.slideId : jQuery(this).closest('li').data('ref');\r\n\t\t\tRVS.F.addRemoveSlideWithBackupAfterSlideId({\r\n\t\t\t\tid : \"duplicateslide\",\r\n\t\t\t\tparentId:slideid,\r\n\t\t\t\tstep : \"Duplicate Existing Slide\",\r\n\t\t\t\ticon : \"content_copy\",\r\n\t\t\t\tslideObj : RVS.F.safeExtend(true,{},RVS.SLIDER[slideid]),\r\n\t\t\t\tfromSlideId:slideid,\r\n\t\t\t\t//slideId : RVS.F.getNewSlideId(),\r\n\t\t\t\tslideObjOld : {},\r\n\t\t\t\tbeforeSelected:RVS.S.slideId\r\n\t\t\t});\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\t/*\r\n\tCHECK IF CURRENT SELECTED SIZE HAS CUSTOM DIMENSIONS, OR LINEAR INHERITED VALUES\r\n\t*/\r\n\tfunction checkCustomSliderSize(screen) {\r\n\t\tRVS.SLIDER.settings.size.custom[screen] = true;\r\n\t\tjQuery('#sr_custom_'+screen).prop('checked',RVS.SLIDER.settings.size.custom[screen]);\r\n\t\tRVS.F.turnOnOffVisUpdate({input:document.getElementById('sr_custom_'+screen)});\r\n\t}\r\n\r\n\t/*\r\n\tUPDATE ALL SLIDES DIMENSION TO CURRENT OBJECT VALUE\r\n\t*/\r\n\tfunction getLastBiggerSliderDimension(_s) {\r\n\t\tvar found = false,\r\n\t\t\tr = {w:RVS.F.GW(\"d\"), h:RVS.SLIDER.settings.size.height.d};\r\n\t\tfor (var s in RVS.V.sizes) {\r\n\t\t\tif(!RVS.V.sizes.hasOwnProperty(s)) continue;\r\n\t\t\tif (!found && RVS.SLIDER.settings.size.custom[RVS.V.sizes[s]]) {\r\n\t\t\t\tr.w = RVS.F.GW(RVS.V.sizes[s]);\r\n\t\t\t\tr.h = parseInt(RVS.SLIDER.settings.size.height[RVS.V.sizes[s]],0);\r\n\t\t\t}\r\n\t\t\tif (RVS.V.sizes[s] === _s) found = true;\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\tRVS.F.JWALL = function() {\r\n\t\treturn RVS.SLIDER.settings.type===\"carousel\" && RVS.SLIDER.settings.carousel.justify===true;\r\n\t}\r\n\tRVS.F.CSTRETCH = function() {\r\n\t\treturn RVS.SLIDER.settings.type===\"carousel\" && (RVS.SLIDER.settings.carousel.stretch===true || RVS.SLIDER.settings.carousel.orientation==\"v\");\r\n\t}\r\n\r\n\tRVS.F.CVERT = function() {\r\n\t\treturn RVS.SLIDER.settings.type===\"carousel\" &&  RVS.SLIDER.settings.carousel.orientation==\"v\";\r\n\t}\r\n\r\n\tRVS.F.CHOR = function() {\r\n\t\treturn RVS.SLIDER.settings.type===\"carousel\" &&  RVS.SLIDER.settings.carousel.orientation!=\"v\";\r\n\t}\r\n\r\n\tRVS.F.GW = function(s) {\r\n\t\tvar r = parseInt(RVS.SLIDER.settings.size.width[s],0);\r\n\t\tif (RVS.F.JWALL()) {\r\n\t\t\tvar searchid = RVS.SLIDER[RVS.S.slideId].slide.static.isstatic && RVS.S.lastShownSlideId!==undefined ? RVS.S.lastShownSlideId : RVS.S.slideId;\r\n\t\t\t// JUSTIFY WALL IS ON AND WE HAVE AN IMAGE IN SLIDE\r\n\t\t\tif (RVS.SLIDER[searchid].slide.bg.type===\"image\" || RVS.SLIDER[searchid].slide.bg.type===\"external\")\r\n\t\t\t\tif (RVS.SLIDER[searchid].slide.bg.imageRatio!==undefined) r = parseInt(RVS.SLIDER.settings.size.height[s],0)  * RVS.SLIDER[searchid].slide.bg.imageRatio;\r\n\r\n\t\t} else\r\n\t\tif (RVS.F.CSTRETCH()) {\r\n\t\t\tvar searchid = RVS.SLIDER[RVS.S.slideId].slide.static.isstatic && RVS.S.lastShownSlideId!==undefined ? RVS.S.lastShownSlideId : RVS.S.slideId;\r\n\t\t\t// JUSTIFY WALL IS ON AND WE HAVE AN IMAGE IN SLIDE\r\n\t\t\t// if (RVS.SLIDER[searchid].slide.bg.type===\"image\" || RVS.SLIDER[searchid].slide.bg.type===\"external\")\r\n\t\t\t// \tif (RVS.SLIDER[searchid].slide.bg.imageRatio!==undefined) r = Math.max(RVS.C.rb[0].offsetWidth-40, r);\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\t/*\r\n\tMODIFICATE THE HEIGHT IF OUTER NAV SET OR CAROUSEL PADDINGS SET\r\n\t*/\r\n\tRVS.F.sliderDimensionOffsets = function() {\r\n\t\tvar _ = {};\r\n\t\t_.carouseltop = RVS.SLIDER.settings.type===\"carousel\" ? parseInt(RVS.SLIDER.settings.carousel.paddingTop,0) : 0;\r\n\t\t_.carouselbottom = RVS.SLIDER.settings.type===\"carousel\" ? parseInt(RVS.SLIDER.settings.carousel.paddingBottom,0) : 0;\r\n\t\t_.carouseloffset = RVS.SLIDER.settings.type===\"carousel\" ? _.carouseltop + _.carouselbottom : 0;\r\n\r\n\t\t_.navtop = RVS.SLIDER.settings.nav.thumbs.innerOuter===\"outer-top\" && RVS.SLIDER.settings.nav.thumbs.set ? RVS.S.navOffset.thumbs.top : 0;\r\n\t\t_.navtop = RVS.SLIDER.settings.nav.tabs.innerOuter===\"outer-top\" && RVS.SLIDER.settings.nav.tabs.set ? RVS.S.navOffset.tabs.top : _.navtop;\r\n\r\n\t\t_.navbottom = RVS.SLIDER.settings.nav.thumbs.innerOuter===\"outer-bottom\" && RVS.SLIDER.settings.nav.thumbs.set ? RVS.S.navOffset.thumbs.bottom : 0;\r\n\t\t_.navbottom = RVS.SLIDER.settings.nav.tabs.innerOuter===\"outer-bottom\" && RVS.SLIDER.settings.nav.tabs.set ? RVS.S.navOffset.tabs.bottom : _.navbottom;\r\n\r\n\t\t_.navleft = RVS.SLIDER.settings.nav.thumbs.innerOuter===\"outer-left\" && RVS.SLIDER.settings.nav.thumbs.set ? RVS.S.navOffset.thumbs.left : 0;\r\n\t\t_.navleft = RVS.SLIDER.settings.nav.tabs.innerOuter===\"outer-left\" && RVS.SLIDER.settings.nav.tabs.set ? RVS.S.navOffset.tabs.left : _.navleft;\r\n\r\n\t\t_.navright = RVS.SLIDER.settings.nav.thumbs.innerOuter===\"outer-right\" && RVS.SLIDER.settings.nav.thumbs.set ? RVS.S.navOffset.thumbs.right : 0;\r\n\t\t_.navright = RVS.SLIDER.settings.nav.tabs.innerOuter===\"outer-right\" && RVS.SLIDER.settings.nav.tabs.set ? RVS.S.navOffset.tabs.right : _.navright;\r\n\r\n\t\t_.louter = (RVS.SLIDER.settings.nav.thumbs.innerOuter===\"outer-left\" && RVS.SLIDER.settings.nav.thumbs.set) || (RVS.SLIDER.settings.nav.tabs.innerOuter===\"outer-left\" && RVS.SLIDER.settings.nav.tabs.set);\r\n\t\t_.router = (RVS.SLIDER.settings.nav.thumbs.innerOuter===\"outer-right\" && RVS.SLIDER.settings.nav.thumbs.set) || (RVS.SLIDER.settings.nav.tabs.innerOuter===\"outer-right\" && RVS.SLIDER.settings.nav.tabs.set);\r\n\r\n\t\treturn _;\r\n\t};\r\n\r\n\t/*\r\n\tContent Height changed ?\r\n\t*/\r\n\tRVS.F.updateMinSliderHeights = function() {\r\n\t\tlastLayerGridHeight = minLayerGridHeight === undefined ? 0 : minLayerGridHeight;\r\n\t\tminLayerGridHeight = RVS.C.layergrid!==undefined ?  RVS.C.rZone.top.height() +  RVS.C.rZone.middle.height() +  RVS.C.rZone.bottom.height() : 0;\r\n\t\treturn lastLayerGridHeight!==minLayerGridHeight;\r\n\t};\r\n\r\n\tRVS.F.setSlidesDimension = function(updateFields, updateShrinks) {\r\n\t\tsetSlidesDimension(updateFields, updateShrinks)\r\n\t}\r\n\t/*\r\n\tDRAWS THE NEW DIMENSION OF THE SLIDER\r\n\t*/\r\n\tfunction setSlidesDimension(updateFields, updateShrinks) {\r\n\t\t// MAKE SURE ONLY RUN THIS IF DIMENSIONS HAS BEEN CHANGED\r\n\r\n\r\n\t\tvar custom = RVS.SLIDER.settings.size.custom[RVS.screen],\r\n\t\t\tld = getLastBiggerSliderDimension(RVS.screen),\r\n\t\t\t// CALCULATE WIDTH AND HEIGHT OF LAYER GRID\r\n\t\t\tw = custom ? RVS.F.GW(RVS.screen) : Math.min(ld.w,RVS.ENV.grid_sizes[RVS.screen]),\r\n\t\t\th = custom ? parseInt(RVS.SLIDER.settings.size.height[RVS.screen],0) : (w / ld.w) * ld.h,\r\n\t\t\t// CALCULATE MIN HEIGHT OF PARRENT CONTAINER\r\n\t\t\tminh = RVS.SLIDER.settings.layouttype===\"fullscreen\" ? RVS.SLIDER.settings.size.minHeightFullScreen : RVS.SLIDER.settings.size.minHeight,\r\n\t\t\tnw = \"100%\",\r\n\t\t\tar = h/w;\r\n\t\tvar vertCarW = Math.max(RVS.C.rb[0].offsetWidth-40, w);\r\n\t\tvar vertCar = RVS.SLIDER.settings.type===\"carousel\" && RVS.SLIDER.settings.carousel.orientation === \"v\";\r\n\r\n\t\tcheckJustifyCarousel();\r\n\r\n\t\tminh = minh===\"none\" || !RVS.F.isNumeric() ? 0 : minh;\r\n\t\tminh = RVS.SLIDER.settings.layouttype===\"fullscreen\" ? (Math.max(Math.max(minh,RVS.S.winh-RVS.ENV.globVerOffset-65),h)) : (Math.max(minh,h));\r\n\r\n\t\t//Respect Aspect Ratio\r\n\t\tminh = RVS.SLIDER.settings.size.respectAspectRatio ? nw===\"100%\" ? Math.max(RVS.C.rb.width(),w)*ar : parseInt(nw,0)*ar : minh;\r\n\r\n\r\n\t\tRVS.F.updateMinSliderHeights();\r\n\t\tminh = Math.max(minh,minLayerGridHeight);\r\n\t\th = Math.max(h,minLayerGridHeight);\r\n\r\n\t\tar = h/w;\r\n\t\t//CALCULATE MIN HEIGHT OF TOP CONTAINER\r\n\t\tvar nminw = w,\r\n\t\t\tmaxW = \"none\",\r\n\t\t\tpd = parseInt(RVS.SLIDER.settings.layout.bg.padding,0) || 0;\r\n\r\n\t\tRVS.S.dim_offsets = RVS.F.sliderDimensionOffsets();\r\n\r\n\t\tif (RVS.F.isNumeric(RVS.SLIDER.settings.size.maxWidth) && RVS.SLIDER.settings.size.maxWidth>0)\r\n\t\t\tnminw = Math.min(parseInt(RVS.SLIDER.settings.size.maxWidth,0),w)+\"px\";\r\n\r\n\t\t//Draw Layout Containers\r\n\r\n\t\ttpGS.gsap.set([_lg,'.layer_grid'],{width:w+\"px\", maxWidth:maxW, height:h+\"px\"});\r\n\t\ttpGS.gsap.set(RVS.C.UL,{\tminWidth:(parseInt(nminw,0)+parseInt(pd,0))+\"px\",\r\n\t\t\t\t\t\t\t\t\tmaxWidth:maxW, width:nw,\r\n\t\t\t\t\t\t\t\t\tminHeight:(parseInt(minh,0)+parseInt(pd,0))});\r\n\r\n\r\n\t\t//tpGS.gsap.set(_ib,{minHeight:(minh + RVS.ENV.globVerOffset)});\r\n\r\n\t\t//IF CAROUSEL VERTICAL, SET HEIGHT min 2x of Grid Height !\r\n\t\tif (RVS.F.CVERT()) {\r\n\t\t\tRVS.S.vertCarOff =40;\r\n\t\t\tRVS.S.ulDIM = {width:RVS.C.UL.width(), height:Math.max(Math.min(RVS.S.winh-300,parseInt(RVS.SLIDER.settings.size.height[RVS.screen],0)*2) , RVS.C.UL.height())};\r\n\t\t} else {\r\n\t\t\tRVS.S.vertCarOff =0;\r\n\t\t\tRVS.S.ulDIM = {width:RVS.C.UL.width(), height:RVS.C.UL.height()};\r\n\t\t}\r\n\r\n\t\tRVS.RMD = RVS.SLIDER.settings.type===\"carousel\" ? {width: (vertCar ? vertCarW : w), height:h} : {width:RVS.S.ulDIM.width, height:RVS.S.ulDIM.height};\r\n\r\n\r\n\r\n\r\n\t\tvar __L = Math.max(0,((RVS.S.ulDIM.width)/2 - (vertCar ? vertCarW : w)/2)),\r\n\t\t\t__T = Math.max(0,((RVS.S.ulDIM.height) - h) / 2);\r\n\r\n\t\t// OFFSET PLACE FOR CAROUSEL PADDINGS AND NAVIGATION OUTER CONTAINERS\r\n\t\ttpGS.gsap.set(RVS.C.UL,{minHeight:(RVS.S.ulDIM.height + RVS.S.dim_offsets.carouseloffset + RVS.S.dim_offsets.navtop + RVS.S.dim_offsets.navbottom), minWidth:(/*RVS.S.ulDIM.width*/ (vertCar ? vertCarW : nminw))});\r\n\r\n\r\n\r\n\t\t__T = __T + RVS.S.dim_offsets.carouseltop + RVS.S.dim_offsets.navtop;\r\n\t\t__L = Math.max(0,__L);\r\n\t\t__T = Math.max(0,__T);\r\n\r\n\r\n\r\n\t\t//RVS.S.layer_grid_offset = RVS.S.layer_grid_offset===undefined ? {left:0, top:__T}  : RVS.S.layer_grid_offset;\r\n\t\t//RVS.S.layer_grid_offset.top = __T;\r\n\r\n\r\n\r\n\t\tvar __slide = document.getElementById('slide_'+RVS.S.slideId);\r\n\r\n\t\tif (RVS.SLIDER.settings.type===\"carousel\") {\r\n\t\t\tif (__slide) tpGS.gsap.set(__slide,{width:(vertCar ? vertCarW : w),height:h, top:__T, left:__L, overflow:\"hidden\",borderRadius:RVS.SLIDER.settings.carousel.borderRadius});\r\n\t\t\ttpGS.gsap.set(['.layer_grid'],{x:0,y:0,left: (vertCar ? (vertCarW - w)/2 : 0), top:\"0px\"});\r\n\t\t\ttpGS.gsap.set(_lg,{x:0,y:0,left:__L+\"px\", top:__T});\r\n\t\t\ttpGS.gsap.set('.slots_wrapper',{top:0, left:0, maxWidth:\"none\", maxHeight:\"none\"});\r\n\t\t} else {\r\n\r\n\t\t\tif (__slide) tpGS.gsap.set(__slide,{width:\"100%\",height:\"100%\", top:0, left:0, overflow:\"visible\",borderRadius:0});\r\n\t\t\ttpGS.gsap.set([_lg,'.layer_grid'],{x:0,y:0,left:__L+\"px\", top:__T});\r\n\t\t\ttpGS.gsap.set('.slots_wrapper',{top:0, left:0, maxWidth:Math.max(RVS.S.ulDIM.width,(_rvbin.width()))+\"px\", maxHeight:(RVS.S.ulDIM.height)+\"px\"});\r\n\t\t}\r\n\r\n\t\t// UPDATE FIELDS, THAN SET VALUES AS NEEDED\r\n\t\tif (updateFields) updateSlideDimensionFields();\r\n\t\tif (updateShrinks) RVS.F.updateScreenShrinks();\r\n\r\n\t\tRVS.F.updateContentDeltas();\r\n\r\n\t\t//DRAW CAROUSEL FAKES IN CASE WE ARE IN CAROUSEL MODE\r\n\t\tif (RVS.SLIDER.settings.type===\"carousel\") {\r\n\t\t\tdrawFakeCarousels({width:(vertCar ? vertCarW : w), height:h, top:__T, left:__L});\r\n\t\t} else {\r\n\t\t\tjQuery('.fakecarouselslide').remove();\r\n\t\t}\r\n\r\n\t\t// REPOSITION ALL THE CONTENT INSIDE\r\n\t\tRVS.F.sliderNavPositionUpdate({type:\"arrows\"});\r\n\t\tRVS.F.sliderNavPositionUpdate({type:\"bullets\"});\r\n\t\tRVS.F.sliderNavPositionUpdate({type:\"tabs\"});\r\n\t\tRVS.F.sliderNavPositionUpdate({type:\"thumbs\"});\r\n\t\trevsliderScrollable(\"update\");\r\n\t\tRVS.F.setRulers();\r\n\t\tif (RVS.S.firstPreparation===undefined || RVS.S.firstPreparation<2) {\r\n\t\t\tRVS.S.firstPreparation = RVS.S.firstPreparation===undefined ? 0 : RVS.S.firstPreparation;\r\n\t\t\tRVS.S.firstPreparation++;\r\n\t\t\tif (RVS.S.firstPreparation==2)  RVS.F.expandCollapseTimeLine(true,\"open\",true);\r\n\t\t}\r\n\t}\r\n\r\n\t// UPDATE THE SCREEN SHRINKS ON DIFFERENT DEVICES\r\n\tRVS.F.updateScreenShrinks = function()  {\r\n\t\tvar ld = RVS.F.GW(\"d\");\r\n\t\tfor (var i in RVS.V.sizes) {\r\n\t\t\tif(!RVS.V.sizes.hasOwnProperty(i)) continue;\r\n\t\t\tvar _s = RVS.V.sizes[i],\r\n\t\t\t\tcustom = RVS.SLIDER.settings.size.custom[_s],\r\n\t\t\t\tw = custom ? RVS.F.GW(_s) : Math.min(ld,RVS.ENV.grid_sizes[_s]);\r\n\r\n\t\t\tRVS.S.shrink[_s] = w / ld;\r\n\t\t\tld = w;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction updateSlideDimensionFields() {\r\n\r\n\t\tfor (var i in RVS.V.sizes) {\r\n\t\t\tif(!RVS.V.sizes.hasOwnProperty(i)) continue;\r\n\t\t\tvar _s = RVS.V.sizes[i],\r\n\t\t\t\tcustom = RVS.SLIDER.settings.size.custom[_s],\r\n\t\t\t\tld = getLastBiggerSliderDimension(_s),\r\n\t\t\t\t// CALCULATE WIDTH AND HEIGHT OF LAYER GRID\r\n\t\t\t\tw = custom ? RVS.F.GW(_s) : Math.min(ld.w,RVS.ENV.grid_sizes[_s]),\r\n\t\t\t\th = custom ? parseInt(RVS.SLIDER.settings.size.height[_s],0) : (w / ld.w) * ld.h;\r\n\r\n\t\t\tw = Math.round(w);\r\n\t\t\th = Math.round(h);\r\n\t\t\tjQuery('#sr_size_width_'+_s).val(w+\"px\");\r\n\t\t\tjQuery('#sr_size_height_'+_s).val(h+\"px\");\r\n\t\t}\r\n\r\n\t\tvar nmw = RVS.SLIDER.settings.size.maxWidth===\"none\" || RVS.SLIDER.settings.size.maxWidth===0 || RVS.SLIDER.settings.size.maxWidth===\"\" ? \"none\" : RVS.SLIDER.settings.size.maxWidth;\r\n\t\tjQuery('#sr_size_maxwidth').val(nmw);\r\n\t\tjQuery('#sr_size_minheight').val(RVS.SLIDER.settings.size.minHeight);\r\n\t\tjQuery('#sr_size_minheight_fs').val(RVS.SLIDER.settings.size.minHeightFullScreen);\r\n\t\tif (inf_s_width!==undefined) inf_s_width.innerHTML = Math.round(RVS.F.GW(RVS.screen))+\"px\";\r\n\t}\r\n\r\n\t/*\r\n\tDRAW FAKE CAROUSELS\r\n\t*/\r\n\tfunction drawFakeCarousels(obj) {\r\n\r\n\t\tvar _ = RVS.SLIDER.settings,\r\n\t\t\twrap = jQuery('#fake_carousel_elements'),\r\n\t\t\tleftoffset = 0,\r\n\t\t\tside = 1,\r\n\t\t\tha = _.carousel.horizontal===\"center\" ? 2 : 1,\r\n\t\t\td = 0,\r\n\t\t\tscaleoffset = 0,\r\n\t\t\tcar = _.carousel,\r\n\t\t\ttotalSlides = RVS.SLIDER.slideIDs.length - 1;\r\n\r\n\t\tjQuery('.fakecarouselslide').hide();\r\n\t\tfor (var ci = 1;ci<_.carousel.maxItems;ci++) {\r\n\t\t\tvar fc = jQuery('#fakecarouselslide_'+ci),\r\n\t\t\t\ttr;\r\n\t\t\tif (fc.length===0) {\r\n\t\t\t\tfc = jQuery('<div class=\"fakecarouselslide\" id=\"fakecarouselslide_'+ci+'\"></div>');\r\n\t\t\t\twrap.append(fc);\r\n\t\t\t}\r\n\r\n\t\t\td = ci % 2 === 1 ? d+1 : d;\r\n\r\n\r\n\t\t\ttr = {\r\n\t\t\t\t\t\twidth:obj.width,\r\n\t\t\t\t\t\theight:obj.height,\r\n\t\t\t\t\t\ttop:obj.top,\r\n\t\t\t\t\t\tleft:obj.left,\r\n\t\t\t\t\t\tborderRadius:_.carousel.borderRadius,\r\n\t\t\t\t\t\tdisplay:\"block\"\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t// SET SCALE DOWNS\r\n\t\t\tvar sdown = parseInt(_.carousel.scaleDown,0)/100,\r\n\t\t\t\tmrot = parseInt(_.carousel.maxRotation,0),\r\n\t\t\t\tmfad = parseInt(_.carousel.maxOpacity,0)/100;\r\n\t\t\t\ttrans = 'left',\r\n\t\t\t\tdim = 'width';\r\n\t\t\t\trot = 'rotationY';\r\n\r\n\t\t\tif (_.carousel.orientation==\"v\") {\r\n\t\t\t\ttrans = 'top';\r\n\t\t\t\tdim = 'height';\r\n\t\t\t\trot = 'rotationX';\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// SET FADEOUT OF ELEMENT\r\n\t\t\tif (_.carousel.fadeOut)\r\n\t\t\t\tif (_.carousel.varyFade) tr.autoAlpha = 1-Math.abs(((mfad/Math.ceil(_.carousel.maxItems/ha))*d));\r\n\t\t\t\telse tr.autoAlpha = d>=1 || d<=-1 ?  mfad : mfad + ((1-mfad)*(1-Math.abs(d)));\r\n\t\t\telse\r\n\t\t\t\ttr.autoAlpha = Math.abs(d)<Math.ceil((_.carousel.maxItems/ha)) ? 1 : 0;\r\n\r\n\r\n\t\t\tif (_.carousel.scale && _.carousel.scaleDown!==undefined && sdown >0) {\r\n\t\t\t\tif (_.carousel.varyScale)\r\n\t\t\t\t\ttr.scale = 1- Math.abs((((1-sdown)/Math.ceil(_.carousel.maxItems/ha))*d));\r\n\t\t\t\telse\r\n\t\t\t\t\ttr.scale = d*side>=1 || d*side<=-1 ? sdown : (100-( sdown*Math.abs(d)));\r\n\t\t\t\t scaleoffset = d * (tr[dim] - tr[dim]*tr.scale)/2;\r\n\t\t\t} else tr.scale = 1;\r\n\r\n\t\t\tleftoffset = ci % 2 === 1 ? parseFloat(leftoffset) + parseFloat(obj[dim]) + (parseInt(_.carousel.space,0) * (_.carousel.offsetScale ? tr.scale : 1)) : leftoffset;\r\n\r\n\t\t\ttr[trans] = parseFloat(obj[trans]) + (side * leftoffset);\r\n\r\n\t\t\tif(car.spin === \"off\"){\r\n\t\t\t\ttr.rotationX = 0;\r\n\t\t\t\ttr.rotation = 0;\r\n\t\t\t\ttr.rotationY = 0;\r\n\t\t\t}\r\n\r\n\t\t\t// ROTATION FUNCTIONS\r\n\t\t\tif(car.spin !== \"off\"){\r\n\t\t\t\tcar.spinAngle = parseFloat(car.spinAngle);\r\n\t\t\t\tif(spinAngle === 0) car.spinAngle = 1;\r\n\t\t\t\tcar.space = parseFloat(car.space);\r\n\t\t\t\ttr.scale = 1;\r\n\t\t\t\tvar w = obj[dim];\r\n\t\t\t\tvar base = w/2;\r\n\t\t\t\tvar spinAngle = Math.max(Math.min(car.spinAngle, 360/totalSlides), -360/totalSlides);\r\n\t\t\t\tvar hype = base/Math.sin((spinAngle/2) * Math.PI/180);\r\n\t\t\t\tvar spinR = (Math.sqrt(hype * hype - base * base)  + car.space ) * Math.sign(spinAngle);\r\n\r\n\t\t\t\tif(car.spin === '2d' && car.orientation === 'h') spinR += (spinAngle <= 0 ? 0 : 1) * obj.height;\r\n\t\t\t\telse if(car.spin === '2d') spinR += (spinAngle <= 0 ? 0 : 1) * obj.width;\r\n\r\n\t\t\t\tvar pOffset = ci > Math.floor(car.maxItems/2) ? Math.floor(car.maxItems/2) : Math.floor(car.maxItems/2);\r\n\t\t\t\ttr[trans] = ((pOffset - Math.floor(car.maxItems/2)) * (parseFloat(obj[dim]) + parseInt(_.carousel.space))) + obj[trans];\r\n\r\n\t\t\t\tif(car.spin === '2d') {\r\n\t\t\t\t\ttr.rotation = spinAngle * (ci > Math.floor(car.maxItems/2) ? (ci - Math.floor(car.maxItems/2)) : (ci - Math.ceil(car.maxItems/2)));\r\n\t\t\t\t\tif(car.orientation === 'h') tr.transformOrigin = 'center ' + spinR + 'px 0';\r\n\t\t\t\t\telse tr.transformOrigin = spinR + 'px center 0';\r\n\t\t\t\t\ttr.rotationX = 0;\r\n\t\t\t\t\ttr.rotationY = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttr.transformOrigin = 'center center ' + spinR + 'px';\r\n\t\t\t\t\tif(car.orientation === 'h'){\r\n\t\t\t\t\t\ttr.rotationY = spinAngle * (ci > Math.floor(car.maxItems/2) ? (ci - Math.floor(car.maxItems/2)) : (ci - Math.ceil(car.maxItems/2)));\r\n\t\t\t\t\t\ttr.rotation = 0;\r\n\t\t\t\t\t\ttr.rotationX = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttr.rotationX = spinAngle * (ci > Math.floor(car.maxItems/2) ? (ci - Math.floor(car.maxItems/2)) : (ci - Math.ceil(car.maxItems/2)));\r\n\t\t\t\t\t\ttr.rotation = 0;\r\n\t\t\t\t\t\ttr.rotationY = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (_.carousel.rotation && _.carousel.maxRotation!==undefined && Math.abs(mrot)!=0)\t{\r\n\t\t\t\tif (_.carousel.varyRotate) {\r\n\t\t\t\t\ttr[rot] = Math.abs(mrot) - Math.abs((1-Math.abs(((1/Math.ceil(_.carousel.maxItems/ha))*d))) * mrot);\r\n\t\t\t\t\ttr.autoAlpha = Math.abs(tr[rot])>90 ? 0 : tr.autoAlpha;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttr[rot] = d*side>=1 || d*side<=-1 ?  mrot : Math.abs(d)*mrot;\r\n\t\t\t\t}\r\n\t\t\t\ttr[rot] = tr[rot]*side*-1;\r\n\t\t\t} else {\r\n\t\t\t\ttr[rot] = 0;\r\n\t\t\t}\r\n\r\n\t\t\t// ADD EXTRA SPACE ADJUSTEMENT IF COVER MODE IS SELECTED\r\n\t\t\tif (tr.scale!==undefined && tr.scale!==1) {\r\n\t\t\t\ttr[trans] = side<0 ? tr[trans] + scaleoffset : tr[trans] - scaleoffset;\r\n\t\t\t}\r\n\r\n\t\t\t// ZINDEX ADJUSTEMENT\r\n\t\t\ttr.zIndex = Math.round(100-Math.abs(d*5));\r\n\r\n\t\t\ttr.force3D = true;\r\n\t\t\t// TRANSFORM STYLE\r\n\t\t\ttr.transformStyle =  \"flat\";\r\n\t\t\ttr.transformPerspective = 1200;\r\n\t\t\tif(car.spin === \"off\") tr.transformOrigin = _.carousel.orientation==\"v\" ? \"50% 50%\" : \"50% \"+_.carousel.vertical;\r\n\t\t\ttpGS.gsap.set(fc,tr);\r\n\t\t\tside = side * -1;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/*\r\n\tUPDATE SLIDER BACKGROUND\r\n\t*/\r\n\tfunction setSliderBG(force) {\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\ttpGS.gsap.set(RVS.S.ulInner,{backgroundImage:\"\"});\r\n\t\t\tvar _ = RVS.SLIDER.settings,\r\n\t\t\t\tsbg = window.RSColor.get(_.layout.bg.color),\r\n\t\t\t\tis = _.layout.bg.useImage && _.layout.bg.image!==undefined ? _.layout.bg.image : \"\";\r\n\r\n\t\t\t//if (RVS.S.defaultMainPNG===undefined) RVS.S.defaultMainPNG = jQuery('.slotwrapper_prev .defaultimg').css('backgroundImage');\r\n\r\n\t\t\t//BG IMAGE OF THE SLIDER\r\n\t\t\tif (is!==\"\") tpGS.gsap.set([RVS.S.ulInner,'#slider_bg_image'],{backgroundPosition:_.layout.bg.position, 'background-size':_.layout.bg.fit, backgroundRepeat:_.layout.bg.repeat,backgroundImage:\"url(\"+is+\")\"});\r\n\t\t\telse\r\n\t\t\t//BG COLOR OF SLIDER\r\n\t\t\tif (sbg.indexOf(\"gradient\")>=0)\r\n\t\t\t\ttpGS.gsap.set([RVS.S.ulInner,'#slider_bg_image'],{background:sbg});\r\n\t\t\telse\r\n\t\t\tif (sbg!=='transparent')\r\n\t\t\t\ttpGS.gsap.set([RVS.S.ulInner,'#slider_bg_image'],{backgroundColor:sbg, backgroundImage:\"none\"});\r\n\t\t\telse\r\n\t\t\t\ttpGS.gsap.set([RVS.S.ulInner,'#slider_bg_image'],{backgroundColor:\"transparent\", backgroundImage:RVS.S.defaultMainPNG, backgroundRepeat:\"repeat\", 'background-size':\"16px 16px\"});\r\n\r\n\t\t\tdrawBGOverlay();\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('#slider_used_library'), trigger:\"init\"});\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('#slider_used_library_lists'), trigger:\"init\"});\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('#slider_bg_inputfields'), trigger:\"init\"});\r\n\t\t\t},100);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction drawBGOverlay() {\r\n\t\tRVS.C.sliderOverlay = RVS.C.sliderOverlay===undefined ? document.getElementById('slider_overlay') : RVS.C.sliderOverlay;\r\n\t\tRVS.C.sliderOverlay.style.backgroundImage = RVS._R.createOverlay(\"slider\",RVS.SLIDER.settings.layout.bg.dottedOverlay,RVS.SLIDER.settings.layout.bg.dottedOverlaySize,{0:RVS.SLIDER.settings.layout.bg.dottedColorA,1:RVS.SLIDER.settings.layout.bg.dottedColorB});\r\n\t}\r\n\r\n\t/*\r\n\tUPDATE SLIDER PROGRESS BAR\r\n\t*/\r\n\tfunction setProgressBar() {\r\n\t\trequestAnimationFrame(progressBarDraw);\r\n\t}\r\n\r\n\tfunction progressBarDraw() {\r\n\t\tvar p = RVS.SLIDER.settings.general.progressbar;\r\n\t\tRVS.C.pbar = RVS.C.pbar===undefined ? jQuery('#rev_progress_bar_wrap') : RVS.C.pbar;\r\n\t\tRVS.C.pbar_lc = RVS.C.pbar_lc===undefined ? document.getElementById('progressbar_selector_left-center') : RVS.C.pbar_lc;\r\n\t\tRVS.C.pbar_rc = RVS.C.pbar_rc===undefined ? document.getElementById('progressbar_selector_right-center') : RVS.C.pbar_rc;\r\n\t\tRVS.C.pbar_ct = RVS.C.pbar_ct===undefined ? document.getElementById('progressbar_selector_center-top') : RVS.C.pbar_ct;\r\n\t\tRVS.C.pbar_cb = RVS.C.pbar_cb===undefined ? document.getElementById('progressbar_selector_center-bottom') : RVS.C.pbar_cb;\r\n\t\tRVS.C.pbar_cc = RVS.C.pbar_cc===undefined ? document.getElementById('progressbar_selector_center-center') : RVS.C.pbar_cc;\r\n\t\tRVS.C.pbar_lc = RVS.C.pbar_lc===undefined ? document.getElementById('progressbar_selector_left-center') : RVS.C.pbar_lc;\r\n\r\n\t\t//RVS.C.pbar.detach();\r\n\r\n\t\tif (p.alignby===\"grid\" && RVS.C.layergrid!==undefined) RVS.C.layergrid.append(RVS.C.pbar); else RVS.S.ulInner.append(RVS.C.pbar);\r\n\r\n\t\t// SHOW / HIDE ALIGMENTS WHICH ARE NOT AVAILABLE\r\n\t\tif (p.style===\"horizontal\") {\r\n\t\t\ttpGS.gsap.set([RVS.C.pbar_lc,RVS.C.pbar_rc],{display:\"block\"});\r\n\t\t\ttpGS.gsap.set([RVS.C.pbar_ct,RVS.C.pbar_cb,RVS.C.pbar_cc],{display:\"none\"});\r\n\t\t} else\r\n\t\tif (p.style===\"vertical\") {\r\n\t\t\ttpGS.gsap.set([RVS.C.pbar_ct,RVS.C.pbar_cb],{display:\"block\"});\r\n\t\t\ttpGS.gsap.set([RVS.C.pbar_lc,RVS.C.pbar_rc,RVS.C.pbar_cc],{display:\"none\"});\r\n\t\t} else {\r\n\t\t\ttpGS.gsap.set([RVS.C.pbar_ct,RVS.C.pbar_cb,RVS.C.pbar_lc,RVS.C.pbar_rc,RVS.C.pbar_cc],{display:\"block\"});\r\n\t\t}\r\n\t\tvar pFW = p.alignby===\"grid\" ? RVS.S.lgw : RVS.S.ulDIM.width,\r\n\t\t\tpFH = p.alignby===\"grid\" ? RVS.S.lgh : RVS.S.ulDIM.height;\r\n\t\tif (p.set && RVS.SLIDER.settings.style!==\"hero\") {\r\n\t\t\tif (p.style===\"horizontal\" || p.style===\"vertical\") {\r\n\t\t\t\t// ALL SLIDES\r\n\t\t\t\tvar GAP = 3,\tWNG,WWG;\r\n\t\t\t\tRVS.C.pbar[0].innerHTML = p.basedon===\"module\" ? '<div class=\"rev_progress_bar\"></div><div class=\"rev_progress_bar\"></div><div class=\"rev_progress_bgs\"><div class=\"rev_progress_bg\"></div><div class=\"rev_progress_bg\"></div><div class=\"rev_progress_bg\"></div><div class=\"rev_progress_bg\"></div></div><div class=\"rev_progress_gap\"></div><div class=\"rev_progress_gap\"></div><div class=\"rev_progress_gap\"></div>' : '<div class=\"rev_progress_bar\"></div>';\r\n\t\t\t\tRVS.C.pbars = RVS.C.pbar[0].getElementsByClassName('rev_progress_bar');\r\n\t\t\t\tRVS.C.pbbgs = RVS.C.pbar[0].getElementsByClassName('rev_progress_bg');\r\n\t\t\t\tRVS.C.pbgaps = RVS.C.pbar[0].getElementsByClassName('rev_progress_gap');\r\n\r\n\t\t\t\tif (p.style===\"horizontal\") {\r\n\t\t\t\t\tWNG = Math.ceil(pFW / 4),\r\n\t\t\t\t\tWWG = Math.ceil((pFW - (GAP*parseInt(p.gapsize,0))) / 4);\r\n\t\t\t\t\ttpGS.gsap.set(RVS.C.pbar,{top:p.vertical===\"top\" ? p.y : p.vertical===\"center\" ? \"50%\" : \"auto\",\r\n\t\t\t\t\t\t\t\t\t\t\t  bottom:p.vertical===\"top\" || p.vertical===\"center\" ? \"auto\" : p.y,\r\n\t\t\t\t\t\t\t\t\t\t\t  y:p.vertical===\"center\" ? p.y : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t  x:0,\r\n\t\t\t\t\t\t\t\t\t\t\t  left:0,\r\n\t\t\t\t\t\t\t\t\t\t\t  right:\"auto\",\r\n\t\t\t\t\t\t\t\t\t\t\t  width:\"100%\",\r\n\t\t\t\t\t\t\t\t\t\t\t  height:p.size,\r\n\t\t\t\t\t\t\t\t\t\t\t  marginTop:p.alignby===\"grid\" ? 0 : p.vertical===\"bottom\" ? 0 : p.vertical===\"top\" ? 0 : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t  backgroundColor:p.basedon===\"module\" ? \"transparent\" : p.bgcolor\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttpGS.gsap.set(RVS.C.pbars,{\r\n\t\t\t\t\t\tbackgroundColor:p.color,\r\n\t\t\t\t\t\ty:0,\r\n\t\t\t\t\t \tx:p.basedon===\"module\" ? p.gap ? function(index) { return (p.horizontal===\"right\" ? GAP - index : index)*(WWG+parseInt(p.gapsize,0))} : function(index) { return (p.horizontal===\"right\" ? GAP - index : index)*WNG} : p.horizontal===\"right\" ? WNG : 0,\r\n\t\t\t\t\t\twidth:p.basedon===\"module\" ? p.gap ? WWG+\"px\" : 100 / 4 +\"%\": \"75%\",\r\n\t\t\t\t\t\theight:\"100%\"\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (p.basedon===\"module\")\r\n\t\t\t\t\t\ttpGS.gsap.set(RVS.C.pbbgs,{\r\n\t\t\t\t\t\t\tbackgroundColor:p.bgcolor,\r\n\t\t\t\t\t\t\ty:0,\r\n\t\t\t\t\t\t\tx:p.basedon===\"module\" ? p.gap ? function(index) { return index*(WWG+parseInt(p.gapsize,0))} : function(index) { return index*WNG} : 0,\r\n\t\t\t\t\t\t\twidth:p.basedon===\"module\" ? p.gap ? WWG+\"px\" : 100 / 4 +\"%\": \"75%\",\r\n\t\t\t\t\t\t\theight:\"100%\"\r\n\t\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\ttpGS.gsap.set(RVS.C.pbgaps,{\r\n\t\t\t\t\t\tbackgroundColor:p.gapcolor,\r\n\t\t\t\t\t\theight:\"100%\",\r\n\t\t\t\t\t\twidth:p.basedon===\"module\" ? p.gap ? p.gapsize+\"px\" : 0 : 0,\r\n\t\t\t\t\t\ty:0,\r\n\t\t\t\t\t\tx:p.basedon===\"module\" ? p.gap ? function(index) { return (index+1)*(WWG) +(parseInt(p.gapsize,0)*index)} : 0 : 0,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t} else\r\n\t\t\t\tif (p.style===\"vertical\") {\r\n\t\t\t\t\tWNG = pFH / 4,\r\n\t\t\t\t\tWWG = (pFH - (GAP*parseInt(p.gapsize,0))) / 4;\r\n\t\t\t\t\ttpGS.gsap.set(RVS.C.pbar,{left:p.horizontal===\"left\" ? p.x : p.horizontal===\"center\" ? \"50%\" : \"auto\",\r\n\t\t\t\t\t\t\t\t\t\t\t  right:p.horizontal===\"left\" || p.horizontal===\"center\" ? \"auto\" : p.x,\r\n\t\t\t\t\t\t\t\t\t\t\t  x:p.horizontal===\"center\" ? p.x : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t  y:p.alignby===\"grid\" ? 0 : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t  top:0,\r\n\t\t\t\t\t\t\t\t\t\t\t  bottom:\"auto\",\r\n\t\t\t\t\t\t\t\t\t\t\t  height:\"100%\",\r\n\t\t\t\t\t\t\t\t\t\t\t  width:p.size,\r\n\t\t\t\t\t\t\t\t\t\t\t  marginLeft:p.alignby===\"grid\" ? 0 : p.horizontal===\"left\" ? 0 : p.horizontal===\"right\" ? 0 : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t  backgroundColor:p.basedon===\"module\" ? \"transparent\" : p.bgcolor\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttpGS.gsap.set(RVS.C.pbars,{\r\n\t\t\t\t\t\tbackgroundColor:p.color,\r\n\t\t\t\t\t \ty:p.basedon===\"module\" ? p.gap ? function(index) { return (p.vertical===\"bottom\" ? GAP - index : index)*(WWG+parseInt(p.gapsize,0))} : function(index) { return (p.vertical===\"bottom\" ? GAP - index : index)*WNG} : p.vertical===\"bottom\" ? WNG : 0,\r\n\t\t\t\t\t\theight:p.basedon===\"module\" ? p.gap ? WWG+\"px\" : 100 / 4 +\"%\": \"75%\",\r\n\t\t\t\t\t\twidth:\"100%\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (p.basedon===\"module\")\r\n\t\t\t\t\t\ttpGS.gsap.set(RVS.C.pbbgs,{\r\n\t\t\t\t\t\t\tbackgroundColor:p.bgcolor,\r\n\t\t\t\t\t\t\ty:p.basedon===\"module\" ? p.gap? function(index) { return index*(WWG+parseInt(p.gapsize,0))} : function(index) { return index*WNG} : 0,\r\n\t\t\t\t\t\t\theight:p.basedon===\"module\" ? p.gap? WWG+\"px\" : 100 / 4 +\"%\": \"75%\",\r\n\t\t\t\t\t\t\twidth:\"100%\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\ttpGS.gsap.set(RVS.C.pbgaps,{\r\n\t\t\t\t\t\tbackgroundColor:p.gapcolor,\r\n\t\t\t\t\t\twidth:\"100%\",\r\n\t\t\t\t\t\theight:p.basedon===\"module\" ? p.gap ? p.gapsize+\"px\" : 0 : 0,\r\n\t\t\t\t\t\tx:0,\r\n\t\t\t\t\t\ty:p.basedon===\"module\" ? p.gap ? function(index) { return (index+1)*(WWG) +(parseInt(p.gapsize,0)*index)} : 0 : 0,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tRVS.C.pbar[0].innerHTML = '<canvas width=\"'+p.radius*2+'\" height=\"'+p.radius*2+'\" style=\"position:absolute\" class=\"rev_progress_bar\"></canvas>';\r\n\t\t\t\tRVS.C.pbars = RVS.C.pbar[0].getElementsByClassName('rev_progress_bar')[0];\r\n\t\t\t\ttpGS.gsap.set(RVS.C.pbar,{top:p.vertical===\"top\" ? p.y : p.vertical===\"center\" ? \"50%\" : \"auto\",\r\n\t\t\t\t\t\t\t\t\t\t  bottom:p.vertical===\"top\" || p.vertical===\"center\" ? \"auto\" : p.y,\r\n\t\t\t\t\t\t\t\t\t\t  left:p.horizontal===\"left\" ? p.x : p.horizontal===\"center\" ? \"50%\" : \"auto\",\r\n\t\t\t\t\t\t\t\t\t\t  right:p.horizontal===\"left\" || p.horizontal===\"center\" ? \"auto\" : p.x,\r\n\t\t\t\t\t\t\t\t\t\t  y:p.vertical===\"center\" ? p.y : 0,\r\n\t\t\t\t\t\t\t\t\t\t  x:p.horizontal===\"center\" ? p.x : 0,\r\n\t\t\t\t\t\t\t\t\t\t  width:p.radius*2,\r\n\t\t\t\t\t\t\t\t\t\t  height:p.radius*2,\r\n\t\t\t\t\t\t\t\t\t\t  marginTop:p.vertical===\"bottom\" ? 0 : p.vertical===\"top\" ? 0 : 0 - p.radius,\r\n\t\t\t\t\t\t\t\t\t\t  marginLeft:p.horizontal===\"left\" ? 0 : p.horizontal===\"right\" ? 0 : 0 - p.radius,\r\n\t\t\t\t\t\t\t\t\t\t  backgroundColor:\"transparent\"\r\n\t\t\t\t});\r\n\t\t\t\tdrawCWCCW();\r\n\t\t\t}\r\n\t\t\tRVS.C.pbar.removeClass(\"deactivated\");\r\n\t\t} else RVS.C.pbar.addClass(\"deactivated\");\r\n\t\t//RVS.S.ulInner.append(RVS.C.pbar);\r\n\t}\r\n\r\n\tfunction drawCWCCW(custom) {\r\n\r\n\t\tvar p = RVS.SLIDER.settings.general.progressbar,\r\n\t\t\tc = RVS.C.pbars.getContext('2d'),\r\n\t\t\tposX = parseInt(p.radius),\r\n\t\t\tposY = parseInt(p.radius),\r\n\t\t\tdeegres = p.style!==\"cw\" ? 294 : 64;\r\n\r\n\t\tc.lineCap = 'round';\r\n\t\tc.clearRect( 0, 0, p.radius*2, p.radius*2);\r\n\r\n\t\tc.beginPath();\r\n\t\tc.arc( posX, posY, p.radius-parseInt(p.size,0), (Math.PI/180) * 270, (Math.PI/180) * (270 + 360) );\r\n\t\tc.strokeStyle = custom!==undefined && custom.bgcolor!==undefined ? custom.bgcolor : p.bgcolor;\r\n\t\tc.lineWidth = parseInt(p.size,0)-1;\r\n\t\tc.stroke();\r\n\r\n\t\tc.beginPath();\r\n\t\tc.strokeStyle = custom!==undefined && custom.color!==undefined ? custom.color : p.color;\r\n\t\tc.lineWidth = parseInt(p.size,0);\r\n\t\tc.arc( posX, posY, p.radius-parseInt(p.size,0), (Math.PI/180) * 270, (Math.PI/180) * (270 + deegres), p.style!==\"cw\");\r\n\t\tc.stroke();\r\n\t}\r\n\r\n\tfunction colorEditSliderSub(n,val,canceled) {\r\n\t\tswitch (n) {\r\n\t\t\tcase \"progressgapcolor\": if (RVS.SLIDER.settings.general.progressbar.style===\"horizontal\" || RVS.SLIDER.settings.general.progressbar.style===\"vertical\") tpGS.gsap.set(RVS.C.pbgaps,{bakgroundColor:val});break;\r\n\t\t\tcase \"sliderprogresscolor\":if (RVS.SLIDER.settings.general.progressbar.style===\"horizontal\" || RVS.SLIDER.settings.general.progressbar.style===\"vertical\") tpGS.gsap.set(RVS.C.pbars,{background:val}); else drawCWCCW({color:val});break;\r\n\t\t\tcase \"sliderprogresscolorbg\":if (RVS.SLIDER.settings.general.progressbar.style===\"horizontal\" || RVS.SLIDER.settings.general.progressbar.style===\"vertical\") tpGS.gsap.set(RVS.C.pbar,{background:val}); else drawCWCCW({bgcolor:val});break;\r\n\t\t\tcase \"sliderbgcolor\": if (canceled) setSliderBG(); else tpGS.gsap.set(RVS.C.UL,{background:val});break;\r\n\t\t\tcase \"sliderTabBgColor\": RVS.F.bgUpdate(\"tabs\", val);break;\r\n\t\t\tcase \"sliderThumbBgColor\": RVS.F.bgUpdate(\"thumbs\", val);break;\r\n\t\t\tcase \"module_spinner_color\":setSpinnerColors(val);break;\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tEDIT / CANCEL A COLOR VALUE (SHOW LIVE THE CHANGES)\r\n\t*/\r\n\tfunction colorEditSlider(e,inp, val,gradient,onSave,GC) {\r\n\t\tvar canceled = false;\r\n\t\tif (inp!==undefined) window.lastColorEditjObj = jQuery(inp);\r\n\t\telse {\r\n\t\t\tif (window.lastColorEditjObj!==undefined) val = window.RSColor.get(window.lastColorEditjObj.val());\r\n\t\t\tcanceled = true;\r\n\t\t}\r\n\t\tif (val===undefined) return;\r\n\r\n\r\n\t\t// STYLE CHANGES -> REWRITE STYLE TAG IN CONTAINER !!!\r\n\t\tif (window.lastColorEditjObj[0].dataset.navcolor==1) RVS.F.drawNavigation({type:window.lastColorEditjObj[0].dataset.evtparam,color:val,attribute:window.lastColorEditjObj[0].name});\r\n\t\telse colorEditSliderSub(window.lastColorEditjObj[0].name,val,canceled);\r\n\r\n\t\tif (GC && canceled!==true)\r\n\t\t\tfor (var i in GC.ref) {\r\n\t\t\t\tif (GC.ref[i].type===\"slider\") colorEditSliderSub(GC.ref[i].inpname,val,canceled);\r\n\t\t\t\tif (GC.ref[i].type===\"navstyle\") RVS.F.drawNavigation({type:GC.ref[i].evtparam,color:val,attribute:GC.ref[i].inpname});\r\n\t\t\t\tif ((GC.ref[i].type===\"slider\" || GC.ref[i].type===\"navstyle\") && onSave) {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:GC.ref[i].r,val:val});\r\n\t\t\t\t\tvar upinp = jQuery('input[name='+GC.ref[i].inpname+']');\r\n\t\t\t\t\tif (upinp.length>0) {\r\n\t\t\t\t\t\tupinp[0].value = val;\r\n\t\t\t\t\t\tupinp.rsColorPicker(\"refresh\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n\r\n\r\n\tfunction getNewSliderObject(obj) {\r\n\t\tvar newSlider = {};\r\n\r\n\t\t/* SLIDE ADDONS */\r\n\t\tnewSlider.addOns = RVS.F.safeExtend(true,{},obj.addOns) || {};\r\n\r\n\t\t/* VERSION CHECK */\r\n        newSlider.version = RVS.ENV.revision;\r\n\r\n\t\t/* SLIDER BASICS */\r\n\t\tnewSlider.alias = _d(obj.alias,\"\");\r\n\t\tnewSlider.pakps = _d(obj.pakps,false);\r\n\r\n\t\tnewSlider.shortcode = _d(obj.shortcode,\"\");\r\n\t\tnewSlider.type = _d(obj.type,\"standard\");\r\n\t\tnewSlider.layouttype = _d(obj.layouttype,\"fullwidth\");\r\n\t\tnewSlider.sourcetype= _d(obj.sourcetype,\"gallery\");\r\n\t\tnewSlider.title = _d(obj.title,\"New Slider\");\r\n\t\tnewSlider.googleFont = _d(obj.googleFont,[]);\r\n\t\tnewSlider.id = _d(obj.id,\"\");\r\n\t\tnewSlider.class = _d(obj.class,\"\");\r\n\t\tnewSlider.wrapperclass = _d(obj.wrapperclass,\"\");\r\n\r\n\t\tnewSlider.snap = _d(obj.snap,{\r\n\t\t\tadjust:\"none\",\r\n\t\t\tsnap:false,\r\n\t\t\thelpLines:false,\r\n\t\t\tgap:20\r\n\t\t});\r\n\r\n\t\t/* SLIDER SOURCE */\r\n\t\tnewSlider.source = _d(obj.source,{\r\n\t\t\tgallery:{},\r\n\t\t\tpost:{\r\n\t\t\t\texcerptLimit:55,\r\n\t\t\t\tmaxPosts:30,\r\n\t\t\t\tfetchType:\"cat_tag\"\t,\r\n\t\t\t\tcategory:\"\",\r\n\t\t\t\tsortBy:\"ID\",\r\n\t\t\t\ttypes:\"post\",\r\n\t\t\t\tlist:\"\",\r\n\t\t\t\tsortDirection:\"DESC\",\r\n\t\t\t\tsubType:\"post\"\r\n\t\t\t},\r\n\t\t\twoo:{\r\n\t\t\t\texcerptLimit:55,\r\n\t\t\t\tmaxProducts:30,\r\n\t\t\t\tfeaturedOnly:false,\r\n\t\t\t\tinStockOnly:false,\r\n\t\t\t\tcategory:\"\",\r\n\t\t\t\tsortBy:\"ID\",\r\n\t\t\t\ttypes:\"product\",\r\n\t\t\t\tsortDirection:\"DESC\",\r\n\t\t\t\tregPriceFrom:\"\",\r\n\t\t\t\tregPriceTo:\"\",\r\n\t\t\t\tsalePriceFrom:\"\",\r\n\t\t\t\tsalePriceTo:\"\"\r\n\t\t\t},\r\n\t\t\tinstagram:{\r\n\t\t\t\tcount:8,\r\n\t\t\t\thashTag:\"\",\r\n\t\t\t\ttransient:1200,\r\n\t\t\t\ttype:\"user\",\r\n\t\t\t\tuserId:\"\",\r\n\t\t\t\ttoken_source:\"account\",\r\n\t\t\t\tconnect_with:\"\"\r\n\t\t\t},\r\n\t\t\tfacebook:{\r\n\t\t\t\talbum:\"\",\r\n\t\t\t\tappId:\"\",\r\n\t\t\t\tappSecret:\"\",\r\n\t\t\t\tcount:8,\r\n\t\t\t\ttransient:1200,\r\n\t\t\t\ttypeSource:\"timeline\",\r\n\t\t\t\ttoken_source:\"account\",\r\n\t\t\t\tconnect_with:\"\",\r\n\t\t\t\tpage_id:\"\"\r\n\t\t\t},\r\n\t\t\tflickr:{\r\n\t\t\t\tapiKey:\"\",\r\n\t\t\t\tcount:8,\r\n\t\t\t\tgalleryURL:\"\",\r\n\t\t\t\tgroupURL:\"\",\r\n\t\t\t\tphotoSet:\"\",\r\n\t\t\t\ttransient:1200,\r\n\t\t\t\ttype:\"publicphotos\",\r\n\t\t\t\tuserURL:\"\"\r\n\t\t\t},\r\n\t\t\ttwitter:{\r\n\t\t\t\taccessSecret:\"\",\r\n\t\t\t\taccessToken:\"\",\r\n\t\t\t\tconsumerKey:\"\",\r\n\t\t\t\tconsumerSecret:\"\",\r\n\t\t\t\tcount:8,\r\n\t\t\t\texcludeReplies:false,\r\n\t\t\t\timageOnly:false,\r\n\t\t\t\tincludeRetweets:false,\r\n\t\t\t\ttransient:1200,\r\n\t\t\t\tuserId:\"\"\r\n\t\t\t},\r\n\t\t\tvimeo:{\r\n\t\t\t\talbumId:\"\",\r\n\t\t\t\tchannelName:\"\",\r\n\t\t\t\tcount:8,\r\n\t\t\t\ttransient:1200,\r\n\t\t\t\tgroupName:\"\",\r\n\t\t\t\ttypeSource:\"user\",\r\n\t\t\t\tuserName:\"\"\r\n\t\t\t},\r\n\t\t\tyoutube:{\r\n\t\t\t\tapi:\"\",\r\n\t\t\t\tchannelId:\"\",\r\n\t\t\t\tcount:8,\r\n\t\t\t\tplayList:\"\",\r\n\t\t\t\ttransient:1200,\r\n\t\t\t\ttypeSource:\"channel\"\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (newSlider.source.facebook !==undefined) delete newSlider.source.facebook.pageURL;\r\n\r\n\t\tif (newSlider.source!==undefined && newSlider.source.post!==undefined && (\"\"+newSlider.source.post.excerptLimit).indexOf('chars')==-1 && (\"\"+newSlider.source.post.excerptLimit).indexOf('char')>=0) newSlider.source.post.excerptLimit = newSlider.source.post.excerptLimit.replace(\"char\",\"words\");\r\n\t\tif (newSlider.source!==undefined && newSlider.source.woo!==undefined && (\"\"+newSlider.source.woo.excerptLimit).indexOf('chars')==-1 && (\"\"+newSlider.source.woo.excerptLimit).indexOf('char')>=0) newSlider.source.woo.excerptLimit = newSlider.source.woo.excerptLimit.replace(\"char\",\"words\");\r\n\r\n\t\t// Default DoubleChecks\r\n\t\tif (newSlider.sourcetype===\"youtube\") {\r\n\t\t\tif (newSlider.source.youtube.count===\"\") newSlider.source.youtube.count=8;\r\n\t\t\tif (newSlider.source.youtube.channelId===\"\") newSlider.source.youtube.channelId=\"UCpVm7bg6pXKo1Pr6k5kxG9A\";\r\n\t\t}\r\n\r\n\t\tif (newSlider.sourcetype===\"vimeo\") {\r\n\t\t\tif (newSlider.source.vimeo.count===\"\") newSlider.source.vimeo.count=8;\r\n\t\t}\r\n\r\n\t\tif (newSlider.sourcetype===\"twitter\") {\r\n\t\t\tif (newSlider.source.twitter.count===\"\") newSlider.source.twitter.count=8;\r\n\t\t}\r\n\r\n\t\tif (newSlider.sourcetype===\"flickr\") {\r\n\t\t\tif (newSlider.source.flickr.count===\"\") newSlider.source.flickr.count=8;\r\n\t\t}\r\n\r\n\t\tif (newSlider.sourcetype===\"facebook\") {\r\n\t\t\tif (newSlider.source.facebook.count===\"\") newSlider.source.facebook.count=8;\r\n\t\t}\r\n\r\n\r\n\t\t/* SLIDER DEFAULTS */\r\n\t\tnewSlider.def = _d(obj.def,{\r\n\t\t\tintelligentInherit:true,\r\n\t\t\tautoResponsive:true,\r\n\t\t\tresponsiveChilds:true,\r\n\t\t\tresponsiveOffset:true,\r\n\t\t\ttransition:\"fade\",\r\n\t\t\ttransitionDuration:300,\r\n\t\t\tdelay:9000,\r\n\t\t\tbackground:{\r\n\t\t\t\tfit:\"cover\",\r\n\t\t\t\tfitX:100,\r\n\t\t\t\tfitY:100,\r\n\t\t\t\tposition:\"center center\",\r\n\t\t\t\tpositionX:0,\r\n\t\t\t\tpositionY:0,\r\n\t\t\t\trepeat:\"no-repeat\"\r\n\t\t\t},\r\n\t\t\tpanZoom:{\r\n\t\t\t\tset:false,\r\n\t\t\t\tblurStart:0,\r\n\t\t\t\tblurEnd:0,\r\n\t\t\t\tduration:10000,\r\n\t\t\t\tease:\"none\",\r\n\t\t\t\tfitEnd:100,\r\n\t\t\t\tfitStart:100,\r\n\t\t\t\txEnd:0,\r\n\t\t\t\tyEnd:0,\r\n\t\t\t\txStart:0,\r\n\t\t\t\tyStart:0,\r\n\t\t\t\trotateStart:0,\r\n\t\t\t\trotateEnd:0\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tnewSlider.def.intelligentInherit = newSlider.def.intelligentInherit===undefined ? true : newSlider.def.intelligentInherit;\r\n\t\tnewSlider.def.autoResponsive = newSlider.def.autoResponsive===undefined ? true : newSlider.def.autoResponsive;\r\n\t\tnewSlider.def.responsiveChilds = newSlider.def.responsiveChilds===undefined ? true : newSlider.def.responsiveChilds;\r\n\t\tnewSlider.def.responsiveOffset = newSlider.def.responsiveOffset===undefined ? true : newSlider.def.responsiveOffset;\r\n\r\n\t\t/* SLIDER SIZE */\r\n\t\tnewSlider.size = _d(obj.size,{\r\n\t\t\tenableUpscaling:false,\r\n\t\t\trespectAspectRatio:false,\r\n\t\t\tdisableForceFullWidth:false,\r\n\t\t\tcustom:{d:true,n:false,t:false,m:false},\r\n\t\t\tminHeightFullScreen:\"\",\r\n\t\t\tminHeight:\"\",\r\n\t\t\tmaxWidth:0,\r\n\t\t\tmaxHeight:0,\r\n\t\t\tfullScreenOffsetContainer:\"\",\r\n\t\t\tfullScreenOffset:\"\",\r\n\t\t\twidth:{d:1240,n:1024,t:778,m:480},\r\n\t\t\theight:{d:900,n:768,t:960,m:720},\r\n\t\t\teditorCache:{d:0,n:0,t:0,m:0},\r\n\t\t\toverflow:false,\r\n\t\t\tuseFullScreenHeight:true,\r\n\t\t\toverflowHidden:false,\r\n\t\t\tgridEQModule:false,\r\n\t\t\tforceOverflow:false,\r\n\t\t\tkeepBPHeight:false,\r\n\t\t\tignoreHeightChanges:true\r\n\t\t});\r\n\t\tnewSlider.size.editorCache = newSlider.size.editorCache===undefined ? {d:0, n:0, t:0, m:0} : newSlider.size.editorCache;\r\n\t\tnewSlider.size.editorCache.d = newSlider.size.editorCache.d === 0 ? newSlider.size.height.d : newSlider.size.editorCache.d;\r\n\t\tnewSlider.size.editorCache.n = newSlider.size.editorCache.n === 0 ? newSlider.size.height.n : newSlider.size.editorCache.n;\r\n\t\tnewSlider.size.editorCache.t = newSlider.size.editorCache.t === 0 ? newSlider.size.height.t : newSlider.size.editorCache.t;\r\n\t\tnewSlider.size.editorCache.m = newSlider.size.editorCache.m === 0 ? newSlider.size.height.m : newSlider.size.editorCache.m;\r\n\r\n\t\t/* SLIDER CODES */\r\n\t\tnewSlider.codes = _d(obj.codes,{\r\n\t\t\tcss:\"\",\r\n\t\t\tjavascript:\"\"\r\n\t\t});\r\n\r\n\t\t/* CAROUSEL SETTINGS */\r\n\t\tnewSlider.carousel = _d(obj.carousel,{\r\n\t\t\torientation:'h',\r\n\t\t\tprevNextVis:'50px',\r\n\t\t\tjustify:false,\r\n\t\t\tjustifyMaxWidth:false,\r\n\t\t\tsnap:true,\r\n\t\t\tborderRadius:0,\r\n\t\t\tborderRadiusUnit:\"px\",\r\n\t\t\tease:\"power3.inOut\",\r\n\t\t\tfadeOut:true,\r\n\t\t\tscale:false,\r\n\t\t\toffsetScale:false,\r\n\t\t\thorizontal:\"center\",\r\n\t\t\tvertical:\"center\",\r\n\t\t\tinfinity:false,\r\n\t\t\tmaxItems:3,\r\n\t\t\tmaxRotation:0,\r\n\t\t\tmaxOpacity:100,\r\n\t\t\tpaddingTop:0,\r\n\t\t\tpaddingBottom:0,\r\n\t\t\trotation:false,\r\n\t\t\tscaleDown:50,\r\n\t\t\tspace:0,\r\n\t\t\tspeed:800,\r\n\t\t\tstretch:false,\r\n\t\t\tvaryFade:false,\r\n\t\t\tvaryRotate:false,\r\n\t\t\tvaryScale:false\t,\r\n\t\t\tshowAllLayers:'false',\r\n\t\t\tskewX: 0,\r\n\t\t\tskewY: 0,\r\n\t\t\tspin: 'off',\r\n\t\t\tspinAngle: 0,\r\n\t\t\tovershoot: false\r\n\t\t});\r\n\r\n\t\tnewSlider.carousel.showAllLayers=newSlider.carousel.showAllLayers===\"true\" || newSlider.carousel.showAllLayers===true ? \"all\" : newSlider.carousel.showAllLayers;\r\n\r\n\t\t/* HERO SETTINGS */\r\n\t\tnewSlider.hero = _d(obj.hero,{\r\n\t\t\tactiveSlide:-1\r\n\t\t});\r\n\r\n\t\t/* SLIDER LAYOUT  - BG, LOADER, POSITION */\r\n\t\tnewSlider.layout = _d(obj.layout,{\r\n\t\t\tbg:{\r\n\t\t\t\tcolor:\"transparent\",\r\n\t\t\t\tpadding:0,\r\n\t\t\t\tdottedOverlay:\"none\",\r\n\t\t\t\tdottedOverlaySize:1,\r\n\t\t\t\tdottedColorA:\"transparent\",\r\n\t\t\t\tdottedColorB:\"#000000\",\r\n\t\t\t\tshadow:0,\r\n\t\t\t\tuseImage:false,\r\n\t\t\t\timage:\"\",\r\n\t\t\t\timageSourceType:\"full\",\r\n\t\t\t\tfit:\"cover\",\r\n\t\t\t\tposition:\"center center\",\r\n\t\t\t\trepeat:\"no-repeat\"\r\n\t\t\t},\r\n\t\t\tspinner:{\r\n\t\t\t\tcolor:\"#ffffff\",\r\n\t\t\t\ttype:\"off\"\r\n\r\n\t\t\t},\r\n\t\t\tposition:{\r\n\t\t\t\tmarginTop:0,\r\n\t\t\t\tmarginBottom:0,\r\n\t\t\t\tmarginLeft:0,\r\n\t\t\t\tmarginRight:0,\r\n\t\t\t\talign:\"center\",\r\n\t\t\t\tfixedOnTop:false,\r\n\t\t\t\taddClear:false\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (newSlider!==undefined && newSlider.layout!==undefined && newSlider.layout.bg!==undefined) {\r\n\t\t\tif (newSlider.layout.bg.dottedOverlay.indexOf(\"white\")>0) newSlider.layout.bg.dottedColorB = \"rgba(255,255,255,255)\";\r\n\t\t\tif (newSlider.layout.bg.dottedOverlay.indexOf(\"twoxtwo\")>=0) newSlider.layout.bg.dottedOverlay = \"1\";\r\n\t\t\telse if (newSlider.layout.bg.dottedOverlay.indexOf(\"threexthree\")>=0) newSlider.layout.bg.dottedOverlay = \"2\";\r\n\t\t}\r\n\r\n\t\t/* SLIDER VISIBILITY */\r\n\t\tnewSlider.visibility = _d(obj.visibility,{\r\n\t\t\thideSelectedLayersUnderLimit:0,\r\n\t\t\thideAllLayersUnderLimit:0,\r\n\t\t\thideSliderUnderLimit:0\r\n\t\t});\r\n\r\n\r\n\t\t/* GENERAL SETTINGS */\r\n\t\tnewSlider.general = _d(obj.general,{\r\n\t\t\tslideshow:{\r\n\t\t\t\tslideShow:true,\r\n\t\t\t\tstopOnHover:false,\r\n\t\t\t\tstopSlider:false,\r\n\t\t\t\tstopAfterLoops:0,\r\n\t\t\t\tstopAtSlide:1,\r\n\t\t\t\tshuffle:false,\r\n\t\t\t\tloopSingle:false,\r\n\t\t\t\tviewPort:false,\r\n\t\t\t\tviewPortStart:\"wait\",\r\n\t\t\t\tviewPortArea:RVS.F.cToResp({default:\"200px\"}),\r\n\t\t\t\tpresetSliderHeight:false,\r\n\t\t\t\tinitDelay:0,\r\n\t\t\t\twaitForInit:false\r\n\t\t\t},\r\n\t\t\tprogressbar:{\r\n\t\t\t\tset:false,\r\n\t\t\t\talignby:\"slider\",\r\n\t\t\t\tstyle:\"horizontal\",\r\n\t\t\t\tsize:\"5px\",\r\n\t\t\t\tradius:10,\r\n\t\t\t\tvertical:\"bottom\",\r\n\t\t\t\thorizontal:\"left\",\r\n\t\t\t\tx:0,\r\n\t\t\t\ty:0,\r\n\t\t\t\tcolor:'rgba(255,255,255,0.5)',\r\n\t\t\t\tbgcolor:'transparent',\r\n\t\t\t\tbasedon:\"slide\",\r\n\t\t\t\tgapsize:0,\r\n\t\t\t\tgap:false,\r\n\t\t\t\tgapcolor:'rgba(255,255,255,0.5)',\r\n\t\t\t\treset:\"reset\",\r\n\t\t\t\tvisibility:{\r\n\t\t\t\t\td:true,\r\n\t\t\t\t\tm:true,\r\n\t\t\t\t\tn:true,\r\n\t\t\t\t\tt:true,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfirstSlide:{\r\n\t\t\t\tset:false,\r\n\t\t\t\tduration:300,\r\n\t\t\t\tslotAmount:7,\r\n\t\t\t\ttype:\"fade\",\r\n\t\t\t\talternativeFirstSlideSet:false,\r\n\t\t\t\talternativeFirstSlide:1\r\n\t\t\t},\r\n\t\t\ticache:\"default\",\r\n\t\t\tDPR:'dpr',\r\n\t\t\tobserveWrap:false,\r\n\t\t\tlayerSelection:false,\r\n\t\t\tlazyLoad:\"none\",\r\n\t\t\tnextSlideOnFocus:false,\r\n\t\t\tdisableFocusListener:false,\r\n\t\t\tenableurlhash:false,\r\n\t\t\tdisableOnMobile:false,\r\n\t\t\tautoPlayVideoOnMobile:true,\r\n\t\t\tdisablePanZoomMobile:false,\r\n\t\t\tuseWPML:false,\r\n\t\t\tperspective:600,\r\n\t\t\tperspectiveType:\"global\"\r\n\t\t});\r\n\r\n\r\n\t\tif (newSlider.general.progressbar!==undefined) {\r\n\r\n\t\t\tif(newSlider.general.progressbar.height!==undefined) {\r\n\t\t\t\tnewSlider.general.progressbar.size = newSlider.general.progressbar.height;\r\n\t\t\t\tdelete newSlider.general.progressbar.height;\r\n\t\t\t}\r\n\t\t\tif (newSlider.general.progressbar.position!==undefined) {\r\n\t\t\t\tnewSlider.general.progressbar.vertical = newSlider.general.progressbar.position;\r\n\t\t\t\tdelete newSlider.general.progressbar.position;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (newSlider.general.perspectiveType===undefined) newSlider.general.perspectiveType='local';\r\n\t\tif (newSlider.general.perspective===undefined) newSlider.general.perspective=600;\r\n\t\tif (typeof newSlider.general.slideshow.viewPortArea!==\"object\") newSlider.general.slideshow.viewPortArea = RVS.F.cToResp({default:newSlider.general.slideshow.viewPortArea});\r\n\t\t//newSlider.general.slideshow.slideShow =  (newSlider.general.slideshow.stopSlider===true && (newSlider.general.stopAfterLoops===0 || newSlider.general.stopAfterLoops===undefined) && (newSlider.general.stopAtSlide===1 || newSlider.general.stopAtSlide===undefined)) ? false : true;\r\n\t\t/* SLIDER NAVIGATION */\r\n\t\tif (obj!==undefined && obj.nav!==undefined && obj.nav.swipe!==undefined) {\r\n\t\t\tobj.nav.swipe.setMobileCarousel = obj.nav.swipe.setMobileCarousel===undefined ? true : obj.nav.swipe.setMobileCarousel;\r\n\t\t\tobj.nav.swipe.setDesktopCarousel = obj.nav.swipe.setDesktopCarousel===undefined ? true : obj.nav.swipe.setDesktopCarousel;\r\n\t\t}\r\n\t\tnewSlider.nav = _d(obj.nav,{\r\n\t\t\tpreview:{\r\n\t\t\t\twidth:50,\r\n\t\t\t\theight:100\r\n\t\t\t},\r\n\t\t\tswipe:{\r\n\t\t\t\tset:false,\r\n\t\t\t\tsetOnDesktop:false,\r\n\t\t\t\tsetMobileCarousel:true,\r\n\t\t\t\tsetDesktopCarousel:true,\r\n\t\t\t\tblockDragVertical:false,\r\n\t\t\t\tdirection:\"horizontal\",\r\n\t\t\t\tminTouch:1,\r\n\t\t\t\tvelocity:75\r\n\t\t\t},\r\n\t\t\tkeyboard:{\r\n\t\t\t\tdirection:\"horizontal\",\r\n\t\t\t\tset:false\r\n\t\t\t},\r\n\t\t\tmouse:{\r\n\t\t\t\tset:'off',\r\n\t\t\t\treverse:\"default\",\r\n\t\t\t\tviewport:50,\r\n\t\t\t\tcalldelay:1000,\r\n\t\t\t\tthreshold: 50,\r\n\t\t\t\t/*msWayUp:\"top\",\r\n\t\t\t\tmsWayDown:\"top\",\r\n\t\t\t\tmsWayUpOffset:0,\r\n\t\t\t\tmsWayDownOffset:0*/\r\n\t\t\t},\r\n\t\t\tarrows:{\r\n\t\t\t\tset:false,\r\n\t\t\t\trtl:false,\r\n\t\t\t\tanimSpeed:\"1000ms\",\r\n\t\t\t\tanimDelay:\"1000ms\",\r\n\t\t\t\tstyle:\"1000\",\r\n\t\t\t\tpreset:\"default\",\r\n\t\t\t\tpresets:{},\r\n\t\t\t\talwaysOn:true,\r\n\t\t\t\thideDelay:200,\r\n\t\t\t\thideDelayMobile:1200,\r\n\t\t\t\thideOver:false,\r\n\t\t\t\thideOverLimit:0,\r\n\t\t\t\thideUnder:false,\r\n\t\t\t\thideUnderLimit:778,\r\n\t\t\t\tleft:{\r\n\t\t\t\t\tanim:\"fade\",\r\n\t\t\t\t\thorizontal:\"left\",\r\n\t\t\t\t\tvertical:\"center\",\r\n\t\t\t\t\toffsetX:30,\r\n\t\t\t\t\toffsetY:0,\r\n\t\t\t\t\talign:\"slider\"\r\n\t\t\t\t},\r\n\t\t\t\tright:{\r\n\t\t\t\t\tanim:\"fade\",\r\n\t\t\t\t\thorizontal:\"right\",\r\n\t\t\t\t\tvertical:\"center\",\r\n\t\t\t\t\toffsetX:30,\r\n\t\t\t\t\toffsetY:0,\r\n\t\t\t\t\talign:\"slider\"\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tthumbs:{\r\n\t\t\t\tanim:\"fade\",\r\n\t\t\t\tanimSpeed:\"1000ms\",\r\n\t\t\t\tanimDelay:\"1000ms\",\r\n\t\t\t\tset:false,\r\n\t\t\t\trtl:false,\r\n\t\t\t\tstyle:\"2000\",\r\n\t\t\t\tpreset:\"default\",\r\n\t\t\t\tpresets:{},\r\n\t\t\t\talwaysOn:true,\r\n\t\t\t\thideDelay:200,\r\n\t\t\t\thideDelayMobile:1200,\r\n\t\t\t\thideOver:false,\r\n\t\t\t\thideOverLimit:0,\r\n\t\t\t\thideUnder:false,\r\n\t\t\t\thideUnderLimit:778,\r\n\t\t\t\tspanWrapper:false,\r\n\t\t\t\thorizontal:\"center\",\r\n\t\t\t\tvertical:\"bottom\",\r\n\t\t\t\tamount:5,\r\n\t\t\t\tdirection:\"horizontal\",\r\n\t\t\t\theight:50,\r\n\t\t\t\twidth:100,\r\n\t\t\t\twidthMin:100,\r\n\t\t\t\tinnerOuter:\"inner\",\r\n\t\t\t\toffsetX:0,\r\n\t\t\t\toffsetY:20,\r\n\t\t\t\tspace:5,\r\n\t\t\t\talign:\"slider\",\r\n\t\t\t\tpadding:5,\r\n\t\t\t\twrapperColor:\"transparent\",\r\n\t\t\t\tmhoffset:0,\r\n\t\t\t\tmvoffset:0\r\n\t\t\t},\r\n\t\t\ttabs:{\r\n\t\t\t\tanim:\"fade\",\r\n\t\t\t\tanimSpeed:\"1000ms\",\r\n\t\t\t\tanimDelay:\"1000ms\",\r\n\t\t\t\tset:false,\r\n\t\t\t\trtl:false,\r\n\t\t\t\tstyle:\"4000\",\r\n\t\t\t\tpreset:\"default\",\r\n\t\t\t\tpresets:{},\r\n\t\t\t\talwaysOn:true,\r\n\t\t\t\thideDelay:200,\r\n\t\t\t\thideDelayMobile:1200,\r\n\t\t\t\thideOver:false,\r\n\t\t\t\thideOverLimit:0,\r\n\t\t\t\thideUnder:false,\r\n\t\t\t\thideUnderLimit:778,\r\n\t\t\t\tspanWrapper:false,\r\n\t\t\t\thorizontal:\"center\",\r\n\t\t\t\tvertical:\"bottom\",\r\n\t\t\t\tamount:5,\r\n\t\t\t\tdirection:\"horizontal\",\r\n\t\t\t\theight:50,\r\n\t\t\t\twidth:100,\r\n\t\t\t\twidthMin:100,\r\n\t\t\t\tinnerOuter:\"inner\",\r\n\t\t\t\toffsetX:0,\r\n\t\t\t\toffsetY:20,\r\n\t\t\t\tspace:5,\r\n\t\t\t\talign:\"slider\",\r\n\t\t\t\tpadding:5,\r\n\t\t\t\twrapperColor:\"transparent\",\r\n\t\t\t\tmhoffset:0,\r\n\t\t\t\tmvoffset:0\r\n\t\t\t},\r\n\t\t\tbullets:{\r\n\t\t\t\tanim:\"fade\",\r\n\t\t\t\tanimSpeed:\"1000ms\",\r\n\t\t\t\tanimDelay:\"1000ms\",\r\n\t\t\t\tset:false,\r\n\t\t\t\trtl:false,\r\n\t\t\t\tstyle:\"3000\",\r\n\t\t\t\tpreset:\"default\",\r\n\t\t\t\tpresets:{},\r\n\t\t\t\talwaysOn:true,\r\n\t\t\t\thorizontal:\"center\",\r\n\t\t\t\tvertical:\"bottom\",\r\n\t\t\t\tdirection:\"horizontal\",\r\n\t\t\t\toffsetX:0,\r\n\t\t\t\toffsetY:20,\r\n\t\t\t\talign:\"slider\",\r\n\t\t\t\tspace:5,\r\n\t\t\t\t/* alwaysOn:false, */\r\n\t\t\t\thideDelay:200,\r\n\t\t\t\thideDelayMobile:1200,\r\n\t\t\t\thideOver:false,\r\n\t\t\t\thideOverLimit:0,\r\n\t\t\t\thideUnder:false,\r\n\t\t\t\thideUnderLimit:778,\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (newSlider.nav!==undefined) {\r\n\t\t\tif (newSlider.nav.arrows!==undefined && (newSlider.nav.arrows.style==\"\" || newSlider.nav.arrows.style==undefined)) newSlider.nav.arrows.style=\"1000\";\r\n\t\t\tif (newSlider.nav.thumbs!==undefined && (newSlider.nav.thumbs.style==\"\" || newSlider.nav.thumbs.style==undefined)) newSlider.nav.thumbs.style=\"2000\";\r\n\t\t\tif (newSlider.nav.bullets!==undefined && (newSlider.nav.bullets.style==\"\" || newSlider.nav.bullets.style==undefined)) newSlider.nav.bullets.style=\"3000\";\r\n\t\t\tif (newSlider.nav.tabs!==undefined && (newSlider.nav.tabs.style==\"\" || newSlider.nav.tabs.style==undefined)) newSlider.nav.tabs.style=\"4000\";\r\n\t\t}\r\n\r\n\t\t/* TROUBLESHOOTING & FALLBACKS */\r\n\t\tnewSlider.troubleshooting = _d(obj.troubleshooting,{\r\n\t\t\talternateImageType:\"off\",\r\n\t\t\talternateURL:\"\",\r\n\t\t\tjsNoConflict:false,\r\n\t\t\tjsInBody:false,\r\n\t\t\toutPutFilter:\"none\",\r\n\t\t\tsimplify_ie8_ios4:false\r\n\t\t});\r\n\r\n\t\t/* PARALLAX SETTINGS */\r\n\t\tnewSlider.parallax = _d(obj.parallax,{\r\n\t\t\tset:false,\r\n\t\t\tsetDDD:false,\r\n\t\t\tdisableOnMobile:false,\r\n\t\t\tlevels:[5,10,15,20,25,30,35,40,45,46,47,48,49,50,51,30],\r\n\t\t\tddd:{\r\n\t\t\t\tBGFreeze:false,\r\n\t\t\t\tlayerOverflow:false,\r\n\t\t\t\toverflow:false,\r\n\t\t\t\tshadow:false,\r\n\t\t\t\tzCorrection:65\r\n\t\t\t},\r\n\t\t\tmouse:{\r\n\t\t\t\tspeed:0,\r\n\t\t\t\tbgSpeed:0,\r\n\t\t\t\tlayersSpeed:0,\r\n\t\t\t\torigo:\"slidercenter\",\r\n\t\t\t\ttype:\"scroll\"\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\r\n\t\t/* SLIDER AS MODAL */\r\n\t\tnewSlider.modal = _d(obj.modal,{\r\n\t\t\tbodyclass:\"\",\r\n\t\t\thorizontal:\"center\",\r\n\t\t\tvertical:\"middle\",\r\n\t\t\tcover:true,\r\n\t\t\tallowPageScroll:false,\r\n\t\t\tcoverColor:\"rgba(0,0,0,0.5)\",\r\n\t\t\tcoverSpeed:1000\r\n\t\t});\r\n\r\n\t\tif (newSlider.modal!==undefined) newSlider.modal.coverSpeed = newSlider.modal.coverSpeed<10 ? newSlider.modal.coverSpeed*1000 : newSlider.modal.coverSpeed;\r\n\r\n\r\n\t\t/* SCROLLEFFECTS */\r\n\t\tnewSlider.scrolleffects = _d(obj.scrolleffects,{\r\n\t\t\tset:false,\r\n\t\t\tsetBlur:false,\r\n\t\t\tsetFade:false,\r\n\t\t\tsetGrayScale:false,\r\n\t\t\tbg:false,\r\n\t\t\tdirection:\"both\",\r\n\t\t\tlayers:false,\r\n\t\t\tmaxBlur:10,\r\n\t\t\tmultiplicator:\"1.3\",\r\n\t\t\tmultiplicatorLayers:\"1.3\",\r\n\t\t\tdisableOnMobile:false,\r\n\t\t\tparallaxLayers:false,\r\n\t\t\tstaticLayers:false,\r\n\t\t\tstaticParallaxLayers:false,\r\n\t\t\ttilt:30\r\n\t\t});\r\n\r\n\t\t/* SCROLL TIMELINE */\r\n\t\tnewSlider.scrolltimeline = _d(obj.scrolltimeline,{\r\n\t\t\tset:false,\r\n\t\t\tfixed:false,\r\n\t\t\tfixedStart:2000,\r\n\t\t\tfixedEnd:4000,\r\n\t\t\tlayers:false,\r\n\t\t\tease:\"none\",\r\n            speed:500,\r\n            pullcontent:false\r\n        });\r\n\r\n\t\tnewSlider.skins = _d(obj.skins,{colorsAtStart:false});\r\n\r\n\t\t/* Access Permissions */\r\n\r\n\t\tnewSlider.use_access_permissions = _d(obj.use_access_permissions, false);\r\n\t\tnewSlider.allow_groups = {};\r\n\t\tif (obj.allow_groups) {\r\n\t\t\tfor (var i in obj.allow_groups) if (obj.allow_groups.hasOwnProperty(i)) {\r\n\t\t\t\tif (typeof obj.allow_groups[i] == 'number') {\r\n\t\t\t\t\tnewSlider.allow_groups['group' + obj.allow_groups[i]] = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewSlider.allow_groups[i] = obj.allow_groups[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// MIGRATION ISSUES FIX\r\n\t\tnewSlider.source.post.fetchType=newSlider.source.post.fetchType===undefined ? \"cat_tag\" : newSlider.source.post.fetchType;\r\n\t\tnewSlider.source.instagram.hashTag=newSlider.source.instagram.hashTag===undefined ? \"\" : newSlider.source.instagram.hashTag;\r\n\t\tnewSlider.source.instagram.transient=newSlider.source.instagram.transient===undefined ? 1200 : newSlider.source.instagram.transient;\r\n\t\tnewSlider.source.instagram.type=newSlider.source.instagram.type===undefined ? \"\" : newSlider.source.instagram.type;\r\n\t\tnewSlider.source.flickr.transient=newSlider.source.flickr.transient===undefined ? 1200 : newSlider.source.flickr.transient;\r\n\t\tnewSlider.source.vimeo.transient=newSlider.source.vimeo.transient===undefined ? 1200 : newSlider.source.vimeo.transient;\r\n\t\tnewSlider.source.youtube.transient=newSlider.source.youtube.transient===undefined ? 1200 : newSlider.source.youtube.transient;\r\n\t\tnewSlider.def.transition=newSlider.def.transition===undefined ? \"fade\" : newSlider.def.transition;\r\n\t\tnewSlider.def.background.imageSourceType=newSlider.def.background.imageSourceType===undefined ? \"full\" : newSlider.def.background.imageSourceType;\r\n\t\tnewSlider.def.panZoom.blurStart=newSlider.def.panZoom.blurStart===undefined ? 0 : newSlider.def.panZoom.blurStart;\r\n\t\tnewSlider.def.panZoom.blurEnd=newSlider.def.panZoom.blurEnd===undefined ? 0 : newSlider.def.panZoom.blurEnd;\r\n\t\tnewSlider.size.maxWidth=newSlider.size.maxWidth===undefined ? \"\" : newSlider.size.maxWidth;\r\n\t\tnewSlider.carousel.ease=newSlider.carousel.ease===undefined ? \"power3.inOut\" : newSlider.carousel.ease;\r\n\t\tnewSlider.carousel.speed=newSlider.carousel.speed===undefined ? \"800\" : newSlider.carousel.speed;\r\n        if (newSlider.general.firstSlide!==undefined) newSlider.general.firstSlide.alternativeFirstSlideSet=newSlider.general.firstSlide.alternativeFirstSlideSet===undefined ? \"\" : newSlider.general.firstSlide.alternativeFirstSlideSet;\r\n        if (newSlider.nav.preview) newSlider.nav.preview.width=newSlider.nav.preview.width===undefined ? 50 : newSlider.nav.preview.width;\r\n\t\tif (newSlider.nav.preview) newSlider.nav.preview.height=newSlider.nav.preview.height===undefined ? 100 : newSlider.nav.preview.height;\r\n\t\tif (newSlider.nav.mouse) newSlider.nav.mouse.reverse=newSlider.nav.mouse.reverse===undefined ? \"default\" : newSlider.nav.mouse.reverse;\r\n\t\tif (newSlider.nav.arrows.left) newSlider.nav.arrows.left.align=newSlider.nav.arrows.left.align===undefined ? \"slider\" : newSlider.nav.arrows.left.align;\r\n\t\tif (newSlider.nav.arrows.right) newSlider.nav.arrows.right.align=newSlider.nav.arrows.right.align===undefined ? \"slider\" : newSlider.nav.arrows.right.align;\r\n\t\tif (newSlider.nav.bullets) newSlider.nav.bullets.align=newSlider.nav.bullets.align===undefined ? \"slider\" : newSlider.nav.bullets.align;\r\n\t\tnewSlider.parallax.ddd.zCorrection=newSlider.parallax.ddd.zCorrection===undefined ? 65 : newSlider.parallax.ddd.zCorrection;\r\n\t\tnewSlider.parallax.mouse.bgSpeed=newSlider.parallax.mouse.bgSpeed===undefined ? 0 : newSlider.parallax.mouse.bgSpeed;\r\n\t\tnewSlider.parallax.mouse.layersSpeed=newSlider.parallax.mouse.layersSpeed===undefined ? 1000 : newSlider.parallax.mouse.layersSpeed;\r\n\t\tnewSlider.scrolleffects.bg=newSlider.scrolleffects.bg===undefined ? false : newSlider.scrolleffects.bg;\r\n\t\tnewSlider.scrolleffects.direction=newSlider.scrolleffects.direction===undefined ? \"both\" : newSlider.scrolleffects.direction;\r\n\t\tnewSlider.scrolleffects.maxBlur=newSlider.scrolleffects.maxBlur===undefined ? 10 : newSlider.scrolleffects.maxBlur;\r\n\t\tnewSlider.scrolleffects.multiplicator=newSlider.scrolleffects.multiplicator===undefined ? \"1.3\" : newSlider.scrolleffects.multiplicator;\r\n\t\tnewSlider.scrolleffects.multiplicatorLayers=newSlider.scrolleffects.multiplicatorLayers===undefined ? \"1.3\" : newSlider.scrolleffects.multiplicatorLayers;\r\n\r\n\t\tnewSlider.scrolleffects.tilt=newSlider.scrolleffects.tilt===undefined ? \"\" : newSlider.scrolleffects.tilt;\r\n\r\n\t\t//GET RID OF UNDEFINED OBJECTS !\r\n\t\t/*console.log(\"------------  FOUND UNDEFINED VALUES IN SLIDER SETTINGS -------------------\")\r\n\t\tconsole.log(newSlider);\r\n\t\tRVS.F.findUndefineds(newSlider);\r\n\t\tconsole.log(\"---------------------------------------------------------------------------\");*/\r\n\r\n\r\n\r\n\t\t//if (newSlider.nav.arrows.preset===\"custom\") addSessionStartNavigation({obj:newSlider.nav.arrows,type:\"arrows\"});\r\n\r\n\r\n\t\t/*if (newSlider.nav.bullets.preset===\"custom\") newSlider.nav.bullets.presetsBackup = RVS.F.safeExtend({},newSlider.nav.bullets.presets,true);\r\n\t\tif (newSlider.nav.thumbs.preset===\"custom\") newSlider.nav.thumbs.presetsBackup = RVS.F.safeExtend({},newSlider.nav.thumbs.presets,true);\r\n\t\tif (newSlider.nav.tabs.preset===\"custom\") newSlider.nav.tabs.presetsBackup = RVS.F.safeExtend({},newSlider.nav.tabs.presets,true);\r\n\t\t*/\r\n\r\n\r\n\t\treturn newSlider;\r\n\t}\r\n\r\n\r\n\r\n\t/***********************************\r\n\t\t\tINTERNAL FUNCTIONS\r\n\t************************************/\r\n\r\n\r\n\t/*\r\n\tSET VALUE TO A OR B DEPENDING IF VALUE A EXISTS AND NOT UNDEFINED OR NULL\r\n\t*/\r\n\tfunction _d(a,b) {\r\n\t\tif (a===undefined || a===null)\r\n\t\t\treturn b;\r\n\t\telse\r\n\t\t\treturn a;\r\n\t}\r\n\r\n\tfunction _truefalse(v) {\r\n\t\tif (v===\"false\" || v===false || v===\"off\" || v===undefined || v===0 || v===-1)\r\n\t\t\tv=false;\r\n\t\telse\r\n\t\tif (v===\"true\" || v===true || v===\"on\")\r\n\t\t\tv=true;\r\n\t\treturn v;\r\n\t}\r\n\r\n})();\r\n","Nwdthemes_Revslider/admin/assets/js/modules/layer.js":"/*!\r\n * REVOLUTION 6.0.0 EDITOR LAYER JS\r\n * @version: 1.0 (08.03.2019)\r\n * @author ThemePunch\r\n*/\r\n\r\n// GLOBAL PARAMETERS FOR VIDEO AND IMAGE URL\r\n;RVS.S.keyFrame = \"idle\";\r\nRVS.S.frameTrgt = \"layer\";\r\nRVS.V.frameLevels = {levels:[\"mask\",\"chars\",\"words\",\"lines\",\"color\",\"sfx\"]};\r\nRVS.LIB.FONTS = [];\r\nRVS.CACHE = RVS.CACHE || {};\r\nRVS.S.layerPosWaitingToUpdate = {};\r\n\r\n(function() {\r\n\r\n\tvar fontNameCompare,\r\n\t\tfontWeight,\r\n\t\tfontWeightOptions,\r\n\t\tfontWaitToLoad,\r\n\t\tkeyframe_idle_sel,\r\n\t\tkeyframe_lists,\r\n\t\tloadedFonts = [],\r\n\t\tqflolist;\r\n\r\n\t/*\r\n\tINITIALISE THE BASIC LISTENERS, INPUT MANAGEMENTS ETC\r\n\t*/\r\n\tRVS.F.initLayerBuilder = function() {\r\n\t\tRVS.C.slit = document.getElementById(\"selected_layers_icon_toolbar\");\r\n\t\tRVS.ENV.video_ph_url = RVS.ENV.img_ph_url = RVS.ENV.plugin_url+\"admin/assets/images/transparent_placeholder.png\";\r\n\t\tcreateLayerAnimationLists();\r\n\t\tinitLocalInputBoxes();\r\n\t\tinitLocalListeners();\r\n\t};\r\n\r\n\t// UPDATE CUSTOM CSS FOR A LAYER\r\n\tRVS.F.updateCustomCSS = function() {\r\n\t\tif (window.customLayerCss_editor ===\"FAIL\") return;\r\n\t\tif (typeof RevMirror===\"undefined\") {\r\n\t\t\tRVS.F.showWaitAMinute({fadeIn:500,text:RVS_LANG.loadingRevMirror});\r\n\t\t\tRVS.F.loadCSS(RVS.ENV.plugin_url+'/admin/assets/css/RevMirror.min.css');\r\n\t\t\tjQuery.getScript(RVS.ENV.plugin_url+'/admin/assets/js/plugins/RevMirror.min.js',function() {\r\n\t\t\t\tsetTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n\t\t\t\tRVS.F.updateCustomCSS();\r\n\t\t\t}).fail(function(a,b,c) {\r\n                RVS.F.loadCSS(RVS.ENV.plugin_url+'/admin/assets/css/RevMirror.css');\r\n                jQuery.getScript(RVS.ENV.plugin_url+'/admin/assets/js/plugins/RevMirror.js',function() {\r\n                    setTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n                    RVS.F.updateCustomCSS();\r\n                }).fail(function(a,b,c) {\r\n                    setTimeout(function() {RVS.F.showWaitAMinute({fadeOut:500});},100);\r\n                    window.customLayerCss_editor = \"FAIL\";\r\n                });\r\n\t\t\t});\r\n\t\t}  else\r\n\t\tif (window.customLayerCss_editor===undefined) {\r\n\t\t\t// INITIALISE THE CSS EDITOR FOR LAYER IDLE AND HOVER\r\n\t\t\twindow.customLayerCss_editor = RevMirror(document.getElementById('custom_css_layer_area'), {\r\n\t\t\t\tvalue:\"\",\r\n\t\t\t\tmode:\"css\",\r\n\t\t\t\ttheme:\"hopscotch\",\r\n\t\t\t\tlineWrapping:true,\r\n\t\t\t\tlineNumbers:false\r\n\t\t\t});\r\n\t\t\twindow.customLayerCss_editor.on('focus',function() { window.customLayerCss_editor.refresh();});\r\n\t\t\twindow.customLayerCss_editor.on('change',function(cmi,event) {\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].customCSS = window.customLayerCss_editor.getValue();\r\n\t\t\t});\r\n\t\t\tsetTimeout(RVS.F.updateCustomCSS,200);\r\n\t\t} else\r\n\r\n\t\tif (window.customHoverLayerCss_editor===undefined) {\r\n\t\t\t// INITIALISE THE CSS EDITOR FOR LAYER IDLE AND HOVER\r\n\t\t\twindow.customHoverLayerCss_editor = RevMirror(document.getElementById('custom_css_hover_layer_area'), {\r\n\t\t\t\tvalue:\"\",\r\n\t\t\t\tmode:\"css\",\r\n\t\t\t\ttheme:\"hopscotch\",\r\n\t\t\t\tlineWrapping:true,\r\n\t\t\t\tlineNumbers:false\r\n\t\t\t});\r\n\t\t\twindow.customHoverLayerCss_editor.on('focus',function() { window.customHoverLayerCss_editor.refresh();});\r\n\t\t\twindow.customHoverLayerCss_editor.on('change',function(cmi,event) {\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].customHoverCSS = window.customHoverLayerCss_editor.getValue();\r\n\t\t\t});\r\n\t\t\tsetTimeout(RVS.F.updateCustomCSS,200);\r\n\t\t} else {\r\n\t\t\tRVS.F.updateCusCSSContent();\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tRVS.F.updateCusCSSContent = function() {\r\n\r\n\t\tif (RVS.selLayers.length>0 && window.customLayerCss_editor!=undefined) {\r\n\t\t\twindow.customLayerCss_editor.setValue(RVS.L[RVS.selLayers[0]].customCSS);\r\n\t\t\tsetTimeout(function() {window.customLayerCss_editor.refresh();},200);\r\n\t\t}\r\n\t\tif (RVS.selLayers.length>0 && window.customHoverLayerCss_editor!==undefined) {\r\n\t\t\twindow.customHoverLayerCss_editor.setValue(RVS.L[RVS.selLayers[0]].customHoverCSS);\r\n\t\t\tsetTimeout(function() {window.customHoverLayerCss_editor.refresh();},200);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\r\n\tRVS.F.compareGoogleFontName = function(fontname,lower) {\r\n\t\tif (fontname===undefined || fontname===\"\" || fontname.length==0) return;\r\n\t\tfontNameCompare = fontNameCompare===undefined ? {source:[], result:[]} : fontNameCompare;\r\n\t\tvar found = jQuery.inArray(fontname,fontNameCompare.source),\r\n\t\t\ti=0;\r\n\t\tif (found>=0) return fontNameCompare.result[found];\r\n\t\tfound = false;\r\n\t\tfontNameCompare.source.push(fontname);\r\n\t\twhile (i<RVS.LIB.FONTS.length && !found) {\r\n\t\t\tif (fontname===RVS.LIB.FONTS[i].labelLowerCase || fontname===RVS.LIB.FONTS[i].label || (lower && fontname.toLowerCase()===RVS.LIB.FONTS[i].labelLowerCase)) {\r\n\t\t\t\tfontname = RVS.LIB.FONTS[i].label;\r\n\t\t\t\tfound = true;\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tfontNameCompare.result.push(fontname);\r\n\t\treturn fontname;\r\n\t};\r\n\r\n\r\n\t/*\r\n\tINITISALISE THE LOADED GOOGLE FONT DROP DOWN MENU\r\n\t*/\r\n\tRVS.F.initFontTypes = function(jsonClasses) {\r\n\r\n\t\t//return; // KRIKI, REMOVE IT AT THE END\r\n\t\t// set init font family types array\r\n\t\tRVS.LIB.FONTS = JSON.parse(jsonClasses);\r\n\t\tvar lff = jQuery('#layer_fontfamily'),\r\n\t\t\topts = \"\";\r\n\t\tfor (var fontindex in RVS.LIB.FONTS) {\r\n\t\t\tif(!RVS.LIB.FONTS.hasOwnProperty(fontindex)) continue;\r\n\t\t\tif (RVS.LIB.FONTS[fontindex].label!==\"Dont Show Me\" && RVS.LIB.FONTS[fontindex].label!==\"\") {\r\n\t\t\t\topts += '<option value=\"'+(RVS.LIB.FONTS[fontindex].label.split('\"').join(\"'\"))+'\">'+(RVS.LIB.FONTS[fontindex].label.split('\"').join(''))+'</option>';\r\n\t\t\t}\r\n\t\t\tRVS.LIB.FONTS[fontindex].labelLowerCase = RVS.LIB.FONTS[fontindex].label.toLowerCase();\r\n\t\t}\r\n\t\tlff[0].innerHTML = opts;\r\n\t\tlff.ddTP('change');\r\n\r\n\t\tif (qflolist===undefined) {\r\n\t\t\tqflolist = true;\r\n\r\n\r\n\t\t\tRVS.DOC.on('mouseenter','.ddTP_C--fontfamily .ddTP_RO',function() {\r\n\t\t\t\tif (this.dataset.val===undefined) this.dataset.val = this.innerHTML;\r\n\t\t\t\tvar family = this.dataset.val.replace(/\\ /g,'_');\r\n\t\t\t\tfontWaitToLoad = this.dataset.val;\r\n\t\t\t\tif (loadedFonts[family]!==undefined) RVS.F.showTextLayerWithFont({family:fontWaitToLoad});\r\n\t\t\t});\r\n\r\n\t\t\tRVS.DOC.on('mouseleave','.ddTP_C--fontfamily',function() {\r\n\t\t\t\tRVS.F.resetFontFamiliesOnSelectedLayers();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\tCHECK THE CURRENT SELECTED LAYERS FONT WEIGHTS\r\n\t*/\r\n\tRVS.F.checkAvailableFontWeights = function(fontWeightChange) {\r\n\r\n\t\tif (RVS.selLayers.length===0) return;\r\n\r\n\t\tfontWeight = fontWeight===undefined ? jQuery('#layer_fontweight_idle') : fontWeight;\r\n\t\tif (fontWeightOptions === undefined) {\r\n\t\t\tfontWeightOptions = [];\r\n\t\t\tfontWeight.find('option').each(function() {\r\n\t\t\t\tfontWeightOptions.push({option:this, state:true});\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar selectedFonts=[];\r\n\r\n\r\n\r\n\t\t// COLLECT SELECTED FONT FAMILIES\r\n\t\tfor (var sl in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(sl)) continue;\r\n\t\t\tvar i = RVS.selLayers[sl],\r\n\t\t\t\tl = RVS.L[i];\r\n\t\t\tif (l.type===\"text\" || l.type===\"button\")\r\n\t\t\t\tif (jQuery.inArray(l.idle.fontFamily,selectedFonts)==-1) selectedFonts.push({family:l.idle.fontFamily, weights:[]});\r\n\t\t}\r\n\t\tfor (var oind in fontWeightOptions) {\r\n\t\t\tif(!fontWeightOptions.hasOwnProperty(oind)) continue;\r\n\t\t\tfontWeight.find('option[value=\"'+fontWeightOptions[oind].option.value+'\"]').prop('disabled', false);\r\n\t\t\tfontWeightOptions[oind].state = true;\r\n\t\t}\r\n\r\n\r\n\t\t// DISABLE NONE USED FONT WEIGHTS\r\n\t\tfor (var sfi in selectedFonts) {\r\n\t\t\tif(!selectedFonts.hasOwnProperty(sfi)) continue;\r\n\t\t\tvar ffam =selectedFonts[sfi].family;\r\n\t\t\tif (ffam.length>0)\r\n\t\t\t\tfor (var fontindex in RVS.LIB.FONTS) {\r\n\t\t\t\t\tif(!RVS.LIB.FONTS.hasOwnProperty(fontindex)) continue;\r\n\t\t\t\t\tvar font = RVS.LIB.FONTS[fontindex];\r\n\t\t\t\t\tif (font.label === ffam) {\r\n\t\t\t\t\t\tfor (var oind in fontWeightOptions) {\r\n\t\t\t\t\t\t\tif(!fontWeightOptions.hasOwnProperty(oind)) continue;\r\n\t\t\t\t\t\t\tvar v = fontWeightOptions[oind].option.value;\r\n\t\t\t\t\t\t\tif (jQuery.inArray(v,font.variants)>=0 || font.type===\"websafe\") {\r\n\t\t\t\t\t\t\t\tselectedFonts[sfi].weights.push(v);\r\n\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tif (fontWeightOptions[oind].state) {\r\n\t\t\t\t\t\t\t\tfontWeight.find('option[value=\"'+v+'\"]').prop('disabled','disabled');\r\n\t\t\t\t\t\t\t\tfontWeightOptions[oind].state = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tvar changed = false,\r\n\t\t\tbackupNeeded = false;\r\n\r\n\t\t// UPDATE FONT WEIGHTS ON SELECTED LAYERS IF NEEDED\r\n\t\tfor (var sl in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(sl)) continue;\r\n\t\t\tvar i = RVS.selLayers[sl],\r\n\t\t\t\tl = RVS.L[i];\r\n\t\t\tif (l.type===\"text\" || l.type===\"button\") {\r\n\t\t\t\tvar sfIndex = -1;\r\n\t\t\t\tfor (var sfi in selectedFonts) {\r\n\t\t\t\t\tif(!selectedFonts.hasOwnProperty(sfi)) continue;\r\n\t\t\t\t\tif (selectedFonts[sfi].family == l.idle.fontFamily && selectedFonts[sfi].family!==\"\") sfIndex = sfi;\r\n\t\t\t\t}\r\n\t\t\t\tif (sfIndex>=0)\r\n\t\t\t\t\tfor (var ri in RVS.V.sizes) {\r\n\t\t\t\t\t\tif(!RVS.V.sizes.hasOwnProperty(ri)) continue;\r\n\t\t\t\t\t\tvar s = RVS.V.sizes[ri];\r\n\t\t\t\t\t\tif (jQuery.inArray(l.idle.fontWeight[s].v,selectedFonts[sfIndex].weights)==-1) {\r\n\t\t\t\t\t\t\tif (backupNeeded===false && RVS.S.bckpGrp===false) {\r\n\t\t\t\t\t\t\t\tif (RVS.S.bckpGrp===false)\r\n\t\t\t\t\t\t\t\t\tbackupNeeded=\"started\";\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tbackupNeeded=\"inProgress\";\r\n\t\t\t\t\t\t\t\tRVS.F.openBackupGroup({id:\"fontWeight\",txt:\"Font Weight\",icon:\"layers\",lastkey:\"layer\"});\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tchanged = true;\r\n\t\t\t\t\t\t\tvar newval = getPossibleElementBefore({v:l.idle.fontWeight[s].v, a:selectedFonts[sfIndex].weights});\r\n\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+i+'.idle.fontWeight.'+s+\".v\",val:newval});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (backupNeeded===\"started\") RVS.F.closeBackupGroup({id:\"fontWeight\"});\r\n\t\tif (changed) RVS.F.updateEasyInputs({container:jQuery('#form_layerstyle_font'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\r\n\t\tif(!fontWeightChange) {\r\n\t\t\tif(fontWeight.hasClass(\"ddTP-hidden-accessible\")) fontWeight.ddTP('destroy');\r\n\t\t\tfontWeight.ddTP({ placeholder:\"Select\"});\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Get The Highest Value of Array smaller than Selection\r\n\tfunction getPossibleElementBefore(_) {\r\n\t\tvar r = _.a.length>0 ? _.a[0] : _.v;\r\n\t\tfor (var i in _.a) {\r\n\t\t\tif(!_.a.hasOwnProperty(i)) continue;\r\n\t\t\tr = _.a[i]<_.v && r<_.v ? _.a[i] : r;\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\t// GET THE PARENT CONTAINER SIZE\r\n\tfunction getLayerParentContainerSize(_) {\r\n\t\tvar l = RVS.L[_.uid],\r\n\t\t\tc = l.group.puid!=-1 ? RVS.H[l.group.puid].w : RVS.C.layergrid;\r\n\r\n\t\treturn ({width:c.width(), height:c.height()});\r\n\t}\r\n\r\n\r\n\t/*\r\n\tALL SELECTED TEXT SHOULD BE SHOWN WITH CURRENT HOVERED GOOGLE FONT\r\n\t*/\r\n\tRVS.F.showTextLayerWithFont = function(_) {\r\n\t\tfor (var sl in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(sl)) continue;\r\n\t\t\tvar i = RVS.selLayers[sl],\r\n\t\t\t\tl = RVS.L[i],\r\n\t\t\t\tlh = RVS.H[i].c;\r\n\r\n\t\t\tif (l.type===\"text\" || l.type===\"button\")\r\n\t\t\t\tlh.css({fontFamily:\"'\"+_.family+\"'\"});\r\n\t\t}\r\n\t};\r\n\t/*\r\n\tRESET THE LAST SELECTED FONT FAMILIES ON SELECTED LAYERS\r\n\t*/\r\n\tRVS.F.resetFontFamiliesOnSelectedLayers = function() {\r\n\t\tfor (var sl in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(sl)) continue;\r\n\t\t\tvar i = RVS.selLayers[sl],\r\n\t\t\t\tl = RVS.L[i];\r\n\r\n\t\t\tif (l.type===\"text\" || l.type===\"button\")\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:i});\r\n\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.getDashArray = function(a) {\r\n\t\tif (RVS.F.isNumeric(a) || a.indexOf(\",\")===-1 && a.indexOf(\" \")===-1 || a.split(\",\").length===1 || a.split(\" \").length===1)\r\n\t\t\ta = a+\" \"+a;\r\n\t\treturn a;\r\n\t};\r\n\r\n\tRVS.F.drawSlideBasedPercenatages = function() {\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\tif (RVS.S.ulDIMCache==undefined || RVS.S.ulDIM.width!==RVS.S.ulDIMCache.width || RVS.S.ulDIM.height!==RVS.S.ulDIMCache.height) {\r\n\t\t\t\tfor (var li in RVS.L) {\r\n\t\t\t\t\tif(!RVS.L.hasOwnProperty(li) || RVS.L[li].behavior==undefined || RVS.L[li].behavior.baseAlign!==\"slide\" || (\"\"+RVS.L[li].group.puid)!==\"-1\") continue;\r\n\t\t\t\t\tif ((\"\"+RVS.L[li].size.width[RVS.screen].v).indexOf(\"%\")>=0) tpGS.gsap.set(RVS.H[li].w,{width:(RVS.F.CHOR() ?  RVS.S.lgw : Math.max(RVS.S.ulDIM.width- RVS.S.vertCarOff,RVS.S.lgw)) * (parseInt(RVS.L[li].size.width[RVS.screen].v)/100)});\r\n\t\t\t\t\tif ((\"\"+RVS.L[li].size.height[RVS.screen].v).indexOf(\"%\")>=0) tpGS.gsap.set(RVS.H[li].w,{height:Math.max(RVS.S.ulDIM.height,RVS.S.lgh) * (parseInt(RVS.L[li].size.height[RVS.screen].v)/100)});\r\n\t\t\t\t}\r\n\t\t\t\tRVS.S.ulDIMCache = { width:RVS.S.ulDIM.width, height:RVS.S.ulDIM.height};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/*\r\n\tDRAW A HTML LAYER\r\n\t*/\r\n\tRVS.F.drawHTMLLayer = function(_) {\r\n\t\tif (!RVS.S.drawHTMLLayersCalled) return;\r\n\t\tif (RVS.H[_.uid]===undefined) {\r\n\t\t\tif (_.recheck!==true) {\r\n\t\t\t\t_.recheck = true;\r\n\t\t\t\tsetTimeout(function() {RVS.F.drawHTMLLayer(_);},500);\r\n\t\t\t} else return;\r\n\t\t}\r\n\r\n\t\tvar lh = RVS.H[_.uid],\r\n\t\t\tl = RVS.L[_.uid],\r\n\t\t\thfilter;\r\n\r\n\t\tif (lh===undefined) return;\r\n\t\tvar pc = lh.c[0].className.indexOf(\"placeholder_on\")>=0;\r\n\t\t\tmanipulate = l.subtype!==undefined && RVS.F.drawLayerExt!==undefined && RVS.F.drawLayerExt[l.subtype]!==undefined? RVS.F.drawLayerExt[l.subtype](_.uid) : false;\r\n\r\n\t\tlh.c[0].className = \"_lc_content_\"+(pc ? \" placeholder_on\" : \"\")+(manipulate && manipulate.CN!==undefined  ? manipulate.CN : \"\")+(l.idle.style!==undefined ? \" \"+l.idle.style : \"\") + (l.runtime.internalClass!==undefined ? \" \"+l.runtime.internalClass : \"\");\r\n\r\n\t\tvar\ttr = {\r\n\t\t\t\t\ttextAlign:l.idle.textAlign[RVS.screen].v,\r\n\t\t\t\t\tboxSizing:\"border-box\",\r\n\t\t\t\t\ttransformStyle:l.timeline.split ? \"preserve-3d\" : \"flat\",  // Based on if the Layer has splitted element or not\r\n\t\t\t\t\t//transformPerspective:l.idle.transformPerspective,\r\n\t\t\t\t\t//transformOrigin:l.idle.originX+\" \"+l.idle.originY,\r\n\t\t\t\t\tfontFamily:l.idle.fontFamily!==undefined ? l.idle.fontFamily.indexOf(\",\")===-1 ? \"'\"+l.idle.fontFamily+\"'\" : l.idle.fontFamily : 'Roboto',\r\n\t\t\t\t\tfontSize:parseInt(l.idle.fontSize[RVS.screen].v,0)+\"px\",\r\n\t\t\t\t\tlineHeight: /*l.type===\"group\" ? parseInt(l.size.height[RVS.screen].v,0) + \"px\":*/ parseInt(l.idle.lineHeight[RVS.screen].v,0)+\"px\",\r\n\t\t\t\t\tfontWeight: (l.idle.fontWeight[RVS.screen].v===undefined ? 400 : l.idle.fontWeight[RVS.screen].v),\r\n\t\t\t\t\tcolor: window.RSColor.get(l.idle.color[RVS.screen].v),\r\n\t\t\t\t\tletterSpacing:parseFloat(l.idle.letterSpacing[RVS.screen].v)+\"px\",\r\n\t\t\t\t\t/* textAlign:l.idle.textAlign[RVS.screen].v, */\r\n\t\t\t\t\tfontStyle:(l.idle.fontStyle===\"normal\" || l.idle.fontStyle===false ? \"normal\" : \"italic\"),\r\n\t\t\t\t\ttextDecoration:l.type===\"row\" || l.type===\"column\" || l.type===\"group\" ? \"none\" : l.idle.textDecoration,\r\n\t\t\t\t\ttextTransform:l.idle.textTransform,\r\n\t\t\t\t\tborderColor:l.type===\"column\" ? \"transparent\" : window.RSColor.get(l.idle.borderColor),\r\n\t\t\t\t\tborderRadius:l.idle.borderRadius.v[0]+\" \"+l.idle.borderRadius.v[1]+\" \"+l.idle.borderRadius.v[2]+\" \"+l.idle.borderRadius.v[3]+\" \",\r\n\t\t\t\t\tborderWidth:l.idle.borderWidth[0]+\" \"+l.idle.borderWidth[1]+\" \"+l.idle.borderWidth[2]+\" \"+l.idle.borderWidth[3]+\" \",\r\n\t\t\t\t\tborderStyle:l.idle.borderStyle[RVS.screen].v,\r\n\t\t\t\t\twidth:l.size.width[RVS.screen].v,\r\n\t\t\t\t\theight:l.size.height[RVS.screen].v,\r\n\t\t\t\t\twhiteSpace:(l.idle.whiteSpace[RVS.screen].v==\"normal\" || l.idle.whiteSpace[RVS.screen].v==\"full\") ? \"normal\" : \"nowrap\",\r\n\r\n\t\t\t\t\tpaddingTop:l.idle.padding[RVS.screen].v[0],\r\n\t\t\t\t\tpaddingRight:l.idle.padding[RVS.screen].v[1],\r\n\t\t\t\t\tpaddingBottom:l.idle.padding[RVS.screen].v[2],\r\n\t\t\t\t\tpaddingLeft:l.idle.padding[RVS.screen].v[3],\r\n\r\n\r\n\t\t\t\t\tminWidth:l.size.minWidth[RVS.screen].v===\"none\" ? 0 : l.size.minWidth[RVS.screen].v,\r\n\t\t\t\t\tminHeight:l.size.minHeight[RVS.screen].v===\"none\" ? 0 : l.size.minHeight[RVS.screen].v,\r\n\t\t\t\t\tmaxWidth:l.size.maxWidth[RVS.screen].v,\r\n\t\t\t\t\tmaxHeight:l.size.maxHeight[RVS.screen].v,\r\n\t\t\t\t\tboxShadow:(l.idle.boxShadow.inuse ? l.idle.boxShadow.color+\" \"+l.idle.boxShadow.hoffset[RVS.screen].v+\" \"+l.idle.boxShadow.voffset[RVS.screen].v+\" \"+l.idle.boxShadow.blur[RVS.screen].v+\" \"+l.idle.boxShadow.spread[RVS.screen].v+\" \" : \"none\"),\r\n\r\n\t\t\t\t\t/*maxWidth:\"100%\",\r\n\t\t\t\t\tmaxHeight:\"100%\"*/\r\n\t\t\t\t},\r\n\t\t\t  htr = {\r\n\t\t\t  \t\trotationX:l.hover.rotationX,\r\n\t\t\t\t\trotationY:l.hover.rotationY,\r\n\t\t\t\t\trotationZ:l.hover.rotationZ,\r\n\t\t\t\t\tautoAlpha:l.hover.opacity,\r\n\t\t\t\t\ttransformPerspective:RVS.SLIDER.settings.general.perspective, //l.hover.transformPerspective,\r\n\t\t\t\t\ttransformOrigin:l.hover.originX+\" \"+l.hover.originY+\" \"+l.hover.originZ,\r\n\t\t\t\t\tskewX:l.hover.skewX,\r\n\t\t\t\t\tskewY:l.hover.skewY,\r\n\t\t\t\t\tscaleX:l.hover.scaleX,\r\n\t\t\t\t\tscaleY:l.hover.scaleY,\r\n\t\t\t\t\tborderColor:window.RSColor.get(manipulate && manipulate.hoverBorderColor!==undefined ? manipulate.hoverBorderColor : l.hover.borderColor),\r\n\t\t\t\t\tborderTopLeftRadius : l.hover.borderRadius.v[0],\r\n\t\t\t\t\tborderTopRightRadius : l.hover.borderRadius.v[1],\r\n\t\t\t\t\tborderBottomRightRadius : l.hover.borderRadius.v[2],\r\n\t\t\t\t\tborderBottomLeftRadius : l.hover.borderRadius.v[3],\r\n\t\t\t\t\tborderTopWidth:l.hover.borderWidth[0],\r\n\t\t\t\t\tborderRightWidth:l.hover.borderWidth[1],\r\n\t\t\t\t\tborderBottomWidth:l.hover.borderWidth[2],\r\n\t\t\t\t\tborderLeftWidth:l.hover.borderWidth[3],\r\n\t\t\t\t\tborderStyle:l.hover.borderStyle,\r\n\t\t\t\t\tcolor: window.RSColor.get(manipulate && manipulate.hoverColor!==undefined ? manipulate.hoverColor : l.hover.color),\r\n\t\t\t\t\ttextDecoration:l.hover.textDecoration\r\n\t\t\t  },\r\n\t\t\tw_tr = l.type===\"row\"  ?\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmarginTop:l.idle.margin[RVS.screen].v[0],\r\n\t\t\t\t\t\tpaddingRight:l.idle.margin[RVS.screen].v[1],\r\n\t\t\t\t\t\tmarginBottom:l.idle.margin[RVS.screen].v[2],\r\n\t\t\t\t\t\tpaddingLeft:l.idle.margin[RVS.screen].v[3]\r\n\t\t\t\t\t} :  l.type===\"column\" ?\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpaddingTop:l.idle.margin[RVS.screen].v[0],\r\n\t\t\t\t\t\tpaddingRight:l.idle.margin[RVS.screen].v[1],\r\n\t\t\t\t\t\tpaddingBottom:l.idle.margin[RVS.screen].v[2],\r\n\t\t\t\t\t\tpaddingLeft:l.idle.margin[RVS.screen].v[3]\r\n\t\t\t\t\t}:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmarginTop:l.idle.margin[RVS.screen].v[0],\r\n\t\t\t\t\t\tmarginRight:l.idle.margin[RVS.screen].v[1],\r\n\t\t\t\t\t\tmarginBottom:l.idle.margin[RVS.screen].v[2],\r\n\t\t\t\t\t\tmarginLeft:l.idle.margin[RVS.screen].v[3]\r\n\t\t\t\t\t},\r\n\r\n\t\t\t//GET THE REAL COLOR VALUES\r\n\t\t\tbgcolor = window.RSColor.get(l.idle.backgroundColor),\r\n\t\t\thbgcolor = window.RSColor.get(manipulate && manipulate.hoverBG!==undefined ? manipulate.hoverBG : l.hover.backgroundColor),\r\n\r\n\t\t\t/* SET THE BACKGROUND IMAGE FOR THE LAYER */\r\n\t\t\ttemp_bgimage = l.type===\"video\" ? l.media.posterUrl : l.idle.backgroundImage,\r\n\r\n\t\t\t//BG TRANSFORM FOR COLUMNS AND ROWS\r\n\t\t\tbg_tr = {},\r\n\t\t\tbg_htr = {};\r\n\r\n\r\n\r\n\r\n\t\tif (l.visibility[RVS.screen]===false)\r\n\t\t\tw_tr.opacity = 0.25;\r\n\t\telse\r\n\t\t\tw_tr.opacity = 1;\r\n\r\n\t\tif (l.idle.textShadow.inuse)\r\n\t\t\ttr.textShadow = l.idle.textShadow.hoffset[RVS.screen].v+\" \"+l.idle.textShadow.voffset[RVS.screen].v+\" \"+l.idle.textShadow.blur[RVS.screen].v+\" \"+l.idle.textShadow.color;\r\n\t\telse\r\n\t\t\ttr[\"text-shadow\"] = \"none\";\r\n\r\n\t\tif (l.idle.textStroke.inuse)\r\n\t\t\ttr['-webkit-text-stroke'] = parseInt(l.idle.textStroke.width[RVS.screen].v,0)+\"px\"+\" \"+l.idle.textStroke.color;\r\n\t\telse\r\n\t\t\ttr[\"-webkit-text-stroke\"] = \"0 transparent\";\r\n\r\n\r\n\t\tif (l.type==\"column\") {\r\n\t\t\tbg_tr.borderColor = window.RSColor.get(l.idle.borderColor);\r\n\t\t\tbg_tr.borderWidth = l.idle.borderWidth[0]+\" \"+l.idle.borderWidth[1]+\" \"+l.idle.borderWidth[2]+\" \"+l.idle.borderWidth[3]+\" \";\r\n\t\t\tbg_tr.borderStyle = l.idle.borderStyle[RVS.screen].v;\r\n\t\t}\r\n\r\n\t\t// IDLE BG COLOR CHECK\r\n\t\tif (temp_bgimage!==undefined && temp_bgimage.length>4 && bgcolor.indexOf(\"gradient\")==-1) {\r\n\t\t\tif (l.type===\"column\" || l.type===\"row\") {\r\n\t\t\t\tbg_tr.backgroundImage = 'url(\"'+temp_bgimage+'\")';\r\n\t\t\t\tbg_tr.backgroundPosition = l.idle.backgroundPosition;\r\n\t\t\t\tbg_tr[\"background-size\"] = l.idle.backgroundSize===\"percentage\" ? l.idle.backgroundSizePerc+\"%\" : l.idle.backgroundSize===\"pixel\" ? l.idle.backgroundSizePix+\"px\" : l.idle.backgroundSize;\r\n\t\t\t\tbg_tr.backgroundRepeat = l.idle.backgroundRepeat;\r\n\t\t\t} else {\r\n\t\t\t\ttr.backgroundImage ='url(\"'+temp_bgimage+'\")';\r\n\t\t\t\ttr.backgroundPosition = l.idle.backgroundPosition;\r\n\t\t\t\ttr[\"background-size\"] = l.idle.backgroundSize===\"percentage\" ? l.idle.backgroundSizePerc+\"%\" : l.idle.backgroundSize===\"pixel\" ? l.idle.backgroundSizePix+\"px\" : l.idle.backgroundSize;\r\n\t\t\t\ttr.backgroundRepeat = l.idle.backgroundRepeat;\r\n\t\t\t\tif (bgcolor!==\"transparent\") tr.backgroundColor = bgcolor;\r\n\t\t\t\tif (hbgcolor!==\"transparent\") htr.backgroundColor = hbgcolor;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (l.type===\"column\" || l.type===\"row\") { bg_tr.backgroundImage = \"\";\t bg_tr.transformStyle=\"preserve-3d\"; } else tr.background = bgcolor;\r\n\t\t\tif (hbgcolor.indexOf(\"gradient\")==-1) htr.backgroundColor = hbgcolor; else htr.background = hbgcolor;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tif (l.type===\"column\" || l.type===\"row\") {\r\n\t\t\tbg_tr.left = l.type===\"column\" ? 0 : l.idle.margin[RVS.screen].v[3];\r\n\t\t\tbg_tr.right = l.type===\"column\" ? 0 : l.idle.margin[RVS.screen].v[1];\r\n\t\t\tbg_tr.top = 0;\r\n\t\t\tbg_tr.bottom = 0;\r\n\t\t\tbg_tr.borderRadius = l.idle.borderRadius.v[0]+\" \"+l.idle.borderRadius.v[1]+\" \"+l.idle.borderRadius.v[2]+\" \"+l.idle.borderRadius.v[3]+\" \";\r\n\t\t\ttpGS.gsap.set(lh.bg,bg_tr);\r\n\t\t\tif (l.type===\"column\") tpGS.gsap.set(lh.bgmask,{top:l.idle.margin[RVS.screen].v[0],bottom:l.idle.margin[RVS.screen].v[2],left:l.idle.margin[RVS.screen].v[3],right:l.idle.margin[RVS.screen].v[1] })\r\n\r\n\t\t\tvar bws = [parseInt(l.idle.borderWidth[0]),parseInt(l.idle.borderWidth[1]),parseInt(l.idle.borderWidth[2]),parseInt(l.idle.borderWidth[3])];\r\n\r\n\t\t\t// DRAW MARGINS\r\n\t\t\ttpGS.gsap.set(lh.margins.top,{height:l.idle.margin[RVS.screen].v[0], top:(l.type===\"row\" ? (0-l.idle.margin[RVS.screen].v[0]) : \"0\"), paddingRight:l.idle.margin[RVS.screen].v[1],paddingLeft:l.idle.margin[RVS.screen].v[3]});\r\n\t\t\ttpGS.gsap.set(lh.margins.bottom,{height:l.idle.margin[RVS.screen].v[2], bottom:(l.type===\"row\" ? (0-l.idle.margin[RVS.screen].v[2]) : \"0\"), paddingRight:l.idle.margin[RVS.screen].v[1],paddingLeft:l.idle.margin[RVS.screen].v[3]});\r\n\t\t\ttpGS.gsap.set(lh.margins.left,{width:l.idle.margin[RVS.screen].v[3], lineHeight:l.idle.margin[RVS.screen].v[0]});\r\n\t\t\ttpGS.gsap.set(lh.margins.right,{width:l.idle.margin[RVS.screen].v[1]});\r\n\r\n\t\t\t// DRAW PADDINGS\r\n\t\t\ttpGS.gsap.set(lh.paddings.top,{height:l.idle.padding[RVS.screen].v[0]+bws[0], top:l.type===\"row\" ? 0 : l.idle.margin[RVS.screen].v[0], paddingRight:(l.idle.padding[RVS.screen].v[1] + l.idle.margin[RVS.screen].v[1] + bws[1]) ,paddingLeft:(l.idle.padding[RVS.screen].v[3]+l.idle.margin[RVS.screen].v[3] +bws[3])});\r\n\t\t\ttpGS.gsap.set(lh.paddings.bottom,{height:l.idle.padding[RVS.screen].v[2]+bws[2], bottom:l.type===\"row\" ? 0 : l.idle.margin[RVS.screen].v[2], paddingRight:(l.idle.padding[RVS.screen].v[1] + l.idle.margin[RVS.screen].v[1] + bws[1]) ,paddingLeft:(l.idle.padding[RVS.screen].v[3]+l.idle.margin[RVS.screen].v[3] +bws[3])});\r\n\t\t\ttpGS.gsap.set(lh.paddings.left,{left:l.idle.margin[RVS.screen].v[3], width:l.idle.padding[RVS.screen].v[3]+bws[3], paddingTop:l.type===\"row\" ? 0 : l.idle.margin[RVS.screen].v[0], paddingBottom:l.type===\"row\" ? 0 : l.idle.margin[RVS.screen].v[2]});\r\n\t\t\ttpGS.gsap.set(lh.paddings.right,{right:l.idle.margin[RVS.screen].v[1], width:l.idle.padding[RVS.screen].v[1]+bws[1], paddingTop:l.type===\"row\" ? 0 : l.idle.margin[RVS.screen].v[0], paddingBottom:l.type===\"row\" ? 0 : l.idle.margin[RVS.screen].v[2]});\r\n\r\n\t\t\tif (l.type===\"column\") {\r\n\t\t\t\t// DRAW BORDERS\r\n\t\t\t\ttpGS.gsap.set(lh.borders.top,{top:l.idle.margin[RVS.screen].v[0],left:l.idle.margin[RVS.screen].v[3], right:l.idle.margin[RVS.screen].v[1], width:\"auto\"});\r\n\t\t\t\ttpGS.gsap.set(lh.borders.right,{right:l.idle.margin[RVS.screen].v[1],top:l.idle.margin[RVS.screen].v[0],bottom:l.idle.margin[RVS.screen].v[2], height:\"auto\"});\r\n\t\t\t\ttpGS.gsap.set(lh.borders.bottom,{bottom:l.idle.margin[RVS.screen].v[2],left:l.idle.margin[RVS.screen].v[3], right:l.idle.margin[RVS.screen].v[1], width:\"auto\"});\r\n\t\t\t\ttpGS.gsap.set(lh.borders.left,{left:l.idle.margin[RVS.screen].v[3],top:l.idle.margin[RVS.screen].v[0],bottom:l.idle.margin[RVS.screen].v[2], height:\"auto\"});\r\n\r\n\t\t\t} else {\r\n\t\t\t\ttpGS.gsap.set([lh.borders.bottom,lh.borders.top],{left:l.idle.margin[RVS.screen].v[3], right:l.idle.margin[RVS.screen].v[1], width:\"auto\"});\r\n\t\t\t\ttpGS.gsap.set(lh.borders.right,{right:l.idle.margin[RVS.screen].v[1]});\r\n\t\t\t\ttpGS.gsap.set(lh.borders.left,{left:l.idle.margin[RVS.screen].v[3]});\r\n\t\t\t}\r\n\t\t} else\r\n\t\tif (l.type===\"video\") {\r\n\t\t\tlh.vtitle.textContent = l.media.mediaType;\r\n\t\t\tlh.volay.style.backgroundImage = RVS._R.createOverlay(\"slide\",l.media.dotted,l.media.dottedSize,{0:l.media.dottedColorA,1:l.media.dottedColorB});\r\n\t\t\t//lh.volay.className=\"_lc_video_overlay \"+l.media.dotted;\r\n\t\t} else\r\n\t\tif (l.type===\"audio\") {\r\n\t\t\tif (l.media.controls===false) {\r\n\t\t\t\tlh.c[0].classList.add(\"placeholder_on\");\r\n\t\t\t\tlh.c[0].classList.remove(\"audio_controls_on\");\r\n\t\t\t} else {\r\n\t\t\t\tlh.c[0].classList.add(\"audio_controls_on\");\r\n\t\t\t\tlh.c[0].classList.remove(\"placeholder_on\");\r\n\t\t\t}\r\n\t\t} else\r\n\t\tif (l.type===\"shape\") lh.c[0].classList[l.idle.bgFromStream ? \"add\" : \"remove\"](\"placeholder_on\");\r\n\r\n\r\n\t\tw_tr.verticalAlign = \"inherit\";\r\n\r\n\t\t//DISPLAY AND VERTICAL ALIGN FOR COLUMNS\r\n\t\tif (l.type===\"column\" || l.type===\"group\") {\r\n\t\t\tw_tr.verticalAlign = l.idle.verticalAlign;\r\n\t\t\ttr.verticalAlign = l.idle.verticalAlign;\r\n\t\t}\r\n\r\n\t\t// DISPLAY (BLOCK, INLINE BOCK) FOR LAYERS IN COLUMNS\r\n\t\tlet inGroupOrColumn = l.group.puid!=-1 && (RVS.L[l.group.puid].type===\"column\" || RVS.L[l.group.puid].type===\"group\");\r\n\t\tif (inGroupOrColumn) {\r\n\t\t\tw_tr.display = tr.display = l.idle.display;\r\n\t\t\tw_tr.float = l.idle.float[RVS.screen].v;\r\n\t\t\tw_tr.clear = l.idle.clear[RVS.screen].v;\r\n\t\t}\r\n\t\telse if (l.type!==\"row\" && l.type!==\"column\") {\r\n\t\t\ttr.display = \"block\";\r\n\t\t\tw_tr.clear = \"none\";\r\n\t\t}\r\n\r\n\r\n\t\t// ADD LAYER FILTER\r\n\t\tif (l.hover.filter.blur!==undefined) {\r\n\t\t\thfilter = 'blur('+parseInt(l.hover.filter.blur,0)+'px)';\r\n\t\t\thtr['-webkit-filter'] = htr['-webkit-filter']===undefined ? hfilter : htr['-webkit-filter']+' '+hfilter;\r\n\t\t\thtr.filter = htr.filter===undefined ? hfilter: htr.filter+' '+hfilter;\r\n\t\t}\r\n\r\n\t\tif (l.hover.filter.grayscale!==undefined) {\r\n\t\t\thfilter = 'grayscale('+parseInt(l.hover.filter.grayscale,0)+'%)';\r\n\t\t\thtr['-webkit-filter'] = htr['-webkit-filter']===undefined ? hfilter : htr['-webkit-filter']+' '+hfilter;\r\n\t\t\thtr.filter = htr.filter===undefined ? hfilter: htr.filter+' '+hfilter;\r\n\r\n\t\t}\r\n\r\n\t\tif (l.hover.filter.brightness!==undefined) {\r\n\t\t\thfilter = 'brightness('+parseInt(l.hover.filter.brightness,0)+'%)';\r\n\t\t\thtr['-webkit-filter'] = htr['-webkit-filter']===undefined ? hfilter : htr['-webkit-filter']+' '+hfilter;\r\n\t\t\thtr.filter = htr.filter===undefined ? hfilter: htr.filter+' '+hfilter;\r\n\t\t}\r\n\t\tif (htr.filter===\"blur(0px) grayscale(0%) brightness(100%)\") {\r\n\t\t\thtr.filter=\"\";\r\n\t\t\thtr['-webkit-filter']=\"\";\r\n\t\t}\r\n\t\tl.timeline.hoverFilterUsed = htr.filter!==undefined && htr.filter!==\"\";\r\n\r\n\t\t//SET UP WIDTH AND HEIGHT OF LAYERS\r\n\t\tlh.w_width = tr.width = l.size.width[RVS.screen].v==\"auto\" ? \"auto\" : RVS.F.smartConvertDivs(l.size.width[RVS.screen].v);\r\n\t\tlh.w_height = tr.height = l.size.height[RVS.screen].v==\"auto\" ? \"auto\" : RVS.F.smartConvertDivs(l.size.height[RVS.screen].v);\r\n\r\n\t\tif (l.type===\"image\") tr.overflow=\"hidden\";\r\n\r\n\t\t// var exp = eval(l.group.columnSize);\r\n\t\tvar exp = RVS.F.convertFraction(l.group.columnSize);\r\n\r\n\t\t//COLUMN DIMENSION MUST BE HANDLED DIFFERENT\r\n\t\tif (l.size.covermode==\"fullinset\" && inGroupOrColumn && l.position.position==\"absolute\" && l.size.width[RVS.screen].v==\"100%\") {\r\n\t\t\tw_tr.marginLeft = \"0px\";\r\n\t\t\tw_tr.marginRight = \"0px\";\r\n\t\t\tw_tr.width = \"auto\";\r\n\t\t} else\r\n\t\tw_tr.width = l.type==\"column\" ?  (100*exp)+\"%\" :  l.behavior.baseAlign===\"slide\" && (\"\"+l.group.puid)==\"-1\" && (\"\"+lh.w_width).indexOf(\"%\")>=0 ? ((RVS.F.CHOR() ?  RVS.S.lgw : Math.max(RVS.S.ulDIM.width- RVS.S.vertCarOff,RVS.S.lgw))) * (parseInt(lh.w_width)/100): lh.w_width;\r\n\t\tif (l.size.covermode==\"fullinset\" && inGroupOrColumn && l.position.position==\"absolute\" && l.size.height[RVS.screen].v==\"100%\") {\r\n\t\t\tw_tr.marginTop = \"0px\";\r\n\t\t\tw_tr.marginBottom = \"0px\";\r\n\t\t\tw_tr.height = \"auto\";\r\n\t\t} else\r\n\t\tw_tr.height = l.type==\"column\" || l.type==\"row\" ? \"auto\" : l.behavior.baseAlign===\"slide\" && (\"\"+lh.w_height).indexOf(\"%\")>=0 ? Math.max(RVS.S.ulDIM.height,RVS.S.lgh) * (parseInt(lh.w_height)/100): lh.w_height;\r\n\t\tw_tr.maxWidth = l.type==\"column\" ? \"0px\" : w_tr.maxWidth===undefined ? \"none\" : w_tr.maxWidth;\r\n\t\ttr.width = l.type==\"column\"  || l.type==\"row\" ? \"100%\" : tr.width;\r\n\t\ttr.height = l.type==\"column\" || l.type==\"row\"  ? \"auto\" : tr.height;\r\n\r\n\t\t// NEW COVER MODE IF LAYER ALIGNED TO STAGE AND NOT TO CONTENT\r\n\t\tvar slideBased_tw_wtr = l.behavior.baseAlign===\"slide\" ? RVS.F.updateCoveredLayer(l.uid) : undefined;\r\n\r\n\t\t// COLUMN SPECIALS\r\n\t\tif (l.type===\"column\") {\r\n\t\t\ttr.whiteSpace = \"normal\";\r\n\t\t\tvar pbreakat = RVS.L[l.group.puid].group.columnbreakat;\r\n\t\t\tif ((pbreakat===\"notebook\" && (RVS.screen===\"n\" || RVS.screen===\"t\" || RVS.screen===\"m\")) ||\r\n\t\t\t\t(pbreakat===\"tablet\" && (RVS.screen===\"t\" || RVS.screen===\"m\")) ||\r\n\t\t\t\t(pbreakat===\"mobile\" && RVS.screen===\"m\")) {\r\n\t\t\t\tw_tr.display = \"block\";\r\n\t\t\t\ttr.width = \"100%\";\r\n\t\t\t\tw_tr.width = \"100%\";\r\n\t\t\t\tw_tr.maxWidth = \"none\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tw_tr.display = \"table-cell\";\r\n\t\t} else\r\n\r\n\t\t// ROW SPECIALS\r\n\t\tif (l.type===\"row\") {\r\n\t\t\tw_tr.width=\"100%\";\r\n\t\t\tvar pbreakat = l.group.columnbreakat;\r\n\t\t\tif ((pbreakat===\"notebook\" && (RVS.screen===\"n\" || RVS.screen===\"t\" || RVS.screen===\"m\")) ||\r\n\t\t\t\t(pbreakat===\"tablet\" && (RVS.screen===\"t\" || RVS.screen===\"m\")) ||\r\n\t\t\t\t(pbreakat===\"mobile\" && RVS.screen===\"m\"))\r\n\t\t\t\ttr.display = \"block\";\r\n\t\t\telse\r\n\t\t\t\ttr.display = \"table\";\r\n\t\t} else\r\n\r\n\t\tif (l.type===\"image\" && l.size.covermode!==\"custom\") {\r\n\t\t\tvar newDims = RVS.F.getProportionalSizes({\tproportional:l.size.scaleProportional,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype:l.size.covermode,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\timage:{width: l.size.originalWidth, height: l.size.originalHeight},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewPort:{\twidth: slideBased_tw_wtr !== undefined && slideBased_tw_wtr!==false && slideBased_tw_wtr.width!==undefined ? RVS.S.ulDIM.width : RVS.F.GW(RVS.screen), height: slideBased_tw_wtr !== undefined && slideBased_tw_wtr!==false && slideBased_tw_wtr.height!==undefined ? RVS.S.ulDIM.height : RVS.SLIDER.settings.size.height[RVS.screen]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\tw_tr.width = tr.width = newDims.width;\r\n\t\t\tw_tr.height = tr.height = newDims.height;\r\n\t\t} else\r\n\r\n\t\tif (l.type===\"video\" && l.size.height[RVS.screen].v===\"auto\") {\t\t\t// VIDEOS IN COLUMN NEED TO BE RESIZED\r\n\t\t\tvar prop = l.media.ratio.split(\":\");\r\n\t\t\tprop = prop[1] / prop[0];\r\n\t\t\tw_tr.height = tr.height = lh.w.width() * prop;\r\n\t\t} else\r\n\r\n\t\tif (l.type===\"shape\") { //SHAPE LINEHEIGHT EQ. TO HEIGHT !\r\n\t\t\tw_tr.lineHeight = RVS.F.isVaOrPx(tr.height) ? parseInt(tr.height,0)+\"px\" : \"auto\";\r\n\t\t} else\r\n\r\n\t\t//SVG SIZING\r\n\t\tif (l.type===\"svg\" && lh.svg) {\r\n\t\t\t//var svgsettings =\r\n\r\n\t\t\ttpGS.gsap.set(lh.svg,(l.idle.svg.originalColor!==true ?\r\n\t\t\t\t{\r\n\t\t\t\t\twidth:\"100%\",\r\n\t\t\t\t\theight:\"100%\",\r\n\t\t\t\t\tfill:window.RSColor.get(l.idle.svg.color[RVS.screen].v),\r\n\t\t\t\t\tstroke:window.RSColor.get(l.idle.svg.strokeColor),\r\n\t\t\t\t\t\"stroke-width\":l.idle.svg.strokeWidth,\r\n\t\t\t\t\t\"stroke-dasharray\":RVS.F.getDashArray(l.idle.svg.strokeDashArray),\r\n\t\t\t\t\t\"stroke-dashoffset\":(l.idle.svg.strokeDashOffset===undefined ? 0 : l.idle.svg.strokeDashOffset)\r\n\t\t\t\t} : {width:\"100%\", height:\"100%\", clearProps:\"fill,stroke,stroke-width,stroke-dasharray,stroke-dashoffset\"})\r\n\t\t\t);\r\n\t\t\tif (l.idle.svg.originalColor!==true)\r\n\t\t\t\ttpGS.gsap.set(lh.svgPath,{ fill:window.RSColor.get(l.idle.svg.color[RVS.screen].v)});\r\n\t\t\telse\r\n\t\t\t\ttpGS.gsap.set(lh.svgPath,{ clearProps:\"fill\"});\r\n\t\t}\r\n\r\n\t\t// NEW COVER MODE IF LAYER ALIGNED TO STAGE AND NOT TO CONTENT\r\n\t\tif (l.behavior.baseAlign===\"slide\") {\r\n\t\t\tlh.w_width = w_tr.width = slideBased_tw_wtr!==false && slideBased_tw_wtr.width!==undefined ? slideBased_tw_wtr.width : w_tr.width;\r\n\t\t\tlh.w_height = w_tr.height = slideBased_tw_wtr!==false && slideBased_tw_wtr.height!==undefined ? slideBased_tw_wtr.height : w_tr.height;\r\n\t\t}\r\n\r\n\t\t//IF WIDTH or HEIGHT is % WE NEED TO SET INNER AND OUTER WRAPPER DIFFERENTLY\r\n\t\tif (!RVS.F.isNumeric(tr.width) && tr.width.indexOf(\"%\")>=0) tr.width = \"100%\";\r\n\t\tif (!RVS.F.isNumeric(tr.height) && tr.height.indexOf(\"%\")>=0) tr.height = \"100%\";\r\n\r\n\t\t// % BASED GROUP HEIGHT\r\n\t\tif (l.type===\"group\") if (tr.height===\"100%\") tpGS.gsap.set([lh.m,lh.iw,lh.lp],{height:\"100%\"}); else {\r\n\t\t\ttpGS.gsap.set(lh.iw,{height:\"auto\"});\r\n\t\t\ttpGS.gsap.set([lh.m,lh.lp],{height:\"100%\"}); // If not set to 100% the new Relative Position breaks the height. If set to Auto, margin of Inside elements creats Gaps !\r\n\t\t}\r\n\r\n\t\tw_tr.onComplete = function() {RVS.DOC.trigger('layerDrawn',{layerid:_.uid})};\r\n\r\n\t\tif (l.hover.usehover=='true' || l.hover.usehover==true || l.hover.usehover==\"desktop\") {\r\n\t\t\tvar iG = tr.background!==undefined && typeof tr.background === 'string' && tr.background.search('gradient') !== -1,\r\n\t\t\t\thG = htr.background!==undefined && typeof htr.background === 'string' && htr.background.search('gradient') !== -1,\r\n\t\t\t\tcGRs;\r\n\r\n\t\t\tif(iG && hG) {\r\n\t\t\t\tif (RVS.F.gradDegree(tr.background)!==180 && RVS.F.gradDegree(htr.background) == 180) htr.background = RVS.F.addGradDegree(htr.background,180);\r\n\t\t\t\t cGRs = tpGS.getSSGColors(tr.background,htr.background,l.hover.gradientStyle);\r\n\t\t\t\t tr.background = cGRs.from;\r\n\t\t\t\t htr.background = cGRs.to;\r\n\t\t\t}\r\n\t\t\telse if (tr.background!==undefined && !iG && hG) {\r\n\t\t\t\tcGRs = tpGS.getSSGColors(tr.background,htr.background,l.hover.gradientStyle)\r\n\t\t\t\ttr.background = cGRs.from;\r\n\t\t\t\thtr.background = cGRs.to;\r\n\t\t\t} else if (iG && !hG && htr.backgroundColor!==undefined) {\r\n\t\t\t\tcGRs = tpGS.getSSGColors(tr.background,htr.backgroundColor,l.hover.gradientStyle);\r\n\t\t\t\ttr.background = cGRs.from;\r\n\t\t\t\thtr.background = cGRs.to;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (l.type===\"column\") {\r\n\t\t\tdelete tr.backgroundColor;\r\n\t\t\tdelete tr.background;\r\n\t\t}\r\n\r\n\r\n\t\t// ONLY UPDATE IF NECESSARY\r\n\t\t/*RVS.CACHE[RVS.S.slideId] = RVS.CACHE[RVS.S.slideId] || {};\r\n\t\tRVS.CACHE[RVS.S.slideId][_.uid] = RVS.CACHE[RVS.S.slideId][_.uid] || {};\r\n\t\tlet C_wtr = JSON.stringify(w_tr),\r\n\t\t\tC_tr = JSON.stringify(tr),\r\n\t\t\tC_pos = JSON.stringify(l.position);\r\n\t*/\r\n\r\n\t\t//if (RVS.CACHE[RVS.S.slideId][_.uid].wtr !=C_wtr || RVS.CACHE[RVS.S.slideId][_.uid].tr !==C_tr) {\r\n\t\t\t//SET WRAPPER DIMENSION\r\n\r\n\t\ttr.immediateRender = true;\r\n\t\tw_tr.immediateRender = true;\r\n\r\n\t\t\t//SET STYLE OF LAYER\r\n\t\t\ttpGS.gsap.set(lh.c,tr);\r\n\r\n\t\t\ttpGS.gsap.set(lh.w,w_tr);\r\n\t\t//}\r\n\r\n\r\n\r\n\t\t//RVS.CACHE[RVS.S.slideId][_.uid].wtr = C_wtr;\r\n\t\t//RVS.CACHE[RVS.S.slideId][_.uid].tr = C_tr;\r\n\r\n\r\n\t\t//if (RVS.CACHE[RVS.S.slideId][_.uid].bgcolor!==bgcolor) {\r\n\t\t\t///* CREATE SHARP CORNERS */\r\n\t\t\tRVS.F.updateSharpCorners({uid:_.uid,bgcolor:bgcolor});\r\n\t//\t}\r\n\r\n \t\t//RVS.CACHE[RVS.S.slideId][_.uid].bgcolor=bgcolor;\r\n\r\n\t\t//CREATE ANIMATION\r\n\t\tlh.htr = htr;\r\n\t\tlh.bg_htr = bg_htr;\r\n\r\n\t\trequestAnimationFrame(function() {\r\n\t\t\tRVS.F.renderLayerAnimation({layerid:_.uid, quickRendering:_.ignoreLayerAnimation,timeline:\"full\",caller:\"drawHTMLLayer\"});\r\n\t\t\tRVS.F.checkCurrentLayerHoverMode({layerid:_.uid});\r\n\t\t\tif ((lh.drawnonce===undefined) && l.type===\"button\" || l.type===\"text\") {\r\n\t\t\t\tlh.drawnonce=true;\r\n\t\t\t\tRVS.F.updateHTMLLayerPosition({uid:_.uid,wtr:w_tr});\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\r\n\t\tif (RVS.S.shwLayerAnim && jQuery.inArray(_.uid,RVS.selLayers)>=0) RVS.F.playLayerAnimation({layerid:_.uid});\r\n\r\n\t\tif (RVS.F.updateMinSliderHeights()) {\r\n\t\t\tif (!RVS.S.drawingHTMLLayers) {\r\n\t\t\t\tRVS.DOC.trigger('updatesliderlayout',\"layer.js-586\");\r\n\t\t\t} else {\r\n\t\t\t\tRVS.S.updateMinSliderHeight_force = true;\r\n\t\t\t}\r\n\t\t}  else {\r\n\t\t\t_.wtr = w_tr;\r\n\t\t\t//Reposition Parent if needed\r\n\t\t\tif (l.position.position==\"relative\" && RVS.L[l.group.puid]!==undefined && RVS.L[l.group.puid].type===\"group\") RVS.S.layerPosWaitingToUpdate[l.group.puid] = true;\r\n\t\t\tRVS.F.updateHTMLLayerPosition(_);\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\tRVS.F.updateWaitingHTMLLayerPosition();\r\n\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\tRVS.F.updateHTMLLayerPosition(_);\r\n\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t\t//if(RVS.CACHE[RVS.S.slideId][_.uid].position !== C_pos) \tRVS.F.updateHTMLLayerPosition(_);\r\n\r\n\r\n\t\t//RVS.CACHE[RVS.S.slideId][_.uid].pos = C_pos;\r\n\r\n\t};\r\n\r\n\t//Update Parent Group Positions if relative positioned Child exists\r\n\tRVS.F.updateWaitingHTMLLayerPosition = function() {\r\n\t\tfor (var i in RVS.S.layerPosWaitingToUpdate) {\r\n\t\t\tif (!RVS.S.layerPosWaitingToUpdate.hasOwnProperty(i)) continue;\r\n\t\t\tRVS.F.updateHTMLLayerPosition({uid:i});\r\n\t\t\tdelete RVS.S.layerPosWaitingToUpdate[i];\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.addGradDegree = function(grad, deg) {\r\n\t\t\tgrad = grad.split('(');\r\n\t\t\tvar begin = grad[0];\r\n\t\t\tgrad.shift();\r\n\t\t\treturn begin + '(' + deg + 'deg, ' + grad.join('(');\r\n\t};\r\n\r\n\tRVS.F.gradDegree = function(grad) {\r\n\t\t\tif(grad.search('deg,') !== -1) {\r\n\t\t\t\tvar deg = grad.split('deg,')[0];\r\n\t\t\t\tif(deg.search(/\\(/) !== -1) return parseInt(deg.split('(')[1], 10);\r\n\t\t\t}\r\n\t\t\treturn 180;\r\n\t};\r\n\r\n\tRVS.F.smartConvertDivs  = function(a) {\r\n\t\tif (typeof a===\"string\" && a[0]===\"#\")\r\n\t\t\treturn (a[1]/a[3])*100+\"%\";\r\n\t\telse\r\n\t\t\treturn a;\r\n\t};\r\n\r\n\tRVS.F.updateSharpCorners = function(_) {\r\n\t\tif (RVS.L[_.uid].type!==\"text\" && RVS.L[_.uid].type!==\"button\" && RVS.L[_.uid].type!==\"shape\") return;\r\n\r\n\t\tvar lh = RVS.H[_.uid],\r\n\t\t\tl = RVS.L[_.uid];\r\n\t\tif (!_.resize) {\r\n\t\t\tif (lh.leftcorner) lh.leftcorner.remove();\r\n\t\t\tif (lh.rightcorner) lh.rightcorner.remove();\r\n\t\t}\r\n\t\tif (l.idle.cornerLeft!==\"none\") {\r\n\t\t\tif (!_.resize || lh.leftcorner===undefined) {\r\n\t\t\t\tlh.leftcorner = jQuery('<'+l.idle.cornerLeft+'></'+l.idle.cornerLeft+'>');\r\n\t\t\t\tlh.c.append(lh.leftcorner);\r\n\t\t\t}\r\n\t\t\tlh.leftcorner.css('borderWidth',lh.c.outerHeight()+\"px\");\r\n\t\t\tlh.leftcorner.css('borderRight','0px solid transparent');\r\n\t\t\tif (_.bgcolor) lh.leftcorner.css('border'+(l.idle.cornerLeft===\"rs-fcrt\" ? \"Bottom\" : \"Top\")+'Color',_.bgcolor);\r\n\t\t}\r\n\r\n\t\tif (l.idle.cornerRight!==\"none\") {\r\n\t\t\tif (!_.resize || lh.rightcorner===undefined) {\r\n\t\t\t\tlh.rightcorner = jQuery('<'+l.idle.cornerRight+'></'+l.idle.cornerRight+'>');\r\n\t\t\t\tlh.c.append(lh.rightcorner);\r\n\t\t\t}\r\n\t\t\tlh.rightcorner.css('borderWidth',lh.c.outerHeight()+\"px\");\r\n\t\t\tlh.rightcorner.css('borderLeft','0px solid transparent');\r\n\t\t\tif (_.bgcolor)  lh.rightcorner.css('border'+(l.idle.cornerRight===\"rs-bcrt\" ? \"Top\" : \"Bottom\")+'Color',_.bgcolor);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\r\n\t/*\r\n\tREORDER HTML LAYERS ON THE SLIDE\r\n\t*/\r\n\tRVS.F.reOrderHTMLLayers = function(_) {\r\n\r\n\t\tRVS.C.layergrid.detach();\r\n\t\tRVS.S.redrawHTMLLayersList = [];\r\n\t\t// BUILD FIRST LEVEL LAYERS\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif ((RVS.L[li].group.puid===-1 || RVS.L[li].type===\"row\") &&  RVS.L[li].type!==\"zone\") RVS.F.reOrderHTMLLayer({uid:li});\r\n\t\t}\r\n\t\t// Build Groups In Groups and Columns in Rows\r\n\r\n\t\tfor (li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.L[li].type==\"column\" || (RVS.L[li].type==\"group\" && RVS.L[li].group.puid!=-1 )) RVS.F.reOrderHTMLLayer({uid:RVS.L[li].uid});\r\n\t\t}\r\n\t\tfor (li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.L[li].type!==\"column\" && RVS.L[li].group.puid!==-1 && (RVS.L[li].type!==\"group\" || RVS.L[li].group.puid==-1)) RVS.F.reOrderHTMLLayer({uid:RVS.L[li].uid});\r\n\t\t}\r\n\t\tRVS.C.layergrid.appendTo(RVS.C.slide);\r\n\t\tfor (li in RVS.S.redrawHTMLLayersList) if (RVS.S.redrawHTMLLayersList.hasOwnProperty(li)) RVS.F.drawHTMLLayer({uid:RVS.S.redrawHTMLLayersList[li]});\r\n\t\tRVS.F.checkRowsChildren();\r\n\t};\r\n\r\n\t/*\r\n\tREDRAW HTML LAYERS\r\n\t*/\r\n\tRVS.F.drawHTMLLayers = function() {\r\n\t\tif (RVS.S.drawingHTMLLayers!==true) {\r\n\t\t\tRVS.S.drawingHTMLLayers=true;\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\tif (RVS.S.ReadyToShowAll===undefined) RVS.S.ReadyToShowAll=\"wait\";\r\n\t\t\t\tRVS.S.drawHTMLLayersCalled = true;\r\n\t\t\t\t// BUILD FIRST LEVEL LAYERS\r\n\t\t\t\tfor (var li in RVS.L) {\r\n\t\t\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\t\t\tif ((RVS.L[li].group.puid===-1 || RVS.L[li].type===\"row\") &&  RVS.L[li].type!==\"zone\") RVS.F.drawHTMLLayer({uid:li});\r\n\t\t\t\t}\r\n\t\t\t\tfor (li in RVS.L) {\r\n\t\t\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\t\t\tif (RVS.L[li].type==\"column\" || (RVS.L[li].type==\"group\" && RVS.L[li].group.puid!=-1 )) RVS.F.drawHTMLLayer({uid:RVS.L[li].uid});\r\n\t\t\t\t}\r\n\t\t\t\tfor (li in RVS.L) {\r\n\t\t\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\t\t\tif (RVS.L[li].type!==\"column\" && (RVS.L[li].type!==\"group\"  || RVS.L[li].group.puid==-1) && RVS.L[li].group.puid!==-1) RVS.F.drawHTMLLayer({uid:RVS.L[li].uid});\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.checkRowsChildren();\r\n\t\t\t\tRVS.S.drawingHTMLLayers=false;\r\n\r\n\t\t\t\tif (RVS.S.updateMinSliderHeight_force ||  RVS.S.ReadyToShowAll==\"wait\" ) RVS.F.updatesliderlayout(undefined);\r\n\t\t\t\tRVS.S.updateMinSliderHeight_force = false;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tBUILD HTML LAYERS ON THE SLIDE\r\n\t*/\r\n\tRVS.F.buildHTMLLayers = function(obj) {\r\n\t\tobj = obj===undefined ? {} : obj;\r\n\t\t// BUILD FIRST LEVEL LAYERS\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif ((RVS.L[li].group.puid===-1 || RVS.L[li].type===\"row\") &&  RVS.L[li].type!==\"zone\") RVS.F.buildHTMLLayer({uid:li,ignoreDrawLayers:obj.ignoreDrawLayers});\r\n\t\t}\r\n\t\tfor (li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.L[li].type==\"column\" || (RVS.L[li].type==\"group\" && RVS.L[li].group.puid==-1 )) RVS.F.buildHTMLLayer({uid:RVS.L[li].uid,ignoreDrawLayers:obj.ignoreDrawLayers});\r\n\t\t}\r\n\r\n\t\tfor (li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif ((RVS.L[li].type==\"group\" && RVS.L[li].group.puid!==-1 )) RVS.F.buildHTMLLayer({uid:RVS.L[li].uid,ignoreDrawLayers:obj.ignoreDrawLayers});\r\n\t\t}\r\n\r\n\t\tfor (li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (RVS.L[li].type!==\"column\" && (RVS.L[li].type!==\"group\"  || RVS.L[li].group.puid==-1) && RVS.L[li].group.puid!==-1) RVS.F.buildHTMLLayer({uid:RVS.L[li].uid,ignoreDrawLayers:obj.ignoreDrawLayers});\r\n\t\t}\r\n\t\tRVS.F.checkRowsChildren();\r\n\t\tRVS.F.checkLockedLayers();\r\n\t\tRVS.F.checkShowHideLayers();\r\n\t\tif (window.firstLockTest===\"change\") {\r\n\t\t\tRVS.F.showInfo({content:RVS_LANG.somelayerslocked, type:\"goodtoknow\", showdelay:2, hidedelay:3, hideon:\"\", event:\"\" });\r\n\t\t\twindow.firstLockTest = true;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// UPDATE THE INPUT FIELDS OF THE SELETED LAYERS\r\n\tRVS.F.updateLayerInputFields = function(_) {\r\n\t\tif (RVS.selLayers.length===0)\r\n\t\t\tif (RVS.S.layerInputFieldsInitialised)\r\n\t\t\t\treturn;\r\n\t\t\telse {\r\n\t\t\t\tRVS.F.showWaitAMinute({fadeIn:0,text:RVS_LANG.updatingfields});\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tRVS.S.layerInputFieldsInitialised = true;\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('.layer_settings_collector'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\t\t\t\tRVS.F.showWaitAMinute({fadeOut:2,text:RVS_LANG.updatingfields});\r\n\t\t\t\t},5);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\tRVS.S.layerInputFieldsInitialised = true;\r\n\t\tRVS.S.keyFrame = RVS.S.keyFrame===\"idle\" ? RVS.L[RVS.selLayers[0]].timeline.frameToIdle : RVS.S.keyFrame;\r\n\t\tif (_!==undefined && _.short===true) {\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('.layertoolbar_wrap.layer_settings_collector'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery(RVS.eMode.menu), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\t\t//clearTimeout(RVS.S.updateEsyInputsTimer);\r\n\r\n\t\t\t//RVS.S.updateEsyInputsTimer = setTimeout(function() {\r\n\t\t\t\twindow.requestAnimationFrame(function() {\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('.layer_settings_collector'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\t\t\t\tdelete RVS.S.updateEsyInputsTimer;\r\n\t\t\t\t});\r\n\t\t\t//},10);\r\n\t\t} else {\r\n\t\t\tRVS.F.updateEasyInputs({container:jQuery('.layer_settings_collector'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\t}\r\n\r\n\t\tRVS.F.updateCusCSSContent();\r\n\t\t// STOP ALL ANIMATION\r\n\t\tRVS.F.stopAllLayerAnimation();\r\n\r\n\t\t//Check Dependencies some of the Fields.\r\n\t\tRVS.F.checkAvailableFontWeights();\r\n\t\tRVS.F.updateLayerBgImage(false);\r\n\t\tRVS.F.updateLayerImageSrcThumb();\r\n\t\tRVS.F.updateRowColumnField();\r\n\t\tRVS.F.updateFrameRealSpeed();\r\n\r\n\t\t//RVS.F.updateCustomCSS();\r\n\r\n\t\t//REBUILD ANIMATION LIST\r\n\t\tRVS.DOC.trigger('updateKeyFramesList');\r\n\r\n\t\t//START ANIMATION IF NEEDED\r\n\t\tif (RVS.S.shwLayerAnim)\tRVS.F.playLayerAnimation({layerid:RVS.selLayers[0]});\r\n\t};\r\n\r\n\t// UPDATE THE SMALL LAYER BACKGROUND PREVIEW WINDOW\r\n\tRVS.F.updateLayerBgImage = function(force) {\r\n\t\tif (RVS.selLayers.length===0) return;\r\n\t\tvar is = RVS.L[RVS.selLayers[0]].idle.backgroundImage;\r\n\t\tis= is===undefined  || RVS.selLayers.length>1 ? \"\" : is;\r\n\t\tif (is===\"\" && RVS.L[RVS.selLayers[0]].idle.bgFromStream!==true)\r\n\t\t\tjQuery('#layer_bg_adv_settings').hide();\r\n\t\telse\r\n\t\t\tjQuery('#layer_bg_adv_settings').show();\r\n\t\ttpGS.gsap.set('#layer_bg_image',{backgroundImage:'url(\"'+is+'\")', \"background-size\":(RVS.L[RVS.selLayers[0]].idle.backgroundSize===\"percentage\" ? RVS.L[RVS.selLayers[0]].idle.backgroundSizePerc+\"%\" : RVS.L[RVS.selLayers[0]].idle.backgroundSize===\"pixel\" ? RVS.L[RVS.selLayers[0]].idle.backgroundSizePix+\"px\"  : RVS.L[RVS.selLayers[0]].idle.backgroundSize) , backgroundPosition:RVS.L[RVS.selLayers[0]].idle.backgroundPosition});\r\n\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[0]});\r\n\t\tif (force!==false) setTimeout(function() {\tRVS.F.updateEasyInputs({container:jQuery('#form_layerstyle_bg'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});},100);\r\n\t};\r\n\r\n\tRVS.F.updateLayerImageSrcThumb = function() {\r\n\t\tif (RVS.selLayers.length===0) return;\r\n\t\tif (RVS.selLayers.length>1 ) {\r\n\t\t\ttpGS.gsap.set('#layer_image_src',{backgroundImage:\"none\"});\r\n\t\t} else\r\n\t\tif (RVS.L[RVS.selLayers[0]].type===\"image\") {\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].media.imageUrl.indexOf(\"png\")>=0 && RVS.L[RVS.selLayers[0]].media.imageUrl!==RVS.ENV.img_ph_url)\r\n\t\t\t\tdocument.getElementById(\"minilayerprevimage_wrap\").className = \"miniprevimage_wrap withimage\";\r\n\t\t\telse\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].media.imageUrl==RVS.ENV.img_ph_url)\r\n\t\t\t\tdocument.getElementById(\"minilayerprevimage_wrap\").className = \"miniprevimage_wrap\";\r\n\r\n\t\t\tdocument.getElementById('layer_image_src').style.backgroundImage = 'url(\"'+RVS.L[RVS.selLayers[0]].media.imageUrl+'\")';\r\n\t\t}\r\n\t};\r\n\r\n\tfunction updateLayerImageSrc_inside(_) {\r\n\r\n\r\n\t\t_.l = RVS.L[_.uid];\r\n\r\n\t\t_.v = _.l.size.width[RVS.screen].v;\r\n\t\t_.pre = RVS.S.slideId+\".layers.\"+_.uid+\".\";\r\n\t\tRVS.H[_.uid].c.find('img').first().attr('src', _.src);\r\n\t\tif (_.src==RVS.ENV.img_ph_url)\r\n\t\t\tRVS.H[_.uid].c.addClass(\"placeholder_on\");\r\n\t\telse\r\n\t\t\tRVS.H[_.uid].c.removeClass(\"placeholder_on\");\r\n\t\t_.ignoreBackup = true;\r\n\r\n\t\tif (_.l.type!==\"video\") layerSizeUpdate(_);\r\n\r\n\t\tif (_.ignore)\r\n\t\t\tRVS.DOC.trigger(\"restoreLayersSize\");\r\n\r\n\t\tRVS.F.drawHTMLLayer({uid:_.uid});\r\n\t}\r\n\r\n\t//UPDATE THE SRC OF THE IMAGES\r\n\tRVS.F.updateLayerImageSrc = function(e,_) {\r\n\t\tif (_!=undefined && _.layerid!==undefined) {\r\n\t\t\t//Check if Original Size was Set before Update !!\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tRVS.L[RVS.selLayers[lid]].size.originalSize = parseInt(RVS.L[RVS.selLayers[lid]].size.width[RVS.screen].v,0) == parseInt(RVS.L[RVS.selLayers[lid]].size.originalWidth,0);\r\n\t\t\t}\r\n\r\n\t\t\t//_.ignore = true;\r\n\t\t\t_.direction = \"width\";\r\n\t\t\t_.dirB = \"height\";\r\n\t\t\t_.src = _.src==undefined ? RVS.L[_.layerid].media.imageUrl : _.src;\r\n\t\t\t_.src = _.src==undefined ? RVS.L[_.layerid].media.posterUrl : _.src;\r\n\t\t\t_.id = _.id===undefined ? RVS.L[_.layerid].media.imageId : _.id;\r\n\t\t\t_.id = _.id===undefined ? RVS.L[_.layerid].media.posterId : _.id;\r\n\r\n\r\n\r\n\t\t\tRVS.F.preloadImage({\r\n\t\t\t\tuid:_.layerid,\r\n\t\t\t\tslideId:RVS.S.slideId,\r\n\t\t\t\timage : _.src,\r\n\t\t\t\tsilent:false,\r\n\t\t\t\tcallback:function() {\r\n\t\t\t\t\tvar original = false;\r\n\t\t\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\t\t\t_.uid = RVS.selLayers[lid];\r\n\t\t\t\t\t\t_.ignore = RVS.L[RVS.selLayers[lid]].size.originalSize;\r\n\t\t\t\t\t\tupdateLayerImageSrc_inside(_);\r\n\t\t\t\t\t\toriginal = original || _.uid===_.layerid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!original) {\r\n\t\t\t\t\t\t_.uid = _.layerid;\r\n\t\t\t\t\t\tupdateLayerImageSrc_inside(_);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tRVS.F.updateLayerImageSrcThumb();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// UPDATE SOURCE TYPE AND LIBRARY TYPE\r\n\t\t\tsetTimeout(function() {\tRVS.F.updateEasyInputs({container:jQuery('#form_layer_content'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});},100);\r\n\t\t}\r\n\t};\r\n\r\n\t// UPDATE SVG Source\r\n\tRVS.F.updateLayerSVGSrc = function(_) {\r\n\t\tif (_==undefined || _.uids===undefined || _.src===undefined || _.uids.length===0) return;\r\n\t\tjQuery.get(_.src, function(data) {\r\n\t\t\tfor (var i in _.uids) {\r\n\t\t\t\tif(!_.uids.hasOwnProperty(i)) continue;\r\n\t\t\t\tvar uid = _.uids[i],\r\n\t\t\t\t\tih = new XMLSerializer().serializeToString(data.documentElement);\r\n\t\t\t  \tRVS.H[uid].c[0].innerHTML = ih;\r\n\t\t\t  \tRVS.H[uid].svg = RVS.H[uid].w.find('svg');\r\n\t\t\t\tRVS.H[uid].svgPath = RVS.H[uid].w.find(!RVS.L[uid].idle.svg.styleAll ? 'svg path' : 'svg path, svg circle, svg ellipse, svg line, svg polygon, svg polyline, svg rect');\r\n\t\t\t  \tRVS.F.updateLayerObj({path:\"svg.renderedData\",val:ih,ignoreBackup:true});\r\n\t\t\t  \tRVS.F.drawHTMLLayer({uid:uid});\r\n\t\t\t }\r\n\t\t});\r\n\r\n\t};\r\n\r\n\t// CHECK IF VIDEO NEED PLACEHOLDER IMAGE\r\n\tRVS.F.resetVideoPlaceholder = function(e,_) {\r\n\t\tif (_===undefined || _.val===undefined) return;\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\tvar uid = RVS.selLayers[lid];\r\n\t\t\tif (RVS.L[uid].type===\"video\") {\r\n\t\t\t\tif (RVS.L[uid].media.posterUrl === RVS.ENV.img_ph_url)\r\n\t\t\t\t\tRVS.H[uid].c.addClass(\"placeholder_on\");\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.H[uid].c.removeClass(\"placeholder_on\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//RESYNC SIZE OF VIDEO LAYERS BASED ON THE CURRENT ASPECT RATIO\r\n\tRVS.F.resyncVideoAspectRatio = function() {\r\n\t\tRVS.F.openBackupGroup({id:\"layerresize\",txt:\"Video Aspect Ratio\",icon:\"videocam\"});\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\tvar _ = RVS.L[RVS.selLayers[lid]];\r\n\t\t\tif (_.type===\"video\") {\r\n\t\t\t\tvar rat = _.media.ratio.split(\":\"),\r\n\t\t\t\t\tpre = RVS.S.slideId+\".layers.\"+_.uid+\".\";\r\n\t\t\t\trat = rat[0] / rat[1];\r\n\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.aspectRatio.#size#.v',val:rat});\r\n\t\t\t\tlayerSizeUpdate({ignore:true, direction:\"width\", dirB:\"height\", v:RVS.L[_.uid].size.width[RVS.screen].v, l:RVS.L[_.uid], pre:pre});\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:_.uid});\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.F.closeBackupGroup({id:\"layerresize\"});\r\n\t\tRVS.F.updateLayerInputFields();\r\n\t};\r\n\r\n\r\n\r\n/***********************************\r\n\tMAIN INTERNAL FUNCTIONS\r\n************************************/\r\n\r\n\t// UPDATE AUDIO LAYER SIZE IF NEEDED */\r\n\tRVS.F.changeAudioLayerSize = function(_) {\r\n\t\tRVS.F.openBackupGroup({id:\"layerresize\",txt:\"Audio Layer Controls\",icon:\"photo_size_select_large\"});\r\n\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t_.uid = RVS.selLayers[lid];\r\n\t\t\t_.l = RVS.L[_.uid];\r\n\t\t\t_.pre = RVS.S.slideId+\".layers.\"+_.uid+\".\";\r\n\t\t\tRVS.F.updateSliderObj({path:_.pre+'media.controls',val:!_.l.media.controls});\r\n\t\t\tif (_.l.type===\"audio\")\r\n\t\t\t\tif (_.l.media.controls) {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.width.#size#.v',val:350});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.height.#size#.v',val:54});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.width.#size#.v',val:54});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.height.#size#.v',val:54});\r\n\t\t\t\t}\r\n\r\n\t\t\tRVS.F.drawHTMLLayer({uid:_.uid});\r\n\t\t}\r\n\r\n\t\tRVS.F.closeBackupGroup({id:\"layerresize\"});\r\n\t\tRVS.F.updateLayerInputFields();\r\n\t};\r\n\r\n\tRVS.F.changeMediaControlsInteraction = function(_) {\r\n\t\tRVS.F.openBackupGroup({id:\"mediacontrols\",txt:\"Media Layer Controls\",icon:\"photo_size_select_large\"});\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t_.uid = RVS.selLayers[lid];\r\n\t\t\t_.l = RVS.L[_.uid];\r\n\t\t\t_.pre = RVS.S.slideId+\".layers.\"+_.uid+\".\";\r\n\t\t\tRVS.F.updateSliderObj({path:_.pre+'media.nointeraction',val:!_.l.media.nointeraction});\r\n\t\t\tRVS.F.updateSliderObj({path:_.pre+'media.controls',val:false});\r\n\t\t\tRVS.F.updateSliderObj({path:_.pre+'media.largeControls',val:false});\r\n\t\t}\r\n\t\tRVS.F.closeBackupGroup({id:\"mediacontrols\"});\r\n\t\tRVS.F.updateLayerInputFields();\r\n\t};\r\n\r\n\t// UPDATE LAYER SIZE BASED ON WIDTH / HEIGHT / ASPECT RATIO / TYPE\r\n\tfunction layerSizeUpdate(_) {\r\n\t\tswitch (_.l.type) {\r\n\t\t\tcase \"image\":\r\n\t\t\t\tif (_.ignore!==true) RVS.F.updateSliderObj({path:_.pre+'size.'+_.direction+'.#size#.v',val:_.v, ignoreBackup:_.ignoreBackup});\r\n\r\n\t\t\t\tvar newV;\r\n\r\n\t\t\t\tif (_.direction===\"width\")\r\n\t\t\t\t\tnewV = (RVS.F.isNumeric(_.v) || (!RVS.F.isNumeric(_.v) && _.v.indexOf(\"px\")>=0)) ? Math.round(parseInt(_.v,0) / _.l.size.aspectRatio[RVS.screen].v) : \"auto\";\r\n\t\t\t\telse\r\n\t\t\t\t\tnewV = (!RVS.F.isNumeric(_.v) && _.v.indexOf(\"%\")>=0) ? Math.round(( getLayerParentContainerSize({uid:_.uid}).height * (parseInt(_.v,0)/100) ) * _.l.size.aspectRatio[RVS.screen].v) : _.v===\"auto\" ? _.v : Math.round(parseInt(_.v,0) * _.l.size.aspectRatio[RVS.screen].v);\r\n\t\t\t\tnewV = newV===\"auto\" ? newV : newV+\"px\";\r\n\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.'+_.dirB+'.#size#.v',val:newV, ignoreBackup:_.ignoreBackup});\r\n\t\t\tbreak;\r\n\t\t\tcase \"group\":\r\n\t\t\tcase \"shape\":\r\n\t\t\t\tvar newV= _.v===\"auto\" ? \"100px\" : _.v;\r\n\t\t\t\tif (_.ignore!==true) RVS.F.updateSliderObj({path:_.pre+'size.'+_.direction+'.#size#.v',val:newV, ignoreBackup:_.ignoreBackup});\r\n\t\t\t\tif (RVS.F.isNumeric(parseInt(newV,0))) {\r\n\t\t\t\t\tnewV = (_.direction===\"width\") ? Math.round(parseInt(newV,0) / _.l.size.aspectRatio[RVS.screen].v) : Math.round(parseInt(newV,0) * _.l.size.aspectRatio[RVS.screen].v);\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.'+_.dirB+'.#size#.v',val:newV, ignoreBackup:_.ignoreBackup});\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"video\":\r\n\t\t\t\tif (_.ignore!==true) RVS.F.updateSliderObj({path:_.pre+'size.'+_.direction+'.#size#.v',val:_.v, ignoreBackup:_.ignoreBackup});\r\n\r\n\t\t\t\tvar newV,prop = _.l.media.ratio.split(\":\");\r\n\t\t\t\tprop = prop[0] / prop[1];\r\n\r\n\t\t\t\tif (_.direction===\"width\")\r\n\t\t\t\t\tnewV = (RVS.F.isNumeric(_.v) || (!RVS.F.isNumeric(_.v) && _.v.indexOf(\"px\")>=0)) ? Math.round(parseInt(_.v,0) / prop) : \"auto\";\r\n\t\t\t\telse\r\n\t\t\t\t\tnewV = (!RVS.F.isNumeric(_.v) && _.v.indexOf(\"%\")>=0) ? Math.round(( getLayerParentContainerSize({uid:_.uid}).height * (parseInt(_.v,0)/100) ) * prop) : _.v===\"auto\" ? _.v : Math.round(parseInt(_.v,0) * prop);\r\n\t\t\t\tnewV = newV===\"auto\" ? _.dirB===\"width\" ? \"100%\" : newV : newV+\"px\";\r\n\r\n\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.'+_.dirB+'.#size#.v',val:newV, ignoreBackup:_.ignoreBackup});\r\n\t\t\tbreak;\r\n\t\t\tcase \"svg\":\r\n\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.'+_.direction+'.#size#.v',val:_.v});\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\r\n\t */\r\n\r\n\r\n\t// UPDATE SIZE AND TAKE CARE OF ASPECT RATIO IF NEEDED\r\n\tRVS.F.changeLayerSizes = function(_) {\r\n\t\t//_.v = (l.type===\"shape\" || l.type===\"group\") && _.v===\"auto\" ? \"100px\" : _.v;\r\n\t\tRVS.F.openBackupGroup({id:\"layerresize\",txt:\"Layer \"+_.direction.toUpperCase(),icon:\"photo_size_select_large\"});\r\n\t\t_.dirB = _.direction===\"width\" ? \"height\" : \"width\";\r\n\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t_.uid = RVS.selLayers[lid];\r\n\t\t\t_.l = RVS.L[_.uid];\r\n\t\t\t_.pre = RVS.S.slideId+\".layers.\"+_.uid+\".\";\r\n\t\t\t//Protection against % height in Columns on some Elements\r\n\t\t\tif (_.direction==\"height\" && (\"\"+_.v).indexOf('%')>0 && RVS.L[_.l.group.puid]!==undefined && RVS.L[_.l.group.puid].type===\"column\" && (_.l.type===\"shape\" | _.l.type===\"button\" || _.l.type==\"text\") && parseInt(_.v)>=99) _.v = _.v.replace(\"%\",\"px\");\r\n\r\n\t\t\tif (!_.l.size.scaleProportional)\r\n\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.'+_.direction+'.#size#.v',val:_.v});\r\n\t\t\telse\r\n\t\t\t\tlayerSizeUpdate(_);\r\n\r\n\t\t\tRVS.F.drawHTMLLayer({uid:_.uid});\r\n\t\t}\r\n\r\n\t\tRVS.F.closeBackupGroup({id:\"layerresize\"});\r\n\t\tRVS.F.updateLayerInputFields();\r\n\t};\r\n\r\n\t// LOCK / UNLOCK THE ASPECT RATIO, RESET SIZES IF NEEDED FOR IMAGES\r\n\tRVS.F.lockUnlockLayerRatio = function(_) {\r\n\t\tRVS.F.openBackupGroup({id:\"layerresize\",txt:\"Layer Aspect Ratio\",icon:\"photo_size_select_large\"});\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t_.uid = RVS.selLayers[lid];\r\n\t\t\t_.l = RVS.L[_.uid];\r\n\t\t\t_.pre = RVS.S.slideId+\".layers.\"+_.uid+\".\";\r\n\t\t\t_.direction = \"width\";\r\n\t\t\t_.dirB = \"height\";\r\n\r\n\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.scaleProportional',val:_.val});\r\n\t\t\tif (_.val)\r\n\t\t\t\tif (_.l.type===\"image\" ) {\r\n\t\t\t\t\t_.v = _.l.size.width[RVS.screen].v;\r\n\t\t\t\t\t_.ignore = true;\r\n\t\t\t\t\tlayerSizeUpdate(_);\r\n\t\t\t\t\tRVS.F.drawHTMLLayer({uid:_.uid});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar lh = RVS.H[_.uid].w,\r\n\t\t\t\t\t\tlhW=lh.width(),\r\n\t\t\t\t\t\tlhH=lh.height();\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.originalWidth',val:lhW});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.originalHeight',val:lhH});\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:_.pre+'size.aspectRatio.#size#.v',val:lhW/lhH});\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\tRVS.F.closeBackupGroup({id:\"layerresize\"});\r\n\t\tRVS.F.updateLayerInputFields();\r\n\t};\r\n\r\n\r\n\t//LOCK UNLOCK MARGIN AND PADDING INPUTS\r\n\tRVS.F.lockUnlockMarginPadding = function(_,what,where,state) {\r\n\t\tstate = state===undefined ? \"idle\" : state;\r\n\t\tRVS.F.openBackupGroup({id:\"lock\"+what,txt:\"Lock and reset \"+what+\"(s)\",icon:\"border_outer\"});\r\n\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t_.uid = RVS.selLayers[lid];\r\n\t\t\t_.l = RVS.L[_.uid];\r\n\t\t\t_.pre = RVS.S.slideId+\".layers.\"+_.uid+\".\";\r\n\t\t\tRVS.F.updateSliderObj({path:_.pre+state+'.'+what+'Lock',val:_.val});\r\n\t\t\tif (_.val) {\r\n\t\t\t\tvar d = _.l[state][what][RVS.screen]===undefined ?\r\n\t\t\t\t\t\t_.l[state][what].v===undefined ?\r\n\t\t\t\t\t\t\t_.l[state][what][0] :\r\n\t\t\t\t\t\t\t_.l[state][what].v[0] :\r\n\t\t\t\t\t\t\t_.l[state][what][RVS.screen].v[0];\r\n\t\t\t\tRVS.F.updateSliderObj({path:_.pre+state+'.'+what+where+'.1',val:d});\r\n\t\t\t\tRVS.F.updateSliderObj({path:_.pre+state+'.'+what+where+'.2',val:d});\r\n\t\t\t\tRVS.F.updateSliderObj({path:_.pre+state+'.'+what+where+'.3',val:d});\r\n\t\t\t}\r\n\t\t\tRVS.F.drawHTMLLayer({uid:_.uid});\r\n\t\t}\r\n\t\tRVS.F.closeBackupGroup({id:\"lock\"+what});\r\n\t\tRVS.F.updateLayerInputFields();\r\n\t};\r\n\t// UPDATE 1 OR 4 VALUES IN THE CURRENT SCREEN SIZE\r\n\tRVS.F.updateMarginPaddingValues = function(ds,what,where,state) {\r\n\t\tstate = state===undefined ? \"idle\" : state;\r\n\t\tRVS.F.openBackupGroup({id:what+\"Value\",txt:\"Layer \"+what,icon:\"border_outer\"});\r\n\t\t\tfor (var li in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(li)) continue;\r\n\t\t\t\tvar l = RVS.L[RVS.selLayers[li]],\r\n\t\t\t\t\tpre = RVS.S.slideId+\".layers.\"+RVS.selLayers[li]+\".\";\r\n\t\t\t\tif (l[state][what+'Lock'])\r\n\t\t\t\t\tfor (var i=0;i<4;i++) {\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+state+'.'+what+where+\".\"+i,val:ds.val});\r\n\t\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:pre+state+'.'+what+where+\".\"+ds.eventparam,val:ds.val});\r\n\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[li]});\r\n\t\t\t}\r\n\t\tRVS.F.closeBackupGroup({id:what+\"Value\"});\r\n\t\tRVS.F.updateLayerInputFields();\r\n\t};\r\n\r\n\r\n\r\n\tRVS.F.replaceMetas = function(_) {\r\n\t\tif (_.indexOf('{{')>=0)\r\n\t\t\tfor (var i in RVS.LIB.META) {\r\n\t\t\t\tif(!RVS.LIB.META.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (_.search(i)>=0) {\r\n\t\t\t\t\tvar re = new RegExp(i,\"g\");\r\n\t\t\t\t\t_ = _.replace(re,RVS.LIB.META[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\treturn _;\r\n\t};\r\n\r\n\tRVS.F.redrawEditedTextLayerwhenPlaceholder = function() {\r\n\t\tif (RVS.selLayers[0]!==undefined && RVS.L[RVS.selLayers[0]]!==undefined) {\r\n\t\t\t//if (RVS.L[uid].placeholder!==undefined && RVS.L[uid].placeholder.length>0 && RVS.L[uid].placeholder!==\" \")\r\n\t\t\tRVS.F.redrawTextLayerInnerHTML(RVS.selLayers[0],document.getElementById('ta_layertext').value!==RVS.S.inFocusValu);\r\n\t\t}\r\n\t}\r\n\r\n\tRVS.F.redrawTextLayerInnerHTML = function(uid,forcesplit,idle) {\r\n\t\tif (uid==undefined) return;\r\n\t\tif (RVS.L[uid]!==undefined && RVS.L[uid].type===\"text\" || RVS.L[uid].type===\"button\") {\r\n\t\t\tif(forcesplit) {\r\n\t\t\t\tif (RVS.H[uid].splitText!==undefined) RVS.H[uid].splitText.revert();\r\n\t\t\t\tRVS.H[uid].splitText = undefined;\r\n\t\t\t}\r\n\t\t\tif (RVS.L[uid].subtype==undefined ||  RVS.F[\"redrawTextLayerInnerHTML_\"+RVS.L[uid].subtype]==undefined || RVS.F[\"redrawTextLayerInnerHTML_\"+RVS.L[uid].subtype](uid)!=true) {\r\n\t\t\t\tif (RVS.L[uid].placeholder!==undefined && RVS.L[uid].placeholder.length>0 && RVS.L[uid].placeholder!==\" \")\r\n\t\t\t\t\tRVS.H[uid].c[0].innerHTML = RVS.L[uid].placeholder;\r\n\t\t\t\telse {\r\n\t\t\t\t\tRVS.H[uid].c[0].innerHTML =\r\n\t\t\t\t\t\t\tidle!==true && RVS.L[uid].toggle.set && RVS.L[uid].toggle.text!==\"\" && RVS.C.toggledTextButton.className.indexOf('selected')>=0 ?\r\n\t\t\t\t\t\t\tjQuery.inArray(RVS.L[uid].idle.whiteSpace[RVS.screen].v,[\"normal\",\"nowrap\"])>=0 ? RVS.F.replaceMetas(RVS.L[uid].toggle.text) : RVS.F.replaceMetas(RVS.L[uid].toggle.text.replace(/\\r\\n|\\r|\\n/g,\"<br />\")) :\r\n\t\t\t\t\t\t\tjQuery.inArray(RVS.L[uid].idle.whiteSpace[RVS.screen].v,[\"normal\",\"nowrap\"])>=0 ? RVS.F.replaceMetas(RVS.L[uid].text) : RVS.F.replaceMetas(RVS.L[uid].text.replace(/\\r\\n|\\r|\\n/g,\"<br />\"));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (forcesplit) {\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:uid,ignoreLayerAnimation:true});\r\n\t\t\t\tif (RVS.L[uid].timeline.split!==undefined) RVS.F.updateLayerFrames({layerid:uid});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.DOC.on('redrawSelectedLayersInnerHTML',function() {\r\n\t\t\tRVS.F.redrawTextLayerInnerHTML(RVS.selLayers[0],true);\r\n\t});\r\n\r\n\r\n\r\n\t/*\r\n\tINIT LOCAL INPUT BOX FUNCTIONS\r\n\t*/\r\n\tfunction initLocalInputBoxes() {\r\n\t\tRVS.DOC.on('coloredit colorcancel',colorEditLayer);\r\n\t}\r\n\r\n\tfunction setKeyframeName(i) {\r\n\t\t//document.getElementById('editing_keyframe').innerHTML = RVS_LANG.keyframe+\" #\"+i;\r\n\t\tjQuery('framewrap.selected').removeClass(\"selected\").removeClass(\"selected_0\");\r\n\t\tvar el = document.getElementById(RVS.S.slideId+\"_\"+RVS.selLayers[0]+\"_\"+(RVS.S.keyFrame===\"frame_0\" ? \"frame_1\" : RVS.S.keyFrame));\r\n\t\tif (el!=null && el!==undefined) el.className +=\" selected\" + (RVS.S.keyFrame===\"frame_0\" ? \" selected_0\" : \"\");\r\n\t}\r\n\r\n\r\n\t// UPDATE A LAYER ANIMATION FROM ANIMATION LIBRARY ON CALL\r\n\t// direction:in,out,look,\r\n\t// group: name of Animation Group,\r\n\t// transition:shortname of transition\r\n\tRVS.F.changeLayerAnimation = function(_) {\r\n\t\tif (!_.fromLayerTransListe) {\r\n\t\t\twindow.timelineTemporaryCached=true;\r\n\t\t\tRVS.L[RVS.selLayers[0]].timelinecache = RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].timeline);\r\n\t\t}\r\n\r\n\t\tupdateTimeLineByTemplate(RVS.LIB.LAYERANIMS[_.direction][_.group].transitions[_.transition],_.transition,_.group);\r\n\t\tvar icon = _.direction===\"loop\" ? \"loop\" : \"play_circle_filled\",\r\n\t\t\ttmpl = _.direction===\"loop\" ? RVS_LANG.backupTemplateLoop : RVS_LANG.backupTemplateLayerAnim,\r\n\t\t\tbcktype = _.direction===\"loop\" ? \"layerLoop\" : \"layerFrames\",\r\n\t\t\tpath = _.direction===\"loop\" ? \"loop\" : \"frames\";\r\n\r\n\t\tif (!_.ignoreBackupGroup) RVS.F.openBackupGroup({id:\"changeFramesFromTemplate\",txt:tmpl,icon:icon});\r\n\t\tRVS.F.backup({path:path,layer:RVS.selLayers[0],slide:RVS.S.slideId,cache:undefined, icon:icon,txt:tmpl,lastkey:\"timeline\",force:true,val:RVS.L[RVS.selLayers[0]].timeline[path], old:RVS.L[RVS.selLayers[0]].timelinecache[path], backupType:bcktype, bckpGrType:\"layerTemplateAnimation\"});\r\n\r\n\t\t// RUN OTHER UPDATES ON OTHER ELEMENTS IF NEEDED\r\n\t\tfor (var i in RVS.JHOOKS.changeLayerAnimation) {\r\n\t\t\tif(!RVS.JHOOKS.changeLayerAnimation.hasOwnProperty(i)) continue;\r\n\t\t\tRVS.JHOOKS.changeLayerAnimation[i](_);\r\n\t\t}\r\n\r\n\t\tif (!_.ignoreBackupGroup) RVS.F.closeBackupGroup({id:\"changeFramesFromTemplate\"});\r\n\r\n\t\twindow.timelineTemporaryCached = false;\r\n\t\tdelete RVS.L[RVS.selLayers[0]].timelinecache;\r\n\t\tjQuery('.layer_transliste.open').removeClass(\"open\");\r\n\t\tRVS.F.renderLayerAnimation({layerid:RVS.selLayers[0]});\r\n\t\tRVS.F.playLayerAnimation({layerid:RVS.selLayers[0]});\r\n\t\tRVS.F.updateLayerInputFields();\r\n\t\tif (!RVS.S.shwLayerAnim)\r\n\t\t\tRVS.F.stopAllLayerAnimation();\r\n\t\telse\r\n\t\t\tRVS.F.playLayerAnimation({layerid:RVS.selLayers[0]});\r\n\r\n\t};\r\n\r\n\tRVS.F.updateLayerTimelineLoopLists = function() {\r\n\t\tvar opts =\"\";\r\n\t\twindow.layerTimelineLoopFrom = window.layerTimelineLoopFrom == undefined ? jQuery('#la_timeline_loop_from') : window.layerTimelineLoopFrom;\r\n\t\twindow.layerTimelineLoopTo = window.layerTimelineLoopTo == undefined ? jQuery('#la_timeline_loop_to') : window.layerTimelineLoopTo;\r\n\t\tfor (var i in RVS.L[RVS.selLayers[0]].timeline.frameOrder) {\r\n\t\t\tif(!RVS.L[RVS.selLayers[0]].timeline.frameOrder.hasOwnProperty(i)) continue;\r\n\t\t\tif (i>0 && RVS.L[RVS.selLayers[0]].timeline.frameOrder[i].id!==\"frame_999\")\topts += '<option value=\"'+RVS.L[RVS.selLayers[0]].timeline.frameOrder[i].id+'\">'+RVS.L[RVS.selLayers[0]].timeline.frames[RVS.L[RVS.selLayers[0]].timeline.frameOrder[i].id].alias+' (#'+i+')</option>';\r\n\t\t}\r\n\r\n\t\twindow.layerTimelineLoopFrom[0].innerHTML = window.layerTimelineLoopTo[0].innerHTML = opts;\r\n\t\twindow.layerTimelineLoopFrom.val(RVS.L[RVS.selLayers[0]].timeline.tloop.from).ddTP('change');\r\n\t\twindow.layerTimelineLoopTo.val(RVS.L[RVS.selLayers[0]].timeline.tloop.to).ddTP('change');\r\n\t};\r\n\r\n\tRVS.F.updateCoveredLayer = function(i) {\r\n\r\n\t\tif (RVS.L[i].size.covermode===\"cover-proportional\" || RVS.L[i].size.covermode===\"cover\") return {width : RVS.S.ulDIM.width, height:RVS.S.ulDIM.height};\r\n\t\telse\r\n\t\tif (RVS.L[i].size.covermode===\"fullwidth\") return {width: RVS.S.ulDIM.width};\r\n\t\telse\r\n\t\tif (RVS.L[i].size.covermode===\"fullheight\") return {height: RVS.S.ulDIM.height};\r\n\t\telse\r\n\t\treturn false;\r\n\t}\r\n\r\n\tRVS.F.updateCoveredLayers = function(redraw) {\r\n\t\twindow.requestAnimationFrame(function() {\r\n\t\t\tfor (var i in RVS.L) {\r\n\t\t\t\tif (!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\t\t// NEW COVER MODE IF LAYER ALIGNED TO STAGE AND NOT TO CONTENT\r\n\t\t\t\tif (RVS.H[i]!==undefined && RVS.L[i].behavior!==undefined && RVS.L[i].behavior.baseAlign===\"slide\") {\r\n\t\t\t\t\tvar w = RVS.F.updateCoveredLayer(i);\r\n\t\t\t\t\tif (w!==undefined && redraw) {\r\n\t\t\t\t\t\tRVS.F.drawHTMLLayer({uid:i});\r\n\t\t\t\t\t\tRVS.F.updateHTMLLayerPosition({uid:i});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (w!==false && w.width!==undefined || w.height!==undefined) tpGS.gsap.set(RVS.H[i].w,w);\r\n\t\t\t\t\t\tRVS.H[i].w_width = w.width!==undefined ? w.width : RVS.H[i].w_width;\r\n\t\t\t\t\t\tRVS.H[i].w_height = w.height!==undefined ?w.height : RVS.H[i].w_height;\r\n\t\t\t\t\t\tif (RVS.L[i].type===\"image\" && RVS.L[i].size.covermode!==\"custom\") {\r\n\t\t\t\t\t\t\tvar newDims = RVS.F.getProportionalSizes({\tproportional:RVS.L[i].size.scaleProportional,\r\n\t\t\t\t\t\t\t\t\t\t\ttype:RVS.L[i].size.covermode,\r\n\t\t\t\t\t\t\t\t\t\t\timage:{width: RVS.L[i].size.originalWidth, height: RVS.L[i].size.originalHeight},\r\n\t\t\t\t\t\t\t\t\t\t\tviewPort:{\twidth:w!==false && w.width!==undefined ? RVS.S.ulDIM.width : RVS.F.GW(RVS.screen), height:w!==false && w.height!==undefined ?RVS.S.ulDIM.height : RVS.SLIDER.settings.size.height[RVS.screen]}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tRVS.H[i].c[0].style.width = newDims.width+\"px\";\r\n\t\t\t\t\t\t\tRVS.H[i].c[0].style.height = newDims.height+\"px\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tRVS.F.updateLayerPositionClass = function(id,forceall) {\r\n\t\tif (id==undefined || RVS.H[id]==undefined || RVS.H[id].w==undefined) return;\r\n\r\n\t\tRVS.H[id].w[0].classList.remove('_lc_i_abs');\r\n\t\tRVS.H[id].w[0].classList.remove('_lc_i_rel');\r\n\t\tif (RVS.L[id].group.puid==-1) RVS.L[id].position.position==\"absolute\";\r\n\t\tif (forceall) RVS.L[id].position.ingrouppositoin = RVS.L[id].position.position;\r\n\t\tif (RVS.L[RVS.L[id].group.puid]!==undefined && (RVS.L[RVS.L[id].group.puid].type===\"group\" || RVS.L[RVS.L[id].group.puid].type===\"column\")) {\r\n\t\t\tRVS.H[id].w[0].classList.add(RVS.L[id].position.position=='relative' ? '_lc_i_rel' : '_lc_i_abs');\r\n\t\t}\r\n\r\n\r\n\t}\r\n\t/*\r\n\tINIT CUSTOM EVENT LISTENERS FOR TRIGGERING FUNCTIONS\r\n\t*/\r\n\tfunction initLocalListeners() {\r\n\r\n\t\t// Drop Function for Images and Videos\r\n\t\tjQuery('#builderView').on('dragover dragenter', function(e) {\r\n\t\t\tvar dt = e.originalEvent.dataTransfer;\r\n  \t\t\tif ((dt.types && (dt.types.indexOf ? dt.types.indexOf('Files') != -1 : dt.types.contains('Files'))) && (!RVS.S.dragginginside && jQuery('#filedrop').length===0))\r\n\t\t\t\t RVS.F.browserDroppable.init({onlydrop:true, success:\"uploadImagesAndCreateLayer\", action:\"add_to_media_library\"});\r\n\t\t\telse return;\r\n\r\n\t\t });\r\n\r\n\t\tRVS.DOC.on('positionPositionUpdate',function(evt,data) {\r\n\t\t\tif (data!==undefined) {\r\n\t\t\t\tRVS.F.updateLayerPositionClass(data.layerid,true);\r\n\t\t\t\tvar of;\r\n\t\t\t\tif (RVS.L[RVS.L[data.layerid].group.puid]!==undefined && (RVS.L[RVS.L[data.layerid].group.puid].type===\"group\" || RVS.L[RVS.L[data.layerid].group.puid].type===\"column\")) {\r\n\t\t\t\t\tof = { top : RVS.H[data.layerid].w[0].offsetTop, left:RVS.H[data.layerid].w[0].offsetLeft}\r\n\t\t\t\t\tif (RVS.C.layer_pos_x!==undefined) RVS.C.layer_pos_x.value = of.top;\r\n\t\t\t\t\tif (RVS.C.layer_pos_y!==undefined) RVS.C.layer_pos_y.value = of.left;\r\n\t\t\t\t\tRVS.F.updateEasyInputs({container:jQuery('.layer_settings_collector'), path:RVS.S.slideId+\".layers.\", trigger:\"init\", multiselection:true});\r\n\t\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\t\tRVS.DOC.trigger('sliderSizeChanged');\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('layerAlignChanged',function(evt,data) {\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('windowresized',function() {\r\n\t\t\tRVS.F.updateCoveredLayers();\r\n\t\t\tRVS.F.drawSlideBasedPercenatages();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('windowresized, updatesliderlayout_main',function() {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tRVS.F.updateCoveredLayers(true);\r\n\t\t\t},250);\r\n\t\t});\r\n\r\n\t\t// Update HTML5 Video Poster from Media Library\r\n\t\tRVS.DOC.on('updatelayerpostermpeg',function(a,b) {\r\n\t\t\tif (b!==undefined && b.val!==undefined) {\r\n\t\t\t\tRVS.F.videoExtract.get(b.val,function(data) {\r\n\t\t\t\t\tRVS.F.setBGPosterImage(data.path,data.id,\"layer\");\r\n\t\t\t\t},document.getElementById(\"layer_video_start\").value,\"layer\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('uploadImagesAndCreateLayer',function(e,param) {\r\n\t\t\tif (param!==undefined && param.path!==undefined && param.path.length>4) {\r\n\t\t\t\tvar type = (param.path.substr(param.path.length - 4)).toLowerCase();\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase \".png\":\r\n\t\t\t\t\tcase \".bmp\":\r\n\t\t\t\t\tcase \".jpg\":\r\n\t\t\t\t\tcase \".gif\":\r\n\t\t\t\t\tcase \"jpeg\":\r\n\t\t\t\t\t\tvar newID = RVS.F.addLayer({type:\"image\",forceSelect:true,subtype:\"predefined\", extension:{size:{originalHeight:param.height, originalWidth:param.width}, media:{imageId:param.id, imageUrl:param.path}}});\r\n\t\t\t\t\t\tRVS.F.intelligentUpdateValuesOnLayer(newID);\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tRVS.DOC.trigger('restoreLayersSize');\r\n\t\t\t\t\t\t},500);\r\n\t\t\t\t\t\tRVS.F.selectLayers({id:newID,overwrite:true, action:\"add\"});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \".mp4\":\r\n\t\t\t\t\tcase \".mp3\":\r\n\t\t\t\t\tcase \".mov\":\r\n\t\t\t\t\tcase \".m4v\":\r\n\t\t\t\t\tcase \"mpeg\":\r\n\t\t\t\t\t\tvar newID = RVS.F.addLayer({type:\"video\",forceSelect:true,subtype:\"predefined\", extension:{media:{id:param.id, mp4Url:param.path}}});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.convert_layer_into',function() {\r\n\t\t\tvar into = this.dataset.into;\r\n\t\t\tif (into===\"none\") return;\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tRVS.L[RVS.selLayers[lid]].type = into;\r\n\t\t\t\tRVS.L[RVS.selLayers[lid]] = RVS.F.addLayerObj(RVS.F.safeExtend(true,RVS.F.addLayerObj(into,undefined,false,true), RVS.L[RVS.selLayers[lid]]));\r\n\t\t\t\tRVS.H[RVS.selLayers[lid]].w.remove();\r\n\t\t\t\tdelete RVS.H[RVS.selLayers[lid]];\r\n\t\t\t\tRVS.F.buildHTMLLayer({uid:RVS.selLayers[lid]});\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[lid]});\r\n\t\t\t\tjQuery('#tllayerlist_element_276_'+RVS.selLayers[lid]).find('.layerlist_element_type').html('<i class=\"material-icons\">'+RVS.F.getLayerIcon(into)+'</i>');\r\n\t\t\t\tRVS.F.showInfo({content:RVS_LANG.convertedlayer, type:\"success\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t}\r\n\r\n\t\t\twindow.lastselectedlayers = new Array();\r\n\t\t\tfor (var i in RVS.selLayers) if (RVS.selLayers.hasOwnProperty(i)) lastselectedlayers.push(RVS.selLayers[i]);\r\n\t\t\tRVS.F.showForms(RVS.eMode.menu,true);\r\n\t\t\tfor (var i in lastselectedlayers) if (lastselectedlayers.hasOwnProperty(i)) RVS.F.selectLayers({id:lastselectedlayers[i],overwrite:false, action:\"add\"});\r\n            RVS.F.updateLayerInputFields();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateLayerLoopTimelineframes', function(e,p) {\r\n\t\t\tif (p!==undefined && p.eventparam==\"updateAllLayerFrames\") RVS.F.updateAllLayerFrames();\r\n\t\t\tRVS.F.updateLayerTimelineLoopLists();\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('updateCustomCSSLayerInput',  RVS.F.updateCustomCSS);\r\n\r\n\t\tRVS.DOC.on('showhidelayerlooping',function(a,b) {\r\n\t\t\tjQuery('.la_loopings_tab').hide();\r\n\t\t\tjQuery('#la_loopings_tab_'+b).show();\r\n\t\t});\r\n\r\n\r\n\t\tRVS.DOC.on('redrawInnerHTML',function(e,param) {\r\n\t\t\tRVS.F.redrawTextLayerInnerHTML(param.layerid);\r\n\t\t});\r\n\r\n\t\t//TEXT LAYER CONTENT CHANGE\r\n\t\tRVS.DOC.on('layerTextContentUpdate',function(e,a) {\r\n\t\t\tif (a!==undefined && a.val!==undefined)\r\n\t\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\t\tvar uid = RVS.selLayers[lid];\r\n\t\t\t\t\tif (RVS.L[uid].type===\"text\" || RVS.L[uid].type===\"button\") {\r\n\t\t\t\t\t\tif (RVS.C.toggledTextButton.className.indexOf('selected')>=0 && (!RVS.L[uid].toggle.set || RVS.L[uid].toggle.text==\"\")) continue;\r\n\t\t\t\t\t\tif (RVS.H[uid].splitText!==undefined) RVS.H[uid].splitText.revert();\r\n\t\t\t\t\t\tRVS.H[uid].splitText = undefined;\r\n\t\t\t\t\t\tif (a.eventparam===\"placeholder\" && (a.val.length===0 || a.val===\"\" || a.val===\" \"))\r\n\t\t\t\t\t\t\tRVS.H[uid].c[0].innerHTML = jQuery.inArray(RVS.L[uid].idle.whiteSpace[RVS.screen].v,[\"normal\",\"nowrap\"])>=0 ? RVS.F.replaceMetas(RVS.L[uid].text) : RVS.F.replaceMetas(RVS.L[uid].text.replace(/\\r\\n|\\r|\\n/g,\"<br />\"));\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\tif (RVS.L[uid].placeholder===undefined || RVS.L[uid].placeholder===\"\" || a.eventparam===\"placeholder\") RVS.H[uid].c[0].innerHTML = jQuery.inArray(RVS.L[uid].idle.whiteSpace[RVS.screen].v,[\"normal\",\"nowrap\"])>=0 ? RVS.F.replaceMetas(a.val) : RVS.F.replaceMetas(a.val.replace(/\\r\\n|\\r|\\n/g,\"<br />\"));\r\n\t\t\t\t\t\tRVS.F.drawHTMLLayer({uid:uid,ignoreLayerAnimation:true});\r\n\t\t\t\t\t\tif (RVS.H[uid].splitText!==undefined) RVS.F.updateLayerFrames({layerid:uid});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t// TEXT LAYER INPUT CHANGES\r\n\t\tRVS.DOC.on('input','#ta_layertext',function() {\r\n\t\t\tvar a = this.value;\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tvar uid = RVS.selLayers[lid];\r\n\t\t\t\tif (RVS.L[uid].type===\"text\" || RVS.L[uid].type===\"button\") {\r\n\t\t\t\t\tif (RVS.H[uid].splitText!==undefined) RVS.H[uid].splitText.revert();\r\n\t\t\t\t\tRVS.H[uid].splitText = undefined;\r\n\t\t\t\t\t RVS.H[uid].c[0].innerHTML = jQuery.inArray(RVS.L[uid].idle.whiteSpace[RVS.screen].v,[\"normal\",\"nowrap\"])>=0 ? RVS.F.replaceMetas(a) : RVS.F.replaceMetas(a.replace(/\\r\\n|\\r|\\n/g,\"<br />\"));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\r\n\t\t// INSERT LINEBREAK AT POSITION\r\n\t\tRVS.DOC.on('addBRtoTextLayer',function(e,a) {\r\n\t\t\tvar insertAt = jQuery('#ta_layertext')[0].selectionStart;\r\n\t\t\tRVS.F.openBackupGroup({id:\"insertlinebreak\",txt:\"Insert Line Break\",icon:\"subdirectory_arrow_right\"});\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tvar uid = RVS.selLayers[lid],\r\n\t\t\t\t\tpre = RVS.S.slideId+\".layers.\"+uid+\".text\",\r\n\t\t\t\t\tfront = RVS.L[uid].text.substring(0, insertAt),\r\n\t\t\t\t\tback = RVS.L[uid].text.substring(insertAt, RVS.L[uid].text.length);\r\n\t\t\t\tRVS.F.updateSliderObj({path:pre,val:front + '<br />' + back});\r\n\t\t\t\tRVS.F.redrawTextLayerInnerHTML(uid,true);\r\n\t\t\t\t//RVS.F.drawHTMLLayer({uid:uid});\r\n\t\t\t}\r\n\t\t\tRVS.F.closeBackupGroup({id:\"insertlinebreak\"});\r\n\t\t\tRVS.F.updateLayerInputFields();\r\n\t\t});\r\n\r\n\r\n\t\t//SCREEN SIZE CHANGED, NEED TO REFRESH FIELDS\r\n\t\tRVS.DOC.on('screenSelectorChanged',function() {\r\n\t\t\twindow.lastselectedlayers = new Array();\r\n\t\t\tfor (var i in RVS.selLayers) if (RVS.selLayers.hasOwnProperty(i)) lastselectedlayers.push(RVS.selLayers[i]);\r\n\t\t\tif (RVS.SLIDER[RVS.S.slideId].slide.static.isstatic && RVS.S.lastShownSlideId !== undefined) {\r\n\t\t\t\tRVS.F.showWaitAMinute({fadeIn:50,text:\"Please Wait\"});\r\n\t\t\t\ttpGS.gsap.to('#rev_slider_ul',0.05,{opacity:0});\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tvar backtoslideid = RVS.S.slideId;\r\n\t\t\t\t\tRVS.F.mainMode({mode:\"slidelayout\",slide:RVS.S.lastShownSlideId});\r\n\t\t\t\t\tRVS.F.updateLayerInputFields();RVS.F.expandCollapseTimeLine(true,\"open\");\r\n\t\t\t\t\tRVS.F.sliderUpdateAfterResize();\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tRVS.F.mainMode({mode:\"slidelayout\",slide:backtoslideid});\r\n\t\t\t\t\t\tRVS.F.showForms(RVS.eMode.menu,true);\r\n\t\t\t\t\t\tRVS.F.sliderUpdateAfterResize();\r\n\t\t\t\t\t\tfor (var i in lastselectedlayers) if (lastselectedlayers.hasOwnProperty(i)) RVS.F.selectLayers({id:lastselectedlayers[i],overwrite:false, action:\"add\"});\r\n\t\t\t\t\t\tRVS.F.showWaitAMinute({fadeOut:200,text:\"Please Wait\"});\r\n\t\t\t\t\t\ttpGS.gsap.to('#rev_slider_ul',0.5,{opacity:1});\r\n\t\t\t\t\t},250);\r\n\t\t\t\t},100);\r\n\t\t\t}\r\n\t\t\tRVS.F.updateAllHTMLLayerPositions();\r\n\t\t\tRVS.F.updateLayerInputFields();RVS.F.expandCollapseTimeLine(true,\"open\");\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('sliderSizeChanged',function() {\r\n\t\t\t//RVS.F.buildHTMLLayers();\r\n\t\t\tRVS.F.drawHTMLLayers();\r\n\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"GoToIdle\"});\r\n\t\t});\r\n\r\n\t\t//UPDATE LAYER BACKGROUND IMAGE\r\n\t\tRVS.DOC.on('updatelayerbgimage',RVS.F.updateLayerBgImage);\r\n\r\n\t\t//UPDATE LAYER SRC IMAGE\r\n\t\tRVS.DOC.on('updatelayerimagesrc',RVS.F.updateLayerImageSrc);\r\n\r\n\t\t//UPDATE LAYER VIDEO MEDIA SRC\r\n\t\tRVS.DOC.on('resetVideoPlaceholder',RVS.F.resetVideoPlaceholder);\r\n\r\n\t\t//RESYNC VIDEO ASPECT RATIO\r\n\t\tRVS.DOC.on('syncVideoRatio',RVS.F.resyncVideoAspectRatio);\r\n\r\n\t\t//LOCK/UNLOCK MARGIN AND PADDING FIELDS\r\n\t\tRVS.DOC.on('lockMargin',function(e,ds) {RVS.F.lockUnlockMarginPadding(ds,\"margin\",\".#size#.v\");});\r\n\t\tRVS.DOC.on('lockPadding',function(e,ds) {RVS.F.lockUnlockMarginPadding(ds,\"padding\",\".#size#.v\");});\r\n\t\tRVS.DOC.on('lockBorder',function(e,ds) {RVS.F.lockUnlockMarginPadding(ds,\"borderWidth\",\"\");});\r\n\t\tRVS.DOC.on('lockBorderRadius',function(e,ds) {RVS.F.lockUnlockMarginPadding(ds,\"borderRadius\",\".v\");});\r\n\t\tRVS.DOC.on('lockBorderHover',function(e,ds) {RVS.F.lockUnlockMarginPadding(ds,\"borderWidth\",\"\",\"hover\");});\r\n\t\tRVS.DOC.on('lockBorderRadiusHover',function(e,ds) {RVS.F.lockUnlockMarginPadding(ds,\"borderRadius\",\".v\",\"hover\");});\r\n\r\n\t\tRVS.DOC.on('updateMarginInput',function(e,ds) {RVS.F.updateMarginPaddingValues(ds,\"margin\",\".#size#.v\");});\r\n\t\tRVS.DOC.on('updatePaddingInput',function(e,ds) {RVS.F.updateMarginPaddingValues(ds,\"padding\",\".#size#.v\");});\r\n\r\n\t\tRVS.DOC.on('updateBorderInput',function(e,ds) {RVS.F.updateMarginPaddingValues(ds,\"borderWidth\",\"\");});\r\n\t\tRVS.DOC.on('updateBorderRadiusInput',function(e,ds) {RVS.F.updateMarginPaddingValues(ds,\"borderRadius\",\".v\");});\r\n\t\tRVS.DOC.on('updateBorderInputHover',function(e,ds) {RVS.F.updateMarginPaddingValues(ds,\"borderWidth\",\"\",\"hover\");});\r\n\t\tRVS.DOC.on('updateBorderRadiusInputHover',function(e,ds) {RVS.F.updateMarginPaddingValues(ds,\"borderRadius\",\".v\",\"hover\");});\r\n\r\n\t\t//MANIUPLATE FONT WEIGHTS BASED ON AVAILABLE FONT WEIGHTS\r\n\t\tRVS.DOC.on('updateFontFamily',function(e,p) {\r\n\t\t\tp = p === 'fontweight';\r\n\t\t\tRVS.F.checkUsedFonts(p);\r\n\t\t});\r\n\r\n\t\t//UPDATE INPUT FIELDS ON EVENT\r\n\t\tRVS.DOC.on('updateInputFields',function(e,p) {\r\n\t\t\tRVS.F.updateLayerInputFields();\r\n\t\t});\r\n\r\n\t\t/* LAYER SIZE CHANGE, NEED TO CHANGE ALL DEPENDING ATTRIBUTES */\r\n\t\tRVS.DOC.on('layerSizeChange',function(e,ds) {\r\n\t\t\tRVS.F.changeLayerSizes({direction:ds.eventparam, v:ds.val});\r\n\t\t\tfor (var si in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(si)) continue;\r\n\t\t\t\tvar i = RVS.selLayers[si]\r\n\t\t\t\tRVS.F.updateHTMLLayerPosition({ uid:i, updateValues:false,lhCwidth:RVS.H[i].c.outerWidth(), lhCheight:RVS.H[i].c.outerHeight()});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/*LAYER AUDIO CONTROL CHANGED, SIZE MUST BE CHECKED */\r\n\t\tRVS.DOC.on('audioControlOnOff',function(e,ds) {\r\n\t\t\tRVS.F.changeAudioLayerSize({v:ds.val});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('disableAllMediaControls',function(e,ds) {\r\n\t\t\tRVS.F.changeMediaControlsInteraction({v:ds.val});\r\n\t\t});\r\n\r\n\t\t/* LAYER SIZE ASPECT RATIO LOCKED */\r\n\t\tRVS.DOC.on('lockLayerRatio',function(e,ds) {\r\n\t\t\tRVS.F.lockUnlockLayerRatio(ds);\r\n\t\t});\r\n\r\n\t\tRVS.F.updateInsetViews = function(uid) {\r\n\t\t\t//if (RVS.L[uid]==undefined || RVS.L[uid])\r\n\t\t};\r\n\r\n\t\tRVS.F.updateAllInsetViews = function() {\r\n\t\t\tfor (var lid in RVS.selLayers)\r\n\t\t\t\tif(RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t}\r\n\r\n\t\tRVS.DOC.on('layerSizePreset',function(e,ds) {\r\n\t\t\tRVS.F.openBackupGroup({id:\"layerresize\",txt:\"Size Preset\",icon:\"photo_size_select_large\"});\r\n\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tvar l = RVS.L[RVS.selLayers[lid]],\r\n\t\t\t\t\tpre = RVS.S.slideId+\".layers.\"+RVS.selLayers[lid]+\".\",\r\n\t\t\t\t\tcmo = document.getElementById('layer_covermode');\r\n\t\t\t\t//PROTECTION Against FULLINSET && Not in Group with Position Absolute\r\n\t\t\t\tif (cmo.value==\"fullinset\" && (l.position.position!==\"absolute\" ||  RVS.L[l.group.puid]==undefined ||  RVS.L[l.group.puid].type!==\"group\")) {\r\n\t\t\t\t\tcmo.value = l.size.covermode;\r\n\t\t\t\t\tds.val=l.size.covermode;\r\n\t\t\t\t\tRVS.F.showInfo({content:RVS_LANG.insetrequirements, type:\"warning\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Protection against % based heights of layers in columns\r\n\t\t\t\tif (RVS.L[l.group.puid]!==undefined && RVS.L[l.group.puid].type===\"column\" && (l.type===\"shape\" | l.type===\"button\" || l.type==\"text\")) {\r\n\t\t\t\t\tds.val = \"custom\";\r\n\t\t\t\t\tcmo.value=\"custom\";\r\n\t\t\t\t}\r\n\t\t\t\tif (RVS.L[RVS.selLayers[lid]].size.covermode==\"fullinset\" && cmo.value!==\"fullinset\") RVS.F.updateSliderObj({path:pre+'idle.margin.#size#.v',val:[0,0,0,0]});\r\n\r\n\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.covermode',val:ds.val});\r\n\r\n\t\t\t\tswitch (cmo.value) {\r\n\t\t\t\t\tcase \"custom\":\r\n\r\n\t\t\t\t\t\tif (RVS.L[RVS.selLayers[lid]].type===\"image\") {\r\n\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.scaleProportional',val:true});\r\n\t\t\t\t\t\t\tvar newDims = RVS.F.getProportionalSizes({\tproportional:true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype:\"fit\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\timage:{width:l.size.originalWidth, height:l.size.originalHeight},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewPort:{width:l.size.width[RVS.screen].v, height:l.size.height[RVS.screen].v}\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.width.#size#.v',val:newDims.width+\"px\"});\r\n\t\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.height.#size#.v',val:newDims.height+\"px\"});\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fullwidth\":\r\n\t\t\t\t\t\tif (RVS.L[RVS.selLayers[lid]].type===\"image\") RVS.F.updateSliderObj({path:pre+'size.scaleProportional',val:true});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'position.x.#size#.v',val:\"0px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.width.#size#.v',val:\"100%\"});\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fullheight\":\r\n\t\t\t\t\t\tif (RVS.L[RVS.selLayers[lid]].type===\"image\") RVS.F.updateSliderObj({path:pre+'size.scaleProportional',val:true});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'position.y.#size#.v',val:\"0px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.height.#size#.v',val:\"100%\"});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"cover-proportional\":\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.scaleProportional',val:true});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'position.x.#size#.v',val:\"0px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.width.#size#.v',val:\"100%\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'position.y.#size#.v',val:\"0px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.height.#size#.v',val:\"100%\"});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"cover\":\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.scaleProportional',val:false});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'position.x.#size#.v',val:\"0px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.width.#size#.v',val:\"100%\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'position.y.#size#.v',val:\"0px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.height.#size#.v',val:\"100%\"});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fullinset\":\r\n\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'position.x.#size#.v',val:\"0px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.width.#size#.v',val:\"100%\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'position.y.#size#.v',val:\"0px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.height.#size#.v',val:\"100%\"});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.selectedLayersVisualUpdate();\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[lid]});\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.closeBackupGroup({id:\"layerresize\"});\r\n\t\t\tRVS.F.updateLayerInputFields();\r\n\t\t});\r\n\r\n\t\t// RESTORE ORIGINAL SIZE OF LAYER\r\n\t\tRVS.DOC.on('restoreLayersSize',function(a,b) {\r\n\t\t\tRVS.F.openBackupGroup({id:\"layerresize\",txt:\"Restore Original Size\",icon:\"photo_size_select_large\"});\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tvar l = RVS.L[RVS.selLayers[lid]],\r\n\t\t\t\t\tpre = RVS.S.slideId+\".layers.\"+RVS.selLayers[lid]+\".\";\r\n\t\t\t\tswitch (l.type) {\r\n\t\t\t\t\tcase \"shape\":\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.width.#size#.v',val:l.size.originalWidth+\"px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.height.#size#.v',val:l.size.originalHeight+\"px\"});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"image\":\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.width.#size#.v',val:l.size.originalWidth+\"px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.height.#size#.v',val:l.size.originalHeight+\"px\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.scaleProportional',val:true});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"video\":\r\n\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.width.#size#.v',val:RVS.F.retWitSuf(l.size.originalWidth,\"px\")});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.height.#size#.v',val:RVS.F.retWitSuf(l.size.originalHeight,\"px\")});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.scaleProportional',val:true});\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.width.#size#.v',val:\"auto\"});\r\n\t\t\t\t\t\tRVS.F.updateSliderObj({path:pre+'size.height.#size#.v',val:\"auto\"});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[lid]});\r\n\t\t\t}\r\n\t\t\tRVS.F.closeBackupGroup({id:\"layerresize\"});\r\n\t\t\tRVS.F.updateLayerInputFields();\r\n\t\t});\r\n\r\n\t\t// UPDATE AVAILABLE KEYFRAMES IN LIST\r\n\t\tRVS.DOC.on('updateKeyFramesList',function() {\r\n\r\n\t\t\tif (RVS.selLayers.length===0) return;\r\n\t\t\tRVS.S.keyFrame = RVS.S.keyFrame===\"idle\" ? RVS.L[RVS.selLayers[0]].timeline.frameToIdle : RVS.S.keyFrame;\r\n\t\t\tkeyframe_lists = keyframe_lists===undefined ? jQuery(\"#le_keyframes_list_innerwrap\") : keyframe_lists;\r\n\t\t\tkeyframe_idle_sel = keyframe_idle_sel===undefined ? jQuery(\"#set_editor_view\") : keyframe_idle_sel;\r\n\t\t\tRVS.LIB.LAYERANIMS.animSettings[0].className = \"selected_\"+RVS.S.keyFrame;\r\n\t\t\tRVS.LIB.LAYERANIMS.translists[\"0\"].detach();\r\n\t\t\tRVS.LIB.LAYERANIMS.translists[\"999\"].detach();\r\n\t\t\tvar list = \"\";\r\n\r\n\t\t\tRVS.F.getFrameOrder({layerid:RVS.selLayers[0]});\r\n\t\t\t// var m=l=c=w=false;\r\n\r\n\r\n\t\t\tfor (var i in RVS.L[RVS.selLayers[0]].timeline.frameOrder) {\r\n\t\t\t\tif(!RVS.L[RVS.selLayers[0]].timeline.frameOrder.hasOwnProperty(i)) continue;\r\n\t\t\t\t var frame = RVS.L[RVS.selLayers[0]].timeline.frameOrder[i].id,\r\n\t\t\t\t \tfnr = parseInt(i,0)+1,\r\n\t\t\t\t\tcls = RVS.S.keyFrame==frame ? ' selected' : '',\r\n\t\t\t\t\t/* idleicon = frame!==RVS.L[RVS.selLayers[0]].timeline.frameToIdle ? \"panorama_fish_eye\" : \"visibility\", */\r\n\t\t\t\t\t/* idleiconcls = frame!==RVS.L[RVS.selLayers[0]].timeline.frameToIdle ? \"\" : \"selected\", */\r\n\t\t\t\t\tafbe = frame===\"frame_999\" || frame===\"frame_0\" ? '' : '<div data-evtparam=\"'+frame+'\" data-evt=\"addkeyframe\" class=\"callEventButton basic_action_button add_frame_after\"><i class=\"material-icons\">add</i></div>',\r\n\t\t\t\t\ttoidle = ''; //frame===\"frame_999\" || frame===\"frame_0\" ? '' : '<div data-layerid=\"'+RVS.selLayers[0]+'\" data-frame=\"'+frame+'\" class=\"frame_list_eview '+idleiconcls+'\"><i class=\"material-icons\">'+idleicon+'</i></div>';\r\n\t\t\t\tif (RVS.S.keyFrame==frame) setKeyframeName(fnr);\r\n\t\t\t\tvar shownum = frame===\"frame_0\" ? \"IN\" : frame===\"frame_999\" ? \"OUT\" : \"TO\", //\"#\"+(fnr-2)\r\n\t\t\t\t\tdropdown = frame===\"frame_0\" || frame===\"frame_999\" ? '<i class=\"material-icons\">arrow_drop_down</i>' : '<i class=\"emptyspace20\"></i>',\r\n\t\t\t\t\teditorview = frame===RVS.L[RVS.selLayers[0]].timeline.frameToIdle ? '<i class=\"material-icons\">visibility</i>' : '',\r\n\t\t\t\t\teditorclass = editorview!=='' ? 'with_icon' : '';\r\n\r\n\t\t\t\tlist +='<li id=\"keyframe_list_el_'+frame+'\" class=\"keyframe_liste keyframe_liste_dyn '+cls+'\" data-framenr=\"'+fnr+'\" data-frame=\"'+frame+'\"><div class=\"keyframe_CP_wrap\" data-frame=\"'+frame+'\"><div class=\"keyframe_CP_toggle\"><i class=\"material-icons\">more_vert</i></div></div><div class=\"keyframe_liste_inner\"><span class=\"frame_list_id\">'+shownum+dropdown+'</span><span class=\"frame_list_title '+editorclass+'\">'+editorview+RVS.L[RVS.selLayers[0]].timeline.frames[frame].alias+'</span>'+afbe+'</div>'+toidle+'</li>';\r\n\t\t\t}\r\n\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].timeline.frameToIdle === RVS.S.keyFrame)\r\n\t\t\t\tkeyframe_idle_sel.addClass(\"disabled\");\r\n\t\t\telse\r\n\t\t\t\tkeyframe_idle_sel.removeClass(\"disabled\");\r\n\r\n\t\t\tkeyframe_lists[0].innerHTML = list;\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].timeline.tloop.use) {\r\n\t\t\t\tRVS.F.updateLayerTimelineLoopLists();\r\n\t\t\t}\r\n\t\t\tRVS.F.updateFrameOptionsVisual();\r\n\t\t});\r\n\r\n\t\t// CLICK ON KEYFRAME SHOULD UPDATE VALUES OF INPUT FIELDS  ---\r\n\t\tRVS.DOC.on('click','.keyframe_liste',function() {RVS.F.setKeyframeSelected(this.dataset.frame);});\r\n\r\n\r\n\r\n\t\t// CICK MAIN IDLE VIEW\r\n\t\tRVS.DOC.on('click','.frame_list_eview',function() {\r\n\t\t\tvar pre = RVS.S.slideId+\".layers.\"+RVS.selLayers[0]+\".timeline.frameToIdle\";\r\n\t\t\tRVS.F.updateSliderObj({path:pre,val:this.dataset.frame});\r\n\t\t\tRVS.DOC.trigger('updateKeyFramesList');\r\n\t\t});\r\n\r\n\r\n\t\t//ADD A SINGLE KEYFRAME TO THE ANIMATION\r\n\t\tRVS.DOC.on('addkeyframe',function(e,after) {\r\n\t\t\tif (RVS.selLayers.length===0) return;\r\n\t\t\tvar id = RVS.selLayers[0],\r\n\t\t\t\tnewframe = getLastFrameIndex({layerid:id}),\r\n\t\t\t\tfr = RVS.F.getPrevNextFrame({layerid:id, frame:after});\r\n\t\t\tif (fr.next.start>fr.cur.end+500) {\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"AddLayerFrame\",txt:\"Add KeyFrame\",icon:\"theaters\"});\r\n\t\t\t\tRVS.L[id].timeline.frames[newframe] = defaultFrame({speed:400, start:fr.cur.end+100,alias:RVS_LANG.animateto},newframe);\r\n\t\t\t\t//RVS.L[id].timeline.frames[newframe].transform = RVS.F.safeExtend(true,{},RVS.L[id].timeline.frames[after].transform);\r\n\t\t\t\t//RVS.L[id].timeline.frames[newframe].mask = RVS.F.safeExtend(true,{},RVS.L[id].timeline.frames[after].mask);\r\n\t\t\t\t//RVS.L[id].timeline.frames[newframe].bgcolor = RVS.F.safeExtend(true,{},RVS.L[id].timeline.frames[after].bgcolor);\r\n\t\t\t\t//RVS.L[id].timeline.frames[newframe].chars = RVS.F.safeExtend(true,{},RVS.L[id].timeline.frames[after].chars);\r\n\t\t\t\t//RVS.L[id].timeline.frames[newframe].words = RVS.F.safeExtend(true,{},RVS.L[id].timeline.frames[after].words);\r\n\t\t\t\t//RVS.L[id].timeline.frames[newframe].lines = RVS.F.safeExtend(true,{},RVS.L[id].timeline.frames[after].lines);\r\n\t\t\t\t try{\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].transform.originX = RVS.L[id].timeline.frames[after].transform.originX;\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].transform.originY = RVS.L[id].timeline.frames[after].transform.originY;\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].transform.originZ = RVS.L[id].timeline.frames[after].transform.originZ;\r\n\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].chars.originX = RVS.L[id].timeline.frames[after].chars.originX;\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].chars.originY = RVS.L[id].timeline.frames[after].chars.originY;\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].chars.originZ = RVS.L[id].timeline.frames[after].chars.originZ;\r\n\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].words.originX = RVS.L[id].timeline.frames[after].words.originX;\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].words.originY = RVS.L[id].timeline.frames[after].words.originY;\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].words.originZ = RVS.L[id].timeline.frames[after].words.originZ;\r\n\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].lines.originX = RVS.L[id].timeline.frames[after].lines.originX;\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].lines.originY = RVS.L[id].timeline.frames[after].lines.originY;\r\n\t\t\t\t \tRVS.L[id].timeline.frames[newframe].lines.originZ = RVS.L[id].timeline.frames[after].lines.originZ;\r\n\t\t\t\t } catch(e) { console.info(e);}\r\n\r\n\t\t\t\tRVS.L[id].timeline.frames[newframe].color = RVS.F.safeExtend(true,{},RVS.L[id].timeline.frames[after].color);\r\n\t\t\t\tRVS.L[id].timeline.frames[newframe].filter = RVS.F.safeExtend(true,{},RVS.L[id].timeline.frames[after].filter);\r\n\r\n\t\t\t\tRVS.F.backup({\r\n\t\t\t\t\t\tpath:id+\".timeline.frames.\"+newframe,\r\n\t\t\t\t\t\tcache:undefined,\r\n\t\t\t\t\t\ticon:\"theaters\",\r\n\t\t\t\t\t\ttxt:\"Add Layer Keyframe\",\r\n\t\t\t\t\t\tlastkey:newframe,\r\n\t\t\t\t\t\tlayer:id,\r\n\t\t\t\t\t\tslide:RVS.S.slideId,\r\n\t\t\t\t\t\tframe:newframe,\r\n\t\t\t\t\t\tforce:true,\r\n\t\t\t\t\t\tval:RVS.L[id].timeline.frames[newframe],\r\n\t\t\t\t\t\told:{},\r\n\t\t\t\t\t\tbackupType:\"frame\",\r\n\t\t\t\t\t\tbckpGrType:\"AddLayerFrame\"\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"AddLayerFrame\"});\r\n\r\n\t\t\t\tRVS.F.addLayerFrameOnDemand(RVS.L[id], document.getElementById('tllayerlist_element_'+RVS.S.slideId+'_'+id), newframe);\r\n\t\t\t\tRVS.F.getFrameOrder({layerid:id});\r\n\t\t\t\tRVS.F.updateFramesZIndexes({layerid:id});\r\n\t\t\t\tRVS.DOC.trigger('updateKeyFramesList');\r\n\t\t\t\tRVS.S.keyFrame = newframe;\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tRVS.F.setKeyframeSelected(newframe);\r\n\t\t\t\t},20);\r\n\t\t\t} else {\r\n\t\t\t\tRVS.F.showInfo({content:RVS_LANG.notenoughspaceontimeline, type:\"warning\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//REMOVE SINGLE KEYFRAME\r\n\t\tRVS.DOC.on('click','#remove_keyframe',function() {\r\n\t\t\tvar id = RVS.selLayers[0];\r\n\t\t\tRVS.F.openBackupGroup({id:\"RemoveLayerFrame\",txt:\"Remove KeyFrame\",icon:\"theaters\"});\r\n\t\t\tRVS.F.backup({\r\n\t\t\t\t\t\tpath:id+\".timeline.frames.\"+RVS.S.keyFrame,\r\n\t\t\t\t\t\tcache:undefined,\r\n\t\t\t\t\t\ticon:\"theaters\",\r\n\t\t\t\t\t\ttxt:\"Remove Layer Keyframe\",\r\n\t\t\t\t\t\tlastkey:RVS.S.keyFrame,\r\n\t\t\t\t\t\tlayer:id,\r\n\t\t\t\t\t\tslide:RVS.S.slideId,\r\n\t\t\t\t\t\tframe:RVS.S.keyFrame,\r\n\t\t\t\t\t\tforce:true,\r\n\t\t\t\t\t\tval:{},\r\n\t\t\t\t\t\told:RVS.L[id].timeline.frames[RVS.S.keyFrame],\r\n\t\t\t\t\t\tbackupType:\"frame\",\r\n\t\t\t\t\t\tbckpGrType:\"RemoveLayerFrame\"\r\n\t\t\t\t\t});\r\n\t\t\tdelete RVS.L[id].timeline.frames[RVS.S.keyFrame];\r\n\t\t\tjQuery('#'+RVS.S.slideId+\"_\"+id+\"_\"+RVS.S.keyFrame).remove();\r\n\r\n\t\t\tif (RVS.S.keyFrame === RVS.L[id].timeline.frameToIdle)\r\n\t\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+id+'.timeline.frameToIdle',val:\"frame_1\"});\r\n\r\n\t\t\tRVS.S.keyFrame = \"frame_1\";\r\n\r\n\t\t\tRVS.F.getFrameOrder({layerid:id});\r\n\t\t\tRVS.F.updateFramesZIndexes({layerid:id});\r\n\t\t\tRVS.DOC.trigger('updateKeyFramesList');\r\n\t\t\tRVS.F.updateLayerInputFields();\r\n\t\t\tRVS.F.closeBackupGroup({id:\"RemoveLayerFrame\"});\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','#set_editor_view',function() {\r\n\t\t\tvar id = RVS.selLayers[0];\r\n\t\t\tRVS.F.updateSliderObj({path:RVS.S.slideId+'.layers.'+id+'.timeline.frameToIdle',val:RVS.S.keyFrame});\r\n\t\t\tRVS.F.getFrameOrder({layerid:id});\r\n\t\t\tRVS.F.updateFramesZIndexes({layerid:id});\r\n\t\t\tRVS.DOC.trigger('updateKeyFramesList');\r\n\t\t\tRVS.F.renderLayerAnimation({layerid:RVS.selLayers[0]});\r\n\t\t});\r\n\r\n\t\t// SWITCH BETWEEN ANIMATION TRANSFORM MODES\r\n\t\tRVS.DOC.on('click','.transtarget_selector',function() {\r\n\t\t\tvar area=jQuery(this).closest('.form_inner');\r\n\t\t\tarea.find('.transtarget_selector').removeClass(\"selected\");\r\n\t\t\tthis.className +=\" selected\";\r\n\t\t\tarea.find('.group_transsettings').hide();\r\n\t\t\tjQuery(this.dataset.showtrans).show();\r\n\t\t\tRVS.S.frameTrgt = this.dataset.frametarget;\r\n\t\t});\r\n\r\n\t\t// SWITCH BETWEEN ANIMATION TRANSFORM MODES\r\n\t\tRVS.DOC.on('click','.looptarget_selector',function() {\r\n\t\t\tjQuery('.looptarget_selector').removeClass(\"selected\");\r\n\t\t\tthis.className +=\" selected\";\r\n\t\t\tjQuery('.group_loopsettings').hide();\r\n\t\t\tjQuery(this.dataset.showloop).show();\r\n\t\t});\r\n\r\n\t\t// COPY / PASTE FRAME SETTINGS --------\r\n\t\tRVS.DOC.on('click','.keyframe_CP_wrap',function() {\r\n\t\t\twindow.frameCopyPaste = window.frameCopyPaste===undefined ? { cache:undefined, tool:undefined} : window.frameCopyPaste;\r\n\t\t\twindow.frameCopyPaste.frame = this.dataset.frame===\"frame_0\" ? \"frame_1\" : this.dataset.frame;\r\n\t\t\twindow.frameCopyPaste.layerid = RVS.selLayers[0];\r\n\t\t\tif (window.frameCopyPaste.tool === undefined) {\r\n\t\t\t\tjQuery(document.body).append('<div id=\"frame_copypaste_tool\"><div class=\"copyframe\">'+RVS_LANG.copy+'</div><div class=\"pasteframe\">'+RVS_LANG.paste+'</div></div>');\r\n\t\t\t\twindow.frameCopyPaste.tool = jQuery('#frame_copypaste_tool');\r\n\t\t\t}\r\n\t\t\tif (window.frameCopyPaste.cache!==undefined)\r\n\t\t\t\twindow.frameCopyPaste.tool.addClass(\"copy_and_paste\");\r\n\t\t\telse\r\n\t\t\t\twindow.frameCopyPaste.tool.removeClass(\"copy_and_paste\");\r\n\t\t\twindow.frameCopyPaste.visible = true;\r\n\t\t\ttpGS.gsap.set(window.frameCopyPaste.tool,{display:\"block\", top:jQuery(this).offset().top});\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.copyframe',function() {\r\n\t\t\tif (window.frameCopyPaste.frame===\"frame_1\")\r\n\t\t\t\twindow.frameCopyPaste.cache_0 = RVS.F.safeExtend(true,{},RVS.L[window.frameCopyPaste.layerid].timeline.frames.frame_0);\r\n\t\t\telse\r\n\t\t\t\tdelete window.frameCopyPaste.cache_0;\r\n\r\n\t\t\twindow.frameCopyPaste.cache = RVS.F.safeExtend(true,{},RVS.L[window.frameCopyPaste.layerid].timeline.frames[window.frameCopyPaste.frame]);\r\n\t\t\twindow.frameCopyPaste.clipPath = RVS.F.safeExtend(true,{},RVS.L[window.frameCopyPaste.layerid].timeline.clipPath);\r\n\r\n\t\t\twindow.frameCopyPaste.splitlen = RVS.F.getSplitDelay({layerid:window.frameCopyPaste.layerid, frame:window.frameCopyPaste.frame});\r\n\t\t\twindow.frameCopyPaste.len = RVS.F.addT([window.frameCopyPaste.cache.timeline.speed,window.frameCopyPaste.splitlen]);\r\n\r\n\t\t\ttpGS.gsap.set(window.frameCopyPaste.tool,{display:\"none\"});\r\n\t\t\twindow.frameCopyPaste.visible = false;\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.pasteframe',function() {\r\n\t\t\tvar id = RVS.selLayers[0],\r\n\t\t\t\tframe = RVS.L[window.frameCopyPaste.layerid].timeline.frames[window.frameCopyPaste.frame],\r\n\t\t\t\tclipPath = RVS.L[window.frameCopyPaste.layerid].timeline.clipPath,\r\n\t\t\t\tframe_0 = window.frameCopyPaste.cache_0!==undefined ? RVS.L[window.frameCopyPaste.layerid].timeline.frames.frame_0 : undefined,\r\n\t\t\t\tfr = RVS.F.getPrevNextFrame({layerid:id, frame:window.frameCopyPaste.frame}),\r\n\t\t\t\tprognose = RVS.F.addT([frame.timeline.start,window.frameCopyPaste.len]);\r\n\r\n\t\t\tif (fr.next.start>prognose) {\r\n\t\t\t\tRVS.F.openBackupGroup({id:\"updateFrame\",txt:\"Copy Paste KeyFrame\",icon:\"theaters\"});\r\n\t\t\t\tvar newframe = RVS.F.safeExtend(true,window.frameCopyPaste.cache,{alias:frame.timeline.alias, timeline:{start:frame.timeline.start}}),\r\n\t\t\t\t\tnewclipPath = RVS.F.safeExtend(true,{},window.frameCopyPaste.clipPath),\r\n\t\t\t\t\tnewframe_0 = window.frameCopyPaste.cache_0!==undefined ? RVS.F.safeExtend(true,window.frameCopyPaste.cache_0,{alias:frame_0.timeline.alias, timeline:{start:frame_0.timeline.start}}) : undefined;\r\n\t\t\t\tif (window.frameCopyPaste.frame!==\"frame_999\") {\r\n\t\t\t\t\tnewframe.timeline.endWithSlide = false;\r\n\t\t\t\t\tnewframe.timeline.auto = false;\r\n\t\t\t\t}\r\n\t\t\t\t// BACKUP AND UPDATE MAIN FRAME\r\n\t\t\t\tRVS.F.backup({\r\n\t\t\t\t\t\tlastkey:window.frameCopyPaste.frame, frame:window.frameCopyPaste.frame,\r\n\t\t\t\t\t\tlayer:window.frameCopyPaste.layerid, path:window.frameCopyPaste.layerid+\".timeline.frames.\"+window.frameCopyPaste.frame,\r\n\t\t\t\t\t\tcache:undefined, icon:\"theaters\", txt:\"Copy Paste KeyFrame\", slide:RVS.S.slideId, force:true, val:newframe, old:frame, backupType:\"singleFrame\", bckpGrType:\"updateFrame\"\r\n\t\t\t\t});\r\n\t\t\t\t RVS.L[window.frameCopyPaste.layerid].timeline.frames[window.frameCopyPaste.frame] = RVS.F.safeExtend(true,{},newframe);\r\n\r\n\t\t\t\t // BACKUP AND UPDATE CLIPPATH\r\n\t\t\t\tRVS.F.backup({\r\n\t\t\t\t\t\tlastkey:window.frameCopyPaste.clipPath,\r\n\t\t\t\t\t\tlayer:window.frameCopyPaste.layerid, path:window.frameCopyPaste.layerid+\".timeline.clipPath\",\r\n\t\t\t\t\t\tcache:undefined, icon:\"theaters\", txt:\"Copy Paste clipPath\", slide:RVS.S.slideId, force:true, val:newclipPath, old:clipPath, backupType:\"clipPath\", bckpGrType:\"updateFrame\"\r\n\t\t\t\t});\r\n\t\t\t\t RVS.L[window.frameCopyPaste.layerid].timeline.clipPath = RVS.F.safeExtend(true,{},newclipPath);\r\n\r\n\t\t\t\t// BACKUP AND UPDATE FRAME_0 IF NEEDED\r\n\t\t\t\t if (frame_0!==undefined) {\r\n\t\t\t\t \tRVS.F.backup({\r\n\t\t\t\t\t\tlastkey:\"frame_0\", frame:\"frame_0\",\r\n\t\t\t\t\t\tlayer:window.frameCopyPaste.layerid, path:window.frameCopyPaste.layerid+\".timeline.frames.frame_0\",\r\n\t\t\t\t\t\tcache:undefined, icon:\"theaters\", txt:\"Copy Paste KeyFrame\", slide:RVS.S.slideId, force:true, val:newframe_0, old:frame_0, backupType:\"singleFrame\", bckpGrType:\"updateFrame\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\t RVS.L[window.frameCopyPaste.layerid].timeline.frames.frame_0 = RVS.F.safeExtend(true,{},newframe_0);\r\n\t\t\t\t }\r\n\r\n\t\t\t\tRVS.F.closeBackupGroup({id:\"updateFrame\"});\r\n\t\t\t\tRVS.F.updateAllLayerFrames();\r\n\t\t\t\tRVS.F.renderLayerAnimation({layerid:window.frameCopyPaste.layerid});\r\n\t\t\t\tRVS.F.updateTimeLine({force:true, state:\"time\",time:RVS.TL.cache.main, timeline:\"main\", forceFullLayerRender:true, updateCurTime:true});\r\n\t\t\t\tRVS.F.selectLayers({id:window.frameCopyPaste.layerid,overwrite:true, action:\"add\"});\r\n\t\t\t\t//RVS.F.updateEasyInputs({container:jQuery('#form_layer_animation'), path:RVS.S.slideId+\".layers.\", trigger:\"init\"});\r\n\t\t\t} else {\r\n\t\t\t\tRVS.F.showInfo({content:RVS_LANG.notenoughspaceontimeline, type:\"warning\", showdelay:0, hidedelay:2, hideon:\"\", event:\"\" });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('mouseleave','#frame_copypaste_tool',function() {\r\n\t\t\ttpGS.gsap.set(window.frameCopyPaste.tool,{display:\"none\"});\r\n\t\t\twindow.frameCopyPaste.visible = false;\r\n\t\t});\r\n\t\t// ----------\r\n\r\n\t\t//CHECK FRAME0 LEVELS, SMALLEST SAME LEVEL MUST BE SET !\r\n\t\tRVS.DOC.on('checkEnterFrameLevels',function(e,par) {\r\n\t\t\tif (par!==undefined && par.layerid!==undefined && (RVS.S.keyFrame===\"frame_1\" || RVS.S.keyFrame===\"frame_0\")) {\r\n\t\t\t\tvar otherkeyframe = RVS.S.keyFrame===\"frame_0\" ? \"frame_1\" : \"frame_0\";\r\n\t\t\t\tif (RVS.L[par.layerid].timeline.frames[RVS.S.keyFrame].chars.use) RVS.L[par.layerid].timeline.frames[otherkeyframe].chars.use = true;\r\n\t\t\t\tif (RVS.L[par.layerid].timeline.frames[RVS.S.keyFrame].words.use) RVS.L[par.layerid].timeline.frames[otherkeyframe].words.use = true;\r\n\t\t\t\tif (RVS.L[par.layerid].timeline.frames[RVS.S.keyFrame].lines.use) RVS.L[par.layerid].timeline.frames[otherkeyframe].lines.use = true;\r\n\t\t\t\tif (RVS.L[par.layerid].timeline.frames[RVS.S.keyFrame].mask.use) RVS.L[par.layerid].timeline.frames[otherkeyframe].mask.use = true;\r\n\t\t\t}\r\n\t\t\tRVS.F.updateFrameOptionsVisual();\r\n\t\t\tfor (var lid in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(lid)) continue;\r\n\t\t\t\tRVS.F.updateLayerFrame({layerid:parseInt(RVS.selLayers[lid],0), frame:(RVS.S.keyFrame!==\"frame_0\" ? RVS.S.keyFrame : \"frame_1\")});\r\n\t\t\t\tRVS.F.updateFrameRealSpeed();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// HANDLING OF KEYFRAME PREPARED ANIMATIONS\r\n\t\tRVS.DOC.on('click','.layer_transliste_head',function() {\r\n\t\t\tvar open = this.parentNode.className.indexOf(\"open\")>=0;\r\n\t\t\tjQuery('.layer_transliste').removeClass(\"open\");\r\n\t\t\tif (!open) this.parentNode.className +=\" open\";\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.frame_list_id',function() {\r\n\t\t\tjQuery('#keyframe_list_el_frame_0').append(RVS.LIB.LAYERANIMS.translists[\"0\"]);\r\n\t\t\tjQuery('#keyframe_list_el_frame_999').append(RVS.LIB.LAYERANIMS.translists[\"999\"]);\r\n\r\n\t\t\tvar open = this.parentNode.parentNode.className.indexOf(\"open\")>=0;\r\n\t\t\tjQuery('.keyframe_liste').removeClass(\"open\");\r\n\t\t\tif (!open) this.parentNode.parentNode.className +=\" open\";\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\r\n\r\n\t\t// OPEN THE SUBTEMPLATES OF A GROUP IN FRAME ANIMATION TEMPLATES\r\n\t\tRVS.DOC.on('click','.latransgroup_head',function() {\r\n\t\t\tvar open = this.parentNode.className.indexOf(\"open\")>=0;\r\n\t\t\tjQuery('.latransgroup').removeClass(\"open\");\r\n\t\t\tif (!open) this.parentNode.className +=\" open\";\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// CACHE THE CURRENT FRAME ANIMATION FOR LATER PROCESSES\r\n\t\tRVS.DOC.on('mouseover','.load_anim_value_wrap',function() {\r\n\t\t\tif (!window.timelineTemporaryCached) {\r\n\t\t\t\twindow.timelineTemporaryCached=true;\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].timelinecache = RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].timeline);\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t\t// RESET ORIGINAL FRAME ANIMATION AFTER TEMPLATE HAS BEEN SHOWN\r\n\t\tRVS.DOC.on('mouseleave','.load_anim_value_wrap',function() {\r\n\t\t\twindow.timelineTemporaryCached = false;\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].timelinecache!==undefined)\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].timeline = RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].timelinecache);\r\n\t\t\tdelete RVS.L[RVS.selLayers[0]].timelinecache;\r\n\t\t\tclearTimeout(window.timelineTemporaryUpdate);\r\n\t\t\twindow.timelineTemporaryUpdate = setTimeout(function() {\r\n\t\t\t\tRVS.F.updateLayerFrames({layerid:RVS.selLayers[0]});\r\n\t\t\t},50);\r\n\r\n\t\t\tif (!RVS.S.shwLayerAnim)\r\n\t\t\t\tRVS.F.stopAllLayerAnimation();\r\n\t\t\telse\r\n\t\t\t\tRVS.F.playLayerAnimation({layerid:RVS.selLayers[0]});\r\n\r\n\t\t\tRVS.F.buildMainTimeLine();\r\n\t\t\tif (RVS.TL.cache.main<=0)\r\n\t\t\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:0,refreshMainTimeLine:true, caller:\"load_anim_value_left\"});\r\n\t\t\telse\r\n\t\t\t\tRVS.F.updateTimeLine({force:true, state:\"time\",time:RVS.TL.cache.main, timeline:\"main\", forceFullLayerRender:true, updateCurTime:true});\r\n\r\n\t\t});\r\n\r\n\t\t// SHOW FRAME ANIMATION WITH TEMPLATE ANIMATION\r\n\t\tRVS.DOC.on('mouseover','.layer_trans_liste',function() {\r\n\t\t\tif (this.dataset.tindex===\"custom\") return false;\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].timelinecache===undefined) return;\r\n\t\t\tupdateTimeLineByTemplate(RVS.LIB.LAYERANIMS[this.dataset.lindex][this.dataset.gindex].transitions[this.dataset.tindex]);\r\n\t\t\tRVS.F.renderLayerAnimation({layerid:RVS.selLayers[0]});\r\n\t\t\tRVS.F.playLayerAnimation({layerid:RVS.selLayers[0], time:this.dataset.lindex===\"out\" ? \"frame_999\" : undefined});\r\n\t\t});\r\n\r\n\t\t// CHANGE FRAME ANIMATION FROM TEMPLATE AND BACKUP OLD ONE\r\n\t\tRVS.DOC.on('click','.layer_trans_liste',function() {\r\n\t\t\tif (RVS.L[RVS.selLayers[0]].timelinecache===undefined) return;\r\n\t\t\tif (this.dataset.tindex===\"custom\") {\r\n\t\t\t\tvar clse = jQuery(this);\r\n\t\t\t\tthis.dataset.mode=\"create\";\r\n\t\t\t\tclse.addClass(\"cla_showentername\");\r\n\t\t\t\tclse.find('input').trigger('focus').trigger('select');\r\n\t\t\t\tRVS.S.waitOnFeedback = { allowed:[\"cla_entername\", \"cla_answer_yes\",\"cla_answer_no\"], closeEvent:\"hideCustomLayerNameEntering\"};\r\n\t\t\t\tRVS.F.addBodyClickListener();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tRVS.F.changeLayerAnimation({direction:this.dataset.lindex, group:this.dataset.gindex, transition: this.dataset.tindex, fromLayerTransListe:true});\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t//HIDE CUSTOM LAYER NAME ENTERING PROCESS\r\n\t\tRVS.DOC.on('hideCustomLayerNameEntering',function() {\r\n\t\t\tjQuery('.cla_showentername').removeClass(\"cla_showentername\");\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.edit_custom_layeranimation',function() {\r\n\t\t\tvar ltl = this.dataset.evt!==undefined ? jQuery(this).closest('.presets_listelement') : jQuery(this).closest('.layer_trans_liste');\r\n\t\t\tltl[0].dataset.mode=\"rename\";\r\n\t\t\tltl.addClass(\"cla_showentername\");\r\n\t\t\tltl.find('input').trigger('focus').trigger('select');\r\n\t\t\tRVS.S.waitOnFeedback = { allowed:[\"cla_entername\", \"cla_answer_yes\",\"cla_answer_no\"], closeEvent:\"hideCustomLayerNameEntering\"};\r\n\t\t\tRVS.F.addBodyClickListener();\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.delete_custom_layeranimation',function() {\r\n\t\t\tvar ltl = this.dataset.evt!==undefined ? jQuery(this).closest('.presets_listelement') : jQuery(this).closest('.layer_trans_liste');\r\n\t\t\tltl[0].dataset.mode=\"delete\";\r\n\t\t\tltl.addClass(\"cla_showmessage\");\r\n\t\t\tltl.find('.cla_message').text(RVS_LANG.deletetemplate);\r\n\t\t\tRVS.S.waitOnFeedback = { allowed:[\"cla_answer_yes\",\"cla_answer_no\"], closeEvent:\"hideCustomLayerNameEntering\"};\r\n\t\t\tRVS.F.addBodyClickListener();\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.save_custom_layeranimation',function() {\r\n\t\t\tvar ltl = this.dataset.evt!==undefined ? jQuery(this).closest('.presets_listelement') : jQuery(this).closest('.layer_trans_liste');\r\n\t\t\tltl[0].dataset.mode=\"overwrite\";\r\n\t\t\tltl.addClass(\"cla_showmessage\");\r\n\t\t\tltl.find('.cla_message').text(RVS_LANG.overwritetemplate);\r\n\t\t\tRVS.S.waitOnFeedback = { allowed:[\"cla_answer_yes\",\"cla_answer_no\"], closeEvent:\"hideCustomLayerNameEntering\"};\r\n\t\t\tRVS.F.addBodyClickListener();\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('click','.cla_answer_no',function() {\r\n\t\t\tRVS.S.waitOnFeedback = undefined;\r\n\t\t\tjQuery(document.body).off('click.revbuilderbodyclick');\r\n\t\t\tjQuery('.cla_showentername').removeClass(\"cla_showentername\");\r\n\t\t\tjQuery('.cla_showmessage').removeClass(\"cla_showmessage\");\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t//CLICK ON YES CUSTOM LAYER TYPE FUN\r\n\t\tRVS.DOC.on('click','.cla_answer_yes',function() {\r\n\r\n\t\t\t// CUSTOM PRESET ELEMENT (EXTENDED BY ADDONS)\r\n\t\t\tif (this.dataset.evt!==undefined) {\r\n\t\t\t\tvar pl = jQuery(this).closest('.presets_listelement'),\r\n\t\t\t\t\tmode = pl[0].dataset.mode,\r\n\t\t\t\t\tnewname = pl.find('.cla_entername').val(), element;\r\n\r\n\t\t\t\t// CREATE LIST ELEMENT\r\n\t\t\t\tif (mode===\"create\") {\r\n\t\t\t\t\telement = jQuery('<div data-custom=\"true\" data-evt=\"'+this.dataset.evt+'\" class=\"presets_listelement dark_btn\"><span class=\"cla_custom_name\">'+newname+'</span><div class=\"cla_message\">'+RVS_LANG.overwritetemplate+'</div><input data-evt=\"'+this.dataset.evt+'\" type=\"text\" value=\"'+newname+'\" class=\"cla_entername\"><div class=\"custom_layer_animation_toolbar\"><i data-evt=\"'+this.dataset.evt+'\" class=\"cla_answer_yes material-icons\">done</i><i data-evt=\"'+this.dataset.evt+'\" class=\"cla_answer_no material-icons\">close</i><i data-evt=\"'+this.dataset.evt+'\" class=\"edit_custom_layeranimation material-icons\">edit</i><i data-evt=\"'+this.dataset.evt+'\" class=\"save_custom_layeranimation material-icons\">save</i><i data-evt=\"'+this.dataset.evt+'\" class=\"delete_custom_layeranimation material-icons\">delete</i></div></div>');\r\n\t\t\t\t\tpl.closest('.presets_listelements').append(element);\r\n\t\t\t\t}\r\n\t\t\t\tRVS.DOC.trigger(this.dataset.evt,{mode:mode, element:element, pl:pl, key:pl[0].dataset.key, newname:newname});\r\n\t\t\t} else {\r\n\t\t\t// ANIMATION PRESET ELEMENT\r\n\t\t\t\tvar ltl = jQuery(this).closest('.layer_trans_liste'),\r\n\t\t\t\t\tmode = ltl[0].dataset.mode,\r\n\t\t\t\t\tanimgroup = RVS.LIB.LAYERANIMS[ltl[0].dataset.lindex][ltl[0].dataset.gindex];\r\n\t\t\t\tswitch (mode) {\r\n\t\t\t\t\tcase \"rename\":\r\n\t\t\t\t\tcase \"overwrite\":\r\n\t\t\t\t\tcase \"create\":\r\n\t\t\t\t\t\tvar newname = ltl.find('.cla_entername').val(),\r\n\t\t\t\t\t\t\ttrans = {name:newname},\r\n\t\t\t\t\t\t\ttindex,\r\n\t\t\t\t\t\t\telement;\r\n\r\n\t\t\t\t\t\t// CREATE LIST ELEMENT\r\n\t\t\t\t\t\tif (ltl.data('tindex')===\"custom\" || mode===\"create\") {\r\n\t\t\t\t\t\t\telement = jQuery('<div data-lindex=\"'+ltl.data(\"lindex\")+'\" data-gindex=\"'+ltl.data(\"gindex\")+'\" class=\"layer_trans_liste dark_btn\"><span class=\"cla_custom_name\">'+newname+'</span><div class=\"cla_message\">'+RVS_LANG.overwritetemplate+'</div><input type=\"text\" value=\"'+newname+'\" class=\"cla_entername\"><div class=\"custom_layer_animation_toolbar\"><i class=\"cla_answer_yes material-icons\">done</i><i class=\"cla_answer_no material-icons\">close</i><i class=\"edit_custom_layeranimation material-icons\">edit</i><i class=\"save_custom_layeranimation material-icons\">save</i><i class=\"delete_custom_layeranimation material-icons\">delete</i></div></div>');\r\n\t\t\t\t\t\t\tltl.closest('.lainner_transitions').append(element);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// GET CHANGES\r\n\t\t\t\t\t\tif (mode===\"overwrite\" || ltl.data('tindex')===\"custom\" || mode===\"create\") {\r\n\t\t\t\t\t\t\tif (ltl.data('lindex')===\"in\") {\r\n\t\t\t\t\t\t\t\ttrans.frame_0 = simplifyFrame(RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].timelinecache.frames.frame_0));\r\n\t\t\t\t\t\t\t\ttrans.frame_1 = simplifyFrame(RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].timelinecache.frames.frame_1));\r\n\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tif (ltl.data('lindex')===\"out\")\r\n\t\t\t\t\t\t\t\ttrans.frame_999 = simplifyFrame(RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].timelinecache.frames.frame_999));\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tif (ltl.data('lindex')===\"loop\") {\r\n\t\t\t\t\t\t\t\ttrans = simplifyFrame(RVS.F.safeExtend(true,{},RVS.L[RVS.selLayers[0]].timelinecache.loop));\r\n\t\t\t\t\t\t\t\ttrans.name = newname;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// GET TINDEX\r\n\t\t\t\t\t\tif (mode===\"overwrite\" || mode==\"rename\")\r\n\t\t\t\t\t\t\ttindex = ltl.data(\"tindex\");\r\n\r\n\t\t\t\t\t\t// RENAME, TAKE FIRST EXISTING OBJECT\r\n\t\t\t\t\t\tif (mode===\"rename\") {\r\n\t\t\t\t\t\t\ttrans = animgroup.transitions[tindex];\r\n\t\t\t\t\t\t\tanimgroup.transitions[tindex].name=newname;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// CALL AJAX FUNCTION\r\n\t\t\t\t\t\tRVS.F.ajaxRequest('save_animation', {id:tindex, obj:trans, type:ltl[0].dataset.lindex}, function(response){\r\n\t\t\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\t\t\tanimgroup.transitions[response.id] = trans;\r\n\t\t\t\t\t\t\t\tif (ltl.data('tindex')===\"custom\" || mode===\"create\") element[0].dataset.tindex = response.id;\r\n\t\t\t\t\t\t\t\tif (mode===\"rename\") ltl.find('.cla_custom_name').text(newname);\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t\tRVS.F.ajaxRequest('delete_animation', {id:ltl[0].dataset.tindex},function(response) {\r\n\t\t\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\t\t\tdelete animgroup.transitions[ltl[0].dataset.tindex];\r\n\t\t\t\t\t\t\t\tltl.remove();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tRVS.S.waitOnFeedback = undefined;\r\n\t\t\tjQuery(document.body).off('click.revbuilderbodyclick');\r\n\t\t\tjQuery('.cla_showentername').removeClass(\"cla_showentername\");\r\n\t\t\tjQuery('.cla_showmessage').removeClass(\"cla_showmessage\");\r\n\t\t\treturn false;\r\n\r\n\t\t});\r\n\r\n\t\tRVS.DOC.on('SvgSelectAllChanged', function(e, obj){\r\n\t\t\tif(obj === undefined || obj.layerid === undefined) return;\r\n\t\t\tRVS.H[obj.layerid].c[0].innerHTML = RVS.L[obj.layerid].svg.renderedData;\r\n\t\t\tRVS.H[obj.layerid].svg = RVS.H[obj.layerid].w.find('svg');\r\n\t\t\tRVS.H[obj.layerid].svgPath = RVS.H[obj.layerid].w.find( !RVS.L[obj.layerid].idle.svg.styleAll ? 'svg path' : 'svg path, svg circle, svg ellipse, svg line, svg polygon, svg polyline, svg rect');\r\n\t\t});\r\n\t}\r\n\r\n\t// Update to Frame\r\n\tRVS.F.setKeyframeSelected = function(frame) {\r\n\t\tRVS.S.keyFrame = frame;\r\n\t\tsetKeyframeName(); //this.dataset.framenr);\r\n\t\tRVS.F.updateLayerInputFields();\r\n\t\tRVS.TL.cache.main = RVS.S.keyFrame===\"frame_0\" ? (RVS.F.getTimeAtSelectedFrameStart(\"frame_1\") / 100) : RVS.S.keyFrame===\"frame_999\" ? (RVS.F.getTimeAtSelectedFrameMiddle(\"frame_999\") / 100) : (RVS.F.getTimeAtSelectedFrameEnd()-2) / 100;\r\n\t\tRVS.TL.cache.main = RVS.TL.cache.main<0.01 ? 0.01 : RVS.TL.cache.main;\r\n\t\tRVS.F.updateTimeLine({force:true, state:\"time\",time:RVS.TL.cache.main, timeline:\"main\", forceFullLayerRender:true, updateCurTime:true});\r\n\t};\r\n\r\n\t// Update to Frame\r\n\tRVS.F.updateKeyframeSelected = function(frame) {\r\n\t\tRVS.TL.cache.main = RVS.S.keyFrame===\"frame_0\" ? (RVS.F.getTimeAtSelectedFrameStart(\"frame_1\") / 100) : RVS.S.keyFrame===\"frame_999\" ? (RVS.F.getTimeAtSelectedFrameMiddle(\"frame_999\") / 100) : (RVS.F.getTimeAtSelectedFrameEnd()-2) / 100;\r\n\t\tRVS.TL.cache.main = RVS.TL.cache.main<0.01 ? 0.01 : RVS.TL.cache.main;\r\n\t\tRVS.F.updateCurTime({pos:true, cont:true, force:true, left:(RVS.TL.cache.main*100),refreshMainTimeLine:false, caller:\"updateKeyframeSelected\"});\r\n\t};\r\n\r\n\r\n\r\n\t// MIGRATION OF OLD CUSTOM IN AND OUT ANIMATION INTO LAYERANIMLIBRARY\r\n\tRVS.F.migrateCustomAnimation = function(_) {\r\n\t\t/* var id = 0; */\r\n\t\tfor (var i in _) {\r\n\t\t\tif(!_.hasOwnProperty(i)) continue;\r\n\t\t\tif (_[i].settings===\"in\" || _[i].settings===\"out\") {\r\n\t\t\t\tRVS.LIB.LAYERANIMS[_[i].settings].custom.transitions[_[i].id] = _[i].params;\r\n\t\t\t}\r\n\t\t\telse if (_[i].params!==undefined && (_[i].params.type===\"customin\" || _[i].params.type===\"customout\")) {\r\n\t\t\t\tvar gid = _[i].params.type==\"customin\" ? \"in\" : \"out\",\r\n\t\t\t\t\tag = RVS.LIB.LAYERANIMS[gid].custom.transitions,\r\n\t\t\t\t\tfr = gid===\"in\" ? \"frame_0\" : \"frame_999\",\r\n\t\t\t\t \ttr = { name: _[i].handle};\r\n\t\t\t\t tr[fr] = {transform:{}, timeline:{}};\r\n\r\n\t\t\t\t if (gid===\"in\")\r\n\t\t\t\t \ttr.frame_1 = {timeline : {speed:_[i].params.speed, ease:_[i].params.easing}};\r\n\t\t\t\t else\r\n\t\t\t\t \ttr.frame_999.timeline =  {speed:_[i].params.speed, ease:_[i].params.easing};\r\n\r\n\r\n\t\t\t\t// CHECK IF ANIMATION HAS MASK\r\n\t\t\t\tif (_[i].params.mask==\"true\" || _[i].params.mask==true) {\r\n\t\t\t\t\ttr[fr].mask = { use:true, x: _[i].params.mask_x, y: _[i].params.mask_y};\r\n\t\t\t\t\tif (gid===\"in\") tr.frame_1.mask = { use:true, x: 0, y: 0};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar inside = tr[fr].transform,\r\n\t\t\t\t\tsplithelp = {use:true, delay:_[i].params.splitdelay};\r\n\r\n\r\n\t\t\t\t// SET TARGET ANIMATION TO SPLIT OR LAYER\r\n\t\t\t\tswitch (_[i].params.split) {\r\n\t\t\t\t\tcase \"lines\": case \"line\":tr[fr].lines = splithelp;inside = tr[fr].lines; if (gid===\"in\") tr.frame_1.lines = splithelp;  break;\r\n\t\t\t\t\tcase \"words\": case \"word\":tr[fr].words = splithelp;inside = tr[fr].words;if (gid===\"in\") tr.frame_1.words = splithelp; break;\r\n\t\t\t\t\tcase \"chars\":case \"char\":tr[fr].chars = splithelp;inside = tr[fr].chars;if (gid===\"in\") tr.frame_1.chars = splithelp; break;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (_[i].params.captionopacity !== undefined)  inside.opacity = _[i].params.captionopacity;\r\n\r\n\t\t\t\t// GO THROUGH THE PARAMS AND CREATE THEM IF NEEDED\r\n\t\t\t\tfor (var key in _[i].params) {\r\n\t\t\t\t\tif(!_[i].params.hasOwnProperty(key)) continue;\r\n\t\t\t\t\tvar val = _[i].params[key];\r\n\t\t\t\t\tif (val!==\"inherit\" && val!==\"0\" && val!==0 && val!==\"0px\")\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase \"movex\": inside.x = val; break;\r\n\t\t\t\t\t\t\tcase \"movey\": inside.y = val; break;\r\n\t\t\t\t\t\t\tcase \"movez\": inside.z = val; break;\r\n\t\t\t\t\t\t\tcase \"rotationx\": inside.rotationX = val; break;\r\n\t\t\t\t\t\t\tcase \"rotationy\": inside.rotationY = val; break;\r\n\t\t\t\t\t\t\tcase \"rotationz\": inside.rotationZ = val; break;\r\n\t\t\t\t\t\t\tcase \"skewx\": inside.skewX = val; break;\r\n\t\t\t\t\t\t\tcase \"skewy\": inside.skewY = val; break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tag[_[i].id] = tr;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// REDUCE CONTENT OF A CUSTOM FRAME BEFORE SAVE IT\r\n\tfunction simplifyFrame(_) {\r\n\t\tfor (var i in _) {\r\n\t\t\tif(!_.hasOwnProperty(i)) continue;\r\n\t\t\tif (jQuery.inArray(i,[\"chars\",\"filter\",\"color\",\"bgcolor\",\"words\",\"lines\",\"mask\"])>=0 && _[i].use===false) delete _[i];\r\n\t\t\tif (typeof _[i]===\"object\")\r\n\t\t\t\tfor (var j in _[i]) {\r\n\t\t\t\t\tif (_[i][j]===\"inherit\")\r\n\t\t\t\t\t\tdelete _[i][j];\r\n\t\t\t} else {\r\n\t\t\t\tif (_[i]===\"inherit\") delete _[i];\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn _;\r\n\t}\r\n\r\n\tRVS.F.objChangeCompare = function(a,b,r) {\r\n\t\tr = r== undefined ? { s:0, a:0} : r;\r\n\t\tif (typeof a == \"object\") {\r\n\t\t\tfor (var i in a) {\r\n\t\t\t\tif (!a.hasOwnProperty(i) || i==\"timeline\") continue;\r\n\t\t\t\tif (typeof a[i] == \"object\" && b[i]!==undefined && typeof b[i]==\"object\")\r\n\t\t\t\t\tr = RVS.F.objChangeCompare(a[i],b[i],r);\r\n\t\t\t\telse {\r\n\t\t\t\t\tr.a++;\r\n\t\t\t\t\tif ((\"\"+a[i]) == (\"\"+b[i])) r.s++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\tRVS.F.compareLayerAnimPresets = function(L) {\r\n\t\tvar simpl,presl,difa,difb,dif,lib;\r\n\t\tfor (var i in L) {\r\n\t\t\tif (!L.hasOwnProperty(i) || L[i].timeline==undefined) continue;\r\n\t\t\tsimpl = undefined;\r\n\t\t\t\tfor (var f in L[i].timeline.frames) {\r\n\t\t\t\t\tif ((f!==\"frame_1\" && f!==\"frame_999\" && f!==\"frame_loop\") || (L[i].timeline.frames[f].timeline.preset==undefined) || L[i].timeline.frames[f].timeline.presetgroup==undefined) continue;\r\n\t\t\t\t\tlib = f==\"frame_1\" ? \"in\" : f==\"frame_999\" ? \"out\" : \"loop\";\r\n\t\t\t\t\tlib = RVS.LIB.LAYERANIMS[lib][L[i].timeline.frames[f].timeline.presetgroup]!=undefined ? RVS.LIB.LAYERANIMS[lib][L[i].timeline.frames[f].timeline.presetgroup] : undefined;\r\n\t\t\t\t\tlib = lib==undefined ? RVS.LIB.LAYERANIMS.in[L[i].timeline.frames[f].timeline.presetgroup]!=undefined ? RVS.LIB.LAYERANIMS.in[L[i].timeline.frames[f].timeline.presetgroup] :RVS.LIB.LAYERANIMS.out[L[i].timeline.frames[f].timeline.presetgroup] !== undefined ? RVS.LIB.LAYERANIMS.out[L[i].timeline.frames[f].timeline.presetgroup] : RVS.LIB.LAYERANIMS.loop[L[i].timeline.frames[f].timeline.presetgroup] : lib;\r\n\t\t\t\t\tif (lib==undefined || lib.transitions==undefined || lib.transitions[L[i].timeline.frames[f].timeline.preset]==undefined) continue;\r\n\t\t\t\t\tvar _ = lib.transitions[L[i].timeline.frames[f].timeline.preset];\r\n\t\t\t\t\tif (simpl==undefined) {\r\n\t\t\t\t\t\tpresl = RVS.F.addLayerObj(_.type,undefined,true).timeline.frames;\r\n\t\t\t\t\t\tsimpl = RVS.F.simplifyLayer(L[i]).timeline.frames;\r\n\t\t\t\t\t\tsimpl.frame_0 = fourLevelAnims(RVS.F.safeExtend(true,defaultFrame({alias:RVS_LANG.enterstage,opacity:0},\"frame_0\"),simpl.frame_0));\r\n\t\t\t\t\t\tsimpl.frame_1 = fourLevelAnims(RVS.F.safeExtend(true,defaultFrame({opacity:1,effect:\"none\",chars:{x: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0},words:{\tx: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0},lines:{\tx: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0}},\"frame_1\"),simpl.frame_1));\r\n\t\t\t\t\t\tsimpl.frame_999 = fourLevelAnims(RVS.F.safeExtend(true,defaultFrame({endWithSlide:true,alias:RVS_LANG.leavestage,opacity:0},\"frame_999\"),simpl.frame_999));\r\n\t\t\t\t\t\tsimpl.loop = RVS.F.safeExtend(true,defaultLoopFrame(),simpl.loop);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpresl = RVS.F.safeExtend(true,presl,_);\r\n\t\t\t\t\tif (f==\"frame_1\") {\r\n\t\t\t\t\t\tpresl.frame_0 = fourLevelAnims(RVS.F.safeExtend(true,defaultFrame({alias:RVS_LANG.enterstage,opacity:0},\"frame_0\"),presl.frame_0));\r\n\t\t\t\t\t\tpresl.frame_1 = fourLevelAnims(RVS.F.safeExtend(true,defaultFrame({opacity:1,effect:\"none\",chars:{x: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0},words:{\tx: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0},lines:{\tx: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0}},\"frame_1\"),presl.frame_1));\r\n\t\t\t\t\t\tdifa = RVS.F.objChangeCompare(simpl.frame_0,presl.frame_0);\r\n\t\t\t\t\t\tdifb = RVS.F.objChangeCompare(simpl.frame_1,presl.frame_1);\r\n\t\t\t\t\t\tdif = ((difa.s/difa.a) + (difb.s/difb.a)) / 2;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if (f==\"frame_999\") {\r\n\t\t\t\t\t\tpresl.frame_999 = fourLevelAnims(RVS.F.safeExtend(true,defaultFrame({endWithSlide:true,alias:RVS_LANG.leavestage,opacity:0},\"frame_999\"),presl.frame_999));\r\n\t\t\t\t\t\tdifa = RVS.F.objChangeCompare(simpl.frame_999,presl.frame_999);\r\n\t\t\t\t\t\tdif = difa.s / difa.a;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (f==\"frame_loop\") {\r\n\t\t\t\t\t\tpresl.loop = RVS.F.safeExtend(true,defaultLoopFrame(),presl.loop);\r\n\t\t\t\t\t\tdifa = RVS.F.objChangeCompare(simpl.frame_loop,presl.frame_loop);\r\n\t\t\t\t\t\tdif = difa.s / difa.a;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tL[i].timeline.frames[f].timeline.presetBased = Math.round(dif*100);\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\t/*\r\n\tUPDATE TIMELINE FROM ANIMATION LIBRARY\r\n\t*/\r\n\tfunction updateTimeLineByTemplate(_,preset,group) {\r\n\t\tif (_===undefined) return;\r\n\t\tif (_.frame_0!==undefined) {\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_0 = fourLevelAnims(RVS.F.safeExtend(true,defaultFrame({alias:RVS_LANG.enterstage,opacity:0},\"frame_0\"),_.frame_0));\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_0.timeline.start = RVS.L[RVS.selLayers[0]].timelinecache.frames.frame_0.timeline.start;\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_0.timeline.alias = RVS_LANG.enterstage;\r\n\t\t\tif (group!==undefined) {\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_0.timeline.preset = preset;\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_0.timeline.presetgroup = group;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tif (_.frame_1!==undefined) {\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_1 = fourLevelAnims(RVS.F.safeExtend(true,defaultFrame({opacity:1,effect:\"none\",chars:{x: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0},words:{\tx: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0},lines:{\tx: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0}},\"frame_1\"),_.frame_1));\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_1.timeline.start = RVS.L[RVS.selLayers[0]].timelinecache.frames.frame_1.timeline.start;\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_1.timeline.alias = RVS_LANG.onstage;\r\n\t\t\tif (group!==undefined) {\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_1.timeline.preset = preset;\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_1.timeline.presetgroup = group;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_.frame_999!==undefined) {\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_999 = fourLevelAnims(RVS.F.safeExtend(true,defaultFrame({endWithSlide:true,alias:RVS_LANG.leavestage,opacity:0},\"frame_999\"),_.frame_999));\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_999.timeline.start = RVS.L[RVS.selLayers[0]].timelinecache.frames.frame_999.timeline.start;\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_1.timeline.alias = RVS_LANG.leavestage;\r\n\t\t\tif (group!==undefined) {\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_1.timeline.preset = preset;\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].timeline.frames.frame_1.timeline.presetgroup = group;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tif (_.loop!==undefined) {\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.loop = RVS.F.safeExtend(true,defaultLoopFrame(),_.loop);\r\n\t\t\tRVS.L[RVS.selLayers[0]].timeline.loop.start = RVS.L[RVS.selLayers[0]].timelinecache.loop.start;\r\n\t\t\tif (group!==undefined) {\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].timeline.loop.preset = preset;\r\n\t\t\t\tRVS.L[RVS.selLayers[0]].timeline.loop.presetgroup = group;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tclearTimeout(window.timelineTemporaryUpdate);\r\n\t\twindow.timelineTemporaryUpdate = setTimeout(function() {\r\n\t\t\tRVS.F.updateLayerFrames({layerid:RVS.selLayers[0]});\r\n\t\t},50);\r\n\t}\r\n\r\n\t/*\r\n\tSHOW, HIDE THE \"+\" BUTTON IN FRAME LEVELS AND SET OTHER LEVEL ACTIVE IF IT IS NOT AVILABLE IN THE SELECTED FRAME\r\n\t*/\r\n\tRVS.F.updateFrameOptionsVisual = function() {\r\n\r\n\t\tfor (var i in RVS.V.frameLevels.levels) {\r\n\t\t\tif(!RVS.V.frameLevels.levels.hasOwnProperty(i)) continue;\r\n\t\t\tvar level = RVS.V.frameLevels.levels[i];\r\n\t\t\tRVS.V.frameLevels[level] = RVS.V.frameLevels[level]===undefined ? jQuery('#'+level+'_ts_wrapbrtn') : RVS.V.frameLevels[level];\r\n\t\t\tif ((level===\"color\" && (RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame]!==undefined && RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].bgcolor !== undefined && RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].color !== undefined)  && (RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].bgcolor.use!==false || RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].color.use!==false)) ||\r\n\t\t\t\t(level===\"sfx\" && (RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame]!==undefined && RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].sfx.effect!==\"\" && RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame].sfx.effect!==\"none\")) ||\r\n\t\t\t\t(level===\"mask\" && RVS.L[RVS.selLayers[0]].timeline.clipPath.use) ||\r\n\t\t\t\t(level!==\"color\" && level!==\"sfx\" && (RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame]!==undefined && RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame][level]!==undefined && RVS.L[RVS.selLayers[0]].timeline.frames[RVS.S.keyFrame][level].use))\r\n\t\t\t\t)\r\n\t\t\t\tRVS.V.frameLevels[level][0].className=\"ts_wrapbrtn\";\r\n\t\t\telse\r\n\t\t\t\tRVS.V.frameLevels[level][0].className=\"ts_wrapbrtn notinuse\";\r\n\t\t}\r\n\t\tfor (var i in RVS.JHOOKS.updateFrameOptionsVisual) {\r\n\t\t\tif(!RVS.JHOOKS.updateFrameOptionsVisual.hasOwnProperty(i)) continue;\r\n\t\t\tRVS.JHOOKS.updateFrameOptionsVisual[i]();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction getLastFrameIndex(_) {\r\n\t\tvar lindex = 0;\r\n\t\tfor (var frame in RVS.L[_.layerid].timeline.frames) {\r\n\t\t\tif(!RVS.L[_.layerid].timeline.frames.hasOwnProperty(frame)) continue;\r\n\t\t\tvar index = parseInt(frame.split(\"frame_\")[1],0);\r\n\t\t\tlindex = lindex<=index && index<998 ? index+1 : lindex;\r\n\t\t}\r\n\t\treturn \"frame_\"+lindex;\r\n\t}\r\n\r\n\r\n\r\n\t// CREATE AVAILABLE PREDEFINED LAYER ANIMATION LISTS\r\n\tfunction createLayerAnimationLists() {\r\n\t\tRVS.LIB.LAYERANIMS.animSettings = jQuery('#form_layer_animation_innerwrap');\r\n\t\tvar ih = {in:\"\", out:\"\", loop:\"\"};\r\n\r\n\r\n\t\tfor (var f in RVS.LIB.LAYERANIMS) {\r\n\t\t\tif(!RVS.LIB.LAYERANIMS.hasOwnProperty(f)) continue;\r\n\t\t\tif (f===\"in\" || f===\"out\" || f===\"loop\") {\r\n\t\t\t\tfor (var g in RVS.LIB.LAYERANIMS[f]) {\r\n\t\t\t\t\tif(!RVS.LIB.LAYERANIMS[f].hasOwnProperty(g)) continue;\r\n\t\t\t\t\tvar _g = '<div id=\"lal_'+f+\"_\"+g+'\" class=\"latransgroup '+(RVS.LIB.LAYERANIMS[f][g].custom ? 'custom_lainner_trans_'+g : '')+'\"><div class=\"latransgroup_head\"><span class=\"latransgroup_name\">'+RVS.LIB.LAYERANIMS[f][g].group+'</span><div class=\"animation_drop_arrow\"><i class=\"material-icons\">arrow_drop_down</i></div></div><div class=\"lainner_transitions\">';\r\n\t\t\t\t\tif (RVS.LIB.LAYERANIMS[f][g].custom) {\r\n\t\t\t\t\t\t_g += '<div data-lindex=\"'+f+'\" data-gindex=\"'+g+'\" data-tindex=\"custom\" class=\"layer_trans_liste dark_btn\"><span class=\"cla_custom_name\">'+RVS_LANG.savecurrenttemplate+'</span><input type=\"text\" value=\"custom\" class=\"cla_entername\"><div class=\"custom_layer_animation_toolbar\"><i class=\"cla_answer_yes material-icons\">done</i><i class=\"cla_answer_no material-icons\">close</i><i class=\"add_custom_layeranimation material-icons\">add</i></div></div>';\r\n\t\t\t\t\t\tRVS.LIB.LAYERANIMS[f][g].amount = 1;\r\n\t\t\t\t\t\tfor (var p in RVS.LIB.LAYERANIMS[f][g].transitions) {\r\n\t\t\t\t\t\t\tif(!RVS.LIB.LAYERANIMS[f][g].transitions.hasOwnProperty(p)) continue;\r\n\t\t\t\t\t\t\tRVS.LIB.LAYERANIMS[f][g].transitions[p].customindex = RVS.LIB.LAYERANIMS[f][g].transitions[p].customindex=== undefined ? RVS.LIB.LAYERANIMS[f][g].amount : RVS.LIB.LAYERANIMS[f][g].transitions[p].customindex;\r\n\t\t\t\t\t\t\t_g += '<div data-lindex=\"'+f+'\" data-gindex=\"'+g+'\" data-tindex=\"'+p+'\" class=\"layer_trans_liste dark_btn\"><span class=\"cla_custom_name\">'+RVS.LIB.LAYERANIMS[f][g].transitions[p].name+'</span><div class=\"cla_message\">'+RVS_LANG.overwritetemplate+'</div><input type=\"text\" value=\"'+RVS.LIB.LAYERANIMS[f][g].transitions[p].name+'\" class=\"cla_entername\"><div class=\"custom_layer_animation_toolbar\"><i class=\"cla_answer_yes material-icons\">done</i><i class=\"cla_answer_no material-icons\">close</i><i class=\"edit_custom_layeranimation material-icons\">edit</i><i class=\"save_custom_layeranimation material-icons\">save</i><i class=\"delete_custom_layeranimation material-icons\">delete</i></div></div>';\r\n\t\t\t\t\t\t\tRVS.LIB.LAYERANIMS[f][g].amount = parseInt(RVS.LIB.LAYERANIMS[f][g].transitions[p].customindex,0)+1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var p in RVS.LIB.LAYERANIMS[f][g].transitions) {\r\n\t\t\t\t\t\t\tif(!RVS.LIB.LAYERANIMS[f][g].transitions.hasOwnProperty(p)) continue;\r\n\t\t\t\t\t\t\t_g += '<div data-lindex=\"'+f+'\" data-gindex=\"'+g+'\" data-tindex=\"'+p+'\" class=\"layer_trans_liste dark_btn\">'+RVS.LIB.LAYERANIMS[f][g].transitions[p].name+'</div>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_g += '</div></div>';\r\n\t\t\t\t\tih[f] += _g;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tRVS.LIB.LAYERANIMS.translists = {\r\n\t\t\t\"0\": jQuery('<div id=\"layer_transliste_0\" class=\"load_anim_value_wrap\">'+ih.in+'</div>'),\r\n\t\t\t\"999\":jQuery('<div id=\"layer_transliste_999\" class=\"load_anim_value_wrap\">'+ih.out+'</div>')\r\n\t\t};\r\n\r\n\t\tjQuery('#layer_transliste_loop').append(ih.loop);\r\n\r\n\t}\r\n\t// EXTEND LIBRARY WITH FURTHER ANIMATIONS direct:\"in/out\", handle:\"group handle\", presets: Object\r\n\tRVS.F.extendLayerAnimationLists = function(_) {\r\n\t\tvar f = _.direction,\r\n\t\t\tg = _.handle;\r\n\t\tRVS.LIB.LAYERANIMS[f][g] = RVS.F.safeExtend(true,{},_.preset);\r\n\t\tif (RVS.LIB.LAYERANIMS.translists!==undefined) {\r\n\t\t\tvar _g = '<div class=\"latransgroup\"><div class=\"latransgroup_head\"><span class=\"latransgroup_name\">'+RVS.LIB.LAYERANIMS[f][g].group+'</span><div class=\"animation_drop_arrow\"><i class=\"material-icons\">arrow_drop_down</i></div></div><div class=\"lainner_transitions\">',\r\n\t\t\t\t_ing = '';\r\n\t\t\tfor (var p in RVS.LIB.LAYERANIMS[f][g].transitions) {\r\n\t\t\t\tif(!RVS.LIB.LAYERANIMS[f][g].transitions.hasOwnProperty(p)) continue;\r\n\t\t\t\t_ing += '<div data-lindex=\"'+f+'\" data-gindex=\"'+g+'\" data-tindex=\"'+p+'\" class=\"layer_trans_liste dark_btn\">'+RVS.LIB.LAYERANIMS[f][g].transitions[p].name+'</div>';\r\n\t\t\t}\r\n\t\t\tif (jQuery('#lal_'+f+'_'+g).length>0) {\r\n\t\t\t\tjQuery('#lal_'+f+'_'+g).find('.lainner_transitions')[0].innerHTML = jQuery('#lal_'+f+'_'+g).find('.lainner_transitions')[0].innerHTML + _ing;\r\n\t\t\t} else {\r\n\t\t\t\t_g += _ing;\r\n\t\t\t\t_g += '</div></div>';\r\n\t\t\t\tif (f===\"in\") RVS.LIB.LAYERANIMS.translists[\"0\"].append(_g);\r\n\t\t\t\telse\r\n\t\t\t\tif (f===\"out\") RVS.LIB.LAYERANIMS.translists[\"999\"].append(_g);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction colorEditSub(i,n,val) {\r\n\t\tswitch (n) {\r\n\t\t\tcase \"layerTextColorHover\": case \"layerTextColor\": case \"layerTextColorInFrame\": case \"frameColorAnimation\":\r\n\t\t\t\t\tif (jQuery.inArray(RVS.L[i].type,[\"text\",\"button\"])>=0)\r\n\t\t\t\t\t\tif (RVS.H[i].splitText!==undefined)\r\n\t\t\t\t\t\t\ttpGS.gsap.to([RVS.H[i].c, RVS.H[i].splitText.chars,RVS.H[i].splitText.words,RVS.H[i].splitText.lines],0.001,{color:val});\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttpGS.gsap.to([RVS.H[i].c],0.001,{color:val});\r\n\t\t\tbreak;\r\n\t\t\tcase \"frameBGColorAnimation\": case \"frameBGColorAnimationDouble\": case \"layerBGColor\":\r\n\t\t\t\t\t//BG COLOR OF SLIDER\r\n\t\t\t\t\tif (val.indexOf(\"gradient\")>=0)\r\n\t\t\t\t\t\ttpGS.gsap.to((RVS.L[i].type===\"column\" ?  RVS.H[i].bg : RVS.H[i].c),0.001,{background:val});\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (RVS.L[i].idle.backgroundImage!==undefined)\r\n\t\t\t\t\t\t\ttpGS.gsap.to((RVS.L[i].type===\"column\" ?  RVS.H[i].bg : RVS.H[i].c),0.001,{backgroundImage:\"url(\"+RVS.L[i].idle.backgroundImage+\")\", backgroundColor:val});\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttpGS.gsap.to((RVS.L[i].type===\"column\" ?  RVS.H[i].bg : RVS.H[i].c),0.001,{background:val});\r\n\t\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"layerBorderColor\":\r\n\t\t\t\ttpGS.gsap.to([RVS.H[i].c],0.001,{'borderColor':val});\r\n\t\t\tbreak;\r\n\t\t\tcase \"layerSVGColor\":\r\n\t\t\t\t\tif (RVS.L[i].type===\"svg\") tpGS.gsap.to([RVS.H[i].svgPath,RVS.H[i].svg],0.001,{fill:val});\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"layerStrokeColor\":\r\n\t\t\t\t\tif (RVS.L[i].type===\"svg\") tpGS.gsap.to([RVS.H[i].svgPath,RVS.H[i].svg],0.001,{stroke:val});\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tEDIT / CANCEL A COLOR VALUE (SHOW LIVE THE CHANGES)\r\n\t*/\r\n\tfunction colorEditLayer(e,inp, val, gradient, onSave,GC) {\r\n\r\n\t\tif (inp!==undefined) window.lastColorEditjObj = inp;\r\n\t\telse if (window.lastColorEditjObj!==undefined) val = window.RSColor.get(window.lastColorEditjObj.val());\r\n\t\tif (val===undefined) return;\r\n\r\n\t\t// only write the value if the color picker was saved\r\n\t\tif (inp!==undefined && onSave) inp.val(gradient || val).change();\r\n\r\n\r\n\t\tfor (var sl in RVS.selLayers) {\r\n\t\t\tif(!RVS.selLayers.hasOwnProperty(sl)) continue;\r\n\t\t\tvar i = RVS.selLayers[sl];\r\n\t\t\tcolorEditSub(i,window.lastColorEditjObj[0].name,val);\r\n\t\t}\r\n\t\t// UPDATE ALL RELEVANT GLOBAL COLORS\r\n\r\n\t\tif (GC)\r\n\t\t\tfor (var i in GC.ref) {\r\n\t\t\t\tif (GC.ref[i].type===\"layer\" && GC.ref[i].slide==RVS.S.slideId) colorEditSub(GC.ref[i].layer,GC.ref[i].inpname,val);\r\n\t\t\t\tif (GC.ref[i].type===\"layer\" && onSave) {\r\n\t\t\t\t\tRVS.F.updateSliderObj({path:GC.ref[i].r,val:val,slide:GC.ref[i].slide});\r\n\t\t\t\t\tif (GC.ref[i].slide==RVS.S.slideId && RVS.selLayers[0]==GC.ref[i].layer) {\r\n\t\t\t\t\t\tvar upinp = jQuery('input[name='+GC.ref[i].inpname+']');\r\n\t\t\t\t\t\tif (upinp.length>0) {\r\n\t\t\t\t\t\t\tupinp[0].value = val;\r\n\t\t\t\t\t\t\tupinp.rsColorPicker(\"refresh\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (GC.ref[i].slide!=RVS.S.slideId) RVS.F.slideinWork(GC.ref[i].slide);\r\n\t\t\t\t}\r\n\t\t\t\t//RVS.F.backup({path:GC.ref[i].r,cache:undefined, val:val,old:RVS.F.getDeepVal({path:GC.ref[i].r})});\r\n\t\t\t}\r\n\r\n\r\n\t\t// REDRAW LAYER AND RECALC ANIMATIONS\r\n\t\tif (onSave || e.type===\"colorcancel\")\r\n\t\t\tfor (var i in RVS.selLayers) {\r\n\t\t\t\tif(!RVS.selLayers.hasOwnProperty(i)) continue;\r\n\t\t\t\tRVS.F.drawHTMLLayer({uid:RVS.selLayers[i]});\r\n\t\t\t}\r\n\t}\r\n\r\n/*************************************\r\n    - \tGOOGLE FONT HANDLING -\r\n***************************************/\r\n\tfunction getGFontObj(font) {\r\n\t\tvar ret = false;\r\n\t\tfor(var key in RVS.LIB.FONTS) if (RVS.LIB.FONTS.hasOwnProperty(key)) {\r\n\t\t\tif(RVS.LIB.FONTS[key].label == font){\r\n\t\t\t\tif(RVS.LIB.FONTS[key].type == 'googlefont') ret =  RVS.LIB.FONTS[key];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\t// CHECK IF LAYER CURRENT FONT SETTING LOADED ALREADY\r\n\tRVS.F.checkUsedFonts = function(fontWeightChange) {\r\n\r\n\t\t// CHECK IF FONTWEIGHT AND ITALIC AND FONT TYPE ALREADY LOADED\r\n\t\tRVS.F.checkAvailableFontWeights(fontWeightChange);\r\n\r\n\t\tvar requiredGoogleFonts = {},\r\n\t\t\tfamiliesToLoad = [];\r\n\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\tvar layer = RVS.L[i];\r\n\t\t\tif ((layer.type===\"text\" || layer.type===\"button\") && layer.idle!==undefined && layer.idle.fontFamily!==undefined) {\r\n\t\t\t\tvar family = layer.idle.fontFamily.replace(/\\ /g,'_'),\r\n\t\t\t\t\tweights = [];\r\n\t\t\t\tfor (var s in RVS.V.sizes) {\r\n\t\t\t\t\tif(!RVS.V.sizes.hasOwnProperty(s)) continue;\r\n\t\t\t\t\tvar w = layer.idle.fontWeight[RVS.V.sizes[s]].v;\r\n\t\t\t\t\tw = layer.idle.fontStyle ? w+\"italic\" : w;\r\n\t\t\t\t\tif (jQuery.inArray(w,weights)===-1 && (loadedFonts[family]===undefined || jQuery.inArray(w,loadedFonts[family].weights)===-1) &&  (requiredGoogleFonts[family]===undefined || jQuery.inArray(w,requiredGoogleFonts[family].weights)===-1))\r\n\t\t\t\t\t\t\tweights.push(w);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (weights.length>0) {\r\n\t\t\t\t\tif (requiredGoogleFonts[family]===undefined)\r\n\t\t\t\t\t\trequiredGoogleFonts[family] = {family:family, font:layer.idle.fontFamily, weights:weights, italic:layer.idle.fontStyle};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\trequiredGoogleFonts[family] = {family:family, font:layer.idle.fontFamily, weights: RVS.F.mergeArrays(weights, requiredGoogleFonts[family].weights) , italic:(requiredGoogleFonts[family]===true ? true : layer.idle.fontStyle)};\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i in requiredGoogleFonts) {\r\n\t\t\tif(!requiredGoogleFonts.hasOwnProperty(i)) continue;\r\n\t\t\tvar familie = RVS.F.loadSingleFont(requiredGoogleFonts[i]);\r\n\t\t\tif (familie!==undefined) familiesToLoad.push(familie);\r\n\t\t}\r\n\r\n\t\tRVS.F.do_google_font_load(familiesToLoad,{silent:true});\r\n\r\n\t};\r\n\r\n\t// PRELOAD GOOGLE FONT WITH ONLY NEEDED WEIGHT AND SUBTYPE OPTIONAL ITALIC IN ONE GO\r\n\tRVS.F.preloadUsedFonts = function() {\r\n\t\tvar requiredGoogleFonts = {},\r\n\t\t\tfamiliesToLoad = [];\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\tif ((RVS.L[i].type===\"text\" || RVS.L[i].type===\"button\") && RVS.L[i].idle!==undefined && RVS.L[i].idle.fontFamily!==undefined) {\r\n\t\t\t\tvar family = RVS.L[i].idle.fontFamily.replace(/\\ /g,'_');\r\n\t\t\t\trequiredGoogleFonts[family] = requiredGoogleFonts[family]===undefined ? {family:family, weights:[], italic:false} : requiredGoogleFonts[family];\r\n\t\t\t\trequiredGoogleFonts[family].font = RVS.L[i].idle.fontFamily;\r\n\t\t\t\trequiredGoogleFonts[family].italic = requiredGoogleFonts[family].italic===true ? true : RVS.L[i].idle.fontStyle;\r\n\t\t\t\tfor (var s in RVS.V.sizes) {\r\n\t\t\t\t\tif(!RVS.V.sizes.hasOwnProperty(s)) continue;\r\n\t\t\t\t\tif (requiredGoogleFonts[family].weights.toString().indexOf(RVS.L[i].idle.fontWeight[RVS.V.sizes[s]].v)===-1) requiredGoogleFonts[family].weights.push(RVS.L[i].idle.fontWeight[RVS.V.sizes[s]].v);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i in requiredGoogleFonts) {\r\n\t\t\tif(!requiredGoogleFonts.hasOwnProperty(i)) continue;\r\n\t\t\tvar familie = RVS.F.loadSingleFont(requiredGoogleFonts[i]);\r\n\t\t\tif (familie!==undefined) familiesToLoad.push(familie);\r\n\t\t}\r\n\r\n\t\tRVS.F.do_google_font_load(familiesToLoad);\r\n\t};\r\n\r\n\r\n\tfunction checkWeightsInVariants(a,b) {\r\n\t\tvar ret = [];\r\n\t\tfor (var i in a) {\r\n\t\t\tif(!a.hasOwnProperty(i)) continue;\r\n\t\t\tif (jQuery.inArray(a[i],b)>=0) ret.push(a[i]);\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\t// LOAD SINGLE FONT WITH ALL ITS WEIGHTS, SUBTYPES  RVS.F.preloadUsedFonts();\r\n\tRVS.F.loadSingleFont = function(_){\r\n\t\tvar gFontType = getGFontObj(_.font);\r\n\r\n\r\n\t\tif (gFontType) {\r\n\t\t\t//CACHE AND MANIPULATE VALUES\r\n\r\n\t\t\t_.weights = _.weights === undefined ? [] : _.weights;\r\n\t\t\t_.subsets = _.subsets === undefined ? [] : _.subsets;\r\n\t\t\t_.font = _.font.replace(/\\ /g,'+');\r\n\t\t\t// IF LOADED, SIMPLE TRIGGER CALLBACK\r\n\t\t\tif (loadedFonts[_.family]===undefined || !RVS.F.matchArray(_.weights, loadedFonts[_.family].weights)) {\r\n\r\n\r\n\t\t\t\tloadedFonts[_.family] = loadedFonts[_.family]===undefined ? {weights:_.weights, subsets:_.subsets} : loadedFonts[_.family];\r\n\t\t\t\tloadedFonts[_.family].weights = RVS.F.mergeArrays(_.weights, loadedFonts[_.family].weights);\r\n\r\n\t\t\t\t// NOT LOADED YET, LETS LOAD IT\r\n\t\t\t\t// callBackDone = true;\r\n\t\t\t\tvar subset = '',\r\n\t\t\t\t\tweight = '';\r\n\r\n\t\t\t\t//COLLECT FONT WEIGHTS\r\n\t\t\t\tloadedFonts[_.family].weights = checkWeightsInVariants(loadedFonts[_.family].weights,gFontType.variants);\r\n\t\t\t\tif (loadedFonts[_.family].weights.length===0)\r\n\t\t\t\t\tfor(var mkey in gFontType.variants){\r\n\t\t\t\t\t\tif(!gFontType.variants.hasOwnProperty(mkey)) continue;\r\n\t\t\t\t\t\tif(mkey > 0) weight += ','; else weight=\":\";\r\n\t\t\t\t\t\tweight += gFontType.variants[mkey];\r\n\t\t\t\t\t\tloadedFonts[_.family].weights.push(gFontType.variants[mkey]);\r\n\t\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tfor (var w in loadedFonts[_.family].weights) {\r\n\t\t\t\t\t\tif(!loadedFonts[_.family].weights.hasOwnProperty(w)) continue;\r\n\t\t\t\t\t\tif (w>0) weight += ','; else weight=\":\";\r\n\t\t\t\t\t\tweight += loadedFonts[_.family].weights[w];\r\n\t\t\t\t\t\tif (_.italic && weight.indexOf(\"italic\")==-1 && jQuery.inArray(loadedFonts[_.family].weights[w]+\"italic\",loadedFonts[_.family].weights)==-1) weight += ','+loadedFonts[_.family].weights[w]+\"italic\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t//COLLECT SUBTYPES\r\n\t\t\t\tif(typeof(gFontType.subsets) !== 'undefined'){\r\n\t\t\t\t\tfor(var mkey in gFontType.subsets){\r\n\t\t\t\t\t\tif(!gFontType.subsets.hasOwnProperty(mkey)) continue;\r\n\t\t\t\t\t\tif(mkey > 0) subset += ','; else subset=\":\";\r\n\t\t\t\t\t\tsubset += gFontType.subsets[mkey];\r\n\t\t\t\t\t\t_.subsets.push(gFontType.subsets[mkey]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn(_.font+weight+subset);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction fontLoadEnded(familyName,fvd,a) {\r\n\t\t/* var family = familyName.replace(/\\ /g,'_'),*/\r\n\r\n\t\tvar italic = fvd.indexOf(\"i\")>=0,\r\n\t\t\tweight = parseInt(fvd.replace(/[^0-9]/, ''),0)*100;\r\n\r\n\t\tfor (var l in RVS.L) if(RVS.L.hasOwnProperty(l) && ((RVS.L[l].type===\"text\" || RVS.L[l].type===\"button\") && RVS.L[l].idle.fontFamily==familyName) && ((!italic && !RVS.L[l].idle.fontStyle) || (italic && RVS.L[l].idle.fontStyle)) && RVS.L[l].idle.fontWeight[RVS.screen].v==weight) RVS.F.drawHTMLLayer({uid:RVS.L[l].uid});\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\tfor (var l in RVS.L) if(RVS.L.hasOwnProperty(l) && ((RVS.L[l].type===\"text\" || RVS.L[l].type===\"button\") && RVS.L[l].idle.fontFamily==familyName) && ((!italic && !RVS.L[l].idle.fontStyle) || (italic && RVS.L[l].idle.fontStyle)) && RVS.L[l].idle.fontWeight[RVS.screen].v==weight) RVS.F.updateHTMLLayerPosition({uid:RVS.L[l].uid});\r\n\t\t},150);\r\n\r\n\r\n\t}\r\n\r\n\tRVS.F.do_google_font_load = function(families,options,evt) {\r\n\t\toptions = options === undefined ? {silent:false} : options;\r\n\t\tif (families!==null && families.length>0) {\r\n\t\t\tvar fonts = \"\",\r\n\t\t\t\tfam = 0;\r\n\t\t\tfor (var i in families) {\r\n\t\t\t\tif(!families.hasOwnProperty(i)) continue;\r\n\t\t\t\tif (i>0) fonts+=\" \";\r\n\t\t\t\tfonts += families[i];\r\n\t\t\t\tfam++;\r\n\t\t\t}\r\n\t\t\tfam = fam===1 ? fam + \" Font\" : fam + \" Fonts\";\r\n\t\t\ttpWebFont.load({\r\n\t\t\t\tgoogle:{ families:families},\r\n\t\t\t\t//fontinactive:fontLoadEnded,\r\n\t\t\t\tfontactive:fontLoadEnded,\r\n\t\t\t\t//fontloading:fontLoadEnded,\r\n\t\t\t\tloading:function() {\r\n\t\t\t\t\tif (options.silent!==true) RVS.F.showWaitAMinute({fadeIn:500,text:\"Please Wait<br><span style='display:block;font-size:30px;line-height:35px'>Loading \"+fam+\"</span>\"});\r\n\t\t\t\t},\r\n\t\t\t\tactive:function() {\r\n\t\t\t\t\tif (options.silent!==true) setTimeout(function() {\r\n\t\t\t\t\t\tRVS.F.showWaitAMinute({fadeOut:500});\r\n\t\t\t\t\t\tif (evt!==undefined) setTimeout(function() {RVS.DOC.trigger(evt);},500);\r\n\t\t\t\t\t},50);\r\n\t\t\t\t},\r\n\t\t\t\tinactive:function(e) {\r\n\t\t\t\t\tif (options.silent!==true) setTimeout(function() {\r\n\t\t\t\t\t\tRVS.F.showWaitAMinute({fadeOut:500});\r\n\t\t\t\t\t\tif (evt!==undefined) setTimeout(function() {RVS.DOC.trigger(evt);},500);\r\n\t\t\t\t\t},50);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tRVS.F.checkLayersRelativeAbsolute = function(IL) {\r\n\t\tfor (var i in IL) {\r\n\t\t\tif (!IL.hasOwnProperty(i)) continue;\r\n\t\t\tif (IL[i].position.position==undefined && IL[i].type!==\"row\") {\r\n\t\t\t\tIL[i].position.position = IL[i].group.puid == -1 || IL[i].group.puid == \"-1\" ? \"absolute\" : (IL[IL[i].group.puid]!==undefined && IL[IL[i].group.puid].type===\"column\") ? \"relative\" : \"absolute\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn IL;\r\n\t}\r\n\r\n\r\n\tRVS.F.importSelectedLayers = function(_IL) {\r\n\r\n\t\t_IL = _IL === undefined ? RVS.LIB.OBJ.items.moduleslides[RVS.LIB.OBJ.selectedSlideId].layers : _IL;\r\n\t\tvar cache=false;\r\n\t\t//CACHE THE COPY PASTE STRUCTURE\r\n\t\tif (window.copyPasteLayers!==undefined && window.copyPasteLayers.layers!==undefined) {\r\n\t\t\tcache = true;\r\n\t\t\twindow.backupCopyPaste = RVS.F.safeExtend(true,{},window.copyPasteLayers.layers);\r\n\t\t}\r\n\t\twindow.copyPasteLayers = {amount:0, layers:{}};\r\n\r\n\t\t// GO THROUGH THE ROWS, COLUMNS ETC. AND EXPORT THINGS WHERE THEY NEED TO BE EXPORTED\r\n\t\tfor (let i in RVS.LIB.OBJ.import.toImport) {\r\n\t\t\tif(!RVS.LIB.OBJ.import.toImport.hasOwnProperty(i)) continue;\r\n\t\t\twindow.copyPasteLayers.layers[_IL[RVS.LIB.OBJ.import.toImport[i]].uid] = RVS.F.safeExtend(true,RVS.F.addLayerObj(_IL[RVS.LIB.OBJ.import.toImport[i]].type,undefined,true),_IL[RVS.LIB.OBJ.import.toImport[i]]);\r\n\t\t}\r\n\t\tif (RVS.LIB.OBJ.depth===\"grouplayers\") {\r\n\t\t\tdelete window.copyPasteLayers.layers.bottom;\r\n\t\t\tdelete window.copyPasteLayers.layers.middle;\r\n\t\t\tdelete window.copyPasteLayers.layers.top;\r\n\t\t}\r\n\r\n\t\t//Prepare Action Links\r\n\t\tfor (var i in window.copyPasteLayers.layers) {\r\n\t\t\tif(!window.copyPasteLayers.layers.hasOwnProperty(i)) continue;\r\n\t\t\tfor (var j in window.copyPasteLayers.layers[i].actions.action) {\r\n\t\t\t\tif(!window.copyPasteLayers.layers[i].actions.action.hasOwnProperty(j)) continue;\r\n\t\t\t\tif (window.copyPasteLayers.layers[i].actions.action[j]!==undefined && window.copyPasteLayers.layers[i].actions.action[j].layer_target)\r\n\t\t\t\t\twindow.copyPasteLayers.layers[i].actions.action[j].beforemigration_layer_target = window.copyPasteLayers.layers[i].actions.action[j].layer_target;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar duplicateLayers = [],\r\n\t\t\tduplicateLayersID = [],\r\n\t\t\tnewLayerIDs = [],\r\n\t\t\ttranslate = {},\r\n\t\t\trows = [],\r\n\t\t\trowid;\r\n\r\n\t\tfor (var sli in window.copyPasteLayers.layers) {\r\n\t\t\tif(!window.copyPasteLayers.layers.hasOwnProperty(sli)) continue;\r\n\t\t\tvar uid = window.copyPasteLayers.layers[sli].uid;\r\n\t\t\tduplicateLayers.push({type:window.copyPasteLayers.layers[uid].type,  copyPaste:\"paste\", duplicateId:uid, ignoreBackupGroup:true, ignoreLayerList:true , ignoreOrderHTMLLayers:true, prefix:RVS_LANG.imported});\r\n\t\t\tduplicateLayersID.push(uid);\r\n\t\t\tif (window.copyPasteLayers.layers[uid].type===\"column\") {\r\n\t\t\t\trowid = window.copyPasteLayers.layers[uid].type===\"row\" ? uid : window.copyPasteLayers.layers[uid].group.puid;\r\n\t\t\t\tif (jQuery.inArray(rowid,rows)===-1) rows.push(rowid);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tRVS.F.openBackupGroup({id:\"addLayer\",txt:\"Duplicate Layer(s)\",icon:\"layers\",lastkey:\"layer\"});\r\n\r\n\t\t// CHECK MULTPILE DUPLICATES, LIKE COLUMN IN ROW WHICH ALREADY IN DUPLICATE MODE. (Parrents Check)\r\n\t\tfor (var i in duplicateLayers) {\r\n\t\t\tif(!duplicateLayers.hasOwnProperty(i)) continue;\r\n\t\t\tvar puid = window.copyPasteLayers.layers[duplicateLayersID[i]].group.puid;\r\n\t\t\tif (puid===-1 || (jQuery.inArray(parseInt(puid,0),duplicateLayersID)==-1)) {\r\n\t\t\t\tlet id = RVS.F.addLayer(duplicateLayers[i]);\r\n\t\t\t\ttranslate[duplicateLayersID[i]] = id;\r\n\t\t\t\tnewLayerIDs.push(id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\t//UPDATE ROWS (Extend, Remove Sizes)\r\n\t\tfor (var i in rows)  {\r\n\t\t\tif(!rows.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.L[rows[i]]!==undefined) RVS.F.fixColumnsInRows({layerid:rows[i]});\r\n\t\t}\r\n\r\n\t\t//FIX ACTIONS WITH NEW TRANSLATED ID'S\r\n\t\tfor (var i in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(i)) continue;\r\n\t\t\tif (RVS.L[i].actions)\r\n\t\t\t\tfor (var j in RVS.L[i].actions.action) {\r\n\t\t\t\t\tif(!RVS.L[i].actions.action.hasOwnProperty(j)) continue;\r\n\t\t\t\t\tif (RVS.L[i].actions.action[j]!==undefined && RVS.L[i].actions.action[j].beforemigration_layer_target) {\r\n\t\t\t\t\t\tRVS.L[i].actions.action[j].layer_target = translate[RVS.L[i].actions.action[j].beforemigration_layer_target];\r\n\t\t\t\t\t\tdelete RVS.L[i].actions.action[j].beforemigration_layer_target;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tRVS.F.closeBackupGroup({id:\"addLayer\"});\r\n\t\tRVS.F.buildLayerLists({force:true, ignoreRebuildHTML:true});\r\n\t\tRVS.F.updateZIndexTable();\r\n\t\tRVS.F.reOrderHTMLLayers();\r\n\t\tfor (var i in newLayerIDs) {\r\n\t\t\tif(!newLayerIDs.hasOwnProperty(i)) continue;\r\n\t\t\tRVS.F.selectLayers({id:newLayerIDs[i],overwrite:false, action:\"add\", ignoreUpdate:true});\r\n\t\t}\r\n\t\tRVS.F.selectedLayersVisualUpdate();\r\n\t\tRVS.F.updateSelectedHtmlLayers();\r\n\t\tRVS.F.checkShowHideLayers();\r\n\t\tRVS.F.checkLockedLayers();\r\n\r\n\t\t// RESTORE CACHE\r\n\t\tif (cache) window.copyPasteLayers.layers = RVS.F.safeExtend({},window.backupCopyPaste);\r\n\r\n\t\tsetTimeout(function() {\tRVS.F.showWaitAMinute({fadeOut:500});},100);\r\n\r\n\t\t// CLOSE IMPORT WINDOW\r\n\t\tif (RVS.LIB.OBJ.depth===\"layers\") {\r\n\t\t\tjQuery('#rb_modal_underlay').appendTo('#slider_settings');\r\n\t\t\tRVS.F.RSDialog.close();\r\n\t\t}\r\n\t\tRVS.F.closeObjectLibrary();\r\n\t\t//Load the Needed Fonts\r\n\t\tRVS.F.checkUsedFonts();\r\n\t}\r\n\r\n/*************************************\r\n    - \tINTERNAL FUNCTIONS -\r\n***************************************/\r\n\r\n\r\n\r\n\t/*\r\n\tGET NEXT UNIQUE ID\r\n\t*/\r\n\tRVS.F.getUniqueid = function() {\r\n\t\twhile (jQuery.inArray(RVS.S.uniqueId, RVS.S.uniqueIds)>=0) {\r\n\t\t\tRVS.S.uniqueId++;\r\n\t\t}\r\n\t\treturn RVS.S.uniqueId;\r\n\t};\r\n\r\n\t/*\r\n\tGET NEXT ZINDEX IN SLIDE\r\n\t*/\r\n\tfunction getHighestZindex() {\r\n\t\tvar z = 5;\r\n\t\tfor (var li in RVS.L) {\r\n\t\t\tif(!RVS.L.hasOwnProperty(li)) continue;\r\n\t\t\tif (parseInt(RVS.L[li].position.zIndex,0)>=z)\r\n\t\t\t\tz = parseInt(RVS.L[li].position.zIndex,0)+1;\r\n\t\t}\r\n\t\treturn z;\r\n\t}\r\n\r\n\t/*\r\n\tSET VALUE TO A OR B DEPENDING IF VALUE A EXISTS AND NOT UNDEFINED OR NULL\r\n\t*/\r\n\tfunction _d(a,b) {\r\n\t\tif (a===undefined || a===null)\r\n\t\t\treturn b;\r\n\t\telse\r\n\t\t\treturn a;\r\n\t}\r\n\r\n\r\n\tfunction _truefalse(v) {\r\n\t\tif (v===\"false\" || v===false || v===\"off\" || v===undefined || v===0 || v===-1)\r\n\t\t\tv=false;\r\n\t\telse\r\n\t\tif (v===\"true\" || v===true || v===\"on\")\r\n\t\t\tv=true;\r\n\t\treturn v;\r\n\t}\r\n\r\n\r\n\r\n\t/*\r\n\tCREATE A DEFAULT FRAME OBJECT\r\n\t*/\r\n\tfunction defaultLoopFrame(o) {\r\n\t\to =  o===undefined ? {} : o;\r\n\t\to.frame_0 = o.frame_0===undefined ? {} : o.frame_0;\r\n\t\to.frame_999 = o.frame_999===undefined ? {} : o.frame_999;\r\n\t\tvar loop = {\r\n\t\t\tuse:_d(o.use,false),\r\n\t\t\tease:_d(o.ease,\"none\"),\r\n\t\t\tspeed:_d(o.speed, 1000),\r\n\t\t\toriginX:_d(o.originX,\"50%\"),\r\n\t\t\toriginY:_d(o.originX,\"50%\"),\r\n\t\t\tradiusAngle:_d(o.radiusAngle,0),\r\n\t\t\tcurviness:_d(o.curviness,2),\r\n\t\t\tcurved:_d(o.curved,false),\r\n\t\t\tyoyo_move:_d(o.yoyo_move,false),\r\n\t\t\tyoyo_rotate:_d(o.yoyo_rotate,false),\r\n\t\t\tyoyo_scale:_d(o.yoyo_scale,false),\r\n\t\t\tyoyo_filter:_d(o.yoyo_filter,false),\r\n\t\t\trepeat:_d(o.repeat,\"-1\"),\r\n\t\t\tstart:_d(o.start,300),\r\n\t\t\tautoRotate:_d(o.autoRotate,false),\r\n\t\t\tframe_0:{\r\n\t\t\t\tyr:_d(o.frame_0.yr,0),\r\n\t\t\t\tzr:_d(o.frame_0.zr,0),\r\n\t\t\t\tx:_d(o.frame_0.x,0),\r\n\t\t\t\ty:_d(o.frame_0.y,0),\r\n\t\t\t\tz:_d(o.frame_0.z,0),\r\n\t\t\t\tscaleX:_d(o.frame_0.scaleX,1),\r\n\t\t\t\tscaleY:_d(o.frame_0.scaleY,1),\r\n\t\t\t\topacity:_d(o.frame_0.opacity,1),\r\n\t\t\t\trotationX:_d(o.frame_0.rotationX,0),\r\n\t\t\t\trotationY:_d(o.frame_0.rotationY,0),\r\n\t\t\t\trotationZ:_d(o.frame_0.rotationZ,0),\r\n\t\t\t\tskewX:_d(o.frame_0.skewX,0),\r\n\t\t\t\tskewY:_d(o.frame_0.skewY,0),\r\n\t\t\t\tblur:0,\r\n\t\t\t\tbrightness:100,\r\n\t\t\t\tgrayscale:0\r\n\t\t\t},\r\n\t\t\tframe_999:{\r\n\t\t\t\txr:_d(o.frame_999.xr,0),\r\n\t\t\t\tyr:_d(o.frame_999.yr,0),\r\n\t\t\t\tzr:_d(o.frame_999.zr,0),\r\n\t\t\t\tx:_d(o.frame_999.x,0),\r\n\t\t\t\ty:_d(o.frame_999.y,0),\r\n\t\t\t\tz:_d(o.frame_999.z,0),\r\n\t\t\t\tscaleX:_d(o.frame_999.scaleX,1),\r\n\t\t\t\tscaleY:_d(o.frame_999.scaleY,1),\r\n\t\t\t\topacity:_d(o.frame_999.opacity,1),\r\n\t\t\t\trotationX:_d(o.frame_999.rotationX,0),\r\n\t\t\t\trotationY:_d(o.frame_999.rotationY,0),\r\n\t\t\t\trotationZ:_d(o.frame_999.rotationZ,0),\r\n\t\t\t\tskewX:_d(o.frame_999.skewX,0),\r\n\t\t\t\tskewY:_d(o.frame_999.skewY,0),\r\n\t\t\t\tblur:0,\r\n\t\t\t\tbrightness:100,\r\n\t\t\t\tgrayscale:0\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn loop;\r\n\t}\r\n\r\n\r\n\t/*\r\n\tCREATE A DEFAULT FRAME OBJECT\r\n\t*/\r\n\tfunction defaultFrame(o,NR) {\r\n\t\tNRI = NR===\"frame_0\" ? 0 : NR===\"frame_1\" ? 1 : 2;\r\n\t\to =  o===undefined ? {} : o;\r\n\t\to.chars = o.chars===undefined ? {} : o.chars;\r\n\t\to.words = o.words===undefined ? {} : o.words;\r\n\t\to.lines = o.lines===undefined ? {} : o.lines;\r\n\t\to.mask = o.mask===undefined ? {} : o.mask;\r\n\t\to.color = o.color===undefined ? {} : o.color;\r\n\t\to.bgcolor = o.bgcolor===undefined ? {} : o.bgcolor;\r\n\r\n\t\tvar gs = _d(o.grayscale,[0,0,0][NRI]),\r\n\t\t\tbs = _d(o.brightness,[100,100,100][NRI]),\r\n\t\t\tblr = _d(o.blur,[0,0,0][NRI]),\r\n\t\t\tfuse = parseInt(gs,0)!==0 || parseInt(bs,0)!==100 || parseInt(blr,0)!==0 ? true : false,\r\n\t\t\tbgs = _d(o.bgrayscale,[0,0,0][NRI]),\r\n\t\t\tbbs = _d(o.bbrightness,[100,100,100][NRI]),\r\n\t\t\tbblr = _d(o.bblur,[0,0,0][NRI]),\r\n\t\t\tbgi = _d(o.binvert,[0,0,0][NRI]),\r\n\t\t\tbse = _d(o.bsepia,[0,0,0][NRI]),\r\n\t\t\tbfuse = parseInt(bgs,0)!==0 || parseInt(bbs,0)!==100 || parseInt(bblr,0)!==0  || parseInt(bgi,0)!==0  || parseInt(bse,0)!==0 ? true : false;\r\n\r\n\t\tvar frame = {\r\n\t\t\talias:_d(o.alias,RVS_LANG.onstage),\r\n\t\t\tfilter:{use:fuse, grayscale:gs, brightness:bs, blur:blr},\r\n\t\t\tbfilter:{use:bfuse, grayscale:bgs, brightness:bbs, blur:bblr, sepia:bse, invert:bgi},\r\n\t\t\ttransform:{\r\n\t\t\t\tx:RVS.F.cToResp({default:_d(o.x,[0,0,\"inherit\"][NRI])}),\r\n\t\t\t\ty:RVS.F.cToResp({default:_d(o.y,[0,0,\"inherit\"][NRI])}),\r\n\t\t\t\tz:_d(o.z,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tscaleX:_d(o.scaleX,[1,1,\"inherit\"][NRI]),\r\n\t\t\t\tscaleY:_d(o.scaleY,[1,1,\"inherit\"][NRI]),\r\n\t\t\t\topacity:_d(o.opacity,[0,1,\"inherit\"][NRI]),\r\n\t\t\t\trotationX:_d(o.rotationX,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\trotationY:_d(o.rotationY,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\trotationZ:_d(o.rotationZ,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tskewX:_d(o.skewX,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tskewY:_d(o.skewY,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\toriginX:_d(o.originX,[\"50%\",\"50%\",\"50%\"][NRI]),\r\n\t\t\t\toriginY:_d(o.originY,[\"50%\",\"50%\",\"50%\"][NRI]),\r\n\t\t\t\toriginZ:_d(o.originZ,[\"0\",\"0\",\"0\"][NRI]),\r\n\t\t\t\ttransformPerspective:_d(RVS.SLIDER.settings.general.perspective,[\"600px\",\"600px\",\"600px\"][NRI]),\r\n\t\t\t\tclip:_d(o.clip,[100,100,\"inherit\"][NRI]),\r\n\t\t\t\tclipB:_d(o.clipB,[100,100,\"inherit\"][NRI])\r\n\t\t\t},\r\n\t\t\treverseDirection:{\r\n\t\t\t\tx:_d(o.rx,false),\r\n\t\t\t\ty:_d(o.ry,false),\r\n\t\t\t\trotationX:_d(o.rrotationX,false),\r\n\t\t\t\trotationY:_d(o.rrotationY,false),\r\n\t\t\t\trotationZ:_d(o.rrotationZ,false),\r\n\t\t\t\tskewX:_d(o.rskewX,false),\r\n\t\t\t\tskewY:_d(o.rskewY,false),\r\n\t\t\t\tmaskX:_d(o.rmaskX,false),\r\n\t\t\t\tmaskY:_d(o.rmaskY,false),\r\n\r\n\t\t\t\tcharsX:_d(o.crx,false),\r\n\t\t\t\tcharsY:_d(o.cry,false),\r\n\t\t\t\tcharsDirection:_d(o.crsd,false),\r\n\r\n\t\t\t\twordsX:_d(o.wrx,false),\r\n\t\t\t\twordsY:_d(o.wry,false),\r\n\t\t\t\twordsDirection:_d(o.wrsd,false),\r\n\r\n\t\t\t\tlinesX:_d(o.lrx,false),\r\n\t\t\t\tlinesY:_d(o.lry,false),\r\n\t\t\t\tlinesDirection:_d(o.lrsd,false)\r\n\t\t\t},\r\n\t\t\tmask:{\r\n\t\t\t\tuse:_d(o.mask.use,false),\r\n\t\t\t\tx:RVS.F.cToResp({default:_d(o.mask.x,[0,0,\"inherit\"][NRI])}),\r\n\t\t\t\ty:RVS.F.cToResp({default:_d(o.mask.y,[0,0,\"inherit\"][NRI])})\r\n\t\t\t},\r\n\t\t\tcolor:{\r\n\t\t\t\tcolor:_d(o.color.color,\"#ffffff\"),\r\n\t\t\t\tuse:_d(o.color.use,false)\r\n\t\t\t},\r\n\t\t\tbgcolor:{\r\n\t\t\t\tbackgroundColor:_d(o.bgcolor.backgroundColor,\"transparent\"),\r\n\t\t\t\tuse:_d(o.bgcolor.use,false),\r\n\t\t\t},\r\n\t\t\ttimeline:{\r\n\t\t\t\t//delay:_d(o.delay,1000),\r\n\t\t\t\tactionTriggered:_d(o.actionTriggered,false),\r\n\t\t\t\tease:_d(o.ease,\"power3.inOut\"),\r\n\t\t\t\tspeed:_d(o.speed,300),\r\n\t\t\t\tstart:_d(o.start,0),\r\n\t\t\t\tstartRelative:_d(o.startRelative,0),\r\n\t\t\t\tendWithSlide:_d(o.endWithSlide,false)\r\n\t\t\t},\r\n\r\n\t\t\tchars:{\r\n\t\t\t\tease:_d(o.chars.ease,\"inherit\"),\r\n\t\t\t\tuse:_d(o.chars.use,false),\r\n\t\t\t\tdirection: _d(o.chars.direction,\"forward\"),\r\n\t\t\t\tdelay: _d(o.chars.delay,5),\r\n\t\t\t\tx: RVS.F.cToResp({default:_d(o.chars.x,[0,0,\"inherit\"][NRI])}),\r\n\t\t\t\ty: RVS.F.cToResp({default:_d(o.chars.y,[0,0,\"inherit\"][NRI])}),\r\n\t\t\t\tz: _d(o.chars.z,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tscaleX: _d(o.chars.scaleX,[1,1,\"inherit\"][NRI]),\r\n\t\t\t\tscaleY: _d(o.chars.scaleY,[1,1,\"inherit\"][NRI]),\r\n\t\t\t\topacity: _d(o.chars.opacity,\"inherit\"),\r\n\t\t\t\trotationX: _d(o.chars.rotationX,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\trotationY: _d(o.chars.rotationY,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\trotationZ: _d(o.chars.rotationZ,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tskewX: _d(o.chars.skewX,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tskewY: _d(o.chars.skewY,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\toriginX:_d(o.chars.originX,[\"50%\",\"50%\",\"inherit\"][NRI]),\r\n\t\t\t\toriginY:_d(o.chars.originY,[\"50%\",\"50%\",\"inherit\"][NRI]),\r\n\t\t\t\toriginZ:_d(o.chars.originZ,[\"0\",\"0\",\"inherit\"][NRI]),\r\n\t\t\t\tfuse:_d(o.chars.fuse,false),\r\n\t\t\t\tblur:_d(o.chars.blur,[0,0,0][NRI]),\r\n\t\t\t\tgrayscale:_d(o.chars.grayscale,[0,0,0][NRI]),\r\n\t\t\t\tbrightness:_d(o.chars.brightness,[100,100,100][NRI]),\r\n\t\t\t},\r\n\t\t\twords:{\r\n\t\t\t\tease:_d(o.words.ease,\"inherit\"),\r\n\t\t\t\tuse:_d(o.words.use,false),\r\n\t\t\t\tdirection: _d(o.words.direction,\"forward\"),\r\n\t\t\t\tdelay: _d(o.words.delay,5),\r\n\t\t\t\tx: RVS.F.cToResp({default:_d(o.words.x,[0,0,\"inherit\"][NRI])}),\r\n\t\t\t\ty: RVS.F.cToResp({default:_d(o.words.y,[0,0,\"inherit\"][NRI])}),\r\n\t\t\t\tz: _d(o.words.z,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tscaleX: _d(o.words.scaleX,[1,1,\"inherit\"][NRI]),\r\n\t\t\t\tscaleY: _d(o.words.scaleY,[1,1,\"inherit\"][NRI]),\r\n\t\t\t\topacity: _d(o.words.opacity,\"inherit\"),\r\n\t\t\t\trotationX: _d(o.words.rotationX,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\trotationY: _d(o.words.rotationY,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\trotationZ: _d(o.words.rotationZ,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tskewX: _d(o.words.skewX,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tskewY: _d(o.words.skewY,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\toriginX:_d(o.words.originX,[\"50%\",\"50%\",\"inherit\"][NRI]),\r\n\t\t\t\toriginY:_d(o.words.originY,[\"50%\",\"50%\",\"inherit\"][NRI]),\r\n\t\t\t\toriginZ:_d(o.words.originY,[\"0\",\"0\",\"inherit\"][NRI]),\r\n\t\t\t\tfuse:_d(o.words.fuse,false),\r\n\t\t\t\tblur:_d(o.words.blur,[0,0,0][NRI]),\r\n\t\t\t\tgrayscale:_d(o.words.grayscale,[0,0,0][NRI]),\r\n\t\t\t\tbrightness:_d(o.words.brightness,[100,100,100][NRI]),\r\n\t\t\t},\r\n\t\t\tlines:{\r\n\t\t\t\tease:_d(o.lines.ease,\"inherit\"),\r\n\t\t\t\tuse:_d(o.lines.use,false),\r\n\t\t\t\tdirection: _d(o.lines.direction,\"forward\"),\r\n\t\t\t\tdelay: _d(o.lines.delay,5),\r\n\t\t\t\tx: RVS.F.cToResp({default:_d(o.lines.x,[0,0,\"inherit\"][NRI])}),\r\n\t\t\t\ty: RVS.F.cToResp({default:_d(o.lines.y,[0,0,\"inherit\"][NRI])}),\r\n\t\t\t\tz: _d(o.lines.z,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tscaleX: _d(o.lines.scaleX,[1,1,\"inherit\"][NRI]),\r\n\t\t\t\tscaleY: _d(o.lines.scaleY,[1,1,\"inherit\"][NRI]),\r\n\t\t\t\topacity: _d(o.lines.opacity,\"inherit\"),\r\n\t\t\t\trotationX: _d(o.lines.rotationX,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\trotationY: _d(o.lines.rotationY,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\trotationZ: _d(o.lines.rotationZ,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tskewX: _d(o.lines.skewX,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\tskewY: _d(o.lines.skewY,[0,0,\"inherit\"][NRI]),\r\n\t\t\t\toriginX:_d(o.lines.originX,[\"50%\",\"50%\",\"inherit\"][NRI]),\r\n\t\t\t\toriginY:_d(o.lines.originY,[\"50%\",\"50%\",\"inherit\"][NRI]),\r\n\t\t\t\toriginZ:_d(o.lines.originY,[\"0\",\"0\",\"inherit\"][NRI]),\r\n\t\t\t\tfuse:_d(o.lines.fuse,false),\r\n\t\t\t\tblur:_d(o.lines.blur,[0,0,0][NRI]),\r\n\t\t\t\tgrayscale:_d(o.lines.grayscale,[0,0,0][NRI]),\r\n\t\t\t\tbrightness:_d(o.lines.brightness,[100,100,100][NRI]),\r\n\t\t\t},\r\n\r\n\t\t\tsfx:{\r\n\t\t\t\teffect:_d(o.effect,\"\"),\r\n\t\t\t\tcolor:_d(o.sfxcolor,\"#ffffff\")\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tframe.sfx.effect = frame.sfx.effect===\"blockfrombottom\" ? \"blocktotop\" : frame.sfx.effect===\"blockfromtop\" ? \"blocktobottom\" : frame.sfx.effect===\"blockfromleft\" ? \"blocktoright\" : frame.sfx.effect===\"blockfromright\" ? \"blocktoleft\" : \"none\";\r\n\r\n\t\tfor (var i in RVS.JHOOKS.defaultFrame) {\r\n\t\t\tif(!RVS.JHOOKS.defaultFrame.hasOwnProperty(i)) continue;\r\n\t\t\tframe = RVS.JHOOKS.defaultFrame[i](frame);\r\n\t\t}\r\n\r\n\t\treturn frame;\r\n\t}\r\n\r\n\tfunction fourLevelAnims(_) {\r\n\t\tif (typeof _.transform.x!==\"object\") _.transform.x = RVS.F.cToResp({default:_d(_.transform.x,0)});\r\n\t\tif (typeof _.transform.y!==\"object\")_.transform.y = RVS.F.cToResp({default:_d(_.transform.y,0)});\r\n\r\n\t\tif (typeof _.mask.x!==\"object\")_.mask.x = RVS.F.cToResp({default:_d(_.mask.x,0)});\r\n\t\tif (typeof _.mask.y!==\"object\")_.mask.y = RVS.F.cToResp({default:_d(_.mask.y,0)});\r\n\r\n\t\tif (typeof _.chars.x!==\"object\")_.chars.x = RVS.F.cToResp({default:_d(_.chars.x,\"inherit\")});\r\n\t\tif (typeof _.chars.y!==\"object\")_.chars.y = RVS.F.cToResp({default:_d(_.chars.y,\"inherit\")});\r\n\r\n\r\n\t\tif (typeof _.words.x!==\"object\")_.words.x = RVS.F.cToResp({default:_d(_.words.x,\"inherit\")});\r\n\t\tif (typeof _.words.y!==\"object\")_.words.y = RVS.F.cToResp({default:_d(_.words.y,\"inherit\")});\r\n\r\n\t\tif (typeof _.lines.x!==\"object\")_.lines.x = RVS.F.cToResp({default:_d(_.lines.x,\"inherit\")});\r\n\t\tif (typeof _.lines.y!==\"object\") _.lines.y = RVS.F.cToResp({default:_d(_.lines.y,\"inherit\")});\r\n\t\treturn _;\r\n\t}\r\n\r\n\t/*\r\n\tBUILD AND EXTEND DEFAULT LAYERS\r\n\t*/\r\n\tRVS.F.addLayerObj = function(type,obj,compare,updateDefaults,ignoreUID) {\r\n\r\n\t\tif (RVS.ENV.img_ph_url===undefined) RVS.ENV.video_ph_url = RVS.ENV.img_ph_url = RVS.ENV.plugin_url+\"admin/assets/images/transparent_placeholder.png\";\r\n\r\n\t\tif (typeof type===\"object\") {\r\n\t\t\tobj = type;\r\n\t\t\ttype = obj.type;\r\n\t\t}\r\n\r\n\r\n\t\t//TOP MIDDLE, BOTTOM ZONES SAVED AS THEY ARE\r\n\t\tif (obj!==undefined && obj.uid!==undefined && jQuery.inArray(obj.uid,[\"top\",\"bottom\",\"middle\",\"zone\"])>=0) return obj;\r\n\t\tif (jQuery.inArray(type,[\"top\",\"bottom\",\"middle\",\"zone\"])>=0) return obj;\r\n\r\n\r\n\t\tobj = obj === undefined ? {} : obj;\r\n\r\n\t\tif (obj.type===\"boxshadow\" || obj.type===\"textshadow\") return;\r\n\r\n\t\tvar newLayer = {};\r\n\t\tnewLayer.addOns = obj.addOns || {};\r\n\t\tnewLayer.type = _d(obj.type,type);  \t//text, image, video, audio, svg, shape\r\n\t\tnewLayer.subtype = _d(obj.subtype,\"\");\r\n\t\tnewLayer.subsubtype = _d(obj.subsubtype,\"\");\r\n\t\tnewLayer.linebreak = _d(obj.linebreak,false);\r\n\t\tnewLayer.text = (type===\"text\" || type===\"button\") && obj.subtype!==\"forms\" ? _d(obj.text,\"New Layer\") : \"\";\r\n\t\tnewLayer.placeholder = type===\"text\" || type===\"button\" ? _d(obj.placeholder,\"\") : \"\";\r\n\t\tnewLayer.alias = RVS.F.firstCharUppercase(_d(obj.alias,\"New Layer\"));\r\n\t\tif (ignoreUID!==true && !compare) newLayer.uid = _d(obj.uid,RVS.F.getUniqueid());\r\n\t\tnewLayer.version = RVS.ENV.revision;\r\n\t\t/*newLayer.version = _d(obj.version,\"6.0.0\");\r\n\t\tnewLayer.version = newLayer.version<\"6.0.0\" ? \"6.0.0\" : newLayer.version;*/\r\n\r\n\t\tnewLayer.htmltag = _d(obj.htmltag,\"div\");\r\n\t\tnewLayer.customCSS = _d(obj.customCSS,\"\");\r\n\t\tnewLayer.customHoverCSS = _d(obj.customHoverCSS,\"\");\r\n\t\tnewLayer.layerLibSrc = _d(obj.layerLibSrc,'');\r\n\r\n\t\tswitch (newLayer.type) {\r\n\t\t\tcase \"text\":\r\n\t\t\tcase \"button\":\r\n\t\t\tcase \"image\":\r\n\t\t\t\tnewLayer.media = _d(obj.media,{\r\n\t\t\t\t\timageUrl:RVS.ENV.img_ph_url,\r\n\t\t\t\t\timageId:\"\",\r\n\t\t\t\t\timageFromStream:false\r\n\t\t\t\t});\r\n\t\t\t\tnewLayer.media.loaded = false;\r\n\t\t\tbreak;\r\n\t\t\tcase \"audio\":\r\n\t\t\tcase \"video\":\r\n\t\t\t\tnewLayer.media = _d(obj.media,{\r\n\t\t\t\t\tmediaType:newLayer.type===\"audio\" ? \"audio\" : !compare ? \"html5\" : \"\",\r\n\t\t\t\t\taudioUrl:\"\",\r\n\t\t\t\t\taudioTitle:\"\",\r\n\t\t\t\t\tposterUrl:RVS.ENV.video_ph_url,\r\n\t\t\t\t\tposterId:\"\",\r\n\t\t\t\t\tfitCover: true,\r\n\t\t\t\t\tposterFromStream:false,\r\n\t\t\t\t\tthumbs:{\r\n\t\t\t\t\t\tveryBig:{width:640,height:480,url:RVS.ENV.video_ph_url},\r\n\t\t\t\t\t\tbig:{width:640,height:480,url:RVS.ENV.video_ph_url},\r\n\t\t\t\t\t\tlarge:{width:640,height:360,url:RVS.ENV.video_ph_url},\r\n\t\t\t\t\t\tmedium:{width:320,height:240,url:RVS.ENV.video_ph_url},\r\n\t\t\t\t\t\tsmall:{width:200,height:150,url:RVS.ENV.video_ph_url},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnointeraction:false,\r\n\t\t\t\t\tdescSmall:\"\",\r\n\t\t\t\t\tdescription:\"\",\r\n\t\t\t\t\tlink:\"\",\r\n\t\t\t\t\tmp4Url:\"\",\r\n\t\t\t\t\togvUrl:\"\",\r\n\t\t\t\t\twebmUrl:\"\",\r\n\t\t\t\t\tallowFullscreen:true,\r\n\t\t\t\t\targs:\"\",\r\n\t\t\t\t\tauthor:\"\",\r\n\t\t\t\t\tautoPlay:\"true\",\r\n\t\t\t\t\t//autoPlayFirstTime:false,\r\n\t\t\t\t\tcontrols:false,\r\n\t\t\t\t\tcover:false,\r\n\t\t\t\t\tdisableOnMobile:false,\r\n\t\t\t\t\tdotted:\"none\",\r\n\t\t\t\t\tdottedSize:1,\r\n\t\t\t\t\tdottedColorA:\"transparent\",\r\n\t\t\t\t\tdottedColorB:\"#000000\",\r\n\t\t\t\t\tstartAt:\"00:00\",\r\n\t\t\t\t\tendAt:\"00:00\",\r\n\t\t\t\t\tforceRewind:true,\r\n\t\t\t\t\tfullWidth:false,\r\n\t\t\t\t\tid:\"\",\r\n\t\t\t\t\tvideoFromStream:false,\r\n\t\t\t\t\tlargeControls:true,\r\n\t\t\t\t\tleaveOnPause:true,\r\n\t\t\t\t\tmute:true,\r\n\t\t\t\t\tnextSlideAtEnd:true,\r\n\t\t\t\t\tpreload:\"auto\",\r\n\t\t\t\t\tpreloadWait:\"0\",\r\n\t\t\t\t\tratio:\"16:9\",\r\n\t\t\t\t\tposterOnPause:false,\r\n\t\t\t\t\tposterOnMobile:false,\r\n\t\t\t\t\tstopAllVideo:true,\r\n\t\t\t\t\tplayInline:true,\r\n\t\t\t\t\thideAudio:true,\r\n\t\t\t\t\tspeed:1,\r\n\t\t\t\t\tloop:true,\r\n\t\t\t\t\tpausetimer:false,\r\n\t\t\t\t\tvolume:\"100\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (newLayer!==undefined && newLayer.media!==undefined) {\r\n\t\t\t\t\tif (newLayer.media.dotted.indexOf(\"white\")>0) newLayer.media.dottedColorB = \"rgba(255,255,255,255)\";\r\n\t\t\t\t\tif (newLayer.media.dotted.indexOf(\"twoxtwo\")>=0) newLayer.media.dotted = \"1\";\r\n\t\t\t\t\telse if (newLayer.media.dotted.indexOf(\"threexthree\")>=0) newLayer.media.dotted = \"2\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (newLayer.media!==undefined && newLayer.media.type===\"video\" && newLayer.media.allowFullscreen===undefined && compare!==true) newLayer.media.allowFullscreen=true;\r\n\r\n\t\t\t\t// OLD FALLBACK\r\n\t\t\t\tif (newLayer.media!==undefined && newLayer.media.mediaType===\"streamyoutube\") {\r\n\t\t\t\t\tnewLayer.media.mediaType = \"youtube\";\r\n\t\t\t\t\tnewLayer.media.videoFromStream = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (newLayer.media!==undefined && newLayer.media.mediaType===\"streamvimeo\") {\r\n\t\t\t\t\tnewLayer.media.mediaType = \"vimeo\";\r\n\t\t\t\t\tnewLayer.media.videoFromStream = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnewLayer.media.mediaType = !compare && (newLayer.media.mediaType==='' || newLayer.media.mediaType===undefined) ? \"html5\" : compare ? \"alwayswrite\" : newLayer.media.mediaType;\r\n\r\n\t\t\t\t// CHANGES, TO SET LOOP AND PAUSE TIMER INDEPENDENT, HAVING 4 CASES\r\n\t\t\t\tnewLayer.media.loop = newLayer.media.loop===true || (obj!==undefined && obj.media!==undefined && (obj.media.loop===\"loopandnoslidestop\" || obj.media.loop===\"loop\" || obj.media.loop===true || obj.media.loop===\"true\")) ? true : false;\r\n\t\t\t\tnewLayer.media.pausetimer = obj!==undefined && obj.media!==undefined && (obj.media.pausetimer===true || (obj.media.pausetimer!==false && obj.media.loop !== \"loopandnoslidestop\"))  ? true : false;\r\n\t\t\t\tif (newLayer.media.loop===true && newLayer.media.nextSlideAtEnd===true) newLayer.media.loop = false;\r\n\r\n\t\t\t\tif (compare && newLayer.media!==undefined) {\r\n\t\t\t\t\tnewLayer.media.loop=true;\r\n\t\t\t\t\tnewLayer.media.pausetimer = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (compare) newLayer.media.loop=undefined;\r\n\r\n\t\t\tbreak;\r\n\t\t\tcase \"svg\":\r\n\t\t\tcase \"object\":\r\n\t\t\t\tnewLayer.svg = _d(obj.svg, {\r\n\t\t\t\t\tsource:\"\",\r\n\t\t\t\t\trenderedData:\"\"\r\n\t\t\t\t});\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\tif (newLayer.media!==undefined && newLayer.media.lastLibrary!==undefined) {\r\n\t\t\tnewLayer.media.imageLib = newLayer.media.lastLibrary;\r\n\t\t\tdelete newLayer.medialastLibrary;\r\n\t\t}\r\n\r\n\r\n\t\tnewLayer.toggle = _d(obj.toggle,{\r\n\t\t\tset:false,\r\n\t\t\ttext:\"\",\r\n\t\t\tinverse:false,\r\n\t\t\tuseHover:false\r\n\r\n\t\t});\r\n\r\n\t\tvar defwidth = compare===true || updateDefaults===true ? \"auto\" : newLayer.type===\"audio\" ? \"54\" : newLayer.type!==\"image\" && newLayer.type!==\"shape\" && newLayer.type!==\"video\" && newLayer.type!==\"group\" ? \"auto\" : newLayer.type!==\"video\" ? \"300px\" : \"320px\",\r\n\t\t\tdefheight = compare===true || updateDefaults===true ? \"auto\" : newLayer.type===\"audio\" ? \"54\" : newLayer.type!==\"image\" && newLayer.type!==\"shape\" && newLayer.type!==\"video\" && newLayer.type!==\"group\" ? \"auto\" : \"180px\",\r\n\t\t\tdefproportion = compare===true ? \"auto\" : newLayer.type===\"svg\" || newLayer.type===\"image\" || newLayer.type===\"video\" ?  true : false,\r\n\t\t\tdefaspectrat = compare===true || updateDefaults===true  ? \"auto\" : newLayer.type!==\"image\" && newLayer.type!==\"shape\" && newLayer.type!==\"video\" && newLayer.type!==\"group\" ? \"none\" : newLayer.type!==\"video\" ? 300/180 : 320/180;\r\n\r\n\r\n\t\tnewLayer.size = _d(obj.size,{\r\n\t\t\twidth: RVS.F.cToResp({default:defwidth}),\r\n\t\t\theight:RVS.F.cToResp({default:defheight}),\r\n\t\t\tmaxWidth:RVS.F.cToResp({default:\"none\"}),\r\n\t\t\tmaxHeight:RVS.F.cToResp({default:\"none\"}),\r\n\t\t\tminWidth:RVS.F.cToResp({default:\"none\"}),\r\n\t\t\tminHeight:RVS.F.cToResp({default:\"none\"}),\r\n\t\t\toriginalWidth:0,\r\n\t\t\toriginalHeight:0,\r\n\t\t\taspectRatio:RVS.F.cToResp({default:defaspectrat}),\r\n\t\t\tcovermode:\"custom\",\r\n\t\t\tscaleProportional:defproportion\r\n\t\t});\r\n\r\n\t\tif (newLayer.size.height.d!==undefined && newLayer.size.height.d.v===null) newLayer.size.height.d.v = \"auto\";\r\n\r\n\t\tif (newLayer.type===\"svg\" ) newLayer.size.scaleProportional = true;\r\n\r\n\t\tnewLayer.size.originalWidth = newLayer.size.originalWidth===0 || newLayer.size.originalWidth===undefined ? newLayer.size.width.d.v : newLayer.size.originalWidth;\r\n\t\tnewLayer.size.originalHeight = newLayer.size.originalHeight===0 || newLayer.size.originalHeight===undefined ? newLayer.size.height.d.v : newLayer.size.originalHeight;\r\n\r\n\t\tnewLayer.position = _d(obj.position,{\r\n\t\t\tx: !compare && !updateDefaults ? RVS.F.cToResp({default:(50+RVS.S.rb_ScrollX),unit:\"px\"}) : RVS.F.cToResp({default:0,unit:\"px\"}),\r\n\t\t\ty: !compare && !updateDefaults ? RVS.F.cToResp({default:(50+RVS.S.rb_ScrollY),unit:\"px\"}) : RVS.F.cToResp({default:(0),unit:\"px\"}),\r\n\t\t\thorizontal:RVS.F.cToResp({default:\"left\"}),\r\n\t\t\tvertical:RVS.F.cToResp({default:\"top\"}),\r\n\t\t\tposition: !compare ? \"absolute\" : \"\",\r\n\t\t\tstaticZ:\"default\"\r\n\t\t});\r\n\t\t// New Static Layers z Index\r\n\t\tif (newLayer.position!==undefined && !compare) newLayer.position.staticZ=newLayer.position.staticZ===undefined ? \"default\" : newLayer.position.staticZ;\r\n\r\n\t\t// zIndex Settings (Also Order in the Layer List !!)\r\n\r\n\r\n\t\tif (obj.position!==undefined && obj.position.zIndex!==undefined)\r\n\t\t\tnewLayer.position.zIndex = obj.position.zIndex;\r\n\t\telse\r\n\t\t\tnewLayer.position.zIndex = getHighestZindex();\r\n\r\n\t\tif (compare) newLayer.position.zIndex=\"nA\";\r\n\r\n\t\tnewLayer.attributes = _d(obj.attributes,{\r\n\t\t\talt:\"\",\r\n\t\t\taltOption:\"media_library\",\r\n\t\t\tid:\"\",\r\n\t\t\tclasses:\"\",\r\n\t\t\trel:\"\",\r\n\t\t\ttabIndex:0,\r\n\t\t\ttitle:\"\",\r\n\t\t\twrapperClasses:\"\",\r\n\t\t\twrapperId:\"\"\r\n\t\t});\r\n\t\tnewLayer.behavior = _d(obj.behavior,{\r\n\t\t\tautoResponsive:(newLayer.type===\"row\" || newLayer.type===\"column\" ? false : !compare && !updateDefaults ? RVS.SLIDER.settings.def.autoResponsive : true),\r\n\t\t\tintelligentInherit:(newLayer.type===\"row\" || newLayer.type===\"column\" ? false : !compare && !updateDefaults ? RVS.SLIDER.settings.def.intelligentInherit : true),\r\n\t\t\tresponsiveChilds:!compare && !updateDefaults ? RVS.SLIDER.settings.def.responsiveChilds : true,\r\n\t\t\tbaseAlign:\"grid\",\r\n\t\t\tresponsiveOffset:!compare && !updateDefaults ? RVS.SLIDER.settings.def.responsiveOffset : true,\r\n\t\t\tlazyLoad:\"auto\",\r\n\t\t\timageSourceType:\"full\",\r\n\t\t\tstreamSourceType:\"full\"\r\n\t\t});\r\n\r\n\t\tnewLayer.group = _d(obj.group,{\r\n\t\t\tpuid:-1,\r\n\t\t\tgroupOrder: !compare ? newLayer.position.zIndex : 99999,\r\n\t\t\tcolumnbreakat:\"tablet\",\r\n\t\t\tcolumnSize:\"1/3\"\r\n\r\n\t\t});\r\n\r\n\r\n\t\tnewLayer.position.position = !compare ? newLayer.group!==undefined && newLayer.group.puid == -1 ? \"absolute\" : newLayer.position.position : \"\";\r\n\r\n\r\n\r\n\t\tif (newLayer.type===\"row\" && newLayer.group.puid===-1)\r\n\t\t\tnewLayer.group.puid = \"top\";\r\n\t\t_opacity = ((newLayer.type===\"group\" || newLayer.type===\"column\" || newLayer.type===\"row\") && (!compare && !updateDefaults)) ?  1 : 0;\r\n\r\n\r\n\t\tnewLayer.timeline = _d(obj.timeline,{\r\n\t\t\tscrollBased:\"default\",\r\n\t\t\tforcePrepare:false,\r\n\t\t\tscrollBasedOffset:0,\r\n\t\t\tfiltersOnMask:false,\r\n\t\t\tframeToIdle:\"frame_1\",\r\n\t\t\tframes:{\r\n\r\n\t\t\t\tframe_0:defaultFrame({\r\n\t\t\t\t\t\talias:RVS_LANG.enterstage,\r\n\t\t\t\t\t\topacity:_opacity\r\n\t\t\t\t\t},\"frame_0\"),\r\n\t\t\t\tframe_1:defaultFrame({\r\n\t\t\t\t\t\talias:RVS_LANG.onstage,\r\n\t\t\t\t\t\topacity:1,\r\n\t\t\t\t\t\tchars:{\tx: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0, blur:0, grayscale:0, brightness:100, fuse:false},\r\n\t\t\t\t\t\twords:{\tx: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0, blur:0, grayscale:0, brightness:100, fuse:false},\r\n\t\t\t\t\t\tlines:{\tx: 0,y: 0,z: 0,opacity: 1,rotationZ: 0,rotationX: 0,rotationY: 0,scaleX: 1,scaleY: 1,skewX: 0,skewY: 0, blur:0, grayscale:0, brightness:100, fuse:false},\r\n\t\t\t\t\t},\"frame_1\"),\r\n\t\t\t\tframe_999:defaultFrame({endWithSlide:true,alias:RVS_LANG.leavestage,opacity:(!compare && !updateDefaults ? 0 : \"inherit\")},\"frame_999\")\r\n\t\t\t},\r\n\t\t\tclipPath:{\r\n\t\t\t\tuse:false,\r\n\t\t\t\ttype:\"rectangle\",\r\n\t\t\t\torigin:\"l\"\r\n\t\t\t},\r\n\t\t\tstatic:{\r\n\t\t\t\tstart:1,\r\n\t\t\t\tend:\"last\"\r\n\t\t\t},\r\n\t\t\tloop:defaultLoopFrame(),\r\n\t\t\ttloop:{\r\n\t\t\t\tuse:false,\r\n\t\t\t\tfrom:\"\",\r\n\t\t\t\tto:\"\",\r\n\t\t\t\trepeat:-1,\r\n\t\t\t\tkeep:true,\r\n\t\t\t\tchildren:true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tnewLayer.timeline.tloop = newLayer.timeline.tloop===undefined ? { use:false,from:\"\",to:\"\",repeat:-1} : newLayer.timeline.tloop;\r\n\r\n\t\tnewLayer.timeline.scrollBased = newLayer.timeline.scrollBased===undefined ? \"default\" : newLayer.timeline.scrollBased;\r\n\t\tnewLayer.timeline.scrollBasedOffset = newLayer.timeline.scrollBasedOffset===undefined ? 0 : newLayer.timeline.scrollBasedOffset;\r\n\t\tnewLayer.timeline.frames.frame_0.alias = newLayer.timeline.frames.frame_0.alias===undefined ? RVS_LANG.enterstage : newLayer.timeline.frames.frame_0.alias;\r\n\t\tnewLayer.timeline.frames.frame_1.alias = newLayer.timeline.frames.frame_1.alias===undefined ? RVS_LANG.onstage : newLayer.timeline.frames.frame_1.alias;\r\n\t\tnewLayer.timeline.frames.frame_999.alias = newLayer.timeline.frames.frame_999.alias===undefined ? RVS_LANG.leavestage : newLayer.timeline.frames.frame_999.alias;\r\n\r\n\t\t// Update of Values if something went wrong in Multiple Levels of Animations\r\n\t\tfor (var i in newLayer.timeline.frames) {\r\n\t\t\tif(!newLayer.timeline.frames.hasOwnProperty(i)) continue;\r\n\t\t\tnewLayer.timeline.frames[i] = fourLevelAnims(newLayer.timeline.frames[i]);\r\n\t\t\tif (newLayer.timeline.frames[i].timeline.start<0) newLayer.timeline.frames[i].timeline.start = 0;\r\n\t\t\tif (newLayer.timeline.frames[i].timeline.startRelative<0) newLayer.timeline.frames[i].timeline.startRelative = 0;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tnewLayer.effects = _d(obj.effects,{\r\n\t\t\tparallax:\"-\",\r\n\t\t\tpxmask:false,\r\n\t\t\tattachToBg:false,\r\n\t\t\teffect:\"default\"\r\n\t\t});\r\n\r\n\r\n\t/**/\r\n\r\n\t\tnewLayer.idle = _d(obj.idle,{\r\n\t\t\tstyle:\"\",\r\n\t\t\tcolor:RVS.F.cToResp({default:\"#ffffff\"}),\r\n\t\t\tmargin:RVS.F.cToResp({default:[0,0,0,0]}),\r\n\t\t\tmarginLock:false,\r\n\t\t\tpaddingLock:false,\r\n\t\t\tborderWidthLock:false,\r\n\t\t\tborderRadiusLock:false,\r\n\t\t\tpadding:RVS.F.cToResp({default:(newLayer.type===\"column\"? [10,10,10,10] : newLayer.type===\"row\" ? [10,10,10,10] : [0,0,0,0])}),\r\n\t\t\tautolinebreak:true,\r\n\t\t\tfloat:\tRVS.F.cToResp({default:\"none\"}),\r\n\t\t\tclear:\tRVS.F.cToResp({default:\"none\"}),\r\n\t\t\tdisplay:\"block\",\r\n\t\t\tfontFamily:\"Roboto\",\r\n\t\t\tfontStyle:false,\r\n\t\t\tfontSize:RVS.F.cToResp({default:\"20\"}),\r\n\t\t\tfontWeight:RVS.F.cToResp({default:\"400\"}),\r\n\t\t\tletterSpacing:RVS.F.cToResp({default:\"0\"}),\r\n\t\t\tlineHeight:RVS.F.cToResp({default:\"25\"}),\r\n\t\t\toverflow:\"visible\",\r\n\t\t\ttextAlign:RVS.F.cToResp({default:\"left\"}),\r\n\t\t\tverticalAlign:\"top\",\r\n\t\t\tcursor:\"auto\",\r\n\t\t\tbackgroundColor: (newLayer.type===\"shape\" && !compare && !updateDefaults ? \"rgba(0,0,0,0.5)\" : \"transparent\"),\r\n\t\t\tbackgroundPosition:\"center center\",\r\n\t\t\tbackgroundRepeat:\"no-repeat\",\r\n\t\t\tbackgroundSize:\"cover\",\r\n\t\t\tbackgroundSizePerc:\"100\",\r\n\t\t\tbackgroundSizePix:\"100\",\r\n\t\t\tbackgroundImage:\"\",\r\n\t\t\tbackgroundImageId:\"\",\r\n\t\t\tbgFromStream:false,\r\n\t\t\tborderColor:\"transparent\",\r\n\t\t\tborderRadius:{v:[0,0,0,0],u:\"%\"},\r\n\t\t\tborderStyle:RVS.F.cToResp({default:\"none\"}),\r\n\t\t\tborderWidth:[0,0,0,0],\r\n\t\t\trotationX:0,\r\n\t\t\trotationY:0,\r\n\t\t\trotationZ:0,\r\n\t\t\topacity:1,\r\n\t\t\ttextDecoration:\"none\",\r\n\t\t\ttextTransform:\"none\",\r\n\t\t\tfiltersIOSFix:\"d\",\r\n\r\n\t\t\tboxShadow:{\r\n\t\t\t\t\t\tinuse:false,\r\n\t\t\t\t\t\tcontainer:\"content\",\r\n\t\t\t\t\t\thoffset:RVS.F.cToResp({default:0,val:0}),\r\n\t\t\t\t\t\tvoffset:RVS.F.cToResp({default:0,val:0}),\r\n\t\t\t\t\t\tblur:RVS.F.cToResp({default:0,val:0}),\r\n\t\t\t\t\t\tspread:RVS.F.cToResp({default:0,val:0}),\r\n\t\t\t\t\t\tcolor:'rgba(0,0,0,0.25)'\r\n\t\t\t\t\t},\r\n\t\t\ttextShadow:{\r\n\t\t\t\t\tinuse:false,\r\n\t\t\t\t\thoffset:RVS.F.cToResp({default:0,val:0}),\r\n\t\t\t\t\tvoffset:RVS.F.cToResp({default:0,val:0}),\r\n\t\t\t\t\tblur:RVS.F.cToResp({default:0,val:0}),\r\n\t\t\t\t\tcolor:'rgba(0,0,0,0.25)'\r\n\t\t\t\t},\r\n\t\t\ttextStroke:{\r\n\t\t\t\t\tinuse:false,\r\n\t\t\t\t\twidth:RVS.F.cToResp({default:0,val:1}),\r\n\t\t\t\t\tcolor:'rgba(0,0,0,0.25)'\r\n\t\t\t\t},\r\n\t\t\tfilter:{blendMode:\"normal\",showInEditor:true},\r\n\t\t\tspikeUse:false,\r\n\t\t\tspikeLeft:\"none\",\r\n\t\t\tspikeLeftWidth:10,\r\n\t\t\tspikeRight:\"none\",\r\n\t\t\tspikeRightWidth:10,\r\n\t\t\tcornerLeft:\"none\",\r\n\t\t\tcornerRight:\"none\",\r\n\t\t\tselectable:\"default\",\r\n\t\t\twhiteSpace:RVS.F.cToResp({default:(newLayer.type===\"row\" || newLayer.type===\"column\" ? \"normal\" : compare!==true && updateDefaults!=true ? \"full\" : \"nowrap\")}),\r\n\t\t\tsvg:{\r\n\t\t\t\toriginalColor:false,\r\n\t\t\t\tcolor:RVS.F.cToResp({default:\"#ffffff\"}),\r\n\t\t\t\tstrokeColor:\"transparent\",\r\n\t\t\t\tstrokeDashArray:0,\r\n\t\t\t\tstrokeDashOffset:0,\r\n\t\t\t\tstrokeWidth:0\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (typeof newLayer.idle.borderStyle!==\"object\") newLayer.idle.borderStyle = RVS.F.cToResp({default:newLayer.idle.borderStyle});\r\n\r\n\t\t// Update TextStroke to Responsive Variable\r\n\t\tif (newLayer.idle.textStroke!==undefined && (typeof newLayer.idle.textStroke.width===\"string\" || typeof newLayer.idle.textStroke.width===\"number\"))\r\n\t\t\t newLayer.idle.textStroke.width =  RVS.F.cToResp({default:0,val:newLayer.idle.textStroke.width});\r\n\r\n\r\n\t\t//GOOGLE FONT\r\n\t\tnewLayer.idle.fontFamily = newLayer.idle.fontFamily===undefined || newLayer.idle.fontFamily===\"\"  || newLayer.idle.fontFamily.toLowerCase() !== newLayer.idle.fontFamily ? RVS.F.compareGoogleFontName(newLayer.idle.fontFamily,true) : RVS.F.compareGoogleFontName(newLayer.idle.fontFamily);\r\n\t\tnewLayer.idle.fontFamily = newLayer.idle.fontFamily===undefined ? \"Roboto\" : newLayer.idle.fontFamily;\r\n\t\tnewLayer.idle.fontStyle = newLayer.idle.fontStyle===\"normal\" || newLayer.idle.fontStyle===false ? false : true;\r\n\r\n\r\n\t\t//FIX for Old Datas ! In case Update Rutine fails\r\n\t\t//\r\n\t\tfor (var i in RVS.V.sizes) if (RVS.V.sizes.hasOwnProperty(i)) for (var j=0;j<4;j++) {\r\n\t\t\tnewLayer.idle.margin[RVS.V.sizes[i]].v[j] = parseInt(newLayer.idle.margin[RVS.V.sizes[i]].v[j],0) || 0;\r\n\t\t\tnewLayer.idle.padding[RVS.V.sizes[i]].v[j] = parseInt(newLayer.idle.padding[RVS.V.sizes[i]].v[j],0) || 0;\r\n\t\t}\r\n\r\n\r\n\t\tnewLayer.hover = _d(obj.hover,{\r\n\t\t\tusehover:false,\r\n\t\t\tusehovermask:false,\r\n\t\t\tcolor:\"#ffffff\",\r\n\t\t\topacity:1,\r\n\t\t\tbackgroundColor:\"transparent\",\r\n\t\t\tgradientStyle:\"fading\",\r\n\t\t\tborderColor:\"transparent\",\r\n\t\t\tborderRadius:{v:[0,0,0,0],u:\"%\"},\r\n\t\t\tborderStyle:\"none\",\r\n\t\t\tborderWidth:[0,0,0,0],\r\n\t\t\ttransformPerspective:RVS.SLIDER.settings.general.perspective,\r\n\t\t\toriginX:\"50%\",\r\n\t\t\toriginY:\"50%\",\r\n\t\t\toriginZ:\"50%\",\r\n\t\t\trotationZ:0,\r\n\t\t\trotationX:0,\r\n\t\t\trotationY:0,\r\n\t\t\tscaleX:1,\r\n\t\t\tscaleY:1,\r\n\t\t\tskewX:0,\r\n\t\t\tskewY:0,\r\n\t\t\ttextDecoration:\"none\",\r\n\t\t\tx:0,\r\n\t\t\ty:0,\r\n\t\t\tz:0,\r\n\t\t\tspeed:300,\r\n\t\t\tease:\"power3.inOut\",\r\n\t\t\tzIndex:\"auto\",\r\n\t\t\tpointerEvents:\"auto\",\r\n\t\t\tfilter:{grayscale:0, brightness:100, blur:0},\r\n\t\t\tsvg:{\r\n\t\t\t\tcolor:\"#ffffff\",\r\n\t\t\t\tstrokeColor:\"transparent\",\r\n\t\t\t\tstrokeDashArray:0,\r\n\t\t\t\tstrokeDashOffset:0,\r\n\t\t\t\tstrokeWidth:0\r\n\t\t\t}\r\n\t\t});\r\n\t\tnewLayer.actions = _d(obj.actions,{\r\n\t\t\ttriggerMemory:\"reset\",\r\n\t\t\taction:[]\r\n\t\t});\r\n\r\n\t\tnewLayer.actions.inactive_actions = [];\r\n\t\tnewLayer.visibility = _d(obj.visibility,{\r\n\t\t\tvisible:true,\r\n\t\t\tlocked:false,\r\n\t\t\td:true,\r\n\t\t\tm:true,\r\n\t\t\tn:true,\r\n\t\t\tt:true,\r\n\t\t\thideunder:false,\r\n\t\t\tonlyOnSlideHover:false,\r\n\t\t\tpublish:true,\r\n\t\t\talwaysOnCarousel:false\r\n\t\t});\r\n\t\tnewLayer.runtime = _d(obj.runtime,{\r\n\t\t\tinternalClass:\"\",\r\n\t\t\tisDemo:false,\r\n\t\t\tunavailable:false\r\n\t\t});\r\n\r\n\t\tif (ignoreUID!==true) RVS.S.uniqueIds.push(newLayer.uid);\r\n\r\n\r\n\t\tfor (var i in RVS.LIB.ADDONS) {\r\n\t\t\tif(!RVS.LIB.ADDONS.hasOwnProperty(i)) continue;\r\n\t\t\tnewLayer.addOns[i] = newLayer.addOns[i]===undefined ? {enable:false} : newLayer.addOns[i];\r\n\t\t}\r\n\r\n\t\t// UPDATE THE CUSTOM CSS FROM OLDER VERSION\r\n\t\tif (newLayer.customCSS!==undefined && newLayer.customCSS.length>0) {\r\n\t\t\tnewLayer.customCSS = newLayer.customCSS.replace(/\\s\\s+/g, ' ');\r\n\t\t\tvar rules = newLayer.customCSS.split(\";\"),\r\n\t\t\t\tnewrules = \"\";\r\n\t\t\tfor (var i in rules) {\r\n\t\t\t\tif(!rules.hasOwnProperty(i)) continue;\r\n\t\t\t\tvar rule = rules[i].split(\":\"),\r\n\t\t\t\t\tkey = rule[0].replace(/\\s/g, \"\");\r\n\r\n                if(RVS.F.trim(key) === '') continue;\r\n\t\t\t\tswitch (key) {\r\n\t\t\t\t\tcase \"letter-spacing\":newLayer.idle.letterSpacing = RVS.F.cToResp({default:rule[1]});break;\r\n\t\t\t\t\tcase \"text-align\":newLayer.idle.textAlign = RVS.F.cToResp({default:rule[1]});break;\r\n\t\t\t\t\tcase \"text-shadow\":if (rule[1].indexOf(\"none\")===-1) newrules += rules[i];break;\r\n\t\t\t\t\tdefault:newrules += rules[i] + \";\";break;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnewLayer.customCSS = newrules;\r\n\t\t}\r\n\r\n        //CLEAN UP LAYER ACTIONS HERE\r\n        var cleanActions = [];\r\n        if (newLayer.actions!==undefined) {\r\n            for (var j in newLayer.actions.action) if (newLayer.actions.action.hasOwnProperty(j)) {\r\n                if (newLayer.actions.action[j].migrateMute==undefined && newLayer.actions.action[j].rsColorPicker==undefined && newLayer.actions.action[j].get==undefined)\r\n                cleanActions.push(newLayer.actions.action[j]);\r\n            }\r\n            newLayer.actions.action = cleanActions;\r\n        }\r\n\r\n\t\treturn newLayer;\r\n\t};\r\n\r\n\t// SIMPLIFY SINGLE LAYER OBJECT STRUCTURE\r\n\tRVS.F.simplifyLayer = function(_) {\r\n\t\tif (_.type===\"zone\")\r\n\t\t\treturn RVS.F.safeExtend(true,{},_);\r\n\t\telse\r\n\t\t\treturn RVS.F.safeExtend(true,{}, RVS.F.simplifyObject(RVS.F.addLayerObj(_.type,undefined,true),RVS.F.safeExtend(true,{},_)));\r\n\t};\r\n\t// SIMPLIFY ALL LAYER STRUCTURE\r\n\tRVS.F.simplifyAllLayer = function(layers) {\r\n\r\n\t\tvar ret = {};\r\n\t\tfor (var i in layers) {\r\n\t\t\tif(!layers.hasOwnProperty(i)) continue;\r\n\t\t\tret[i] = RVS.F.simplifyLayer(layers[i]);\r\n\t\t\tret[i].type = layers[i].type;\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n\r\n\t// BUILD THE FULL LAYER STRUCTURE OF SIMPLIFIED STRUCTURES\r\n\tRVS.F.expandAllLayer = function(layers) {\r\n\t\tvar ret= {};\r\n\t\tfor (var i in layers) {\r\n\t\t\tif(!layers.hasOwnProperty(i)) continue;\r\n\t\t\tret[i] = RVS.F.safeExtend(true,RVS.F.addLayerObj(layers[i].type,undefined,true), layers[i]);\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n\r\n\r\n\tRVS.F.initAddonMigration = function(_) {\r\n\t};\r\n\r\n})();\r\n"}
}});
